(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"6oWQ":function(e,t,i){"use strict";i.r(t),i.d(t,"ControlesModule",function(){return gu});var s=i("ofXK"),n=i("tyNb"),o=i("+0xr"),r=i("M9IT"),l=i("Dh3D"),a=i("0IaG"),h=i("PSD3"),c=i.n(h),d=i("v8Ou"),p=i("3Pt+"),u=i("MgB1"),m=i("fXoL"),g=i("l7P3"),b=i("FesS"),f=i("kmnG"),y=i("qFsG"),v=i("d3UM"),C=i("bTqV"),w=i("NFeN"),O=i("FKr1");function S(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}function T(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}function j(e,t){if(1&e&&(m.Wb(0,"mat-option",22),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.codigo),m.Eb(1),m.Gc(" ",e.valor," ")}}function E(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}function x(e,t){if(1&e&&(m.Wb(0,"mat-option",22),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.codigo),m.Eb(1),m.Gc(" ",e.valor," ")}}function R(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}function D(e,t){if(1&e&&(m.Wb(0,"mat-option",22),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.codigo),m.Eb(1),m.Gc(" ",e.valor," ")}}function k(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}function I(e,t){if(1&e&&(m.Wb(0,"mat-option",22),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.codigo),m.Eb(1),m.Gc(" ",e.valor," ")}}function F(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}let A=(()=>{class e{constructor(e,t,i,s,n){this._formBuilder=e,this._store=t,this._catalogoService=i,this._dialogRef=s,this._dataToUpdate=n}ngOnDestroy(){this.controlSubs&&this.controlSubs.unsubscribe()}ngOnInit(){this.cargaCatalogos(),console.log(this._dataToUpdate),this._dataToUpdate?(this.tituloDialog="Editar registro",this.controlFormGroup=this._formBuilder.group({controlId:[this._dataToUpdate.control.controlId],codigo:[this._dataToUpdate.control.codigo,p.p.required],nombre:[this._dataToUpdate.control.nombre,p.p.required],detalle:[this._dataToUpdate.control.detalle],aplicacion:[this._dataToUpdate.control.aplicacion.toString(),p.p.required],periodicidad:[this._dataToUpdate.control.periodicidad.toString(),p.p.required],responsabilidad:[this._dataToUpdate.control.responsabilidad.toString(),p.p.required],documentacion:[this._dataToUpdate.control.documentacion.toString(),p.p.required]})):(this.tituloDialog="Nuevo registro",this.controlFormGroup=this._formBuilder.group({controlId:["0"],codigo:["",p.p.required],nombre:["",p.p.required],detalle:[""],aplicacion:["",p.p.required],periodicidad:["",p.p.required],responsabilidad:["",p.p.required],documentacion:["",p.p.required]}))}cargaCatalogos(){this._catalogoService.getCatalogoItems(10).subscribe(e=>this.dataAplicacion=e),this._catalogoService.getCatalogoItems(9).subscribe(e=>this.dataPeriodicidad=e),this._catalogoService.getCatalogoItems(11).subscribe(e=>this.dataResponsabilidad=e),this._catalogoService.getCatalogoItems(12).subscribe(e=>this.dataDocumentacion=e)}guardar(){this._dataToUpdate?(this.controlItem={controlId:this.controlFormGroup.get("controlId").value,codigo:this.controlFormGroup.get("codigo").value,nombre:this.controlFormGroup.get("nombre").value,detalle:this.controlFormGroup.get("detalle").value,aplicacion:this.controlFormGroup.get("aplicacion").value,periodicidad:this.controlFormGroup.get("periodicidad").value,responsabilidad:this.controlFormGroup.get("responsabilidad").value,documentacion:this.controlFormGroup.get("documentacion").value,estado:"V"},this._store.dispatch(u.d({control:this.controlItem}))):(this.controlItem={codigo:this.controlFormGroup.get("codigo").value,nombre:this.controlFormGroup.get("nombre").value,detalle:this.controlFormGroup.get("detalle").value,aplicacion:this.controlFormGroup.get("aplicacion").value,periodicidad:this.controlFormGroup.get("periodicidad").value,responsabilidad:this.controlFormGroup.get("responsabilidad").value,documentacion:this.controlFormGroup.get("documentacion").value,estado:"V"},this._store.dispatch(u.j({control:this.controlItem}))),this.controlSubs=this._store.select("control").subscribe(e=>{this.procesado=e.procesado,this.procesado&&this._dialogRef.close(!0)})}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(p.d),m.Qb(g.h),m.Qb(b.a),m.Qb(a.h),m.Qb(a.a))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-crear-control"]],decls:63,vars:12,consts:[["mat-dialog-title",""],[1,"mat-typography"],[3,"formGroup"],[2,"display","block","visibility","hidden","height","0","width","0"],[1,"inputForm"],["matInput","","formControlName","controlId"],[1,"col-sm-12","col-md-6"],[1,"inputForm","celdaIndiviual"],["matInput","","formControlName","codigo","required",""],[4,"ngIf"],["matInput","","formControlName","nombre","required",""],[1,"col-sm-12","col-md-12"],[1,"inputForm","celdaCombinada"],["matInput","","formControlName","detalle"],["formControlName","aplicacion","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","periodicidad","required",""],["formControlName","responsabilidad","required",""],["formControlName","documentacion","required",""],["align","end"],["mat-raised-button","","mat-dialog-close","","color","warn"],["mat-raised-button","","color","primary",3,"click"],[3,"value"]],template:function(e,t){1&e&&(m.Wb(0,"h3",0),m.Ec(1),m.Vb(),m.Wb(2,"mat-dialog-content",1),m.Wb(3,"form",2),m.Wb(4,"div",3),m.Wb(5,"mat-form-field",4),m.Wb(6,"mat-label"),m.Ec(7,"ControlId"),m.Vb(),m.Rb(8,"input",5),m.Vb(),m.Vb(),m.Wb(9,"div",6),m.Wb(10,"mat-form-field",7),m.Wb(11,"mat-label"),m.Ec(12,"C\xf3digo"),m.Vb(),m.Rb(13,"input",8),m.Cc(14,S,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(15,"div",6),m.Wb(16,"mat-form-field",7),m.Wb(17,"mat-label"),m.Ec(18,"Nombre"),m.Vb(),m.Rb(19,"input",10),m.Cc(20,T,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(21,"div",11),m.Wb(22,"mat-form-field",12),m.Wb(23,"mat-label"),m.Ec(24,"Detalle"),m.Vb(),m.Rb(25,"textarea",13),m.Vb(),m.Vb(),m.Wb(26,"div",6),m.Wb(27,"mat-form-field",7),m.Wb(28,"mat-label"),m.Ec(29,"Aplicaci\xf3n"),m.Vb(),m.Wb(30,"mat-select",14),m.Cc(31,j,2,2,"mat-option",15),m.Vb(),m.Cc(32,E,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(33,"div",6),m.Wb(34,"mat-form-field",7),m.Wb(35,"mat-label"),m.Ec(36,"Periodicidad"),m.Vb(),m.Wb(37,"mat-select",16),m.Cc(38,x,2,2,"mat-option",15),m.Vb(),m.Cc(39,R,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(40,"div",6),m.Wb(41,"mat-form-field",7),m.Wb(42,"mat-label"),m.Ec(43,"Responsabilidad"),m.Vb(),m.Wb(44,"mat-select",17),m.Cc(45,D,2,2,"mat-option",15),m.Vb(),m.Cc(46,k,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(47,"div",6),m.Wb(48,"mat-form-field",7),m.Wb(49,"mat-label"),m.Ec(50,"Documentacion"),m.Vb(),m.Wb(51,"mat-select",18),m.Cc(52,I,2,2,"mat-option",15),m.Vb(),m.Cc(53,F,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(54,"mat-dialog-actions",19),m.Wb(55,"button",20),m.Wb(56,"mat-icon"),m.Ec(57,"not_interested"),m.Vb(),m.Ec(58," Cancelar "),m.Vb(),m.Wb(59,"button",21),m.dc("click",function(){return t.guardar()}),m.Wb(60,"mat-icon"),m.Ec(61,"save"),m.Vb(),m.Ec(62," Guardar "),m.Vb(),m.Vb()),2&e&&(m.Eb(1),m.Fc(t.tituloDialog),m.Eb(2),m.mc("formGroup",t.controlFormGroup),m.Eb(11),m.mc("ngIf",null==t.controlFormGroup.get("codigo").errors?null:t.controlFormGroup.get("codigo").errors.required),m.Eb(6),m.mc("ngIf",null==t.controlFormGroup.get("nombre").errors?null:t.controlFormGroup.get("nombre").errors.required),m.Eb(11),m.mc("ngForOf",t.dataAplicacion),m.Eb(1),m.mc("ngIf",null==t.controlFormGroup.get("aplicacion").errors?null:t.controlFormGroup.get("aplicacion").errors.required),m.Eb(6),m.mc("ngForOf",t.dataPeriodicidad),m.Eb(1),m.mc("ngIf",null==t.controlFormGroup.get("periodicidad").errors?null:t.controlFormGroup.get("periodicidad").errors.required),m.Eb(6),m.mc("ngForOf",t.dataResponsabilidad),m.Eb(1),m.mc("ngIf",null==t.controlFormGroup.get("responsabilidad").errors?null:t.controlFormGroup.get("responsabilidad").errors.required),m.Eb(6),m.mc("ngForOf",t.dataDocumentacion),m.Eb(1),m.mc("ngIf",null==t.controlFormGroup.get("documentacion").errors?null:t.controlFormGroup.get("documentacion").errors.required))},directives:[a.i,a.f,p.q,p.l,p.f,f.c,f.g,y.b,p.c,p.k,p.e,p.o,s.k,v.a,s.j,a.c,C.a,a.d,w.a,f.b,O.k],styles:[".celdaIndiviual[_ngcontent-%COMP%]{width:80%}.celdaCombinada[_ngcontent-%COMP%]{width:90%}"]}),e})();var M=i("Qu3c");function L(e,t){1&e&&(m.Wb(0,"th",20),m.Ec(1," Control "),m.Vb())}function z(e,t){if(1&e&&(m.Wb(0,"td",21),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.nombre," ")}}function B(e,t){1&e&&(m.Wb(0,"th",22),m.Ec(1," Aplicaci\xf3n "),m.Vb())}function P(e,t){if(1&e&&(m.Wb(0,"td",21),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.nombreAplicacion," ")}}function H(e,t){1&e&&(m.Wb(0,"th",22),m.Ec(1," Periodicidad "),m.Vb())}function V(e,t){if(1&e&&(m.Wb(0,"td",21),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.nombrePeriodicidad," ")}}function N(e,t){1&e&&(m.Wb(0,"th",22),m.Ec(1," Responsabilidad "),m.Vb())}function q(e,t){if(1&e&&(m.Wb(0,"td",21),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.nombreResponsabilidad," ")}}function W(e,t){1&e&&(m.Wb(0,"th",22),m.Ec(1," Documentaci\xf3n "),m.Vb())}function G(e,t){if(1&e&&(m.Wb(0,"td",21),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.nombreDocumentacion," ")}}function _(e,t){1&e&&m.Rb(0,"th",22)}function U(e,t){if(1&e){const e=m.Xb();m.Wb(0,"td",23),m.Wb(1,"a",24),m.dc("click",function(){m.vc(e);const i=t.$implicit;return m.hc().dialogEdit(i)}),m.Wb(2,"mat-icon"),m.Ec(3,"edit"),m.Vb(),m.Vb(),m.Wb(4,"a",25),m.dc("click",function(){m.vc(e);const i=t.$implicit;return m.hc().eliminar(i.controlId)}),m.Wb(5,"mat-icon"),m.Ec(6,"delete"),m.Vb(),m.Vb(),m.Vb()}}function K(e,t){1&e&&m.Rb(0,"tr",26)}function Y(e,t){1&e&&m.Rb(0,"tr",27)}const X=function(){return[5,10,25,100]};let Q=(()=>{class e{constructor(e,t){this._store=e,this._dialog=t,this.dataSource=new o.o,this.displayedColumns=["nombre","nombreAplicacion","nombrePeriodicidad","nombreResponsabilidad","nombreDocumentacion","acciones"]}ngOnInit(){this.cargaControles()}ngOnDestroy(){this.controlSubs&&this.controlSubs.unsubscribe()}applyFilter(e){var t;(null===(t=this.dataSource.data)||void 0===t?void 0:t.length)>0&&(this.dataSource.filter=e.target.value.trim().toLowerCase())}cargaControles(){this._store.dispatch(d.q()),this.controlSubs=this._store.select("control").subscribe(e=>{this.dataSource.data=e.inventario,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}dialogNew(){const e=new a.e;e.disableClose=!1,e.width="70%",this._dialog.open(A,e).afterClosed().subscribe(e=>{e&&this.cargaControles()})}dialogEdit(e){this._dialog.open(A,{width:"70%",disableClose:!0,data:{control:e}}).afterClosed().subscribe(e=>{e&&this.cargaControles()})}eliminar(e){c.a.fire({title:"Esta seguro que desea eliminar el registro?",icon:"warning",showDenyButton:!0,showCancelButton:!0,showConfirmButton:!1,denyButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.isDenied&&this._store.dispatch(d.f({controlId:e}))})}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(g.h),m.Qb(a.b))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-inventario"]],viewQuery:function(e,t){if(1&e&&(m.Ic(r.a,1),m.Ic(l.a,1)),2&e){let e;m.rc(e=m.ec())&&(t.paginator=e.first),m.rc(e=m.ec())&&(t.sort=e.first)}},decls:33,vars:5,consts:[[1,"search-div"],["mat-raised-button","","matTooltip","Crear nuevo registro","color","primary",1,"btn-add",3,"click"],[1,"search-form-field"],["matInput","","placeholder","Buscar",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombreAplicacion"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","nombrePeriodicidad"],["matColumnDef","nombreResponsabilidad"],["matColumnDef","nombreDocumentacion"],["matColumnDef","acciones"],["mat-cell","","style","text-align: right;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","10","aria-label","Select page of perfils",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",2,"text-align","right"],["matTooltip","Editar",1,"pointer",2,"color","#1f5164",3,"click"],["matTooltip","Eliminar",1,"pointer",2,"color","#e15634",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(m.Wb(0,"div",0),m.Wb(1,"button",1),m.dc("click",function(){return t.dialogNew()}),m.Wb(2,"mat-icon"),m.Ec(3,"add"),m.Vb(),m.Ec(4,"Crear "),m.Vb(),m.Wb(5,"mat-form-field",2),m.Wb(6,"mat-label"),m.Ec(7,"Filter"),m.Vb(),m.Wb(8,"input",3,4),m.dc("keyup",function(e){return t.applyFilter(e)}),m.Vb(),m.Vb(),m.Vb(),m.Wb(10,"div",5),m.Wb(11,"table",6),m.Ub(12,7),m.Cc(13,L,2,0,"th",8),m.Cc(14,z,2,1,"td",9),m.Tb(),m.Ub(15,10),m.Cc(16,B,2,0,"th",11),m.Cc(17,P,2,1,"td",9),m.Tb(),m.Ub(18,12),m.Cc(19,H,2,0,"th",11),m.Cc(20,V,2,1,"td",9),m.Tb(),m.Ub(21,13),m.Cc(22,N,2,0,"th",11),m.Cc(23,q,2,1,"td",9),m.Tb(),m.Ub(24,14),m.Cc(25,W,2,0,"th",11),m.Cc(26,G,2,1,"td",9),m.Tb(),m.Ub(27,15),m.Cc(28,_,1,0,"th",11),m.Cc(29,U,7,0,"td",16),m.Tb(),m.Cc(30,K,1,0,"tr",17),m.Cc(31,Y,1,0,"tr",18),m.Vb(),m.Rb(32,"mat-paginator",19),m.Vb()),2&e&&(m.Eb(11),m.mc("dataSource",t.dataSource),m.Eb(19),m.mc("matHeaderRowDef",t.displayedColumns),m.Eb(1),m.mc("matRowDefColumns",t.displayedColumns),m.Eb(1),m.mc("pageSizeOptions",m.oc(4,X)))},directives:[C.a,M.a,w.a,f.c,f.g,y.b,o.n,l.a,o.c,o.i,o.b,o.k,o.m,r.a,o.h,l.b,o.a,o.j,o.l],styles:["table[_ngcontent-%COMP%]{width:100%}.pointer[_ngcontent-%COMP%]{cursor:pointer}.search-div[_ngcontent-%COMP%]{margin:10px}.search-form-field[_ngcontent-%COMP%]{width:85%;margin-left:10px}"]}),e})();var $=i("e2k9");function J(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}function Z(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}let ee=(()=>{class e{constructor(e,t,i,s){this._formBuilder=e,this._dialogRef=t,this._catalogoService=i,this._dataToUpdate=s}ngOnInit(){this.tituloDialog="Editar registro",this.catalogoFormGroup=this._formBuilder.group({grupoId:[this._dataToUpdate.item.grupoId],codigo:[this._dataToUpdate.item.codigo],nombre:[this._dataToUpdate.item.nombre,p.p.required],segmento:[this._dataToUpdate.item.segmento],peso:[this._dataToUpdate.item.peso,p.p.required]})}guardaItem(){this.catalogoItem={grupoId:this.catalogoFormGroup.get("grupoId").value,codigo:this.catalogoFormGroup.get("codigo").value,nombre:this.catalogoFormGroup.get("nombre").value,segmento:this.catalogoFormGroup.get("segmento").value,peso:this.catalogoFormGroup.get("peso").value},this._catalogoService.updateCatalogoGrupo(this.catalogoItem).subscribe(e=>this._dialogRef.close(!0))}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(p.d),m.Qb(a.h),m.Qb(b.a),m.Qb(a.a))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-edita-variable"]],decls:40,vars:5,consts:[["mat-dialog-title",""],[1,"mat-typography"],[3,"formGroup"],[2,"display","block","visibility","hidden","height","0","width","0"],["matInput","","formControlName","grupoId"],[1,"col-sm-12","col-md-6",2,"display","block","visibility","hidden","height","0","width","0"],["matInput","","formControlName","codigo","required",""],["matInput","","formControlName","segmento","required",""],[1,"col-sm-12","col-md-6"],["matInput","","formControlName","nombre","required",""],[4,"ngIf"],["matInput","","formControlName","peso","required",""],["align","end"],["mat-raised-button","","mat-dialog-close","","color","warn"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&(m.Wb(0,"h3",0),m.Ec(1),m.Vb(),m.Wb(2,"mat-dialog-content",1),m.Wb(3,"form",2),m.Wb(4,"div",3),m.Wb(5,"mat-form-field"),m.Wb(6,"mat-label"),m.Ec(7,"GrupoId"),m.Vb(),m.Rb(8,"input",4),m.Vb(),m.Vb(),m.Wb(9,"div",5),m.Wb(10,"mat-form-field"),m.Wb(11,"mat-label"),m.Ec(12,"C\xf3digo"),m.Vb(),m.Rb(13,"input",6),m.Vb(),m.Vb(),m.Wb(14,"div",5),m.Wb(15,"mat-form-field"),m.Wb(16,"mat-label"),m.Ec(17,"Segmento"),m.Vb(),m.Rb(18,"input",7),m.Vb(),m.Vb(),m.Wb(19,"div",8),m.Wb(20,"mat-form-field"),m.Wb(21,"mat-label"),m.Ec(22,"Nombre variable"),m.Vb(),m.Rb(23,"input",9),m.Cc(24,J,2,0,"mat-error",10),m.Vb(),m.Vb(),m.Wb(25,"div",8),m.Wb(26,"mat-form-field"),m.Wb(27,"mat-label"),m.Ec(28,"Peso"),m.Vb(),m.Rb(29,"input",11),m.Cc(30,Z,2,0,"mat-error",10),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(31,"mat-dialog-actions",12),m.Wb(32,"button",13),m.Wb(33,"mat-icon"),m.Ec(34,"not_interested"),m.Vb(),m.Ec(35," Cancelar "),m.Vb(),m.Wb(36,"button",14),m.dc("click",function(){return t.guardaItem()}),m.Wb(37,"mat-icon"),m.Ec(38,"save"),m.Vb(),m.Ec(39," Guardar "),m.Vb(),m.Vb()),2&e&&(m.Eb(1),m.Fc(t.tituloDialog),m.Eb(2),m.mc("formGroup",t.catalogoFormGroup),m.Eb(21),m.mc("ngIf",null==t.catalogoFormGroup.get("nombre").errors?null:t.catalogoFormGroup.get("nombre").errors.required),m.Eb(6),m.mc("ngIf",null==t.catalogoFormGroup.get("peso").errors?null:t.catalogoFormGroup.get("peso").errors.required),m.Eb(6),m.mc("disabled",!t.catalogoFormGroup.valid))},directives:[a.i,a.f,p.q,p.l,p.f,f.c,f.g,y.b,p.c,p.k,p.e,p.o,s.k,a.c,C.a,a.d,w.a,f.b],styles:[""]}),e})();function te(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}function ie(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}let se=(()=>{class e{constructor(e,t,i,s){this._formBuilder=e,this._dialogRef=t,this._store=i,this._dataToUpdate=s}ngOnInit(){this.tituloDialog="Editar registro",this.catalogoFormGroup=this._formBuilder.group({catalogoId:[this._dataToUpdate.item.catalogoId],grupoId:[this._dataToUpdate.item.grupoId],codigo:[this._dataToUpdate.item.codigo],valor:[this._dataToUpdate.item.valor,p.p.required],peso:[this._dataToUpdate.item.peso,p.p.required]})}guardaItem(){this.catalogoItem={catalogoId:this.catalogoFormGroup.get("catalogoId").value,codigo:this.catalogoFormGroup.get("codigo").value,valor:this.catalogoFormGroup.get("valor").value,grupoId:this.catalogoFormGroup.get("grupoId").value,peso:this.catalogoFormGroup.get("peso").value},this._store.dispatch($.g({catalogo:this.catalogoItem})),this._store.select("catalogo").subscribe(e=>{this.procesado=e.procesado,this.procesado&&this._dialogRef.close(!0)})}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(p.d),m.Qb(a.h),m.Qb(g.h),m.Qb(a.a))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-edita-factor"]],decls:40,vars:5,consts:[["mat-dialog-title",""],[1,"mat-typography"],[3,"formGroup"],[2,"display","block","visibility","hidden","height","0","width","0"],["matInput","","formControlName","catalogoId"],["matInput","","formControlName","grupoId"],["matInput","","formControlName","codigo"],[1,"col-sm-12","col-md-6"],["matInput","","formControlName","valor","required",""],[4,"ngIf"],["matInput","","formControlName","peso","required",""],["align","end"],["mat-raised-button","","mat-dialog-close","","color","warn"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&(m.Wb(0,"h3",0),m.Ec(1),m.Vb(),m.Wb(2,"mat-dialog-content",1),m.Wb(3,"form",2),m.Wb(4,"div",3),m.Wb(5,"mat-form-field"),m.Wb(6,"mat-label"),m.Ec(7,"CatalogoId"),m.Vb(),m.Rb(8,"input",4),m.Vb(),m.Vb(),m.Wb(9,"div",3),m.Wb(10,"mat-form-field"),m.Wb(11,"mat-label"),m.Ec(12,"GrupoId"),m.Vb(),m.Rb(13,"input",5),m.Vb(),m.Vb(),m.Wb(14,"div",3),m.Wb(15,"mat-form-field"),m.Wb(16,"mat-label"),m.Ec(17,"C\xf3digo"),m.Vb(),m.Rb(18,"input",6),m.Vb(),m.Vb(),m.Wb(19,"div",7),m.Wb(20,"mat-form-field"),m.Wb(21,"mat-label"),m.Ec(22,"Factor"),m.Vb(),m.Rb(23,"input",8),m.Cc(24,te,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(25,"div",7),m.Wb(26,"mat-form-field"),m.Wb(27,"mat-label"),m.Ec(28,"Peso"),m.Vb(),m.Rb(29,"input",10),m.Cc(30,ie,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(31,"mat-dialog-actions",11),m.Wb(32,"button",12),m.Wb(33,"mat-icon"),m.Ec(34,"not_interested"),m.Vb(),m.Ec(35," Cancelar "),m.Vb(),m.Wb(36,"button",13),m.dc("click",function(){return t.guardaItem()}),m.Wb(37,"mat-icon"),m.Ec(38,"save"),m.Vb(),m.Ec(39," Guardar "),m.Vb(),m.Vb()),2&e&&(m.Eb(1),m.Fc(t.tituloDialog),m.Eb(2),m.mc("formGroup",t.catalogoFormGroup),m.Eb(21),m.mc("ngIf",null==t.catalogoFormGroup.get("valor").errors?null:t.catalogoFormGroup.get("valor").errors.required),m.Eb(6),m.mc("ngIf",null==t.catalogoFormGroup.get("peso").errors?null:t.catalogoFormGroup.get("peso").errors.required),m.Eb(6),m.mc("disabled",!t.catalogoFormGroup.valid))},directives:[a.i,a.f,p.q,p.l,p.f,f.c,f.g,y.b,p.c,p.k,p.e,p.o,s.k,a.c,C.a,a.d,w.a,f.b],styles:[""]}),e})();var ne=i("wZkO");function oe(e,t){1&e&&(m.Wb(0,"th",24),m.Ec(1," Id "),m.Vb())}function re(e,t){if(1&e&&(m.Wb(0,"td",25),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.grupoId," ")}}function le(e,t){1&e&&m.Rb(0,"td",26)}function ae(e,t){1&e&&(m.Wb(0,"th",24),m.Ec(1," Variable "),m.Vb())}function he(e,t){if(1&e&&(m.Wb(0,"td",25),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.nombre," ")}}function ce(e,t){1&e&&m.Rb(0,"td",26)}function de(e,t){1&e&&(m.Wb(0,"th",24),m.Ec(1," Peso "),m.Vb())}function pe(e,t){if(1&e&&(m.Wb(0,"td",27),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.peso," ")}}function ue(e,t){if(1&e&&(m.Wb(0,"td",26),m.Ec(1),m.Vb()),2&e){const e=m.hc();m.Eb(1),m.Gc(" Total: ",e.totalPonderacionVariables(),"")}}function me(e,t){1&e&&m.Rb(0,"th",28)}function ge(e,t){if(1&e){const e=m.Xb();m.Wb(0,"td",29),m.Wb(1,"a",30),m.dc("click",function(){m.vc(e);const i=t.$implicit;return m.hc().dialogEditItem(i)}),m.Wb(2,"mat-icon"),m.Ec(3,"edit"),m.Vb(),m.Vb(),m.Vb()}}function be(e,t){1&e&&m.Rb(0,"tr",31)}function fe(e,t){1&e&&m.Rb(0,"tr",32)}function ye(e,t){1&e&&m.Rb(0,"tr",33)}function ve(e,t){if(1&e&&(m.Wb(0,"mat-option",34),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.grupoId),m.Eb(1),m.Gc(" ",e.nombre," ")}}function Ce(e,t){1&e&&(m.Wb(0,"th",24),m.Ec(1," Codigo "),m.Vb())}function we(e,t){if(1&e&&(m.Wb(0,"td",25),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.codigo," ")}}function Oe(e,t){1&e&&(m.Wb(0,"th",24),m.Ec(1," Factor "),m.Vb())}function Se(e,t){if(1&e&&(m.Wb(0,"td",25),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.valor," ")}}function Te(e,t){1&e&&(m.Wb(0,"th",24),m.Ec(1," Peso "),m.Vb())}function je(e,t){if(1&e&&(m.Wb(0,"td",25),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.peso," ")}}function Ee(e,t){1&e&&m.Rb(0,"th",28)}function xe(e,t){if(1&e){const e=m.Xb();m.Wb(0,"td",29),m.Wb(1,"a",30),m.dc("click",function(){m.vc(e);const i=t.$implicit;return m.hc().dialogEditFactor(i)}),m.Wb(2,"mat-icon"),m.Ec(3,"edit"),m.Vb(),m.Vb(),m.Vb()}}function Re(e,t){1&e&&m.Rb(0,"tr",31)}function De(e,t){1&e&&m.Rb(0,"tr",32)}const ke=function(){return["grupoId","nombre","peso"]},Ie=function(){return[5,10,25,100]};let Fe=(()=>{class e{constructor(e,t,i){this.catalogoService=e,this.store=t,this.dialog=i,this.dataSourceVariable=new o.o,this.displayedColumnsVariable=["grupoId","nombre","peso","acciones"],this.dataSource=new o.o,this.displayedColumns=["codigo","valor","peso","acciones"],this.grupoId=0}ngOnInit(){this.getGruposCatalogos()}ngOnDestroy(){}applyFilter(e){var t;(null===(t=this.dataSource.data)||void 0===t?void 0:t.length)>0&&(this.dataSource.filter=e.target.value.trim().toLowerCase())}getGruposCatalogos(){this.catalogoService.getCatalogoGrupoSegmento("Control").subscribe(e=>{this.catalogoGrupos=e,this.dataSourceVariable.data=this.catalogoGrupos.filter(e=>"SUFICIENCIA"!=e.codigo),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}totalPonderacionVariables(){if(this.catalogoGrupos)return this.catalogoGrupos.reduce((e,t)=>e+t.peso,0)}grupoChange(e){this.cargaItems(e),this.grupoId=e}cargaItems(e){this.store.dispatch($.j({grupoId:e})),this.catalogoSubs=this.store.select("catalogo").subscribe(e=>{this.dataSource.data=e.catalogo,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}dialogEditItem(e){this.dialog.open(ee,{width:"40%",disableClose:!0,data:{item:e}}).afterClosed().subscribe(e=>{e&&this.getGruposCatalogos()})}dialogEditFactor(e){this.dialog.open(se,{width:"40%",disableClose:!0,data:{item:e}}).afterClosed().subscribe(e=>{e&&this.cargaItems(this.grupoId)})}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(b.a),m.Qb(g.h),m.Qb(a.b))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-parametros"]],viewQuery:function(e,t){if(1&e&&(m.Ic(r.a,1),m.Ic(l.a,1)),2&e){let e;m.rc(e=m.ec())&&(t.paginator=e.first),m.rc(e=m.ec())&&(t.sort=e.first)}},decls:47,vars:13,consts:[["label","Ponderacion variables"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","grupoId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","nombre"],["matColumnDef","peso"],["mat-cell","","align","right",4,"matCellDef"],["matColumnDef","acciones"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","style","text-align: right;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],["aria-label","Select page",3,"pageSizeOptions"],["label","Factores"],[1,"search-div"],["appearance","fill"],[3,"valueChange"],[3,"value",4,"ngFor","ngForOf"],["matColumnDef","codigo"],["matColumnDef","valor"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-footer-cell",""],["mat-cell","","align","right"],["mat-header-cell",""],["mat-cell","",2,"text-align","right"],["matTooltip","Editar",1,"pointer",2,"color","#1f5164",3,"click"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""],[3,"value"]],template:function(e,t){1&e&&(m.Wb(0,"mat-tab-group"),m.Wb(1,"mat-tab",0),m.Wb(2,"div",1),m.Wb(3,"table",2),m.Ub(4,3),m.Cc(5,oe,2,0,"th",4),m.Cc(6,re,2,1,"td",5),m.Cc(7,le,1,0,"td",6),m.Tb(),m.Ub(8,7),m.Cc(9,ae,2,0,"th",4),m.Cc(10,he,2,1,"td",5),m.Cc(11,ce,1,0,"td",6),m.Tb(),m.Ub(12,8),m.Cc(13,de,2,0,"th",4),m.Cc(14,pe,2,1,"td",9),m.Cc(15,ue,2,1,"td",6),m.Tb(),m.Ub(16,10),m.Cc(17,me,1,0,"th",11),m.Cc(18,ge,4,0,"td",12),m.Tb(),m.Cc(19,be,1,0,"tr",13),m.Cc(20,fe,1,0,"tr",14),m.Cc(21,ye,1,0,"tr",15),m.Vb(),m.Rb(22,"mat-paginator",16),m.Vb(),m.Vb(),m.Wb(23,"mat-tab",17),m.Wb(24,"div",18),m.Wb(25,"mat-form-field",19),m.Wb(26,"mat-label"),m.Ec(27,"Variables"),m.Vb(),m.Wb(28,"mat-select",20),m.dc("valueChange",function(e){return t.grupoChange(e)}),m.Cc(29,ve,2,2,"mat-option",21),m.Vb(),m.Vb(),m.Vb(),m.Wb(30,"div",1),m.Wb(31,"table",2),m.Ub(32,22),m.Cc(33,Ce,2,0,"th",4),m.Cc(34,we,2,1,"td",5),m.Tb(),m.Ub(35,23),m.Cc(36,Oe,2,0,"th",4),m.Cc(37,Se,2,1,"td",5),m.Tb(),m.Ub(38,8),m.Cc(39,Te,2,0,"th",4),m.Cc(40,je,2,1,"td",5),m.Tb(),m.Ub(41,10),m.Cc(42,Ee,1,0,"th",11),m.Cc(43,xe,4,0,"td",12),m.Tb(),m.Cc(44,Re,1,0,"tr",13),m.Cc(45,De,1,0,"tr",14),m.Vb(),m.Rb(46,"mat-paginator",16),m.Vb(),m.Vb(),m.Vb()),2&e&&(m.Eb(3),m.mc("dataSource",t.dataSourceVariable),m.Eb(16),m.mc("matHeaderRowDef",t.displayedColumnsVariable),m.Eb(1),m.mc("matRowDefColumns",t.displayedColumnsVariable),m.Eb(1),m.mc("matFooterRowDef",m.oc(10,ke)),m.Eb(1),m.mc("pageSizeOptions",m.oc(11,Ie)),m.Eb(7),m.mc("ngForOf",t.catalogoGrupos),m.Eb(2),m.mc("dataSource",t.dataSource),m.Eb(13),m.mc("matHeaderRowDef",t.displayedColumns),m.Eb(1),m.mc("matRowDefColumns",t.displayedColumns),m.Eb(1),m.mc("pageSizeOptions",m.oc(12,Ie)))},directives:[ne.b,ne.a,o.n,l.a,o.c,o.i,o.b,o.e,o.k,o.m,o.g,r.a,f.c,f.g,v.a,s.j,o.h,l.b,o.a,o.d,M.a,w.a,o.j,o.l,o.f,O.k],styles:["table[_ngcontent-%COMP%]{width:100%}.pointer[_ngcontent-%COMP%]{cursor:pointer}.search-div[_ngcontent-%COMP%]{margin:10px}.search-form-field[_ngcontent-%COMP%]{width:85%;margin-left:10px}"]}),e})();var Ae=i("K70L");function Me(e,t,i){var s={};if(e&&e.length){for(var n=0,o=e;n<o.length;n++){var r=o[n];!0===i?(t.propCollection[r]=new m.o(!1),t[r]=t.propCollection[r]):s[r]=new m.o(!1)}!0!==i&&t.setProperties(s,!0)}}function Le(e,t,i){var s=Object.keys(e.registeredTemplate);if(s.length)for(var n=t&&t.filter(function(e){return!/\./g.test(e)}),o=0,r=n&&n||s;o<r.length;o++){var l=r[o];if(i&&i.length)for(var a=0;a<i.length;a++)for(var h=0;h<e.registeredTemplate.template.length;h++)e.registeredTemplate.template[h].rootNodes[0]===i[a]&&(p=e.registeredTemplate[l])[h].destroy();else if(e.registeredTemplate[l])for(var c=0,d=e.registeredTemplate[l];c<d.length;c++){var p;if(!(p=d[c]).destroyed){if(p._view){var u=p._view.renderer.parentNode(p.rootNodes[0]);if(!Object(Ae.T)(u))for(h=0;h<p.rootNodes.length;h++)u.appendChild(p.rootNodes[h])}p.destroy()}}delete e.registeredTemplate[l]}for(var m=function(e){e.instance&&e.instance.clearTemplate(t&&t.filter(function(t){return!!new RegExp(e.name).test(t)}))},g=0,b=e.tagObjects;g<b.length;g++)m(b[g])}function ze(e,t,i){for(var s=e.replace(/\[/g,".").replace(/\]/g,"").split("."),n=i||{},o=0;o<s.length;o++){var r=s[o];o+1===s.length?n[r]=void 0===t?{}:t:void 0===n[r]&&(n[r]={}),n=n[r]}return n}var Be=/Ref$/,Pe=function(){function e(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return e.prototype.ngOnInit=function(){this.registeredTemplate={};for(var e=0,t=this.tags;e<t.length;e++){var i=t[e],s=Object(Ae.R)("child"+i.substring(0,1).toUpperCase()+i.substring(1),this);s&&this.tagObjects.push({instance:s,name:i})}for(var n=Object.keys(this),o=0;o<n.length;o++){var r=Object(Ae.R)(n[o],this);"object"==typeof r&&r.elementRef&&!Object(Ae.R)(n[o]+"Ref",this)&&Object(Ae.mb)(n[o]+"Ref",r,this)}for(var l=0,a=n=(n=Object.keys(this)).filter(function(e){return/Ref$/i.test(e)});l<a.length;l++){var h=a[l].replace("Ref","");Object(Ae.mb)(h.replace("_","."),Object(Ae.R)(h,this),this.propCollection)}var c=Object.keys(this);if(this.directivePropList){for(var d=0;d<this.directivePropList.length;d++){var p=this.directivePropList[d];-1!==c.indexOf(p)&&Object(Ae.R)(p,this)&&Object(Ae.mb)(p,Object(Ae.R)(p,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},e.prototype.registerEvents=function(e){Me(e,this,!0)},e.prototype.ngOnChanges=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var s=i[t];this.propCollection[s]=e[s].currentValue}this.isUpdated=!1,this.hasChanges=!0},e.prototype.clearTemplate=function(e){Le(this,e)},e.prototype.getProperties=function(){for(var e=0,t=this.tagObjects;e<t.length;e++){var i=t[e];this.propCollection[i.name]=i.instance.getProperties()}return this.propCollection},e.prototype.isChanged=function(){var e=this.hasChanges;if(!Object(Ae.T)(this.propCollection[this.property]))for(var t=Object.keys(this.propCollection[this.property][0]),i=0;i<t.length;i++)if(!Object(Ae.T)(this.propCollection[t[i]])){var s=Object(Ae.R)(t[i],this),n=this.propCollection[this.property][0][t[i]];Object(Ae.T)(s)||this.propCollection[t[i]]===s||n===s||(Object(Ae.mb)(t[i],s,this.propCollection[this.property][0]),Object(Ae.mb)(t[i],s,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var o=0,r=this.tagObjects;o<r.length;o++)e=e||r[o].instance.hasChanges;return e||this.hasChanges},e.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var e=Object.keys(this),t=0,i=e=e.filter(function(e){return Be.test(e)});t<i.length;t++){var s=i[t].replace("Ref","");Object(Ae.mb)(s.replace("_","."),Object(Ae.R)(s,this),this.propCollection)}},e.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},e.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},e.prototype.ngOnDestroy=function(){this.directivePropList=[]},e}(),He=function(){function e(e){this.list=[],this.hasChanges=!1,this.propertyName=e}return e.prototype.ngOnInit=function(){this.isInitChanges=!0},e.prototype.ngAfterContentInit=function(){var e=this,t=0;this.list=this.children.map(function(i){return i.dirIndex=t++,i.property=e.propertyName,i}),this.hasChanges=!0},e.prototype.getProperties=function(){for(var e=[],t=0,i=this.list;t<i.length;t++)e.push(i[t].getProperties());return e},e.prototype.isChanged=function(){var e=this,t=!1,i=0,s=!1,n=this.children.map(function(e){return e});if(this.list.length===this.children.length)for(var o=0;o<this.list.length;o++)this.list[o].propCollection.dataSource&&(this.list[o].dataSource&&this.list[o].propCollection.dataSource!==this.list[o].dataSource&&(this.list[o].propCollection.dataSource=this.list[o].dataSource,this.list[o].hasChanges=!0),s=JSON.stringify(this.list[o].propCollection.dataSource)!==JSON.stringify(n[o].propCollection.dataSource));this.hasNewChildren=!(this.list.length===this.children.length&&!s)||null,this.hasNewChildren&&(this.list=this.children.map(function(t){return t.dirIndex=i++,t.property=e.propertyName,t}));for(var r=0,l=this.list;r<l.length;r++)t=t||l[r].hasChanges;return!!this.list.length&&t},e.prototype.clearTemplate=function(e){for(var t=this,i=0,s=this.list;i<s.length;i++)s[i].clearTemplate(e&&e.map(function(e){return new RegExp(t.propertyName).test(e)?e.replace(t.propertyName+".",""):e}))},e.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var e=0;e<this.list.length;e++)Object(Ae.R)("childColumns",this.list[e])&&"columns"===Object(Ae.R)("property",this.list[e])&&Object(Ae.mb)("columns",Object(Ae.R)("childColumns",this.list[e]).getProperties(),this.list[e].propCollection),this.list[e].isUpdated=!0},e.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},e.prototype.ngOnDestroy=function(){this.list=[]},e}(),Ve=function(){function e(){this.isProtectedOnChange=!0,this.isFormInit=!0}return e.prototype.saveChanges=function(e,t,i){if(!this.isProtectedOnChange){this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate();var s=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(s)}}},e.prototype.ngOnInit=function(e){var t=e||this;t.registeredTemplate={},t.ngBoundedEvents={},t.isAngular=!0,t.isFormInit=!0,e&&(this.tags=e.tags),t.tags=this.tags||[],t.complexTemplate=this.complexTemplate||[],t.tagObjects=[],t.ngAttr=this.getAngularAttr(t.element),t.createElement=function(e,i){var s=t.srenderer?t.srenderer.createElement(e):Object(Ae.D)(e);return void 0===i||(s.innerHTML=i.innerHTML?i.innerHTML:"",void 0!==i.className&&(s.className=i.className),void 0!==i.id&&(s.id=i.id),void 0!==i.styles&&s.setAttribute("style",i.styles),void 0!==t.ngAttr&&s.setAttribute(t.ngAttr,""),void 0!==i.attrs&&Object(Ae.w)(s,i.attrs)),s};for(var i=0,s=t.tags;i<s.length;i++){var n=s[i],o={instance:Object(Ae.R)("child"+n.substring(0,1).toUpperCase()+n.substring(1),t),name:n};t.tagObjects.push(o)}for(var r=Object.keys(t),l=0,a=r=r.filter(function(e){return/Ref$/i.test(e)&&/\_/i.test(e)});l<a.length;l++){var h=a[l].replace("Ref",""),c={};Object(Ae.mb)(h.replace("_","."),Object(Ae.R)(h,t),c),t.setProperties(c,!0)}},e.prototype.getAngularAttr=function(e){for(var t,i=e.attributes,s=i.length,n=0;n<s;n++)/_ngcontent/g.test(i[n].name)&&(t=i[n].name);return t},e.prototype.ngAfterViewInit=function(e){var t=e||this;/ejs-tab|ejs-accordion/g.test(t.ngEle.nativeElement.outerHTML)&&(t.ngEle.nativeElement.style.visibility="hidden");for(var i=Object.keys(t),s=0,n=i=i.filter(function(e){return/Ref$/i.test(e)});s<n.length;s++){var o=n[s].replace("Ref","");Object(Ae.mb)(o.replace("_","."),Object(Ae.R)(o+"Ref",t),t)}"btn"===t.getModuleName()?"undefined"!=typeof window&&document.body.contains(t.element)&&(t.appendTo(t.element),t.ngEle.nativeElement.style.visibility=""):setTimeout(function(){"undefined"!=typeof window&&document.body.contains(t.element)&&(t.appendTo(t.element),t.ngEle.nativeElement.style.visibility="")})},e.prototype.ngOnDestroy=function(e){var t=e||this;setTimeout(function(){"undefined"!=typeof window&&t.element.classList.contains("e-control")&&(t.destroy(),t.clearTemplate(null),t.ngBoundedEvents={},t.tagObjects={},t.ngEle=null)})},e.prototype.clearTemplate=function(e,t){Le(this,e,t)},e.prototype.ngAfterContentChecked=function(e){for(var t=e||this,i=0,s=t.tagObjects;i<s.length;i++){var n=s[i];if(!Object(Ae.W)(n.instance)&&(n.instance.isInitChanges||n.instance.hasChanges||n.instance.hasNewChildren))if(n.instance.isInitChanges){var o={},r=void 0;(w=Object(Ae.R)("instance.list",n))&&w.length&&(r=w[0].directivePropList);var l=!0;if(t.getModuleName&&"gantt"===t.getModuleName()&&(l=!1),r&&l&&-1===r.indexOf(n.instance.propertyName))for(var a=Object.keys(n.instance.list[0].propCollection),h=0;h<n.instance.list.length;h++){n.instance.list[h].propCollection[n.instance.propertyName]=[];for(var c={},d=0;d<a.length;d++)c[x=a[d]]=n.instance.list[h].propCollection[x];for(var p=0;p<n.instance.list[h].tags.length;p++){var u=n.instance.list[h].tags[p],m=Object(Ae.R)("child"+u.substring(0,1).toUpperCase()+u.substring(1),n.instance.list[h]);if(m){var g=n.instance.list[h]["child"+u.substring(0,1).toUpperCase()+u.substring(1)];if(g)for(var b=0;b<g.list.length;b++){var f=g.list[0].tags[0];if(f){var y=Object(Ae.R)("child"+f.substring(0,1).toUpperCase()+f.substring(1),g.list[b]);y&&g.list[b].tagObjects.push({instance:y,name:f})}}n.instance.list[h].tagObjects.push({instance:m,name:u})}}n.instance.list[h].propCollection[n.instance.propertyName].push(c)}o[n.name]=n.instance.getProperties(),t.setProperties(o,n.instance.isInitChanges)}else{t[n.name].length===n.instance.list.length&&"diagram"!==t.getModuleName()||(t[n.name]=n.instance.list);for(var v=0,C=n.instance.list;v<C.length;v++){var w,O=n.instance.list.indexOf(w=C[v]),S=Object(Ae.R)(n.name,t)[O],T=Object.keys(S);if(T=T.filter(function(e){return/Ref$/i.test(e)}),S.properties&&0!==Object.keys(S.properties).length&&/chart/.test(t.getModuleName()))for(var j=0,E=T;j<E.length;j++){var x;x=(x=E[j]).replace(/Ref/,""),S.properties[x]=S.properties[x]?S.properties[x]:S.propCollection[x]}Object(Ae.W)(S)||Object(Ae.W)(S.setProperties)||(/diagram|DashboardLayout/.test(t.getModuleName())?S.setProperties(w.getProperties(),!0):S.setProperties(w.getProperties())),w.isUpdated=!0}}}},e.prototype.registerEvents=function(e){Me(e,this)},e.prototype.twoWaySetter=function(e,t){var i=Object(Ae.R)(t,this.properties);i!==e&&(this.saveChanges(t,e,i),Object(Ae.mb)(t,Object(Ae.T)(e)?null:e,this.properties),Object(Ae.R)(t+"Change",this).emit(e))},e.prototype.addTwoWay=function(e){for(var t=this,i=function(e){Object(Ae.R)(e,s),Object.defineProperty(s,e,{get:function(){return Object(Ae.R)(e,t.properties)},set:function(i){return t.twoWaySetter(i,e)}}),Object(Ae.mb)(e+"Change",new m.o,s)},s=this,n=0,o=e;n<o.length;n++)i(o[n])},e.prototype.addEventListener=function(e,t){var i=Object(Ae.R)(e,this);Object(Ae.W)(i)||(this.ngBoundedEvents[e]||(this.ngBoundedEvents[e]=new Map),this.ngBoundedEvents[e].set(t,i.subscribe(t)))},e.prototype.removeEventListener=function(e,t){var i=Object(Ae.R)(e,this);Object(Ae.W)(i)||this.ngBoundedEvents[e].get(t).unsubscribe()},e.prototype.trigger=function(e,t,i){var s=Object(Ae.R)(e,this),n=this.isProtectedOnChange;this.isProtectedOnChange=!1,t&&(t.name=e),Object(Ae.W)(s)||s.next(t);var o=Object(Ae.R)("local"+e.charAt(0).toUpperCase()+e.slice(1),this);Object(Ae.W)(o)||o.call(this,t),this.isProtectedOnChange=n,i&&(this.preventChange=this.isPreventChange,i.call(this,t)),this.isPreventChange=!1},e}(),Ne=Object(Ae.P)();function qe(e){return function(t,i){var s={set:We(i),get:Ge(i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,s)}}function We(e){return function(t){void 0!==t&&(Object(Ae.mb)(e+"Ref",t,this),"string"!=typeof t?(t.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,t.elementRef.nativeElement.propName=e):this.saveChanges&&(this.saveChanges(e,t,void 0),this.dataBind()))}}function Ge(e,t){return function(){return Object(Ae.R)(e+"Ref",this)||t}}Object(Ae.lb)({compile:function(e,t){if("string"==typeof e)return Ne(e,t);var i=e.elementRef.nativeElement._viewContainerRef,s=e.elementRef.nativeElement.propName;return function(t,n,o){var r=i||n.viewContainerRef,l=r.createEmbeddedView(e,{$implicit:t});l.markForCheck();var a=n&&n.registeredTemplate?n.registeredTemplate:Object(Ae.R)("currentInstance.registeredTemplate",r);return void 0===a[o=o&&n.registeredTemplate?o:s]&&(a[o]=[]),a[o].push(l),l.rootNodes}}});var _e=i("YFW5"),Ue=i("iKlE");let Ke,Ye,Xe,Qe,$e,Je,Ze=!1;function et(e,t){let i=!1;const s={left:0,top:0},n=e;if(!e||!t)return s;for(Object(Ae.T)(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)s.left+=e.offsetLeft,s.top+=e.offsetTop,e=e.offsetParent;for(e=n;(t.offsetParent||i)&&e&&t.offsetParent!==e;)s.left-=e.scrollLeft,s.top-=e.scrollTop,e=e.parentElement;return s}function tt(e,t,i,s,n){return Ye=void 0,Ye=n,Ze=!!s,e?(t||(t="left"),i||(i="top"),Qe=e.ownerDocument,Xe=e,function(e,t,i){switch(Ke=Xe.getBoundingClientRect(),t+e){case"topcenter":it(dt(),i),st(at(),i);break;case"topright":it(ct(),i),st(at(),i);break;case"centercenter":it(dt(),i),st(lt(),i);break;case"centerright":it(ct(),i),st(lt(),i);break;case"centerleft":it(ht(),i),st(lt(),i);break;case"bottomcenter":it(dt(),i),st(rt(),i);break;case"bottomright":it(ct(),i),st(rt(),i);break;case"bottomleft":it(ht(),i),st(rt(),i);break;default:case"topleft":it(ht(),i),st(at(),i)}return i}(t.toLowerCase(),i.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function it(e,t){t.left=e}function st(e,t){t.top=e}function nt(){return Qe.documentElement.scrollTop||Qe.body.scrollTop}function ot(){return Qe.documentElement.scrollLeft||Qe.body.scrollLeft}function rt(){return Ze?Ke.bottom:Ke.bottom+nt()}function lt(){return at()+Ke.height/2}function at(){return Ze?Ke.top:Ke.top+nt()}function ht(){return Ke.left+ot()}function ct(){const e=Xe&&Xe.classList.contains("e-date-range-wrapper")?Ye?Ye.width:0:Ye&&Ke.width>=Ye.width?Ye.width:0;return Ke.right+ot()-e}function dt(){return ht()+Ke.width/2}function pt(e,t=null,i={X:!1,Y:!1},s){if(!i.Y&&!i.X)return{left:0,top:0};const n=e.getBoundingClientRect();if(Je=t,$e=e.ownerDocument,s||(s=tt(e,"left","top")),i.X){const e=Je?Ct():It(),t=jt(),i=Et(),o=t-s.left,r=s.left+n.width-i;n.width>e?s.left=o>0&&r<=0?i-n.width:r>0&&o<=0?t:o>r?i-n.width:t:o>0?s.left+=o:r>0&&(s.left-=r)}if(i.Y){const e=Je?wt():kt(),t=Tt(),i=xt(),o=t-s.top,r=s.top+n.height-i;n.height>e?s.top=o>0&&r<=0?i-n.height:r>0&&o<=0?t:o>r?i-n.height:t:o>0?s.top+=o:r>0&&(s.top-=r)}return s}function ut(e,t=null,i,s){const n=tt(e,"left","top");i&&(n.left=i),s&&(n.top=s);const o=[];Je=t,$e=e.ownerDocument;const r=e.getBoundingClientRect(),l=n.left,a=n.left+r.width,h=vt(n.top,n.top+r.height),c=bt(l,a);return h.topSide&&o.push("top"),c.rightSide&&o.push("right"),c.leftSide&&o.push("left"),h.bottomSide&&o.push("bottom"),o}function mt(e,t,i,s,n,o,r=null,l={X:!0,Y:!0},a){if(!(t&&e&&n&&o&&(l.X||l.Y)))return;const h={TL:null,TR:null,BL:null,BR:null},c={TL:null,TR:null,BL:null,BR:null};let d;if("none"===window.getComputedStyle(e).display){const t=e.style.visibility;e.style.visibility="hidden",e.style.display="block",d=e.getBoundingClientRect(),e.style.removeProperty("display"),e.style.visibility=t}else d=e.getBoundingClientRect();const p={posX:n,posY:o,offsetX:i,offsetY:s,position:{left:0,top:0}};Je=r,$e=t.ownerDocument,function(e,t,i,s,n){i.position=tt(e,i.posX,i.posY,s,n),t.TL=tt(e,"left","top",s,n),t.TR=tt(e,"right","top",s,n),t.BR=tt(e,"left","bottom",s,n),t.BL=tt(e,"right","bottom",s,n)}(t,h,p,a,d),gt(c,p,d),l.X&&ft(t,c,h,p,d,!0),l.Y&&h.TL.top>-1&&yt(t,c,h,p,d,!0),function(e,t,i){let s=0,n=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){const t=tt(e.offsetParent,"left","top",!1,i);s=t.left,n=t.top}e.style.top=t.position.top+t.offsetY-n+"px",e.style.left=t.position.left+t.offsetX-s+"px"}(e,p,d)}function gt(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function bt(e,t){let i=!1,s=!1;return e-Dt()<jt()&&(i=!0),t>Et()&&(s=!0),{leftSide:i,rightSide:s}}function ft(e,t,i,s,n,o){const r=bt(t.TL.left,t.TR.left);i.TL.left-Dt()<=jt()&&(r.leftSide=!1),i.TR.left>Et()&&(r.rightSide=!1),(r.leftSide&&!r.rightSide||!r.leftSide&&r.rightSide)&&(s.posX="right"===s.posX?"left":"right",s.offsetX=s.offsetX+n.width,s.offsetX=-1*s.offsetX,s.position=tt(e,s.posX,s.posY,!1),gt(t,s,n),o&&ft(e,t,i,s,n,!1))}function yt(e,t,i,s,n,o){const r=vt(t.TL.top,t.BL.top);i.TL.top-Rt()<=Tt()&&(r.topSide=!1),i.BL.top>=xt()&&e.getBoundingClientRect().bottom<window.innerHeight&&(r.bottomSide=!1),(r.topSide&&!r.bottomSide||!r.topSide&&r.bottomSide)&&(s.posY="top"===s.posY?"bottom":"top",s.offsetY=s.offsetY+n.height,s.offsetY=-1*s.offsetY,s.position=tt(e,s.posX,s.posY,!1,n),gt(t,s,n),o&&yt(e,t,i,s,n,!1))}function vt(e,t){let i=!1,s=!1;return e-Rt()<Tt()&&(i=!0),t>xt()&&(s=!0),{topSide:i,bottomSide:s}}function Ct(){return Je.getBoundingClientRect().width}function wt(){return Je.getBoundingClientRect().height}function Ot(){return Je.getBoundingClientRect().left}function St(){return Je.getBoundingClientRect().top}function Tt(){return Je?St():0}function jt(){return Je?Ot():0}function Et(){return Je?Dt()+Ot()+Ct():Dt()+It()}function xt(){return Je?Rt()+St()+wt():Rt()+kt()}function Rt(){return $e.documentElement.scrollTop||$e.body.scrollTop}function Dt(){return $e.documentElement.scrollLeft||$e.body.scrollLeft}function kt(){return window.innerHeight}function It(){const e=window.innerWidth;let t=document.documentElement.getBoundingClientRect();return e-(e-(Object(Ae.T)(document.documentElement)?0:t.width))}var Ft=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let At=(()=>{class e extends Ae.e{}return Ft([Object(Ae.r)("left")],e.prototype,"X",void 0),Ft([Object(Ae.r)("top")],e.prototype,"Y",void 0),e})();const Mt="e-popup",Lt="e-rtl",zt="e-popup-open",Bt="e-popup-close";let Pt=(()=>{let e=class extends Ae.h{constructor(e,t){super(t,e)}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"width":Object(Ae.kb)(this.element,{width:Object(Ae.H)(e.width)});break;case"height":Object(Ae.kb)(this.element,{height:Object(Ae.H)(e.height)});break;case"zIndex":Object(Ae.kb)(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":let i=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+i).toString()+"px";break;case"offsetY":let s=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+s).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}getModuleName(){return"popup"}resolveCollision(){this.checkCollision()}getPersistData(){return this.addOnPersist([])}destroy(){this.element.classList.remove(Mt,Lt,zt,Bt),this.unwireEvents(),super.destroy()}render(){this.element.classList.add(Mt);const e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=Object(Ae.H)(this.width)),"auto"!==this.height&&(e.height=Object(Ae.H)(this.height)),Object(Ae.kb)(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()}wireEvents(){Ae.d.isDevice&&Ae.l.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()}wireScrollEvents(){if(this.getRelateToElement())for(const e of this.getScrollableParent(this.getRelateToElement()))Ae.l.add(e,"scroll",this.scrollRefresh,this)}unwireEvents(){Ae.d.isDevice&&Ae.l.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()}unwireScrollEvents(){if(this.getRelateToElement())for(const e of this.getScrollableParent(this.getRelateToElement()))Ae.l.remove(e,"scroll",this.scrollRefresh)}getRelateToElement(){const e=""===this.relateTo||Object(Ae.T)(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo}scrollRefresh(e){if("reposition"===this.actionOnScroll?Object(Ae.T)(this.element)||this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){const t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}}isElementOnViewport(e,t){const i=this.getScrollableParent(e);for(let s=0;s<i.length;s++)if(!this.isElementVisible(e,i[s]))return!1;return!0}isElementVisible(e,t){const i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(Object(Ae.T)(this.checkGetBoundingClientRect(t))){const t=window,s={top:t.scrollY,left:t.scrollX,right:t.scrollX+t.outerWidth,bottom:t.scrollY+t.outerHeight},n=tt(e),o={top:n.top,left:n.left,right:n.left+i.width,bottom:n.top+i.height},r={top:s.bottom-o.top,left:s.right-o.left,bottom:o.bottom-s.top,right:o.right-s.left};return r.top>0&&r.left>0&&r.right>0&&r.bottom>0}{const e=t.getBoundingClientRect();return!(i.bottom<e.top||i.bottom>e.bottom||i.right>e.right||i.left<e.left)}}preRender(){}setEnableRtl(){this.reposition(),this.enableRtl?this.element.classList.add(Lt):this.element.classList.remove(Lt)}setContent(){Object(Ae.T)(this.content)||(this.element.innerHTML="","string"==typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))}orientationOnChange(){setTimeout(()=>{this.refreshPosition()},200)}refreshPosition(e,t){Object(Ae.T)(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()}reposition(){let e,t;const i=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){let s;const n=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(s=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=n,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=s)}else if(i){const t=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=t}else e={left:0,top:0};Object(Ae.T)(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")}checkGetBoundingClientRect(e){let t;try{return t=e.getBoundingClientRect(),t}catch(i){return null}}getAnchorPosition(e,t,i,s,n){const o=this.checkGetBoundingClientRect(t),r=this.checkGetBoundingClientRect(e);if(Object(Ae.T)(o)||Object(Ae.T)(r))return null;const l=e;let a={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?a=tt(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==l.tagName&&(t=t.parentElement),a=et(l,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?a.left+=window.innerWidth/2-o.width/2:a.left+="container"===this.targetType?r.width/2-o.width/2:r.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?a.left+=window.innerWidth-o.width:a.left+="container"===this.targetType?r.width-o.width:r.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?a.top+=window.innerHeight/2-o.height/2:a.top+="container"===this.targetType?r.height/2-o.height/2:r.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?a.top+=window.innerHeight-o.height:a.top+="container"===this.targetType?r.height-o.height:r.height}return a.left+=s,a.top+=n,a}callFlip(e){const t=this.getRelateToElement();mt(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)}callFit(e){if(0!==ut(this.element,this.viewPortElement).length)if(Object(Ae.T)(this.viewPortElement)){const t=pt(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{const t=this.checkGetBoundingClientRect(this.element),i=this.checkGetBoundingClientRect(this.viewPortElement);if(Object(Ae.T)(t)||Object(Ae.T)(i))return null;e&&!0===e.Y&&(i.top>t.top?this.element.style.top="0px":i.bottom<t.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(t.bottom-i.bottom)+"px")),e&&!0===e.X&&(i.right<t.right?this.element.style.left=parseInt(this.element.style.left,10)-(t.right-i.right)+"px":i.left>t.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(i.left-t.left)+"px"))}}checkCollision(){const e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))}show(e,t){if(this.wireEvents(),1e3===this.zIndex||!Object(Ae.T)(t)){const e=Object(Ae.T)(t)?this.element:t;this.zIndex=Ht(e),Object(Ae.kb)(this.element,{zIndex:this.zIndex})}e=Object(Ae.T)(e)||"object"!=typeof e?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(Object(Ae.eb)([this.element],Bt),Object(Ae.u)([this.element],zt),this.checkCollision(),Object(Ae.eb)([this.element],zt),Object(Ae.u)([this.element],Bt)),Object(Ae.T)(e)?(Object(Ae.eb)([this.element],Bt),Object(Ae.u)([this.element],zt),this.trigger("open")):(e.begin=()=>{this.isDestroyed||(Object(Ae.eb)([this.element],Bt),Object(Ae.u)([this.element],zt))},e.end=()=>{this.isDestroyed||this.trigger("open")},new Ae.b(e).animate(this.element))}hide(e){e=Object(Ae.T)(e)||"object"!=typeof e?this.hideAnimation:e,Object(Ae.T)(e)?(Object(Ae.eb)([this.element],zt),Object(Ae.u)([this.element],Bt),this.trigger("close")):(e.end=()=>{this.isDestroyed||(Object(Ae.eb)([this.element],zt),Object(Ae.u)([this.element],Bt),this.trigger("close"))},new Ae.b(e).animate(this.element)),this.unwireEvents()}getScrollableParent(e){return this.checkFixedParent(e),function(e,t){const i=getComputedStyle(e),s=[],n=/(auto|scroll)/;let o=e.parentElement;for(;o&&"HTML"!==o.tagName;){const e=getComputedStyle(o);"absolute"===i.position&&"static"===e.position||!n.test(e.overflow+e.overflowY+e.overflowX)||s.push(o),o=o.parentElement}return t||s.push(document),s}(e,this.fixedParent)}checkFixedParent(e){let t=e.parentElement;for(;t&&"HTML"!==t.tagName;){const e=getComputedStyle(t);"fixed"===e.position&&!Object(Ae.T)(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top)?Object(Ae.H)(window.scrollY-parseInt(this.element.style.top)):Object(Ae.H)(parseInt(this.element.style.top)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,!Object(Ae.T)(this.element)&&Object(Ae.T)(this.element.offsetParent)&&"fixed"===e.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}}};return Ft([Object(Ae.r)("auto")],e.prototype,"height",void 0),Ft([Object(Ae.r)("auto")],e.prototype,"width",void 0),Ft([Object(Ae.r)(null)],e.prototype,"content",void 0),Ft([Object(Ae.r)("container")],e.prototype,"targetType",void 0),Ft([Object(Ae.r)(null)],e.prototype,"viewPortElement",void 0),Ft([Object(Ae.r)({X:"none",Y:"none"})],e.prototype,"collision",void 0),Ft([Object(Ae.r)("")],e.prototype,"relateTo",void 0),Ft([Object(Ae.g)({},At)],e.prototype,"position",void 0),Ft([Object(Ae.r)(0)],e.prototype,"offsetX",void 0),Ft([Object(Ae.r)(0)],e.prototype,"offsetY",void 0),Ft([Object(Ae.r)(1e3)],e.prototype,"zIndex",void 0),Ft([Object(Ae.r)(!1)],e.prototype,"enableRtl",void 0),Ft([Object(Ae.r)("reposition")],e.prototype,"actionOnScroll",void 0),Ft([Object(Ae.r)(null)],e.prototype,"showAnimation",void 0),Ft([Object(Ae.r)(null)],e.prototype,"hideAnimation",void 0),Ft([Object(Ae.k)()],e.prototype,"open",void 0),Ft([Object(Ae.k)()],e.prototype,"close",void 0),Ft([Object(Ae.k)()],e.prototype,"targetExitViewport",void 0),e=Ft([Ae.q],e),e})();function Ht(e){let t=e.parentElement;const i=[];for(;t&&"BODY"!==t.tagName;){const e=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==e&&"static"!==s&&i.push(e),t=t.parentElement}const s=[];for(let l=0;l<document.body.children.length;l++)if(!e.isEqualNode(document.body.children[l])){const e=document.defaultView.getComputedStyle(document.body.children[l],null).getPropertyValue("z-index"),t=document.defaultView.getComputedStyle(document.body.children[l],null).getPropertyValue("position");"auto"!==e&&"static"!==t&&s.push(e)}s.push("999");const n=[];if(!Object(Ae.T)(e.parentElement)&&"BODY"!==e.parentElement.tagName){const t=[].slice.call(e.parentElement.children);for(let i=0;i<t.length;i++)if(!e.isEqualNode(t[i])){const e=document.defaultView.getComputedStyle(t[i],null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(t[i],null).getPropertyValue("position");"auto"!==e&&"static"!==s&&n.push(e)}}const o=i.concat(s,n),r=Math.max.apply(Math,o)+1;return r>2147483647?2147483647:r}const Vt=["north-west","north","north-east","west","east","south-west","south","south-east"],Nt="e-focused-handle",qt=["e-restrict-left"],Wt="e-resize-viewport",Gt=["north","west","east","south"];let _t,Ut,Kt,Yt,Xt,Qt,$t,Jt,Zt,ei=0,ti=0,ii=0,si=0,ni=0,oi=0,ri=null,li=null,ai=null,hi=!0,ci=0,di=!0;function pi(e){yi();const t=Object(Ae.D)("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+e),"south"===e&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),"north"===e&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),"east"===e&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),"west"===e&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),_t.appendChild(t)}function ui(e){let t;return Object(Ae.T)(e)||(t="string"==typeof e?document.querySelector(e):e),t}function mi(e){Object(Ae.T)(e)&&(e=this);const t=_t.querySelectorAll(".e-resize-handle");for(let s=0;s<t.length;s++)Ut=t[s],Ae.l.add(Ut,"mousedown",bi,e),Ae.l.add(Ut,"msie"===Ae.d.info.name?"pointerdown":"touchstart",vi,e);const i=_t.querySelectorAll(".e-dialog-border-resize");if(!Object(Ae.T)(i))for(let s=0;s<i.length;s++)Ut=i[s],Ae.l.add(Ut,"mousedown",bi,e),Ae.l.add(Ut,"msie"===Ae.d.info.name?"pointerdown":"touchstart",vi,e)}function gi(e){return e.indexOf("mouse")>-1?"mouse":"touch"}function bi(e){if(e.preventDefault(),_t=e.target.parentElement,yi(),ni=e.pageX,oi=e.pageY,e.target.classList.add(Nt),!Object(Ae.T)(ri)&&(Zt=this,!0===ri(e,Zt)))return;const t=Object(Ae.T)($t)?document:$t;Ae.l.add(t,"mousemove",Ci,this),Ae.l.add(document,"mouseup",fi,this);for(let i=0;i<qt.length;i++)hi=!_t.classList.contains(qt[i])}function fi(e){const t="msie"===Ae.d.info.name?"pointermove":"touchmove",i="msie"===Ae.d.info.name?"pointerup":"touchend",s=Object(Ae.T)($t)?document:$t,n="msie"===Ae.d.info.name?"pointerdown":"touchstart";Ae.l.remove(s,"mousemove",Ci),Ae.l.remove(s,t,Ci),Ae.l.remove(s,n,Ci),Object(Ae.T)(document.body.querySelector(".e-focused-handle"))||document.body.querySelector(".e-focused-handle").classList.remove(Nt),Object(Ae.T)(ai)||(Zt=this,ai(e,Zt)),Ae.l.remove(document,"mouseup",fi),Ae.l.remove(document,i,fi)}function yi(){ei=parseFloat(getComputedStyle(_t,null).getPropertyValue("width").replace("px","")),ti=parseFloat(getComputedStyle(_t,null).getPropertyValue("height").replace("px","")),ii=_t.getBoundingClientRect().left,si=_t.getBoundingClientRect().top}function vi(e){_t=e.target.parentElement,yi();const t=e.touches?e.changedTouches[0]:e;if(ni=t.pageX,oi=t.pageY,!Object(Ae.T)(ri)&&(Zt=this,!0===ri(e,Zt)))return;const i="msie"===Ae.d.info.name?"pointermove":"touchmove",s="msie"===Ae.d.info.name?"pointerup":"touchend",n=Object(Ae.T)($t)?document:$t;Ae.l.add(n,i,Ci,this),Ae.l.add(document,s,fi)}function Ci(e){if(e.target.classList.contains("e-resize-handle")&&e.target.classList.contains(Nt)?Ut=e.target:Object(Ae.T)(document.body.querySelector(".e-focused-handle"))||(Ut=document.body.querySelector(".e-focused-handle")),!Object(Ae.T)(Ut)){let t="";for(let e=0;e<Vt.length;e++)Ut.classList.contains("e-"+Vt[e])&&(t=Vt[e]);switch(Object(Ae.T)(li)||(Zt=this,li(e,Zt)),t){case"south":Oi(e);break;case"north":Si(e);break;case"west":Ti(e);break;case"east":ji(e);break;case"south-east":Oi(e),ji(e);break;case"south-west":Oi(e),Ti(e);break;case"north-east":Si(e),ji(e);break;case"north-west":Si(e),Ti(e)}}}function wi(e){return e.getBoundingClientRect()}function Oi(e){const t=document.documentElement.clientHeight;let i=!1;const s=(e.touches?e.changedTouches[0]:e).pageY,n=wi(_t);let o;Object(Ae.T)($t)||(o=wi($t)),Object(Ae.T)($t)?Object(Ae.T)($t)&&(t-s>=0||n.top<0)&&(i=!0):i=!0;let r=ti+(s-oi);r=r>Kt?r:Kt;let l=0;Object(Ae.T)($t)||(l=o.top);const a=Object(Ae.T)($t)?0:$t.offsetHeight-$t.clientHeight;let h=n.top-l-a/2;if(h=h<0?0:h,n.top>0&&h+r>Yt){if(i=!1,_t.classList.contains(Wt))return;return void(_t.style.height=Yt-parseInt(h.toString(),10)+"px")}let c=0;if(i){n.top<0&&t+(n.height+n.top)>0&&(c=n.top,r+c<=30&&(r=n.height-(n.height+n.top)+30)),r+n.top>=Yt&&(_t.style.height=n.height+(t-(n.height+n.top))+"px");const e=Object(Ae.T)($t)?c:h;r>=Kt&&r+e<=Yt&&(_t.style.height=r+"px")}}function Si(e){let t,i=!1;const s="mouse"===gi(e.type)?e.pageY:e.touches[0].pageY,n=wi(_t);Object(Ae.T)($t)||(t=wi($t)),(!Object(Ae.T)($t)&&n.top-t.top>0||Object(Ae.T)($t)&&s>0)&&(i=!0);const o=ti-(s-oi);if(i&&o>=Kt&&o<=Yt){let e=0;Object(Ae.T)($t)||(e=t.top);let i=si-e+(s-oi);i=i>0?i:1,_t.style.height=o+"px",_t.style.top=i+"px"}}function Ti(e){const t=document.documentElement.clientWidth;let i,s=!1;Object(Ae.T)($t)||(i=wi($t));const n="mouse"===gi(e.type)?e.pageX:e.touches[0].pageX,o=wi(_t),r=Object(Ae.T)($t)?0:$t.offsetWidth-$t.clientWidth;let l=Object(Ae.T)($t)?0:i.left,a=Object(Ae.T)($t)?0:i.width;Object(Ae.T)(Jt)&&(Object(Ae.T)($t)?Jt=t:(Jt=o.left-l-r/2+o.width,Jt+=a-r-Jt)),(!Object(Ae.T)($t)&&Math.floor(o.left-i.left+o.width+(i.right-o.right))-r<=Qt||Object(Ae.T)($t)&&n>=0)&&(s=!0);let h=ei-(n-ni);if(hi&&(h=h>Jt?Jt:h),s&&h>=Xt&&h<=Qt){let e=0;Object(Ae.T)($t)||(e=i.left);let t=ii-e+(n-ni);t=t>0?t:1,h!==ci&&di&&(_t.style.width=h+"px"),hi&&(_t.style.left=t+"px",di=1!==t)}ci=h}function ji(e){const t=document.documentElement.clientWidth;let i,s=!1;Object(Ae.T)($t)||(i=wi($t));const n=(e.touches?e.changedTouches[0]:e).pageX,o=wi(_t);(!Object(Ae.T)($t)&&(o.left-i.left+o.width<=Qt||o.right-i.left>=o.width)||Object(Ae.T)($t)&&t-n>0)&&(s=!0);const r=ei+(n-ni);let l=0;if(Object(Ae.T)($t)||(l=i.left),o.left-l+r>Qt){if(s=!1,_t.classList.contains(Wt))return;_t.style.width=Qt-(o.left-l)+"px"}s&&r>=Xt&&r<=Qt&&(_t.style.width=r+"px")}function Ei(){const e=_t.querySelectorAll(".e-resize-handle");for(let i=0;i<e.length;i++)Object(Ae.F)(e[i]);const t=_t.querySelectorAll(".e-dialog-border-resize");if(!Object(Ae.T)(t))for(let i=0;i<t.length;i++)Object(Ae.F)(t[i])}var xi=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let Ri=(()=>{class e extends Ae.e{}return xi([Object(Ae.r)(!0)],e.prototype,"isFlat",void 0),xi([Object(Ae.r)()],e.prototype,"buttonModel",void 0),xi([Object(Ae.r)("Button")],e.prototype,"type",void 0),xi([Object(Ae.k)()],e.prototype,"click",void 0),e})(),Di=(()=>{class e extends Ae.e{}return xi([Object(Ae.r)("Fade")],e.prototype,"effect",void 0),xi([Object(Ae.r)(400)],e.prototype,"duration",void 0),xi([Object(Ae.r)(0)],e.prototype,"delay",void 0),e})();const ki="e-dialog",Ii="e-rtl",Fi="e-dlg-header-content",Ai="e-dlg-header",Mi="e-footer-content",Li="e-dlg-modal",zi="e-icon-dlg-close",Bi="e-dlg-target",Pi="e-scroll-disabled",Hi="e-device",Vi="e-dlg-fullscreen",Ni="e-popup-open",qi="Information",Wi="e-scroll-disabled",Gi="e-alert-dialog",_i="e-confirm-dialog",Ui="e-dlg-resizable",Ki="e-restrict-left",Yi="e-resize-viewport",Xi="user action";let Qi=(()=>{let e=class extends Ae.h{constructor(e,t){super(e,t),this.dlgClosedBy=Xi}render(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=Object(Ae.H)(this.minHeight)),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()}preRender(){if(this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=e=>{this.dlgClosedBy="close icon",this.hide(e)},this.dlgOverlayClickEventHandler=e=>{this.dlgClosedBy="overlayClick",e.preventFocus=!1,this.trigger("overlayClick",e,e=>{e.preventFocus||this.focusContent(),this.dlgClosedBy=Xi})},this.l10n=new Ae.p("dialog",{close:"Close"},this.locale),this.checkPositionData(),Object(Ae.T)(this.target)){const e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=e}}isNumberValue(e){return/^[-+]?\d*\.?\d+$/.test(e)}checkPositionData(){if(!Object(Ae.T)(this.position)){if(!Object(Ae.T)(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){const e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=e}if(!Object(Ae.T)(this.position.Y)&&"number"!=typeof this.position.Y&&this.isNumberValue(this.position.Y)){const e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=e}}}getEle(e,t){let i;for(let s=0;s<e.length;s++)if(e[s].classList.contains(t)){i=e[s];break}return i}getMinHeight(){let e="0px",t="0px";Object(Ae.T)(this.element.querySelector("."+Fi))||(e=getComputedStyle(this.headerContent).height);const i=this.getEle(this.element.children,Mi);Object(Ae.T)(i)||(t=getComputedStyle(i).height);const s=parseInt(e.slice(0,e.indexOf("p")),10),n=parseInt(t.slice(0,t.indexOf("p")),10);var o;return o=s+30+(isNaN(n)?0:n),Kt=o,s+30+n}onResizeStart(e,t){return t.trigger("resizeStart",e),e.cancel}onResizing(e,t){t.trigger("resizing",e)}onResizeComplete(e,t){t.trigger("resizeStop",e)}setResize(){if(this.enableResize){if(this.isBlazorServerRender()&&!Object(Ae.T)(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add(Ui);const e=getComputedStyle(this.element).minHeight,t=getComputedStyle(this.element).minWidth;let i="";for(let s=0;s<this.resizeHandles.length;s++){if("All"===this.resizeHandles[s]){i="south north east west north-east north-west south-east south-west";break}{let e="";switch(this.resizeHandles[s].toString()){case"SouthEast":e="south-east";break;case"SouthWest":e="south-west";break;case"NorthEast":e="north-east";break;case"NorthWest":e="north-west";break;default:e=this.resizeHandles[s].toString()}i+=e.toLocaleLowerCase()+" "}}this.enableRtl&&"south-east"===i.trim()?i="south-west":this.enableRtl&&"south-west"===i.trim()&&(i="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(Ki):this.isModal&&this.target===document.body&&this.element.classList.add(Yi),function(e){ri=e.resizeBegin,li=e.resizing,ai=e.resizeComplete,_t=ui(e.element),$t=ui(e.boundary);const t=e.direction.split(" ");for(let i=0;i<t.length;i++)if(Gt.indexOf(t[i])>=0&&t[i])pi(t[i]);else if(""!==t[i].trim()){const e=Object(Ae.D)("div",{className:"e-icons e-resize-handle e-"+t[i]});_t.appendChild(e)}Kt=e.minHeight,Xt=e.minWidth,Qt=e.maxWidth,Yt=e.maxHeight,e.proxy&&e.proxy.element&&e.proxy.element.classList.contains("e-dialog")?mi(e.proxy):mi()}({element:this.element,direction:i,minHeight:parseInt(e.slice(0,t.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(t.slice(0,t.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else Ei(),this.unWireWindowResizeEvent(),this.element.classList.remove(this.isModal?Ki:Yi),this.element.classList.remove(Ui)}getFocusElement(e){const t=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:t[t.length-1]}}keyDown(e){if(9===e.keyCode&&this.isModal){let t;Object(Ae.T)(this.btnObj)||(t=this.btnObj[this.btnObj.length-1]),Object(Ae.T)(this.btnObj)&&!Object(Ae.T)(this.ftrTemplateContent)&&(t=this.getFocusElement(this.ftrTemplateContent)),Object(Ae.T)(this.btnObj)&&Object(Ae.T)(this.ftrTemplateContent)&&!Object(Ae.T)(this.contentEle)&&(t=this.getFocusElement(this.contentEle)),Object(Ae.T)(t)||document.activeElement!==t.element||e.shiftKey||(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),Object(Ae.T)(t)||t.element.focus())}const t=document.activeElement,i=["input","textarea"].indexOf(t.tagName.toLowerCase())>-1;let s=!1;if(i||(s=t.hasAttribute("contenteditable")&&"true"===t.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape&&(this.dlgClosedBy="escape",this.hide(e)),13===e.keyCode&&!e.ctrlKey&&"textarea"!==t.tagName.toLowerCase()&&i&&!Object(Ae.T)(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===t.tagName.toLowerCase()||s)&&!Object(Ae.T)(this.primaryButtonEle)){let t;this.buttons.some((e,i)=>{t=i;let s=e.buttonModel;return!Object(Ae.T)(s)&&!0===s.isPrimary})&&"function"==typeof this.buttons[t].click&&setTimeout(()=>{this.buttons[t].click.call(this,e)})}}initialize(){Object(Ae.T)(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||Object(Ae.u)([this.element],ki),Ae.d.isDevice&&Object(Ae.u)([this.element],Hi),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()}initRender(){if(this.initialRender=!0,this.isBlazorServerRender()||Object(Ae.w)(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&Object(Ae.T)(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&Object(Ae.T)(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""===this.header||Object(Ae.T)(this.header)||this.setHeader(),this.showCloseIcon&&this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||Object(Ae.T)(this.footerTemplate)?Object(Ae.T)(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&(Object(Ae.T)(this.buttons[0].buttonModel)||""!==this.footerTemplate||this.setButton()),this.allowDragging&&!Object(Ae.T)(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(Object(Ae.w)(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&Object(Ae.T)(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(let e=0,t=this.dlgContainer.children;e<t.length;e++)t[e].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=t[e])}if(!0!==this.element.classList.contains(Gi)&&!0!==this.element.classList.contains(_i)&&!Object(Ae.T)(this.element.parentElement)){const e=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),e.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}Object(Ae.T)(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new Pt(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:e=>{const t={container:this.isModal?this.dlgContainer:this.element,element:this.element,target:this.target,preventFocus:!1};this.enableResize&&this.resetResizeIcon(),this.trigger("open",t,e=>{e.preventFocus||this.focusContent()})},close:e=>{this.isModal&&Object(Ae.u)([this.dlgOverlay],"e-fade"),this.unBindEvent(this.element),this.isModal&&(this.dlgContainer.style.display="none"),this.trigger("close",this.closeArgs);const t=document.activeElement;Object(Ae.T)(t)||Object(Ae.T)(t.blur)||t.blur(),Object(Ae.T)(this.storeActiveElement)||Object(Ae.T)(this.storeActiveElement.focus)||this.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(Object(Ae.u)([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1}resetResizeIcon(){const e=this.getMinHeight();if(this.targetEle.offsetHeight<e){const t=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));Object(Ae.T)(t)||(t.style.bottom="-"+e.toString()+"px")}}setOverlayZindex(e){let t;t=Object(Ae.T)(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()}positionChange(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()}setPopupPosition(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})}setAllowDragging(){this.dragObj=new Ae.i(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:e=>{this.trigger("dragStart",e,t=>{Object(Ae.S)()&&t.bindEvents(e.dragElement)})},dragStop:e=>{this.isModal&&(Object(Ae.T)(this.position)||this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y),this.element.style.position="relative"),this.trigger("dragStop",e),this.element.classList.remove(Ki)},drag:e=>{this.trigger("drag",e)}}),Object(Ae.T)(this.targetEle)||(this.dragObj.dragArea=this.targetEle)}setButton(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(let e=0;e<this.buttons.length;e++){const t=Object(Ae.T)(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),i=this.createElement("button",{attrs:{type:t}});this.buttonContent.push(i.outerHTML)}this.setFooterTemplate()}let e;for(let t=0,i=this.element.children;t<i.length;t++)i[t].classList.contains(Mi)&&(e=i[t].querySelectorAll("button"));for(let t=0;t<this.buttons.length;t++)this.isBlazorServerRender()||(this.btnObj[t]=new Ue.a(this.buttons[t].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector(".e-footer-content")),!Object(Ae.T)(this.ftrTemplateContent)&&e.length>0&&("function"==typeof this.buttons[t].click&&Ae.l.add(e[t],"click",this.buttons[t].click,this),"object"==typeof this.buttons[t].click&&Ae.l.add(e[t],"click",this.buttonClickHandler.bind(this,t),this)),this.isBlazorServerRender()||Object(Ae.T)(this.ftrTemplateContent)||(this.btnObj[t].appendTo(this.ftrTemplateContent.children[t]),this.buttons[t].isFlat&&this.btnObj[t].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])}buttonClickHandler(e){this.trigger("buttons["+e+"].click",{})}setContent(){Object(Ae.w)(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(Object(Ae.T)(this.content)||""===this.content)&&this.initialRender||("string"!=typeof this.content||Object(Ae.S)()?this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content"):this.contentEle.innerHTML=this.sanitizeHelper(this.content)),Object(Ae.T)(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(this.isBlazorServerRender()||!Ae.d.isIE||""!==this.element.style.width||Object(Ae.T)(this.width)||(this.element.style.width=Object(Ae.H)(this.width)),this.setMaxHeight())}setTemplate(e,t,i){let s,n,o;n=t.classList.contains(Ai)?this.element.id+"header":t.classList.contains(Mi)?this.element.id+"footerTemplate":this.element.id+"content",Object(Ae.T)(e.outerHTML)?"string"!=typeof e||Object(Ae.S)()&&!this.isStringTemplate?(s=Object(Ae.C)(e),o=e):t.innerHTML=this.sanitizeHelper(e):t.appendChild(e);const r=[];if(!Object(Ae.T)(s)){const e=!(Object(Ae.S)()&&!this.isStringTemplate&&0===o.indexOf("<div>Blazor"))||this.isStringTemplate;for(const t of s({},this,i,n,e))r.push(t);Object(Ae.v)([].slice.call(r),t)}}sanitizeHelper(e){if(this.enableHtmlSanitizer){const t=Ae.s.beforeSanitize(),i={cancel:!1,helper:null};Object(Ae.G)(t,t,i),this.trigger("beforeSanitizeHtml",t),t.cancel&&!Object(Ae.T)(t.helper)?e=t.helper(e):t.cancel||(e=Ae.s.serializeValue(t,e))}return e}setMaxHeight(){if(!this.allowMaxHeight)return;const e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!Object(Ae.T)(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,Ae.d.isIE&&"auto"===this.height&&!Object(Ae.T)(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}setEnableRTL(){this.isBlazorServerRender()||(this.enableRtl?Object(Ae.u)([this.element],Ii):Object(Ae.eb)([this.element],Ii)),Object(Ae.T)(this.element.querySelector(".e-resize-handle"))||(Ei(),this.setResize())}setTargetContent(){if(Object(Ae.T)(this.content)||""===this.content){const e=""!==this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"");(this.element.children.length>0||e)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(e=>{8!==e.nodeType&&this.innerContentElement.appendChild(e)}))}}setHeader(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:Ai}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),Object(Ae.w)(this.element,{"aria-labelledby":this.element.id}),this.element.insertBefore(this.headerContent,this.element.children[0])}setFooterTemplate(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:Mi}),""===this.footerTemplate||Object(Ae.T)(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)}createHeaderContent(){Object(Ae.T)(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:Fi}))}renderCloseIcon(){this.closeIcon=this.createElement("button",{className:"e-dlg-closeicon-btn",attrs:{type:"button"}}),this.closeIconBtnObj=new Ue.a({cssClass:"e-flat",iconCss:zi+" e-icons"}),this.closeIconTitle(),Object(Ae.T)(this.headerContent)?(this.createHeaderContent(),Object(Ae.bb)([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):Object(Ae.bb)([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon)}closeIconTitle(){this.l10n.setLocale(this.locale);const e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)}setCSSClass(e){this.cssClass&&Object(Ae.u)([this.element],this.cssClass.split(" ")),e&&Object(Ae.eb)([this.element],e.split(" "))}setIsModal(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.element.classList.remove(Ni),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),Object(Ae.u)([this.element],Li),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)}getValidFocusNode(e){let t;for(let i=0;i<e.length;i++){if(t=e[i],(t.clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;t=null}return t}focusableElements(e){if(!Object(Ae.T)(e)){const t=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(t)}return null}getAutoFocusNode(e){let t=e.querySelector(".e-dlg-closeicon-btn");const i=e.querySelectorAll("[autofocus]");let s=this.getValidFocusNode(i);if(Object(Ae.S)()&&(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]),Object(Ae.T)(s)){if(s=this.focusableElements(this.contentEle),!Object(Ae.T)(s))return s;if(!Object(Ae.T)(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=s;return t}disableElement(e,t){const i=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(i)for(;e;e=e.parentNode)if(e instanceof Element&&i.call(e,t))return e;return null}focusContent(){const e=this.getAutoFocusNode(this.element),t=Object(Ae.T)(e)?this.element:e,i=Ae.d.userAgent;(i.indexOf("MSIE ")>0||i.indexOf("Trident/")>0)&&this.element.focus(),t.focus(),this.bindEvent(this.element)}bindEvent(e){Ae.l.add(e,"keydown",this.keyDown,this)}unBindEvent(e){Ae.l.remove(e,"keydown",this.keyDown)}updateSanitizeContent(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))}isBlazorServerRender(){return Object(Ae.S)()&&this.isServerRendered}getModuleName(){return"dialog"}onPropertyChanged(e,t){if(this.element.classList.contains(ki))for(const i of Object.keys(e))switch(i){case"content":Object(Ae.T)(this.content)||""===this.content?Object(Ae.T)(this.contentEle)||(Object(Ae.F)(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),Object(Ae.T)(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?this.isBlazorServerRender()&&!Object(Ae.T)(this.element.querySelector(".e-dlg-content"))||this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"==typeof this.content?(this.clearTemplate(["content"]),Object(Ae.F)(this.contentEle),this.contentEle=null,this.setContent()):"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||Object(Ae.T)(this.header)?this.headerEle&&(Object(Ae.F)(this.headerEle),this.headerEle=null):this.isBlazorServerRender()&&!Object(Ae.T)(this.element.querySelector(".e-dlg-header-content"))||this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||Object(Ae.T)(this.footerTemplate)){if(!this.ftrTemplateContent)return;Object(Ae.F)(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.isBlazorServerRender()&&!Object(Ae.T)(this.element.querySelector(".e-footer-content"))||this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(zi).length>0?this.showCloseIcon||""!==this.header&&!Object(Ae.T)(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():Object(Ae.F)(this.closeIcon):(Object(Ae.F)(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":Object(Ae.kb)(this.element,{height:Object(Ae.H)(e.height)});break;case"width":Object(Ae.kb)(this.element,{width:Object(Ae.H)(e.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(t.cssClass);break;case"buttons":{const e=this.buttons.length;Object(Ae.T)(this.ftrTemplateContent)||this.isBlazorServerRender()||(Object(Ae.F)(this.ftrTemplateContent),this.ftrTemplateContent=null);for(let t=0;t<e;t++)Object(Ae.T)(this.buttons[t].buttonModel)||(this.footerTemplate="",this.setButton());break}case"allowDragging":this.allowDragging&&!Object(Ae.T)(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){const e=Object(Ae.T)(t.position.X)?this.position.X:t.position.X,i=Object(Ae.T)(t.position.Y)?this.position.Y:t.position.Y;this.dlgContainer.classList.contains("e-dlg-"+e+"-"+i)&&this.dlgContainer.classList.remove("e-dlg-"+e+"-"+i)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize()}}setTarget(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()}updateIsModal(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)Object(Ae.T)(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",Object(Ae.T)(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(Object(Ae.eb)([this.element],Li),Object(Ae.eb)([document.body],[Bi,Pi]),Object(Ae.F)(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&Ae.l.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}setzIndex(e,t){const i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.zIndex=Ht(e),this.isProtectedOnChange=i,t&&(this.popupObj.zIndex=this.zIndex)}windowResizeHandler(){Qt=this.targetEle.clientWidth,Yt=this.targetEle.clientHeight,this.setMaxHeight()}getPersistData(){return this.addOnPersist([])}destroy(){if(this.isDestroyed)return;const e=[Ii,Li,Ui,Ki,Vi,Hi],t=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(Object(Ae.eb)([this.targetEle],[Bi,Pi]),!Object(Ae.T)(this.element)&&this.element.classList.contains(Vi)&&Object(Ae.eb)([document.body],[Bi,Pi]),this.isModal&&Object(Ae.eb)([Object(Ae.T)(this.targetEle)?document.body:this.targetEle],Pi),this.unWireEvents(),!Object(Ae.T)(this.btnObj))for(let i=0;i<this.btnObj.length;i++)this.btnObj[i].destroy();if(Object(Ae.T)(this.dragObj)||this.dragObj.destroy(),!Object(Ae.T)(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),Object(Ae.eb)([this.element],e),Object(Ae.T)(this.cssClass)||""===this.cssClass||Object(Ae.eb)([this.element],this.cssClass.split(" ")),Object(Ae.T)(this.refElement)||Object(Ae.T)(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),Object(Ae.F)(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(Object(Ae.F)(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),Object(Ae.F)(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!Object(Ae.T)(this.element.children))for(let i=0;i<=this.element.children.length;i++)i-=i,Object(Ae.F)(this.element.children[i]);for(let i=0;i<t.length;i++)this.element.removeAttribute(t[i]);this.isBlazorServerRender()?this.isDestroyed=!0:super.destroy(),this.isReact&&this.clearTemplate()}wireWindowResizeEvent(){window.addEventListener("resize",this.windowResizeHandler.bind(this))}unWireWindowResizeEvent(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))}wireEvents(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&Ae.l.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&Ae.l.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}unWireEvents(){if(this.showCloseIcon&&Ae.l.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&Ae.l.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!Object(Ae.T)(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(let e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&Ae.l.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)}refreshPosition(){this.popupObj.refreshPosition()}show(e){if(this.element.classList.contains(ki)){if(!this.element.classList.contains(Ni)||!Object(Ae.T)(e)){Object(Ae.T)(e)||this.fullScreen(e);const t=Object(Ae.S)()?{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,maxHeight:this.element.style.maxHeight}:{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",t,e=>{if(!e.cancel){this.element.style.maxHeight!==t.maxHeight&&(this.allowMaxHeight=!1,this.element.style.maxHeight=t.maxHeight),this.storeActiveElement=document.activeElement,this.element.tabIndex=-1,this.isModal&&!Object(Ae.T)(this.dlgOverlay)&&(this.dlgOverlay.style.display="block",this.dlgContainer.style.display="flex",Object(Ae.eb)([this.dlgOverlay],"e-fade"),Object(Ae.T)(this.targetEle)?Object(Ae.u)([document.body],[Bi,Pi]):(this.dlgContainer.style.position=this.targetEle===document.body?"fixed":"absolute",this.dlgOverlay.style.position="absolute",this.element.style.position="relative",Object(Ae.u)([this.targetEle],[Bi,Pi])));const e={name:this.animationSettings.effect+"In",duration:this.animationSettings.duration,delay:this.animationSettings.delay},i=this.isModal?this.element.parentElement:this.element;this.calculatezIndex&&(this.setzIndex(i,!0),Object(Ae.kb)(this.element,{zIndex:this.zIndex}),this.isModal&&this.setOverlayZindex(this.zIndex)),"None"===this.animationSettings.effect?this.popupObj.show():this.popupObj.show(e),this.dialogOpen=!0;const s=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!0,this.preventVisibility=!0,this.isProtectedOnChange=s}})}this.isReact&&this.renderReactTemplates()}}hide(e){if(this.element.classList.contains(ki)&&this.preventVisibility){const t=Object(Ae.S)()?{cancel:!1,isInteracted:!!e,element:this.element,container:this.isModal?this.dlgContainer:this.element,event:e}:{cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e,closedBy:this.dlgClosedBy};this.closeArgs=t,this.trigger("beforeClose",t,e=>{if(!e.cancel){this.isModal&&(Object(Ae.T)(this.targetEle)||Object(Ae.eb)([this.targetEle],[Bi,Pi])),document.body.classList.contains(Bi)&&document.body.classList.contains(Pi)&&Object(Ae.eb)([document.body],[Bi,Pi]);const e={name:this.animationSettings.effect+"Out",duration:this.animationSettings.duration,delay:this.animationSettings.delay};"None"===this.animationSettings.effect?this.popupObj.hide():this.popupObj.hide(e),this.dialogOpen=!1;const t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!1,this.preventVisibility=!1,this.isProtectedOnChange=t}this.dlgClosedBy=Xi})}}fullScreen(e){if(e){Object(Ae.u)([this.element],Vi);const e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=Object(Ae.T)(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=e,Object(Ae.u)([document.body],[Bi,Pi]),this.allowDragging&&!Object(Ae.T)(this.dragObj)&&this.dragObj.destroy()}else Object(Ae.eb)([this.element],Vi),Object(Ae.eb)([document.body],[Bi,Pi]),this.allowDragging&&!Object(Ae.T)(this.headerContent)&&this.setAllowDragging();return e}getButtons(e){return Object(Ae.T)(e)?this.btnObj:this.btnObj[e]}};return xi([Object(Ae.r)("")],e.prototype,"content",void 0),xi([Object(Ae.r)(!0)],e.prototype,"enableHtmlSanitizer",void 0),xi([Object(Ae.r)(!1)],e.prototype,"showCloseIcon",void 0),xi([Object(Ae.r)(!1)],e.prototype,"isModal",void 0),xi([Object(Ae.r)("")],e.prototype,"header",void 0),xi([Object(Ae.r)(!0)],e.prototype,"visible",void 0),xi([Object(Ae.r)(!1)],e.prototype,"enableResize",void 0),xi([Object(Ae.r)(["South-East"])],e.prototype,"resizeHandles",void 0),xi([Object(Ae.r)("auto")],e.prototype,"height",void 0),xi([Object(Ae.r)("")],e.prototype,"minHeight",void 0),xi([Object(Ae.r)("100%")],e.prototype,"width",void 0),xi([Object(Ae.r)("")],e.prototype,"cssClass",void 0),xi([Object(Ae.r)(1e3)],e.prototype,"zIndex",void 0),xi([Object(Ae.r)(null)],e.prototype,"target",void 0),xi([Object(Ae.r)("")],e.prototype,"footerTemplate",void 0),xi([Object(Ae.r)(!1)],e.prototype,"allowDragging",void 0),xi([Object(Ae.f)([{}],Ri)],e.prototype,"buttons",void 0),xi([Object(Ae.r)(!0)],e.prototype,"closeOnEscape",void 0),xi([Object(Ae.g)({},Di)],e.prototype,"animationSettings",void 0),xi([Object(Ae.g)({X:"center",Y:"center"},At)],e.prototype,"position",void 0),xi([Object(Ae.k)()],e.prototype,"created",void 0),xi([Object(Ae.k)()],e.prototype,"open",void 0),xi([Object(Ae.k)()],e.prototype,"beforeSanitizeHtml",void 0),xi([Object(Ae.k)()],e.prototype,"beforeOpen",void 0),xi([Object(Ae.k)()],e.prototype,"close",void 0),xi([Object(Ae.k)()],e.prototype,"beforeClose",void 0),xi([Object(Ae.k)()],e.prototype,"dragStart",void 0),xi([Object(Ae.k)()],e.prototype,"dragStop",void 0),xi([Object(Ae.k)()],e.prototype,"drag",void 0),xi([Object(Ae.k)()],e.prototype,"overlayClick",void 0),xi([Object(Ae.k)()],e.prototype,"resizeStart",void 0),xi([Object(Ae.k)()],e.prototype,"resizing",void 0),xi([Object(Ae.k)()],e.prototype,"resizeStop",void 0),xi([Object(Ae.k)()],e.prototype,"destroyed",void 0),e=xi([Ae.q],e),e})();var $i;!function(e){function t(e,t){const i=new Qi(e);return i.appendTo(t),i}function i(e,t){return e.header=Object(Ae.T)(t.title)?qi:t.title,e.content=Object(Ae.T)(t.content)?"":t.content,e.isModal=!!Object(Ae.T)(t.isModal)||t.isModal,e.showCloseIcon=!Object(Ae.T)(t.showCloseIcon)&&t.showCloseIcon,e.allowDragging=!Object(Ae.T)(t.isDraggable)&&t.isDraggable,e.closeOnEscape=!Object(Ae.T)(t.closeOnEscape)&&t.closeOnEscape,e.position=Object(Ae.T)(t.position)?{X:"center",Y:"top"}:t.position,e.animationSettings=Object(Ae.T)(t.animationSettings)?{effect:"Fade",duration:400,delay:0}:t.animationSettings,e.cssClass=Object(Ae.T)(t.cssClass)?"":t.cssClass,e.zIndex=Object(Ae.T)(t.zIndex)?1e3:t.zIndex,e.open=Object(Ae.T)(t.open)?null:t.open,e}function s(e,t,i){const s=i;return Object(Ae.T)(t.text)||(s.buttonModel.content=t.text),Object(Ae.T)(t.icon)||(s.buttonModel.iconCss=t.icon),Object(Ae.T)(t.cssClass)||(s.buttonModel.cssClass=t.cssClass),Object(Ae.T)(t.click)||(s.click=t.click),s}e.alert=function(e){const n=Object(Ae.D)("div",{className:Gi});let o;return document.body.appendChild(n),o=t("string"==typeof e?{content:e,position:{X:"center",Y:"top"},isModal:!0,header:qi,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function(e){let t={buttons:[]};return t=i(t,e),t=function(e,t){const i=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return Object(Ae.T)(t.okButton)?e.buttons=i:e.buttons[0]=s(0,t.okButton,i[0]),e}(t,e),t}(e),n),o.close=()=>{e&&e.close&&e.close.apply(o),o.destroy(),o.element.classList.contains("e-dlg-modal")?(o.element.parentElement.remove(),o.target.classList.remove(Wi)):o.element.remove()},o},e.confirm=function(e){const n=Object(Ae.D)("div",{className:_i});let o;return document.body.appendChild(n),o=t("string"==typeof e?{position:{X:"center",Y:"top"},content:e,isModal:!0,header:qi,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function(e){let t={buttons:[]};return t=i(t,e),t=function(e,t){const i={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},n={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return e.buttons[0]=Object(Ae.T)(t.okButton)?i:s(0,t.okButton,i),e.buttons[1]=Object(Ae.T)(t.cancelButton)?n:s(0,t.cancelButton,n),e}(t,e),t}(e),n),o.close=()=>{e&&e.close&&e.close.apply(o),o.destroy(),o.element.classList.contains("e-dlg-modal")?(o.element.parentElement.remove(),o.target.classList.remove(Wi)):o.element.remove()},o}}($i||($i={}));var Ji=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const Zi="e-tooltip",es="e-rtl",ts="e-tip-content",is="e-arrow-tip",ss="e-arrow-tip-inner",ns="e-tip-bottom",os="e-tip-top",rs="e-tip-left",ls="e-tip-right",as="e-popup-open",hs="e-popup-close";let cs=(()=>{class e extends Ae.e{}return Ji([Object(Ae.r)({effect:"FadeIn",duration:150,delay:0})],e.prototype,"open",void 0),Ji([Object(Ae.r)({effect:"FadeOut",duration:150,delay:0})],e.prototype,"close",void 0),e})(),ds=(()=>{let e=class extends Ae.h{constructor(e,t){super(e,t),this.mouseMoveEvent=null,this.mouseMoveTarget=null}initialize(){this.formatPosition(),Object(Ae.u)([this.element],Zi)}formatPosition(){0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?[this.tooltipPositionY,this.tooltipPositionX]=this.position.split(/(?=[A-Z])/):[this.tooltipPositionX,this.tooltipPositionY]=this.position.split(/(?=[A-Z])/)}renderArrow(){this.setTipClass(this.position);const e=this.createElement("div",{className:is+" "+this.tipClass});e.appendChild(this.createElement("div",{className:"e-arrow-tip-outer "+this.tipClass})),e.appendChild(this.createElement("div",{className:ss+" "+this.tipClass})),this.tooltipEle.appendChild(e)}setTipClass(e){this.tipClass=0===e.indexOf("Right")?rs:0===e.indexOf("Bottom")?os:0===e.indexOf("Left")?ls:ns}renderPopup(e){const t=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new Pt(this.tooltipEle,{height:this.height,width:this.width,position:{X:t.left,Y:t.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})}getTooltipPosition(e){this.tooltipEle.style.display="block";const t=tt(e,this.tooltipPositionX,this.tooltipPositionY),i=this.calculateTooltipOffset(this.position),s=this.collisionFlipFit(e,t.left+i.left,t.top+i.top);return this.tooltipEle.style.display="",s}windowResize(){this.reposition(this.findTarget())}reposition(e){if(this.popupObj&&e){const t=this.getTooltipPosition(e);this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind()}}openPopupHandler(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)}closePopupHandler(){this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)}calculateTooltipOffset(e){const t={top:0,left:0},i=this.tooltipEle.offsetWidth,s=this.tooltipEle.offsetHeight,n=Object(Ae.hb)("."+is,this.tooltipEle),o=n?n.offsetWidth:0,r=n?n.offsetHeight:0;let l=this.showTipPointer?0:8;const a=r/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),h=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(l+=2),e){case"RightTop":t.left+=o+l,t.top-=s-a;break;case"RightCenter":t.left+=o+l,t.top-=s/2;break;case"RightBottom":t.left+=o+l,t.top-=a;break;case"BottomRight":t.top+=r+l,t.left-=h;break;case"BottomCenter":t.top+=r+l,t.left-=i/2;break;case"BottomLeft":t.top+=r+l,t.left-=i-h;break;case"LeftBottom":t.left-=o+i+l,t.top-=a;break;case"LeftCenter":t.left-=o+i+l,t.top-=s/2;break;case"LeftTop":t.left-=o+i+l,t.top-=s-a;break;case"TopLeft":t.top-=s+r+l,t.left-=i-h;break;case"TopRight":t.top-=s+r+l,t.left-=h;break;default:t.top-=s+r+l,t.left-=i/2}return t.left+=this.offsetX,t.top+=this.offsetY,t}updateTipPosition(e){const t=Object(Ae.ib)(".e-arrow-tip,.e-arrow-tip-outer,."+ss,this.tooltipEle),i=[ns,os,rs,ls];Object(Ae.eb)(t,i),this.setTipClass(e),Object(Ae.u)(t,this.tipClass)}adjustArrow(e,t,i,s){if(!1===this.showTipPointer)return;let n,o;this.updateTipPosition(t),this.tooltipEle.style.display="block";const r=this.tooltipEle.clientWidth,l=this.tooltipEle.clientHeight,a=Object(Ae.hb)("."+is,this.tooltipEle),h=Object(Ae.hb)("."+ss,this.tooltipEle),c=a.offsetWidth,d=a.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===ns||this.tipClass===os){if(this.tipClass===ns?(o="99.9%",h.style.top="-"+(d-2)+"px"):(o=-(d-1)+"px",h.style.top="-"+(d-6)+"px"),e){const t="Center"!==i||r>e.offsetWidth||this.mouseTrail;n=t&&"Left"===i||!t&&"End"===this.tipPointerPosition?r-c-2+"px":t&&"Right"===i||!t&&"Start"===this.tipPointerPosition?"2px":r/2-c/2+"px"}}else{this.tipClass===ls?(n="99.9%",h.style.left="-"+(c-2)+"px"):(n=-(c-1)+"px",h.style.left=c-2-c+"px");const t="Center"!==s||l>e.offsetHeight||this.mouseTrail;o=t&&"Top"===s||!t&&"End"===this.tipPointerPosition?l-d-2+"px":t&&"Bottom"===s||!t&&"Start"===this.tipPointerPosition?"2px":l/2-d/2+"px"}a.style.top=o,a.style.left=n}renderContent(e){const t=Object(Ae.hb)("."+ts,this.tooltipEle);if(this.cssClass&&Object(Ae.u)([this.tooltipEle],this.cssClass.split(" ")),e&&!Object(Ae.T)(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),Object(Ae.T)(this.content))e&&!Object(Ae.T)(e.getAttribute("data-content"))&&(t.innerHTML=e.getAttribute("data-content"));else if(t.innerHTML="",this.content instanceof HTMLElement)t.appendChild(this.content);else if("string"==typeof this.content)this.enableHtmlSanitizer&&this.setProperties({content:Ae.s.sanitize(this.content)},!0),t[this.enableHtmlParse?"innerHTML":"textContent"]=this.content;else{const e=Object(Ae.C)(this.content)({},this,"content",this.element.id+"content",void 0,void 0,t);e&&Object(Ae.v)(e,t),this.renderReactTemplates()}}renderCloseIcon(){if(!this.isSticky)return;const e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),Ae.l.add(e,Ae.d.touchStartEvent,this.onStickyClose,this)}addDescribedBy(e,t){const i=(e.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),Object(Ae.w)(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})}removeDescribedBy(e){const t=e.getAttribute("data-tooltip-id"),i=(e.getAttribute("aria-describedby")||"").split(/\s+/),s=i.indexOf(t);-1!==s&&i.splice(s,1),e.removeAttribute("data-tooltip-id");const n=i.join(" ").trim();n?e.setAttribute("aria-describedby",n):e.removeAttribute("aria-describedby")}tapHoldHandler(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)}touchEndHandler(e){this.isSticky||(this.autoCloseTimer=setTimeout(()=>{this.close()},1500))}targetClick(e){let t;t=this.target?Object(Ae.A)(e.target,this.target):this.element,Object(Ae.T)(t)||(null===t.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,t))}targetHover(e){let t;if(t=this.target?Object(Ae.A)(e.target,this.target):this.element,Object(Ae.T)(t)||null!==t.getAttribute("data-tooltip-id")&&0===this.closeDelay)return;const i=[].slice.call(Object(Ae.ib)('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));for(const s of i)this.restoreElement(s);this.showTooltip(t,this.animation.open,e)}mouseMoveBeforeOpen(e){this.mouseMoveEvent=e}mouseMoveBeforeRemove(){this.mouseMoveTarget&&Ae.l.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)}showTooltip(e,t,i){clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,Ae.l.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:this.tooltipEle,isInteracted:!Object(Ae.T)(i)},this.trigger("beforeRender",this.tooltipEventArgs,(s=>{this.beforeRenderCallback(s,e,i,t)}).bind(this))}beforeRenderCallback(e,t,i,s){e.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,Object(Ae.T)(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?Object(Ae.Q)(this.element.getAttribute("id")):Object(Ae.Q)("tooltip"),this.tooltipEle=this.createElement("div",{className:"e-tooltip-wrap e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+Object(Ae.H)(this.width)+";height:"+Object(Ae.H)(this.height)+";position:absolute;"}),this.tooltipBeforeRender(t,this),this.tooltipAfterRender(t,i,s,this)):t&&(this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),Ae.b.stop(this.tooltipEle),this.reposition(t),this.tooltipAfterRender(t,i,s,this)))}tooltipBeforeRender(e,t){e&&(Ae.d.isDevice&&Object(Ae.u)([t.tooltipEle],"e-bigger"),"auto"!==t.width&&(t.tooltipEle.style.maxWidth=Object(Ae.H)(t.width)),t.tooltipEle.appendChild(t.createElement("div",{className:ts})),document.body.appendChild(t.tooltipEle),Object(Ae.eb)([t.tooltipEle],"e-hidden"),t.addDescribedBy(e,t.ctrlId+"_content"),t.renderContent(e),Object(Ae.u)([t.tooltipEle],as),t.showTipPointer&&t.renderArrow(),t.renderCloseIcon(),t.renderPopup(e),t.adjustArrow(e,t.position,t.tooltipPositionX,t.tooltipPositionY),Ae.b.stop(t.tooltipEle),t.reposition(e))}tooltipAfterRender(e,t,i,s){if(e){Object(Ae.eb)([s.tooltipEle],as),Object(Ae.u)([s.tooltipEle],hs),s.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:e,event:t||null,element:s.tooltipEle,isInteracted:!Object(Ae.T)(t)},s.needTemplateReposition()&&!s.mouseTrail&&(s.tooltipEle.style.display="none");const n=n=>{s.beforeOpenCallback(n,e,i,t)};s.trigger("beforeOpen",s.tooltipEventArgs,n.bind(s))}}beforeOpenCallback(e,t,i,s){if(e.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(t);else{let e={name:i.effect,duration:i.duration,delay:i.delay,timingFunction:"easeOut"};"None"===i.effect&&(e=void 0),this.openDelay>0?this.showTimer=setTimeout(()=>{this.mouseTrail&&Ae.l.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this),this.popupObj&&(this.popupObj.show(e,t),this.mouseMoveEvent&&this.mouseTrail&&this.onMouseMove(this.mouseMoveEvent))},this.openDelay):this.popupObj&&this.popupObj.show(e,t)}s&&this.wireMouseEvents(s,t)}needTemplateReposition(){return!Object(Ae.T)(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef}checkCollision(e,t,i){const s={left:t,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},n=ut(this.tooltipEle,this.checkCollideTarget(),t,i);return n.length>0&&(s.horizontal=n.indexOf("left")>=0?"Right":n.indexOf("right")>=0?"Left":this.tooltipPositionX,s.vertical=n.indexOf("top")>=0?"Bottom":n.indexOf("bottom")>=0?"Top":this.tooltipPositionY),s}collisionFlipFit(e,t,i){const s=this.checkCollision(e,t,i);let n=s.position;if(this.tooltipPositionY!==s.vertical&&(n=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?s.vertical+this.tooltipPositionX:this.tooltipPositionX+s.vertical),this.tooltipPositionX!==s.horizontal&&(0===n.indexOf("Left")&&(s.vertical="LeftTop"===n||"LeftCenter"===n?"Top":"Bottom",n=s.vertical+"Left"),0===n.indexOf("Right")&&(s.vertical="RightTop"===n||"RightCenter"===n?"Top":"Bottom",n=s.vertical+"Right"),s.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:n},this.trigger("beforeCollision",this.tooltipEventArgs),s.position!==n){const t=tt(e,s.horizontal,s.vertical);this.adjustArrow(e,n,s.horizontal,s.vertical);const i=this.calculateTooltipOffset(n);i.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(n.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,i.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(n.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,s.position=n,s.left=t.left+i.left,s.top=t.top+i.top}else this.adjustArrow(e,n,s.horizontal,s.vertical);const o={left:s.left,top:s.top},r=pt(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},o).left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===n.indexOf("Bottom")||0===n.indexOf("Top"))){const e=Object(Ae.hb)("."+is,this.tooltipEle);let t=parseInt(e.style.left,10)-(r-s.left);t<0?t=0:t+e.offsetWidth>this.tooltipEle.clientWidth&&(t=this.tooltipEle.clientWidth-e.offsetWidth),e.style.left=t.toString()+"px"}return this.tooltipEle.style.display="",o.left=r,o}checkCollideTarget(){return!this.windowCollision&&this.target?this.element:null}hideTooltip(e,t,i){this.closeDelay>0?(clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.hideTimer=setTimeout(()=>{this.closeDelay&&this.tooltipEle&&this.isTooltipOpen||this.tooltipHide(e,t,i)},this.closeDelay)):this.tooltipHide(e,t,i)}tooltipHide(e,t,i){let s;s=t?this.target?i||t.target:this.element:Object(Ae.hb)('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:s,event:t||null,element:this.tooltipEle,isInteracted:!Object(Ae.T)(t)},this.trigger("beforeClose",this.tooltipEventArgs,t=>{t.cancel?this.isHidden=!1:(this.mouseMoveBeforeRemove(),this.popupHide(e,s))})}popupHide(e,t){t&&this.restoreElement(t),this.isHidden=!0;let i={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(i=void 0),this.popupObj&&this.popupObj.hide(i)}restoreElement(e){this.unwireMouseEvents(e),Object(Ae.T)(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)}clear(){this.tooltipEle&&(Object(Ae.eb)([this.tooltipEle],hs),Object(Ae.u)([this.tooltipEle],as)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&Object(Ae.db)(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)}tooltipHover(e){this.tooltipEle&&(this.isTooltipOpen=!0)}tooltipMouseOut(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())}onMouseOut(e){const t=e.relatedTarget;if(t&&!this.mouseTrail){const i=Object(Ae.A)(t,".e-tooltip-wrap.e-lib.e-popup");i?Ae.l.add(i,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()}tooltipElementMouseOut(e){this.hideTooltip(this.animation.close,e,this.findTarget()),Ae.l.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()}onStickyClose(e){this.close()}onMouseMove(e){let t=0,i=0;e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):(t=e.pageX,i=e.pageY),Ae.b.stop(this.tooltipEle),Object(Ae.eb)([this.tooltipEle],hs),Object(Ae.u)([this.tooltipEle],as),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);const s=this.calculateTooltipOffset(this.position),n=this.checkCollision(e.target,t+s.left+this.offsetX,i+s.top+this.offsetY);if(this.tooltipPositionX!==n.horizontal||this.tooltipPositionY!==n.vertical){const s=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?n.vertical+n.horizontal:n.horizontal+n.vertical;n.position=s,this.adjustArrow(e.target,n.position,n.horizontal,n.vertical);const o=this.calculateTooltipOffset(n.position);n.left=t+o.left-this.offsetX,n.top=i+o.top-this.offsetY}this.tooltipEle.style.left=n.left+"px",this.tooltipEle.style.top=n.top+"px"}keyDown(e){this.tooltipEle&&27===e.keyCode&&this.close()}touchEnd(e){this.tooltipEle&&null===Object(Ae.A)(e.target,"."+Zi)&&!this.isSticky&&this.close()}scrollHandler(e){this.tooltipEle&&(Object(Ae.A)(e.target,".e-tooltip-wrap.e-lib.e-popup")||this.close())}render(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()}preRender(){this.tipClass=ns,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0}wireEvents(e){const t=this.getTriggerList(e);for(const i of t){if("Custom"===i)return;"Focus"===i&&this.wireFocusEvents(),"Click"===i&&Ae.l.add(this.element,Ae.d.touchStartEvent,this.targetClick,this),"Hover"===i&&(Ae.d.isDevice?(this.touchModule=new Ae.t(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),Ae.l.add(this.element,Ae.d.touchEndEvent,this.touchEndHandler,this)):Ae.l.add(this.element,"mouseover",this.targetHover,this))}Ae.l.add(document,"touchend",this.touchEnd,this),Ae.l.add(document,"scroll wheel",this.scrollHandler,this),Ae.l.add(window,"resize",this.windowResize,this),Ae.l.add(document,"keydown",this.keyDown,this)}getTriggerList(e){return"Auto"===e&&(e=Ae.d.isDevice?"Hover":"Hover Focus"),e.split(" ")}wireFocusEvents(){if(Object(Ae.T)(this.target))Ae.l.add(this.element,"focus",this.targetHover,this);else{const e=[].slice.call(Object(Ae.ib)(this.target,this.element));for(const t of e)Ae.l.add(t,"focus",this.targetHover,this)}}wireMouseEvents(e,t){this.tooltipEle&&(this.isSticky||("focus"===e.type&&Ae.l.add(t,"blur",this.onMouseOut,this),"mouseover"===e.type&&Ae.l.add(t,"mouseleave",this.onMouseOut,this),this.closeDelay&&(Ae.l.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),Ae.l.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&Ae.l.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))}unwireEvents(e){const t=this.getTriggerList(e);for(const i of t){if("Custom"===i)return;"Focus"===i&&this.unwireFocusEvents(),"Click"===i&&Ae.l.remove(this.element,Ae.d.touchStartEvent,this.targetClick),"Hover"===i&&(Ae.d.isDevice?(this.touchModule&&this.touchModule.destroy(),Ae.l.remove(this.element,Ae.d.touchEndEvent,this.touchEndHandler)):Ae.l.remove(this.element,"mouseover",this.targetHover))}Ae.l.remove(document,"touchend",this.touchEnd),Ae.l.remove(document,"scroll wheel",this.scrollHandler),Ae.l.remove(window,"resize",this.windowResize),Ae.l.remove(document,"keydown",this.keyDown)}unwireFocusEvents(){if(Object(Ae.T)(this.target))Ae.l.remove(this.element,"focus",this.targetHover);else{const e=[].slice.call(Object(Ae.ib)(this.target,this.element));for(const t of e)Ae.l.remove(t,"focus",this.targetHover)}}unwireMouseEvents(e){if(!this.isSticky){const t=this.getTriggerList(this.opensOn);for(const i of t)"Focus"===i&&Ae.l.remove(e,"blur",this.onMouseOut),"Hover"!==i||Ae.d.isDevice||Ae.l.remove(e,"mouseleave",this.onMouseOut);this.closeDelay&&(Ae.l.remove(e,"mouseenter",this.tooltipHover),Ae.l.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&Ae.l.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)}findTarget(){return Object(Ae.hb)('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)}getModuleName(){return"tooltip"}getPersistData(){return this.addOnPersist([])}onPropertyChanged(e,t){const i=this.findTarget();for(const s of Object.keys(e))switch(s){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=Object(Ae.H)(e.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=Object(Ae.H)(e.height),this.reposition(i));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(t.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){const e=Object(Ae.hb)("."+ss,this.tooltipEle);e.style.top=e.style.left=null,this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){const i=e.offsetX-t.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+i).toString()+"px"}break;case"offsetY":if(this.tooltipEle){const i=e.offsetY-t.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+i).toString()+"px"}break;case"cssClass":this.tooltipEle&&(t.cssClass&&Object(Ae.eb)([this.tooltipEle],t.cssClass.split(" ")),e.cssClass&&Object(Ae.u)([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?Object(Ae.u)([this.tooltipEle],es):Object(Ae.eb)([this.tooltipEle],es))}}open(e,t){Object(Ae.T)(t)&&(t=this.animation.open),Object(Ae.T)(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,t)}close(e){e||(e=this.animation.close),this.hideTooltip(e)}refresh(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)}destroy(){super.destroy(),this.tooltipEle&&Object(Ae.db)(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),Object(Ae.eb)([this.element],Zi),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null}};return Ji([Object(Ae.r)("auto")],e.prototype,"width",void 0),Ji([Object(Ae.r)("auto")],e.prototype,"height",void 0),Ji([Object(Ae.r)()],e.prototype,"content",void 0),Ji([Object(Ae.r)()],e.prototype,"target",void 0),Ji([Object(Ae.r)("TopCenter")],e.prototype,"position",void 0),Ji([Object(Ae.r)(0)],e.prototype,"offsetX",void 0),Ji([Object(Ae.r)(0)],e.prototype,"offsetY",void 0),Ji([Object(Ae.r)(!0)],e.prototype,"showTipPointer",void 0),Ji([Object(Ae.r)(!0)],e.prototype,"enableHtmlParse",void 0),Ji([Object(Ae.r)(!1)],e.prototype,"windowCollision",void 0),Ji([Object(Ae.r)("Auto")],e.prototype,"tipPointerPosition",void 0),Ji([Object(Ae.r)("Auto")],e.prototype,"opensOn",void 0),Ji([Object(Ae.r)(!1)],e.prototype,"mouseTrail",void 0),Ji([Object(Ae.r)(!1)],e.prototype,"isSticky",void 0),Ji([Object(Ae.g)({},cs)],e.prototype,"animation",void 0),Ji([Object(Ae.r)(0)],e.prototype,"openDelay",void 0),Ji([Object(Ae.r)(0)],e.prototype,"closeDelay",void 0),Ji([Object(Ae.r)()],e.prototype,"cssClass",void 0),Ji([Object(Ae.r)(!1)],e.prototype,"enableHtmlSanitizer",void 0),Ji([Object(Ae.k)()],e.prototype,"beforeRender",void 0),Ji([Object(Ae.k)()],e.prototype,"beforeOpen",void 0),Ji([Object(Ae.k)()],e.prototype,"afterOpen",void 0),Ji([Object(Ae.k)()],e.prototype,"beforeClose",void 0),Ji([Object(Ae.k)()],e.prototype,"afterClose",void 0),Ji([Object(Ae.k)()],e.prototype,"beforeCollision",void 0),Ji([Object(Ae.k)()],e.prototype,"created",void 0),Ji([Object(Ae.k)()],e.prototype,"destroyed",void 0),e=Ji([Ae.q],e),e})();const ps={},us="e-spin-show",ms="e-spin-hide",gs="e-spin-material",bs="e-spin-fabric",fs="e-spin-tailwind",ys="e-spin-bootstrap4",vs="e-spin-bootstrap5",Cs="e-spin-high-contrast",ws="e-spinner-pane",Os="e-path-circle",Ss="e-spin-template";function Ts(e,t){if(!e.target)return;let i;const s=Object(Ae.T)(t)?Ae.D:t;let n=function(e,t){const i=t("div",{}),s=t("div",{});return i.classList.add(ws),s.classList.add("e-spinner-inner"),e.appendChild(i),i.appendChild(s),{wrap:i,inner_wrap:s}}(e.target,s);if(Object(Ae.T)(e.cssClass)||n.wrap.classList.add(e.cssClass),Object(Ae.T)(e.template)&&Object(Ae.T)(null)){const t=Object(Ae.T)(e.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(n.wrap):e.type;i=function(e,t){let i;switch(t){case"Material":case"Fabric":i=30;break;case"Tailwind":case"Tailwind-dark":i=30;break;case"Bootstrap4":case"Bootstrap5":i=36;break;default:i=30}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(Object(Ae.T)(e.width)?void 0:e.width,t),function(e,t,i,s){const n=t.querySelector(".e-spinner-inner"),o=n.querySelector("svg");switch(Object(Ae.T)(o)||n.removeChild(o),e){case"Material":!function(e,t,i){const s=Es();ps[s]={timeOut:0,type:"Material",radius:t},Rs(e,s,0,gs),ks(t,e,"Material",gs)}(n,i);break;case"Fabric":!function(e,t,i){const s=Es();ps[s]={timeOut:0,type:"Fabric",radius:t},xs(e,s,bs),Ms(t,e,bs)}(n,i);break;case"Bootstrap":!function(e,t,i){const s=Es();ps[s]={timeOut:0,type:"Bootstrap",radius:t},function(e,t,i){const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",t),s.setAttribute("class","e-spin-bootstrap"),s.setAttribute("viewBox","0 0 64 64"),e.insertBefore(s,e.firstChild);for(let n=0;n<=7;n++){const e=document.createElementNS("http://www.w3.org/2000/svg","circle");e.setAttribute("class","e-path-circle_"+n),e.setAttribute("r","2"),e.setAttribute("transform","translate(32,32)"),s.appendChild(e)}}(e,s),function(e,t){const i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";let s=90;for(let n=0;n<=7;n++){const e=Ls(0,0,24,s),t=i.querySelector(".e-path-circle_"+n);t.setAttribute("cx",e.x+""),t.setAttribute("cy",e.y+""),s=s>=360?0:s,s+=45}}(e,t)}(n,i);break;case"HighContrast":!function(e,t,i){const s=Es();ps[s]={timeOut:0,type:"HighContrast",radius:t},xs(e,s,Cs),Ms(t,e,Cs)}(n,i);break;case"Bootstrap4":!function(e,t,i){const s=Es();ps[s]={timeOut:0,type:"Bootstrap4",radius:t},Rs(e,s,0,ys),ks(t,e,"Bootstrap4",ys)}(n,i);break;case"Bootstrap5":!function(e,t,i){const s=Es();ps[s]={timeOut:0,type:"Bootstrap5",radius:t},Rs(e,s,0,vs),ks(t,e,"Bootstrap5",vs)}(n,i);break;case"Tailwind":case"Tailwind-dark":!function(e,t,i){const s=Es();ps[s]={timeOut:0,type:"Tailwind",radius:t},xs(e,s,fs),Ms(t,e,fs)}(n,i)}}(t,n.wrap,i),Object(Ae.T)(e.label)||function(e,t,i){const s=i("div",{});s.classList.add("e-spin-label"),s.innerHTML=t,e.appendChild(s)}(n.inner_wrap,e.label,s)}else{const t=Object(Ae.T)(e.template)?null:e.template;n.wrap.classList.add(Ss),function(e,t,i){Object(Ae.T)(null)||e.classList.add(null),e.querySelector(".e-spinner-inner").innerHTML=t}(n.wrap,t)}n.wrap.classList.add(ms),n=null}function js(e,t){const i=[],s=e,n=t;let o=!1,r=1;return function e(t){i.push(t),(t!==n||1===r)&&(t<=s&&t>1&&!o?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),o=!0):t<8&&o?8===(t=parseFloat((t+.2).toFixed(2)))&&(o=!1):t<=8&&!o&&(t=parseFloat((t-.2).toFixed(2))),++r,e(t))}(s),i}function Es(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function xs(e,t,i,s){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class",i);const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class",Os);const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class","e-path-arc"),e.insertBefore(n,e.firstChild),n.appendChild(o),n.appendChild(r)}function Rs(e,t,i,s){const n=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",s),n.setAttribute("id",t),o.setAttribute("class",Os),e.insertBefore(n,e.firstChild),n.appendChild(o)}function Ds(e){!function(e,t,i,s,n,o,r){const l=++r.globalInfo[r.uniqueID].previousId,a=(new Date).getTime(),h=parseFloat(2*r.globalInfo[r.uniqueID].radius+""),c=Is(h),d=-90*(r.globalInfo[r.uniqueID].count||0);!function e(t){const n=Math.max(0,Math.min((new Date).getTime()-a,s));(function(e,t){if(!Object(Ae.T)(t.querySelector("svg.e-spin-material"))&&!Object(Ae.T)(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){const i=t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");i.setAttribute("stroke-dashoffset",Fs(h,c,e,75)+""),i.setAttribute("transform","rotate("+d+" "+h/2+" "+h/2+")")}})(i(n,1,148,s),t.container),l===t.globalInfo[t.uniqueID].previousId&&n<s?ps[t.uniqueID].timeOut=setTimeout(e.bind(null,t),1):Ds(t)}(r)}(0,0,As,1333,0,0,e),e.globalInfo[e.uniqueID].count=++e.globalInfo[e.uniqueID].count%4}function ks(e,t,i,s){const n=2*e,o=t.querySelector("svg."+s),r=o.querySelector("path.e-path-circle"),l=Is(n),a=n/2+"px";o.setAttribute("viewBox","0 0 "+n+" "+n),o.style.width=o.style.height=n+"px",o.style.transformOrigin=a+" "+a+" "+a,r.setAttribute("d",function(e,t){const i=e/2,s=t/2;return"M"+i+","+s+"A"+(i-s)+","+(i-s)+" 0 1 1 "+s+","+i}(n,l)),"Material"===i&&(r.setAttribute("stroke-width",l+""),r.setAttribute("stroke-dasharray",(n-l)*Math.PI*.75+""),r.setAttribute("stroke-dashoffset",Fs(n,l,1,75)+""))}function Is(e){return.1*e}function Fs(e,t,i,s){return(e-t)*Math.PI*(3*s/100-i/100)}function As(e,t,i,s){const n=(e/=s)*e,o=n*e;return t+i*(6*o*n+-15*n*n+10*o)}function Ms(e,t,i){const s=e,n=e,o=2*e,r=t.querySelector("."+i),l=r.querySelector(".e-path-circle"),a=r.querySelector(".e-path-arc"),h=o/2+"px";l.setAttribute("d",function(e,t,i){return["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(s,n,e)),a.setAttribute("d",function(e,t,i,s,n){const o=Ls(e,t,i,45),r=Ls(e,t,i,315);return["M",o.x,o.y,"A",i,i,0,0,0,r.x,r.y].join(" ")}(s,n,e)),r.setAttribute("viewBox","0 0 "+o+" "+o),r.style.transformOrigin=h+" "+h+" "+h,r.style.width=r.style.height=o+"px"}function Ls(e,t,i,s){const n=(s-90)*Math.PI/180;return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}}function zs(e){Bs(e,!1),e=null}function Bs(e,t){let i;if(e&&(i=e.classList.contains(ws)?e:e.querySelector("."+ws)),e&&i){const s=i.querySelector(".e-spinner-inner");let n;if(n=t?!i.classList.contains(Ss)&&!i.classList.contains(ms):!i.classList.contains(Ss)&&!i.classList.contains(us),n){const e=i.querySelector("svg");if(Object(Ae.T)(e))return;const n=e.getAttribute("id");switch(ps[n].isAnimate=!t,ps[n].type){case"Material":t?clearTimeout(ps[n].timeOut):function(e,t,i){const s={};ps[t].timeOut=0,s[t]=function(e,t,i,s){return{radius:t,count:0,previousId:0}}(0,i),Ds({uniqueID:t,container:e,globalInfo:s,timeOutVar:0})}(s,n,ps[n].radius);break;case"Bootstrap":t?clearTimeout(ps[n].timeOut):function(e){const t=e.querySelector("svg.e-spin-bootstrap").getAttribute("id");for(let s=1;s<=8;s++)i(e.getElementsByClassName("e-path-circle_"+(8===s?0:s))[0],s,0,js(s,s),t);function i(e,t,i,s,n){let o=0;!function t(i){ps[n].isAnimate&&(++o,e.setAttribute("r",i+""),o>=s.length&&(o=0),ps[n].timeOut=setTimeout(t.bind(null,s[o]),18))}(t)}}(s)}}t?Object(Ae.y)(i,[ms],[us]):Object(Ae.y)(i,[us],[ms]),e=null}}function Ps(e){Bs(e,!0),e=null}i("8DMo");const Hs="e-rtl",Vs="e-disabled",Ns="e-input",qs="e-input-group",Ws="e-float-input",Gs="e-float-text",_s="e-clear-icon",Us="e-clear-icon-hide",Ks="e-label-top",Ys="e-label-bottom",Xs="e-no-float-label",Qs="e-float-custom-tag";var $s;!function(e){let t,i=!0;function s(e){n(e.floatLabelType,e.element),e.element.addEventListener("focus",function(){const e=p(this);(e.classList.contains("e-input-group")||e.classList.contains("e-outline")||e.classList.contains("e-filled"))&&e.classList.add("e-input-focus")}),e.element.addEventListener("blur",function(){const e=p(this);(e.classList.contains("e-input-group")||e.classList.contains("e-outline")||e.classList.contains("e-filled"))&&e.classList.remove("e-input-focus")}),e.element.addEventListener("input",()=>{n(t,e.element)})}function n(e,t){const i=t.value;""!==i&&!Object(Ae.T)(i)&&t.parentElement?t.parentElement.classList.add("e-valid-input"):"Always"!==e&&t.parentElement&&t.parentElement.classList.remove("e-valid-input")}function o(){const e=p(this).getElementsByClassName("e-float-text")[0];Object(Ae.T)(e)||(Object(Ae.u)([e],Ks),e.classList.contains(Ys)&&Object(Ae.eb)([e],Ys))}function r(){const e=p(this);if(e.getElementsByTagName("textarea")[0]?""===e.getElementsByTagName("textarea")[0].value:""===e.getElementsByTagName("input")[0].value){const t=e.getElementsByClassName("e-float-text")[0];Object(Ae.T)(t)||(t.classList.contains(Ks)&&Object(Ae.eb)([t],Ks),Object(Ae.u)([t],Ys))}}function l(e){e.addEventListener("focus",o),e.addEventListener("blur",r)}function a(e,t,i){const s=Object(Ae.T)(i)?Ae.D:i;"Auto"===e.floatLabelType&&l(e.element),Object(Ae.T)(t.container)?(t.container=g(e,Ws,Qs,"div",s),e.element.parentNode&&e.element.parentNode.insertBefore(t.container,e.element)):(Object(Ae.T)(e.customTag)||t.container.classList.add(Qs),t.container.classList.add(Ws));const n=s("span",{className:"e-float-line"}),o=s("label",{className:Gs});if(Object(Ae.T)(e.element.id)||""===e.element.id||(o.id="label_"+e.element.id.replace(/ /g,"_"),Object(Ae.w)(e.element,{"aria-labelledby":o.id})),Object(Ae.T)(e.element.placeholder)||""===e.element.placeholder||(o.innerText=b(e.element.placeholder),e.element.removeAttribute("placeholder")),Object(Ae.T)(e.properties)||Object(Ae.T)(e.properties.placeholder)||""===e.properties.placeholder||(o.innerText=b(e.properties.placeholder)),o.innerText||t.container.classList.add(Xs),t.container.classList.contains("e-float-icon-left")){const i=t.container.querySelector(".e-input-in-wrap");i.appendChild(e.element),i.appendChild(n),i.appendChild(o)}else t.container.appendChild(e.element),t.container.appendChild(n),t.container.appendChild(o);d(e.element.value,o),"Always"===e.floatLabelType&&(o.classList.contains(Ys)&&Object(Ae.eb)([o],Ys),Object(Ae.u)([o],Ks)),"Auto"===e.floatLabelType&&(e.element.addEventListener("input",t=>{d(e.element.value,o)}),e.element.addEventListener("blur",t=>{d(e.element.value,o)})),Object(Ae.T)(e.element.getAttribute("id"))||o.setAttribute("for",e.element.getAttribute("id"))}function h(e,t){"Always"===e&&t.classList.contains("e-outline")&&t.classList.add("e-valid-input")}function c(e,t){e?Object(Ae.eb)([t],Us):Object(Ae.u)([t],Us)}function d(e,t){e?(Object(Ae.u)([t],Ks),t.classList.contains(Ys)&&Object(Ae.eb)([t],Ys)):(t.classList.contains(Ks)&&Object(Ae.eb)([t],Ks),Object(Ae.u)([t],Ys))}function p(e){let t=Object(Ae.T)(e.parentNode)?e:e.parentNode;return t&&t.classList.contains("e-input-in-wrap")&&(t=t.parentNode),t}function u(e,t,s){(null==i||i)&&t.addEventListener("click",i=>{e.classList.contains(Vs)||e.readOnly||(i.preventDefault(),e!==document.activeElement&&e.focus(),e.value="",Object(Ae.u)([t],Us))}),e.addEventListener("input",i=>{c(e.value,t)}),e.addEventListener("focus",i=>{c(e.value,t)}),e.addEventListener("blur",e=>{setTimeout(()=>{Object(Ae.u)([t],Us)},200)})}function m(e,t){if(p(e).classList.contains(Ws)&&"Auto"===t){const t=p(e).getElementsByClassName("e-float-text")[0];d(e.value,t)}}function g(e,t,i,s,n){const o=Object(Ae.T)(n)?Ae.D:n;let r;return Object(Ae.T)(e.customTag)?r=o(s,{className:t}):(r=o(e.customTag,{className:t}),r.classList.add(i)),r.classList.add("e-control-wrapper"),r}function b(e){let t="";if(!Object(Ae.T)(e)&&""!==e){const i=document.createElement("span");i.innerHTML='<input  placeholder="'+e+'"/>',t=i.children[0].placeholder}return t}function f(e,t,i){Object(Ae.T)(i)||""===i||Object(Ae.eb)(t,i.split(" ")),Object(Ae.T)(e)||""===e||Object(Ae.u)(t,e.split(" "))}function y(e,t){e=b(e);const i=p(t);i.classList.contains(Ws)?Object(Ae.T)(e)||""===e?(i.classList.add(Xs),i.getElementsByClassName(Gs)[0].textContent=""):(i.getElementsByClassName(Gs)[0].textContent=e,i.classList.remove(Xs),t.removeAttribute("placeholder")):Object(Ae.T)(e)||""===e?(t.removeAttribute("placeholder"),t.removeAttribute("aria-placeholder")):Object(Ae.w)(t,{placeholder:e,"aria-placeholder":e})}function v(e,t,i){e?Object(Ae.w)(t,{readonly:""}):t.removeAttribute("readonly"),Object(Ae.T)(i)||m(t,i)}function C(e,t){e?Object(Ae.u)(t,Hs):Object(Ae.eb)(t,Hs)}function w(e,t,i,s){const n={disabled:"disabled","aria-disabled":"true"},o=!Object(Ae.T)(s);e?(t.classList.remove(Vs),S(n,t),o&&Object(Ae.eb)([s],Vs)):(t.classList.add(Vs),T(n,t),o&&Object(Ae.u)([s],Vs)),Object(Ae.T)(i)||m(t,i)}function O(e,t,i,s,n){const o=Object(Ae.T)(n)?Ae.D:n;e?i.clearButton=function(e,t,i,s){const n=(Object(Ae.T)(s)?Ae.D:s)("span",{className:_s}),o=t.container;return Object(Ae.T)(i)?(t.container.classList.contains(Ws)?t.container.querySelector(".e-float-text"):e).insertAdjacentElement("afterend",n):o.appendChild(n),!Object(Ae.T)(o)&&o.classList.contains(Ws)&&Object(Ae.u)([o],qs),Object(Ae.u)([n],Us),u(e,n),n.setAttribute("aria-label","close"),n}(t,i,s,o):(Object(Ae.db)(i.clearButton),i.clearButton=null)}function S(e,t){for(const i of Object.keys(e)){const e=p(t);"disabled"===i&&t.classList.remove(Vs),"disabled"===i&&e.classList.contains(qs)&&e.classList.remove(Vs),"placeholder"===i&&e.classList.contains(Ws)?e.getElementsByClassName(Gs)[0].textContent="":t.removeAttribute(i)}}function T(e,t){for(const i of Object.keys(e)){const s=p(t);"disabled"===i&&t.classList.add(Vs),"disabled"===i&&s.classList.contains(qs)&&s.classList.add(Vs),"placeholder"===i&&s.classList.contains(Ws)?s.getElementsByClassName(Gs)[0].textContent=e[i]:t.setAttribute(i,e[i])}}function j(e,t,i){const s=[];s.push(i);const n=Object(Ae.T)(i)?t.querySelectorAll(".e-input-group-icon"):s;if(e&&n.length>0)for(let o=0;o<n.length;o++)n[o].addEventListener("mousedown",E,!1),n[o].addEventListener("mouseup",x,!1);else if(n.length>0)for(let o=0;o<n.length;o++)n[o].removeEventListener("mousedown",E,this),n[o].removeEventListener("mouseup",x,this)}function E(){let e=this.parentElement;for(;!e.classList.contains("e-input-group");)e=e.parentElement;var t;(t=e).classList.contains("e-disabled")||t.querySelector("input").readOnly||this.classList.add("e-input-btn-ripple")}function x(){const e=this;setTimeout(()=>{e.classList.remove("e-input-btn-ripple")},500)}function R(e,t){const i=t("span",{className:e});return i.classList.add("e-input-group-icon"),i}function D(e,t,i,s){const n=Object(Ae.T)(s)?Ae.D:s,o=R(e,n);t.classList.add("e-float-icon-left");let r=t.querySelector(".e-input-in-wrap");if(Object(Ae.T)(r)){r=n("span",{className:"e-input-in-wrap"}),i.parentNode.insertBefore(r,i);const e=t.querySelectorAll(i.tagName+" ~ *");r.appendChild(i);for(let t=0;t<e.length;t++)r.appendChild(e[t])}return r.parentNode.insertBefore(o,r),t.classList.contains(qs)||t.classList.add(qs),j(!0,t,o),o}function k(e,t,i){const s=R(e,Object(Ae.T)(i)?Ae.D:i);return t.classList.contains(qs)||t.classList.add(qs),(t.classList.contains("e-float-icon-left")?t.querySelector(".e-input-in-wrap"):t).appendChild(s),j(!0,t,s),s}function I(e,t){"hidden"===t.type?e.classList.add("e-hidden"):e.classList.contains("e-hidden")&&e.classList.remove("e-hidden")}e.createInput=function(e,n){const o=Object(Ae.T)(n)?Ae.D:n;let r={container:null,buttons:[],clearButton:null};if(t=e.floatLabelType,i=e.bindClearAction,Object(Ae.T)(e.floatLabelType)||"Never"===e.floatLabelType?(r.container=g(e,qs,"e-input-custom-tag","span",o),e.element.parentNode.insertBefore(r.container,e.element),Object(Ae.u)([e.element],Ns),r.container.appendChild(e.element)):a(e,r,o),s(e),Object(Ae.T)(e.properties)||Object(Ae.T)(e.properties.showClearButton)||!e.properties.showClearButton||"TEXTAREA"===e.element.tagName||(O(e.properties.showClearButton,e.element,r,!0,o),r.clearButton.setAttribute("role","button"),r.container.classList.contains(Ws)&&Object(Ae.u)([r.container],qs)),!Object(Ae.T)(e.buttons)&&"TEXTAREA"!==e.element.tagName)for(let t=0;t<e.buttons.length;t++)r.buttons.push(k(e.buttons[t],r.container,o));return Object(Ae.T)(e.element)||"TEXTAREA"!==e.element.tagName||Object(Ae.u)([r.container],"e-multi-line-input"),I(r.container,e.element),r=function(e,t){if(!Object(Ae.T)(e.properties))for(const i of Object.keys(e.properties))switch(i){case"cssClass":f(e.properties.cssClass,[t.container]),h(e.floatLabelType,t.container);break;case"enabled":w(e.properties.enabled,e.element,e.floatLabelType,t.container);break;case"enableRtl":C(e.properties.enableRtl,[t.container]);break;case"placeholder":y(e.properties.placeholder,e.element);break;case"readonly":v(e.properties.readonly,e.element)}return t}(e,r),r},e.bindInitialEvent=s,e.wireFloatingEvents=l,e.wireClearBtnEvents=u,e.setValue=function(e,t,i,s){if(t.value=e,Object(Ae.T)(i)||"Auto"!==i||m(t,i),!Object(Ae.T)(s)&&s){const e=p(t);if(!Object(Ae.T)(e)){const i=e.getElementsByClassName(_s)[0];Object(Ae.T)(i)||(t.value&&e.classList.contains("e-input-focus")?Object(Ae.eb)([i],Us):Object(Ae.u)([i],Us))}}n(i,t)},e.setCssClass=f,e.setWidth=function(e,t){"number"==typeof e?t.style.width=Object(Ae.H)(e):"string"==typeof e&&(t.style.width=e.match(/px|%|em/)?e:Object(Ae.H)(e))},e.setPlaceholder=y,e.setReadonly=v,e.setEnableRtl=C,e.setEnabled=w,e.setClearButton=O,e.removeAttributes=S,e.addAttributes=T,e.removeFloating=function(e){const t=e.container;if(!Object(Ae.T)(t)&&t.classList.contains(Ws)){const e=t.querySelector("textarea")?t.querySelector("textarea"):t.querySelector("input"),s=t.querySelector(".e-float-text").textContent,n=null!==t.querySelector(".e-clear-icon");Object(Ae.F)(t.querySelector(".e-float-line")),Object(Ae.F)(t.querySelector(".e-float-text")),Object(Ae.y)(t,[qs],[Ws]),(i=e).removeEventListener("focus",o),i.removeEventListener("blur",r),Object(Ae.w)(e,{placeholder:s}),e.classList.add(Ns),n||"INPUT"!==e.tagName||e.removeAttribute("required")}var i},e.addFloating=function(e,i,s,n){const o=Object(Ae.T)(n)?Ae.D:n,r=Object(Ae.A)(e,".e-input-group");if(t=i,"Never"!==i){let t=r.tagName;t="DIV"!==t&&"SPAN"!==t?t:null;const n={element:e,floatLabelType:i,customTag:t,properties:{placeholder:s}};let l=r.querySelector(".e-clear-icon");const h={container:r};e.classList.remove(Ns),a(n,h,o);const c=r.classList.contains("e-float-icon-left");if(Object(Ae.T)(l)&&(l=c?r.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):r.querySelector(".e-input-group-icon")),Object(Ae.T)(l))c&&(l=r.querySelector(".e-input-group-icon")),Object(Ae.T)(l)&&r.classList.remove(qs);else{const t=r.querySelector(".e-float-line"),i=r.querySelector(".e-float-text"),s=c?r.querySelector(".e-input-in-wrap"):r;s.insertBefore(e,l),s.insertBefore(t,l),s.insertBefore(i,l)}}h(i,e.parentElement)},e.setRipple=function(e,t){for(let i=0;i<t.length;i++)j(e,t[i].container)},e.addIcon=function(e,t,i,s,n){const o="string"==typeof t?t.split(","):t;if("append"===e.toLowerCase())for(const r of o)k(r,i,n);else for(const r of o)D(r,i,s,n)},e.prependSpan=D,e.appendSpan=k,e.validateInputType=I}($s||($s={}));var Js=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const Zs="e-input-group-icon",en="e-spin-up",tn="e-error",sn="increment",nn="decrement",on=new RegExp("^(-)?(\\d*)$"),rn="e-input-focus",ln=["title","style","class"];let an=(()=>{let e=class extends Ae.h{constructor(e,t){super(e,t),this.isVue=!1,this.preventChange=!1,this.isAngular=!1,this.isDynamicChange=!1,this.numericOptions=e}preRender(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;const e=Object(Ae.R)("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),Object(Ae.eb)([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=Object(Ae.A)(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;const t=this.createElement("input");let i=0;for(;i<this.element.attributes.length;i++)"id"!==this.element.attributes[i].nodeName&&(t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML);this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(t),this.element=t,Object(Ae.mb)("ej2_instances",e,this.element)}Object(Ae.w)(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off","aria-live":"assertive"}),this.l10n=new Ae.p("numerictextbox",{incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null===this.placeholder&&this.updatePlaceholder()}render(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null===this.value||isNaN(this.value)||this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete())}checkAttributes(e){const t=e?Object(Ae.T)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];for(const i of t)if(!Object(Ae.T)(this.element.getAttribute(i)))switch(i){case"disabled":if(Object(Ae.T)(this.numericOptions)||void 0===this.numericOptions.enabled||e){const t="disabled"!==this.element.getAttribute(i)&&""!==this.element.getAttribute(i)&&"true"!==this.element.getAttribute(i);this.setProperties({enabled:t},!e)}break;case"readonly":if(Object(Ae.T)(this.numericOptions)||void 0===this.numericOptions.readonly||e){const t="readonly"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i);this.setProperties({readonly:t},!e)}break;case"placeholder":(Object(Ae.T)(this.numericOptions)||void 0===this.numericOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(Object(Ae.T)(this.numericOptions)||void 0===this.numericOptions.value||e){const t=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(i));this.setProperties(Object(Ae.mb)(i,t,{}),!e)}break;case"min":if(Object(Ae.T)(this.numericOptions)||void 0===this.numericOptions.min||e){const t=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(i));null===t||isNaN(t)||this.setProperties(Object(Ae.mb)(i,t,{}),!e)}break;case"max":if(Object(Ae.T)(this.numericOptions)||void 0===this.numericOptions.max||e){const t=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(i));null===t||isNaN(t)||this.setProperties(Object(Ae.mb)(i,t,{}),!e)}break;case"step":if(Object(Ae.T)(this.numericOptions)||void 0===this.numericOptions.step||e){const t=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(i));null===t||isNaN(t)||this.setProperties(Object(Ae.mb)(i,t,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(i);break;case"name":this.inputName=this.element.getAttribute(i);break;default:{const e=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(i));(null!==e&&!isNaN(e)||"value"===i)&&this.setProperties(Object(Ae.mb)(i,e,{}),!0)}}}updatePlaceholder(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)}initCultureFunc(){this.instance=new Ae.n(this.locale)}initCultureInfo(){this.cultureInfo.format=this.format,null!==Object(Ae.R)("currency",this)&&(Object(Ae.mb)("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))}createWrapper(){let e=this.cssClass;Object(Ae.T)(this.cssClass)||""===this.cssClass||(e=this.getNumericValidClassList(this.cssClass));const t=$s.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=t,this.container=t.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&Object(Ae.w)(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),Object(Ae.w)(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&Object(Ae.w)(this.container,{style:this.inputStyle})}updateDataAttribute(e){let t={};if(e)t=this.htmlAttributes;else for(let i=0;i<this.element.attributes.length;i++)t[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name);for(const i of Object.keys(t))0===i.indexOf("data")&&this.hiddenInput.setAttribute(i,t[i])}updateHTMLAttrToElement(){if(!Object(Ae.T)(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))ln.indexOf(e)<0&&this.element.setAttribute(e,this.htmlAttributes[e])}updateCssClass(e,t){$s.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(t))}getNumericValidClassList(e){let t=e;return Object(Ae.T)(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t}updateHTMLAttrToWrapper(){if(!Object(Ae.T)(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if(ln.indexOf(e)>-1)if("class"===e){const t=this.getNumericValidClassList(this.htmlAttributes[e]);""!==t&&Object(Ae.u)([this.container],t.split(" "))}else if("style"===e){let t=this.container.getAttribute(e);t=Object(Ae.T)(t)?this.htmlAttributes[e]:t+this.htmlAttributes[e],this.container.setAttribute(e,t)}else this.container.setAttribute(e,this.htmlAttributes[e])}setElementWidth(e){Object(Ae.T)(e)||("number"==typeof e?this.container.style.width=Object(Ae.H)(e):"string"==typeof e&&(this.container.style.width=e.match(/px|%|em/)?e:Object(Ae.H)(e)))}spinBtnCreation(){this.spinDown=$s.appendSpan(Zs+" e-spin-down",this.container,this.createElement),Object(Ae.w)(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),this.spinUp=$s.appendSpan(Zs+" "+en,this.container,this.createElement),Object(Ae.w)(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()}validateMinMax(){("number"!=typeof this.min||isNaN(this.min))&&this.setProperties({min:-Number.MAX_VALUE},!0),("number"!=typeof this.max||isNaN(this.max))&&this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),Object(Ae.w)(this.element,{"aria-valuemin":this.min.toString(),"aria-valuemax":this.max.toString()})}formattedValue(e,t){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(t)}validateStep(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)}action(e,t){this.isInteract=!0;const i=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(i,this.step,e)),this.raiseChangeEvent(t)}checkErrorClass(){this.isValidState?Object(Ae.eb)([this.container],tn):Object(Ae.u)([this.container],tn),Object(Ae.w)(this.element,{"aria-invalid":this.isValidState?"false":"true"})}bindClearEvent(){this.showClearButton&&Ae.l.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)}resetHandler(e){e.preventDefault(),this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")&&!this.inputWrapper.container.classList.contains("e-static-clear")||this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)}clear(e){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",Object(Ae.A)(this.element,"form")){const e=this.element.nextElementSibling,t=document.createEvent("KeyboardEvent");t.initEvent("keyup",!1,!0),e.dispatchEvent(t)}}resetFormHandler(){this.updateValue("EJS-NUMERICTEXTBOX"===this.element.tagName?null:this.inputEleValue)}setSpinButton(){Object(Ae.T)(this.spinDown)||Object(Ae.w)(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),Object(Ae.T)(this.spinUp)||Object(Ae.w)(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})}wireEvents(){Ae.l.add(this.element,"focus",this.focusHandler,this),Ae.l.add(this.element,"blur",this.focusOutHandler,this),Ae.l.add(this.element,"keydown",this.keyDownHandler,this),Ae.l.add(this.element,"keyup",this.keyUpHandler,this),Ae.l.add(this.element,"input",this.inputHandler,this),Ae.l.add(this.element,"keypress",this.keyPressHandler,this),Ae.l.add(this.element,"change",this.changeHandler,this),Ae.l.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&Ae.l.add(this.formEle,"reset",this.resetFormHandler,this))}wireSpinBtnEvents(){Ae.l.add(this.spinUp,Ae.d.touchStartEvent,this.mouseDownOnSpinner,this),Ae.l.add(this.spinDown,Ae.d.touchStartEvent,this.mouseDownOnSpinner,this),Ae.l.add(this.spinUp,Ae.d.touchEndEvent,this.mouseUpOnSpinner,this),Ae.l.add(this.spinDown,Ae.d.touchEndEvent,this.mouseUpOnSpinner,this),Ae.l.add(this.spinUp,Ae.d.touchMoveEvent,this.touchMoveOnSpinner,this),Ae.l.add(this.spinDown,Ae.d.touchMoveEvent,this.touchMoveOnSpinner,this)}unwireEvents(){Ae.l.remove(this.element,"focus",this.focusHandler),Ae.l.remove(this.element,"blur",this.focusOutHandler),Ae.l.remove(this.element,"keyup",this.keyUpHandler),Ae.l.remove(this.element,"input",this.inputHandler),Ae.l.remove(this.element,"keydown",this.keyDownHandler),Ae.l.remove(this.element,"keypress",this.keyPressHandler),Ae.l.remove(this.element,"change",this.changeHandler),Ae.l.remove(this.element,"paste",this.pasteHandler),this.formEle&&Ae.l.remove(this.formEle,"reset",this.resetFormHandler)}unwireSpinBtnEvents(){Ae.l.remove(this.spinUp,Ae.d.touchStartEvent,this.mouseDownOnSpinner),Ae.l.remove(this.spinDown,Ae.d.touchStartEvent,this.mouseDownOnSpinner),Ae.l.remove(this.spinUp,Ae.d.touchEndEvent,this.mouseUpOnSpinner),Ae.l.remove(this.spinDown,Ae.d.touchEndEvent,this.mouseUpOnSpinner),Ae.l.remove(this.spinUp,Ae.d.touchMoveEvent,this.touchMoveOnSpinner),Ae.l.remove(this.spinDown,Ae.d.touchMoveEvent,this.touchMoveOnSpinner)}changeHandler(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);const t=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(t,e)}raiseChangeEvent(e){if(this.prevValue!==this.value){const t={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),Object(Ae.Z)(t,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",t)}}pasteHandler(){if(!this.enabled||this.readonly)return;const e=this.element.value;setTimeout(()=>{this.numericRegex().test(this.element.value)||this.setElementValue(e)})}preventHandler(){const e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(()=>{if(this.element.selectionStart>0){const t=this.element.selectionStart,i=this.element.selectionStart-1,s=0,n=this.element.value.split(""),o=Object(Ae.N)(this.locale),r=Object(Ae.R)("decimal",o).charCodeAt(0);" "===this.element.value[i]&&this.element.selectionStart>0&&!e?(Object(Ae.T)(this.prevVal)?this.element.value=this.element.value.trim():0!==i?this.element.value=this.prevVal:0===i&&(this.element.value=this.element.value.trim()),this.element.setSelectionRange(i,i)):isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&45!==this.element.value[this.element.selectionStart-1].charCodeAt(0)?(n.indexOf(this.element.value[this.element.selectionStart-1])!==n.lastIndexOf(this.element.value[this.element.selectionStart-1])&&this.element.value[this.element.selectionStart-1].charCodeAt(0)===r||this.element.value[this.element.selectionStart-1].charCodeAt(0)!==r)&&(this.element.value=this.element.value.substring(0,i)+this.element.value.substring(t,this.element.value.length),this.element.setSelectionRange(i,i),isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&this.element.selectionStart>0&&this.element.value.length&&this.preventHandler()):isNaN(parseFloat(this.element.value[this.element.selectionStart-2]))&&this.element.selectionStart>1&&45!==this.element.value[this.element.selectionStart-2].charCodeAt(0)&&(n.indexOf(this.element.value[this.element.selectionStart-2])!==n.lastIndexOf(this.element.value[this.element.selectionStart-2])&&this.element.value[this.element.selectionStart-2].charCodeAt(0)===r||this.element.value[this.element.selectionStart-2].charCodeAt(0)!==r)&&(this.element.setSelectionRange(i,i),this.nextEle=this.element.value[this.element.selectionStart],this.cursorPosChanged=!0,this.preventHandler()),!0===this.cursorPosChanged&&this.element.value[this.element.selectionStart]===this.nextEle&&isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&(this.element.setSelectionRange(this.element.selectionStart+1,this.element.selectionStart+1),this.cursorPosChanged=!1,this.nextEle=null),""===this.element.value.trim()&&this.element.setSelectionRange(s,s),this.element.selectionStart>0&&45===this.element.value[this.element.selectionStart-1].charCodeAt(0)&&this.element.selectionStart>1&&(this.element.value=Object(Ae.T)(this.prevVal)?this.element.value:this.prevVal,this.element.setSelectionRange(this.element.selectionStart,this.element.selectionStart)),this.prevVal=this.element.value}})}keyUpHandler(){if(!this.enabled||this.readonly)return;(!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform))&&Ae.d.isDevice&&this.preventHandler();let e=this.instance.getNumberParser({format:"n"})(this.element.value);if(e=null===e||isNaN(e)?null:e,this.hiddenInput.value=e||0===e?e.toString():null,Object(Ae.A)(this.element,"form")){const e=this.element.nextElementSibling,t=document.createEvent("KeyboardEvent");t.initEvent("keyup",!1,!0),e.dispatchEvent(t)}}inputHandler(e){const t=this;if(!this.enabled||this.readonly)return;const i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||i)&&Ae.d.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==Object(Ae.R)("decimal",Object(Ae.N)(this.locale))&&this.element.value!==Object(Ae.R)("minusSign",Object(Ae.N)(this.locale))){let e=this.instance.getNumberParser({format:"n"})(this.element.value);e=isNaN(e)?null:e,t.localChange({value:e}),this.preventChange=!0}if(this.isVue){const t=this.instance.getNumberParser({format:"n"})(this.element.value),i=this.instance.getNumberParser({format:"n"})(this.elementPrevValue),s={event:e,value:null===t||isNaN(t)?null:t,previousValue:null===i||isNaN(i)?null:i};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",s)}}keyDownHandler(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action(sn,e);break;case 40:e.preventDefault(),this.action(nn,e)}}performAction(e,t,i){(null===e||isNaN(e))&&(e=0);let s=i===sn?e+t:e-t;return s=this.correctRounding(e,t,s),this.strictMode?this.trimValue(s):s}correctRounding(e,t,i){const s=new RegExp("[,.](.*)"),n=s.test(e.toString()),o=s.test(t.toString());if(n||o){const r=n?s.exec(e.toString())[0].length:0,l=o?s.exec(t.toString())[0].length:0,a=Math.max(r,l);return this.roundValue(i,a)}return i}roundValue(e,t){t=t||0;const i=Math.pow(10,t);return Math.round(e*=i)/i}updateValue(e,t){t&&(this.isInteract=!0),null===e||isNaN(e)||this.decimals&&(e=this.roundNumber(e,this.decimals)),this.changeValue(null===e||isNaN(e)?null:this.strictMode?this.trimValue(e):e),this.isDynamicChange||this.raiseChangeEvent(t)}updateCurrency(e,t){Object(Ae.mb)(e,t,this.cultureInfo),this.updateValue(this.value)}changeValue(e){if(e||0===e){const t=this.getNumberOfDecimals(e);this.setProperties({value:this.roundNumber(e,t)},!0)}else this.setProperties({value:e=null},!0);this.modifyText(),this.strictMode||this.validateState()}modifyText(){if(this.value||0===this.value){const e=this.formatNumber(),t=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(t),Object(Ae.w)(this.element,{"aria-valuenow":e}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null}setElementValue(e,t){$s.setValue(e,t||this.element,this.floatLabelType,this.showClearButton)}validateState(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()}getNumberOfDecimals(e){let t;const i=new RegExp("[eE][-+]?([0-9]+)");let s=e.toString();if(i.test(s)){const t=i.exec(s);Object(Ae.T)(t)||(s=e.toFixed(Math.min(parseInt(t[1],10),20)))}const n=s.split(".")[1];return t=n&&n.length?n.length:0,null!==this.decimals&&(t=t<this.decimals?t:this.decimals),t}formatNumber(){const e=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)}trimValue(e){return e>this.max?this.max:e<this.min?this.min:e}roundNumber(e,t){let i=e;const s=t||0,n=i.toString().split("e");i=Math.round(Number(n[0]+"e"+(n[1]?Number(n[1])+s:s)));const o=i.toString().split("e");return i=Number(o[0]+"e"+(o[1]?Number(o[1])-s:-s)),Number(i.toFixed(s))}cancelEvent(e){return e.preventDefault(),!1}keyPressHandler(e){if(!this.enabled||this.readonly)return!0;if(!Ae.d.isDevice&&"11.0"===Ae.d.info.version&&13===e.keyCode){const t=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(t,e),!0}if(0===e.which||e.metaKey||e.ctrlKey||8===e.keyCode||13===e.keyCode)return!0;const t=String.fromCharCode(e.which);let i=this.element.value;return i=i.substring(0,this.element.selectionStart)+t+i.substring(this.element.selectionEnd),!!this.numericRegex().test(i)||(e.preventDefault(),e.stopPropagation(),!1)}numericRegex(){const e=Object(Ae.N)(this.locale);let t=Object(Ae.R)("decimal",e),i="*";return"."===t&&(t="\\"+t),0===this.decimals&&this.validateDecimalOnType?on:(this.decimals&&this.validateDecimalOnType&&(i="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+t+"\\d"+i+")?)|("+t+"\\d"+i+")))?$"))}mouseWheel(e){let t;e.preventDefault(),e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t>0?this.action(sn,e):t<0&&this.action(nn,e),this.cancelEvent(e)}focusHandler(e){if(this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,Object(Ae.eb)([this.container],tn),this.prevValue=this.value,this.value||0===this.value){const e=this.formatNumber();this.setElementValue(e),this.isPrevFocused||(Ae.d.isDevice||"11.0"!==Ae.d.info.version?setTimeout(()=>{this.element.setSelectionRange(0,e.length)},Ae.d.isDevice&&Ae.d.isIos?600:0):this.element.setSelectionRange(0,e.length))}Ae.d.isDevice||Ae.l.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}}focusOutHandler(e){if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(e.preventDefault(),Ae.d.isDevice){const e=this.element.value;this.element.focus(),this.isPrevFocused=!1;const t=this.element;setTimeout(()=>{this.setElementValue(e,t)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);const e=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(e),Ae.d.isDevice||Ae.l.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(Object(Ae.A)(this.element,"form")){const e=this.element.nextElementSibling,t=document.createEvent("FocusEvent");t.initEvent("focusout",!1,!0),e.dispatchEvent(t)}}}mouseDownOnSpinner(e){if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),!this.getElementData(e))return;this.getElementData(e);const t=e.currentTarget,i=t.classList.contains(en)?sn:nn;Ae.l.add(t,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(()=>{this.isCalled=!0,this.action(i,e)},150),Ae.l.add(document,"mouseup",this.mouseUpClick,this)}touchMoveOnSpinner(e){let t;if("touchmove"===e.type){let i=e.touches;t=i.length&&document.elementFromPoint(i[0].pageX,i[0].pageY)}else t=document.elementFromPoint(e.clientX,e.clientY);t.classList.contains(Zs)||clearInterval(this.timeOut)}mouseUpOnSpinner(e){if(this.isPrevFocused&&(this.element.focus(),Ae.d.isDevice||(this.isPrevFocused=!1)),Ae.d.isDevice||e.preventDefault(),!this.getElementData(e))return;const t=e.currentTarget,i=t.classList.contains(en)?sn:nn;if(Ae.l.remove(t,"mouseleave",this.mouseUpClick),this.isCalled||this.action(i,e),this.isCalled=!1,Ae.l.remove(document,"mouseup",this.mouseUpClick),Object(Ae.A)(this.element,"form")){const e=this.element.nextElementSibling,t=document.createEvent("KeyboardEvent");t.initEvent("keyup",!1,!0),e.dispatchEvent(t)}}getElementData(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.enabled||this.readonly||(clearInterval(this.timeOut),0))}floatLabelTypeUpdate(){$s.removeFloating(this.inputWrapper);const e=this.hiddenInput;this.hiddenInput.remove(),$s.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])}mouseUpClick(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,Ae.l.remove(this.spinUp,"mouseleave",this.mouseUpClick),Ae.l.remove(this.spinDown,"mouseleave",this.mouseUpClick)}increment(e=this.step){this.isInteract=!1,this.changeValue(this.performAction(this.value,e,sn)),this.raiseChangeEvent()}decrement(e=this.step){this.isInteract=!1,this.changeValue(this.performAction(this.value,e,nn)),this.raiseChangeEvent()}destroy(){this.unwireEvents(),Object(Ae.F)(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),Object(Ae.F)(this.spinUp),Object(Ae.F)(this.spinDown));const e=["aria-labelledby","role","autocomplete","aria-readonly","autocorrect","aria-disabled","aria-placeholder","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-live","aria-valuenow","aria-invalid"];for(let t=0;t<e.length;t++)this.element.removeAttribute(e[t]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),Object(Ae.F)(this.container),super.destroy()}getText(){return this.element.value}focusIn(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),Object(Ae.u)([this.container],[rn]))}focusOut(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),Object(Ae.eb)([this.container],[rn]))}getPersistData(){return this.addOnPersist(["value"])}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"width":this.setElementWidth(e.width);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":$s.setEnabled(e.enabled,this.element);break;case"enableRtl":$s.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":$s.setReadonly(e.readonly,this.element),this.readonly?Object(Ae.w)(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),$s.validateInputType(this.container,this.element);break;case"placeholder":$s.setPlaceholder(e.placeholder,this.element);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(e.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":Object(Ae.mb)(i,Object(Ae.R)(i,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),$s.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":{const t=Object(Ae.R)(i,e);this.setProperties({currencyCode:t},!0),this.updateCurrency(i,t)}break;case"currencyCode":{const t=Object(Ae.R)(i,e);this.setProperties({currency:t},!0),this.updateCurrency("currency",t)}break;case"format":Object(Ae.mb)(i,Object(Ae.R)(i,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}updateClearButton(e){$s.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()}updateSpinButton(e){e.showSpinButton?this.spinBtnCreation():(Object(Ae.F)(this.spinUp),Object(Ae.F)(this.spinDown))}getModuleName(){return"numerictextbox"}};return Js([Object(Ae.r)("")],e.prototype,"cssClass",void 0),Js([Object(Ae.r)(null)],e.prototype,"value",void 0),Js([Object(Ae.r)(-Number.MAX_VALUE)],e.prototype,"min",void 0),Js([Object(Ae.r)(Number.MAX_VALUE)],e.prototype,"max",void 0),Js([Object(Ae.r)(1)],e.prototype,"step",void 0),Js([Object(Ae.r)(null)],e.prototype,"width",void 0),Js([Object(Ae.r)(null)],e.prototype,"placeholder",void 0),Js([Object(Ae.r)({})],e.prototype,"htmlAttributes",void 0),Js([Object(Ae.r)(!0)],e.prototype,"showSpinButton",void 0),Js([Object(Ae.r)(!1)],e.prototype,"readonly",void 0),Js([Object(Ae.r)(!0)],e.prototype,"enabled",void 0),Js([Object(Ae.r)(!1)],e.prototype,"showClearButton",void 0),Js([Object(Ae.r)(!1)],e.prototype,"enablePersistence",void 0),Js([Object(Ae.r)("n2")],e.prototype,"format",void 0),Js([Object(Ae.r)(null)],e.prototype,"decimals",void 0),Js([Object(Ae.r)(null)],e.prototype,"currency",void 0),Js([Object(Ae.r)(null)],e.prototype,"currencyCode",void 0),Js([Object(Ae.r)(!0)],e.prototype,"strictMode",void 0),Js([Object(Ae.r)(!1)],e.prototype,"validateDecimalOnType",void 0),Js([Object(Ae.r)("Never")],e.prototype,"floatLabelType",void 0),Js([Object(Ae.k)()],e.prototype,"created",void 0),Js([Object(Ae.k)()],e.prototype,"destroyed",void 0),Js([Object(Ae.k)()],e.prototype,"change",void 0),Js([Object(Ae.k)()],e.prototype,"focus",void 0),Js([Object(Ae.k)()],e.prototype,"blur",void 0),e=Js([Ae.q],e),e})();var hn,cn=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const dn={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")};var pn=function(e){return e[e.Message=0]="Message",e[e.Label=1]="Label",e}({});let un=(()=>{let e=hn=class extends Ae.c{constructor(e,t){super(t,e),this.validated=[],this.errorRules=[],this.allowSubmit=!1,this.required="required",this.infoElement=null,this.inputElement=null,this.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",this.localyMessage={},this.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},void 0===this.rules&&(this.rules={}),this.l10n=new Ae.p("formValidator",this.defaultMessages,this.locale),this.locale&&this.localeFunc(),Ae.ab.on("notifyExternalChange",this.afterLocalization,this),e="string"==typeof e?Object(Ae.hb)(e,document):e,null!=this.element&&(this.element.setAttribute("novalidate",""),this.inputElements=Object(Ae.ib)(this.selectQuery,this.element),this.createHTML5Rules(),this.wireEvents())}addRules(e,t){e&&(this.rules.hasOwnProperty(e)?Object(Ae.G)(this.rules[e],t,{}):this.rules[e]=t)}removeRules(e,t){if(e||t)if(this.rules[e]&&!t)delete this.rules[e];else{if(Object(Ae.T)(this.rules[e]&&t))return;for(let i=0;i<t.length;i++)delete this.rules[e][t[i]]}else this.rules={}}validate(e){const t=Object.keys(this.rules);if(e&&t.length)return this.validateRules(e),-1!==t.indexOf(e)&&0===this.errorRules.filter(t=>t.name===e).length;this.errorRules=[];for(const i of t)this.validateRules(i);return 0===this.errorRules.length}reset(){this.element.reset(),this.clearForm()}getInputElement(e){return this.inputElement=Object(Ae.hb)('[name="'+e+'"]',this.element),this.inputElement}destroy(){this.reset(),this.unwireEvents(),this.rules={};const e=Object(Ae.ib)("."+this.errorClass+", ."+this.validClass,this.element);for(const t of e)Object(Ae.F)(t);super.destroy(),Ae.ab.off("notifyExternalChange",this.afterLocalization)}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"locale":this.localeFunc()}}localeFunc(){for(const e of Object.keys(this.defaultMessages)){this.l10n.setLocale(this.locale);const t=this.l10n.getConstant(e);this.localyMessage[e]=t}}getModuleName(){return"formValidator"}afterLocalization(e){this.locale=e.locale,this.localeFunc()}refresh(){this.unwireEvents(),this.inputElements=Object(Ae.ib)(this.selectQuery,this.element),this.wireEvents()}clearForm(){this.errorRules=[],this.validated=[];const e=Object(Ae.ib)(this.selectQuery,this.element);for(const t of e){const e=t;e.removeAttribute("aria-invalid"),e.classList.remove(this.errorClass),e.name.length>0&&(this.getInputElement(e.name),this.getErrorElement(e.name),this.hideMessage(e.name)),e.classList.remove(this.validClass)}}createHTML5Rules(){const e=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],t=["hidden","email","url","date","number","tel"];for(const i of this.inputElements){const s={};for(let n of e)if(null!==i.getAttribute(n))switch(n){case"required":this.defRule(i,s,n,i.required);break;case"data-validation":n=i.getAttribute(n),this.defRule(i,s,n,!0);break;case"type":-1!==t.indexOf(i.type)&&this.defRule(i,s,i.type,!0);break;case"rangeLength":case"range":this.defRule(i,s,n,JSON.parse(i.getAttribute(n)));break;case"equalTo":{const e=i.getAttribute(n);this.defRule(i,s,n,e)}break;default:"true"===i.getAttribute("data-val")?this.annotationRule(i,s,n,i.getAttribute(n)):this.defRule(i,s,n,i.getAttribute(n))}0!==Object.keys(s).length&&this.addRules(i.name,s)}}annotationRule(e,t,i,s){const n=i.split("-"),o=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],r=n[n.length-1],l=n[n.length-2];if(-1!==o.indexOf(r))switch(r){case"required":this.defRule(e,t,"required",s);break;case"creditcard":this.defRule(e,t,"creditcard",s);break;case"phone":this.defRule(e,t,"tel",s)}else if(-1!==o.indexOf(l))switch(l){case"maxlength":this.defRule(e,t,"maxLength",s);break;case"minlength":this.defRule(e,t,"minLength",s);break;case"range":{const i=e.getAttribute("data-val-range-min"),s=e.getAttribute("data-val-range-max");this.defRule(e,t,"range",[i,s])}break;case"equalto":{const s=e.getAttribute(i).split(".");this.defRule(e,t,"equalTo",s[s.length-1])}break;case"regex":this.defRule(e,t,"regex",s)}}defRule(e,t,i,s){const n=e.getAttribute("data-"+i+"-message"),o=e.getAttribute("data-val-"+i);let r;this.rules[e.name]&&"validateHidden"!==i&&"hidden"!==i&&(this.getInputElement(e.name),r=this.getErrorMessage(this.rules[e.name][i],i)),n?s=[s,n]:o?s=[s,o]:r&&(s=[s,r]),t[i]=s}wireEvents(){for(const e of this.inputElements)hn.isCheckable(e)?Ae.l.add(e,"click",this.clickHandler,this):"SELECT"===e.tagName?Ae.l.add(e,"change",this.changeHandler,this):(Ae.l.add(e,"focusout",this.focusOutHandler,this),Ae.l.add(e,"keyup",this.keyUpHandler,this));Ae.l.add(this.element,"submit",this.submitHandler,this),Ae.l.add(this.element,"reset",this.resetHandler,this)}unwireEvents(){for(const e of this.inputElements)Ae.l.clearEvents(e);Ae.l.remove(this.element,"submit",this.submitHandler),Ae.l.remove(this.element,"reset",this.resetHandler)}focusOutHandler(e){this.trigger("focusout",e);const t=e.target;this.rules[t.name]&&(this.rules[t.name][this.required]||t.value.length>0?this.validate(t.name):-1===this.validated.indexOf(t.name)&&this.validated.push(t.name))}keyUpHandler(e){this.trigger("keyup",e);const t=e.target;(9!==e.which||this.rules[t.name]&&(!this.rules[t.name]||this.rules[t.name][this.required]))&&-1!==this.validated.indexOf(t.name)&&this.rules[t.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(e.which)&&this.validate(t.name)}clickHandler(e){this.trigger("click",e);const t=e.target;"submit"!==t.type?this.validate(t.name):null!==t.getAttribute("formnovalidate")&&(this.allowSubmit=!0)}changeHandler(e){this.trigger("change",e),this.validate(e.target.name)}submitHandler(e){this.trigger("submit",e),this.allowSubmit||this.validate()?this.allowSubmit=!1:e.preventDefault()}resetHandler(){this.clearForm()}validateRules(e){if(!this.rules[e])return;const t=Object.keys(this.rules[e]);let i=!1,s=!1;const n=t.indexOf("validateHidden"),o=t.indexOf("hidden");if(this.getInputElement(e),-1!==o&&(i=!0),-1!==n&&(s=!0),!i||i&&s){-1!==n&&t.splice(n,1),-1!==o&&t.splice(o-1,1),this.getErrorElement(e);for(const i of t){const t=this.getErrorMessage(this.rules[e][i],i),s={name:e,message:t},n={inputName:e,element:this.inputElement,message:t};if(!this.isValid(e,i)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(e),this.errorRules.push(s),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info"),this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.infoElement?this.showMessage(s):this.createErrorElement(e,s.message,this.inputElement),n.errorElement=this.infoElement,n.status="failure",this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.optionalValidationStatus(e,n),this.trigger("validationComplete",n),"required"===i&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(e),n.status="success",this.trigger("validationComplete",n)}}}optionalValidationStatus(e,t){this.rules[e][this.required]||this.inputElement.value.length||Object(Ae.T)(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),t.status="",this.hideMessage(e))}isValid(e,t){const i=this.rules[e][t],s=this.rules[e][t],n={value:this.inputElement.value,param:i instanceof Array&&"string"==typeof i[1]?i[0]:i,element:this.inputElement,formElement:this.element};return this.trigger("validationBegin",n),!n.param&&"required"===t||(s&&"function"==typeof s[0]?s[0].call(this,{element:this.inputElement,value:this.inputElement.value}):hn.isCheckable(this.inputElement)?"required"!==t||Object(Ae.ib)('input[name="'+e+'"]:checked',this.element).length>0:hn.checkValidator[t](n))}getErrorMessage(e,t){let i=this.inputElement.getAttribute("data-"+t+"-message")?this.inputElement.getAttribute("data-"+t+"-message"):e instanceof Array&&"string"==typeof e[1]?e[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[t]:this.defaultMessages[t];const s=i.match(/{(\d)}/g);if(!Object(Ae.T)(s))for(let n=0;n<s.length;n++)i=i.replace(s[n],e instanceof Array?e[n]:e);return i}createErrorElement(e,t,i){let s=Object(Ae.D)(this.errorElement,{className:this.errorClass,innerHTML:t,attrs:{for:e}});if(this.errorOption===pn.Message&&(s.classList.remove(this.errorClass),s.classList.add("e-message"),s=Object(Ae.D)(this.errorContainer,{className:this.errorClass,innerHTML:s.outerHTML})),s.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+i.id+'"]'))this.element.querySelector('[data-valmsg-for="'+i.id+'"]').appendChild(s);else if(!0===i.hasAttribute("data-msg-containerid")){const e=i.getAttribute("data-msg-containerid");Object(Ae.hb)("#"+e,this.element).appendChild(s)}else null!=this.customPlacement?this.customPlacement.call(this,this.inputElement,s):this.inputElement.parentNode.insertBefore(s,this.inputElement.nextSibling);s.style.display="block",this.getErrorElement(e),this.validated.push(e),this.checkRequired(e)}getErrorElement(e){return this.infoElement=Object(Ae.hb)(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=Object(Ae.hb)(this.errorElement+"."+this.errorClass+'[for="'+e+'"]',this.element)),this.infoElement}removeErrorRules(e){for(let t=0;t<this.errorRules.length;t++)this.errorRules[t].name===e&&this.errorRules.splice(t,1)}showMessage(e){this.infoElement.style.display="block",this.infoElement.innerHTML=e.message,this.checkRequired(e.name)}hideMessage(e){this.infoElement&&(this.infoElement.style.display="none",this.removeErrorRules(e),this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass),this.inputElement.setAttribute("aria-invalid","false"))}checkRequired(e){this.rules[e][this.required]||this.inputElement.value.length||Object(Ae.T)(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(e))}static isCheckable(e){const t=e.getAttribute("type");return t&&("checkbox"===t||"radio"===t||"submit"===t)}};return e.checkValidator={required:e=>isNaN(Date.parse(e.value))?e.value.toString().length>0:!isNaN(new Date(e.value).getTime()),email:e=>dn.EMAIL.test(e.value),url:e=>dn.URL.test(e.value),dateIso:e=>dn.DATE_ISO.test(e.value),tel:e=>dn.PHONE.test(e.value),creditcard:e=>dn.CREDITCARD.test(e.value),number:e=>!isNaN(Number(e.value))&&-1===e.value.indexOf(" "),digits:e=>dn.DIGITS.test(e.value),maxLength:e=>e.value.length<=e.param,minLength:e=>e.value.length>=e.param,rangeLength:e=>{const t=e.param;return e.value.length>=t[0]&&e.value.length<=t[1]},range:e=>{const t=e.param;return!isNaN(Number(e.value))&&Number(e.value)>=t[0]&&Number(e.value)<=t[1]},date:e=>!isNaN(new Date(e.value).getTime()),max:e=>isNaN(Number(e.value))?new Date(e.value).getTime()<=new Date(JSON.parse(JSON.stringify(e.param))).getTime():+e.value<=e.param,min:e=>{if(isNaN(Number(e.value))){if(-1!==e.value.indexOf(",")){const t=e.value.replace(/,/g,"");return parseFloat(t)>=e.param}return new Date(e.value).getTime()>=new Date(JSON.parse(JSON.stringify(e.param))).getTime()}return+e.value>=e.param},regex:e=>new RegExp(e.param).test(e.value),equalTo:e=>{const t=e.formElement.querySelector("#"+e.param);return e.param=t.value,e.param===e.value}},cn([Object(Ae.r)("")],e.prototype,"locale",void 0),cn([Object(Ae.r)("e-hidden")],e.prototype,"ignore",void 0),cn([Object(Ae.r)()],e.prototype,"rules",void 0),cn([Object(Ae.r)("e-error")],e.prototype,"errorClass",void 0),cn([Object(Ae.r)("e-valid")],e.prototype,"validClass",void 0),cn([Object(Ae.r)("label")],e.prototype,"errorElement",void 0),cn([Object(Ae.r)("div")],e.prototype,"errorContainer",void 0),cn([Object(Ae.r)(pn.Label)],e.prototype,"errorOption",void 0),cn([Object(Ae.k)()],e.prototype,"focusout",void 0),cn([Object(Ae.k)()],e.prototype,"keyup",void 0),cn([Object(Ae.k)()],e.prototype,"click",void 0),cn([Object(Ae.k)()],e.prototype,"change",void 0),cn([Object(Ae.k)()],e.prototype,"submit",void 0),cn([Object(Ae.k)()],e.prototype,"validationBegin",void 0),cn([Object(Ae.k)()],e.prototype,"validationComplete",void 0),cn([Object(Ae.k)()],e.prototype,"customPlacement",void 0),e=hn=cn([Ae.q],e),e})();var mn=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const gn="e-input-focus",bn=["title","style","class"];let fn=(()=>{let e=class extends Ae.h{constructor(e,t){super(e,t),this.previousValue=null,this.isAngular=!1,this.isHiddenInput=!1,this.isForm=!1,this.inputPreviousValue=null,this.isVue=!1,this.textboxOptions=e}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"floatLabelType":$s.removeFloating(this.textboxWrapper),$s.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":$s.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":$s.setWidth(e.width,this.textboxWrapper.container);break;case"value":{const e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=e,$s.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(Object(Ae.T)(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&Object(Ae.T)(this.preventChange))&&this.raiseChangeEvent()}break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkAttributes(!0),$s.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":$s.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),$s.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":"TEXTAREA"!==this.respectiveElement.tagName&&($s.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent());break;case"enableRtl":$s.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":$s.setPlaceholder(this.placeholder,this.respectiveElement);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"locale":this.globalize=new Ae.n(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),$s.setPlaceholder(this.placeholder,this.respectiveElement)}}getModuleName(){return"textbox"}isBlank(e){return!e||/^\s*$/.test(e)}preRender(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=Object(Ae.A)(this.element,"form"),Object(Ae.T)(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){const e=Object(Ae.R)("ej2_instances",this.element),t=this.createElement(this.multiline?"textarea":"input");let i=0;for(;i<this.element.attributes.length;i++){const e=this.element.attributes[i].nodeName;"id"!==e&&(t.setAttribute(e,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML,"name"===e&&this.element.removeAttribute("name"))}this.element.appendChild(t),this.element=t,Object(Ae.mb)("ej2_instances",e,this.element)}if(this.updateHTMLAttrToElement(),this.checkAttributes(!1),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),this.element.setAttribute("role","textbox"),this.globalize=new Ae.n(this.locale),this.l10n=new Ae.p("textbox",{placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",Object(Ae.Q)("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",Object(Ae.Q)("textarea"));const e=["placeholder","disabled","value","readonly","type","autocomplete"];for(let t=0;t<this.element.attributes.length;t++){const i=this.element.attributes[t].nodeName;this.element.hasAttribute(i)&&bn.indexOf(i)<0&&"id"!==i&&"type"!==i&&"e-mappinguid"!==i&&(this.textarea.setAttribute(i,this.element.attributes[t].nodeValue),e.indexOf(i)<0&&(this.element.removeAttribute(i),t--))}}}checkAttributes(e){const t=e?Object(Ae.T)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"];for(const i of t)if(!Object(Ae.T)(this.element.getAttribute(i)))switch(i){case"disabled":if(Object(Ae.T)(this.textboxOptions)||void 0===this.textboxOptions.enabled||e){const t="disabled"!==this.element.getAttribute(i)&&""!==this.element.getAttribute(i)&&"true"!==this.element.getAttribute(i);this.setProperties({enabled:t},!e)}break;case"readonly":if(Object(Ae.T)(this.textboxOptions)||void 0===this.textboxOptions.readonly||e){const t="readonly"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i);this.setProperties({readonly:t},!e)}break;case"placeholder":(Object(Ae.T)(this.textboxOptions)||void 0===this.textboxOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"autocomplete":(Object(Ae.T)(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||e)&&this.setProperties({autocomplete:"off"===this.element.autocomplete?"off":"on"},!e);break;case"value":(Object(Ae.T)(this.textboxOptions)||void 0===this.textboxOptions.value||e)&&this.setProperties({value:this.element.value},!e);break;case"type":(Object(Ae.T)(this.textboxOptions)||void 0===this.textboxOptions.type||e)&&this.setProperties({type:this.element.type},!e)}}render(){let e=this.cssClass;Object(Ae.T)(this.cssClass)||""===this.cssClass||(e=this.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=$s.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:e,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),Object(Ae.T)(this.value)||($s.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),Object(Ae.T)(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:Object(Ae.T)(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,$s.setWidth(this.width,this.textboxWrapper.container),this.renderComplete()}updateHTMLAttrToWrapper(){if(!Object(Ae.T)(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if(bn.indexOf(e)>-1)if("class"===e){const t=this.getInputValidClassList(this.htmlAttributes[e]);""!==t&&Object(Ae.u)([this.textboxWrapper.container],t.split(" "))}else if("style"===e){let t=this.textboxWrapper.container.getAttribute(e);t=Object(Ae.T)(t)?this.htmlAttributes[e]:t+this.htmlAttributes[e],this.textboxWrapper.container.setAttribute(e,t)}else this.textboxWrapper.container.setAttribute(e,this.htmlAttributes[e])}updateHTMLAttrToElement(){if(!Object(Ae.T)(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))bn.indexOf(e)<0&&this.element.setAttribute(e,this.htmlAttributes[e])}updateCssClass(e,t){$s.setCssClass(this.getInputValidClassList(e),[this.textboxWrapper.container],this.getInputValidClassList(t))}getInputValidClassList(e){let t=e;return Object(Ae.T)(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t}setInitialValue(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)}wireEvents(){Ae.l.add(this.respectiveElement,"focus",this.focusHandler,this),Ae.l.add(this.respectiveElement,"blur",this.focusOutHandler,this),Ae.l.add(this.respectiveElement,"input",this.inputHandler,this),Ae.l.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&Ae.l.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!Object(Ae.T)(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&Ae.l.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)}animationHandler(){this.textboxWrapper.container.classList.add("e-valid-input");const e=this.textboxWrapper.container.querySelector(".e-float-text");Object(Ae.T)(e)||(e.classList.add("e-label-top"),e.classList.contains("e-label-bottom")&&e.classList.remove("e-label-bottom"))}resetValue(e){const t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=e,this.isProtectedOnChange=t}resetForm(){if(this.resetValue(this.isAngular?"":this.initialValue),!Object(Ae.T)(this.textboxWrapper)){const e=this.textboxWrapper.container.querySelector(".e-float-text");Object(Ae.T)(e)||(Object(Ae.T)(this.initialValue)||""===this.initialValue?(e.classList.add("e-label-bottom"),e.classList.remove("e-label-top")):""!==this.initialValue&&(e.classList.add("e-label-top"),e.classList.remove("e-label-bottom")))}}focusHandler(e){this.trigger("focus",{container:this.textboxWrapper.container,event:e,value:this.value})}focusOutHandler(e){null===this.previousValue&&null===this.value&&""===this.respectiveElement.value||this.previousValue===this.respectiveElement.value||this.raiseChangeEvent(e,!0),this.trigger("blur",{container:this.textboxWrapper.container,event:e,value:this.value})}inputHandler(e){const t={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(this.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",t),e.stopPropagation()}changeHandler(e){this.setProperties({value:this.respectiveElement.value},!0),this.raiseChangeEvent(e,!0),e.stopPropagation()}raiseChangeEvent(e,t){const i={event:e,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:t||!1,isInteracted:t||!1};this.preventChange=!1,this.trigger("change",i),this.previousValue=this.value}bindClearEvent(){this.showClearButton&&"TEXTAREA"!==this.respectiveElement.tagName&&(this.enabled?Ae.l.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):Ae.l.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))}resetInputHandler(e){e.preventDefault(),(!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.textboxWrapper.container.classList.contains("e-static-clear"))&&($s.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0),this.trigger("input",{event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container}),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(e,!0))}unWireEvents(){Ae.l.remove(this.respectiveElement,"focus",this.focusHandler),Ae.l.remove(this.respectiveElement,"blur",this.focusOutHandler),Ae.l.remove(this.respectiveElement,"input",this.inputHandler),Ae.l.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&Ae.l.remove(this.formElement,"reset",this.resetForm),!Object(Ae.T)(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&Ae.l.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)}destroy(){this.unWireEvents(),"INPUT"===this.element.tagName&&this.multiline&&(Object(Ae.F)(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-placeholder","aria-disabled","aria-readonly","aria-labelledby"]),Object(Ae.T)(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),Object(Ae.F)(this.textboxWrapper.container)),this.textboxWrapper=null,super.destroy()}addIcon(e,t){$s.addIcon(e,t,this.textboxWrapper.container,this.respectiveElement,this.createElement)}getPersistData(){return this.addOnPersist(["value"])}addAttributes(e){for(const t of Object.keys(e))"disabled"===t?(this.setProperties({enabled:!1},!0),$s.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===t?(this.setProperties({readonly:!0},!0),$s.setReadonly(this.readonly,this.respectiveElement)):"class"===t?this.respectiveElement.classList.add(e[t]):"placeholder"===t?(this.setProperties({placeholder:e[t]},!0),$s.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.setAttribute(t,e[t])}removeAttributes(e){for(const t of e)"disabled"===t?(this.setProperties({enabled:!0},!0),$s.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===t?(this.setProperties({readonly:!1},!0),$s.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===t?(this.setProperties({placeholder:null},!0),$s.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(t)}focusIn(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&Object(Ae.u)([this.textboxWrapper.container],[gn]))}focusOut(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&Object(Ae.eb)([this.textboxWrapper.container],[gn]))}};return mn([Object(Ae.r)("text")],e.prototype,"type",void 0),mn([Object(Ae.r)(!1)],e.prototype,"readonly",void 0),mn([Object(Ae.r)(null)],e.prototype,"value",void 0),mn([Object(Ae.r)("Never")],e.prototype,"floatLabelType",void 0),mn([Object(Ae.r)("")],e.prototype,"cssClass",void 0),mn([Object(Ae.r)(null)],e.prototype,"placeholder",void 0),mn([Object(Ae.r)("on")],e.prototype,"autocomplete",void 0),mn([Object(Ae.r)({})],e.prototype,"htmlAttributes",void 0),mn([Object(Ae.r)(!1)],e.prototype,"multiline",void 0),mn([Object(Ae.r)(!0)],e.prototype,"enabled",void 0),mn([Object(Ae.r)(!1)],e.prototype,"showClearButton",void 0),mn([Object(Ae.r)(!1)],e.prototype,"enablePersistence",void 0),mn([Object(Ae.r)(null)],e.prototype,"width",void 0),mn([Object(Ae.k)()],e.prototype,"created",void 0),mn([Object(Ae.k)()],e.prototype,"destroyed",void 0),mn([Object(Ae.k)()],e.prototype,"change",void 0),mn([Object(Ae.k)()],e.prototype,"blur",void 0),mn([Object(Ae.k)()],e.prototype,"focus",void 0),mn([Object(Ae.k)()],e.prototype,"input",void 0),e=mn([Ae.q],e),e})();var yn=i("I1S7"),vn=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const Cn="e-rtl",wn="e-overlay",On="e-nav-right-arrow",Sn="e-nav-left-arrow",Tn="e-scroll-nav",jn="e-scroll-device",En="e-scroll-overlay",xn="e-scroll-right-overlay",Rn="e-scroll-left-overlay";let Dn=(()=>{let e=class extends Ae.h{constructor(e,t){super(e,t)}preRender(){this.browser=Ae.d.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=Ae.d.isDevice,this.customStep=!0;const e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=Object(Ae.Q)("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(Cn)}render(){this.touchModule=new Ae.t(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),Ae.l.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(jn),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()}setScrollState(){Object(Ae.T)(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0}initialize(){const e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");const i=this.element,s=[].slice.call(i.children);for(const n of s)e.appendChild(n);t.appendChild(e),i.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e}getPersistData(){return this.addOnPersist(["scrollStep"])}getModuleName(){return"hScroll"}destroy(){const e=this.element;e.style.display="",e.classList.remove("e-hscroll"),e.classList.remove(jn);const t=Object(Ae.ib)(".e-"+e.id+"_nav."+Tn,e),i=Object(Ae.ib)("."+En,e);[].slice.call(i).forEach(e=>{Object(Ae.F)(e)});for(const s of[].slice.call(this.scrollItems.children))e.appendChild(s);this.uniqueId&&this.element.removeAttribute("id"),Object(Ae.F)(this.scrollEle),t.length>0&&(Object(Ae.F)(t[0]),Object(Ae.T)(t[1])||Object(Ae.F)(t[1])),Ae.l.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,super.destroy()}disable(e){const t=Object(Ae.ib)(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add(wn):this.element.classList.remove(wn),[].slice.call(t).forEach(t=>{t.setAttribute("tabindex",e?"-1":"0")})}createOverlay(e){const t=e.id.concat("_nav"),i=this.createElement("div",{className:En+" "+xn}),s="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),n=this.createElement("div",{id:t.concat("_right"),className:s}),o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});n.appendChild(o);const r=this.createElement("div",{className:En+" "+Rn});this.ieCheck&&n.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(n),e.insertBefore(r,e.firstChild),this.eventBinding([n])}createNavIcon(e){const t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),s=this.createElement("div",{id:t.concat("_right"),className:i});s.setAttribute("aria-disabled","false");const n=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),r=this.createElement("div",{id:t.concat("_left"),className:o+" "+wn});r.setAttribute("aria-disabled","true");const l=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});r.appendChild(l),s.appendChild(n),e.appendChild(s),e.insertBefore(r,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),r.classList.add("e-ie-align")),this.eventBinding([s,r])}onKeyPress(e){if("Enter"===e.key){const t=()=>{this.keyTimeout=!0,this.eleScrolling(10,e.target,!0)};this.keyTimer=window.setTimeout(()=>{t()},100)}}onKeyUp(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))}eventBinding(e){[].slice.call(e).forEach(e=>{new Ae.t(e,{tapHold:this.tabHoldHandler.bind(this),tapHoldThreshold:500}),e.addEventListener("keydown",this.onKeyPress.bind(this)),e.addEventListener("keyup",this.onKeyUp.bind(this)),e.addEventListener("mouseup",this.repeatScroll.bind(this)),e.addEventListener("touchend",this.repeatScroll.bind(this)),e.addEventListener("contextmenu",e=>{e.preventDefault()}),Ae.l.add(e,"click",this.clickEventHandler,this)})}repeatScroll(){clearInterval(this.timeout)}tabHoldHandler(e){let t=e.originalEvent.target;t=this.contains(t,Tn)?t.firstElementChild:t;const i=()=>{this.eleScrolling(10,t,!0)};this.timeout=window.setInterval(()=>{i()},50)}contains(e,t){return e.classList.contains(t)}eleScrolling(e,t,i){const s=this.element;let n=t.classList;n.contains(Tn)&&(n=t.querySelector(".e-nav-arrow").classList),this.contains(s,Cn)&&this.browserCheck&&(e=-e),!this.contains(s,Cn)||this.browserCheck||this.ieCheck?n.contains(On)?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i):n.contains(Sn)?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i)}clickEventHandler(e){this.eleScrolling(this.scrollStep,e.target,!1)}swipeHandler(e){const t=this.scrollEle;let i;i=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;let s=.5;const n=()=>{const o=Math.sin(s);o<=0?window.cancelAnimationFrame(o):("Left"===e.swipeDirection?t.scrollLeft+=i*o:"Right"===e.swipeDirection&&(t.scrollLeft-=i*o),s-=.5,window.requestAnimationFrame(n))};n()}scrollUpdating(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e}frameScrollRequest(e,t,i){if(i)return void this.scrollUpdating(e,t);this.customStep||[].slice.call(Object(Ae.ib)("."+En,this.element)).forEach(t=>{e-=t.offsetWidth});const s=()=>{let i,n;this.contains(this.element,Cn)&&this.browserCheck?(i=-e,n=-10):(i=e,n=10),i<10?window.cancelAnimationFrame(n):(this.scrollUpdating(n,t),e-=n,window.requestAnimationFrame(s))};s()}touchHandler(e){const t=this.scrollEle;let i=e.distanceX;this.ieCheck&&this.contains(this.element,Cn)&&(i=-i),"Left"===e.scrollDirection?t.scrollLeft=t.scrollLeft+i:"Right"===e.scrollDirection&&(t.scrollLeft=t.scrollLeft-i)}arrowDisabling(e,t){if(this.isDevice){const i=(Object(Ae.T)(e)?t:e).querySelector(".e-nav-arrow");Object(Ae.T)(e)?Object(Ae.y)(i,[On],[Sn]):Object(Ae.y)(i,[Sn],[On])}else e.classList.add(wn),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove(wn),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()}scrollHandler(e){const t=e.target,i=t.offsetWidth,s=this.element.querySelector(".e-scroll-left-nav"),n=this.element.querySelector(".e-scroll-right-nav");let o=this.element.querySelector("."+Rn),r=this.element.querySelector("."+xn),l=t.scrollLeft;if(l<=0&&(l=-l),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(o=this.element.querySelector("."+xn),r=this.element.querySelector("."+Rn)),o.style.width=l<40?l+"px":"40px",r.style.width=t.scrollWidth-Math.ceil(i+l)<40?t.scrollWidth-Math.ceil(i+l)+"px":"40px"),0===l)this.arrowDisabling(s,n);else if(Math.ceil(i+l+.1)>=t.scrollWidth)this.arrowDisabling(n,s);else{const e=this.element.querySelector(".e-scroll-nav.e-overlay");e&&(e.classList.remove(wn),e.setAttribute("aria-disabled","false"),e.setAttribute("tabindex","0"))}}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(Cn):this.element.classList.remove(Cn)}}};return vn([Object(Ae.r)(null)],e.prototype,"scrollStep",void 0),e=vn([Ae.q],e),e})();var kn=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const In="e-rtl",Fn="e-overlay",An="e-nav-up-arrow",Mn="e-nav-down-arrow",Ln="e-scroll-nav",zn="e-scroll-device",Bn="e-scroll-overlay",Pn="e-scroll-up-overlay",Hn="e-scroll-down-overlay";let Vn=(()=>{let e=class extends Ae.h{constructor(e,t){super(e,t)}preRender(){this.browser=Ae.d.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=Ae.d.isDevice,this.customStep=!0;const e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=Object(Ae.Q)("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(In)}render(){this.touchModule=new Ae.t(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),Ae.l.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(zn),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),Ae.l.add(this.element,"wheel",this.wheelEventHandler,this)}setScrollState(){Object(Ae.T)(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0}initialize(){const e=Object(Ae.D)("div",{className:"e-vscroll-content"}),t=Object(Ae.D)("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");const i=this.element,s=[].slice.call(i.children);for(const n of s)e.appendChild(n);t.appendChild(e),i.appendChild(t),t.style.overflowY="hidden",this.scrollEle=t,this.scrollItems=e}getPersistData(){return this.addOnPersist(["scrollStep"])}getModuleName(){return"vScroll"}destroy(){const e=this.element;e.style.display="",Object(Ae.eb)([this.element],["e-vscroll",zn]);const t=Object(Ae.ib)(".e-"+e.id+"_nav."+Ln,e),i=Object(Ae.ib)("."+Bn,e);[].slice.call(i).forEach(e=>{Object(Ae.F)(e)});for(const s of[].slice.call(this.scrollItems.children))e.appendChild(s);this.uniqueId&&this.element.removeAttribute("id"),Object(Ae.F)(this.scrollEle),t.length>0&&(Object(Ae.F)(t[0]),Object(Ae.T)(t[1])||Object(Ae.F)(t[1])),Ae.l.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,super.destroy()}disable(e){const t=Object(Ae.ib)(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add(Fn):this.element.classList.remove(Fn),[].slice.call(t).forEach(t=>{t.setAttribute("tabindex",e?"-1":"0")})}createOverlayElement(e){const t=e.id.concat("_nav"),i=Object(Ae.D)("div",{className:Bn+" "+Hn}),s="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),n=Object(Ae.D)("div",{id:t.concat("down"),className:s}),o=Object(Ae.D)("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});n.appendChild(o);const r=Object(Ae.D)("div",{className:Bn+" "+Pn});this.ieCheck&&n.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(n),e.insertBefore(r,e.firstChild),this.eventBinding([n])}createNavIcon(e){const t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),s=Object(Ae.D)("div",{id:t.concat("_down"),className:i});s.setAttribute("aria-disabled","false");const n=Object(Ae.D)("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),r=Object(Ae.D)("div",{id:t.concat("_up"),className:o+" "+Fn});r.setAttribute("aria-disabled","true");const l=Object(Ae.D)("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});r.appendChild(l),s.appendChild(n),s.setAttribute("tabindex","0"),e.appendChild(s),e.insertBefore(r,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),r.classList.add("e-ie-align")),this.eventBinding([s,r])}onKeyPress(e){if("Enter"===e.key){const t=()=>{this.keyTimeout=!0,this.eleScrolling(10,e.target,!0)};this.keyTimer=window.setTimeout(()=>{t()},100)}}onKeyUp(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))}eventBinding(e){[].slice.call(e).forEach(e=>{new Ae.t(e,{tapHold:this.tabHoldHandler.bind(this),tapHoldThreshold:500}),e.addEventListener("keydown",this.onKeyPress.bind(this)),e.addEventListener("keyup",this.onKeyUp.bind(this)),e.addEventListener("mouseup",this.repeatScroll.bind(this)),e.addEventListener("touchend",this.repeatScroll.bind(this)),e.addEventListener("contextmenu",e=>{e.preventDefault()}),Ae.l.add(e,"click",this.clickEventHandler,this)})}repeatScroll(){clearInterval(this.timeout)}tabHoldHandler(e){let t=e.originalEvent.target;t=this.contains(t,Ln)?t.firstElementChild:t;const i=()=>{this.eleScrolling(10,t,!0)};this.timeout=window.setInterval(()=>{i()},50)}contains(e,t){return e.classList.contains(t)}eleScrolling(e,t,i){let s=t.classList;s.contains(Ln)&&(s=t.querySelector(".e-nav-arrow").classList),s.contains(Mn)?this.frameScrollRequest(e,"add",i):s.contains(An)&&this.frameScrollRequest(e,"",i)}clickEventHandler(e){this.eleScrolling(this.scrollStep,e.target,!1)}wheelEventHandler(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)}swipeHandler(e){const t=this.scrollEle;let i;i=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;let s=.5;const n=()=>{const o=Math.sin(s);o<=0?window.cancelAnimationFrame(o):("Up"===e.swipeDirection?t.scrollTop+=i*o:"Down"===e.swipeDirection&&(t.scrollTop-=i*o),s-=.02,window.requestAnimationFrame(n))};n()}scrollUpdating(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e}frameScrollRequest(e,t,i){if(i)return void this.scrollUpdating(e,t);this.customStep||[].slice.call(Object(Ae.ib)("."+Bn,this.element)).forEach(t=>{e-=t.offsetHeight});const s=()=>{e<10?window.cancelAnimationFrame(10):(this.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(s))};s()}touchHandler(e){const t=this.scrollEle,i=e.distanceY;"Up"===e.scrollDirection?t.scrollTop=t.scrollTop+i:"Down"===e.scrollDirection&&(t.scrollTop=t.scrollTop-i)}arrowDisabling(e,t){if(this.isDevice){const i=(Object(Ae.T)(e)?t:e).querySelector(".e-nav-arrow");Object(Ae.T)(e)?Object(Ae.y)(i,[Mn],[An]):Object(Ae.y)(i,[An],[Mn])}else e.classList.add(Fn),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove(Fn),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()}scrollEventHandler(e){const t=e.target,i=t.offsetHeight,s=this.element.querySelector(".e-scroll-up-nav"),n=this.element.querySelector(".e-scroll-down-nav"),o=this.element.querySelector("."+Pn),r=this.element.querySelector("."+Hn);let l=t.scrollTop;if(l<=0&&(l=-l),this.isDevice&&(o.style.height=l<40?l+"px":"40px",r.style.height=t.scrollHeight-Math.ceil(i+l)<40?t.scrollHeight-Math.ceil(i+l)+"px":"40px"),0===l)this.arrowDisabling(s,n);else if(Math.ceil(i+l+.1)>=t.scrollHeight)this.arrowDisabling(n,s);else{const e=this.element.querySelector(".e-scroll-nav.e-overlay");e&&(e.classList.remove(Fn),e.setAttribute("aria-disabled","false"),e.setAttribute("tabindex","0"))}}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(In):this.element.classList.remove(In)}}};return kn([Object(Ae.r)(null)],e.prototype,"scrollStep",void 0),e=kn([Ae.q],e),e})();var Nn=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const qn="e-vertical",Wn="e-toolbar-items",Gn="e-toolbar-item",_n="e-rtl",Un="e-separator",Kn="e-popup-up-icon",Yn="e-popup-down-icon",Xn="e-popup-open",Qn="e-template",$n="e-overlay",Jn="e-toolbar-text",Zn="e-popup-text",eo="e-overflow-show",to="e-overflow-hide",io="e-hor-nav",so="e-toolbar-center",no="e-tbar-pos",oo="e-toolbar-pop",ro="e-toolbar-popup",lo="e-nav-active",ao="e-ignore",ho="e-popup-alone",co="e-hidden",po="e-toolbar-multirow",uo="e-multirow-pos",mo="e-multirow-separator",go="e-extended-separator",bo="e-extended-toolbar",fo="e-tbar-extended";let yo=(()=>{class e extends Ae.e{}return Nn([Object(Ae.r)("")],e.prototype,"id",void 0),Nn([Object(Ae.r)("")],e.prototype,"text",void 0),Nn([Object(Ae.r)("auto")],e.prototype,"width",void 0),Nn([Object(Ae.r)("")],e.prototype,"cssClass",void 0),Nn([Object(Ae.r)(!1)],e.prototype,"showAlwaysInPopup",void 0),Nn([Object(Ae.r)(!1)],e.prototype,"disabled",void 0),Nn([Object(Ae.r)("")],e.prototype,"prefixIcon",void 0),Nn([Object(Ae.r)("")],e.prototype,"suffixIcon",void 0),Nn([Object(Ae.r)(!0)],e.prototype,"visible",void 0),Nn([Object(Ae.r)("None")],e.prototype,"overflow",void 0),Nn([Object(Ae.r)("")],e.prototype,"template",void 0),Nn([Object(Ae.r)("Button")],e.prototype,"type",void 0),Nn([Object(Ae.r)("Both")],e.prototype,"showTextOn",void 0),Nn([Object(Ae.r)(null)],e.prototype,"htmlAttributes",void 0),Nn([Object(Ae.r)("")],e.prototype,"tooltipText",void 0),Nn([Object(Ae.r)("Left")],e.prototype,"align",void 0),Nn([Object(Ae.k)()],e.prototype,"click",void 0),e})(),vo=(()=>{let e=class extends Ae.h{constructor(e,t){super(e,t),this.resizeContext=this.resize.bind(this),this.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"}}destroy(){this.isReact&&this.clearTemplate();const e=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(e).forEach(e=>{Object(Ae.T)(e)||Object(Ae.T)(e.ej2_instances)||Object(Ae.T)(e.ej2_instances[0])||e.ej2_instances[0].isDestroyed||e.ej2_instances[0].destroy()}),super.destroy(),this.unwireEvents(),this.tempId.forEach(e=>{Object(Ae.T)(this.element.querySelector(e))||(document.body.appendChild(this.element.querySelector(e)).style.display="none")});this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&this.element.appendChild(this.ctrlTem),this.clearProperty(),this.popObj=null,this.tbarAlign=null,this.remove(this.element,"e-toolpop"),this.cssClass&&Object(Ae.eb)([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","aria-haspopup","role"].forEach(e=>this.element.removeAttribute(e))}preRender(){const e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(qn),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,_n)}wireEvents(){Ae.l.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.allowKeyboard&&this.wireKeyboardEvent()}wireKeyboardEvent(){this.keyModule=new Ae.o(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),Ae.l.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")}unwireKeyboardEvent(){this.keyModule&&(Ae.l.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)}docKeyDown(e){if("INPUT"===e.target.tagName)return;const t=!Object(Ae.T)(this.popObj)&&Object(Ae.X)(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}unwireEvents(){Ae.l.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),Ae.l.remove(document,"scroll",this.docEvent),Ae.l.remove(document,"click",this.docEvent)}clearProperty(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}}docEvent(e){const t=Object(Ae.A)(e.target,".e-popup");this.popObj&&Object(Ae.X)(this.popObj.element)&&!t&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})}destroyScroll(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,no),this.scrollModule.destroy(),this.scrollModule=null)}destroyItems(){this.element&&[].slice.call(this.element.querySelectorAll("."+Gn)).forEach(e=>{Object(Ae.F)(e)});const e=this.element.querySelector("."+Wn);this.tbarAlign&&([].slice.call(e.children).forEach(e=>{Object(Ae.F)(e)}),this.tbarAlign=!1,this.remove(e,no)),this.clearProperty()}destroyMode(){this.scrollModule&&(this.remove(this.scrollModule.element,_n),this.destroyScroll()),this.remove(this.element,fo),this.remove(this.element,bo);const e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,po),this.popObj&&this.popupRefresh(this.popObj.element,!0)}add(e,t){e.classList.add(t)}remove(e,t){e.classList.remove(t)}elementFocus(e){const t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()}clstElement(e,t){let i;return i=e&&this.popObj&&Object(Ae.X)(this.popObj.element)?this.popObj.element.querySelector("."+Gn):this.element===t||e?this.element.querySelector(".e-toolbar-item:not(.e-overlay ):not(.e-separator ):not(.e-hidden )"):Object(Ae.A)(t,"."+Gn),i}keyHandling(e,t,i,s,n){const o=this.popObj,r=this.element,l={name:"FadeOut",duration:100},a="moveUp"===t.action?"previous":"next";let h,c;switch(t.action){case"moveRight":if(this.isVertical)return;r===i?this.elementFocus(e):s||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;s||this.eleFocus(e,"previous");break;case"home":case"end":if(e){const i=Object(Ae.A)(e,".e-popup");i?Object(Ae.X)(this.popObj.element)&&(c=[].slice.call(i.children),h="home"===t.action?c[0]:c[c.length-1]):(c=this.element.querySelectorAll("."+Wn+" ."+Gn),h="home"===t.action?c[0]:c[c.length-1]),h&&this.elementFocus(h)}break;case"moveUp":case"moveDown":if(this.isVertical)this.eleFocus(e,"moveUp"===t.action?"previous":"next");else if(o&&Object(Ae.A)(i,".e-popup")){const t=o.element,i=t.firstElementChild;if("previous"===a&&i===e||"next"===a&&t.lastElementChild===e)return;this.eleFocus(e,a)}else"moveDown"===t.action&&o&&Object(Ae.X)(o.element)&&this.elementFocus(e);break;case"tab":if(!n&&!s){const t=e.firstElementChild;r===i&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(t),t.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":o&&"Extended"!==this.overflowMode&&o.hide(l);break;case"popupOpen":if(!s)return;o&&!Object(Ae.X)(o.element)?(o.element.style.top=r.offsetHeight+"px",o.show({name:"FadeIn",duration:100})):o.hide(l)}}keyActionHandler(e){const t=e.target;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||this.element.classList.contains($n))return;e.preventDefault();const i=t.classList.contains(io),s=t.classList.contains("e-scroll-nav"),n=this.clstElement(i,t);(n||s)&&this.keyHandling(n,e,t,i,s)}disable(e){const t=this.element;e?t.classList.add($n):t.classList.remove($n),t.setAttribute("tabindex",e?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",e?"-1":"0"),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(Object(Ae.X)(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))}eleContains(e){return e.classList.contains(Un)||e.classList.contains($n)||e.getAttribute("disabled")||e.classList.contains(co)||!Object(Ae.X)(e)}eleFocus(e,t){const i=Object(e)[t+"ElementSibling"];if(i){if(this.eleContains(i))return void this.eleFocus(i,t);this.elementFocus(i)}else if(this.tbarAlign){let i=Object(e.parentElement)[t+"ElementSibling"];if(Object(Ae.T)(i)||0!==i.children.length||(i=Object(i)[t+"ElementSibling"]),!Object(Ae.T)(i)&&i.children.length>0)if("next"===t){const e=i.querySelector("."+Gn);this.eleContains(e)?this.eleFocus(e,t):(e.firstElementChild.focus(),this.activeEleSwitch(e))}else{const e=i.lastElementChild;this.eleContains(e)?this.eleFocus(e,t):this.elementFocus(e)}}}clickHandler(e){const t=e.target,i=this.element,s=!Object(Ae.T)(Object(Ae.A)(t,".e-toolbar-pop"));let n,o=t.classList,r=Object(Ae.A)(t,".e-hor-nav");r||(r=t),i.children[0].classList.contains("e-hscroll")||i.children[0].classList.contains("e-vscroll")||!o.contains(io)||(o=t.querySelector(".e-icons").classList),(o.contains(Kn)||o.contains(Yn))&&this.popupClickHandler(i,r,_n);const l=Object(Ae.A)(e.target,"."+Gn);if((Object(Ae.T)(l)||l.classList.contains($n))&&!r.classList.contains(io))return;l&&(n=this.items[this.tbarEle.indexOf(l)]);const a={originalEvent:e,item:n};n&&!Object(Ae.T)(n.click)&&this.trigger("items["+this.tbarEle.indexOf(l)+"].click",a),a.cancel||this.trigger("clicked",a,e=>{!Object(Ae.T)(this.popObj)&&s&&!e.cancel&&"Popup"===this.overflowMode&&e.item&&"Input"!==e.item.type&&this.popObj.hide({name:"FadeOut",duration:100})})}popupClickHandler(e,t,i){const s=this.popObj;Object(Ae.X)(s.element)?(t.classList.remove(lo),s.hide({name:"FadeOut",duration:100})):(e.classList.contains(i)&&(s.enableRtl=!0,s.position={X:"left",Y:"top"}),0!==s.offsetX||e.classList.contains(i)||(s.enableRtl=!1,s.position={X:"right",Y:"top"}),s.dataBind(),s.refreshPosition(),s.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(s.element.style.minHeight="0px"),t.classList.add(lo),s.show({name:"FadeIn",duration:100}))}render(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()}initialize(){const e=Object(Ae.H)(this.width),t=Object(Ae.H)(this.height);"msie"===Ae.d.info.name&&"auto"===this.height&&"MultiRow"!==this.overflowMode||Object(Ae.kb)(this.element,{height:t}),Object(Ae.kb)(this.element,{width:e});const i={role:"toolbar","aria-disabled":"false","aria-haspopup":"false","aria-orientation":this.isVertical?"vertical":"horizontal"};Object(Ae.w)(this.element,i),this.cssClass&&Object(Ae.u)([this.element],this.cssClass.split(" "))}renderControl(){const e=this.element;this.trgtEle=e.children.length>0?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()}renderLayout(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()}itemsAlign(e,t){let i,s;this.tbarEle||(this.tbarEle=[]);for(let n=0;n<e.length;n++)i=this.renderSubComponent(e[n],n),-1===this.tbarEle.indexOf(i)&&this.tbarEle.push(i),this.tbarAlign||this.tbarItemAlign(e[n],t,n),s=t.querySelector(".e-toolbar-"+e[n].align.toLowerCase()),s?(e[n].showAlwaysInPopup&&"Show"!==e[n].overflow||this.tbarAlgEle[(e[n].align+"s").toLowerCase()].push(i),s.appendChild(i)):t.appendChild(i);this.isReact&&(this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates())}changeOrientation(){const e=this.element;this.isVertical?(e.classList.remove(qn),this.isVertical=!1,"auto"!==this.height&&"100%"!==this.height||(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add(qn),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),Object(Ae.kb)(this.element,{height:Object(Ae.H)(this.height),width:Object(Ae.H)(this.width)})),this.destroyMode(),this.refreshOverflow()}initScroll(e,t){!this.scrollModule&&this.checkOverflow(e,t[0])&&(this.tbarAlign&&this.element.querySelector("."+Wn+" ."+so).removeAttribute("style"),this.scrollModule=this.isVertical?new Vn({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]):new Dn({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]),this.remove(this.scrollModule.element,no),Object(Ae.kb)(this.element,{overflow:"hidden"}))}itemWidthCal(e){let t,i=0;return[].slice.call(Object(Ae.ib)("."+Gn,e)).forEach(e=>{Object(Ae.X)(e)&&(t=window.getComputedStyle(e),i+=this.isVertical?e.offsetHeight:e.offsetWidth,i+=parseFloat(this.isVertical?t.marginTop:t.marginRight),i+=parseFloat(this.isVertical?t.marginBottom:t.marginLeft))}),i}getScrollCntEle(e){return e.querySelector(this.isVertical?".e-vscroll-content":".e-hscroll-content")}checkOverflow(e,t){if(Object(Ae.T)(e)||Object(Ae.T)(t)||!Object(Ae.X)(e))return!1;const i=this.isVertical?e.offsetHeight:e.offsetWidth;let s=this.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||i===s)&&(s=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));const n=e.querySelector(".e-hor-nav"),o=e.querySelector(".e-scroll-nav");let r=0;return n?r=this.isVertical?n.offsetHeight:n.offsetWidth:o&&(r=this.isVertical?2*o.offsetHeight:2*o.offsetWidth),s>i-r}refreshOverflow(){this.resize()}toolbarAlign(e){this.tbarAlign&&(this.add(e,no),this.itemPositioning())}renderOverflowMode(){const e=this.element,t=e.querySelector("."+Wn),i=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===Ae.d.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":Object(Ae.T)(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(Wn)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,t)||i)&&this.setOverflowAttributes(e),this.toolbarAlign(t);break;case"MultiRow":this.add(t,po),this.checkOverflow(e,t)&&this.tbarAlign&&(this.removePositioning(),this.add(t,uo)),"hidden"===e.style.overflow&&(e.style.overflow=""),"msie"!==Ae.d.info.name&&"auto"===e.style.height||(e.style.height="auto");break;case"Extended":this.add(this.element,bo),(this.checkOverflow(e,t)||i)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(t)}}setOverflowAttributes(e){this.createPopupEle(e,[].slice.call(Object(Ae.ib)("."+Wn+" ."+Gn,e))),this.element.querySelector(".e-hor-nav").setAttribute("tabIndex","0"),this.element.querySelector(".e-hor-nav").setAttribute("role","list")}separator(){const e=this.element,t=[].slice.call(e.querySelectorAll(".e-separator")),i=e.querySelector(".e-multirow-separator"),s=e.querySelector(".e-extended-separator"),n="MultiRow"===this.overflowMode?i:s;null!==n&&("MultiRow"===this.overflowMode?n.classList.remove(mo):"Extended"===this.overflowMode&&n.classList.remove(go));for(let o=0;o<=t.length-1;o++)t[o].offsetLeft<30&&0!==t[o].offsetLeft&&("MultiRow"===this.overflowMode?t[o].classList.add(mo):"Extended"===this.overflowMode&&t[o].classList.add(go))}createPopupEle(e,t){let i=e.querySelector(".e-hor-nav");const s=this.isVertical;i||this.createPopupIcon(e),i=e.querySelector(".e-hor-nav");const n=(s?e.offsetHeight:e.offsetWidth)-(s?i.offsetHeight:i.offsetWidth);this.element.classList.remove("e-rtl"),Object(Ae.kb)(this.element,{direction:"initial"}),this.checkPriority(e,t,n,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()}pushingPoppedEle(e,t,i,s,n){const o=e.element,r=[].slice.call(Object(Ae.ib)("."+ro,o.querySelector("."+Wn)));let l=Object(Ae.ib)(".e-overflow-show",i),a=0,h=0;r.forEach((o,r)=>{l=Object(Ae.ib)(".e-overflow-show",i),o.classList.contains(eo)&&l.length>0?e.tbResize&&l.length>r?(i.insertBefore(o,l[r]),++h):(i.insertBefore(o,i.children[l.length]),++h):o.classList.contains(eo)||e.tbResize&&o.classList.contains(to)&&i.children.length>0&&0===l.length?(i.insertBefore(o,i.firstChild),++h):o.classList.contains(to)?t.push(o):e.tbResize?(i.insertBefore(o,i.childNodes[a+h]),++a):i.appendChild(o),o.classList.contains(Un)?Object(Ae.kb)(o,{display:"",height:n+"px"}):Object(Ae.kb)(o,{display:"",height:s+"px"})}),t.forEach(e=>{i.appendChild(e)});const c=Object(Ae.ib)("."+Gn,o.querySelector("."+Wn));for(let d=c.length-1;d>=0;d--){const e=c[d];if(!e.classList.contains(Un)||"Extended"===this.overflowMode)break;Object(Ae.kb)(e,{display:"none"})}}createPopup(){const e=this.element;let t,i;"Extended"===this.overflowMode&&(i=e.querySelector(".e-separator:not(."+ro+")"),t="auto"===e.style.height||""===e.style.height?null:i.offsetHeight);const s=e.querySelector(".e-toolbar-item:not(.e-separator):not(."+ro+")"),n="auto"===e.style.height||""===e.style.height?null:s&&s.offsetHeight;let o;if(Object(Ae.hb)("#"+e.id+"_popup."+oo,e))o=Object(Ae.hb)("#"+e.id+"_popup."+oo,e);else{const t=this.createElement("div",{id:e.id+"_popup",className:"e-toolbar-pop e-toolbar-extended"}),i=this.createElement("div",{id:e.id+"_popup",className:oo});o="Extended"===this.overflowMode?t:i}this.pushingPoppedEle(this,[],o,n,t),this.popupInit(e,o)}getElementOffsetY(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight}popupInit(e,t){if(this.popObj){const e=this.popObj.element;Object(Ae.kb)(e,{maxHeight:"",display:"block"}),Object(Ae.kb)(e,{maxHeight:e.offsetHeight+"px",display:""})}else{e.appendChild(t),Object(Ae.kb)(this.element,{overflow:""});const i=window.getComputedStyle(this.element),s=new Pt(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(s.appendTo(t),"Extended"===this.overflowMode&&(s.width=parseFloat(i.width)+2*parseFloat(i.borderRightWidth),s.offsetX=0),Ae.l.add(document,"scroll",this.docEvent.bind(this)),Ae.l.add(document,"click ",this.docEvent.bind(this)),s.element.style.maxHeight=s.element.offsetHeight+"px",this.isVertical&&(s.element.style.visibility="hidden"),this.isExtendedOpen){const e=this.element.querySelector(".e-hor-nav");e.classList.add(lo),Object(Ae.y)(e.firstElementChild,[Kn],[Yn]),this.element.querySelector(".e-toolbar-extended").classList.add(Xn)}else s.hide();this.popObj=s,this.element.setAttribute("aria-haspopup","true")}}tbarPopupHandler(e){"Extended"===this.overflowMode&&(e?this.add(this.element,fo):this.remove(this.element,fo))}popupOpen(e){const t=this.popObj;this.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());const i=this.popObj.element,s=this.popObj.element.parentElement,n=s.querySelector(".e-hor-nav");Object(Ae.kb)(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px","Extended"===this.overflowMode&&(t.element.style.minHeight="");const o=i.offsetTop+i.offsetHeight+tt(s).top,r=n.firstElementChild;n.classList.add(lo),Object(Ae.y)(r,[Kn],[Yn]),this.tbarPopupHandler(!0);const l=Object(Ae.T)(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+l<o&&this.element.offsetTop<i.offsetHeight){let e=i.offsetHeight-(o-window.innerHeight-l+5);t.height=e+"px";for(let t=0;t<=i.childElementCount;t++){const s=i.children[t];if(s.offsetTop+s.offsetHeight>e){e=s.offsetTop;break}}Object(Ae.kb)(t.element,{maxHeight:e+"px"})}else if(this.isVertical){const e=this.element.getBoundingClientRect();Object(Ae.kb)(t.element,{maxHeight:e.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(t){const e=i.getBoundingClientRect();e.right>document.documentElement.clientWidth&&e.width>s.getBoundingClientRect().width&&(t.collision={Y:"none"},t.dataBind()),t.refreshPosition()}}popupClose(e){const t=this.element.querySelector(".e-hor-nav"),i=t.firstElementChild;t.classList.remove(lo),Object(Ae.y)(i,[Yn],[Kn]),this.tbarPopupHandler(!1)}checkPriority(e,t,i,s){const n=this.popupPriCount>0,o=i;let r,l,a=0,h=0,c=0;const d=(e,t)=>{let i=!1;return t.forEach(t=>{e.classList.contains(t)&&(i=!0)}),i};for(let p=t.length-1;p>=0;p--){let e;const o=window.getComputedStyle(t[p]);this.isVertical?(e=parseFloat(o.marginTop),e+=parseFloat(o.marginBottom)):(e=parseFloat(o.marginRight),e+=parseFloat(o.marginLeft));const u=t[p]===this.tbarEle[0];u&&(this.tbarEleMrgn=e),r=this.isVertical?t[p].offsetHeight:t[p].offsetWidth;const m=u?r+e:r;if(d(t[p],[ho])&&n&&(t[p].classList.add(ro),this.isVertical?Object(Ae.kb)(t[p],{display:"none",minHeight:m+"px"}):Object(Ae.kb)(t[p],{display:"none",minWidth:m+"px"}),c++),l=this.isVertical?t[p].offsetTop+t[p].offsetHeight+e>i:t[p].offsetLeft+t[p].offsetWidth+e>i,l){if(t[p].classList.contains(Un)){if("Extended"===this.overflowMode)h===c&&d(t[p],[Un,ao])&&(t[p].classList.add(ro),c++),h++;else if("Popup"===this.overflowMode){if(a>0&&h===c){const e=t[p+h+(a-1)];d(e,[Un,ao])&&Object(Ae.kb)(e,{display:"none"})}a++,h=0,c=0}}else h++;t[p].classList.contains(eo)&&s||d(t[p],[Un,ao])?i-=(this.isVertical?t[p].offsetHeight:t[p].offsetWidth)+e:(t[p].classList.add(ro),this.isVertical?Object(Ae.kb)(t[p],{display:"none",minHeight:m+"px"}):Object(Ae.kb)(t[p],{display:"none",minWidth:m+"px"}),c++)}}if(s){const t=Object(Ae.ib)("."+Gn+":not(."+ro+")",this.element);this.checkPriority(e,t,o,!1)}}createPopupIcon(e){const t=e.id.concat("_nav");let i="e-"+e.id.concat("_nav e-hor-nav");i="Extended"===this.overflowMode?i+" e-expended-nav":i;const s=this.createElement("div",{id:t,className:i});"msie"!==Ae.d.info.name&&"edge"!==Ae.d.info.name||s.classList.add("e-ie-align");const n=this.createElement("div",{className:Yn+" e-icons"});s.appendChild(n),s.setAttribute("tabindex","0"),s.setAttribute("role","list"),e.appendChild(s)}tbarPriRef(e,t,i,s,n,o,r,l){const a=l,h=this.popObj.element,c=Object(Ae.ib)(".e-toolbar-popup:not(.e-overflow-show)",h).length,d=(e,t)=>e.classList.contains(t);if(0===Object(Ae.ib)(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){const l=e.children[t-(t-i)-1],h=!Object(Ae.T)(l)&&d(l,ao);if(!Object(Ae.T)(l)&&d(l,Un)&&!Object(Ae.X)(l)||h){const h="none";l.style.display="inherit";const c=l.offsetWidth+2*parseFloat(window.getComputedStyle(l).marginRight),d=l.previousElementSibling;o+c<r||n?(e.insertBefore(s,e.children[t+a-(t-i)]),Object(Ae.T)(d)||(d.style.display="")):d.classList.contains(Un)&&(d.style.display=h),l.style.display=""}else e.insertBefore(s,e.children[t+a-(t-i)])}else e.insertBefore(s,e.children[t+a-c])}popupRefresh(e,t){const i=this.element,s=this.isVertical,n=i.querySelector("."+Wn);let o,r=i.querySelector(".e-hor-nav");if(Object(Ae.T)(r))return;n.removeAttribute("style"),e.style.display="block",o=s?i.offsetHeight-(r.offsetHeight+n.offsetHeight):i.offsetWidth-(r.offsetWidth+n.offsetWidth);let l=0;[].slice.call(e.children).forEach(e=>{l+=this.popupEleWidth(e),Object(Ae.kb)(e,{position:""})}),o+(s?r.offsetHeight:r.offsetWidth)>l&&0===this.popupPriCount&&(t=!0),this.popupEleRefresh(o,e,t),e.style.display="",0===e.children.length&&r&&this.popObj&&(Object(Ae.F)(r),r=null,this.popObj.destroy(),Object(Ae.F)(this.popObj.element),this.popObj=null,i.setAttribute("aria-haspopup","false"))}ignoreEleFetch(e,t){const i=[].slice.call(t.querySelectorAll(".e-ignore")),s=[];let n=0;return i.length>0?(i.forEach(e=>{s.push([].slice.call(t.children).indexOf(e))}),s.forEach(t=>{t<=e&&n++}),n):0}checkPopupRefresh(e,t){t.style.display="block";const i=this.popupEleWidth(t.firstElementChild);t.firstElementChild.style.removeProperty("Position");const s=e.offsetWidth-e.querySelector(".e-hor-nav").offsetWidth,n=e.querySelector("."+Wn).offsetWidth;return t.style.removeProperty("display"),s>i+n}popupEleWidth(e){e.style.position="absolute";let t=this.isVertical?e.offsetHeight:e.offsetWidth;const i=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains(Zn)){const s=e.children[0];!Object(Ae.T)(i)&&e.classList.contains(Zn)?i.style.display="none":!Object(Ae.T)(i)&&e.classList.contains(Jn)&&(i.style.display="block"),s.style.minWidth="0%",t=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),s.style.minWidth="",s.style.minHeight="",Object(Ae.T)(i)||(i.style.display="")}return t}popupEleRefresh(e,t,i){const s=this.popupPriCount>0;let n,o,r=this.tbarEle,l=this.element.querySelector("."+Wn),a=0;for(const h of[].slice.call(t.children)){if(h.classList.contains(ho)&&s&&!i)continue;let t=this.popupEleWidth(h);if(h===this.tbarEle[0]&&(t+=this.tbarEleMrgn),h.style.position="",!(t<e||i))break;{if(Object(Ae.kb)(h,{minWidth:"",height:"",minHeight:""}),h.classList.contains(to)||h.classList.remove(ro),o=this.tbarEle.indexOf(h),this.tbarAlign){const e=this.items[o].align;o=this.tbarAlgEle[(e+"s").toLowerCase()].indexOf(h),r=this.tbarAlgEle[(e+"s").toLowerCase()],l=this.element.querySelector("."+Wn+" .e-toolbar-"+e.toLowerCase())}let s=0;"Extended"!==this.overflowMode&&r.slice(0,o).forEach(t=>{(t.classList.contains(eo)||t.classList.contains(Un))&&(t.classList.contains(Un)&&(t.style.display="",e-=t.offsetWidth),s++)}),a=this.ignoreEleFetch(o,l),h.classList.contains(eo)?(this.tbarPriRef(l,o,s,h,i,t,e,a),e-=h.offsetWidth):0===o?(l.insertBefore(h,l.firstChild),e-=h.offsetWidth):(n=Object(Ae.ib)(".e-overflow-show",this.popObj.element).length,l.insertBefore(h,l.children[o+a-n]),e-=h.offsetWidth),h.style.height=""}}this.checkOverflow(this.element,this.element.getElementsByClassName(Wn)[0])&&!i&&this.renderOverflowMode()}removePositioning(){const e=this.element.querySelector("."+Wn);if(Object(Ae.T)(e)||!e.classList.contains(no))return;this.remove(e,no);const t=[].slice.call(e.childNodes);t[1].removeAttribute("style"),t[2].removeAttribute("style")}refreshPositioning(){const e=this.element.querySelector("."+Wn);this.add(e,no),this.itemPositioning()}itemPositioning(){const e=this.element.querySelector("."+Wn);let t;if(Object(Ae.T)(e)||!e.classList.contains(no))return;const i=this.element.querySelector(".e-hor-nav");let s;s=[].slice.call(this.scrollModule?e.querySelector("."+(this.isVertical?"e-vscroll-content":"e-hscroll-content")).children:e.childNodes),t=this.isVertical?s[0].offsetHeight+s[2].offsetHeight:s[0].offsetWidth+s[2].offsetWidth;let n=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(i){n-=this.isVertical?i.offsetHeight:i.offsetWidth;const e=(this.isVertical?i.offsetHeight:i.offsetWidth)+"px";s[2].removeAttribute("style"),this.isVertical?this.enableRtl?s[2].style.top=e:s[2].style.bottom=e:this.enableRtl?s[2].style.left=e:s[2].style.right=e}if(n<=t)return;const o=(n-t-(this.isVertical?s[1].offsetHeight:s[1].offsetWidth))/2;s[1].removeAttribute("style");const r=(this.isVertical?s[0].offsetHeight:s[0].offsetWidth)+o+"px";this.isVertical?this.enableRtl?s[1].style.marginBottom=r:s[1].style.marginTop=r:this.enableRtl?s[1].style.marginRight=r:s[1].style.marginLeft=r}tbarItemAlign(e,t,i){if(e.showAlwaysInPopup&&"Show"!==e.overflow)return;const s=[];if(s.push(this.createElement("div",{className:"e-toolbar-left"})),s.push(this.createElement("div",{className:so})),s.push(this.createElement("div",{className:"e-toolbar-right"})),0===i&&"Left"!==e.align)s.forEach(e=>{t.appendChild(e)}),this.tbarAlign=!0,this.add(t,no);else if("Left"!==e.align){const e=s[0];[].slice.call(t.childNodes).forEach(t=>{this.tbarAlgEle.lefts.push(t),e.appendChild(t)}),t.appendChild(e),t.appendChild(s[1]),t.appendChild(s[2]),this.tbarAlign=!0,this.add(t,no)}}ctrlTemplate(){this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,Wn),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(e=>{"DIV"===e.tagName&&(this.tbarEle.push(e),e.setAttribute("aria-disabled","false"),this.add(e,Gn))})}renderItems(){const e=this.element,t=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(e&&t.length>0){let i;e&&e.children.length>0&&(i=e.querySelector("."+Wn)),i||(i=this.createElement("div",{className:Wn})),this.itemsAlign(t,i),e.appendChild(i)}}setAttr(e,t){const i=Object.keys(e);let s;for(let n=0;n<i.length;n++)s=i[n],"class"===s?this.add(t,e[s]):t.setAttribute(s,e[s])}enableItems(e,t){const i=e,s=i.length;let n;Object(Ae.T)(t)&&(t=!0);const o=(e,t)=>{e?(t.classList.remove($n),t.setAttribute("aria-disabled","false")):(t.classList.add($n),t.setAttribute("aria-disabled","true"))};if(!Object(Ae.T)(s)&&s>=1){for(let e=0,r=[].slice.call(i);e<s;e++){const s=r[e];if("number"==typeof s){if(n=this.getElementByIndex(s),Object(Ae.T)(n))return;i[e]=n}else n=s;o(t,n)}t?Object(Ae.eb)(i,$n):Object(Ae.u)(i,$n)}else{if("number"==typeof i){if(n=this.getElementByIndex(i),Object(Ae.T)(n))return}else n=e;o(t,n)}}getElementByIndex(e){return this.tbarEle[e]?this.tbarEle[e]:null}addItems(e,t){let i;this.extendedOpen();const s=this.element.querySelector("."+Wn);if(Object(Ae.T)(s))return void this.itemsRerender(e);let n,o="Left";Object(Ae.T)(t)&&(t=0),e.forEach(e=>{Object(Ae.T)(e.align)||"Left"===e.align||"Left"!==o||(o=e.align)});for(const r of e)if(Object(Ae.T)(r.type)&&(r.type="Button"),i=Object(Ae.ib)("."+Gn,this.element),r.align=o,n=this.renderSubComponent(r,t),this.tbarEle.length>=t&&i.length>=0){Object(Ae.T)(this.scrollModule)&&this.destroyMode();const e="L"===r.align[0]?0:"C"===r.align[0]?1:2;let l;this.tbarAlign||"Left"===o?this.tbarAlign?(l=Object(Ae.A)(i[0],"."+Wn).children[e],l.insertBefore(n,l.children[t]),this.tbarAlgEle[(r.align+"s").toLowerCase()].splice(t,0,n),this.refreshPositioning()):0===i.length?(i=Object(Ae.ib)("."+Wn,this.element),i[0].appendChild(n)):i[0].parentNode.insertBefore(n,i[t]):(this.tbarItemAlign(r,s,1),this.tbarAlign=!0,l=Object(Ae.A)(i[0],"."+Wn).children[e],l.appendChild(n),this.tbarAlgEle[(r.align+"s").toLowerCase()].push(n),this.refreshPositioning()),this.items.splice(t,0,r),this.tbarEle.splice(t,0,n),t++,this.offsetWid=s.offsetWidth}s.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}removeItems(e){const t=e;let i,s=[].slice.call(Object(Ae.ib)("."+Gn,this.element));if("number"==typeof t)i=parseInt(e.toString(),10),this.removeItemByIndex(i,s);else if(t&&t.length>1)for(const n of[].slice.call(t))i=this.tbarEle.indexOf(n),this.removeItemByIndex(i,s),s=Object(Ae.ib)("."+Gn,this.element);else i=s.indexOf(t&&t.length&&1===t.length?t[0]:e),this.removeItemByIndex(i,s);this.resize()}removeItemByIndex(e,t){if(this.tbarEle[e]&&t[e]){const i=this.tbarEle.indexOf(t[e]);if(this.tbarAlign){const e=this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].indexOf(this.tbarEle[i]);this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].splice(e,1)}this.isReact&&this.clearTemplate();const s=t[e].querySelector(".e-control.e-btn");Object(Ae.T)(s)||Object(Ae.T)(s.ej2_instances[0])||s.ej2_instances[0].isDestroyed||s.ej2_instances[0].destroy(),Object(Ae.F)(t[e]),this.items.splice(i,1),this.tbarEle.splice(i,1)}}templateRender(e,t,i,s){const n=e;let o;if("object"==typeof e&&(o="function"==typeof n.appendTo),"string"!=typeof e&&o){if("Input"===i.type){const e=this.createElement("input");e.id=i.id?i.id:Object(Ae.Q)("tbr-ipt"),t.appendChild(e),n.appendTo(e)}}else{let i,n,o=e;o="string"==typeof e?e.trim():e;try{if("object"!=typeof e||Object(Ae.T)(e.tagName)){if(document.querySelectorAll(o).length){const e=document.querySelector(o),i=e.outerHTML.trim();t.appendChild(e),e.style.display="",Object(Ae.T)(i)||this.tempId.push(o)}}else t.appendChild(e)}catch(r){i=Object(Ae.C)(o)}Object(Ae.T)(i)||(n=i({},this,"template",this.element.id+s+"_template",this.isStringTemplate)),!Object(Ae.T)(n)&&n.length>0&&[].slice.call(n).forEach(e=>{Object(Ae.T)(e.tagName)||(e.style.display=""),t.appendChild(e)})}this.add(t,Qn),this.tbarEle.push(t)}buttonRendering(e,t){const i=this.createElement("button",{className:"e-tbar-btn"});i.setAttribute("type","button");const s=e.text;let n,o;i.id=e.id?e.id:Object(Ae.Q)("e-tbr-btn");const r=this.createElement("span",{className:"e-tbar-btn-text"});s?(r.innerHTML=this.enableHtmlSanitizer?Ae.s.sanitize(s):s,i.appendChild(r),i.classList.add("e-tbtn-txt")):this.add(t,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(n=e.prefixIcon+" e-icons",o="Left"):(n=e.suffixIcon+" e-icons",o="Right"));const l=new Ue.a({iconCss:n,iconPosition:o});return l.createElement=this.createElement,l.appendTo(i),e.width&&Object(Ae.kb)(i,{width:Object(Ae.H)(e.width)}),i}renderSubComponent(e,t){let i;const s=this.createElement("div",{className:Gn});s.setAttribute("aria-disabled","false");const n=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?Ae.s.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,s),e.tooltipText&&s.setAttribute("title",n.textContent),e.cssClass&&(s.className=s.className+" "+e.cssClass),e.template)this.templateRender(e.template,s,e,t);else switch(e.type){case"Button":i=this.buttonRendering(e,s),i.setAttribute("tabindex","-1"),i.setAttribute("aria-label",e.text||e.tooltipText),s.appendChild(i),s.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(s,Un)}if(e.showTextOn){const t=e.showTextOn;"Toolbar"===t?(this.add(s,Jn),this.add(s,"e-tbtn-align")):"Overflow"===t&&this.add(s,Zn)}if(e.overflow){const t=e.overflow;"Show"===t?this.add(s,eo):"Hide"===t&&(s.classList.contains(Un)||this.add(s,to))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!s.classList.contains(Un)&&(this.add(s,ho),this.popupPriCount++),e.disabled&&this.add(s,$n),!1===e.visible&&this.add(s,co),s}itemClick(e){this.activeEleSwitch(e.currentTarget)}activeEleSwitch(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()}activeEleRemove(e){Object(Ae.T)(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=e,Object(Ae.T)(this.trgtEle)&&!e.parentElement.classList.contains(Qn)?e.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")}getPersistData(){return this.addOnPersist([])}getModuleName(){return"toolbar"}itemsRerender(e){this.items=this.tbarItemsCol,this.isReact&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}resize(){const e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();const t=this.checkOverflow(e,e.getElementsByClassName(Wn)[0]);if(!t){this.destroyScroll();const t=e.querySelector("."+Wn);Object(Ae.T)(t)||(this.remove(t,uo),this.tbarAlign&&this.add(t,no))}if(!t||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||t)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){const e=window.getComputedStyle(this.element);this.popObj.width=parseFloat(e.width)+2*parseFloat(e.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector(".e-hscroll-bar")&&(this.scrollStep=this.element.querySelector(".e-hscroll-bar").offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}}extendedOpen(){const e=this.element.querySelector(".e-toolbar-extended");"Extended"===this.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains(Xn))}onPropertyChanged(e,t){const i=this.element,s=i.offsetWidth;this.extendedOpen();for(const n of Object.keys(e))switch(n){case"items":if(e.items instanceof Array&&t.items instanceof Array)this.itemsRerender(e.items);else{const t=Object.keys(e.items);for(let s=0;s<t.length;s++){const t=parseInt(Object.keys(e.items)[s],10),n=Object.keys(e.items[t])[0],o=Object(e.items[t])[n];if("function"!=typeof o){if(this.tbarAlign||"align"===n){this.refresh(),this.trigger("created");break}const e="overflow"===n&&0!==this.popupPriCount;("showAlwaysInPopup"===n&&!o||this.items[t].showAlwaysInPopup&&e)&&--this.popupPriCount,Object(Ae.T)(this.scrollModule)&&this.destroyMode();const s=[].slice.call(Object(Ae.ib)("."+Wn+" ."+Gn,i));this.isReact&&this.clearTemplate(),Object(Ae.F)(s[t]),this.tbarEle.splice(t,1),this.addItems([this.items[t]],t),this.items.splice(t,1),this.items[t].template&&this.tbarEle.splice(this.items.length,1)}}}break;case"width":Object(Ae.kb)(i,{width:Object(Ae.H)(e.width)}),this.renderOverflowMode(),this.popObj&&s<i.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":Object(Ae.kb)(this.element,{height:Object(Ae.H)(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(i,_n),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(i,_n):this.remove(i,_n),Object(Ae.T)(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,_n):this.remove(this.scrollModule.element,_n)),Object(Ae.T)(this.popObj)||(e.enableRtl?this.add(this.popObj.element,_n):this.remove(this.popObj.element,_n)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":t.cssClass&&Object(Ae.eb)([this.element],t.cssClass.split(" ")),e.cssClass&&Object(Ae.u)([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent()}}hideItem(e,t){const i="object"==typeof e;let s,n,o=e;const r=[].slice.call(Object(Ae.ib)("."+Gn,this.element));if(i?n=e:this.tbarEle[o]&&(n=[].slice.call(Object(Ae.ib)("."+Gn,this.element))[o]),n){if(t?n.classList.add(co):n.classList.remove(co),t&&Object(Ae.T)(this.element.getAttribute("tabindex"))&&!n.classList.contains(Un)){if(Object(Ae.T)(n.firstElementChild.getAttribute("tabindex"))){n.firstElementChild.setAttribute("tabindex","-1");const e=[].slice.call(Object(Ae.ib)("."+Gn,this.element));i&&(o=e.indexOf(n));let t=e[++o];for(;t;){if(!this.eleContains(t)){t.firstElementChild.removeAttribute("tabindex");break}t=e[++o]}}}else if(Object(Ae.T)(this.element.getAttribute("tabindex"))&&!n.classList.contains(Un)){s=0;let e=!1,t=!1,i=r[s];for(;i;)if(i.classList.contains(Un))i=r[++s];else if(Object(Ae.T)(i.firstElementChild.getAttribute("tabindex")))i.firstElementChild.setAttribute("tabindex","-1"),e=!0;else{if(e&&t)break;this.eleContains(i)||(i.firstElementChild.removeAttribute("tabindex"),t=!0),i=r[++s]}}this.refreshOverflow()}}};return Nn([Object(Ae.f)([],yo)],e.prototype,"items",void 0),Nn([Object(Ae.r)("auto")],e.prototype,"width",void 0),Nn([Object(Ae.r)("auto")],e.prototype,"height",void 0),Nn([Object(Ae.r)("")],e.prototype,"cssClass",void 0),Nn([Object(Ae.r)("Scrollable")],e.prototype,"overflowMode",void 0),Nn([Object(Ae.r)()],e.prototype,"scrollStep",void 0),Nn([Object(Ae.r)(!0)],e.prototype,"enableCollision",void 0),Nn([Object(Ae.r)(!0)],e.prototype,"enableHtmlSanitizer",void 0),Nn([Object(Ae.r)(!0)],e.prototype,"allowKeyboard",void 0),Nn([Object(Ae.k)()],e.prototype,"clicked",void 0),Nn([Object(Ae.k)()],e.prototype,"created",void 0),Nn([Object(Ae.k)()],e.prototype,"destroyed",void 0),Nn([Object(Ae.k)()],e.prototype,"beforeCreate",void 0),e=Nn([Ae.q],e),e})(),Co="",wo="",Oo=[],So="";var To=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let jo=(()=>{class e extends Ae.e{}return To([Object(Ae.r)()],e.prototype,"text",void 0),To([Object(Ae.r)()],e.prototype,"value",void 0),To([Object(Ae.r)()],e.prototype,"iconCss",void 0),To([Object(Ae.r)()],e.prototype,"groupBy",void 0),To([Object(Ae.r)()],e.prototype,"htmlAttributes",void 0),e})();const Eo="e-dropdownbase",xo="e-rtl",Ro="e-active",Do="e-hover",ko="e-nodata",Io="e-item-focus",Fo="e-list-item",Ao="e-list-group-item";let Mo=(()=>{let e=class extends Ae.h{constructor(e,t){super(e,t),this.preventChange=!1,this.isAngular=!1,this.isPreventChange=!1,this.isDynamicDataChange=!1}getPropObject(e,t,i){const s=new Object,n=new Object;s[e]=t[e],n[e]=i[e];const o=new Object;return o.newProperty=s,o.oldProperty=n,o}getValueByText(e,t,i){let s=null;return Object(Ae.T)(this.listData)||(s=this.checkValueCase(e,!!t,i)),s}checkValueCase(e,t,i,s){let n=null;s&&(n=e);const o=this.listData,r=this.fields,l=this.typeOfData(o).typeof;if("string"===l||"number"===l||"boolean"===l)for(const a of o)Object(Ae.T)(a)||(i?n=this.checkingAccent(String(a),e,t):t?this.checkIgnoreCase(String(a),e)&&(n=this.getItemValue(String(a),e,t)):this.checkNonIgnoreCase(String(a),e)&&(n=this.getItemValue(String(a),e,t,s)));else if(t)o.filter(t=>{const i=Object(Ae.R)(r.value,t);!Object(Ae.T)(i)&&this.checkIgnoreCase(Object(Ae.R)(r.text,t).toString(),e)&&(n=Object(Ae.R)(r.value,t))});else if(s){let e=null;e=n,o.filter(t=>{const i=Object(Ae.R)(r.value,t);Object(Ae.T)(i)||Object(Ae.T)(n)||i.toString()!==e.toString()||(n=Object(Ae.R)(r.text,t))})}else o.filter(t=>{this.checkNonIgnoreCase(Object(Ae.R)(r.text,t),e)&&(n=Object(Ae.R)(r.value,t))});return n}checkingAccent(e,t,i){const s=_e.b.ignoreDiacritics(String(e)),n=_e.b.ignoreDiacritics(t.toString());let o=null;return i?this.checkIgnoreCase(s,n)&&(o=this.getItemValue(String(e),t,i)):this.checkNonIgnoreCase(String(e),t)&&(o=this.getItemValue(String(e),t,i)),o}checkIgnoreCase(e,t){return String(e).toLowerCase()===t.toString().toLowerCase()}checkNonIgnoreCase(e,t){return String(e)===t.toString()}getItemValue(e,t,i,s){let n=null;const o=this.typeOfData(this.listData).typeof;return n=s?e.toString():i?"string"===o?String(e):this.getFormattedValue(String(e)):"string"===o?t:this.getFormattedValue(t),n}templateCompiler(e){let t=!1;if(e)try{t=!!Object(Ae.ib)(e,document).length}catch(i){t=!1}return t}l10nUpdate(e){const t="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){const i=e?this.actionFailureTemplate:this.noRecordsTemplate;let s;const n=e?this.actionFailureTemplateId:this.noRecordsTemplateId;t.innerHTML="",s=this.templateCompiler(i)?Object(Ae.C)(Object(Ae.hb)(i,document).innerHTML.trim()):Object(Ae.C)(i);const o=s({},this,e?"actionFailureTemplate":"noRecordsTemplate",n,this.isStringTemplate,null,t);if(o&&o.length>0)for(let e=0;e<o.length;e++)t.appendChild(o[e]);this.renderReactTemplates()}else{const i={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},s=new Ae.p(this.getLocaleName(),{},this.locale);this.l10n=""!==s.getConstant("actionFailureTemplate")?s:new Ae.p("listbox"===this.getModuleName()?"listbox":"dropdowns",i,this.locale);const n=this.l10n.getConstant(e?"actionFailureTemplate":"noRecordsTemplate");if("listbox"===this.getModuleName()){const e=this.createElement("li");e.textContent=n,t.appendChild(e),e.classList.add("e-list-nrt")}else t.innerHTML=n}}getLocaleName(){return"drop-down-base"}getTextByValue(e){return this.checkValueCase(e,!1,!1,!0)}getFormattedValue(e){if(this.listData&&this.listData.length){const t=this.typeOfData(this.listData);if("number"==typeof Object(Ae.R)(this.fields.value?this.fields.value:"value",t.item)||"number"===t.typeof)return parseFloat(e);if("boolean"==typeof Object(Ae.R)(this.fields.value?this.fields.value:"value",t.item)||"boolean"===t.typeof)return"true"===e||""+e=="true"}return e}setEnableRtl(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?Object(Ae.u)(this.enableRtlElements,xo):Object(Ae.eb)(this.enableRtlElements,xo)}initialize(){if(this.bindEvent=!0,this.actionFailureTemplateId=`${this.element.id}ActionFailureTemplate`,"UL"===this.element.tagName){const e=yn.a.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(e,this.fields)}else"SELECT"===this.element.tagName?(this.dataSource instanceof Array?this.dataSource.length>0:!Object(Ae.T)(this.dataSource))?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect():this.setListData(this.dataSource,this.fields,this.query)}getPersistData(){return this.addOnPersist([])}setEnabled(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")}updateDataAttribute(e){const t=["class","style","id","type"],i={};for(let s=0;s<this.element.attributes.length;s++)-1!==t.indexOf(this.element.attributes[s].name)||"dropdownlist"===this.getModuleName()&&"readonly"===this.element.attributes[s].name||(i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));Object(Ae.G)(i,e,i),this.setProperties({htmlAttributes:i},!0)}renderItemsBySelect(){const e=this.element,t={value:"value",text:"text"},i=[],s=e.querySelectorAll("select>optgroup"),n=e.querySelectorAll("select>option");if(this.getJSONfromOption(i,n,t),s.length){for(let e=0;e<s.length;e++){const n=s[e],o={};o[t.text]=n.label,o.isHeader=!0;const r=n.querySelectorAll("option");i.push(o),this.getJSONfromOption(i,r,t)}e.querySelectorAll("select>option")}this.updateFields(t.text,t.value,this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss),this.resetList(i,t)}updateFields(e,t,i,s,n){const o={fields:{text:e,value:t,groupBy:Object(Ae.T)(i)?this.fields&&this.fields.groupBy:i,htmlAttributes:Object(Ae.T)(s)?this.fields&&this.fields.htmlAttributes:s,iconCss:Object(Ae.T)(n)?this.fields&&this.fields.iconCss:n}};this.setProperties(o,!0)}getJSONfromOption(e,t,i){for(const s of t){const t={};t[i.text]=s.innerText,t[i.value]=Object(Ae.T)(s.getAttribute(i.value))?s.innerText:s.getAttribute(i.value),e.push(t)}}preRender(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=`${this.element.id}ItemTemplate`,this.valueTemplateId=`${this.element.id}ValueTemplate`,this.groupTemplateId=`${this.element.id}GroupTemplate`,this.headerTemplateId=`${this.element.id}HeaderTemplate`,this.footerTemplateId=`${this.element.id}FooterTemplate`,this.noRecordsTemplateId=`${this.element.id}NoRecordsTemplate`}setListData(e,t,i){let s;t=t||this.fields,this.isActive=!0;const n={cancel:!1,data:e,query:i};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionBegin",n,i=>{if(!i.cancel)if(this.showSpinner(),e instanceof _e.a){if(this.isRequested=!0,this.isDataFetched)return void this.emptyDataRequest(t);i.data.executeQuery(this.getQuery(i.query)).then(e=>{this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionComplete",e,e=>{if(!e.cancel){const i=e.result;0===i.length&&(this.isDataFetched=!0),s=this.renderItems(i,t),this.onActionComplete(s,i,e),this.groupTemplate&&this.renderGroupTemplate(s),this.isRequested=!1,this.bindChildItems(i,s,t,e)}})}).catch(e=>{this.isRequested=!1,this.onActionFailure(e),this.hideSpinner()})}else{const e=new _e.a(i.data),n={cancel:!1,result:this.getQuery(i.query).executeLocal(e)};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionComplete",n,e=>{e.cancel||(s=this.renderItems(e.result,t),this.onActionComplete(s,e.result),this.groupTemplate&&this.renderGroupTemplate(s),this.bindChildItems(e.result,s,t))})}})}bindChildItems(e,t,i,s){e.length>=100&&"autocomplete"===this.getModuleName()?setTimeout(()=>{const n=this.remainingItems(this.sortedData,i);Object(Ae.v)(n,t),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.updateListValues(),this.raiseDataBound(e,s)},0):this.raiseDataBound(e,s)}updateListValues(){}findListElement(e,t,i,s){let n=null;if(e){const o=[].slice.call(e.querySelectorAll(t));for(let e=0;e<o.length;e++)if(o[e].getAttribute(i)===s+""){n=o[e];break}}return n}raiseDataBound(e,t){this.hideSpinner(),this.trigger("dataBound",{items:e,e:t})}remainingItems(e,t){const i=new _e.a(e).executeLocal((new _e.e).skip(100));if(this.itemTemplate){const e=this.templateListItem(i,t);return[].slice.call(e.childNodes)}const s=this.typeOfData(i).typeof;return"string"===s||"number"===s||"boolean"===s?yn.a.createListItemFromArray(this.createElement,i,!0,this.listOption(i,t),this):yn.a.createListItemFromJson(this.createElement,i,this.listOption(i,t),1,!0,this)}emptyDataRequest(e){const t=[];this.onActionComplete(this.renderItems(t,e),t),this.isRequested=!1,this.hideSpinner()}showSpinner(){}hideSpinner(){}onActionFailure(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),Object(Ae.u)([this.list],ko)}onActionComplete(e,t,i){this.listData=t,this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.list.innerHTML="",this.fixedHeaderElement=Object(Ae.T)(this.fixedHeaderElement)?this.fixedHeaderElement:null,this.list.appendChild(e),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,t,this.bindEvent)}postRender(e,t,i){const s=e.querySelector(".e-list-item"),n=e.querySelector(".e-active");s&&!n&&s.classList.add(Io),t.length<=0?(this.l10nUpdate(),Object(Ae.u)([e],ko)):e.classList.remove(ko)}getQuery(e){return e||(this.query?this.query:new _e.e)}renderGroupTemplate(e){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector(".e-list-group-item")){const t=this.dataSource,i={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},s=e.querySelectorAll(".e-list-group-item");if(this.templateCompiler(this.groupTemplate)){const e=Object(Ae.hb)(this.groupTemplate,document).innerHTML.trim();yn.a.renderGroupTemplate(e,t,this.fields.properties,s,i,this)}else yn.a.renderGroupTemplate(this.groupTemplate,t,this.fields.properties,s,i,this);this.renderReactTemplates()}}createListItems(e,t){e&&t.groupBy||this.element.querySelector("optgroup")?(t.groupBy&&("None"!==this.sortOrder&&(e=this.getSortedDataSource(e)),e=yn.a.groupDataSource(e,t.properties,this.sortOrder)),Object(Ae.u)([this.list],"e-dd-group")):e=this.getSortedDataSource(e);const i=this.listOption(e,t),s=e.length>100?new _e.a(e).executeLocal((new _e.e).take(100)):e;return this.sortedData=e,yn.a.createList(this.createElement,"autocomplete"===this.getModuleName()?s:e,i,!0,this)}listOption(e,t){const i=!Object(Ae.T)(t.iconCss),s=Object(Ae.T)(t.properties)?t:t.properties,n=null!==t.text||null!==t.value?{fields:s,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}};return Object(Ae.G)({},n,t,!0)}setFloatingHeader(e){Object(Ae.T)(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(Ao)||(this.fixedHeaderElement.style.display="none"),Object(Ae.bb)([this.fixedHeaderElement],this.list),this.setFixedHeader()),Object(Ae.T)(this.fixedHeaderElement)||"0"!==this.fixedHeaderElement.style.zIndex||this.setFixedHeader(),this.scrollStop(e)}scrollStop(e){let t=Object(Ae.T)(e)?this.list:e.target,i=parseInt(getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),10);const s=Math.round(t.scrollTop/i),n=this.list.querySelectorAll("li:not(.e-hide-listitem)");for(let o=s;o>-1;o--){if(!Object(Ae.T)(n[o])&&n[o].classList.contains(Ao)){this.fixedHeaderElement.innerHTML=n[o].innerHTML,this.fixedHeaderElement.style.top=t.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}}getValidLi(){return this.liCollections[0]}renderItems(e,t){let i;if(this.itemTemplate&&e){let s=e;s&&t.groupBy?("None"!==this.sortOrder&&(s=this.getSortedDataSource(s)),s=yn.a.groupDataSource(s,t.properties,this.sortOrder)):s=this.getSortedDataSource(s),this.sortedData=s;const n=s.length>100?new _e.a(s).executeLocal((new _e.e).take(100)):s;i=this.templateListItem("autocomplete"===this.getModuleName()?n:s,t)}else i=this.createListItems(e,t);return i}templateListItem(e,t){const i=this.listOption(e,t);if(i.templateID=this.itemTemplateId,i.isStringTemplate=this.isStringTemplate,this.templateCompiler(this.itemTemplate)){const s=Object(Ae.hb)(this.itemTemplate,document).innerHTML.trim();return yn.a.renderContentTemplate(this.createElement,s,e,t.properties,i,this)}return yn.a.renderContentTemplate(this.createElement,this.itemTemplate,e,t.properties,i,this)}typeOfData(e){for(let t=0;!Object(Ae.T)(e)&&t<e.length;t++)if(!Object(Ae.T)(e[t])&&!("string"==typeof e[t]||"number"==typeof e[t]||"boolean"==typeof e[t]?Object(Ae.T)(e[t]):Object(Ae.T)(Object(Ae.R)(this.fields.value?this.fields.value:"value",e[t]))))return{typeof:typeof e[t],item:e[t]};return{typeof:null,item:null}}setFixedHeader(){this.list.parentElement.style.display="block";let e=0;this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(e))&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10));const t=this.getValidLi().offsetWidth-e;this.fixedHeaderElement.style.width=t.toString()+"px",Object(Ae.kb)(this.fixedHeaderElement,{zIndex:10});const i=this.ulElement.querySelector(".e-list-group-item:not(.e-hide-listitem)");this.fixedHeaderElement.innerHTML=i.innerHTML}getSortedDataSource(e){if(e&&"None"!==this.sortOrder){let t=this.fields.text?this.fields.text:"text";"string"!==this.typeOfData(e).typeof&&"number"!==this.typeOfData(e).typeof&&"boolean"!==this.typeOfData(e).typeof||(t=""),e=yn.a.getDataSource(e,yn.a.addSorting(this.sortOrder,t))}return e}getIndexByValue(e){let t;const i=this.getItems();for(let s=0;s<i.length;s++)if(!Object(Ae.T)(e)&&i[s].getAttribute("data-value")===e.toString()){t=s;break}return t}dispatchEvent(e,t){const i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)}setFields(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):this.fields.value||this.fields.text||this.updateFields("text","text")}resetList(e,t,i){this.list&&(("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)&&!(e instanceof Array?e.length>0:!Object(Ae.T)(e))&&this.selectData&&this.selectData.length>0&&(e=this.selectData),this.setListData(e,t,i))}updateSelectElementData(e){e&&Object(Ae.T)(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)}updateSelection(){}renderList(){this.render()}updateDataSource(e){this.resetList(this.dataSource)}setUpdateInitial(e,t){this.isDataFetched=!1;const i={};for(let s=0;e.length>s;s++)t[e[s]]&&"fields"===e[s]?(this.setFields(),i[e[s]]=t[e[s]]):t[e[s]]&&(i[e[s]]=t[e[s]]);Object.keys(i).length>0&&(-1===Object.keys(i).indexOf("dataSource")&&(i.dataSource=this.dataSource),this.updateDataSource(i))}onPropertyChanged(e,t){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e),this.setUpdateInitial(["sortOrder","itemTemplate"],e);for(const i of Object.keys(e))switch(i){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){const e=this.ulElement.querySelector(".e-list-group-item");this.fixedHeaderElement.innerHTML=e.innerHTML}break;case"locale":this.list&&!Object(Ae.T)(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex()}}render(e){this.list=this.createElement("div",{className:"e-content",attrs:{tabindex:"0"}}),this.list.classList.add(Eo),this.setFields();this.rippleFun=Object(Ae.gb)(this.list,{duration:300,selector:".e-list-item"});const t=this.element.querySelector("select>optgroup");if(!this.fields.groupBy&&Object(Ae.T)(t)||this.isGroupChecking||Ae.l.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),Object(Ae.eb)([this.element],Eo),this.element.style.display="none";const e=this.createElement("div");this.element.parentElement.insertBefore(e,this.element),e.appendChild(this.element),e.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),e||this.initialize()}getModuleName(){return"dropdownbase"}getItems(){return this.ulElement.querySelectorAll(".e-list-item")}addItem(e,t){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&Object(Ae.T)(t)){let i=[].slice.call(this.listData);i.push(e),i=this.getSortedDataSource(i),this.fields.groupBy?(i=yn.a.groupDataSource(i,this.fields.properties,this.sortOrder),t=i.indexOf(e)):t=i.indexOf(e)}const i=this.getItems().length,s=this.list.querySelector(".e-active");let n;e=e instanceof Array?e:[e],n=Object(Ae.T)(t)||t<0||t>i-1?i:t;const o=this.fields;e&&o.groupBy&&(e=yn.a.groupDataSource(e,o.properties));const r=[];for(let l=0;l<e.length;l++){const i=e[l],s=i.isHeader,a=this.createElement("li",{className:s?Ao:Fo,id:"option-add-"+l}),h=i instanceof Object?Object(Ae.R)(o.text,i):i;if(s&&(a.innerText=h),this.itemTemplate&&!s){const e=Object(Ae.C)(this.itemTemplate)(i,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,a);e&&Object(Ae.v)(e,a)}else s||a.appendChild(document.createTextNode(h));a.setAttribute("data-value",i instanceof Object?Object(Ae.R)(o.value,i):i),a.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:a}),r.push(a),this.listData.push(i),"None"===this.sortOrder&&Object(Ae.T)(t)&&0===n&&(n=null),this.updateActionCompleteData(a,i,n),this.trigger("beforeItemRender",{element:a,item:i})}if(0===i&&Object(Ae.T)(this.list.querySelector("ul")))this.list.innerHTML="",this.list.classList.remove(ko),this.list.appendChild(this.ulElement),this.liCollections=r,Object(Ae.v)(r,this.ulElement),this.updateAddItemList(this.list,i);else{"listbox"===this.getModuleName()&&0===i&&(this.ulElement.innerHTML="");const s=[];for(let i=0;i<e.length;i++){const e=this.ulElement.querySelectorAll(".e-list-group-item");for(let t=0;t<e.length;t++)s[t]=e[t].innerText;if(s.indexOf(r[i].innerText)>-1&&o.groupBy){for(let n=0;n<e.length;n++)if(s[n]===r[i].innerText){this.ulElement.insertBefore(r[i+1],"None"===this.sortOrder?e[n+1]:this.ulElement.childNodes[t]),i+=1;break}}else this.liCollections[n]?this.liCollections[n].parentNode.insertBefore(r[i],this.liCollections[n]):this.ulElement.appendChild(r[i]);const l=[].slice.call(this.liCollections);l.splice(n,0,r[i]),this.liCollections=l,n+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}(s||0===t)&&this.updateSelection()}validationAttribute(e,t){const i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");const s=["required","aria-required","form"];for(let n=0;n<s.length;n++){if(!e.getAttribute(s[n]))continue;const i=e.getAttribute(s[n]);t.setAttribute(s[n],i),e.removeAttribute(s[n])}}setZIndex(){}updateActionCompleteData(e,t,i){}updateAddItemList(e,t){}updateDataList(){}getDataByValue(e){if(!Object(Ae.T)(this.listData)){const t=this.typeOfData(this.listData).typeof;if("string"===t||"number"===t||"boolean"===t){for(const i of this.listData)if(!Object(Ae.T)(i)&&i===e)return i}else for(const i of this.listData)if(!Object(Ae.T)(i)&&Object(Ae.R)(this.fields.value?this.fields.value:"value",i)===e)return i}return null}destroy(){document.body.contains(this.list)&&(Ae.l.remove(this.list,"scroll",this.setFloatingHeader),Object(Ae.T)(this.rippleFun)||this.rippleFun(),Object(Ae.F)(this.list)),super.destroy()}};return To([Object(Ae.g)({text:null,value:null,iconCss:null,groupBy:null},jo)],e.prototype,"fields",void 0),To([Object(Ae.r)(!1)],e.prototype,"enablePersistence",void 0),To([Object(Ae.r)(null)],e.prototype,"itemTemplate",void 0),To([Object(Ae.r)(null)],e.prototype,"groupTemplate",void 0),To([Object(Ae.r)("No records found")],e.prototype,"noRecordsTemplate",void 0),To([Object(Ae.r)("Request failed")],e.prototype,"actionFailureTemplate",void 0),To([Object(Ae.r)("None")],e.prototype,"sortOrder",void 0),To([Object(Ae.r)(!0)],e.prototype,"enabled",void 0),To([Object(Ae.r)([])],e.prototype,"dataSource",void 0),To([Object(Ae.r)(null)],e.prototype,"query",void 0),To([Object(Ae.r)("StartsWith")],e.prototype,"filterType",void 0),To([Object(Ae.r)(!0)],e.prototype,"ignoreCase",void 0),To([Object(Ae.r)(1e3)],e.prototype,"zIndex",void 0),To([Object(Ae.r)(!1)],e.prototype,"ignoreAccent",void 0),To([Object(Ae.r)()],e.prototype,"locale",void 0),To([Object(Ae.k)()],e.prototype,"actionBegin",void 0),To([Object(Ae.k)()],e.prototype,"actionComplete",void 0),To([Object(Ae.k)()],e.prototype,"actionFailure",void 0),To([Object(Ae.k)()],e.prototype,"select",void 0),To([Object(Ae.k)()],e.prototype,"dataBound",void 0),To([Object(Ae.k)()],e.prototype,"created",void 0),To([Object(Ae.k)()],e.prototype,"destroyed",void 0),e=To([Ae.q],e),e})();var Lo=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const zo={root:"e-dropdownlist",hover:Do,selected:Ro,rtl:xo,li:Fo,disable:"e-disabled",base:Eo,focus:Io,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},Bo={container:null,buttons:[]};let Po=(()=>{let e=class extends Mo{constructor(e,t){super(e,t),this.isListSearched=!1,this.preventChange=!1,this.isAngular=!1}preRender(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),super.preRender(),this.activeIndex=this.index,this.queryString=""}initializeData(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}}setZIndex(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})}renderList(e){super.render(e),this.unWireListEvents(),this.wireListEvents()}floatLabelChange(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){const e=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?Object(Ae.y)(e,["e-label-top"],["e-label-bottom"]):Object(Ae.y)(e,["e-label-bottom"],["e-label-top"])}}resetHandler(e){e.preventDefault(),this.clearAll(e)}resetFocusElement(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!Object(Ae.T)(this.ulElement)){const e=this.ulElement.querySelector("."+zo.li);e&&e.classList.add(zo.focus)}}clearAll(e,t){!Object(Ae.T)(t)&&(Object(Ae.T)(t)||!Object(Ae.T)(t.dataSource)&&(t.dataSource instanceof _e.a||0!==t.dataSource.length))||(this.isActive=!0,this.resetSelection(t));const i=this.getItemData();this.previousValue!==i.value&&this.onChangeEvent(e)}resetSelection(e){this.list&&(Object(Ae.T)(e)||!Object(Ae.T)(e.dataSource)&&(e.dataSource instanceof _e.a||0!==e.dataSource.length)?(!this.allowFiltering||"autocomplete"===this.getModuleName()||Object(Ae.T)(this.actionCompleteData.ulElement)||Object(Ae.T)(this.actionCompleteData.list)||this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()):(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource))),this.hiddenElement.innerHTML="",this.inputElement.value="",this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(Object(Ae.F)(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()}setHTMLAttributes(){if(Object.keys(this.htmlAttributes).length)for(const e of Object.keys(this.htmlAttributes))if("class"===e){const t=this.htmlAttributes[e].replace(/\s+/g," ").trim();""!==t&&Object(Ae.u)([this.inputWrapper.container],t.split(" "))}else if("disabled"===e&&"disabled"===this.htmlAttributes[e])this.enabled=!1,this.setEnable();else if("readonly"!==e||Object(Ae.T)(this.htmlAttributes[e]))if("style"===e)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[e]);else{const t=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],i=["name","required"];"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||t.push("tabindex"),i.indexOf(e)>-1||0===e.indexOf("data")?this.hiddenElement.setAttribute(e,this.htmlAttributes[e]):t.indexOf(e)>-1?"placeholder"===e?$s.setPlaceholder(this.htmlAttributes[e],this.inputElement):this.inputElement.setAttribute(e,this.htmlAttributes[e]):this.inputWrapper.container.setAttribute(e,this.htmlAttributes[e])}else this.readonly=!0,this.dataBind();"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.inputWrapper.container.removeAttribute("tabindex")}getAriaAttributes(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-live":"polite","aria-labelledby":this.hiddenElement.id}}setEnableRtl(){$s.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())}setEnable(){$s.setEnabled(this.enabled,this.inputElement),this.enabled?(Object(Ae.eb)([this.inputWrapper.container],zo.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),Object(Ae.u)([this.inputWrapper.container],zo.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)}getPersistData(){return this.addOnPersist(["value"])}getLocaleName(){return"drop-down-list"}preventTabIndex(e){"dropdownlist"===this.getModuleName()&&(e.tabIndex=-1)}targetElement(){return this.inputWrapper.container}getNgDirective(){return"EJS-DROPDOWNLIST"}getElementByText(e){return this.getElementByValue(this.getValueByText(e))}getElementByValue(e){let t;const i=this.getItems();for(const s of i)if(this.getFormattedValue(s.getAttribute("data-value"))===e){t=s;break}return t}initValue(){this.renderList(),this.dataSource instanceof _e.a?this.initRemoteRender=!0:this.updateValues()}updateValues(){if(Object(Ae.T)(this.value))if(this.text&&Object(Ae.T)(this.value)){const e=this.getElementByText(this.text);if(Object(Ae.T)(e))return void this.setProperties({text:null});this.setSelection(e,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),$s.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}onBlurHandler(e){if(!this.enabled)return;const t=e.relatedTarget,i=e.target,s=this.isPreventBlur;this.isPreventBlur=!1,!s||this.isDocumentClick||!this.isPopupOpen||Object(Ae.T)(i)&&(this.isFilterLayout()||!Object(Ae.T)(t))?this.isDocumentClick||!Object(Ae.T)(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(zo.mobileFilter)?this.beforePopupOpen||(this.isDocumentClick=!1):(("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&t!==this.inputElement&&(document.activeElement!==t||document.activeElement===t&&i.classList.contains(zo.inputFocus))||Object(Ae.T)(t)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&i!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(t)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(e),this.isTabKey=!1),!this.isRequested||this.isPopupOpen||this.isPreventBlur||(this.isActive=!1,this.beforePopupOpen=!1)):"dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus()}focusOutAction(e){this.isInteracted=!1,this.focusOut(e),this.onFocusOut()}onFocusOut(){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&Object(Ae.u)([this.inputWrapper.clearButton],zo.clearIconHide),this.trigger("blur"))}onFocus(e){this.isInteracted||(this.isInteracted=!0,this.trigger("focus",{isInteracted:!!e,event:e})),this.updateIconState()}resetValueHandler(e){const t=Object(Ae.A)(this.inputElement,"form");if(t&&e.target===t){const e=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=e}}wireEvent(){Ae.l.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),Ae.l.add(this.inputWrapper.container,"focus",this.focusIn,this),Ae.l.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()}bindCommonEvent(){Ae.l.add(this.targetElement(),"blur",this.onBlurHandler,this);const e=Object(Ae.A)(this.inputElement,"form");e&&Ae.l.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new Ae.o(this.targetElement(),Ae.d.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()}bindClearEvent(){this.showClearButton&&Ae.l.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)}unBindCommonEvent(){this.targetElement()&&Ae.l.remove(this.targetElement(),"blur",this.onBlurHandler);const e=this.inputElement&&Object(Ae.A)(this.inputElement,"form");e&&Ae.l.remove(e,"reset",this.resetValueHandler),Ae.d.isDevice||this.keyboardModule.destroy(),this.showClearButton&&Ae.l.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)}updateIconState(){this.showClearButton&&(""===this.inputElement.value||this.readonly?Object(Ae.u)([this.inputWrapper.clearButton],zo.clearIconHide):Object(Ae.eb)([this.inputWrapper.clearButton],zo.clearIconHide))}wireListEvents(){Ae.l.add(this.list,"click",this.onMouseClick,this),Ae.l.add(this.list,"mouseover",this.onMouseOver,this),Ae.l.add(this.list,"mouseout",this.onMouseLeave,this)}onSearch(e){32!==e.charCode&&13!==e.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=e,this.onServerIncrementalSearch(e))}onServerIncrementalSearch(e){this.isRequested||Object(Ae.T)(this.list)||Object(Ae.T)(this.list.querySelector("li"))||!this.enabled||this.readonly||this.incrementalSearch(e)}onMouseClick(e){const t=e.target,i=Object(Ae.A)(t,".e-list-item");this.isValidLI(i)&&(this.setSelection(i,e),Ae.d.isDevice&&this.isFilterLayout()?history.back():this.closePopup(100))}onMouseOver(e){const t=Object(Ae.A)(e.target,".e-list-item");this.setHover(t)}setHover(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains(Do)&&(this.removeHover(),Object(Ae.u)([e],Do))}onMouseLeave(){this.removeHover()}removeHover(){if(this.list){const e=this.list.querySelectorAll(".e-hover");e&&e.length&&Object(Ae.eb)(e,Do)}}isValidLI(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")}incrementalSearch(e){if(this.liCollections.length>0){const t=function(e,t,i,s,n){let o;if(Co+=String.fromCharCode(e),setTimeout(()=>{Co=""},1e3),Co=Co.toLowerCase(),So===n&&wo===Co){for(let e=0;e<Oo.length;e++)if(Oo[e].classList.contains("e-active")){o=e;break}return o+=1,Oo[o]?Oo[o]:Oo[0]}{const e=t,s=Co.length;let r,l,a=i=i?i+1:0;Oo=[];do{a===e.length&&(a=-1),o=-1===a?0:a,l=e[o],r=l.innerText.toLowerCase(),r.substr(0,s)===Co&&Oo.push(e[o]),a++}while(a!==i);return wo=Co,So=n,Oo[0]}}(e.charCode,this.liCollections,this.activeIndex,0,this.element.id);Object(Ae.T)(t)||(this.setSelection(t,e),this.setScrollPosition())}}hideSpinner(){Object(Ae.T)(this.spinnerElement)||(Ps(this.spinnerElement),Object(Ae.eb)([this.spinnerElement],zo.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)}showSpinner(){Object(Ae.T)(this.spinnerElement)&&(this.spinnerElement=Ae.d.isDevice&&!Object(Ae.T)(this.filterInputObj)&&this.filterInputObj.buttons[1]||!Object(Ae.T)(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],Object(Ae.u)([this.spinnerElement],zo.disableIcon),Ts({target:this.spinnerElement,width:Ae.d.isDevice?"16px":"14px"},this.createElement),zs(this.spinnerElement))}keyActionHandler(e){if(!this.enabled)return;const t="pageUp"===e.action||"pageDown"===e.action,i="dropdownlist"!==this.getModuleName()&&("home"===e.action||"end"===e.action);this.isEscapeKey="escape"===e.action,this.isTabKey=!this.isPopupOpen&&"tab"===e.action;const s="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action;if((!(this.isEditTextBox()||t||i)||this.isPopupOpen)&&!this.readonly){const t="tab"===e.action||"close"===e.action;if(void 0!==this.list||this.isRequested||t||"escape"===e.action||(this.searchKeyEvent=e,this.renderList()),Object(Ae.T)(this.list)||!Object(Ae.T)(this.liCollections)&&s&&0===this.liCollections.length||this.isRequested)return;switch((t&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===e.action)&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,this.isTyped=!s&&"escape"!==e.action&&this.isTyped,e.action){case"down":case"up":this.updateUpDownAction(e);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":case"end":this.updateHomeEndAction(e);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup();break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(e),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"tab":this.selectCurrentValueOnTab(e);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}}}updateUpDownAction(e){const t=this.list.querySelector("."+zo.focus);if(this.isSelectFocusItem(t))this.setSelection(t,e);else{let t="down"===e.action?this.activeIndex+1:this.activeIndex-1,i=0;"autocomplete"===this.getModuleName()&&(i="down"===e.action&&Object(Ae.T)(this.activeIndex)?0:this.liCollections.length-1,t=t<0?this.liCollections.length-1:t===this.liCollections.length?0:t);const s=Object(Ae.T)(this.activeIndex)?this.liCollections[i]:this.liCollections[t];Object(Ae.T)(s)||this.setSelection(s,e)}e.preventDefault()}updateHomeEndAction(e){if("dropdownlist"===this.getModuleName()){let t=0;if(t="home"===e.action?0:this.getItems().length-1,e.preventDefault(),this.activeIndex===t)return;this.setSelection(this.liCollections[t],e)}}selectCurrentValueOnTab(e){"autocomplete"===this.getModuleName()?this.selectCurrentItem(e):this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}mobileKeyActionHandler(e){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0!==this.list||this.isRequested||(this.searchKeyEvent=e,this.renderList()),Object(Ae.T)(this.list)||!Object(Ae.T)(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===e.action&&this.selectCurrentItem(e)}}selectCurrentItem(e){if(this.isPopupOpen){const t=this.list.querySelector("."+zo.focus);t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(),this.focusDropDown(e)}else this.showPopup()}isSelectFocusItem(e){return!Object(Ae.T)(e)}getPageCount(){const e=this.list.classList.contains(ko)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))}pageUpSelection(e,t){this.setSelection(e>=0?this.liCollections[e+1]:this.liCollections[0],t)}pageDownSelection(e,t){const i=this.getItems();this.setSelection(e<=i.length?this.liCollections[e-1]:this.liCollections[i.length-1],t)}unWireEvent(){Ae.l.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),Ae.l.remove(this.inputWrapper.container,"keypress",this.onSearch),Ae.l.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()}unWireListEvents(){Ae.l.remove(this.list,"click",this.onMouseClick),Ae.l.remove(this.list,"mouseover",this.onMouseOver),Ae.l.remove(this.list,"mouseout",this.onMouseLeave)}checkSelector(e){return'[id="'+e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'}onDocumentClick(e){const t=e.target;if(!Object(Ae.T)(this.popupObj)&&Object(Ae.A)(t,this.checkSelector(this.popupObj.element.id))||this.inputWrapper.container.contains(e.target))t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()&&!this.allowFiltering&&Ae.d.isDevice&&t===this.inputWrapper.buttons[0]||(this.isPreventBlur=(Ae.d.isIE||"edge"===Ae.d.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault());else if(this.inputWrapper.container.classList.contains(zo.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;const t=this.isRequested;this.isInteracted=!1,this.hidePopup(e),t||(this.onFocusOut(),this.inputWrapper.container.classList.remove(zo.inputFocus))}}activeStateChange(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(zo.inputFocus))}focusDropDown(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)}dropDownClick(e){if(3===e.which||2===e.button)return;if(this.targetElement().classList.contains(zo.disable)||this.inputWrapper.clearButton===e.target)return;const t=e.target;if(t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()||e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen?(this.hidePopup(),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup());const t=this,i=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(()=>{t.cloneElements(),t.isSecondClick=!0},i)}}cloneElements(){if(this.list){let e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}}updateSelectedItem(e,t,i,s){this.removeSelection(),e.classList.add(Ro),this.removeHover();const n=this.getFormattedValue(e.getAttribute("data-value")),o=this.getDataByValue(n);if(this.initial||i||Object(Ae.T)(t))this.selectEventCallback(e,t,i,o,n),s&&this.setSelectOptions(e,t);else{const r=this.detachChanges(o);this.isSelected=!0,this.trigger("select",{e:t,item:e,itemData:r,isInteracted:!!t,cancel:!1},r=>{r.cancel?e.classList.remove(Ro):(this.selectEventCallback(e,t,i,o,n),s&&this.setSelectOptions(e,t))})}}selectEventCallback(e,t,i,s,n){this.previousItemData=Object(Ae.T)(this.itemData)?null:this.itemData,this.item=e,this.itemData=s;const o=this.list.querySelector(".e-item-focus");o&&Object(Ae.eb)([o],Io),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(n)}activeItem(e){this.isValidLI(e)&&!e.classList.contains(Ro)&&(this.removeSelection(),e.classList.add(Ro),this.removeHover(),e.setAttribute("aria-selected","true"))}setValue(e){const t=this.getItemData();$s.setValue(null===t.value?null:t.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&null!==this.itemData?this.setValueTemplate():Object(Ae.T)(this.valueTempElement)||this.inputElement.previousSibling!==this.valueTempElement||(Object(Ae.F)(this.valueTempElement),this.inputElement.style.display="block");let i=zo.clearIcon,s=this.isFiltering()&&this.filterInput&&"combobox"===this.getModuleName()&&this.filterInput.parentElement.querySelector("."+i);return this.isFiltering()&&s&&s.style.removeProperty("visibility"),this.previousValue===t.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)}setSelection(e,t){this.isValidLI(e)&&(!e.classList.contains(Ro)||this.isPopupOpen&&this.isSelected&&e.classList.contains(Ro))?this.updateSelectedItem(e,t,!1,!0):this.setSelectOptions(e,t)}setSelectOptions(e,t){this.list&&this.removeHover(),this.previousSelectedLI=Object(Ae.T)(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,this.setValue(t)||(this.isPopupOpen&&(Object(Ae.w)(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),this.isFilterLayout()&&this.filterInput&&Object(Ae.w)(this.filterInput,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})),(!this.isPopupOpen&&!Object(Ae.T)(e)||this.isPopupOpen&&!Object(Ae.T)(t)&&("keydown"!==t.type||"keydown"===t.type&&"enter"===t.action))&&(this.isSelectCustom=!1,this.onChangeEvent(t)),!this.isPopupOpen||Object(Ae.T)(this.selectedLI)||null===this.itemData||t&&"click"===t.type||this.setScrollPosition(t),"mozilla"!==Ae.d.info.name&&(Object(Ae.w)(this.inputElement,{"aria-label":this.inputElement.value}),Object(Ae.w)(this.targetElement(),{"aria-describedby":this.inputElement.id}),this.targetElement().removeAttribute("aria-live")))}dropdownCompiler(e){let t=!1;if(e)try{t=!!document.querySelectorAll(e).length}catch(i){t=!1}return t}setValueTemplate(){let e;this.isReact&&this.clearTemplate(["valueTemplate"]),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:zo.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.valueTempElement.innerHTML="",e=this.dropdownCompiler(this.valueTemplate)?Object(Ae.C)(document.querySelector(this.valueTemplate).innerHTML.trim()):Object(Ae.C)(this.valueTemplate);const t=e(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);if(t&&t.length>0)for(let i=0;i<t.length;i++)this.valueTempElement.appendChild(t[i]);this.renderReactTemplates()}removeSelection(){if(this.list){const e=this.list.querySelectorAll(".e-active");e.length&&(Object(Ae.eb)(e,Ro),e[0].removeAttribute("aria-selected"))}}getItemData(){const e=this.fields;let t,i,s=null;return s=this.itemData,Object(Ae.T)(s)||(t=Object(Ae.R)(e.value,s),i=Object(Ae.R)(e.text,s)),{value:Object(Ae.T)(s)||Object(Ae.W)(t)?s:t,text:Object(Ae.T)(s)||Object(Ae.W)(t)?s:i}}onChangeEvent(e){const t=this.getItemData();this.setProperties({index:this.isSelectCustom?null:this.activeIndex,text:t.text,value:t.value},!0),this.detachChangeEvent(e)}detachChanges(e){let t;return t="string"==typeof e||"boolean"==typeof e||"number"==typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e,t}detachChangeEvent(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=Object(Ae.T)(this.text)?"":this.text,!this.initial){const t=this.detachChanges(this.itemData);let i;i="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();const s={e:e,item:this.item,itemData:t,previousItem:this.previousSelectedLI,previousItemData:i,isInteracted:!!e,value:this.value,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",s)}!Object(Ae.T)(this.value)&&""!==this.value||"Always"===this.floatLabelType||Object(Ae.eb)([this.inputWrapper.container],"e-valid-input")}setHiddenValue(){if(Object(Ae.T)(this.value))this.hiddenElement.innerHTML="";else if(this.hiddenElement.querySelector("option")){const e=this.hiddenElement.querySelector("option");e.textContent=this.text,e.setAttribute("value",this.value.toString())}else this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",this.hiddenElement.querySelector("option").setAttribute("value",this.value.toString())}onFilterUp(e){if(e.ctrlKey&&86===e.keyCode||!this.isValidKey&&40!==e.keyCode&&38!==e.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,e.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(e)),this.preventAltUp=!1,e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0||""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"dropdownlist"!==this.getModuleName()&&(this.preventAutoFill=!0,this.searchLists(e),"autocomplete"===this.getModuleName()&&this.hidePopup())),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}}onFilterDown(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}}removeFillSelection(){if(this.isInteracted){const e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}}getQuery(e){let t;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){t=e?e.clone():this.query?this.query.clone():new _e.e;const i=""===this.typedString?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;t.where((this.dataSource instanceof _e.a||"string"!==s)&&"number"!==s&&this.fields.text?this.fields.text:"",i,this.typedString,this.ignoreCase,this.ignoreAccent)}else t=e?e.clone():this.query?this.query.clone():new _e.e;return t}getSelectionPoints(){const e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}}searchLists(e){if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+zo.clearIcon)&&(this.filterInput.parentElement.querySelector("."+zo.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"),this.isDataFetched=!1,this.isFiltering()){const t={preventDefaultAction:!1,text:this.filterInput.value,updateData:(e,i,s)=>{t.cancel||(this.isCustomFilter=!0,this.filteringAction(e,i,s))},baseEventArgs:e,cancel:!1};this.trigger("filtering",t,e=>{e.cancel||this.isCustomFilter||e.preventDefaultAction||this.filteringAction(this.dataSource,null,this.fields)})}}filter(e,t,i){this.isCustomFilter=!0,this.filteringAction(e,t,i)}filteringAction(e,t,i){Object(Ae.T)(this.filterInput)||(this.beforePopupOpen=!(!this.isPopupOpen&&"combobox"===this.getModuleName()&&""===this.filterInput.value),""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,t=""===this.filterInput.value.trim()?null:t,this.resetList(e,i,t)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,Object(Ae.T)(this.actionCompleteData.ulElement)||Object(Ae.T)(this.actionCompleteData.list)||this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,Object(Ae.T)(this.itemData)||"dropdownlist"!==this.getModuleName()||(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0),this.renderReactTemplates())}setSearchBox(e){if(this.isFiltering()){const t=e.querySelector("."+zo.filterParent)?e.querySelector("."+zo.filterParent):this.createElement("span",{className:zo.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:zo.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);let i=!1;return Ae.d.isDevice&&(i=!0),this.filterInputObj=$s.createInput({element:this.filterInput,buttons:i?[zo.backIcon,zo.filterBarClearIcon]:[zo.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),Object(Ae.T)(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?Object(Ae.u)([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&Object(Ae.u)([this.filterInputObj.container],"e-filled")),Object(Ae.v)([this.filterInputObj.container],t),Object(Ae.bb)([t],e),Object(Ae.w)(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":this.selectedLI?this.selectedLI.id:null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+zo.clearIcon),!Ae.d.isDevice&&this.clearIconElement&&(Ae.l.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),this.searchKeyModule=new Ae.o(this.filterInput,Ae.d.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),Ae.l.add(this.filterInput,"input",this.onInput,this),Ae.l.add(this.filterInput,"keyup",this.onFilterUp,this),Ae.l.add(this.filterInput,"keydown",this.onFilterDown,this),Ae.l.add(this.filterInput,"blur",this.onBlurHandler,this),Ae.l.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return Bo}onInput(e){this.isValidKey=!0,Ae.d.isDevice&&"mozilla"===Ae.d.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(e))}pasteHandler(e){setTimeout(()=>{this.typedString=this.filterInput.value,this.searchLists(e)})}onActionFailure(e){super.onActionFailure(e),this.beforePopupOpen&&this.renderPopup()}onActionComplete(e,t,i,s){if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){const s=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(super.onActionComplete(e,t,i),this.updateSelectElementData(this.allowFiltering),this.isRequested&&!Object(Ae.T)(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!Object(Ae.T)(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,Object(Ae.T)(e)||Object(Ae.w)(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender&&(this.initial=!0,this.activeIndex=this.index,this.updateValues(),this.initRemoteRender=!1,this.initial=!1,this.value&&this.dataSource instanceof _e.a)){const e=Object(Ae.T)(this.fields.value)?this.fields.text:this.fields.value;t.some(t=>t[e]===this.value)||this.dataSource.executeQuery(this.getQuery(this.query).where(new _e.d(e,"equal",this.value))).then(e=>{e.result.length>0&&(this.addItem(e.result,t.length),this.updateValues())})}"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||Object(Ae.T)(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof _e.a||!Object(Ae.T)(this.dataSource)&&!Object(Ae.T)(this.dataSource.length)&&0!==this.dataSource.length))&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(()=>{this.updateActionCompleteDataValues(e,t)},0):this.updateActionCompleteDataValues(e,t)),this.addNewItem(t,s),Object(Ae.T)(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup()}}updateActionCompleteDataValues(e,t){this.actionCompleteData={ulElement:e.cloneNode(!0),list:t,isUpdated:!0},Object(Ae.T)(this.actionData.ulElement)&&Object(Ae.T)(this.actionData.list)&&(this.actionData=this.actionCompleteData)}addNewItem(e,t){if(!Object(Ae.T)(this.itemData)&&!Object(Ae.T)(t)){const t=this.getItemData().value;e.some(e=>("string"==typeof e||"number"==typeof e)&&e===t||Object(Ae.R)(this.fields.value,e)===t)||this.addItem(this.itemData)}}updateActionCompleteData(e,t,i){"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(()=>{this.actionCompleteDataUpdate(e,t,i)},0):this.actionCompleteDataUpdate(e,t,i))}actionCompleteDataUpdate(e,t,i){null!=i?this.actionCompleteData.ulElement.insertBefore(e.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[i]):this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(t)<0&&this.actionCompleteData.list.push(t)}focusIndexItem(){const e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);const t=this.findListElement(this.list,"li","data-value",e);this.selectedLI=t,this.activeItem(t),this.removeFocus()}updateSelection(){const e=this.list.querySelector(".e-active");e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector(".e-list-item").classList.add(zo.focus))}removeFocus(){const e=this.list.querySelectorAll("."+zo.focus);e&&e.length&&Object(Ae.eb)(e,zo.focus)}renderPopup(){this.popupObj&&document.body.contains(this.popupObj.element)?this.refreshPopup():this.trigger("beforeOpen",{cancel:!1},e=>{if(e.cancel)this.beforePopupOpen=!1;else{const e=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup "+(null!=this.cssClass?this.cssClass:"")}),t=this.setSearchBox(e);if(this.listHeight=Object(Ae.H)(this.popupHeight),this.headerTemplate&&this.setHeaderTemplate(e),Object(Ae.v)([this.list],e),this.footerTemplate&&this.setFooterTemplate(e),document.body.appendChild(e),e.style.visibility="hidden","auto"!==this.popupHeight){if(this.searchBoxHeight=0,Object(Ae.T)(t.container)||(this.searchBoxHeight=t.container.parentElement.getBoundingClientRect().height,this.listHeight=(parseInt(this.listHeight,10)-this.searchBoxHeight).toString()+"px"),this.headerTemplate){this.header=this.header?this.header:e.querySelector(".e-ddl-header");const t=Math.round(this.header.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(t+this.searchBoxHeight)).toString()+"px"}if(this.footerTemplate){this.footer=this.footer?this.footer:e.querySelector(".e-ddl-footer");const t=Math.round(this.footer.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(t+this.searchBoxHeight)).toString()+"px"}this.list.style.maxHeight=(parseInt(this.listHeight,10)-2).toString()+"px",e.style.maxHeight=Object(Ae.H)(this.popupHeight)}else e.style.height="auto";let i,s=0;if(!Object(Ae.T)(this.selectedLI)&&!Object(Ae.T)(this.activeIndex)&&this.activeIndex>=0?this.setScrollPosition():this.list.scrollTop=0,Ae.d.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){s=this.getOffsetValue(e);const t=this.isEmptyList()?this.list:this.liCollections[0];i=-(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))}this.getFocusElement(),this.createPopup(e,s,i),this.checkCollision(e),Ae.d.isDevice&&(this.popupObj.element.classList.add(zo.device),("dropdownlist"===this.getModuleName()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&(this.popupObj.collision={X:"fit",Y:"fit"}),this.isFilterLayout()&&(this.popupObj.element.classList.add(zo.mobileFilter),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),Object(Ae.w)(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),Object(Ae.u)([document.body,this.popupObj.element],zo.popupFullScreen),this.setSearchBoxPosition(),this.backIconElement=t.container.querySelector(".e-back-icon"),this.clearIconElement=t.container.querySelector("."+zo.clearIcon),Ae.l.add(this.backIconElement,"click",this.clickOnBackIcon,this),Ae.l.add(this.clearIconElement,"click",this.clearText,this))),e.style.visibility="visible",Object(Ae.u)([e],"e-popup-close");const n=this.popupObj.getScrollableParent(this.inputWrapper.container);for(const l of n)Ae.l.add(l,"scroll",this.scrollHandler,this);Ae.d.isDevice&&this.isFilterLayout()&&Ae.l.add(this.list,"scroll",this.listScroll,this),Object(Ae.T)(this.list)||(this.unWireListEvents(),this.wireListEvents()),Object(Ae.w)(this.targetElement(),{"aria-expanded":"true"});const o=this.isFiltering()?this.filterInput.parentElement:this.inputWrapper.container;Object(Ae.u)([o],[zo.inputFocus]);const r={name:"FadeIn",duration:100};this.beforePopupOpen=!0,this.trigger("open",{popup:this.popupObj,cancel:!1,animation:r},e=>{e.cancel?(this.beforePopupOpen=!1,this.destroyPopup()):(Object(Ae.u)([this.inputWrapper.container],[zo.iconAnimation]),this.renderReactTemplates(),this.popupObj.show(new Ae.b(e.animation),1e3===this.zIndex?this.element:null))})}})}checkCollision(e){(!Ae.d.isDevice||Ae.d.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&(ut(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision())}getOffsetValue(e){const t=getComputedStyle(e),i=parseInt(t.borderTopWidth,10),s=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+s)}createPopup(e,t,i){this.popupObj=new Pt(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:t,enableRtl:this.enableRtl,offsetX:i,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:()=>{this.isDocumentClick||this.focusDropDown(),this.isReact&&this.clearTemplate(["headerTemplate","footerTemplate"]),this.getModuleName(),this.isNotSearchList=!1,this.isDocumentClick=!1,this.destroyPopup(),this.isFiltering()&&this.actionCompleteData.list&&this.actionCompleteData.list[0]&&(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0))},open:()=>{Ae.l.add(document,"mousedown",this.onDocumentClick,this),this.isPopupOpen=!0;const e=this.actionCompleteData&&this.actionCompleteData.ulElement&&this.actionCompleteData.ulElement.querySelector("li"),t=this.list.querySelector("ul li");this.isFiltering()&&this.itemTemplate&&this.element.tagName===this.getNgDirective()&&e&&t&&e.textContent!==t.textContent&&"EJS-COMBOBOX"!==this.element.tagName&&this.cloneElements(),this.isFilterLayout()&&(Object(Ae.eb)([this.inputWrapper.container],[zo.inputFocus]),this.isFilterFocus=!0,this.filterInput.focus(),this.inputWrapper.clearButton&&Object(Ae.u)([this.inputWrapper.clearButton],zo.clearIconHide)),this.activeStateChange()},targetExitViewport:()=>{Ae.d.isDevice||this.hidePopup()}})}isEmptyList(){return!Object(Ae.T)(this.liCollections)&&0===this.liCollections.length}getFocusElement(){}isFilterLayout(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering}scrollHandler(){Ae.d.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()}setSearchBoxPosition(){const e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";const t=this.filterInput.parentElement.querySelector("."+zo.clearIcon);Object(Ae.F)(this.filterInput),t.parentElement.insertBefore(this.filterInput,t)}setPopupPosition(e){let t;const i=e,s=this.list.querySelector("."+zo.focus)||this.selectedLI,n=this.isEmptyList()?this.list:this.liCollections[0],o=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],r=n.getBoundingClientRect().height,l=this.list.offsetHeight/2,a=Object(Ae.T)(s)?n.offsetTop:s.offsetTop;if(o.offsetTop-l<a&&!Object(Ae.T)(this.liCollections)&&this.liCollections.length>0&&!Object(Ae.T)(s)){const e=this.list.offsetHeight/r,n=parseInt(getComputedStyle(this.list).paddingBottom,10);t=(e-(this.liCollections.length-this.activeIndex))*r-i+n,this.list.scrollTop=s.offsetTop}else a>l?(t=l-r/2,this.list.scrollTop=a-l+r/2):t=a;return t=t+r+i-(r-this.inputWrapper.container.offsetHeight)/2,-t}setWidth(){let e=Object(Ae.H)(this.popupWidth);if(e.indexOf("%")>-1&&(e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px"),Ae.d.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){const t=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return e}scrollBottom(e){if(!Object(Ae.T)(this.selectedLI)){const t=this.list.offsetHeight,i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;let s=this.list.scrollTop+i-t;s=e?s+2*parseInt(getComputedStyle(this.list).paddingTop,10):s;let n=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;n=this.fields.groupBy&&!Object(Ae.T)(this.fixedHeaderElement)?n-this.fixedHeaderElement.offsetHeight:n,0===this.activeIndex?this.list.scrollTop=0:(i>t||!(n>0&&this.list.offsetHeight>n))&&(this.list.scrollTop=s)}}scrollTop(){if(!Object(Ae.T)(this.selectedLI)){let e=this.selectedLI.offsetTop-this.list.scrollTop;e=this.fields.groupBy&&!Object(Ae.T)(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;const t=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:t>0&&this.list.offsetHeight>t||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!Object(Ae.T)(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}}isEditTextBox(){return!1}isFiltering(){return this.allowFiltering}isPopupButton(){return!0}setScrollPosition(e){if(Object(Ae.T)(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}}clearText(){this.filterInput.value=this.typedString="",this.searchLists(null)}listScroll(){this.filterInput.blur()}setEleWidth(e){Object(Ae.T)(e)||("number"==typeof e?this.inputWrapper.container.style.width=Object(Ae.H)(e):"string"==typeof e&&(this.inputWrapper.container.style.width=e.match(/px|%|em/)?e:Object(Ae.H)(e)))}closePopup(e){if(this.isTyped=!1,!(this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen))return;Ae.l.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;const t=this.popupObj.getScrollableParent(this.inputWrapper.container);for(const i of t)Ae.l.remove(i,"scroll",this.scrollHandler);Ae.d.isDevice&&this.isFilterLayout()&&(Object(Ae.eb)([document.body,this.popupObj.element],zo.popupFullScreen),Ae.l.remove(this.list,"scroll",this.listScroll)),this.isFilterLayout()&&(Ae.d.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&Ae.l.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(Ae.l.remove(this.backIconElement,"click",this.clickOnBackIcon),Ae.l.remove(this.clearIconElement,"click",this.clearText)),Ae.l.remove(this.filterInput,"input",this.onInput),Ae.l.remove(this.filterInput,"keyup",this.onFilterUp),Ae.l.remove(this.filterInput,"keydown",this.onFilterDown),Ae.l.remove(this.filterInput,"blur",this.onBlurHandler),Ae.l.remove(this.filterInput,"paste",this.pasteHandler),this.filterInput=null),Object(Ae.w)(this.targetElement(),{"aria-expanded":"false","aria-activedescendant":null}),this.inputWrapper.container.classList.remove(zo.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1,this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:e||0}},e=>{if(!Object(Ae.T)(this.popupObj)&&!Object(Ae.T)(this.popupObj.element.querySelector(".e-fixed-head"))){const e=this.popupObj.element.querySelector(".e-fixed-head");e.parentNode.removeChild(e),this.fixedHeaderElement=null}e.cancel||("autocomplete"===this.getModuleName()&&this.rippleFun(),this.isPopupOpen?this.popupObj.hide(new Ae.b(e.animation)):this.destroyPopup())})}destroyPopup(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),Object(Ae.F)(this.popupObj.element)}clickOnBackIcon(){this.hidePopup(),this.focusIn()}render(){"INPUT"===this.element.tagName?(this.inputElement=this.element,Object(Ae.T)(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","textbox"),Object(Ae.T)(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text")):(this.inputElement=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));let e=this.cssClass;Object(Ae.T)(this.cssClass)||""===this.cssClass||(e=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=$s.createInput({element:this.inputElement,buttons:this.isPopupButton()?[zo.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:zo.hiddenElement}}),Object(Ae.bb)([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=Object(Ae.H)(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");const t=this.element.getAttribute("id")?this.element.getAttribute("id"):Object(Ae.Q)("ej2_dropdownlist");if(this.element.id=t,this.hiddenElement.id=t+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),Object(Ae.w)(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){const e=this.element;this.value=e.options[e.selectedIndex].value,this.text=Object(Ae.T)(this.value)?null:e.options[e.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=e=>{e.stopImmediatePropagation()},this.inputElement.onchange=e=>{e.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),Object(Ae.T)(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete()}setFooterTemplate(e){let t;this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),Object(Ae.u)([this.footer],zo.footer)),t=this.dropdownCompiler(this.footerTemplate)?Object(Ae.C)(Object(Ae.hb)(this.footerTemplate,document).innerHTML.trim()):Object(Ae.C)(this.footerTemplate);const i=t({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(i&&i.length>0)for(let s=0;s<i.length;s++)this.footer.appendChild(i[s]);Object(Ae.v)([this.footer],e)}setHeaderTemplate(e){let t;this.header?this.header.innerHTML="":(this.header=this.createElement("div"),Object(Ae.u)([this.header],zo.header)),t=this.dropdownCompiler(this.headerTemplate)?Object(Ae.C)(Object(Ae.hb)(this.headerTemplate,document).innerHTML.trim()):Object(Ae.C)(this.headerTemplate);const i=t({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(i&&i.length)for(let n=0;n<i.length;n++)this.header.appendChild(i[n]);const s=e.querySelector("div.e-content");e.insertBefore(this.header,s)}setOldText(e){this.text=e}setOldValue(e){this.value=e}refreshPopup(){Object(Ae.T)(this.popupObj)||!document.body.contains(this.popupObj.element)||(!this.allowFiltering||Ae.d.isDevice&&this.isFilterLayout())&&"autocomplete"!==this.getModuleName()||(Object(Ae.eb)([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())}checkData(e){!e.dataSource||Object(Ae.T)(Object.keys(e.dataSource))||!this.itemTemplate||!this.allowFiltering||this.isListSearched&&e.dataSource instanceof _e.a||(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;const t=-1!==Object.keys(e).indexOf("value")&&Object(Ae.T)(e.value),i=-1!==Object.keys(e).indexOf("text")&&Object(Ae.T)(e.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(t||i)&&(this.itemData=null),this.allowFiltering&&e.dataSource&&!Object(Ae.T)(Object.keys(e.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&e.query&&!Object(Ae.T)(Object.keys(e.query))&&(this.actionCompleteData="combobox"===this.getModuleName()?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)}updateDataSource(e){""===this.inputElement.value&&(Object(Ae.T)(e)||!Object(Ae.T)(e.dataSource)&&(e.dataSource instanceof _e.a||0!==e.dataSource.length))||this.clearAll(null,e),this.fields.groupBy&&e.fields&&!this.isGroupChecking&&(Ae.l.remove(this.list,"scroll",this.setFloatingHeader),Ae.l.add(this.list,"scroll",this.setFloatingHeader,this)),(Object(Ae.T)(e)||!Object(Ae.T)(e.dataSource)&&(e.dataSource instanceof _e.a||0!==e.dataSource.length)||e.dataSource!==[])&&(this.typedString="",this.resetList(this.dataSource)),this.isCustomFilter||this.isFilterFocus||document.activeElement===this.filterInput||this.checkCustomValue()}checkCustomValue(){this.itemData=this.getDataByValue(this.value);const e=this.getItemData();this.setProperties({value:e.value,text:e.text})}updateInputFields(){"dropdownlist"===this.getModuleName()&&$s.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}onPropertyChanged(e,t){"dropdownlist"===this.getModuleName()&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(const i of Object.keys(e))switch(i){case"query":case"dataSource":break;case"htmlAttributes":this.setHTMLAttributes();break;case"width":this.setEleWidth(e.width);break;case"placeholder":$s.setPlaceholder(e.placeholder,this.inputElement);break;case"filterBarPlaceholder":this.filterInput&&$s.setPlaceholder(e.filterBarPlaceholder,this.filterInput);break;case"readonly":"dropdownlist"!==this.getModuleName()&&$s.setReadonly(e.readonly,this.inputElement),this.setReadOnly();break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnable();break;case"text":if(null===e.text){this.clearAll();break}if(this.list||(this.dataSource instanceof _e.a&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){const i=this.getElementByText(e.text);this.checkValidLi(i)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.text,t.text,"text"):this.setOldText(t.text)),this.updateInputFields()}break;case"value":if(null===e.value){this.clearAll();break}if(this.notify("beforeValueChange",{newProp:e}),this.list||(this.dataSource instanceof _e.a&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){const i=this.getElementByValue(e.value);this.checkValidLi(i)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.value,t.value,"value"):this.setOldValue(t.value)),this.updateInputFields(),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange}break;case"index":if(null===e.index){this.clearAll();break}this.list||(this.dataSource instanceof _e.a&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender&&this.liCollections&&(this.checkValidLi(this.liCollections[e.index])||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.index,t.index,"index"):this.index=t.index),this.updateInputFields());break;case"footerTemplate":this.popupObj&&this.setFooterTemplate(this.popupObj.element);break;case"headerTemplate":this.popupObj&&this.setHeaderTemplate(this.popupObj.element);break;case"valueTemplate":Object(Ae.T)(this.itemData)||null==this.valueTemplate||this.setValueTemplate();break;case"allowFiltering":this.allowFiltering&&(this.actionCompleteData={ulElement:this.ulElement,list:this.listData,isUpdated:!0},this.actionData=this.actionCompleteData,this.updateSelectElementData(this.allowFiltering));break;case"floatLabelType":$s.removeFloating(this.inputWrapper),$s.addFloating(this.inputElement,e.floatLabelType,this.placeholder,this.createElement);break;case"showClearButton":$s.setClearButton(e.showClearButton,this.inputElement,this.inputWrapper,null,this.createElement),this.bindClearEvent();break;default:{const s=this.getPropObject(i,e,t);super.onPropertyChanged(s.newProperty,s.oldProperty)}}}checkValidLi(e){return!!this.isValidLI(e)&&(this.setSelection(e,null),!0)}setSelectionData(e,t,i){let s;this.updateListValues=()=>{"text"===i?(s=this.getElementByText(e),this.checkValidLi(s)||this.setOldText(t)):"value"===i?(s=this.getElementByValue(e),this.checkValidLi(s)||this.setOldValue(t)):"index"===i&&(s=this.liCollections[e],this.checkValidLi(s)||(this.index=t))}}setReadOnly(){this.readonly?Object(Ae.u)([this.inputWrapper.container],["e-readonly"]):Object(Ae.eb)([this.inputWrapper.container],["e-readonly"])}setCssClass(e,t){Object(Ae.T)(t)||(t=t.replace(/\s+/g," ").trim()),Object(Ae.T)(e)||(e=e.replace(/\s+/g," ").trim()),$s.setCssClass(e,[this.inputWrapper.container],t),this.popupObj&&$s.setCssClass(e,[this.popupObj.element],t)}getModuleName(){return"dropdownlist"}showPopup(){this.enabled&&(this.isFiltering()&&this.dataSource instanceof _e.a&&this.actionData.list!=this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen?this.refreshPopup():(this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(Object(Ae.T)(this.list)||!Object(Ae.W)(this.list)&&(this.list.classList.contains(ko)||this.list.querySelectorAll(".e-list-item").length<=0))&&this.renderList(),this.invokeRenderPopup()))}invokeRenderPopup(){if(Ae.d.isDevice&&this.isFilterLayout()){const e=this;window.onpopstate=()=>{e.hidePopup()},history.pushState({},"")}Object(Ae.T)(this.list.children[0])&&!this.list.classList.contains(ko)||this.renderPopup(),Object(Ae.w)(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}renderHightSearch(){}hidePopup(e){if(this.isEscapeKey&&"dropdownlist"===this.getModuleName())if($s.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,Object(Ae.T)(this.index))this.resetSelection();else{const e=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||e,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup();const t=this.getItemData(),i=!Object(Ae.T)(this.selectedLI);this.inputElement&&""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||i&&this.inputElement.value!==t.text)&&(this.isSelectCustom=!1,this.clearAll(e))}focusIn(e){if(!this.enabled)return;if(this.targetElement().classList.contains(zo.disable))return;let t=!1;this.preventFocus&&Ae.d.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,t=!0),t||this.targetElement().focus(),Object(Ae.u)([this.inputWrapper.container],[zo.inputFocus]),this.onFocus(e)}focusOut(e){this.enabled&&(this.isTyped=!0,this.hidePopup(e),this.targetElement()&&this.targetElement().blur(),Object(Ae.eb)([this.inputWrapper.container],[zo.inputFocus]))}destroy(){if(this.isActive=!1,So===this.element.id&&(So="",wo="",Co="",Oo=[]),this.isReact&&this.clearTemplate(),this.hidePopup(),this.unWireEvent(),this.list&&this.unWireListEvents(),!this.element||this.element.classList.contains("e-"+this.getModuleName())){if(this.inputElement){const e=["readonly","aria-disabled","aria-placeholder","placeholder","aria-owns","aria-labelledby","aria-haspopup","aria-expanded","aria-activedescendant","autocomplete","aria-readonly","autocorrect","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"];for(let t=0;t<e.length;t++)this.inputElement.removeAttribute(e[t]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),$s.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),Object(Ae.F)(this.inputWrapper.container),super.destroy()}}getItems(){return this.list||(this.dataSource instanceof _e.a&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?super.getItems():[]}getDataByValue(e){return super.getDataByValue(e)}clear(){this.value=null}};return Lo([Object(Ae.r)(null)],e.prototype,"cssClass",void 0),Lo([Object(Ae.r)("100%")],e.prototype,"width",void 0),Lo([Object(Ae.r)("300px")],e.prototype,"popupHeight",void 0),Lo([Object(Ae.r)("100%")],e.prototype,"popupWidth",void 0),Lo([Object(Ae.r)(null)],e.prototype,"placeholder",void 0),Lo([Object(Ae.r)(null)],e.prototype,"filterBarPlaceholder",void 0),Lo([Object(Ae.r)({})],e.prototype,"htmlAttributes",void 0),Lo([Object(Ae.r)(null)],e.prototype,"query",void 0),Lo([Object(Ae.r)(null)],e.prototype,"valueTemplate",void 0),Lo([Object(Ae.r)(null)],e.prototype,"headerTemplate",void 0),Lo([Object(Ae.r)(null)],e.prototype,"footerTemplate",void 0),Lo([Object(Ae.r)(!1)],e.prototype,"allowFiltering",void 0),Lo([Object(Ae.r)(!1)],e.prototype,"readonly",void 0),Lo([Object(Ae.r)(null)],e.prototype,"text",void 0),Lo([Object(Ae.r)(null)],e.prototype,"value",void 0),Lo([Object(Ae.r)(null)],e.prototype,"index",void 0),Lo([Object(Ae.r)("Never")],e.prototype,"floatLabelType",void 0),Lo([Object(Ae.r)(!1)],e.prototype,"showClearButton",void 0),Lo([Object(Ae.k)()],e.prototype,"filtering",void 0),Lo([Object(Ae.k)()],e.prototype,"change",void 0),Lo([Object(Ae.k)()],e.prototype,"beforeOpen",void 0),Lo([Object(Ae.k)()],e.prototype,"open",void 0),Lo([Object(Ae.k)()],e.prototype,"close",void 0),Lo([Object(Ae.k)()],e.prototype,"blur",void 0),Lo([Object(Ae.k)()],e.prototype,"focus",void 0),e=Lo([Ae.q],e),e})();zo.root="e-combobox",zo.root="e-autocomplete",zo.icon="e-input-group-icon e-ddl-icon e-search-icon";var Ho=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const Vo="e-other-month",No="e-calendar",qo="e-device",Wo="e-rtl",Go="e-year",_o="e-month",Uo="e-decade",Ko="e-disabled",Yo="e-overlay",Xo="e-week-number",Qo="e-selected",$o="e-focused-date",Jo="e-month-hide",Zo="e-today",er="e-cell",tr="e-zoomin",ir="e-calendar-day-header-lg",sr=864e5;let nr=(()=>{let e=class extends Ae.h{constructor(e,t){super(e,t),this.effect="",this.isPopupClicked=!1,this.isDateSelected=!0,this.isTodayClicked=!1,this.preventChange=!1,this.isAngular=!1}render(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),"Islamic"===this.calendarMode&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new Ae.n(this.locale),(Object(Ae.T)(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date((new Date).setHours(0,0,0,0)),"calendar"===this.getModuleName()?(this.element.classList.add(No),this.enableRtl&&this.element.classList.add(Wo),Ae.d.isDevice&&this.element.classList.add(qo),Object(Ae.w)(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(No),this.enableRtl&&this.calendarElement.classList.add(Wo),Ae.d.isDevice&&this.calendarElement.classList.add(qo),Object(Ae.w)(this.calendarElement,{role:"calendar"})),this.createHeader(),this.createContent(),this.wireEvents()}rangeValidation(e,t){Object(Ae.T)(e)&&this.setProperties({min:new Date(1900,0,1)},!0),Object(Ae.T)(t)&&this.setProperties({max:new Date(2099,11,31)},!0)}getDefaultKeyConfig(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs}validateDate(e){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date((new Date).setHours(0,0,0,0)),!Object(Ae.T)(e)&&this.min<=this.max&&e>=this.min&&e<=this.max&&(this.currentDate=new Date(this.checkValue(e)))}setOverlayIndex(e,t,i,s){if(s&&!Object(Ae.T)(t)&&!Object(Ae.T)(i)&&!Object(Ae.T)(e)){const s=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(s-1).toString(),e.style.zIndex=s.toString()}}minMaxUpdate(e){+this.min<=+this.max?Object(Ae.eb)([this.element],Yo):(this.setProperties({min:this.min},!0),Object(Ae.u)([this.element],Yo)),this.min=Object(Ae.T)(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=Object(Ae.T)(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&e&&+e<=+this.max&&+e>=+this.min?this.currentDate=new Date(this.checkValue(e)):+this.min<=+this.max&&!e&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))}createHeader(){this.headerElement=this.createElement("div",{className:"e-header"});const e=this.createElement("div",{className:"e-icon-container"});this.previousIcon=this.createElement("button",{className:"e-prev",attrs:{type:"button"}}),Object(Ae.gb)(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),Object(Ae.w)(this.previousIcon,{"aria-disabled":"false","aria-label":"previous month"}),this.nextIcon=this.createElement("button",{className:"e-next",attrs:{type:"button"}}),Object(Ae.gb)(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),Object(Ae.w)(this.nextIcon,{"aria-disabled":"false","aria-label":"next month"}),this.headerTitleElement=this.createElement("div",{className:"e-day e-title"}),Object(Ae.w)(this.headerTitleElement,{"aria-atomic":"true","aria-live":"assertive","aria-label":"title"}),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:"e-date-icon-prev e-icons"})),this.nextIcon.appendChild(this.createElement("span",{className:"e-date-icon-next  e-icons"})),e.appendChild(this.previousIcon),e.appendChild(this.nextIcon),this.headerElement.appendChild(e),"calendar"===this.getModuleName()?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()}createContent(){this.contentElement=this.createElement("div",{className:"e-content"}),this.table=this.createElement("table",{attrs:{tabIndex:"0",role:"grid","aria-activedescendant":""}}),"calendar"===this.getModuleName()?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter()}getCultureValues(){const e=[];let t;const i="days.stand-alone."+this.dayHeaderFormat.toLowerCase();t="en"===this.locale||"en-US"===this.locale?Object(Ae.R)(i,Object(Ae.J)()):this.getCultureObjects(Ae.z,""+this.locale);for(const s of Object.keys(t))e.push(Object(Ae.R)(s,t));return e}toCapitalize(e){return!Object(Ae.T)(e)&&e.length?e[0].toUpperCase()+e.slice(1):e}createContentHeader(){"calendar"===this.getModuleName()?Object(Ae.T)(this.element.querySelectorAll(".e-content .e-week-header")[0])||Object(Ae.F)(this.element.querySelectorAll(".e-content .e-week-header")[0]):Object(Ae.T)(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||Object(Ae.F)(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);let e="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:"e-week-header"}),this.weekNumber&&(e+='<th class="e-week-number"></th>',"calendar"===this.getModuleName()?Object(Ae.u)([this.element],""+Xo):Object(Ae.u)([this.calendarElement],""+Xo));const t=this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek);for(let i=0;i<=6;i++)e+='<th  class="">'+this.toCapitalize(t[i])+"</th>";e="<tr>"+e+"</tr>",this.tableHeadElement.innerHTML=e,this.table.appendChild(this.tableHeadElement)}createContentBody(){switch("calendar"===this.getModuleName()?Object(Ae.T)(this.element.querySelectorAll(".e-content tbody")[0])||Object(Ae.F)(this.element.querySelectorAll(".e-content tbody")[0]):Object(Ae.T)(this.calendarElement.querySelectorAll(".e-content tbody")[0])||Object(Ae.F)(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}}updateFooter(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today"))}createContentFooter(){if(this.showTodayButton){const e=new Date(+this.min),t=new Date(+this.max),i={today:"Today"};this.globalize=new Ae.n(this.locale),this.l10=new Ae.p(this.getModuleName(),i,this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),Object(Ae.gb)(this.todayElement),this.updateFooter(),Object(Ae.u)([this.todayElement],["e-btn",Zo,"e-flat","e-primary","e-css"]),+new Date(e.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(t.setHours(0,0,0,0))&&!this.todayDisabled||Object(Ae.u)([this.todayElement],Ko),this.footer=this.createElement("div",{className:"e-footer-container"}),this.footer.appendChild(this.todayElement),"calendar"===this.getModuleName()&&this.element.appendChild(this.footer),"datepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),"datetimepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains(Ko)||Ae.l.add(this.todayElement,"click",this.todayButtonClick,this)}}wireEvents(e,t,i,s){Ae.l.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=Object(Ae.G)(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModule="calendar"===this.getModuleName()?new Ae.o(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):new Ae.o(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})}dateWireEvents(e,t,i,s){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=Object(Ae.G)(this.defaultKeyConfigs,i),this.serverModuleName=s}todayButtonClick(e,t,i){this.showTodayButton&&(this.effect=this.currentView()===this.depth?"":"e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(t)),i):this.navigateTo("Month",new Date(this.checkValue(t)),i))}resetCalendar(){this.calendarElement&&Object(Ae.F)(this.calendarElement),this.tableBodyElement&&Object(Ae.F)(this.tableBodyElement),this.table&&Object(Ae.F)(this.table),this.tableHeadElement&&Object(Ae.F)(this.tableHeadElement),this.nextIcon&&Object(Ae.F)(this.nextIcon),this.previousIcon&&Object(Ae.F)(this.previousIcon),this.footer&&Object(Ae.F)(this.footer),this.todayElement=null,this.renderDayCellArgs=null,this.calendarElement=this.tableBodyElement=this.footer=this.tableHeadElement=this.nextIcon=this.previousIcon=this.table=null}keyActionHandle(e,t,i){const s=this.tableBodyElement.querySelector("tr td.e-focused-date");let n;n=i?Object(Ae.T)(s)||+t!==parseInt(s.getAttribute("id").split("_")[0],10)?this.tableBodyElement.querySelector("tr td.e-selected"):s:this.tableBodyElement.querySelector("tr td.e-selected");let o=this.getViewNumber(this.currentView());const r=this.getViewNumber(this.depth),l=o===r&&this.getViewNumber(this.start)>=r;switch(this.effect="",e.action){case"moveLeft":this.keyboardNavigate(-1,o,e,this.max,this.min),e.preventDefault();break;case"moveRight":this.keyboardNavigate(1,o,e,this.max,this.min),e.preventDefault();break;case"moveUp":this.keyboardNavigate(0===o?-7:-4,o,e,this.max,this.min),e.preventDefault();break;case"moveDown":this.keyboardNavigate(0===o?7:4,o,e,this.max,this.min),e.preventDefault();break;case"select":if(e.target===this.todayElement)this.todayButtonClick(e,t);else{const i=Object(Ae.T)(s)?n:s;if(!Object(Ae.T)(i)&&!i.classList.contains(Ko))if(l){const t=new Date(parseInt(""+i.id,0));this.selectDate(e,t,i)}else this.contentClick(null,--o,i,t)}break;case"controlUp":this.title(),e.preventDefault();break;case"controlDown":Object(Ae.T)(s)&&(Object(Ae.T)(n)||l)||this.contentClick(null,--o,s||n,t),e.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),Object(Ae.F)(this.tableBodyElement),0===o?this.renderMonths(e):1===o?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,o),Object(Ae.F)(this.tableBodyElement),0===o?this.renderMonths(e):1===o?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),e.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),e.preventDefault()}"calendar"===this.getModuleName()&&this.table.focus()}keyboardNavigate(e,t,i,s,n){const o=new Date(this.checkValue(this.currentDate));switch(t){case 2:this.addYears(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(Object(Ae.F)(this.tableBodyElement),this.renderDecades(i)):this.currentDate=o;break;case 1:this.addMonths(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(Object(Ae.F)(this.tableBodyElement),this.renderYears(i)):this.currentDate=o;break;case 0:this.addDay(this.currentDate,e,i,s,n),this.isMinMaxRange(this.currentDate)?(Object(Ae.F)(this.tableBodyElement),this.renderMonths(i)):this.currentDate=o}}preRender(e){this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=e=>{this.triggerNavigate(e)}}minMaxDate(e){const t=new Date(new Date(+e).setHours(0,0,0,0)),i=new Date(new Date(+this.min).setHours(0,0,0,0)),s=new Date(new Date(+this.max).setHours(0,0,0,0));return+t!=+i&&+t!=+s||(+e<+this.min&&(e=new Date(+this.min)),+e>+this.max&&(e=new Date(+this.max))),e}renderMonths(e,t,i){const s=this.weekNumber?8:7;let n;n="Gregorian"===this.calendarMode?this.renderDays(this.currentDate,t,null,null,i):this.islamicModule.islamicRenderDays(this.currentDate,t),this.createContentHeader(),"Gregorian"===this.calendarMode?this.renderTemplate(n,s,_o,e,t):this.islamicModule.islamicRenderTemplate(n,s,_o,e,t)}renderDays(e,t,i,s,n){const o=[],r=n?new Date(+e):this.getDate(new Date,this.timezone);let l,a=new Date(this.checkValue(e));const h=a.getMonth();this.titleUpdate(e,"days");const c=a;for(a=new Date(c.getFullYear(),c.getMonth(),0,c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds());a.getDay()!==this.firstDayOfWeek;)this.setStartDate(a,-864e5);for(let d=0;d<42;++d){const n=this.createElement("td",{className:er}),c=this.createElement("span");if(d%7==0&&this.weekNumber){const e="FirstDay"===this.weekRule?6:"FirstFourDayWeek"===this.weekRule?3:0,t=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e);c.textContent=""+this.getWeek(t),n.appendChild(c),Object(Ae.u)([n],""+Xo),o.push(n)}l=new Date(+a),a=this.minMaxDate(a);const p={type:"dateTime",skeleton:"full"},u=this.globalize.parseDate(this.globalize.formatDate(a,p),p),m=this.dayCell(a),g=this.globalize.formatDate(a,{type:"date",skeleton:"full"}),b=this.createElement("span");b.textContent=this.globalize.formatDate(a,{format:"d",type:"date",skeleton:"yMd"});const f=this.min>a||this.max<a;f?(Object(Ae.u)([m],Ko),Object(Ae.u)([m],Yo)):b.setAttribute("title",""+g),h!==a.getMonth()&&Object(Ae.u)([m],Vo),0!==a.getDay()&&6!==a.getDay()||Object(Ae.u)([m],"e-weekend"),m.appendChild(b),this.renderDayCellArgs={date:a,isDisabled:!1,element:m,isOutOfRange:f};const y=this.renderDayCellArgs;if(this.renderDayCellEvent(y),y.isDisabled){const e=new Date(this.checkValue(t)),n=new Date(this.checkValue(y.date));if(i){if(!Object(Ae.T)(s)&&s.length>0)for(let t=0;t<s.length;t++)+new Date(this.globalize.formatDate(y.date,{type:"date",skeleton:"yMd"}))==+new Date(this.globalize.formatDate(s[t],{type:"date",skeleton:"yMd"}))&&(s.splice(t,1),t=-1)}else e&&+e==+n&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!m.classList.contains(Qo)&&(Object(Ae.u)([m],Ko),Object(Ae.u)([m],Yo),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));const v=m.classList.contains(Vo),C=m.classList.contains(Ko);if(C||Ae.l.add(m,"click",this.clickHandler,this),!i||Object(Ae.T)(s)||C)!C&&this.getDateVal(a,t)&&Object(Ae.u)([m],Qo);else{for(let i=0;i<s.length;i++){const n={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};this.globalize.formatDate(a,n)===this.globalize.formatDate(s[i],n)&&this.getDateVal(a,s[i])||this.getDateVal(a,t)?Object(Ae.u)([m],Qo):this.updateFocus(v,C,a,m,e)}s.length<=0&&this.updateFocus(v,C,a,m,e)}this.updateFocus(v,C,a,m,e),u.getFullYear()===r.getFullYear()&&u.getMonth()===r.getMonth()&&u.getDate()===r.getDate()&&Object(Ae.u)([m],Zo),o.push(this.renderDayCellArgs.element),a=new Date(+l),this.addDay(a,1,null,this.max,this.min)}return o}updateFocus(e,t,i,s,n){n.getDate()!==i.getDate()||e||t?(n>=this.max&&parseInt(s.id,0)===+this.max&&!e&&!t&&Object(Ae.u)([s],$o),n<=this.min&&parseInt(s.id,0)===+this.min&&!e&&!t&&Object(Ae.u)([s],$o)):Object(Ae.u)([s],$o)}renderYears(e,t){this.removeTableHeadElement();const i=[],s=Object(Ae.T)(t),n=new Date(this.checkValue(this.currentDate)),o=n.getMonth(),r=n.getFullYear(),l=n,a=l.getFullYear(),h=new Date(this.checkValue(this.min)).getFullYear(),c=new Date(this.checkValue(this.min)).getMonth(),d=new Date(this.checkValue(this.max)).getFullYear(),p=new Date(this.checkValue(this.max)).getMonth();l.setMonth(0),this.titleUpdate(this.currentDate,"months"),l.setDate(1);for(let u=0;u<12;++u){const e=this.dayCell(l),n=this.createElement("span"),m=t&&t.getMonth()===l.getMonth(),g=t&&t.getFullYear()===r&&m;n.textContent=this.toCapitalize(this.globalize.formatDate(l,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(a<h||u<c&&a===h)||this.max&&(a>d||u>p&&a>=d)?Object(Ae.u)([e],Ko):!s&&g?Object(Ae.u)([e],Qo):l.getMonth()===o&&this.currentDate.getMonth()===o&&Object(Ae.u)([e],$o),l.setDate(1),l.setMonth(l.getMonth()+1),e.classList.contains(Ko)||Ae.l.add(e,"click",this.clickHandler,this),e.appendChild(n),i.push(e)}this.renderTemplate(i,4,Go,e,t)}renderDecades(e,t){this.removeTableHeadElement();const i=[],s=new Date(this.checkValue(this.currentDate));s.setMonth(0),s.setDate(1);const n=s.getFullYear(),o=new Date(s.setFullYear(n-n%10)),r=new Date(s.setFullYear(n-n%10+9)),l=o.getFullYear(),a=r.getFullYear(),h=this.globalize.formatDate(o,{format:null,type:"dateTime",skeleton:"y"}),c=this.globalize.formatDate(r,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=h+" - "+c;const d=new Date(n-n%10-1,0,1).getFullYear();for(let p=0;p<12;++p){const e=d+p;s.setFullYear(e);const n=this.dayCell(s);Object(Ae.w)(n,{role:"gridcell"});const o=this.createElement("span");o.textContent=this.globalize.formatDate(s,{format:null,type:"dateTime",skeleton:"y"}),e<l||e>a?(Object(Ae.u)([n],"e-other-year"),Object(Ae.T)(t)||s.getFullYear()!==t.getFullYear()||Object(Ae.u)([n],Qo),(e<new Date(this.checkValue(this.min)).getFullYear()||e>new Date(this.checkValue(this.max)).getFullYear())&&Object(Ae.u)([n],Ko)):e<new Date(this.checkValue(this.min)).getFullYear()||e>new Date(this.checkValue(this.max)).getFullYear()?Object(Ae.u)([n],Ko):Object(Ae.T)(t)||s.getFullYear()!==t.getFullYear()?s.getFullYear()!==this.currentDate.getFullYear()||n.classList.contains(Ko)||Object(Ae.u)([n],$o):Object(Ae.u)([n],Qo),n.classList.contains(Ko)||Ae.l.add(n,"click",this.clickHandler,this),n.appendChild(o),i.push(n)}this.renderTemplate(i,4,"e-decade",e,t)}dayCell(e){const t={skeleton:"full",type:"dateTime",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},i=this.globalize.parseDate(this.globalize.formatDate(e,t),t).valueOf(),s={className:er,attrs:{id:""+Object(Ae.Q)(""+i),"aria-selected":"false",role:"gridcell"}};return this.createElement("td",s)}firstDay(e){const t="Decade"!==this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+Vo):this.tableBodyElement.querySelectorAll("td:not(.e-other-year");if(t.length)for(let i=0;i<t.length;i++)if(!t[i].classList.contains(Ko)){e=new Date(parseInt(t[i].id,0));break}return e}lastDay(e,t){const i=new Date(e.getFullYear(),e.getMonth()+1,0);if(2!==t){const t=Math.abs(i.getTimezoneOffset()-this.firstDay(e).getTimezoneOffset());return t&&i.setHours(this.firstDay(e).getHours()+t/60),this.findLastDay(i)}return this.findLastDay(this.firstDay(i))}checkDateValue(e){return!Object(Ae.T)(e)&&e instanceof Date&&!isNaN(+e)?e:null}findLastDay(e){const t="Decade"===this.currentView()?this.tableBodyElement.querySelectorAll("td:not(.e-other-year"):this.tableBodyElement.querySelectorAll("td:not(."+Vo);if(t.length)for(let i=t.length-1;i>=0;i--)if(!t[i].classList.contains(Ko)){e=new Date(parseInt(t[i].id,0));break}return e}removeTableHeadElement(){"calendar"===this.getModuleName()?Object(Ae.T)(this.element.querySelectorAll(".e-content table thead")[0])||Object(Ae.F)(this.tableHeadElement):Object(Ae.T)(this.calendarElement.querySelectorAll(".e-content table thead")[0])||Object(Ae.F)(this.tableHeadElement)}renderTemplate(e,t,i,s,n){const o=this.getViewNumber(this.currentView());let r;this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),Object(Ae.eb)([this.contentElement,this.headerElement],[_o,Uo,Go]),Object(Ae.u)([this.contentElement,this.headerElement],[i]);let l=t,a=0;for(let h=0;h<e.length/t;++h){for(r=this.createElement("tr",{attrs:{role:"row"}}),a=0+a;a<l;a++)e[a].classList.contains("e-week-number")||Object(Ae.T)(e[a].children[0])||(Object(Ae.u)([e[a].children[0]],["e-day"]),Object(Ae.gb)(e[a].children[0],{duration:600,isCenterRipple:!0})),r.appendChild(e[a]),this.weekNumber&&7===a&&e[7].classList.contains(Vo)&&Object(Ae.u)([r],Jo),!this.weekNumber&&6===a&&e[6].classList.contains(Vo)&&Object(Ae.u)([r],Jo),this.weekNumber?41===a&&e[41].classList.contains(Vo)&&Object(Ae.u)([r],Jo):35===a&&e[35].classList.contains(Vo)&&Object(Ae.u)([r],Jo);l+=t,a+=0,this.tableBodyElement.appendChild(r)}this.table.querySelector("tbody").className=this.effect,"Gregorian"===this.calendarMode?this.iconHandler():this.islamicModule.islamicIconHandler(),(o!==this.getViewNumber(this.currentView())||0===o&&o!==this.getViewNumber(this.currentView()))&&this.navigateHandler(s),this.setAriaActiveDescendant()}clickHandler(e,t){this.clickEventEmitter(e);const i=e.currentTarget,s=this.getViewNumber(this.currentView());i.classList.contains(Vo)?this.contentClick(e,0,null,t):s===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)||2===s?this.contentClick(e,1,null,t):i.classList.contains(Vo)||0!==s?this.contentClick(e,0,i,t):this.selectDate(e,this.getIdValue(e,null),null),"calendar"===this.getModuleName()&&this.table.focus()}clickEventEmitter(e){e.preventDefault()}contentClick(e,t,i,s){const n=this.getViewNumber(this.currentView()),o=this.getIdValue(e,i);switch(t){case 0:n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(Object(Ae.F)(this.tableBodyElement),this.currentDate=o,this.effect=tr,this.renderMonths(e)):("Gregorian"===this.calendarMode?(this.currentDate.setMonth(o.getMonth()),o.getMonth()>0&&this.currentDate.getMonth()!==o.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(o.getFullYear())):this.currentDate=o,this.effect=tr,Object(Ae.F)(this.tableBodyElement),this.renderMonths(e));break;case 1:if(n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(e,o,null);else{if("Gregorian"===this.calendarMode)this.currentDate.setFullYear(o.getFullYear());else{const e=this.islamicModule.getIslamicDate(o);this.currentDate=this.islamicModule.toGregorian(e.year,e.month,1)}this.effect=tr,Object(Ae.F)(this.tableBodyElement),this.renderYears(e)}}}switchView(e,t,i,s){switch(e){case 0:Object(Ae.F)(this.tableBodyElement),this.renderMonths(t,null,s),i&&!Object(Ae.T)(this.tableBodyElement.querySelectorAll("."+$o)[0])&&this.tableBodyElement.querySelectorAll("."+$o)[0].classList.remove($o);break;case 1:Object(Ae.F)(this.tableBodyElement),this.renderYears(t);break;case 2:Object(Ae.F)(this.tableBodyElement),this.renderDecades(t)}}getModuleName(){return"calendar"}requiredModules(){const e=[];return this&&e.push({args:[this],member:"islamic"}),e}getPersistData(){return this.addOnPersist(["value"])}onPropertyChanged(e,t,i,s){this.effect="";for(const n of Object.keys(e))switch(n){case"enableRtl":e.enableRtl?"calendar"===this.getModuleName()?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):"calendar"===this.getModuleName()?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),this.setProperties("min"===n?{min:this.checkDateValue(new Date(this.checkValue(e.min)))}:{max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.setProperties({start:this.currentView()},!0),this.tableBodyElement&&Object(Ae.F)(this.tableBodyElement),this.minMaxUpdate(),i&&this.validateValues(i,s),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(Object(Ae.F)(this.todayElement),Object(Ae.F)(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(Object(Ae.eb)([this.todayElement],Ko),Object(Ae.F)(this.todayElement),Object(Ae.F)(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":case"weekRule":this.checkView(),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody());break;case"locale":this.globalize=new Ae.n(this.locale),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody()),this.l10.setLocale(this.locale),this.updateFooter();break;case"showTodayButton":e.showTodayButton?this.createContentFooter():Object(Ae.T)(this.todayElement)||Object(Ae.T)(this.footer)||(Object(Ae.F)(this.todayElement),Object(Ae.F)(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:e.showTodayButton},!0)}}validateValues(e,t){if(e&&!Object(Ae.T)(t)&&t.length>0){const e=this.copyValues(t);for(let t=0;t<e.length;t++){const i="Gregorian"===this.calendarMode?"gregorian":"islamic";let s;s=this.globalize.formatDate(e[t],"Gregorian"===this.calendarMode?{type:"date",skeleton:"yMd"}:{type:"dateTime",skeleton:"full",calendar:"islamic"});const n=this.globalize.formatDate(this.min,{type:"date",skeleton:"yMd",calendar:i}),o=this.globalize.formatDate(this.max,{type:"date",skeleton:"yMd",calendar:i});(+new Date(s)<+new Date(n)||+new Date(s)>+new Date(o))&&(e.splice(t,1),t=-1)}this.setProperties({values:e},!0)}}setValueUpdate(){Object(Ae.T)(this.tableBodyElement)||(Object(Ae.F)(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())}copyValues(e){const t=[];if(!Object(Ae.T)(e)&&e.length>0)for(let i=0;i<e.length;i++)t.push(new Date(+e[i]));return t}titleUpdate(e,t){const i=new Ae.n(this.locale);let s,n;const o="Gregorian"===this.calendarMode?"gregorian":"islamic";switch("Gregorian"===this.calendarMode?(s=i.formatDate(e,{type:"dateTime",skeleton:"yMMMM",calendar:o}),n=i.formatDate(e,{format:null,type:"dateTime",skeleton:"y",calendar:o})):(s=i.formatDate(e,{type:"dateTime",format:"MMMM y",calendar:o}),n=i.formatDate(e,{type:"dateTime",format:"y",calendar:o})),t){case"days":this.headerTitleElement.textContent=this.toCapitalize(s);break;case"months":this.headerTitleElement.textContent=n}}setActiveDescendant(){let e;const t=this.tableBodyElement.querySelector("tr td.e-focused-date"),i=this.tableBodyElement.querySelector("tr td.e-selected"),s="Gregorian"===this.calendarMode?"gregorian":"islamic";let n;const o=this.currentView();return n=this.globalize.formatDate(this.currentDate,"Month"===o?{type:"date",skeleton:"full",calendar:s}:"Year"===o?"islamic"!==s?{type:"date",skeleton:"yMMMM",calendar:s}:{type:"date",skeleton:"GyMMM",calendar:s}:{format:null,type:"date",skeleton:"y",calendar:s}),(i||t)&&(Object(Ae.T)(i)||i.setAttribute("aria-selected","true"),(t||i).setAttribute("aria-label",n),e=(t||i).getAttribute("id")),e}iconHandler(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}}destroy(){("calendar"===this.getModuleName()&&this.element||this.calendarElement&&this.element)&&Object(Ae.eb)([this.element],[No]),"calendar"===this.getModuleName()&&this.element&&(Ae.l.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&Ae.l.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),Object(Ae.T)(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element&&(this.element.innerHTML=""),super.destroy()}title(e){let t=this.getViewNumber(this.currentView());this.effect=tr,this.switchView(++t,e)}getViewNumber(e){return"Month"===e?0:"Year"===e?1:2}navigateTitle(e){e.preventDefault(),this.title(e),"calendar"===this.getModuleName()&&this.table.focus()}previous(){this.effect="";const e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(e)}}navigatePrevious(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()}next(){this.effect="";const e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(e)}}navigateNext(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()}navigateTo(e,t,i){+t>=+this.min&&+t<=+this.max&&(this.currentDate=t),+t<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+t>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(e)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(e))&&(e=this.depth),this.switchView(this.getViewNumber(e),null,null,i)}currentView(){return this.contentElement.classList.contains(Go)?"Year":this.contentElement.classList.contains(Uo)?"Decade":"Month"}getDateVal(e,t){return!Object(Ae.T)(t)&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}getCultureObjects(e,t){const i=".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),s=".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase();return"Gregorian"===this.calendarMode?Object(Ae.R)("main."+this.locale+i,e):Object(Ae.R)("main."+this.locale+s,e)}getWeek(e){const t=new Date(this.checkValue(e)).valueOf(),i=new Date(e.getFullYear(),0,1).valueOf();return Math.ceil((t-i+sr)/sr/7)}setStartDate(e,t){const i=e.getTimezoneOffset(),s=new Date(e.getTime()+t),n=s.getTimezoneOffset()-i;e.setTime(s.getTime()+6e4*n)}addMonths(e,t){if("Gregorian"===this.calendarMode){const i=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{const i=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(i.year,i.month+t,1)}}addYears(e,t){if("Gregorian"===this.calendarMode){const i=e.getDate();e.setDate(1),e.setFullYear(e.getFullYear()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{const i=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(i.year+t,i.month,1)}}getIdValue(e,t){let i;i=e?e.currentTarget:t;const s={type:"dateTime",skeleton:"full",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},n=this.globalize.formatDate(new Date(parseInt(""+i.getAttribute("id"),0)),s),o=this.globalize.parseDate(n,s),r=o.valueOf()-o.valueOf()%1e3;return new Date(r)}adjustLongHeaderSize(){Object(Ae.eb)([this.element],ir),"Wide"===this.dayHeaderFormat&&Object(Ae.u)(["calendar"===this.getModuleName()?this.element:this.calendarElement],ir)}selectDate(e,t,i,s,n){const o=i||e.currentTarget;if(this.isDateSelected=!1,"Decade"===this.currentView())this.setDateDecade(this.currentDate,t.getFullYear());else if("Year"===this.currentView())this.setDateYear(this.currentDate,t);else{if(s&&!this.checkPresentDate(t,n)){const e=this.copyValues(n);!Object(Ae.T)(n)&&e.length>0?(e.push(new Date(this.checkValue(t))),this.setProperties({values:e},!0),this.setProperties({value:n[n.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(t))]},!0)}else this.setProperties({value:new Date(this.checkValue(t))},!0);this.currentDate=new Date(this.checkValue(t))}let r=Object(Ae.A)(o,".e-calendar");if(Object(Ae.T)(r)&&(r=this.tableBodyElement),s||Object(Ae.T)(r.querySelector(".e-selected"))||Object(Ae.eb)([r.querySelector(".e-selected")],Qo),s||Object(Ae.T)(r.querySelector("."+$o))||Object(Ae.eb)([r.querySelector("."+$o)],$o),s){const e=this.copyValues(n),i=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td"));for(let t=0;t<i.length;t++){const e=r.querySelectorAll("td."+$o)[0],s=r.querySelectorAll("td.e-selected")[0];i[t]===e&&Object(Ae.eb)([i[t]],$o),i[t]!==s||this.checkPresentDate(new Date(parseInt(s.getAttribute("id").split("_")[0],10)),n)||Object(Ae.eb)([i[t]],Qo)}if(o.classList.contains(Qo)){Object(Ae.eb)([o],Qo);for(let i=0;i<e.length;i++){const s={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};if(this.globalize.formatDate(t,s)===this.globalize.formatDate(e[i],s)){const t=e.indexOf(e[i]);e.splice(t,1),Object(Ae.u)([o],$o)}}this.setProperties({values:e},!0)}else Object(Ae.u)([o],Qo)}else Object(Ae.u)([o],Qo);this.isDateSelected=!0}checkPresentDate(e,t){let i=!1;if(!Object(Ae.T)(t))for(let s=0;s<t.length;s++){const n="Gregorian"===this.calendarMode?"gregorian":"islamic";this.globalize.formatDate(e,{format:null,type:"date",skeleton:"short",calendar:n})===this.globalize.formatDate(t[s],{format:null,type:"date",skeleton:"short",calendar:n})&&(i=!0)}return i}setAriaActiveDescendant(){Object(Ae.w)(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})}previousIconHandler(e){e?(Ae.l.remove(this.previousIcon,"click",this.navigatePreviousHandler),Object(Ae.u)([this.previousIcon],"e-disabled"),Object(Ae.u)([this.previousIcon],""+Yo),this.previousIcon.setAttribute("aria-disabled","true")):(Ae.l.add(this.previousIcon,"click",this.navigatePreviousHandler),Object(Ae.eb)([this.previousIcon],"e-disabled"),Object(Ae.eb)([this.previousIcon],""+Yo),this.previousIcon.setAttribute("aria-disabled","false"))}renderDayCellEvent(e){Object(Ae.G)(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)}navigatedEvent(e){Object(Ae.G)(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)}triggerNavigate(e){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(e)}nextIconHandler(e){e?(Ae.l.remove(this.nextIcon,"click",this.navigateNextHandler),Object(Ae.u)([this.nextIcon],Ko),Object(Ae.u)([this.nextIcon],Yo),this.nextIcon.setAttribute("aria-disabled","true")):(Ae.l.add(this.nextIcon,"click",this.navigateNextHandler),Object(Ae.eb)([this.nextIcon],Ko),Object(Ae.eb)([this.nextIcon],Yo),this.nextIcon.setAttribute("aria-disabled","false"))}compare(e,t,i){let s,n,o=t.getFullYear();return s=o,n=0,i&&(o-=o%i,s=o-o%i+i-1),e.getFullYear()>s?n=1:e.getFullYear()<o&&(n=-1),n}isMinMaxRange(e){return+e>=+this.min&&+e<=+this.max}isMonthYearRange(e){if("Gregorian"===this.calendarMode)return e.getMonth()>=this.min.getMonth()&&e.getFullYear()>=this.min.getFullYear()&&e.getMonth()<=this.max.getMonth()&&e.getFullYear()<=this.max.getFullYear();{const t=this.islamicModule.getIslamicDate(e);return t.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&t.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&t.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&t.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year}}compareYear(e,t){return this.compare(e,t,0)}compareDecade(e,t){return this.compare(e,t,10)}shiftArray(e,t){return e.slice(t).concat(e.slice(0,t))}addDay(e,t,i,s,n){let o=t;const r=new Date(+e);if(!Object(Ae.T)(this.tableBodyElement)&&!Object(Ae.T)(i)){for(;this.findNextTD(new Date(+e),o,s,n);)o+=t;const i=new Date(r.setDate(r.getDate()+o));o=+i>+s||+i<+n?o===t?t-t:t:o}e.setDate(e.getDate()+o)}findNextTD(e,t,i,s){const n=new Date(e.setDate(e.getDate()+t));let o=[],r=!1;if((!Object(Ae.T)(n)&&n.getMonth())===(!Object(Ae.T)(this.currentDate)&&this.currentDate.getMonth())){let e;e="Gregorian"===this.calendarMode?this.renderDays(n):this.islamicModule.islamicRenderDays(this.currentDate,n),o=e.filter(e=>e.classList.contains(Ko))}else o=this.tableBodyElement.querySelectorAll("td.e-disabled");if(+n<=+i&&+n>=+s&&o.length)for(let l=0;l<o.length&&(r=+n==+new Date(parseInt(o[l].id,0)),!r);l++);return r}getMaxDays(e){let t;const i=new Date(this.checkValue(e));t=28;const s=i.getMonth();for(;i.getMonth()===s;)++t,i.setDate(t);return t-1}setDateDecade(e,t){e.setFullYear(t),this.setProperties({value:new Date(this.checkValue(e))},!0)}setDateYear(e,t){e.setFullYear(t.getFullYear(),t.getMonth(),e.getDate()),t.getMonth()!==e.getMonth()&&(e.setDate(0),this.currentDate=new Date(this.checkValue(t))),this.setProperties({value:new Date(this.checkValue(e))},!0)}compareMonth(e,t){let i;return i=e.getFullYear()>t.getFullYear()?1:e.getFullYear()<t.getFullYear()?-1:e.getMonth()===t.getMonth()?0:e.getMonth()>t.getMonth()?1:-1,i}checkValue(e){return e instanceof Date?e.toUTCString():""+e}checkView(){"Decade"!==this.start&&"Year"!==this.start&&this.setProperties({start:"Month"},!0),"Decade"!==this.depth&&"Year"!==this.depth&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)}getDate(e,t){return t&&(e=new Date(e.toLocaleString("en-US",{timeZone:t}))),e}};return Ho([Object(Ae.r)(new Date(1900,0,1))],e.prototype,"min",void 0),Ho([Object(Ae.r)(!0)],e.prototype,"enabled",void 0),Ho([Object(Ae.r)(null)],e.prototype,"cssClass",void 0),Ho([Object(Ae.r)(new Date(2099,11,31))],e.prototype,"max",void 0),Ho([Object(Ae.r)(null)],e.prototype,"firstDayOfWeek",void 0),Ho([Object(Ae.r)("Gregorian")],e.prototype,"calendarMode",void 0),Ho([Object(Ae.r)("Month")],e.prototype,"start",void 0),Ho([Object(Ae.r)("Month")],e.prototype,"depth",void 0),Ho([Object(Ae.r)(!1)],e.prototype,"weekNumber",void 0),Ho([Object(Ae.r)("FirstDay")],e.prototype,"weekRule",void 0),Ho([Object(Ae.r)(!0)],e.prototype,"showTodayButton",void 0),Ho([Object(Ae.r)("Short")],e.prototype,"dayHeaderFormat",void 0),Ho([Object(Ae.r)(!1)],e.prototype,"enablePersistence",void 0),Ho([Object(Ae.r)(null)],e.prototype,"keyConfigs",void 0),Ho([Object(Ae.r)(null)],e.prototype,"serverTimezoneOffset",void 0),Ho([Object(Ae.k)()],e.prototype,"created",void 0),Ho([Object(Ae.k)()],e.prototype,"destroyed",void 0),Ho([Object(Ae.k)()],e.prototype,"navigated",void 0),Ho([Object(Ae.k)()],e.prototype,"renderDayCell",void 0),e=Ho([Ae.q],e),e})(),or=(()=>{let e=class extends nr{constructor(e,t){super(e,t)}render(){if("Islamic"===this.calendarMode&&void 0===this.islamicModule&&Object(Ae.nb)("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&"object"==typeof this.values&&!Object(Ae.T)(this.values)&&this.values.length>0){const e=[],t=[];for(let i=0;i<this.values.length;i++)-1===e.indexOf(+this.values[i])&&(e.push(+this.values[i]),t.push(this.values[i]));this.setProperties({values:t},!0);for(let i=0;i<this.values.length;i++)if(!this.checkDateValue(this.values[i]))if("string"==typeof this.values[i]&&this.checkDateValue(new Date(this.checkValue(this.values[i])))){const e=new Date(this.checkValue(this.values[i]));this.values.splice(i,1),this.values.splice(i,0,e)}else this.values.splice(i,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),"calendar"===this.getModuleName()&&(this.setEnable(this.enabled),this.setClass(this.cssClass)),super.render(),"calendar"===this.getModuleName()){const e=Object(Ae.A)(this.element,"form");e&&Ae.l.add(e,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()}setEnable(e){e?Object(Ae.eb)([this.element],Ko):Object(Ae.u)([this.element],Ko)}setClass(e,t){Object(Ae.T)(t)||(t=t.replace(/\s+/g," ").trim()),Object(Ae.T)(e)||(e=e.replace(/\s+/g," ").trim()),Object(Ae.T)(t)||""===t||Object(Ae.eb)([this.element],t.split(" ")),Object(Ae.T)(e)||Object(Ae.u)([this.element],e.split(" "))}isDayLightSaving(){const e=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(t,e)}setTimeZone(e){if(!Object(Ae.T)(this.serverTimezoneOffset)&&this.value){let t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*60*1e3)}}formResetHandler(){this.setProperties({value:null},!0)}validateDate(){"string"==typeof this.value&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),super.validateDate(this.value),!Object(Ae.T)(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)}minMaxUpdate(){"calendar"===this.getModuleName()&&(!Object(Ae.T)(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!Object(Ae.T)(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),"calendar"===this.getModuleName()||Object(Ae.T)(this.value)?super.minMaxUpdate(this.value):!Object(Ae.T)(this.value)&&this.value<this.min&&this.min<=this.max?super.minMaxUpdate(this.min):!Object(Ae.T)(this.value)&&this.value>this.max&&this.min<=this.max&&super.minMaxUpdate(this.max)}generateTodayVal(e){let t=new Date;return Object(Ae.T)(this.timezone)||(t=super.getDate(t,this.timezone)),e&&Object(Ae.T)(this.timezone)?(t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds()),t.setMilliseconds(e.getMilliseconds())):t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),t}todayButtonClick(e){if(this.showTodayButton){const t=this.generateTodayVal(this.value);if(this.setProperties({value:t},!0),this.isTodayClicked=!0,this.todayButtonEvent=e,this.isMultiSelection){const e=this.copyValues(this.values);super.checkPresentDate(t,this.values)||(e.push(t),this.setProperties({values:e}))}super.todayButtonClick(e,new Date(+this.value))}}keyActionHandle(e){super.keyActionHandle(e,this.value,this.isMultiSelection)}preRender(){this.changeHandler=e=>{this.triggerChange(e)},this.checkView(),super.preRender(this.value)}createContent(){this.previousDate=this.value,this.previousDateTime=this.value,super.createContent()}minMaxDate(e){return super.minMaxDate(e)}renderMonths(e,t,i){super.renderMonths(e,this.value,i)}renderDays(e,t,i,s,n){const o=super.renderDays(e,this.value,this.isMultiSelection,this.values,n);return this.isMultiSelection&&super.validateValues(this.isMultiSelection,this.values),o}renderYears(e){"Gregorian"===this.calendarMode?super.renderYears(e,this.value):this.islamicModule.islamicRenderYears(e,this.value)}renderDecades(e){"Gregorian"===this.calendarMode?super.renderDecades(e,this.value):this.islamicModule.islamicRenderDecade(e,this.value)}renderTemplate(e,t,i,s){"Gregorian"===this.calendarMode?super.renderTemplate(e,t,i,s,this.value):this.islamicModule.islamicRenderTemplate(e,t,i,s,this.value),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}clickHandler(e){const t=e.currentTarget;if(this.isPopupClicked=!0,t.classList.contains(Vo))if(this.isMultiSelection){const t=this.copyValues(this.values);t.push(this.getIdValue(e,null)),this.setProperties({values:t},!0),this.setProperties({value:this.values[this.values.length-1]},!0)}else this.setProperties({value:this.getIdValue(e,null)},!0);const i=this.currentView();super.clickHandler(e,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!Object(Ae.T)(this.tableBodyElement.querySelectorAll("."+$o)[0])&&"Year"===i&&this.tableBodyElement.querySelectorAll("."+$o)[0].classList.remove($o)}switchView(e,t,i,s){super.switchView(e,t,this.isMultiSelection,s)}getModuleName(){return super.getModuleName(),"calendar"}getPersistData(){return super.getPersistData(),this.addOnPersist(["value","values"])}onPropertyChanged(e,t){this.effect="",this.rangeValidation(this.min,this.max);for(const i of Object.keys(e))switch(i){case"value":this.isDateSelected&&("string"==typeof e.value?this.setProperties({value:new Date(this.checkValue(e.value))},!0):e.value=new Date(this.checkValue(e.value)),isNaN(+this.value)&&this.setProperties({value:t.value},!0),this.update());break;case"values":if(this.isDateSelected){if("string"==typeof e.values||"number"==typeof e.values)this.setProperties({values:null},!0);else{const t=this.copyValues(this.values);for(let e=0;e<t.length;e++){const i=t[e];this.checkDateValue(i)&&!super.checkPresentDate(i,t)&&t.push(i)}this.setProperties({values:t},!0),this.values.length>0&&this.setProperties({value:e.values[e.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:e.isMultiSelection},!0),this.update());break;case"enabled":this.setEnable(this.enabled);break;case"cssClass":"calendar"===this.getModuleName()&&this.setClass(e.cssClass,t.cssClass);break;default:super.onPropertyChanged(e,t,this.isMultiSelection,this.values)}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange}destroy(){if(super.destroy(),"calendar"===this.getModuleName()){const e=Object(Ae.A)(this.element,"form");e&&Ae.l.remove(e,"reset",this.formResetHandler.bind(this))}}navigateTo(e,t,i){this.minMaxUpdate(),super.navigateTo(e,t,i)}currentView(){return super.currentView()}addDate(e){if("string"!=typeof e&&"number"!=typeof e){let t=this.copyValues(this.values);if("object"==typeof e&&e.length>0){const i=e;for(let e=0;e<i.length;e++)this.checkDateValue(i[e])&&!super.checkPresentDate(i[e],t)&&(!Object(Ae.T)(t)&&t.length>0?t.push(i[e]):t=[new Date(+i[e])])}else this.checkDateValue(e)&&!super.checkPresentDate(e,t)&&(!Object(Ae.T)(t)&&t.length>0?t.push(e):t=[new Date(+e)]);this.setProperties({values:t},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,t),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}}removeDate(e){if("string"!=typeof e&&"number"!=typeof e&&!Object(Ae.T)(this.values)&&this.values.length>0){const t=this.copyValues(this.values);if("object"==typeof e&&e.length>0){const i=e;for(let e=0;e<i.length;e++)for(let s=0;s<t.length;s++)+t[s]==+i[e]&&t.splice(s,1)}else for(let i=0;i<t.length;i++)+t[i]==+e&&t.splice(i,1);this.setProperties({values:t},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}}setTodayDate(e){const t=new Date(+e);this.setProperties({value:t},!0),super.todayButtonClick(null,t,!0)}update(){this.validateDate(),this.minMaxUpdate(),super.setValueUpdate()}selectDate(e,t,i){super.selectDate(e,t,i,this.isMultiSelection,this.values),this.isMultiSelection&&!Object(Ae.T)(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(e)}changeEvent(e){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))}triggerChange(e){!Object(Ae.T)(this.todayButtonEvent)&&this.isTodayClicked&&(e=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=e||null,this.changedArgs.isInteracted=!Object(Ae.T)(e),Object(Ae.T)(this.value)||this.setProperties({value:this.value},!0),this.isMultiSelection||+this.value===Number.NaN||+this.value==+this.previousDate&&(null!=this.previousDate||isNaN(+this.value))?Object(Ae.T)(this.values)||this.previousValues===this.values.length||(this.changeEvent(e),this.previousValues=this.values.length):this.changeEvent(e)}};return Ho([Object(Ae.r)(null)],e.prototype,"value",void 0),Ho([Object(Ae.r)(null)],e.prototype,"values",void 0),Ho([Object(Ae.r)(!1)],e.prototype,"isMultiSelection",void 0),Ho([Object(Ae.k)()],e.prototype,"change",void 0),e=Ho([Ae.q],e),e})();var rr=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const lr="e-datepicker",ar="e-popup-wrapper",hr="e-input-focus",cr="e-error",dr="e-active",pr="e-date-overflow",ur="e-selected",mr="e-non-edit",gr=["title","class","style"];let br=(()=>{let e=class extends or{constructor(e,t){super(e,t),this.previousElementValue="",this.isDateIconClicked=!1,this.isAltKeyPressed=!1,this.isInteracted=!0,this.invalidValueString=null,this.checkPreviousValue=null,this.maskedDateValue="",this.isAngular=!1,this.preventChange=!1,this.isIconClicked=!1,this.isDynamicValueChanged=!1,this.moduleName=this.getModuleName(),this.datepickerOptions=e}render(){this.initialize(),this.bindEvents(),this.renderComplete(),this.setTimeZone(this.serverTimezoneOffset)}setTimeZone(e){if(!Object(Ae.T)(this.serverTimezoneOffset)&&this.value){let t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*60*1e3),this.updateInput()}}isDayLightSaving(){const e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,t)}setAllowEdit(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):Object(Ae.w)(this.inputElement,{readonly:""}),this.updateIconState()}updateIconState(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&Object(Ae.eb)([this.inputWrapper.container],[mr]):""===this.inputElement.value?Object(Ae.eb)([this.inputWrapper.container],[mr]):Object(Ae.u)([this.inputWrapper.container],[mr])}initialize(){this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.checkInvalidValue(this.value),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.updateInput(),!this.enableMask||this.value||!this.maskedDateValue||"Always"!=this.floatLabelType&&this.floatLabelType&&this.placeholder||this.updateInputValue(this.maskedDateValue),this.previousElementValue=this.inputElement.value,this.previousDate=Object(Ae.T)(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value}createInput(){const e={"aria-live":"assertive","aria-atomic":"true","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"};if("datepicker"===this.getModuleName()){const e={placeholder:this.placeholder};this.globalize=new Ae.n(this.locale),this.l10n=new Ae.p("datepicker",e,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}let t=this.cssClass;Object(Ae.T)(this.cssClass)||""===this.cssClass||(t=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=$s.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,bindClearAction:!this.enableMask,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:t,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-date-icon e-icons"]},this.createElement),this.setWidth(this.width),this.inputElement.setAttribute("name",""!==this.inputElement.name?""+this.inputElement.getAttribute("name"):""+this.element.id),Object(Ae.w)(this.inputElement,e),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),$s.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),Object(Ae.u)([this.inputWrapper.container],"e-date-wrapper")}updateInput(e=!1){let t;if(!this.value||this.isCalendar()||e||this.disabledDates(),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(super.validateDate(),this.minMaxUpdates(),super.minMaxUpdate()),!Object(Ae.T)(this.value)){const e=this.value;let i;const s=Object(Ae.T)(this.formatString)?this.dateTimeFormat:this.formatString;if("datetimepicker"===this.getModuleName()?i=this.globalize.formatDate(this.value,"Gregorian"===this.calendarMode?{format:s,type:"dateTime",skeleton:"yMd"}:{format:s,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(t="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},i=this.globalize.formatDate(this.value,t)),+e<=+this.max&&+e>=+this.min)this.updateInputValue(i);else{const t=+e>=+this.max||!+this.value||!+this.value||+e<=+this.min;!this.strictMode&&t&&this.updateInputValue(i)}}Object(Ae.T)(this.value)&&this.strictMode&&(this.enableMask?(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})):this.updateInputValue("")),!this.strictMode&&Object(Ae.T)(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()}minMaxUpdates(){!Object(Ae.T)(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!Object(Ae.T)(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})}checkStringValue(e){let t=null,i=null,s=null;if("datetimepicker"===this.getModuleName()){const e=new Ae.n(this.locale);"Gregorian"===this.calendarMode?(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},s={format:e.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},s={format:e.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else i="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return t=this.checkDateValue(this.globalize.parseDate(e,i)),Object(Ae.T)(t)&&"datetimepicker"===this.getModuleName()&&(t=this.checkDateValue(this.globalize.parseDate(e,s))),t}checkInvalidValue(e){if(!(e instanceof Date||Object(Ae.T)(e))){let t=null,i=e;"number"==typeof e&&(i=e.toString());let s=null,n=null;if("datetimepicker"===this.getModuleName()){const e=new Ae.n(this.locale);"Gregorian"===this.calendarMode?(s={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},n={format:e.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(s={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},n={format:e.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else s="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};let o=!1;if("string"!=typeof i)i=null,o=!0;else if("string"==typeof i&&(i=i.trim()),t=this.checkStringValue(i),!t){let e=null,s=null;e=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,s=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!e.test(i)&&!s.test(i)||/^[a-zA-Z0-9- ]*$/.test(i)||isNaN(+new Date(this.checkValue(i)))?o=!0:t=new Date(i)}o?(this.strictMode||(this.invalidValueString=i),this.setProperties({value:null},!0)):this.setProperties({value:t},!0)}}bindInputEvent(){Object(Ae.T)(this.formatString)&&!this.enableMask||(this.enableMask||-1===this.formatString.indexOf("y")?Ae.l.add(this.inputElement,"input",this.inputHandler,this):Ae.l.remove(this.inputElement,"input",this.inputHandler))}bindEvents(){Ae.l.add(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler,this),Ae.l.add(this.inputElement,"mouseup",this.mouseUpHandler,this),Ae.l.add(this.inputElement,"focus",this.inputFocusHandler,this),Ae.l.add(this.inputElement,"blur",this.inputBlurHandler,this),this.enableMask&&Ae.l.add(this.inputElement,"keydown",this.keydownHandler,this),this.bindInputEvent(),Ae.l.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&Ae.l.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&Ae.l.add(this.formElement,"reset",this.resetFormHandler,this),this.defaultKeyConfigs=Object(Ae.G)(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new Ae.o(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})}keydownHandler(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Delete":!this.enableMask||this.popupObj||this.readonly||("Delete"!==e.code&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:e}))}}unBindEvents(){Ae.l.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler),Ae.l.remove(this.inputElement,"mouseup",this.mouseUpHandler),Ae.l.remove(this.inputElement,"focus",this.inputFocusHandler),Ae.l.remove(this.inputElement,"blur",this.inputBlurHandler),Ae.l.remove(this.inputElement,"change",this.inputChangeHandler),this.enableMask&&Ae.l.remove(this.inputElement,"keydown",this.keydownHandler),this.showClearButton&&this.inputWrapper.clearButton&&Ae.l.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&Ae.l.remove(this.formElement,"reset",this.resetFormHandler)}resetFormHandler(){if(this.enabled&&!this.inputElement.disabled){let e=this.inputElement.getAttribute("value");"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(e="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(e),this.errorClass())}}restoreValue(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=Object(Ae.T)(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})}inputChangeHandler(e){this.enabled&&e.stopPropagation()}bindClearEvent(){this.showClearButton&&this.inputWrapper.clearButton&&Ae.l.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)}resetHandler(e){this.enabled&&(e.preventDefault(),this.clear(e))}mouseUpHandler(e){this.enableMask&&(e.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"}))}clear(e){this.setProperties({value:null},!0),this.enableMask||this.updateInputValue(""),this.trigger("cleared",{event:e}),this.invalidValueString="",this.updateInput(),this.popupUpdate(),this.changeEvent(e),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"})}preventEventBubbling(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")}updateInputValue(e){$s.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)}dateIconHandler(e){this.enabled&&(this.isIconClicked=!0,Ae.d.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),e.preventDefault(),this.readonly||(this.isCalendar()?this.hide(e):(this.isDateIconClicked=!0,this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus(),this.inputElement.focus(),Object(Ae.u)([this.inputWrapper.container],[hr]),Object(Ae.u)(this.inputWrapper.buttons,dr))),this.isIconClicked=!1)}updateHtmlAttributeToWrapper(){if(!Object(Ae.T)(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if(!Object(Ae.T)(this.htmlAttributes[e])&&gr.indexOf(e)>-1)if("class"===e){const t=this.htmlAttributes[e].replace(/\s+/g," ").trim();""!==t&&Object(Ae.u)([this.inputWrapper.container],t.split(" "))}else if("style"===e){let t=this.inputWrapper.container.getAttribute(e);Object(Ae.T)(t)?t=this.htmlAttributes[e]:";"===t.charAt(t.length-1)?t+=this.htmlAttributes[e]:t=t+";"+this.htmlAttributes[e],this.inputWrapper.container.setAttribute(e,t)}else this.inputWrapper.container.setAttribute(e,this.htmlAttributes[e])}updateHtmlAttributeToElement(){if(!Object(Ae.T)(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))gr.indexOf(e)<0&&this.inputElement.setAttribute(e,this.htmlAttributes[e])}updateCssClass(e,t){Object(Ae.T)(t)||(t=t.replace(/\s+/g," ").trim()),Object(Ae.T)(e)||(e=e.replace(/\s+/g," ").trim()),$s.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&$s.setCssClass(e,[this.popupWrapper],t)}calendarKeyActionHandle(e){switch(e.action){case"escape":this.isCalendar()?this.hide(e):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value==+this.currentDate||this.isCalendar()||this.inputWrapper.container.children[this.index].focus():this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus();break;case"tab":this.hide(e)}}inputFocusHandler(){if(!this.enabled)return;this.enableMask&&!this.inputElement.value&&this.placeholder&&(!this.maskedDateValue||this.value||"Auto"!=this.floatLabelType&&"Never"!=this.floatLabelType&&!this.placeholder||(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length));const e={model:this};this.isDateIconClicked=!1,this.trigger("focus",e),this.updateIconState(),this.openOnFocus&&!this.isIconClicked&&this.show()}inputHandler(){this.isPopupClicked=!1,this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})}inputBlurHandler(e){this.enabled&&(this.strictModeUpdate(),""===this.inputElement.value&&Object(Ae.T)(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.enableMask&&this.maskedDateValue&&this.placeholder&&"Always"!==this.floatLabelType&&(this.inputElement.value!=this.maskedDateValue||this.value||"Auto"!=this.floatLabelType&&"Never"!=this.floatLabelType&&!this.placeholder||this.updateInputValue("")),this.errorClass(),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),"datepicker"===this.getModuleName()&&this.trigger("blur",{model:this}),this.isCalendar()&&(this.defaultKeyConfigs=Object(Ae.G)(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new Ae.o(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1)}documentHandler(e){!Object(Ae.T)(this.popupObj)&&(this.inputWrapper.container.contains(e.target)||this.popupObj.element&&this.popupObj.element.contains(e.target))&&"touchstart"!==e.type&&e.preventDefault();const t=e.target;Object(Ae.A)(t,".e-datepicker.e-popup-wrapper")||Object(Ae.A)(t,".e-input-group")===this.inputWrapper.container||t.classList.contains("e-day")?Object(Ae.A)(t,".e-datepicker.e-popup-wrapper")&&(t.classList.contains("e-day")&&!Object(Ae.T)(e.target.parentElement)&&e.target.parentElement.classList.contains("e-selected")&&Object(Ae.A)(t,".e-content")&&Object(Ae.A)(t,".e-content").classList.contains("e-"+this.depth.toLowerCase())||Object(Ae.A)(t,".e-footer-container")&&t.classList.contains("e-today")&&t.classList.contains("e-btn")&&+new Date(+this.value)==+super.generateTodayVal(this.value))&&this.hide(e):(this.hide(e),this.focusOut())}inputKeyActionHandle(e){const t=this.currentView();switch(e.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(e),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.strictModeUpdate(),this.updateInput(),this.changeTrigger(e),"datepicker"===this.getModuleName()&&this.show(null,e);break;case"escape":this.hide(e);break;case"enter":this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),this.isCalendar()||document.activeElement!==this.inputElement||this.hide(e),this.isCalendar()&&(e.preventDefault(),e.stopPropagation());break;case"tab":case"shiftTab":let i=this.inputElement.selectionStart,s=this.inputElement.selectionEnd;if(this.enableMask&&!this.popupObj&&!this.readonly){let t=this.inputElement.value.length;(0==i&&s==t||s!==t&&"tab"==e.action||0!==i&&"shiftTab"==e.action)&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:e}),i=this.inputElement.selectionStart,s=this.inputElement.selectionEnd}this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),this.enableMask&&(this.inputElement.selectionStart=i,this.inputElement.selectionEnd=s),this.hide(e);break;default:this.defaultAction(e),"select"===e.action&&t===this.depth&&this.hide(e)}}defaultAction(e){this.previousDate=!Object(Ae.T)(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(super.keyActionHandle(e),this.isCalendar()&&Object(Ae.w)(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))}popupUpdate(){if((Object(Ae.T)(this.value)&&!Object(Ae.T)(this.previousDate)||+this.value!=+this.previousDate)&&(this.popupObj&&this.popupObj.element.querySelectorAll(".e-selected").length>0&&Object(Ae.eb)(this.popupObj.element.querySelectorAll(".e-selected"),[ur]),!Object(Ae.T)(this.value)&&+this.value>=+this.min&&+this.value<=+this.max)){const e=new Date(this.checkValue(this.value));super.navigateTo("Month",e)}}strictModeUpdate(){let e,t,i,s;e="datetimepicker"===this.getModuleName()?Object(Ae.T)(this.formatString)?this.dateTimeFormat:this.formatString:Object(Ae.T)(this.formatString)?this.formatString:this.formatString.replace("dd","d"),Object(Ae.T)(e)||e.split("M").length-1<3&&(e=e.replace("MM","M")),"datetimepicker"===this.getModuleName()?i="Gregorian"===this.calendarMode?{format:Object(Ae.T)(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:Object(Ae.T)(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:(t="Gregorian"===this.calendarMode?{format:e,type:"dateTime",skeleton:"yMd"}:{format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},i=t),"string"==typeof this.inputElement.value&&(this.inputElement.value=this.inputElement.value.trim()),"datetimepicker"===this.getModuleName()?this.checkDateValue(this.globalize.parseDate(this.inputElement.value,i))?s=this.globalize.parseDate(this.inputElement.value,i):(t="Gregorian"===this.calendarMode?{type:"dateTime",skeleton:"yMd"}:{type:"dateTime",skeleton:"yMd",calendar:"islamic"},s=this.globalize.parseDate(this.inputElement.value,t)):(s=this.globalize.parseDate(this.inputElement.value,i),s=!Object(Ae.T)(s)&&isNaN(+s)?null:s,!Object(Ae.T)(this.formatString)&&""!==this.inputElement.value&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&-1===this.formatString.indexOf("y")&&s.setFullYear(this.value.getFullYear())),"datepicker"===this.getModuleName()&&this.value&&!isNaN(+this.value)&&s&&s.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&s?(this.updateInputValue(this.globalize.formatDate(s,i)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:s},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:s},!0),this.strictMode&&!s&&""===this.inputElement.value&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),Object(Ae.T)(this.value)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)))}createCalendar(){this.popupWrapper=this.createElement("div",{className:"e-datepicker "+ar}),Object(Ae.T)(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),Ae.d.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className="e-datepicker e-date-modal",document.body.className+=" "+pr,this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new Pt(this.popupWrapper,{content:this.calendarElement,relateTo:Ae.d.isDevice?document.body:this.inputWrapper.container,position:Ae.d.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:Ae.d.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:()=>{"datetimepicker"!==this.getModuleName()&&document.activeElement!==this.inputElement&&(this.defaultKeyConfigs=Object(Ae.G)(this.defaultKeyConfigs,this.keyConfigs),this.calendarElement.children[1].firstElementChild.focus(),this.calendarKeyboardModules=new Ae.o(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}),this.calendarKeyboardModules=new Ae.o(this.inputWrapper.container.children[this.index],{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}))},close:()=>{this.isDateIconClicked&&this.inputWrapper.container.children[this.index].focus(),this.value&&this.disabledDates(),this.popupObj&&this.popupObj.destroy(),this.resetCalendar(),Object(Ae.F)(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.preventArgs=null,this.calendarKeyboardModules=null,this.setAriaAttributes()},targetExitViewport:()=>{Ae.d.isDevice||this.hide()}}),this.popupObj.element.className+=" "+this.cssClass,this.setAriaAttributes()}setAriaDisabled(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)}modelHeader(){let e;const t=this.createElement("div",{className:"e-model-header"}),i=this.createElement("h1",{className:"e-model-year"}),s=this.createElement("div"),n=this.createElement("span",{className:"e-model-day"}),o=this.createElement("span",{className:"e-model-month"});e="Gregorian"===this.calendarMode?{format:"y",skeleton:"dateTime"}:{format:"y",skeleton:"dateTime",calendar:"islamic"},i.textContent=""+this.globalize.formatDate(this.value||new Date,e),e="Gregorian"===this.calendarMode?{format:"E",skeleton:"dateTime"}:{format:"E",skeleton:"dateTime",calendar:"islamic"},n.textContent=this.globalize.formatDate(this.value||new Date,e)+", ",e="Gregorian"===this.calendarMode?{format:"MMM d",skeleton:"dateTime"}:{format:"MMM d",skeleton:"dateTime",calendar:"islamic"},o.textContent=""+this.globalize.formatDate(this.value||new Date,e),t.appendChild(i),s.appendChild(n),s.appendChild(o),t.appendChild(s),this.calendarElement.insertBefore(t,this.calendarElement.firstElementChild)}changeTrigger(e){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.isDynamicValueChanged&&this.isCalendar()&&this.popupUpdate(),this.changedArgs.value=this.value,this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!Object(Ae.T)(e),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0)}navigatedEvent(){this.trigger("navigated",this.navigatedArgs)}changeEvent(e){(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.selectCalendar(e),this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.isDynamicValueChanged||this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.isDynamicValueChanged||this.hide(e),this.previousElementValue=this.inputElement.value,this.errorClass())}requiredModules(){const e=[];return this&&e.push({args:[this],member:"islamic"}),this.enableMask&&e.push({args:[this],member:"MaskedDateTime"}),e}selectCalendar(e){let t,i,s;i="datetimepicker"===this.getModuleName()&&Object(Ae.T)(this.formatString)?this.dateTimeFormat:this.formatString,this.value&&("datetimepicker"===this.getModuleName()?(s="Gregorian"===this.calendarMode?{format:i,type:"dateTime",skeleton:"yMd"}:{format:i,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,s)):(s="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,s)),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})),Object(Ae.T)(t)||(this.updateInputValue(t),this.enableMask&&this.notify("setMaskSelection",{module:"MaskedDateTime"}))}isCalendar(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+ar))}setWidth(e){this.inputWrapper.container.style.width="number"==typeof e?Object(Ae.H)(this.width):"string"==typeof e?e.match(/px|%|em/)?this.width:Object(Ae.H)(this.width):"100%"}show(e,t){if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){let e,i=!0;Object(Ae.T)(this.value)||+this.value>=+this.min&&+this.value<=+this.max?e=this.value||null:(e=new Date(this.checkValue(this.value)),this.setProperties({value:null},!0)),this.isCalendar()||(super.render(),this.setProperties({value:e||null},!0),this.previousDate=e,this.createCalendar()),Ae.d.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:()=>{i=!1},popup:this.popupObj,event:t||null,cancel:!1,appendTo:Ae.d.isDevice?this.mobilePopupWrapper:document.body},this.trigger("open",this.preventArgs,e=>{this.preventArgs=e,i&&!this.preventArgs.cancel?(Object(Ae.u)(this.inputWrapper.buttons,dr),this.preventArgs.appendTo.appendChild(this.popupWrapper),this.popupObj.refreshPosition(this.inputElement),this.popupObj.show(new Ae.b({name:"FadeIn",duration:Ae.d.isDevice?0:300}),1e3===this.zIndex?this.element:null),super.setOverlayIndex(this.mobilePopupWrapper,this.popupObj.element,this.modal,Ae.d.isDevice),this.setAriaAttributes()):(this.popupObj.destroy(),this.popupWrapper=this.popupObj=null),Object(Ae.T)(this.inputElement)||""!==this.inputElement.value||!Object(Ae.T)(this.tableBodyElement)&&this.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(Object(Ae.u)([this.tableBodyElement.querySelector("td.e-selected")],"e-focused-date"),Object(Ae.eb)(this.tableBodyElement.querySelectorAll("td.e-selected"),ur)),Ae.l.add(document,"mousedown touchstart",this.documentHandler,this)})}}hide(e){if(Object(Ae.T)(this.popupWrapper))Ae.d.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{let t=!0;this.preventArgs={preventDefault:()=>{t=!1},popup:this.popupObj,event:e||null,cancel:!1},Object(Ae.eb)(this.inputWrapper.buttons,dr),Object(Ae.eb)([document.body],pr);const i=this.preventArgs;this.isCalendar()?this.trigger("close",i,e=>{this.closeEventCallback(t,e)}):this.closeEventCallback(t,i)}}closeEventCallback(e,t){this.preventArgs=t,this.isCalendar()&&e&&!this.preventArgs.cancel&&(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy(),Object(Ae.eb)(this.inputWrapper.buttons,dr)),this.setAriaAttributes(),Ae.d.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),Ae.d.isDevice&&(Object(Ae.T)(this.mobilePopupWrapper)||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null)),Ae.l.remove(document,"mousedown touchstart",this.documentHandler),Ae.d.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()}focusIn(e){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),Object(Ae.u)([this.inputWrapper.container],[hr]))}focusOut(){document.activeElement===this.inputElement&&(Object(Ae.eb)([this.inputWrapper.container],[hr]),this.inputElement.blur())}currentView(){let e;return this.calendarElement&&(e=super.currentView()),e}navigateTo(e,t){this.calendarElement&&super.navigateTo(e,t)}destroy(){this.unBindEvents(),super.destroy(),this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&super.destroy(),this.inputElement&&($s.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-disabled":"true","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},this.inputElement),Object(Ae.T)(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),Ae.l.remove(this.inputElement,"blur",this.inputBlurHandler),Ae.l.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&Object(Ae.F)(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.keyboardModule.destroy()),null===this.ngTag&&(this.inputElement&&(this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),Object(Ae.eb)([this.inputElement],["e-input"])),Object(Ae.eb)([this.element],[lr]),Object(Ae.F)(this.inputWrapper.container)),this.formElement&&Ae.l.remove(this.formElement,"reset",this.resetFormHandler)}ensureInputAttribute(){const e=[];for(let t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(let t=0;t<e.length;t++)Object(Ae.T)(this.inputElementCopy.getAttribute(e[t]))?("value"===e[t].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[t])):("value"===e[t].toLowerCase()&&(this.inputElement.value=this.inputElementCopy.getAttribute(e[t])),this.inputElement.setAttribute(e[t],this.inputElementCopy.getAttribute(e[t])))}preRender(){this.inputElementCopy=this.element.cloneNode(!0),Object(Ae.eb)([this.inputElementCopy],[lr,"e-control","e-lib"]),this.inputElement=this.element,this.formElement=Object(Ae.A)(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.ngTag=null,"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?null!==this.ngTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):"datetimepicker"===this.getModuleName()?(this.element.id=Object(Ae.Q)("ej2-datetimepicker"),null!==this.ngTag&&Object(Ae.w)(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=Object(Ae.Q)("ej2-datepicker"),null!==this.ngTag&&Object(Ae.w)(this.inputElement,{id:this.element.id+"_input"})),null!==this.ngTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),super.preRender()}getDefaultKeyConfig(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs}validationAttribute(e,t){const i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");const s=["required","aria-required","form"];for(let n=0;n<s.length;n++){if(Object(Ae.T)(e.getAttribute(s[n])))continue;const i=e.getAttribute(s[n]);t.setAttribute(s[n],i),e.removeAttribute(s[n])}}checkFormat(){const e=new Ae.n(this.locale);if(this.format)if("string"==typeof this.format)this.formatString=this.format;else if(""===this.format.skeleton||Object(Ae.T)(this.format.skeleton))this.formatString="datetimepicker"===this.getModuleName()?this.dateTimeFormat:null;else{const t=this.format.skeleton;this.formatString="datetimepicker"===this.getModuleName()?e.getDatePattern({skeleton:t,type:"dateTime"}):e.getDatePattern({skeleton:t,type:"date"})}else this.formatString=null}checkHtmlAttributes(e){this.globalize=new Ae.n(this.locale),this.checkFormat(),this.checkView();const t=e?Object(Ae.T)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"];let i;i="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:Object(Ae.T)(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:Object(Ae.T)(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(const s of t)if(!Object(Ae.T)(this.inputElement.getAttribute(s)))switch(s){case"disabled":if(Object(Ae.T)(this.datepickerOptions)||void 0===this.datepickerOptions.enabled||e){const t="disabled"!==this.inputElement.getAttribute(s)&&""!==this.inputElement.getAttribute(s)&&"true"!==this.inputElement.getAttribute(s);this.setProperties({enabled:t},!e)}break;case"readonly":if(Object(Ae.T)(this.datepickerOptions)||void 0===this.datepickerOptions.readonly||e){const t="readonly"===this.inputElement.getAttribute(s)||""===this.inputElement.getAttribute(s)||"true"===this.inputElement.getAttribute(s);this.setProperties({readonly:t},!e)}break;case"placeholder":(Object(Ae.T)(this.datepickerOptions)||void 0===this.datepickerOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(s)},!e);break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(s));break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(s));break;case"value":if(Object(Ae.T)(this.datepickerOptions)||void 0===this.datepickerOptions.value||e){const t=this.inputElement.getAttribute(s);this.setProperties(Object(Ae.mb)(s,this.globalize.parseDate(t,i),{}),!e)}break;case"min":if(+this.min==+new Date(1900,0,1)||e){const t=this.inputElement.getAttribute(s);this.setProperties(Object(Ae.mb)(s,this.globalize.parseDate(t),{}),!e)}break;case"max":if(+this.max==+new Date(2099,11,31)||e){const t=this.inputElement.getAttribute(s);this.setProperties(Object(Ae.mb)(s,this.globalize.parseDate(t),{}),!e)}break;case"type":"text"!==this.inputElement.getAttribute(s)&&this.inputElement.setAttribute("type","text")}}getModuleName(){return"datepicker"}disabledDates(){let e,t;const i=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value)),s=this.previousDate;this.minMaxUpdates(),super.render(),this.previousDate=s;const n='*[id^="/id"]'.replace("/id",""+(i&&+i));let o;this.strictMode||("string"==typeof this.value||"object"==typeof this.value&&+this.value!=+i)&&this.setProperties({value:i},!0),Object(Ae.T)(this.calendarElement.querySelectorAll(n)[0])||this.calendarElement.querySelectorAll(n)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date((new Date).setHours(0,0,0,0)))),"datetimepicker"===this.getModuleName()?(t=this.globalize.formatDate(i,"Gregorian"===this.calendarMode?{format:Object(Ae.T)(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:Object(Ae.T)(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),o=t):(e="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},o=this.globalize.formatDate(i,e)),this.popupObj||(this.updateInputValue(o),this.enableMask&&(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})))}setAriaAttributes(){this.isCalendar()?($s.addAttributes({"aria-expanded":"true"},this.inputElement),Object(Ae.w)(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):($s.addAttributes({"aria-expanded":"false"},this.inputElement),Object(Ae.w)(this.inputElement,{"aria-activedescendant":"null"}))}errorClass(){const e='*[id^="/id"]'.replace("/id",""+ +this.value),t=this.calendarElement&&this.calendarElement.querySelectorAll(e)[0]&&this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled");!Object(Ae.T)(this.value)&&!(+new Date(+this.value).setMilliseconds(0)>=+this.min&&+new Date(+this.value).setMilliseconds(0)<=+this.max)||!this.strictMode&&""!==this.inputElement.value&&this.inputElement.value!==this.maskedDateValue&&Object(Ae.T)(this.value)||t?(Object(Ae.u)([this.inputWrapper.container],cr),Object(Ae.w)(this.inputElement,{"aria-invalid":"true"})):(Object(Ae.eb)([this.inputWrapper.container],cr),Object(Ae.w)(this.inputElement,{"aria-invalid":"false"}))}onPropertyChanged(e,t){for(const i of Object.keys(e)){switch(i){case"value":this.isDynamicValueChanged=!0,this.isInteracted=!1,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,this.previousElementValue=this.inputElement.value,Object(Ae.T)(this.value)&&(this.updateInputValue(""),this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.updateInput(!0),+this.previousDate!=+this.value&&this.changeTrigger(null),this.isInteracted=!0,this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"format":this.checkFormat(),this.bindInputEvent(),this.updateInput(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||this.updateInputValue(this.maskedDateValue));break;case"allowEdit":this.setAllowEdit();break;case"placeholder":$s.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":$s.setReadonly(this.readonly,this.inputElement);break;case"enabled":$s.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new Ae.n(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),$s.setPlaceholder(this.placeholder,this.inputElement),this.updateInput(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"enableRtl":$s.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&super.onPropertyChanged(e,t);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"showClearButton":$s.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,$s.removeFloating(this.inputWrapper),$s.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue),this.bindInputEvent()):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break;default:this.calendarElement&&this.isCalendar()&&super.onPropertyChanged(e,t)}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}}};return rr([Object(Ae.r)(null)],e.prototype,"width",void 0),rr([Object(Ae.r)(null)],e.prototype,"value",void 0),rr([Object(Ae.r)(null)],e.prototype,"cssClass",void 0),rr([Object(Ae.r)(!1)],e.prototype,"strictMode",void 0),rr([Object(Ae.r)(null)],e.prototype,"format",void 0),rr([Object(Ae.r)(!0)],e.prototype,"enabled",void 0),rr([Object(Ae.r)({})],e.prototype,"htmlAttributes",void 0),rr([Object(Ae.r)(null)],e.prototype,"values",void 0),rr([Object(Ae.r)(!1)],e.prototype,"isMultiSelection",void 0),rr([Object(Ae.r)(!0)],e.prototype,"showClearButton",void 0),rr([Object(Ae.r)(!0)],e.prototype,"allowEdit",void 0),rr([Object(Ae.r)(null)],e.prototype,"keyConfigs",void 0),rr([Object(Ae.r)(!1)],e.prototype,"enablePersistence",void 0),rr([Object(Ae.r)(1e3)],e.prototype,"zIndex",void 0),rr([Object(Ae.r)(!1)],e.prototype,"readonly",void 0),rr([Object(Ae.r)(null)],e.prototype,"placeholder",void 0),rr([Object(Ae.r)("Never")],e.prototype,"floatLabelType",void 0),rr([Object(Ae.r)(null)],e.prototype,"serverTimezoneOffset",void 0),rr([Object(Ae.r)(!1)],e.prototype,"openOnFocus",void 0),rr([Object(Ae.r)(!1)],e.prototype,"enableMask",void 0),rr([Object(Ae.r)({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],e.prototype,"maskPlaceholder",void 0),rr([Object(Ae.k)()],e.prototype,"open",void 0),rr([Object(Ae.k)()],e.prototype,"cleared",void 0),rr([Object(Ae.k)()],e.prototype,"close",void 0),rr([Object(Ae.k)()],e.prototype,"blur",void 0),rr([Object(Ae.k)()],e.prototype,"focus",void 0),rr([Object(Ae.k)()],e.prototype,"created",void 0),rr([Object(Ae.k)()],e.prototype,"destroyed",void 0),e=rr([Ae.q],e),e})();var fr;(new Date).getDate(),(new Date).getMonth(),(new Date).getFullYear(),(fr||(fr={})).createListItems=function(e,t,i,s,n,o){let r;const l=6e4*o,a=[],h=[];r=+t.setMilliseconds(0);const c=+i.setMilliseconds(0);for(;c>=r;)h.push(r),a.push(s.formatDate(new Date(r),{format:n,type:"time"})),r+=l;return{collection:h,list:yn.a.createList(e,a,null,!0)}};var yr=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const vr=(new Date).getDate(),Cr=(new Date).getMonth(),wr=(new Date).getFullYear(),Or=(new Date).getHours(),Sr=(new Date).getMinutes(),Tr=(new Date).getSeconds(),jr=(new Date).getMilliseconds(),Er="e-datetimepicker",xr="e-datetimepopup-wrapper",Rr="e-popup",Dr="e-input-focus",kr="250px",Ir="e-icon-anim",Fr="e-disabled",Ar="e-error",Mr="e-active",Lr="e-hover",zr="e-list-item",Br="e-time-overflow";let Pr=(()=>{let e=class extends br{constructor(e,t){super(e,t),this.valueWithMinutes=null,this.scrollInvoked=!1,this.moduleName=this.getModuleName(),this.dateTimeOptions=e}focusHandler(){this.enabled&&Object(Ae.u)([this.inputWrapper.container],Dr)}focusIn(){super.focusIn()}focusOut(){document.activeElement===this.inputElement&&(this.inputElement.blur(),Object(Ae.eb)([this.inputWrapper.container],[Dr]))}blurHandler(e){if(!this.enabled)return;if(this.isTimePopupOpen()&&this.isPreventBlur)return void this.inputElement.focus();Object(Ae.eb)([this.inputWrapper.container],Dr);const t={model:this};this.isTimePopupOpen()&&this.hide(e),this.trigger("blur",t)}destroy(){this.popupObject&&this.popupObject.element.classList.contains(Rr)&&(this.popupObject.destroy(),Object(Ae.F)(this.dateTimeWrapper),this.dateTimeWrapper=void 0,this.liCollections=this.timeCollections=[],Object(Ae.T)(this.rippleFn)||this.rippleFn()),this.inputElement&&($s.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-invalid":"false","aria-haspopup":"true","aria-activedescendant":"null",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off"},this.inputElement),this.inputElement.removeAttribute("aria-placeholder")),this.isCalendar()&&(this.popupWrapper&&Object(Ae.F)(this.popupWrapper),this.popupObject=this.popupWrapper=null,this.keyboardHandler.destroy()),this.unBindInputEvents(),super.destroy()}render(){this.timekeyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.valueWithMinutes=null,this.previousDateTime=null,this.isPreventBlur=!1,this.cloneElement=this.element.cloneNode(!0),this.dateTimeFormat=this.cldrDateTimeFormat(),this.initValue=this.value,super.updateHtmlAttributeToElement(),this.checkAttributes(!1),this.l10n=new Ae.p("datetimepicker",{placeholder:this.placeholder},this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),super.render(),this.createInputElement(),super.updateHtmlAttributeToWrapper(),this.bindInputEvents(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.setValue(),!this.enableMask||this.value||!this.maskedDateValue||"Always"!=this.floatLabelType&&this.floatLabelType&&this.placeholder||$s.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(this.scrollTo)))},!0),this.previousDateTime=this.value&&new Date(+this.value),"EJS-DATETIMEPICKER"===this.element.tagName&&(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.enabled||(this.inputElement.tabIndex=-1)),this.renderComplete()}setValue(){if(this.initValue=this.validateMinMaxRange(this.value),!this.strictMode&&this.isDateObject(this.initValue)){const e=this.validateMinMaxRange(this.initValue);$s.setValue(this.getFormattedValue(e),this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e},!0)}else Object(Ae.T)(this.value)&&(this.initValue=null,this.setProperties({value:null},!0));this.valueWithMinutes=this.value,super.updateInput()}validateMinMaxRange(e){let t=e;return this.isDateObject(e)?t=this.validateValue(e):+this.min>+this.max&&this.disablePopupButton(!0),this.checkValidState(t),t}checkValidState(e){this.isValidState=!0,this.strictMode||(+e>+this.max||+e<+this.min)&&(this.isValidState=!1),this.checkErrorState()}checkErrorState(){this.isValidState?Object(Ae.eb)([this.inputWrapper.container],Ar):Object(Ae.u)([this.inputWrapper.container],Ar),Object(Ae.w)(this.inputElement,{"aria-invalid":this.isValidState?"false":"true"})}validateValue(e){let t=e;return this.strictMode?+this.min>+this.max?(this.disablePopupButton(!0),t=this.max):+e<+this.min?t=this.min:+e>+this.max&&(t=this.max):+this.min>+this.max&&(this.disablePopupButton(!0),t=e),t}disablePopupButton(e){e?(Object(Ae.u)([this.inputWrapper.buttons[0],this.timeIcon],Fr),this.hide()):Object(Ae.eb)([this.inputWrapper.buttons[0],this.timeIcon],Fr)}getFormattedValue(e){let t;return Object(Ae.T)(e)?null:(t="Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd"}:{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd",calendar:"islamic"},this.globalize.formatDate(e,t))}isDateObject(e){return!Object(Ae.T)(e)&&!isNaN(+e)}createInputElement(){Object(Ae.eb)([this.inputElement],"e-datepicker"),Object(Ae.eb)([this.inputWrapper.container],"e-date-wrapper"),Object(Ae.u)([this.inputWrapper.container],"e-datetime-wrapper"),Object(Ae.u)([this.inputElement],Er),this.renderTimeIcon()}renderTimeIcon(){this.timeIcon=$s.appendSpan("e-input-group-icon e-time-icon e-icons",this.inputWrapper.container)}bindInputEvents(){Ae.l.add(this.timeIcon,"mousedown",this.timeHandler,this),Ae.l.add(this.inputWrapper.buttons[0],"mousedown",this.dateHandler,this),Ae.l.add(this.inputElement,"blur",this.blurHandler,this),Ae.l.add(this.inputElement,"focus",this.focusHandler,this),this.defaultKeyConfigs=Object(Ae.G)(this.defaultKeyConfigs,this.keyConfigs),this.keyboardHandler=new Ae.o(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyAction.bind(this),keyConfigs:this.defaultKeyConfigs})}unBindInputEvents(){Ae.l.remove(this.timeIcon,"mousedown touchstart",this.timeHandler),Ae.l.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateHandler),this.inputElement&&(Ae.l.remove(this.inputElement,"blur",this.blurHandler),Ae.l.remove(this.inputElement,"focus",this.focusHandler)),this.keyboardHandler&&this.keyboardHandler.destroy()}cldrTimeFormat(){let e;return e=this.isNullOrEmpty(this.timeFormat)?"en"===this.locale||"en-US"===this.locale?Object(Ae.R)("timeFormats.short",Object(Ae.J)()):this.getCultureTimeObject(Ae.z,""+this.locale):this.timeFormat,e}cldrDateTimeFormat(){let e;const t=new Ae.n(this.locale).getDatePattern({skeleton:"yMd"});return e=this.isNullOrEmpty(this.formatString)?t+" "+this.getCldrFormat("time"):this.formatString,e}getCldrFormat(e){let t;return t="en"===this.locale||"en-US"===this.locale?Object(Ae.R)("timeFormats.short",Object(Ae.J)()):this.getCultureTimeObject(Ae.z,""+this.locale),t}isNullOrEmpty(e){return!!(Object(Ae.T)(e)||"string"==typeof e&&""===e.trim())}getCultureTimeObject(e,t){return"Gregorian"===this.calendarMode?Object(Ae.R)("main."+this.locale+".dates.calendars.gregorian.timeFormats.short",e):Object(Ae.R)("main."+this.locale+".dates.calendars.islamic.timeFormats.short",e)}timeHandler(e){this.enabled&&(this.isIconClicked=!0,Ae.d.isDevice&&this.inputElement.setAttribute("readonly",""),e.currentTarget===this.timeIcon&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isDatePopupOpen()&&super.hide(e),this.isTimePopupOpen()?this.closePopup(e):(this.inputElement.focus(),this.popupCreation("time",e),Object(Ae.u)([this.inputWrapper.container],[Dr]))),this.isIconClicked=!1)}dateHandler(e){this.enabled&&(e.currentTarget===this.inputWrapper.buttons[0]&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isTimePopupOpen()&&this.closePopup(e),Object(Ae.T)(this.popupWrapper)||this.popupCreation("date",e)))}show(e,t){this.enabled&&this.readonly||!this.enabled||("time"!==e||this.dateTimeWrapper?this.popupObj||(this.isTimePopupOpen()&&this.hide(t),super.show(),this.popupCreation("date",t)):(this.isDatePopupOpen()&&this.hide(t),this.popupCreation("time",t)))}toggle(e){this.isDatePopupOpen()?(super.hide(e),this.show("time",null)):this.isTimePopupOpen()?(this.hide(e),super.show(null,e),this.popupCreation("date",null)):this.show(null,e)}listCreation(){let e;e=this.globalize.parseDate(this.inputElement.value,"Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"datetime"}:{format:this.cldrDateTimeFormat(),type:"datetime",calendar:"islamic"});const t=Object(Ae.T)(this.value)?""!==this.inputElement.value?e:new Date:this.value;this.valueWithMinutes=t,this.listWrapper=Object(Ae.D)("div",{className:"e-content",attrs:{tabindex:"0"}});const i=this.startTime(t),s=this.endTime(t),n=fr.createListItems(this.createElement,i,s,this.globalize,this.cldrTimeFormat(),this.step);this.timeCollections=n.collection,this.listTag=n.list,Object(Ae.w)(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),Object(Ae.v)([n.list],this.listWrapper),this.wireTimeListEvents(),this.rippleFn=Object(Ae.gb)(this.listWrapper,{duration:300,selector:".e-list-item"}),this.liCollections=this.listWrapper.querySelectorAll(".e-list-item")}popupCreation(e,t){Ae.d.isDevice&&this.element.setAttribute("readonly","readonly"),"date"===e?!this.readonly&&this.popupWrapper&&(Object(Ae.u)([this.popupWrapper],xr),Object(Ae.w)(this.popupWrapper,{id:this.element.id+"_datepopup"})):this.readonly||(this.dateTimeWrapper=Object(Ae.D)("div",{className:Er+" "+Rr,attrs:{id:this.element.id+"_timepopup",style:"visibility:hidden ; display:block"}}),Object(Ae.T)(this.cssClass)||(this.dateTimeWrapper.className+=" "+this.cssClass),!Object(Ae.T)(this.step)&&this.step>0&&(this.listCreation(),Object(Ae.v)([this.listWrapper],this.dateTimeWrapper)),document.body.appendChild(this.dateTimeWrapper),this.addTimeSelection(),this.renderPopup(),this.setTimeScrollPosition(),this.openPopup(t),this.popupObject.refreshPosition(this.inputElement))}openPopup(e){this.preventArgs={cancel:!1,popup:this.popupObject,event:e||null},this.trigger("open",this.preventArgs,e=>{this.preventArgs=e,this.preventArgs.cancel||this.readonly||(this.popupObject.show(new Ae.b({name:"FadeIn",duration:100}),1e3===this.zIndex?this.element:null),Object(Ae.u)([this.inputWrapper.container],[Ir]),Object(Ae.w)(this.inputElement,{"aria-expanded":"true"}),Ae.l.add(document,"mousedown touchstart",this.documentClickHandler,this))})}documentClickHandler(e){const t=e.target;!Object(Ae.T)(this.popupObject)&&(this.inputWrapper.container.contains(t)||this.popupObject.element&&this.popupObject.element.contains(t))&&"touchstart"!==e.type&&e.preventDefault(),Object(Ae.A)(t,'[id="'+(this.popupObject&&this.popupObject.element.id+'"]'))||t===this.inputElement||t===this.timeIcon||t===this.inputWrapper.container?t!==this.inputElement&&(Ae.d.isDevice||(this.isPreventBlur=document.activeElement===this.inputElement&&(Ae.d.isIE||"edge"===Ae.d.info.name)&&t===this.popupObject.element)):this.isTimePopupOpen()&&(this.hide(e),this.focusOut())}isTimePopupOpen(){return!(!this.dateTimeWrapper||!this.dateTimeWrapper.classList.contains(""+Er))}isDatePopupOpen(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+xr))}renderPopup(){this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),Ae.d.isDevice&&(this.timeModal=Object(Ae.D)("div"),this.timeModal.className=Er+" e-time-modal",document.body.className+=" "+Br,this.timeModal.style.display="block",document.body.appendChild(this.timeModal)),this.popupObject=new Pt(this.dateTimeWrapper,{width:this.setPopupWidth(),zIndex:this.zIndex,targetType:"container",collision:Ae.d.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},relateTo:Ae.d.isDevice?document.body:this.inputWrapper.container,position:Ae.d.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},enableRtl:this.enableRtl,offsetY:4,open:()=>{this.dateTimeWrapper.style.visibility="visible",Object(Ae.u)([this.timeIcon],Mr),Ae.d.isDevice||(this.timekeyConfigure=Object(Ae.G)(this.timekeyConfigure,this.keyConfigs),this.inputEvent=new Ae.o(this.inputWrapper.container,{keyAction:this.timeKeyActionHandle.bind(this),keyConfigs:this.timekeyConfigure,eventName:"keydown"}))},close:()=>{Object(Ae.eb)([this.timeIcon],Mr),this.unWireTimeListEvents(),this.inputElement.setAttribute("aria-activedescendant","null"),Object(Ae.db)(this.popupObject.element),this.popupObject.destroy(),this.dateTimeWrapper.innerHTML="",this.listWrapper=this.dateTimeWrapper=void 0,this.inputEvent&&this.inputEvent.destroy()},targetExitViewport:()=>{Ae.d.isDevice||this.hide()}}),this.popupObject.element.style.maxHeight=kr}setDimension(e){return"number"==typeof e?Object(Ae.H)(e):"string"==typeof e?e:"100%"}setPopupWidth(){let e=this.setDimension(this.width);return e.indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px"),e}wireTimeListEvents(){Ae.l.add(this.listWrapper,"click",this.onMouseClick,this),Ae.d.isDevice||(Ae.l.add(this.listWrapper,"mouseover",this.onMouseOver,this),Ae.l.add(this.listWrapper,"mouseout",this.onMouseLeave,this))}unWireTimeListEvents(){this.listWrapper&&(Ae.l.remove(this.listWrapper,"click",this.onMouseClick),Ae.l.remove(document,"mousedown touchstart",this.documentClickHandler),Ae.d.isDevice||(Ae.l.add(this.listWrapper,"mouseover",this.onMouseOver,this),Ae.l.add(this.listWrapper,"mouseout",this.onMouseLeave,this)))}onMouseOver(e){const t=Object(Ae.A)(e.target,".e-list-item");this.setTimeHover(t,Lr)}onMouseLeave(){this.removeTimeHover(Lr)}setTimeHover(e,t){this.enabled&&this.isValidLI(e)&&!e.classList.contains(t)&&(this.removeTimeHover(t),Object(Ae.u)([e],t))}getPopupHeight(){const e=parseInt(kr,10),t=this.dateTimeWrapper.getBoundingClientRect().height;return t>e?e:t}changeEvent(e){(this.value&&this.value.valueOf())!==(this.previousDateTime&&+this.previousDateTime.valueOf())&&(super.changeEvent(e),this.valueWithMinutes=this.value,this.setInputValue("date"),this.previousDateTime=this.value&&new Date(+this.value))}updateValue(e){this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs={value:this.value,event:e||null,isInteracted:!Object(Ae.T)(e),element:this.element},this.addTimeSelection(),this.trigger("change",this.changedArgs),this.previousDateTime=this.value)}setTimeScrollPosition(){const e=this.selectedElement;Object(Ae.T)(e)?this.dateTimeWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)}findScrollTop(e){const t=this.getPopupHeight(),i=e.nextElementSibling,s=i?i.offsetTop:e.offsetTop,n=e.getBoundingClientRect().height;this.dateTimeWrapper.scrollTop=s+e.offsetTop>t?i?s-(t/2+n/2):s:0}setScrollTo(){let e;const t=this.dateTimeWrapper.querySelectorAll(".e-list-item");if(t.length>=0){this.scrollInvoked=!0;const i=this.timeCollections[0],s=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();e=t[Math.round((s-i)/(6e4*this.step))]}else this.dateTimeWrapper.scrollTop=0;Object(Ae.T)(e)?this.dateTimeWrapper.scrollTop=0:this.findScrollTop(e)}setInputValue(e){if("date"===e)this.inputElement.value=this.previousElementValue=this.getFormattedValue(this.getFullDateTime()),this.setProperties({value:this.getFullDateTime()},!0);else{const e=this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));$s.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.previousElementValue=this.inputElement.value,this.setProperties({value:new Date(this.timeCollections[this.activeIndex])},!0),this.enableMask&&this.createMask()}this.updateIconState()}getFullDateTime(){let e=null;return e=this.isDateObject(this.valueWithMinutes)?this.combineDateTime(this.valueWithMinutes):this.previousDate,this.validateMinMaxRange(e)}createMask(){this.notify("createMask",{module:"MaskedDateTime"})}combineDateTime(e){if(this.isDateObject(e)){const t=this.previousDate.getDate(),i=this.previousDate.getMonth(),s=this.previousDate.getFullYear(),n=e.getHours(),o=e.getMinutes(),r=e.getSeconds();return new Date(s,i,t,n,o,r)}return this.previousDate}onMouseClick(e){const t=e.target,i=this.selectedElement=Object(Ae.A)(t,".e-list-item");i&&i.classList.contains(zr)&&(this.timeValue=i.getAttribute("data-value"),this.hide(e)),this.setSelection(i,e)}setSelection(e,t){if(this.isValidLI(e)&&!e.classList.contains(Mr)){this.selectedElement=e;const i=Array.prototype.slice.call(this.liCollections).indexOf(e);this.activeIndex=i,this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),Object(Ae.u)([this.selectedElement],Mr),this.selectedElement.setAttribute("aria-selected","true"),this.updateValue(t)}}setTimeActiveClass(){const e=Object(Ae.T)(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;if(!Object(Ae.T)(e)){const t=e.querySelectorAll(".e-list-item");if(t.length)for(let e=0;e<t.length;e++)if(this.timeCollections[e]===+this.valueWithMinutes){t[e].setAttribute("aria-selected","true"),this.selectedElement=t[e],this.activeIndex=e,this.setTimeActiveDescendant();break}}}setTimeActiveDescendant(){Object(Ae.T)(this.selectedElement)?Object(Ae.w)(this.inputElement,{"aria-activedescendant":"null"}):Object(Ae.w)(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")})}addTimeSelection(){this.selectedElement=null,this.removeTimeSelection(),this.setTimeActiveClass(),Object(Ae.T)(this.selectedElement)||(Object(Ae.u)([this.selectedElement],Mr),this.selectedElement.setAttribute("aria-selected","true"))}removeTimeSelection(){if(this.removeTimeHover(Lr),!Object(Ae.T)(this.dateTimeWrapper)){const e=this.dateTimeWrapper.querySelectorAll(".e-active");e.length&&(Object(Ae.eb)(e,Mr),e[0].removeAttribute("aria-selected"))}}removeTimeHover(e){const t=this.getTimeHoverItem(e);t&&t.length&&Object(Ae.eb)(t,e)}getTimeHoverItem(e){const t=Object(Ae.T)(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;let i;return Object(Ae.T)(t)||(i=t.querySelectorAll("."+e)),i}isValidLI(e){return e&&e.classList.contains(zr)&&!e.classList.contains(Fr)}calculateStartEnd(e,t,i){const s=e.getDate(),n=e.getMonth(),o=e.getFullYear(),r=e.getHours(),l=e.getMinutes(),a=e.getSeconds(),h=e.getMilliseconds();return t?"starttime"===i?new Date(o,n,s,0,0,0):new Date(o,n,s,23,59,59):new Date(o,n,s,r,l,a,h)}startTime(e){let t,i;const s=this.min,n=null===e?new Date:e;return+n.getDate()==+s.getDate()&&+n.getMonth()==+s.getMonth()&&+n.getFullYear()==+s.getFullYear()||+new Date(n.getFullYear(),n.getMonth(),n.getDate())<=+new Date(s.getFullYear(),s.getMonth(),s.getDate())?(i=!1,t=this.min):+n<+this.max&&+n>+this.min?(i=!0,t=n):+n>=+this.max&&(i=!0,t=this.max),this.calculateStartEnd(t,i,"starttime")}endTime(e){let t,i;const s=this.max,n=null===e?new Date:e;return+n.getDate()==+s.getDate()&&+n.getMonth()==+s.getMonth()&&+n.getFullYear()==+s.getFullYear()||+new Date(n.getUTCFullYear(),n.getMonth(),n.getDate())>=+new Date(s.getFullYear(),s.getMonth(),s.getDate())?(i=!1,t=this.max):+n<+this.max&&+n>+this.min?(i=!0,t=n):+n<=+this.min&&(i=!0,t=this.min),this.calculateStartEnd(t,i,"endtime")}hide(e){if(this.popupObj||this.dateTimeWrapper){this.preventArgs={cancel:!1,popup:this.popupObj||this.popupObject,event:e||null};const t=this.preventArgs;Object(Ae.T)(this.popupObj)?this.trigger("close",t,t=>{this.dateTimeCloseEventCallback(e,t)}):this.dateTimeCloseEventCallback(e,t)}else Ae.d.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()}dateTimeCloseEventCallback(e,t){this.preventArgs=t,this.preventArgs.cancel||(this.isDatePopupOpen()?super.hide(e):this.isTimePopupOpen()&&(this.closePopup(e),Object(Ae.eb)([document.body],Br),Ae.d.isDevice&&this.timeModal&&(this.timeModal.style.display="none",this.timeModal.outerHTML="",this.timeModal=null),this.setTimeActiveDescendant())),Ae.d.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()}closePopup(e){this.isTimePopupOpen()&&this.popupObject&&(this.popupObject.hide(new Ae.b({name:"FadeOut",duration:100,delay:0})),this.inputWrapper.container.classList.remove(Ir),Object(Ae.w)(this.inputElement,{"aria-expanded":"false"}),Ae.l.remove(document,"mousedown touchstart",this.documentClickHandler))}preRender(){this.checkFormat(),this.dateTimeFormat=this.cldrDateTimeFormat(),super.preRender(),Object(Ae.eb)([this.inputElementCopy],[Er])}getProperty(e,t){this.setProperties("min"===t?{min:this.validateValue(e.min)}:{max:this.validateValue(e.max)},!0)}checkAttributes(e){const t=e?Object(Ae.T)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["style","name","step","disabled","readonly","value","min","max","placeholder","type"];let i;for(const s of t)if(!Object(Ae.T)(this.inputElement.getAttribute(s)))switch(s){case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(s));break;case"step":this.step=parseInt(this.inputElement.getAttribute(s),10);break;case"readonly":if(Object(Ae.T)(this.dateTimeOptions)||void 0===this.dateTimeOptions.readonly||e){const t="disabled"===this.inputElement.getAttribute(s)||""===this.inputElement.getAttribute(s)||"true"===this.inputElement.getAttribute(s);this.setProperties({readonly:t},!e)}break;case"placeholder":(Object(Ae.T)(this.dateTimeOptions)||void 0===this.dateTimeOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(s)},!e);break;case"min":(Object(Ae.T)(this.dateTimeOptions)||void 0===this.dateTimeOptions.min||e)&&(i=new Date(this.inputElement.getAttribute(s)),this.isNullOrEmpty(i)||isNaN(+i)||this.setProperties({min:i},!e));break;case"disabled":if(Object(Ae.T)(this.dateTimeOptions)||void 0===this.dateTimeOptions.enabled||e){const t="disabled"!==this.inputElement.getAttribute(s)&&"true"!==this.inputElement.getAttribute(s)&&""!==this.inputElement.getAttribute(s);this.setProperties({enabled:t},!e)}break;case"value":(Object(Ae.T)(this.dateTimeOptions)||void 0===this.dateTimeOptions.value||e)&&(i=new Date(this.inputElement.getAttribute(s)),this.isNullOrEmpty(i)||isNaN(+i)||this.setProperties({value:i},!e));break;case"max":(Object(Ae.T)(this.dateTimeOptions)||void 0===this.dateTimeOptions.max||e)&&(i=new Date(this.inputElement.getAttribute(s)),this.isNullOrEmpty(i)||isNaN(+i)||this.setProperties({max:i},!e))}}requiredModules(){const e=[];return this&&e.push({args:[this],member:"islamic"}),this.enableMask&&e.push(this.maskedDateModule()),e}maskedDateModule(){return{args:[this],member:"MaskedDateTime"}}getTimeActiveElement(){return Object(Ae.T)(this.dateTimeWrapper)?null:this.dateTimeWrapper.querySelectorAll(".e-active")}createDateObj(e){return e instanceof Date?e:null}getDateObject(e){if(!this.isNullOrEmpty(e)){const t=this.createDateObj(e),i=this.valueWithMinutes,s=!Object(Ae.T)(i);if(this.checkDateValue(t)){const e=s?i.getDate():vr,n=s?i.getMonth():Cr,o=s?i.getFullYear():wr,r=s?i.getHours():Or,l=s?i.getMinutes():Sr,a=s?i.getSeconds():Tr,h=s?i.getMilliseconds():jr;return this.scrollInvoked?(this.scrollInvoked=!1,new Date(o,n,e,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())):new Date(o,n,e,r,l,a,h)}}return null}findNextTimeElement(e){const t=this.inputElement.value,i=Object(Ae.T)(this.valueWithMinutes)?this.createDateObj(t):this.getDateObject(this.valueWithMinutes);let s=null;const n=this.liCollections.length;if(!Object(Ae.T)(this.activeIndex)||!Object(Ae.T)(this.checkDateValue(i))){if("home"===e.action)s=+this.createDateObj(new Date(this.timeCollections[0])),this.activeIndex=0;else if("end"===e.action)s=+this.createDateObj(new Date(this.timeCollections[this.timeCollections.length-1])),this.activeIndex=this.timeCollections.length-1;else if("down"===e.action){for(let e=0;e<n;e++)if(+i<this.timeCollections[e]){s=+this.createDateObj(new Date(this.timeCollections[e])),this.activeIndex=e;break}}else for(let e=n-1;e>=0;e--)if(+i>this.timeCollections[e]){s=+this.createDateObj(new Date(this.timeCollections[e])),this.activeIndex=e;break}this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(Object(Ae.T)(s)?null:new Date(s))}}setTimeValue(e,t){let i,s;const n=this.validateMinMaxRange(t),o=this.createDateObj(n);return this.getFormattedValue(o)!==(Object(Ae.T)(this.value)?null:this.getFormattedValue(this.value))?(this.valueWithMinutes=Object(Ae.T)(o)?null:o,s=new Date(+this.valueWithMinutes)):(this.strictMode&&(e=o),this.valueWithMinutes=this.checkDateValue(e),s=new Date(+this.valueWithMinutes)),i=this.globalize.formatDate(s,"Gregorian"===this.calendarMode?{format:Object(Ae.T)(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd"}:{format:Object(Ae.T)(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),!this.strictMode&&Object(Ae.T)(s),$s.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),s}timeElementValue(e){if(!Object(Ae.T)(this.checkDateValue(e))&&!this.isNullOrEmpty(e)){const t=e instanceof Date?e:this.getDateObject(e);return this.setTimeValue(t,e)}return null}timeKeyHandler(e){if(Object(Ae.T)(this.step)||this.step<=0)return;const t=this.timeCollections.length;if(Object(Ae.T)(this.getTimeActiveElement())||0===this.getTimeActiveElement().length)this.liCollections.length>0&&(Object(Ae.T)(this.value)&&Object(Ae.T)(this.activeIndex)?(this.activeIndex=0,this.selectedElement=this.liCollections[0],this.timeElementValue(new Date(this.timeCollections[0]))):this.findNextTimeElement(e));else{let i;if(e.keyCode>=37&&e.keyCode<=40){let s=40===e.keyCode||39===e.keyCode?++this.activeIndex:--this.activeIndex;this.activeIndex=s=this.activeIndex===t?0:this.activeIndex,this.activeIndex=s=this.activeIndex<0?t-1:this.activeIndex,i=Object(Ae.T)(this.timeCollections[s])?this.timeCollections[0]:this.timeCollections[s]}else"home"===e.action?(this.activeIndex=0,i=this.timeCollections[0]):"end"===e.action&&(this.activeIndex=t-1,i=this.timeCollections[t-1]);this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(new Date(i))}this.isNavigate=!0,this.setTimeHover(this.selectedElement,"e-navigation"),this.setTimeActiveDescendant(),!this.isTimePopupOpen()||null===this.selectedElement||e&&"click"===e.type||this.setTimeScrollPosition()}timeKeyActionHandle(e){if(this.enabled)switch("right"!==e.action&&"left"!==e.action&&"tab"!==e.action&&e.preventDefault(),e.action){case"up":case"down":case"home":case"end":this.timeKeyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs.value=this.value,this.addTimeSelection(),this.previousDateTime=this.value)):this.updateValue(e),this.hide(e),Object(Ae.u)([this.inputWrapper.container],Dr),this.isNavigate=!1,e.stopPropagation();break;case"escape":this.hide(e);break;default:this.isNavigate=!1}}inputKeyAction(e){switch(e.action){case"altDownArrow":this.strictModeUpdate(),this.updateInput(),this.toggle(e)}}onPropertyChanged(e,t){for(const i of Object.keys(e)){switch(i){case"value":this.isDynamicValueChanged=!0,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,e.value=this.validateValue(e.value),$s.setValue(this.getFormattedValue(e.value),this.inputElement,this.floatLabelType,this.showClearButton),this.valueWithMinutes=e.value,this.setProperties({value:e.value},!0),this.popupObj&&this.popupUpdate(),this.previousDateTime=new Date(this.inputElement.value),this.updateInput(),this.changeTrigger(null),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.value&&this.notify("createMask",{module:"MaskedDateTime"});break;case"min":case"max":this.getProperty(e,i),this.updateInput();break;case"enableRtl":$s.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"cssClass":Object(Ae.T)(t.cssClass)||(t.cssClass=t.cssClass.replace(/\s+/g," ").trim()),Object(Ae.T)(e.cssClass)||(e.cssClass=e.cssClass.replace(/\s+/g," ").trim()),$s.setCssClass(e.cssClass,[this.inputWrapper.container],t.cssClass),this.dateTimeWrapper&&$s.setCssClass(e.cssClass,[this.dateTimeWrapper],t.cssClass);break;case"locale":this.globalize=new Ae.n(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),$s.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement),this.dateTimeFormat=this.cldrDateTimeFormat(),super.updateInput();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"format":this.setProperties({format:e.format},!0),this.checkFormat(),this.dateTimeFormat=this.formatString,this.setValue(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||$s.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;case"placeholder":$s.setPlaceholder(e.placeholder,this.inputElement),this.inputElement.setAttribute("aria-placeholder",e.placeholder);break;case"enabled":$s.setEnabled(this.enabled,this.inputElement),this.enabled||(this.inputElement.tabIndex=-1);break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width);break;case"readonly":$s.setReadonly(this.readonly,this.inputElement);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,$s.removeFloating(this.inputWrapper),$s.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;case"scrollTo":this.checkDateValue(new Date(this.checkValue(e.scrollTo)))?(this.dateTimeWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(e.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),$s.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton)):this.inputElement.value===this.maskedDateValue&&(this.maskedDateValue="",$s.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;default:super.onPropertyChanged(e,t)}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}}getModuleName(){return"datetimepicker"}restoreValue(){this.previousDateTime=this.previousDate,this.currentDate=this.value?this.value:new Date,this.valueWithMinutes=this.value,this.previousDate=this.value,this.previousElementValue=this.previousElementValue=Object(Ae.T)(this.inputValueCopy)?"":this.getFormattedValue(this.inputValueCopy)}};return yr([Object(Ae.r)(null)],e.prototype,"timeFormat",void 0),yr([Object(Ae.r)(30)],e.prototype,"step",void 0),yr([Object(Ae.r)(null)],e.prototype,"scrollTo",void 0),yr([Object(Ae.r)(1e3)],e.prototype,"zIndex",void 0),yr([Object(Ae.r)(null)],e.prototype,"value",void 0),yr([Object(Ae.r)(null)],e.prototype,"keyConfigs",void 0),yr([Object(Ae.r)({})],e.prototype,"htmlAttributes",void 0),yr([Object(Ae.r)(!1)],e.prototype,"enablePersistence",void 0),yr([Object(Ae.r)(!0)],e.prototype,"allowEdit",void 0),yr([Object(Ae.r)(!1)],e.prototype,"isMultiSelection",void 0),yr([Object(Ae.r)(null)],e.prototype,"values",void 0),yr([Object(Ae.r)(!0)],e.prototype,"showClearButton",void 0),yr([Object(Ae.r)(null)],e.prototype,"placeholder",void 0),yr([Object(Ae.r)(!1)],e.prototype,"strictMode",void 0),yr([Object(Ae.r)(null)],e.prototype,"serverTimezoneOffset",void 0),yr([Object(Ae.r)(new Date(1900,0,1))],e.prototype,"min",void 0),yr([Object(Ae.r)(new Date(2099,11,31))],e.prototype,"max",void 0),yr([Object(Ae.r)(null)],e.prototype,"firstDayOfWeek",void 0),yr([Object(Ae.r)("Gregorian")],e.prototype,"calendarMode",void 0),yr([Object(Ae.r)("Month")],e.prototype,"start",void 0),yr([Object(Ae.r)("Month")],e.prototype,"depth",void 0),yr([Object(Ae.r)(!1)],e.prototype,"weekNumber",void 0),yr([Object(Ae.r)(!0)],e.prototype,"showTodayButton",void 0),yr([Object(Ae.r)("Short")],e.prototype,"dayHeaderFormat",void 0),yr([Object(Ae.r)(!1)],e.prototype,"openOnFocus",void 0),yr([Object(Ae.r)(!1)],e.prototype,"enableMask",void 0),yr([Object(Ae.r)({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],e.prototype,"maskPlaceholder",void 0),yr([Object(Ae.k)()],e.prototype,"open",void 0),yr([Object(Ae.k)()],e.prototype,"close",void 0),yr([Object(Ae.k)()],e.prototype,"cleared",void 0),yr([Object(Ae.k)()],e.prototype,"blur",void 0),yr([Object(Ae.k)()],e.prototype,"focus",void 0),yr([Object(Ae.k)()],e.prototype,"created",void 0),yr([Object(Ae.k)()],e.prototype,"destroyed",void 0),e=yr([Ae.q],e),e})();i("mObe"),i("W1Am");class Hr{constructor(e){this.intl=new Ae.n,Object(Ae.T)(e)||(this.intl.culture=e)}getFormatFunction(e){return e.type?this.intl.getDateFormat(e):this.intl.getNumberFormat(e)}getParserFunction(e){return e.type?this.intl.getDateParser(e):this.intl.getNumberParser(e)}fromView(e,t,i){return"date"!==i&&"datetime"!==i&&"number"!==i||Object(Ae.T)(t)?e:t(e)}toView(e,t){let i=e;return Object(Ae.T)(t)||Object(Ae.T)(e)||(i=t(e)),i}setCulture(e){Object(Ae.T)(e)||Object(Ae.jb)(e)}}class Vr{constructor(e,t){this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=()=>this.editTemplateFn,this.getFilterTemplate=()=>this.filterTemplateFn,Object(Ae.Z)(this,e),this.parent=t,"none"===this.type?this.type=null:this.type&&(this.type="string"==typeof this.type?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),Object(Ae.T)(this.uid)&&(this.uid=Lc("grid-column"));const i=new Hr;if(e.format&&(e.format.skeleton||e.format.format&&"string"==typeof e.format.format)&&(this.setFormatter(i.getFormatFunction(Object(Ae.G)({},e.format))),this.setParser(i.getParserFunction(e.format))),this.toJSON=()=>{const e={},t=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],i=Object.keys(this);for(let s=0;s<i.length;s++)if("columns"===i[s]){e[i[s]]=[];for(let t=0;t<this[i[s]].length;t++)e[i[s]].push(this[i[s]][t].toJSON())}else t.indexOf(i[s])<0&&(e[i[s]]=this[i[s]]);return e},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some(e=>e.allowResizing))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=Ec(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=Ec(this.headerTemplate)),!Object(Ae.T)(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=Ec(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=Ec(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=Ec(this.filterTemplate)),this.isForeignColumn()&&(Object(Ae.T)(this.editType)||"dropdownedit"===this.editType||"defaultedit"===this.editType)&&(this.editType="dropdownedit",this.edit.params=Object(Ae.G)({dataSource:this.dataSource,query:new _e.e,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){let e=this.sortComparer;this.sortComparer=function(t,i,s,n){if("string"==typeof e&&(e=td(e,window)),"Descending"===this.sortDirection){const e=t;t=i,i=e;const o=s;s=n,n=o}return e(t,i,s,n)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=(e,t)=>(e=td(this.foreignKeyValue,$c(this,{},e)[0]),t=td(this.foreignKeyValue,$c(this,{},t)[0]),"Descending"===this.sortDirection?_e.b.fnDescending(e,t):_e.b.fnAscending(e,t)))}getSortDirection(){return this.sortDirection}setSortDirection(e){this.sortDirection=e}getFreezeTableName(){return this.freezeTable}setProperties(e){const t=Object.keys(e);for(let i=0;i<t.length;i++)this[t[i]]=e[t[i]],this.parent&&this.parent.isReact&&"template"===t[i]&&this.parent.refreshReactColumnTemplateByUid(this.uid)}isForeignColumn(){return!(!this.dataSource||!this.foreignKeyValue)}getFormatter(){return this.formatFn}setFormatter(e){this.formatFn=e}getParser(){return this.parserFn}setParser(e){this.parserFn=e}getColumnTemplate(){return this.templateFn}getHeaderTemplate(){return this.headerTemplateFn}getFilterItemTemplate(){return this.fltrTemplateFn}getDomSetter(){return this.disableHtmlEncode?"textContent":"innerHTML"}}const Nr="load",qr="rowDataBound",Wr="queryCellInfo",Gr="headerCellInfo",_r="actionBegin",Ur="actionComplete",Kr="actionFailure",Yr="dataBound",Xr="rowSelecting",Qr="rowSelected",$r="rowDeselecting",Jr="rowDeselected",Zr="cellSelecting",el="cellSelected",tl="cellDeselecting",il="cellDeselected",sl="columnSelecting",nl="columnSelected",ol="beforePrint",rl="printComplete",ll="batchAdd",al="batchCancel",hl="batchDelete",cl="beforeDataBound",dl="beforeOpenAdaptiveDialog",pl="filterchoicerequest",ul="initial-load",ml="initial-end",gl="data-ready",bl="content-ready",fl="ui-update",yl="on-empty",vl="inbound-model-changed",Cl="model-changed",wl="colgroup-refresh",Ol="header-refreshed",Sl="searching-complete",Tl="group-aggregates",jl="refresh-footer-rendered",El="beforecellfocused",xl="cellfocused",Rl="key-pressed",Dl="click",kl="destroy",Il="column-visible-changed",Fl="scroll",Al="column-width-changed",Ml="column-position-changed",Ll="rows-added",zl="rows-removed",Bl="datasource-modified",Pl="dblclick",Hl="toolbar-refresh",Vl="bulk-save",Nl="auto-col",ql="tooltip-destroy",Wl="update-data",Gl="prevent-batch",_l="dialog-destroy",Ul="crud-Action",Kl="add-delete-Action",Yl="destroy-form",Xl="double-tap",Ql="freezerender",$l="getForeignKeyData",Jl="generateQuery",Zl="showEmptyGrid",ea="foreignKeyData",ta="dataStateChange",ia="dataSourceChanged",sa="beforeFragAppend",na="frozenHeight",oa="textWrapRefresh",ra="recordAdded",la="cancel-Begin",aa="editNextValCell",ha="hierarchyprint",ca="partial-refresh",da="columns-prepared",pa="cbox-filter-complete",ua="filter-Prevent",ma="restore-Focus",ga="detail-indentcell-info",ba="virtual-scroll-edit-success",fa="get-virtual-data",ya="infinite-scroll-handler",va="infinite-edit-handler",Ca="group-collapse",wa="refreshResizeHandlers",Oa="before-refresh-on-data-change",Sa="filter-dialog-close",Ta="refresh-cutsom-filter-ok-button",ja="set-fullscreen-dialog",Ea="row-mode-change",xa="enter-key-handler",Ra="close-edit",Da="create-virtual-validation-form",ka="refresh-infinite-persist-selection";var Ia=function(e){return e[e.Data=0]="Data",e[e.Header=1]="Header",e[e.Summary=2]="Summary",e[e.GroupSummary=3]="GroupSummary",e[e.CaptionSummary=4]="CaptionSummary",e[e.Filter=5]="Filter",e[e.Indent=6]="Indent",e[e.GroupCaption=7]="GroupCaption",e[e.GroupCaptionEmpty=8]="GroupCaptionEmpty",e[e.Expand=9]="Expand",e[e.HeaderIndent=10]="HeaderIndent",e[e.StackedHeader=11]="StackedHeader",e[e.DetailHeader=12]="DetailHeader",e[e.DetailExpand=13]="DetailExpand",e[e.CommandColumn=14]="CommandColumn",e[e.DetailFooterIntent=15]="DetailFooterIntent",e[e.RowDragIcon=16]="RowDragIcon",e[e.RowDragHIcon=17]="RowDragHIcon",e}({}),Fa=function(e){return e[e.Header=0]="Header",e[e.Content=1]="Content",e[e.Summary=2]="Summary",e}({}),Aa=function(e){return e[e.isEdit=0]="isEdit",e[e.isAdd=1]="isAdd",e[e.isSort=2]="isSort",e[e.isFilter=3]="isFilter",e}({}),Ma=function(e){return e[e.isInitial=0]="isInitial",e[e.isSearch=1]="isSearch",e}({});class La{constructor(e,t){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=e,this.serviceLocator=t,this.initDataManager(),this.parent.isDestroyed||"foreignKey"===this.getModuleName()||(this.parent.on(Ll,this.addRows,this),this.parent.on("row-position-changed",this.reorderRows,this),this.parent.on(zl,this.removeRows,this),this.parent.on(Bl,this.initDataManager,this),this.parent.on(kl,this.destroy,this),this.parent.on(Wl,this.crudActions,this),this.parent.on(Kl,this.getData,this),this.parent.on(Nl,this.refreshFilteredCols,this),this.parent.on(da,this.refreshFilteredCols,this))}reorderRows(e){this.dataManager.dataSource.json.splice(e.toIndex,0,this.dataManager.dataSource.json.splice(e.fromIndex,1)[0])}getModuleName(){return"data"}initDataManager(){const e=this.parent;this.dataManager=e.dataSource instanceof _e.a?e.dataSource:Object(Ae.T)(e.dataSource)?new _e.a:new _e.a(e.dataSource),!e.isAngular||e.query instanceof _e.e?(this.isQueryInvokedFromData=!0,e.query=e.query instanceof _e.e?e.query:new _e.e):e.setProperties({query:new _e.e},!0)}generateQuery(e){const t=this.parent.getQuery().clone();if("ExcludeHidden"===this.parent.columnQueryMode)t.select(this.parent.getColumns().filter(e=>!(!0!==e.isPrimaryKey&&!1===e.visible||void 0===e.field)).map(e=>e.field));else if("Schema"===this.parent.columnQueryMode){const e=[],i=this.parent.columns;for(let t=0;t<i.length;t++)e.push(i[t].field);t.select(e)}return this.filterQuery(t),this.searchQuery(t),this.aggregateQuery(t),this.sortQuery(t),ed(this.parent)?this.virtualGroupPageQuery(t):this.pageQuery(t,e),this.groupQuery(t),t}aggregateQuery(e){const t=this.parent.aggregates;for(let i=0;i<t.length;i++){const s=t[i];for(let t=0;t<s.columns.length;t++){const i=s.columns[t],n=i.type instanceof Array?i.type:[i.type];for(let t=0;t<n.length;t++)e.aggregate(n[t].toLowerCase(),i.field)}}return e}virtualGroupPageQuery(e){if(e.queries.length)for(let t=0;t<e.queries.length;t++)"onPage"===e.queries[t].fn&&e.queries.splice(t,1);return e}pageQuery(e,t){const i=this.parent,s={query:e,skipPage:!1};if(i.notify("set-virtual-page-query",s),s.skipPage)return e;if((i.allowPaging||i.enableVirtualization||i.enableInfiniteScrolling)&&!0!==t){if(i.pageSettings.currentPage=Math.max(1,i.pageSettings.currentPage),i.pageSettings.pageCount<=0&&(i.pageSettings.pageCount=8),i.pageSettings.pageSize<=0&&(i.pageSettings.pageSize=12),e.queries.length)for(let t=0;t<e.queries.length;t++)"onPage"===e.queries[t].fn&&e.queries.splice(t,1);!Object(Ae.T)(i.infiniteScrollModule)&&i.enableInfiniteScrolling?this.parent.notify("infinite-page-query",e):e.page(i.pageSettings.currentPage,i.pageSettings.pageSize)}return e}groupQuery(e){const t=this.parent;if(t.allowGrouping&&t.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&e.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});const i=t.groupSettings.columns;for(let t=0,s=i.length;t<s;t++){const s=this.getColumnByField(i[t]);s||this.parent.log("initial_action",{moduleName:"group",columnName:i[t]});const n=s.format;s.enableGroupByFormat?e.group(i[t],this.formatGroupColumn.bind(this),n):e.group(i[t],null)}}return e}sortQuery(e){const t=this.parent;if((t.allowSorting||t.allowGrouping)&&t.sortSettings.columns.length){const i=t.sortSettings.columns,s=[];for(let n=i.length-1;n>-1;n--){const o=this.getColumnByField(i[n].field);if(!o)return this.parent.log("initial_action",{moduleName:"sort",columnName:i[n].field}),e;o.setSortDirection(i[n].direction);let r=i[n].direction;o.sortComparer&&(this.parent.log("grid_sort_comparer"),r=this.isRemote()?i[n].direction:o.sortComparer.bind(o)),-1===t.groupSettings.columns.indexOf(i[n].field)?o.isForeignColumn()||o.sortComparer?e.sortByForeignKey(o.field,r,void 0,i[n].direction.toLowerCase()):e.sortBy(o.field,r):s.push({direction:r,field:o.field})}for(let t=0,n=s.length;t<n;t++)if("string"==typeof s[t].direction)e.sortBy(s[t].field,s[t].direction);else{const i=this.getColumnByField(s[t].field);e.sortByForeignKey(s[t].field,s[t].direction,void 0,i.getSortDirection().toLowerCase())}}return e}searchQuery(e,t,i){const s=this.parent.searchSettings;let n=s.fields.length?s.fields:this.getSearchColumnFieldNames(),o=[],r=!1;if(this.parent.searchSettings.key.length){r=this.parent.getForeignKeyColumns().some(e=>n.indexOf(e.field)>-1);const l=i?t.dataSource.adaptor:this.dataManager.adaptor;if(r||l.getModuleName&&"ODataV4Adaptor"===l.getModuleName()){n=i?[t.foreignKeyValue]:n;for(let e=0;e<n.length;e++){const r=i?t:this.getColumnByField(n[e]);r.isForeignColumn()&&!i?o=this.fGeneratePredicate(r,o):o.push(new _e.d(n[e],s.operator,s.key,s.ignoreCase,s.ignoreAccent))}const r=_e.d.or(o);r.key=s.key,e.where(r)}else e.search(s.key,n,s.operator,s.ignoreCase,s.ignoreAccent)}return e}filterQuery(e,t,i){const s=this.parent;let n=[];const o=[],r=this.parent.getForeignKeyColumns();let l;if(s.allowFiltering&&s.filterSettings.columns.length){const a=t||s.filterSettings.columns,h={};for(const e of s.getColumns())h[e.field]=e.filter.type?e.filter.type:s.filterSettings.type;const c=[],d=[];for(const e of a){const t=s.getColumnByField(e.field);Object(Ae.T)(e.type)&&t&&("date"===t.type||"datetime"===t.type)&&(e.type=s.getColumnByField(e.field).type),e.isForeignKey?c.push(e):d.push(e)}if(d.length){for(let t=0,i=d.length;t<i;t++)d[t].uid=d[t].uid||this.parent.grabColumnByFieldFromAllCols(d[t].field).uid;const e=jd.getPredicate(d);for(const t of Object.keys(e))n.push(e[t])}if(c.length)for(const e of c){e.uid=e.uid||this.parent.grabColumnByFieldFromAllCols(e.field).uid;const t=this.parent.grabColumnByUidFromAllCols(e.uid);if(t||this.parent.log("initial_action",{moduleName:"filter",columnName:e.field}),t.isForeignColumn()&&Jc(e.field,r)&&!i)o.push(e),t.columnData.length||(l=!0),n=this.fGeneratePredicate(t,n);else{const e=jd.getPredicate(a);for(const t of Object.keys(e))n.push(e[t])}}n.length&&!l?e.where(_e.d.and(n)):this.parent.notify(Zl,{})}return e}fGeneratePredicate(e,t){const i={};return e&&(this.parent.notify(Jl,{predicate:i,column:e}),i.predicate.predicates.length&&t.push(i.predicate)),t}getData(e={requestType:""},t){const i=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource)return this.eventPromise(e,t,i).promise;{let s;switch(e.requestType){case"delete":if(t=t||this.generateQuery(),1===Object.keys(e.data).length)s=this.dataManager.remove(i,e.data[0],t.fromTable,t);else{const n={addedRecords:[],deletedRecords:[],changedRecords:[]};n.deletedRecords=e.data,s=this.dataManager.saveChanges(n,i,t.fromTable,t.requiresCount())}break;case"save":t=t||this.generateQuery(),e.index=Object(Ae.T)(e.index)?0:e.index,s=this.dataManager.insert(e.data,t.fromTable,t,e.index)}return e.promise=s,!s||Array.isArray(s)||s.hasOwnProperty("deletedRecords")?this.insert(t,e):s.then(()=>this.insert(t,e))}}insert(e,t){return"save"===t.requestType&&this.parent.notify(ra,t),this.executeQuery(e)}executeQuery(e){if(this.dataManager.ready){const t=new _e.c;return this.dataManager.ready.then(()=>{this.dataManager.executeQuery(e).then(e=>{t.resolve(e)})}).catch(e=>{t.reject(e)}),t.promise}return this.dataManager.executeQuery(e)}formatGroupColumn(e,t){const i=this.serviceLocator,s=this.getColumnByField(t),n=e;return s.type||(s.type=n.getDay?n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0||n.getMilliseconds()>0?"datetime":"date":typeof e),Object(Ae.T)(s.getFormatter())&&_c(i,s),Hr.prototype.toView(e,s.getFormatter())}crudActions(e){const t=this.generateQuery();let i=null;const s="promise",n=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());switch(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(e,t,n),e.requestType){case"save":i=this.dataManager.update(n,e.data,t.fromTable,t,e.previousData)}e[s]=i||e[s],this.parent.notify(Ul,e)}saveChanges(e,t,i,s=this.generateQuery()){if(s.requiresCount(),"result"in this.parent.dataSource){const i=new _e.c,n={requestType:"batchsave",changes:e,key:t,query:s,endEdit:i.resolve};return this.setState({isPending:!0,resolver:i.resolve}),this.parent.trigger(ia,n),i.promise}return this.dataManager.saveChanges(e,t,s.fromTable,s,i)}getKey(e){if(e&&e.length)return e[0]}isRemote(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url&&""!==this.dataManager.dataSource.url}addRows(e){for(let t=e.records.length;t>0;t--)this.dataManager.dataSource.json.splice(e.toIndex,0,e.records[t-1])}removeRows(e){this.dataManager.dataSource.json=this.dataManager.dataSource.json.filter(t=>-1===e.records.indexOf(t))}getColumnByField(e){let t;return this.parent.columnModel.some(i=>(t=i,i.field===e))&&t}destroy(){this.parent.isDestroyed||(this.parent.off(Ll,this.addRows),this.parent.off(zl,this.removeRows),this.parent.off(Bl,this.initDataManager),this.parent.off(kl,this.destroy),this.parent.off(Wl,this.crudActions),this.parent.off(Kl,this.getData),this.parent.off(Nl,this.refreshFilteredCols),this.parent.off(da,this.refreshFilteredCols))}getState(){return this.dataState}setState(e){return this.dataState=e}getForeignKeyDataState(){return this.foreignKeyDataState}setForeignKeyDataState(e){this.foreignKeyDataState=e}getStateEventArgument(e){const t=new _e.f,i=new _e.a({url:"",adaptor:new _e.f}),s=t.processQuery(i,e),n=JSON.parse(s.data);return Object(Ae.G)(n,s.pvtData)}eventPromise(e,t,i){const s=e,n=this.getStateEventArgument(t),o=new _e.c,r=new _e.c;if(void 0!==e.requestType&&!1!==this.dataState.isDataChanged)if(n.action=e,"save"===e.requestType||"delete"===e.requestType){const t=e;t.key=i,t.promise=r.promise,t.state=n,this.setState({isPending:!0,resolver:r.resolve}),s.endEdit=r.resolve,s.cancelEdit=r.reject,this.parent.trigger(ia,t),r.promise.then(()=>{this.setState({isPending:!0,resolver:o.resolve,group:n.group,aggregates:n.aggregates}),"save"===t.requestType&&this.parent.notify(ra,t),this.parent.trigger(ta,n)}).catch(()=>{})}else this.setState({isPending:!0,resolver:o.resolve,group:n.group,aggregates:n.aggregates}),this.parent.trigger(ta,n);else this.setState({}),o.resolve(this.parent.dataSource);return o}getSearchColumnFieldNames(){const e=[],t=this.parent.getColumns();for(const i of t)i.allowSearching&&!Object(Ae.T)(i.field)&&e.push(i.field);return e}refreshFilteredCols(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&function(e,t){for(let i=0;i<t.length;i++)t[i].uid=t[i].isForeignKey?Jc(t[i].field,e.getForeignKeyColumns()).uid:e.enableColumnVirtualization?Sd(e,t[i].field).uid:e.getColumnByField(t[i].field).uid}(this.parent,this.parent.filterSettings.columns)}}class za{constructor(e,t){Object(Ae.Z)(this,e),this.parent=t}clone(){const e=new za({});return Object(Ae.Z)(e,this),e.cells=this.cells.map(e=>e.clone()),e}setRowValue(e){if(!this.parent)return;const t=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(t,e)}setCellValue(e,t){if(this.parent&&this.data[e].toString()!==t.toString()){const i=this.parent.getPrimaryKeyFieldNames()[0];this.parent.setCellValue(this.data[i],e,t),this.makechanges(i,this.data)}}makechanges(e,t){this.parent&&this.parent.getDataModule().dataManager.update(e,t)}}class Ba{constructor(e){this.isSpanned=!1,this.isRowSpanned=!1,Object(Ae.Z)(this,e)}clone(){const e=new Ba({});return Object(Ae.Z)(e,this),e}}class Pa{constructor(e,t){this.serviceLocator=e,this.parent=t}render(e,t,i,s){const n=this.serviceLocator.getService("cellRendererFactory").getCellRenderer(t.cells[i].cellType||Ia.Data);let o=t.cells[i].cellSpan?t.cells[i].cellSpan:e.colSpan+i<=t.cells.length?e.colSpan:t.cells.length-i;const r=e.rowSpan;let l,a=0;if(t.index>0){const e=this.parent.groupSettings.columns.length>0&&!this.parent.getRowsObject()[t.index-1].isDataRow?this.parent.getRowsObject()[t.index].cells:this.parent.getRowsObject()[t.index-1].cells,s=t.cells[i],n="uid";l=e.filter(e=>e.column.uid===s.column[n])[0]}const h=l&&l.colSpanRange>1&&l.rowSpanRange>1?l.colSpanRange:o;for(let c=i+1;c<i+h&&c<t.cells.length;c++)!1===t.cells[c].visible?a++:t.cells[c].isSpanned=!0;if(a>0){for(let e=i+o;e<i+o+a&&e<t.cells.length;e++)t.cells[e].isSpanned=!0;i+o+a>=t.cells.length&&(o-=i+o+a-t.cells.length)}return t.cells[i].cellSpan&&(t.data[e.column.field]=t.cells[i].spanText,s=n.render(t.cells[i],t.data,{index:Object(Ae.T)(t.index)?"":t.index.toString()})),o>1&&Object(Ae.w)(s,{colSpan:o.toString(),"aria-colSpan":o.toString()}),r>1&&(Object(Ae.w)(s,{rowspan:r.toString(),"aria-rowspan":r.toString()}),t.cells[i].isRowSpanned=!0,t.cells[i].rowSpanRange=Number(r),o>1&&(t.cells[i].colSpanRange=Number(o))),t.index>0&&l.rowSpanRange>1&&(t.cells[i].isSpanned=!0,t.cells[i].rowSpanRange=Number(l.rowSpanRange-1),t.cells[i].colSpanRange=l.rowSpanRange>0?l.colSpanRange:1),!this.parent.enableColumnVirtualization||t.cells[i].cellSpan||this.containsKey(e.column.field,e.data[e.column.field])||this.backupMergeCells(e.column.field,e.data[e.column.field],e.colSpan),s}backupMergeCells(e,t,i){this.setMergeCells(this.generteKey(e,t),i)}generteKey(e,t){return e+"__"+t.toString()}splitKey(e){return e.split("__")}containsKey(e,t){return this.getMergeCells().hasOwnProperty(this.generteKey(e,t))}getMergeCells(){return this.parent.mergeCells}setMergeCells(e,t){this.parent.mergeCells[e]=t}updateVirtualCells(e){const t=this.getMergeCells();for(const i of Object.keys(t)){const s=t[i],n=this.splitKey(i),o=this.getIndexFromAllColumns(n[0]),r=this.parent.getColumnIndexesInView(),l=s-(r[0]-o);if(o<r[0]&&l>1)for(const t of e)if(t.data[n[0]].toString()===n[1].toString()){t.cells[0].cellSpan=l,t.cells[0].spanText=n[1];break}}return e}getIndexFromAllColumns(e){return Tc(this.parent.getVisibleColumns(),(t,i)=>{if(t.field===e)return i})[0]}}const Ha="e-rowcell",Va="e-gridcontent",Na="e-gridfooter",qa="e-headercontent",Wa="e-movablecontent",Ga="e-movableheader",_a="e-frozencontent",Ua="e-frozenheader",Ka="e-content",Ya="e-table",Xa="e-row",Qa="e-gridchkbox",$a="e-editedrow",Ja="e-addedrow",Za="Left-Right",eh="frozen-right",th="frozen-left",ih="aria-colindex",sh="aria-rowindex",nh="tbody",oh="colgroup",rh="open",lh="change",ah="created",hh="beforeOpen";class ch{constructor(e,t,i){this.isSpan=!1,this.cellType=t,this.serviceLocator=e,this.parent=i,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}render(e,t,i,s,n){return this.refreshRow(e,t,i,s,n)}refresh(e,t,i,s,n){i&&(e.data=sd({},e.changes),this.refreshMergeCells(e));const o=this.parent.element.querySelector("[data-uid="+e.uid+"]"),r=this.refreshRow(e,t,s,n,null,i),l=[].slice.call(r.cells);o.innerHTML="";for(const a of l)o.appendChild(a)}refreshRow(e,t,i,s,n,o){const r=Object(Ae.T)(n)?this.element.cloneNode():n,l={data:e.data},a={data:e.data},h=this.parent.getColumns().filter(e=>"checkbox"===e.type&&e.field)[0];let c=!1;h&&(c=td(h.field,l.data));const d=this.parent.getSelectedRowIndexes();e.isDataRow&&(e.isSelected=d.indexOf(e.index)>-1||c),e.isDataRow&&this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0,-1===d.indexOf(e.index)&&d.push(e.index)),this.buildAttributeFromRow(r,e),Object(Ae.w)(r,Object(Ae.G)({},i,{})),xc(r,e.attributes);const p=this.serviceLocator.getService("cellRendererFactory");for(let m=0,g=e.cells.length;m<g;m++){const t=e.cells[m];t.isSelected=e.isSelected,t.isColumnSelected=t.column.isSelected;const i=p.getCellRenderer(e.cells[m].cellType||Ia.Data),s={index:Object(Ae.T)(e.index)?"":e.index.toString()};e.isExpand&&e.cells[m].cellType===Ia.DetailExpand&&(s.class=this.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");let n=i.render(e.cells[m],e.data,s,e.isExpand,o);if(e.cells[m].cellType!==Ia.Filter){if(e.cells[m].cellType===Ia.Data||e.cells[m].cellType===Ia.CommandColumn){this.parent.trigger(Wr,Object(Ae.G)(a,{cell:n,column:t.column,colSpan:1,rowSpan:1,foreignKeyData:e.cells[m].foreignKeyData,requestType:this.parent.requestTypeAction}));let i=!1;if(e.index>0&&this.isSpan){const t=this.parent.groupSettings.columns.length>0&&!this.parent.getRowsObject()[e.index-1].isDataRow?this.parent.getRowsObject()[e.index].cells:this.parent.getRowsObject()[e.index-1].cells,s="uid",n=t.filter(t=>t.column.uid===e.cells[m].column[s])[0];i=n.isRowSpanned?n.isRowSpanned:n.rowSpanRange>1}(a.colSpan>1||e.cells[m].cellSpan>1||a.rowSpan>1||i)&&(this.isSpan=!0,n=new Pa(this.serviceLocator,this.parent).render(a,e,m,n))}e.cells[m].isSpanned||r.appendChild(n)}}const u={row:r,rowHeight:this.parent.rowHeight};if(e.isDataRow&&(this.parent.trigger(qr,Object(Ae.G)(l,u)),this.parent.childGrid||this.parent.isRowDragable()||this.parent.detailTemplate)){const e=r.querySelectorAll(".e-rowcell:not(.e-hide)")[0];e&&e.classList.add("e-detailrowvisible")}if(this.parent.enableVirtualization&&(l.rowHeight=this.parent.rowHeight),l.rowHeight?r.style.height=l.rowHeight+"px":this.parent.rowHeight&&(r.querySelector(".e-headercell")||r.querySelector(".e-groupcaption"))&&(r.style.height=this.parent.rowHeight+"px"),e.cssClass&&r.classList.add(e.cssClass),e.lazyLoadCssClass&&r.classList.add(e.lazyLoadCssClass),(!this.parent.enableColumnVirtualization||0===this.parent.frozenColumns)&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(let m=0;m<this.parent.aggregates.length;m++)if(this.parent.aggregates[m].properties.columns[0].footerTemplate){const e=[].slice.call(r.getElementsByClassName("e-summarycell"));if(e.length){const t=e[e.length-1];Object(Ae.u)([t],["e-lastsummarycell"]);const i=e[0];Object(Ae.u)([i],["e-firstsummarycell"])}}return r}refreshMergeCells(e){for(const t of e.cells)t.isSpanned=!1;return e}buildAttributeFromRow(e,t){const i={},s=[];t.isDataRow&&s.push(Xa),t.isAltRow&&s.push("e-altrow"),Object(Ae.T)(t.index)||(i["aria-rowindex"]=t.index),t.rowSpan&&(i.rowSpan=t.rowSpan),t.uid&&(i["data-uid"]=t.uid),t.isSelected&&(i["aria-selected"]=!0),!1===t.visible&&s.push("e-hide"),i.class=s,xc(e,i)}}class dh{constructor(e){this.parent=e}generateRows(e,t){const i=[];let s=this.parent.enableVirtualization&&t?t.startIndex:0;s=this.parent.enableInfiniteScrolling&&t?this.getInfiniteIndex(t):s;for(let n=0,o=Object.keys(e).length;n<o;n++,s++)i[n]=this.generateRow(e[n],s);return i}ensureColumns(){const e=[];if(this.parent.detailTemplate||this.parent.childGrid){const t={};this.parent.notify(ga,t),e.push(this.generateCell(t,null,Ia.DetailExpand))}return this.parent.isRowDragable()&&e.push(this.generateCell({},null,Ia.RowDragIcon)),e}generateRow(e,t,i,s,n,o,r){const l={foreignKeyData:{}};l.uid=Lc("grid-row"),l.data=e,l.index=t,l.indent=s,l.tIndex=o,l.isDataRow=!0,l.parentGid=n,l.parentUid=r,this.parent.isPrinting&&("All"===this.parent.hierarchyPrintMode?l.isExpand=!0:"Expanded"===this.parent.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[t]&&(l.isExpand=this.parent.expandedRows[t].isExpand)),l.cssClass=i,l.isAltRow=!!this.parent.enableAltRow&&t%2!=0,l.isAltRow=!!this.parent.enableAltRow&&t%2!=0,l.isSelected=this.parent.getSelectedRowIndexes().indexOf(t)>-1,this.refreshForeignKeyRow(l);const a=this.ensureColumns(),h=new za(l,this.parent);return h.cells="Right"===this.parent.getFrozenMode()?this.generateCells(l).concat(a):a.concat(this.generateCells(l)),h}refreshForeignKeyRow(e){const t=this.parent.getForeignKeyColumns();for(let i=0;i<t.length;i++)Object(Ae.mb)(t[i].field,$c(t[i],e.data),e.foreignKeyData)}generateCells(e){const t=this.parent.getColumns(),i=[];for(let s=0;s<t.length;s++)i.push(this.generateCell(t[s],e.uid,Object(Ae.T)(t[s].commands)?void 0:Ia.CommandColumn,null,s,e.foreignKeyData));return i}generateCell(e,t,i,s,n,o){const r={visible:e.visible,isDataCell:!Object(Ae.T)(e.field||e.template),isTemplate:!Object(Ae.T)(e.template),rowID:t,column:e,cellType:Object(Ae.T)(i)?Ia.Data:i,colSpan:s,commands:e.commands,isForeignKey:e.isForeignColumn&&e.isForeignColumn(),foreignKeyData:e.isForeignColumn&&e.isForeignColumn()&&Object(Ae.R)(e.field,o)};return(r.isDataCell||"checkbox"===r.column.type||r.commands)&&(r.index=n),new Ba(r)}refreshRows(e){for(let t=0;t<e.length;t++)this.refreshForeignKeyRow(e[t]),e[t].cells=this.generateCells(e[t]);return e}getInfiniteIndex(e){return"infiniteScroll"===e.requestType||"delete"===e.requestType||"add"===e.action?e.startIndex:0}}class ph{constructor(e){this.parent=e}getData(){const e=[],t=this.parent.aggregates.slice();for(let i=0;i<t.length;i++){const s=t[i].columns.filter(e=>!(e.footerTemplate||e.groupFooterTemplate||e.groupCaptionTemplate)||this.columnSelector(e));s.length&&e.push({columns:s})}return e}columnSelector(e){return void 0!==e.footerTemplate}getColumns(e,t){const i=[];if(this.parent.allowGrouping)for(let s=0;s<this.parent.groupSettings.columns.length;s++)i.push(new Vr({}));return!this.parent.detailTemplate&&Object(Ae.T)(this.parent.childGrid)||i.push(new Vr({})),this.parent.isRowDragable()&&!e&&i.push(new Vr({})),i.push(...this.parent.getColumns()),t=t&&!e?t+this.parent.getIndentCount():t,Object(Ae.T)(e)?i:i.slice(e,t)}generateRows(e,t,i,s,n){if(0===e.length&&(void 0===t||!t.count))return[];const o=this.buildSummaryData(e,t),r=[],l=this.getData();for(let a=0;a<l.length;a++)r.push(this.getGeneratedRow(l[a],o[a],t?t.level:void 0,i,s,t?t.parentUid:void 0,n));return r}getGeneratedRow(e,t,i,s,n,o,r){const l=[];let a=this.getIndentByLevel();const h=!Object(Ae.T)(this.parent.childGrid),c=s?0:this.parent.getIndentCount();this.parent.isRowDragable()&&!s&&(a=["e-indentcelltop"]);const d=r||this.getColumns(s,n);for(let u=0;u<d.length;u++)l.push(this.getGeneratedCell(d[u],e,u>=c?this.getCellType():u<this.parent.groupSettings.columns.length?Ia.Indent:Ia.DetailFooterIntent,a[u],h));const p=new za({data:t,attributes:{class:"e-summaryrow"}});return p.cells=l,p.uid=Lc("grid-row"),p.parentUid=o,p.visible=l.some(e=>e.isDataCell&&e.visible),p}getGeneratedCell(e,t,i,s,n){const o=t.columns.filter(t=>t.columnName===e.field)[0],r={style:{textAlign:e.textAlign},"e-mappinguid":e.uid,index:e.index};s&&(r.class=s),Object(Ae.T)(s)&&n&&(r.class="e-detailindentcelltop");const l={visible:e.visible,isDataCell:!Object(Ae.T)(o),isTemplate:o&&!Object(Ae.T)(o.footerTemplate||o.groupFooterTemplate||o.groupCaptionTemplate),column:o||{},attributes:r,cellType:i};return l.column.headerText=e.headerText,new Ba(l)}buildSummaryData(e,t){const i=[],s=this.getData();let n={};for(let o=0;o<s.length;o++){n={};const r=s[o].columns;for(let i=0;i<r.length;i++)n=this.setTemplate(r[i],t&&t.aggregates?t:e,n);i.push(n)}return i}getIndentByLevel(){return this.parent.groupSettings.columns.map(()=>"e-indentcelltop")}setTemplate(e,t,i){let s=e.type;const n={},o=e.getFormatter()||(e=>e),r=t;s instanceof Array||(s=[e.type]);for(let l=0;l<s.length;l++){const n=e.field+" - "+s[l].toLowerCase(),a=e.columnName,h="Custom"!==s[l]&&r.aggregates&&n in r.aggregates?r.aggregates[n]:Bc(s[l],r.aggregates?r:t,e,this.parent);i[a]=i[a]||{},i[a][n]=h,i[a][s[l]]=Object(Ae.T)(h)?" ":o(h),r.field&&(i[a].field=r.field,i[a].key=r.key)}return n.format=e.getFormatter(),e.setTemplate(n),i}getCellType(){return Ia.Summary}}class uh extends ph{columnSelector(e){return void 0!==e.groupFooterTemplate}getIndentByLevel(e=this.parent.groupSettings.columns.length){return this.parent.groupSettings.columns.map((t,i)=>i<=e-1?"":"e-indentcelltop")}getCellType(){return Ia.GroupSummary}}class mh extends ph{columnSelector(e){return void 0!==e.groupCaptionTemplate}getData(){return[super.getData().reduce((e,t)=>(e.columns=[...e.columns,...t.columns],e),{columns:[]})]}isEmpty(){return 0===(this.getData()[0].columns||[]).length}getCellType(){return Ia.CaptionSummary}}class gh extends dh{constructor(e){super(e),this.rows=[],this.index=0,this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.parent=e,this.summaryModelGen=new uh(e),this.captionModelGen=new mh(e)}generateRows(e,t){if(0===this.parent.groupSettings.columns.length)return super.generateRows(e,t);this.isInfiniteScroll="infiniteScroll"===t.requestType,this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?t.startIndex:0;for(let i=0,s=e.length;i<s;i++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,e[i],e.level,i,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows}getGroupedRecords(e,t,i,s,n,o,r){const l=i;if(Object(Ae.T)(t.items))if(Object(Ae.T)(t.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(t,e,s,this.rows.length,r));else for(let a=0,h=t.length;a<h;a++)this.getGroupedRecords(e,t[a],t.level,s,e,this.rows.length,r);else{let i;const a=this.generateCaptionRow(t,e,s,n,o,r);if(this.isInfiniteScroll&&(i=this.getPreCaption(e,a.data.key)),i?a.uid=i.uid:this.rows=this.rows.concat(a),t.items&&t.items.length&&this.getGroupedRecords(e+1,t.items,t.items.level,s,e+1,this.rows.length,a.uid),this.parent.aggregates.length&&this.isRenderAggregate(a)){const e=this.rows.length;this.rows.push(...this.summaryModelGen.generateRows(t,{level:l,parentUid:a.uid}));for(let t=e-1;t>=0;t--)if(this.rows[t].isCaptionRow)this.rows[t].aggregatesCount=this.rows.length-e;else if(!this.rows[t].isCaptionRow&&!this.rows[t].isDataRow)break}i&&this.setInfiniteRowVisibility(i)}}isRenderAggregate(e){return this.parent.enableInfiniteScrolling?!!this.renderInfiniteAgg&&(this.getPreCaption(e.indent,e.data.key),this.renderInfiniteAgg=e.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!this.parent.enableInfiniteScrolling}getPreCaption(e,t){const i=[...this.parent.getRowsObject(),...this.rows];let s;this.infiniteChildCount=0;let n=i.length;for(;n--&&(i[n].isCaptionRow&&i[n].indent===e&&i[n].data.key===t&&(s=i[n]),!(i[n].indent===e||i[n].indent<e));)i[n].indent===e+1&&this.infiniteChildCount++;return s}getCaptionRowCells(e,t,i){const s=[];let n=[],o=this.parent.getColumnByField(e);const r=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(o=this.parent.columns.filter(t=>t.field===e)[0]);const l=this.parent.groupSettings.columns.length,a=this.parent;if(!this.parent.enableColumnVirtualization||-1!==r.indexOf(t)){for(let e=0;e<t;e++)s.push(this.generateIndentCell());s.push(this.generateCell({},null,Ia.Expand))}if(t=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+l+(a.detailTemplate||a.childGrid?1:0)-t+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){const e=this.captionModelGen.generateRows(i)[0];Object(Ae.G)(i,e.data);let s=0;e.cells.some((e,t)=>(s=t,e.visible&&e.isDataCell)),n=e.cells.slice(s).filter(e=>e.visible),e.visible&&n[0].column.field===this.parent.getVisibleColumns()[0].field&&(n=n.slice(1)),1===this.parent.getVisibleColumns().length&&(n=[]),t-=n.length}const h=this.parent.enableColumnVirtualization?this.parent.getColumns():[o];let c=!0;for(let d=0;d<h.length;d++){const e=c&&-1!==r.indexOf(t);e&&(c=!1);const i=!this.parent.enableColumnVirtualization||e?Ia.GroupCaption:Ia.GroupCaptionEmpty;t=this.parent.enableColumnVirtualization&&i===Ia.GroupCaption?t+l:t,a.isRowDragable()&&t++,s.push(this.generateCell(o,null,i,t))}return s.push(...n),s}generateCaptionRow(e,t,i,s,n,o){const r={},l=this.parent.getColumnByField(e.field);r.data=Object(Ae.G)({},e),l&&(r.data.field=e.field),r.isDataRow=!1,r.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),r.parentGid=i,r.childGid=s,r.tIndex=n,r.isCaptionRow=!0,r.parentUid=o,r.gSummary=Object(Ae.T)(e.items.records)?e.items.length:e.items.records.length,r.uid=Lc("grid-row");const a=new za(r);return a.indent=t,this.getForeignKeyData(a),a.cells=this.getCaptionRowCells(e.field,t,a.data),a}getForeignKeyData(e){const t=e.data,i=this.parent.getColumnByField(t.field);if(i&&i.isForeignColumn&&i.isForeignColumn()){const s=Object(Ae.T)(t.key)?"":i.valueAccessor(i.foreignKeyValue,$c(i,{},t.key)[0],i);Object(Ae.mb)("foreignKey",s,e.data)}}generateDataRows(e,t,i,s,n){const o=[],r=this.parent.getColumnIndexesInView();for(let l=0,a=e.length;l<a;l++,s++){o[l]=this.generateRow(e[l],this.index,l?void 0:"e-firstchildrow",t,i,s,n);for(let e=0;e<t;e++)this.parent.enableColumnVirtualization&&-1===r.indexOf(t)||o[l].cells.unshift(this.generateIndentCell());this.index++}return o}generateIndentCell(){return this.generateCell({},null,Ia.Indent)}refreshRows(e){const t=this.parent.getColumnIndexesInView();for(let i=0;i<e.length;i++)if(e[i].isDataRow){e[i].cells=this.generateCells(e[i]);for(let s=0;s<e[i].indent;s++)this.parent.enableColumnVirtualization&&-1===t.indexOf(e[i].indent)||e[i].cells.unshift(this.generateIndentCell())}else{const t=this.generateCaptionRow(e[i].data,e[i].indent);e[i].cells=t.cells}return e}setInfiniteRowVisibility(e){if(!e.isExpand||!1===e.visible)for(const t of this.rows)t.parentUid===e.uid&&(t.visible=!1,t.isCaptionRow&&this.setInfiniteRowVisibility(t))}ensureRowVisibility(){for(let e=0;e<this.rows.length;e++){const t=this.rows[e];if(t.isCaptionRow)for(let i=e+1;i<this.rows.length;i++)t.uid===this.rows[i].parentUid&&(this.rows[i].visible=t.isExpand)}}}class bh{constructor(e,t){this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.viewColIndexes=[],this.drop=e=>{this.parent.notify("columnDrop",{target:e.target,droppedElement:e.droppedElement}),Object(Ae.db)(e.droppedElement)},this.infiniteCache={},this.isRemove=!1,this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.rafCallback=e=>{const t=e;return()=>{if(this.parent.isFrozenGrid()&&this.parent.enableVirtualization){const t=e.tableName;if(this.isLoaded=this.parent.getFrozenMode()===Za?"frozen-right"===t:"movable"===t,this.parent.enableColumnVirtualization&&"virtualscroll"===e.requestType&&this.isLoaded){const e=[].slice.call(this.parent.getMovableVirtualHeader().getElementsByClassName(Xa)),t=[].slice.call(this.parent.getFrozenVirtualHeader().getElementsByClassName(Xa));this.isLoaded=e.length===t.length}}if(this.ariaService.setBusy(this.getPanel().querySelector(".e-content"),!1),this.parent.isDestroyed)return;let i=this.rows.slice(0);if(this.parent.enableInfiniteScrolling){i=this.parent.getRowsObject();const e=t.prevPage;if(this.parent.infiniteScrollSettings.enableCache&&e){const e=this.parent.infiniteScrollSettings.maxBlocks;i=[];const t=parseInt(this.rowElements[0].getAttribute("aria-rowindex"),10)+1;for(let s=0,n=Math.ceil(t/this.parent.pageSettings.pageSize);s<e;s++,n++)this.infiniteCache[n]&&(i=[...i,...this.infiniteCache[n]])}}if(this.parent.isFrozenGrid()&&(i=e.isFrozen?this.freezeRows:e.renderFrozenRightContent?this.parent.getFrozenRightRowsObject():this.movableRows),this.parent.notify(bl,{rows:i,args:t}),this.isLoaded&&(this.parent.isManualRefresh=!1,this.parent.trigger(Yr,{},()=>{this.parent.allowTextWrap&&this.parent.notify(Ql,{case:"textwrap"})})),t){const i=(t.requestType||"").toLowerCase()+"-complete";this.parent.notify(i,t),"batchsave"===e.requestType&&(e.cancel=!1,this.parent.trigger(Ur,e))}this.isLoaded&&this.parent.hideSpinner()}},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.parent.enableDeepCompare=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),this.parent.isDestroyed||(this.parent.enableColumnVirtualization||this.parent.enableVirtualization||this.parent.groupSettings.enableLazyLoading||this.parent.on(Il,this.setVisible,this),this.parent.on(wl,this.colGroupRefresh,this),this.parent.on(fl,this.enableAfterRender,this),this.parent.on("refresh-infinite-mode-blocks",this.refreshContentRows,this),this.parent.on(El,this.beforeCellFocused,this),this.parent.on(kl,this.droppableDestroy,this))}beforeCellFocused(e){this.pressedKey=!e.byKey||"upArrow"!==e.keyArgs.action&&"downArrow"!==e.keyArgs.action?void 0:e.keyArgs.action}renderPanel(){const e=this.parent;let t=this.parent.element.querySelector("."+Va);if(t)return this.ariaService.setOptions(this.parent.element.querySelector(".e-content"),{busy:!1}),void this.setPanel(t);t=this.parent.createElement("div",{className:Va});const i=this.parent.createElement("div",{className:Ka});this.ariaService.setOptions(i,{busy:!1}),t.appendChild(i),this.setPanel(t),e.element.appendChild(t)}renderTable(){const e=this.getPanel(),t=e.querySelector(".e-virtualtable"),i=e.querySelector(".e-virtualtrack");!this.parent.enableVirtualization||Object(Ae.T)(t)||Object(Ae.T)(i)||(Object(Ae.db)(t),Object(Ae.db)(i)),e.appendChild(this.createContentTable("_content_table")),this.setTable(e.querySelector(".e-table")),this.ariaService.setOptions(this.getTable(),{multiselectable:"Multiple"===this.parent.selectionSettings.type}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdrcont")}createContentTable(e){const t=this.getPanel().firstElementChild;this.getTable()&&Object(Ae.db)(this.getTable());const i=t.querySelector(".e-table")?t.querySelector(".e-table"):this.parent.createElement("table",{className:Ya,attrs:{cellspacing:"0.25px",role:"grid",id:this.parent.element.id+e}});return this.setColGroup(this.parent.getHeaderTable().querySelector(oh).cloneNode(!0)),i.appendChild(this.getColGroup()),i.appendChild(this.parent.createElement(nh)),t.appendChild(i),t}refreshContentRows(e={}){const t=this.parent;if(0===t.currentViewData.length)return;const i=this.currentMovableRows||t.currentViewData,s=this.parent.contentModule,n=t.isReact&&!Object(Ae.T)(t.rowTemplate);let o=n?t.createElement(nh):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=Object(Ae.G)([],i));const r=n?t.createElement(nh):document.createDocumentFragment(),l=t.getColumns();let a,h;const c=t.getFrozenColumns(),d=this.parent.isFrozenGrid();let p;const u=new ch(this.serviceLocator,null,this.parent),m=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;t.notify("destroy-child-grid",{}),this.rowElements=[],this.rows=[];const g=this.getPanel().querySelector("."+_a),b=this.getPanel().querySelector("."+Wa),f=this.getPanel().querySelector(".e-content");let y,v,C;ed(t)&&["sorting","filtering","searching","grouping","ungrouping","reorder"].some(t=>e.requestType===t)&&this.emptyVcRows(),this.parent.enableVirtualization&&this.parent.isFrozenGrid()?(this.parent.enableColumnVirtualization&&"virtualscroll"===e.requestType&&"X"===e.virtualInfo.sentinelInfo.axis&&(C=this.parent.contentModule.generateRows(i,e),e.renderMovableContent=!0),C=this.parent.contentModule.generateRows(i,e)):(C=this.checkCache(C,e),this.isAddRows||this.useGroupCache||(C=this.generator.generateRows(i,e))),this.setGroupCache(C,e),this.parent.notify("set-infinite-cache",{isInfiniteScroll:m,modelData:C,args:e});const w=C[0].cells[0].index;d&&(v=s.setTbody(C,e),y=s.getTbody(v));const O=this.parent.getFrozenMode()===Za&&v===eh;if("infiniteScroll"!==e.requestType&&this.parent.registeredTemplate&&this.parent.registeredTemplate.template&&!e.isFrozen&&!O){const e=[];for(let t=0;t<this.parent.registeredTemplate.template.length;t++)for(let i=0;i<this.parent.registeredTemplate.template[t].rootNodes.length;i++)Object(Ae.T)(this.parent.registeredTemplate.template[t].rootNodes[i].parentNode)&&e.push(this.parent.registeredTemplate.template[t]);this.parent.destroyTemplate(["template"],e)}!this.parent.isReact&&!this.parent.isVue||"infiniteScroll"===e.requestType||e.isFrozen||Td(this.parent,[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"]),this.parent.enableColumnVirtualization&&new Pa(this.serviceLocator,this.parent).updateVirtualCells(C),d||(this.tbody=this.getTable().querySelector(nh));let S=0,T=!0;if(ed(t)&&t.vcRows.length){const i="top",s=Object(Ae.T)(e.virtualInfo.offsets)?Object(Ae.T)(e.scrollTop)?0:e.scrollTop[i]:e.virtualInfo.offsets.top;if(0!==s){const i=t.vGroupOffsets,n=t.pageSettings.pageSize/2,o=Object.keys(i).map(e=>i[e]);for(let t=0;t<o.length;t++)if(s<o[t]){if(Object(Ae.T)(e.virtualInfo)||"up"!==e.virtualInfo.direction){S=t*n,(this.parent.contentModule.isEndBlock(t)||this.parent.contentModule.isEndBlock(t+1))&&(e.virtualInfo.blockIndexes=[t,t+1]);break}S=t>0?(t-1)*n:t*n;break}Math.round(s+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!e.rowObject&&(T=!1)}}const j=t.frozenRows&&!t.isFrozenGrid()&&this.parent.enableVirtualization&&"reorder"===e.requestType;if(t.frozenRows&&"virtualscroll"===e.requestType&&"X"===e.virtualInfo.sentinelInfo.axis||j){const t=e.virtualInfo.blockIndexes,s=e.virtualInfo.page;e.virtualInfo.blockIndexes=[1,2],j&&(e.virtualInfo.page=1);const n=this.vgenerator.generateRows(j?this.initialPageRecords:i,e);n.splice(this.parent.frozenRows);for(let e=0;e<this.parent.frozenRows;e++)n[e].cells.splice(0,this.parent.getFrozenColumns()),a=u.render(n[e],l),r.appendChild(a);e.virtualInfo.blockIndexes=t,e.virtualInfo.page=s,j&&1===e.virtualInfo.page&&C.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(r,C,u,e,i,l);for(let E=S,x=C.length;E<x;E++)if(this.rows.push(C[E]),!this.parent.groupSettings.enableLazyLoading||this.useGroupCache||!this.parent.groupSettings.columns.length||(this.setRowsInLazyGroup(C[E],E),!Object(Ae.T)(C[E].indent))){if(this.setInfiniteVisibleRows(e,C[E],v),ed(t)&&e.virtualInfo&&e.virtualInfo.blockIndexes&&this.rowElements.length>=e.virtualInfo.blockIndexes.length*this.parent.contentModule.getBlockSize()&&T){this.parent.currentViewData.records=this.rows.map(e=>e.data);break}if(t.rowTemplate){const e=t.element.id+"rowTemplate";let s;if(t.isReact){const s=t.frozenRows&&E<t.frozenRows,n=Object(Ae.G)({index:E},i[E]);t.getRowTemplate()(n,t,"rowTemplate",e,null,null,s?r:o),t.renderTemplates()}else s=t.getRowTemplate()(Object(Ae.G)({index:E},i[E]),t,"rowTemplate",e);if(t.isReact||"TBODY"!==s[0].tagName)t.frozenRows&&E<t.frozenRows?a=t.isReact?r.lastElementChild:zc(r,s):(t.isReact||(a=zc(o,s)),p=t.isReact?o.lastElementChild:a.lastElementChild);else{for(let e=0;e<s.length;e++){const t="tr"===s[e].nodeName.toLowerCase();(t||s[e].querySelectorAll&&s[e].querySelectorAll("tr").length)&&(a=t?s[e]:s[e].querySelector("tr"))}t.frozenRows&&E<t.frozenRows?r.appendChild(a):o.appendChild(a)}this.parent.trigger(qr,{data:C[E].data,row:p||a})}else{a=u.render(C[E],l);const i=this.ensureFrozenHeaderRender(e);t.frozenRows&&E<t.frozenRows&&!m&&"virtualscroll"!==e.requestType&&i&&this.ensureVirtualFrozenHeaderRender(e)?r.appendChild(a):o.appendChild(a),C[E].isExpand&&t.notify("expandchildgrid",a.cells[t.groupSettings.columns.length])}C[E].isDataRow&&this.rowElements.push(a),this.ariaService.setOptions(this.getTable(),{colcount:t.getColumns().length.toString()})}if(d&&s.splitRows(v),t.frozenRows&&"virtualscroll"!==e.requestType&&!m&&this.ensureVirtualFrozenHeaderRender(e)||"virtualscroll"===e.requestType&&e.virtualInfo.sentinelInfo&&"X"===e.virtualInfo.sentinelInfo.axis)if(h=d?s.getFrozenHeader(v):t.getHeaderTable().querySelector(nh),n){const e=h.parentElement;Object(Ae.db)(h),e.appendChild(r)}else h.innerHTML="",h.appendChild(r);!t.enableVirtualization&&t.frozenRows&&0===w&&f.offsetHeight===Number(t.height)&&(f.style.height=f.offsetHeight-h.offsetHeight+"px"),e.rows=this.rows.slice(0),d&&s.setIsFrozen(e,v),this.index=w,Sc(()=>{this.parent.notify(sa,e);const i=this.parent.enableVirtualization&&this.parent.isFrozenGrid();if(this.parent.enableVirtualization||m||(this.parent.isFrozenGrid()?(Object(Ae.db)(s.getTbody(v)),y=this.parent.createElement(nh)):(this.tbody.innerHTML="",Object(Ae.db)(this.tbody),this.tbody=this.parent.createElement(nh))),!d||i||this.parent.enableInfiniteScrolling)if(t.rowTemplate&&Object(Ae.ob)(t.element.id+"rowTemplate","RowTemplate",t),i){if(e.renderFrozenRightContent){const i=t.getContent().querySelector(".e-frozen-right-content").querySelector(nh);this.appendContent(i,o,e)}else e.renderMovableContent?(this.appendContent(b.querySelector(nh),o,e),e.renderMovableContent=!1):this.appendContent(g.querySelector(nh),o,e);this.parent.getFrozenColumns()||s.renderNextFrozentPart(e,v)}else!Object(Ae.T)(this.parent.infiniteScrollModule)&&this.parent.enableInfiniteScrolling?(this.isAddRows=!1,this.parent.notify("remove-infinite-rows",{args:e}),this.parent.notify("append-infinite-content",{tbody:y||this.tbody,frag:o,args:e,rows:this.rows,rowElements:this.rowElements,visibleRows:this.visibleRows,tableName:v}),!c&&d&&((t.getFrozenMode()===Za||v!==th&&v!==eh)&&(t.getFrozenMode()!==Za||v!==th&&"movable"!==v)||this.refreshContentRows(Object(Ae.G)({},e)))):(this.useGroupCache=!1,this.appendContent(this.tbody,o,e));else this.appendContent(y,o,e,v);c&&s.renderNextFrozentPart(e,v),o=null},this.rafCallback(Object(Ae.G)({},e)))}emptyVcRows(){this.parent.vcRows=[],this.parent.vRows=[]}appendContent(e,t,i,s){this.parent.isReact&&!Object(Ae.T)(this.parent.rowTemplate)?this.getTable().appendChild(t):(e.appendChild(t),this.getTable().appendChild(e))}setRowsInLazyGroup(e,t){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.contentModule.maintainRows(e,t)}setGroupCache(e,t){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify("group-cache",{args:t,data:e})}ensureFrozenHeaderRender(e){return!(this.parent.enableVirtualization&&("reorder"===e.requestType||"refresh"===e.requestType)||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&"delete"===this.parent.infiniteScrollModule.requestType&&1!==this.parent.pageSettings.currentPage)}ensureVirtualFrozenHeaderRender(e){return!(this.parent.enableVirtualization&&"delete"===e.requestType)}checkCache(e,t){if(this.parent.infiniteScrollSettings.enableCache&&"infiniteScroll"===t.requestType){const i=t.isFrozen?1:0,s=this.parent.isFrozenGrid();if(this.isAddRows=!Object(Ae.T)(this.infiniteCache[this.parent.pageSettings.currentPage]),s&&!Object(Ae.T)(this.infiniteCache[this.parent.pageSettings.currentPage])&&(this.isAddRows=0!==this.infiniteCache[this.parent.pageSettings.currentPage][i].length),this.isAddRows){const t=s?this.infiniteCache[this.parent.pageSettings.currentPage][i]:this.infiniteCache[this.parent.pageSettings.currentPage];e=1===this.parent.pageSettings.currentPage?t.slice(this.parent.frozenRows):t}return e}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&("paging"===t.requestType||"columnstate"===t.requestType||"reorder"===t.requestType)&&this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]?(this.useGroupCache=!0,this.parent.contentModule.initialGroupRows("reorder"===t.requestType)):null}setInfiniteVisibleRows(e,t,i){const s=this.parent.isFrozenGrid();this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&(s?i===th||"Right"===this.parent.getFrozenMode()&&i===eh?this.visibleFrozenRows.push(t):"movable"===i?this.visibleRows.push(t):this.rightFreezeRows.push(t):this.parent.infiniteScrollSettings.enableCache||this.visibleRows.push(t))}getCurrentBlockInfiniteRecords(e){let t=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];const i=this.parent.isFrozenGrid(),s=this.parent.getRows();let n=parseInt(s[this.parent.frozenRows].getAttribute(sh),10);const o=Math.ceil((n+1)/this.parent.pageSettings.pageSize);n=parseInt(s[s.length-1].getAttribute(sh),10);const r=Math.ceil(n/this.parent.pageSettings.pageSize);if(i){const i=e?0:1;for(let e=o;e<=r;e++)t=t.length?t.concat(this.infiniteCache[e][i]):this.infiniteCache[e][i];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(t=this.infiniteCache[1][i].slice(0,this.parent.frozenRows).concat(t))}else{for(let e=o;e<=r;e++)t=t.length?t.concat(this.infiniteCache[e]):this.infiniteCache[e];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(t=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(t))}}return t}getReorderedVFRows(e){return this.parent.contentModule.getReorderedFrozenRows(e)}getReorderedRows(e){return this.parent.contentModule.getReorderedFrozenRows(e)}virtualFrozenHdrRefresh(e,t,i,s,n,o){if(this.parent.frozenRows&&this.parent.enableVirtualization&&("reorder"===s.requestType||"refresh"===s.requestType)){let r,l=[];this.parent.isFrozenGrid()?(this.currentMovableRows=n,l=this.getReorderedVFRows(s)):l=this.getReorderedRows(s);for(let t=0;t<l.length;t++)r=i.render(l[t],o),e.appendChild(r);1===s.virtualInfo.page&&t.splice(0,this.parent.frozenRows),s.renderMovableContent&&(this.parent.currentViewData=this.currentMovableRows,this.currentMovableRows=null)}}getInfiniteRows(){let e=[];const t=this.parent.isFrozenGrid();if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache){const i=Object.keys(this.infiniteCache);for(let s=0;s<i.length;s++)e=t?[...e,...this.infiniteCache[i[s]][0]]:[...e,...this.infiniteCache[i[s]]]}else e=t?this.visibleFrozenRows:this.visibleRows;return e}getInfiniteMovableRows(){const e=this.getCurrentBlockInfiniteRecords();return this.parent.enableInfiniteScrolling?e.length?e:this.visibleRows:[]}getPanel(){return this.contentPanel}setPanel(e){this.contentPanel=e}getTable(){return this.contentTable}setTable(e){this.contentTable=e}getRows(){const e=this.getInfiniteRows();return e.length?e:this.parent.getFrozenColumns()?this.freezeRows:this.rows}getMovableRows(){const e=this.getInfiniteMovableRows();return e.length?e:this.movableRows}getRowElements(){return this.parent.getFrozenColumns()?this.freezeRowElements:this.rowElements}getMovableRowElements(){return this.rowElements}setRowElements(e){this.rowElements=e}getColGroup(){return this.colgroup}setColGroup(e){return Object(Ae.T)(e)||(e.id="content-"+e.id),this.colgroup=e}setVisible(e){const t=this.parent,i=this.parent.isFrozenGrid(),s=t.getFrozenColumns();let n,o=[];if(i){const e=this.freezeRows,i=this.movableRows,s=e.length;let n,r=[];t.getFrozenMode()===Za&&(r=t.getFrozenRightRowsObject());for(let t,l=0;l<s;l++){n=i[l].cells.length;const s=r.length?r[l].cells.length:0;t=e[l].clone();for(let e=0;e<n;e++)t.cells.push(i[l].cells[e]);for(let e=0;e<s;e++)t.cells.push(r[l].cells[e]);o.push(t)}}else o=this.getRows();o.some(e=>(e.isDataRow&&(n=e),e.isDataRow));let r=!0;!t.groupSettings.columns.length&&n&&(r=!1);let l=t.getDataRows(),a=this.infiniteRowVisibility()||this.rows.filter(e=>!e.isDetailRow);for(let h=0,c=e.length;h<c;h++){const o=e[h];let c=this.parent.getNormalizedColumnIndex(o.uid),d=this.parent.getColumnIndexByUid(o.uid);const p=!0===o.visible?"":"none";if(-1!==c&&n&&c<n.cells.length)if(i)if("movable"!==o.getFreezeTableName())if(o.getFreezeTableName()===eh){d=c-=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount();const e=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(oh);Object(Ae.kb)(e.childNodes[c],{display:p}),a=t.getFrozenRightRowsObject(),l=t.getFrozenRightDataRows()}else Object(Ae.kb)(this.getColGroup().childNodes[c],{display:p}),a=this.infiniteRowVisibility(!0)||this.freezeRows,l=t.getDataRows();else{const e=t.getContent().querySelector("."+Wa).querySelector(oh);d=c=c-s-this.parent.getFrozenLeftColumnsCount(),Object(Ae.kb)(e.childNodes[c],{display:p}),l=t.getMovableDataRows(),a=this.infiniteRowVisibility()||this.movableRows}else Object(Ae.kb)(this.getColGroup().childNodes[c],{display:p});r||this.setDisplayNone(l,d,p,a),!this.parent.invokedFromMedia&&o.hideAtMedia&&this.parent.updateMediaColumns(o),this.parent.invokedFromMedia=!1}r?this.refreshContentRows({requestType:"refresh"}):this.parent.getFrozenColumns()?(this.parent.notify(ca,{rows:this.freezeRows,args:{isFrozen:!0,rows:this.freezeRows}}),this.parent.notify(ca,{rows:this.movableRows,args:{isFrozen:!1,rows:this.movableRows}})):this.parent.notify(ca,{rows:a,args:{}})}setDisplayNone(e,t,i,s){(function(e,t,i,s,n,o){const r=Object.keys(e);for(let l=0;l<r.length;l++){const a=e[r[l]].querySelectorAll("td.e-rowcell")[t];if(e[r[l]].querySelectorAll("td.e-rowcell").length&&a)if(Object(Ae.kb)(e[r[l]].querySelectorAll("td.e-rowcell")[t],{display:i}),e[r[l]].querySelectorAll("td.e-rowcell")[t].classList.contains("e-hide")&&Object(Ae.eb)([e[r[l]].querySelectorAll("td.e-rowcell")[t]],["e-hide"]),o&&n.isRowDragable()){const e=n.getFrozenColumns()?t:t+1;s[r[l]].cells[e].visible=""===i}else s[r[l]].cells[t].visible=""===i}})(e,t,i,s,this.parent,this.parent.isRowDragable()),this.parent.notify("infinite-show-hide",{visible:i,index:t,isFreeze:this.isInfiniteFreeze})}infiniteRowVisibility(e){let t;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=e,t=this.parent.infiniteScrollSettings.enableCache?e?this.getCurrentBlockInfiniteRecords(!0):this.getCurrentBlockInfiniteRecords():e?this.visibleFrozenRows:this.visibleRows),t}colGroupRefresh(){if(this.getColGroup()){let e;e=this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()?this.parent.getMovableVirtualHeader().querySelector(oh).cloneNode(!0):this.getHeaderColGroup(),this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e)}}getHeaderColGroup(){return this.parent.element.querySelector(".e-gridheader").querySelector(oh).cloneNode(!0)}initializeContentDrop(){this.droppable=new Ae.j(this.parent.element,{accept:".e-dragclone",drop:this.drop})}droppableDestroy(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()}canSkip(e,t,i){return Object(Ae.T)(t)||Object(Ae.T)(e.visible)||t.cells[i].visible===e.visible}getModelGenerator(){return this.generator=this.parent.allowGrouping?new gh(this.parent):new dh(this.parent)}renderEmpty(e){this.getTable().appendChild(e),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(nh).innerHTML="")}setSelection(e,t,i){this.parent.notify("set-freeze-selection",{uid:e,set:t,clearAll:i});const s=this.parent.isFrozenGrid();if(s&&this.parent.enableVirtualization)return;if(s){const s=this.getMovableRows().filter(t=>i||e===t.uid);for(let e=0;e<s.length;e++)s[e].isSelected=t}const n=this.getRows().filter(t=>i||e===t.uid);for(let o=0;o<n.length;o++){n[o].isSelected=t;const e=n[o].cells;for(let i=0;i<e.length;i++)e[i].isSelected=t}}getRowByIndex(e){return e=this.getInfiniteRowIndex(e),this.parent.getDataRows()[e]}getInfiniteRowIndex(e){if(this.parent.infiniteScrollSettings.enableCache){const t=this.parent.frozenRows,i=t>e?0:t,s=parseInt(this.parent.getRows()[i].getAttribute(sh),10);e=t>e?e:e-s+t}return e}getVirtualRowIndex(e){return e}getMovableRowByIndex(e){return e=this.getInfiniteRowIndex(e),this.parent.getMovableDataRows()[e]}enableAfterRender(e){"group"===e.module&&e.enable&&(this.generator=this.getModelGenerator())}setRowObjects(e){this.rows=e}immutableModeRendering(e={}){const t=this.parent;t.hideSpinner();const i=t.getPrimaryKeyFieldNames()[0],s={},n={},o=[],r={},l=t.getRowsObject().slice(),a=this.getBatchEditedRecords(i,l),h={},c=0!==Object.keys(a).length;if(t.getContent().querySelector(".e-emptyrow")||"reorder"===e.requestType||this.parent.groupSettings.columns.length)this.refreshContentRows(e);else{if(0===t.currentViewData.length)return;const d={},p=t.createElement(nh),u=t.currentViewData,m=[].slice.call(this.getTable().querySelector(nh).children);if(this.prevCurrentView.length){const e=this.prevCurrentView.length,t=u.length;if(e===t)for(let o=0;o<t;o++)"Batch"===this.parent.editSettings.mode&&m[o].classList.contains("e-insertedrow")?(m.splice(o,1),--o):(n[u[o][i]]=s[this.prevCurrentView[o][i]]=o,h[o]=u[o][i],d[l[o].uid]=m[o],r[o]=this.prevCurrentView[o][i]);else{for(let e=0;e<t;e++)n[u[e][i]]=e,h[e]=u[e][i];for(let t=0;t<e;t++)"Batch"===this.parent.editSettings.mode&&m[t].classList.contains("e-insertedrow")?(m.splice(t,1),--t):(d[l[t].uid]=m[t],s[this.prevCurrentView[t][i]]=t,r[t]=this.prevCurrentView[t][i])}}for(let e=0;e<u.length;e++){const n=s[u[e][i]];if(Object(Ae.T)(n)){const i=new ch(this.serviceLocator,null,t),s=this.generator.generateRows([u[e]]);o.push(s[0]);const n=i.render(s[0],t.getColumns());p.appendChild(n),this.refreshImmutableContent(e,n,o[e])}else{let t=!1;this.parent.enableDeepCompare&&(t=this.objectEqualityChecker(this.prevCurrentView[n],u[e]));const i=d[l[n].uid];if(o.push(l[n]),this.rowElements[n]&&this.rowElements[n].getAttribute("data-uid")===o[e].uid&&(c&&Object(Ae.T)(a[h[e]])||!c&&(t||this.prevCurrentView[n]===u[e]))){n!==e&&this.refreshImmutableContent(e,i,o[e]),p.appendChild(i);continue}(c&&!Object(Ae.T)(a[h[e]])||!this.parent.enableDeepCompare&&u[e]!==this.prevCurrentView[n]||this.parent.enableDeepCompare&&!t)&&l[n].setRowValue(u[e]),p.appendChild(i),this.refreshImmutableContent(e,i,o[e])}}if(this.rows=o,this.rowElements=[].slice.call(p.children),Object(Ae.db)(this.getTable().querySelector(nh)),this.getTable().appendChild(p),this.parent.trigger(Yr,{},()=>{this.parent.allowTextWrap&&this.parent.notify(Ql,{case:"textwrap"})}),e){const t=(e.requestType||"").toLowerCase()+"-complete";this.parent.notify(t,e)}}}objectEqualityChecker(e,t){const i=Object.keys(e);let s=!0;for(let n=0;n<i.length;n++)if(!(e[i[n]]===t[i[n]]||e[i[n]]instanceof Date&&t[i[n]]instanceof Date&&e[i[n]].getTime()===t[i[n]].getTime())){s=!1;break}return s}getBatchEditedRecords(e,t){const i={},s=this.parent.getBatchChanges();let n=[],o=[];Object.keys(s).length&&(n=s.changedRecords,o=s.addedRecords);const r={cancel:!1};this.parent.notify("immutable-batch-cancel",{rows:t,args:r}),o.length&&("Bottom"===this.parent.editSettings.newRowPosition?t.splice(t.length-1,o.length):r.cancel||t.splice(0,o.length));for(let l=0;l<n.length;l++)i[n[l][e]]=l;return i}refreshImmutableContent(e,t,i){i.isAltRow=!!this.parent.enableAltRow&&e%2!=0,i.isAltRow?t.classList.add("e-altrow"):t.classList.remove("e-altrow"),i.index=e,i.edit=void 0,i.isDirty=!1,t.setAttribute(sh,e.toString()),this.updateCellIndex(t,e)}updateCellIndex(e,t){for(let i=0;i<e.cells.length;i++)e.cells[i].setAttribute("index",t.toString())}}class fh{constructor(e,t){this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=e=>{const t=this.parent,i=this.draggable.currentStateTarget,s=Ic(i,"e-headercell");if(!t.allowReordering&&!t.allowGrouping||!Object(Ae.T)(s)&&s.getElementsByClassName("e-checkselectall").length>0)return!1;const n=this.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),o=i.classList.contains("e-headercell")?i:s;if(!o||!t.allowReordering&&o.classList.contains("e-stackedheadercell"))return!1;const r=o.offsetHeight,l=o.querySelector(".e-headercelldiv")||o.querySelector(".e-stackedheadercelldiv");let a;if(l){if(a=o.querySelector(".e-stackedheadercelldiv")?t.getStackedHeaderColumnByHeaderText(l.innerText.trim(),t.columns):t.getColumnByUid(l.getAttribute("e-mappinguid")),this.column=a,this.column.lockColumn)return!1;n.setAttribute("e-mappinguid",this.column.uid)}if(a&&!Object(Ae.T)(a.headerTemplate))if(Object(Ae.T)(a.headerTemplate))n.innerHTML=a.headerTemplate;else{const e=t.getColumnIndexByField(a.field);zc(n,a.getHeaderTemplate()(Object(Ae.G)({index:e},a),t,"headerTemplate"))}else n.innerHTML=l?a.headerText:o.firstElementChild.innerHTML;return n.style.width=o.offsetWidth+"px",n.style.height=o.offsetHeight+"px",n.style.lineHeight=(r-6).toString()+"px",t.element.appendChild(n),n},this.dragStart=e=>{const t=this.parent;t.element.querySelector(".e-gridpopup").style.display="none",t.notify("columnDragStart",{target:this.draggable.currentStateTarget,column:this.column,event:e.event})},this.drag=e=>{const t=this.parent,i=e.target;if(i){const s=Object(Ae.A)(i,".e-grid"),n=this.parent.element.querySelector(".e-cloneproperties");if(!(s&&s.getAttribute("id")===t.element.getAttribute("id")||(Object(Ae.y)(n,["e-notallowedcur"],["e-defaultcur"]),t.allowReordering&&(t.element.querySelector(".e-reorderuparrow").style.display="none",t.element.querySelector(".e-reorderdownarrow").style.display="none"),t.groupSettings.allowReordering)))return;t.notify("columnDrag",{target:e.target,column:this.column,event:e.event})}},this.dragStop=e=>{const t=this.parent;let i;t.element.querySelector(".e-gridpopup").style.display="none",(!Ic(e.target,"e-headercell")&&!Ic(e.target,"e-groupdroparea")||!t.allowReordering&&Ic(e.target,"e-headercell")||!e.helper.getAttribute("e-mappinguid")&&Ic(e.target,"e-groupdroparea"))&&(Object(Ae.db)(e.helper),i=!0),t.notify("column-drag-stop",{target:e.target,event:e.event,column:this.column,cancel:i})},this.drop=e=>{const t=this.parent,i=e.droppedElement.getAttribute("e-mappinguid"),s=Object(Ae.A)(e.target,".e-grid");Object(Ae.db)(e.droppedElement),s&&s.getAttribute("id")!==t.element.getAttribute("id")||!t.allowReordering&&!t.allowGrouping||t.notify("header-drop",{target:e.target,uid:i,droppedElement:e.droppedElement})},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),this.parent.isDestroyed||(this.parent.enableColumnVirtualization||this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenRightColumnsCount()||this.parent.on(Il,this.setVisible,this),this.parent.on(Ml,this.colPosRefresh,this),this.parent.on(ml,this.renderCustomToolbar,this),"Vertical"===this.parent.rowRenderingMode&&this.parent.on(fl,this.updateCustomResponsiveToolbar,this))}renderPanel(){let e=this.parent.element.querySelector(".e-gridheader");const t=null!=e;e=t?e:this.parent.createElement("div",{className:"e-gridheader"});const i=t?e.querySelector("."+qa):this.parent.createElement("div",{className:qa});this.toggleStackClass(e),e.appendChild(i),this.setPanel(e),t||this.parent.element.appendChild(e)}renderTable(){const e=this.getPanel();e.appendChild(this.createHeaderTable()),this.setTable(e.querySelector(".e-table")),this.parent.getFrozenColumns()||this.parent.getFrozenRightColumnsCount()||this.parent.getFrozenLeftColumnsCount()||(this.initializeHeaderDrag(),this.initializeHeaderDrop()),this.parent.notify(Ol,{rows:this.rows,args:{isFrozen:this.parent.isFrozenGrid()}})}getPanel(){return this.headerPanel}setPanel(e){this.headerPanel=e}getTable(){return this.headerTable}setTable(e){this.headerTable=e}getColGroup(){return this.colgroup}setColGroup(e){return this.colgroup=e}getRows(){return this.getTable().tHead.rows}createHeaderTable(){const e=this.createTable(),t=this.getPanel().querySelector("."+qa);return t.appendChild(e),t}createHeader(e=null,t){const i=this.parent,s=i.isFrozenGrid();this.getTable()&&!s&&Object(Ae.db)(this.getTable());const n=this.parent.createElement("table",{className:Ya,attrs:{cellspacing:"0.25px",role:"grid"}}),o=t||(i.getFrozenLeftCount()?"frozen-left":"frozen-right"),r=this.createHeaderContent(o),l=r.thead,a=this.parent.createElement(nh,{className:this.parent.frozenRows?"":"e-hide"});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});const h=this.parent.createElement(oh),c=this.parent.createElement("tr");let d;const p=this.rows=r.rows;for(let u=0,m=p.length;u<m;u++)for(let e=0,t=p[u].cells.length;e<t;e++)d=this.parent.createElement("td"),c.appendChild(d);return(i.allowFiltering||i.allowSorting||i.allowGrouping)&&n.classList.add("e-sortfilter"),this.updateColGroup(h),a.appendChild(c),n.appendChild(this.setColGroup(h)),n.appendChild(l),n.appendChild(a),n.appendChild(this.caption),this.ariaService.setOptions(n,{colcount:i.getColumns().length.toString()}),n}createTable(e=null){return this.createHeader(e)}createHeaderContent(e){const t=this.parent;let i=1;const s=t.getFrozenMode(),n=t.getColumns(),o=this.parent.createElement("thead"),r=this.parent.createElement("tr",{className:"e-columnheader"}),l=new ch(this.serviceLocator,Ia.Header,t);l.element=r;let a,h=[];this.colDepth=function(e){let t=0;for(let i=0;i<e.length;i++){const s=od(e[i],0);t<s&&(t=s)}return t+1}(t.columns);for(let d=0,p=this.colDepth;d<p;d++)h[d]=this.generateRow(d),h[d].cells=[];"Right"!==s&&(h=this.ensureColumns(h)),h=this.getHeaderCells(h,e),"Right"===s&&(i=0,h=this.ensureColumns(h));const c=this.parent.getFrozenColumns();if(this.parent.isRowDragable()&&this.parent.isFrozenGrid()&&h[0].cells[i]){const e=h[0].cells[i].column.getFreezeTableName();"movable"===e||s===Za&&e===eh?"Right"===s?h[0].cells.pop():h[0].cells.shift():c||e!==th?"Right"===s&&e===eh&&(h[0].cells[h[0].cells.length-1].column.freeze="Right"):h[0].cells[0].column.freeze=e===th?"Left":"Right"}for(let d=0,p=this.colDepth;d<p;d++)a=l.render(h[d],n),this.parent.rowHeight&&a.querySelector(".e-headercell")&&(a.style.height=this.parent.rowHeight+"px"),o.appendChild(a);return{thead:o,rows:h}}updateColGroup(e){let t,i=this.parent.getColumns();const s=this.parent.getColumnIndexesInView();if(this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()&&(i=Object(Ae.G)([],this.parent.getColumns()),i.splice(0,this.parent.getFrozenColumns())),e.id=this.parent.element.id+oh,this.parent.allowGrouping)for(let n=0,o=this.parent.groupSettings.columns.length;n<o;n++)this.parent.enableColumnVirtualization&&-1===s.indexOf(n)||(t=this.parent.createElement("col",{className:"e-group-intent"}),e.appendChild(t));(this.parent.detailTemplate||this.parent.childGrid)&&(t=this.parent.createElement("col",{className:"e-detail-intent"}),e.appendChild(t)),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(t=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(t));for(let n=0,o=i.length;n<o;n++)t=this.parent.createElement("col"),!1===i[n].visible&&Object(Ae.kb)(t,{display:"none"}),e.appendChild(t);return this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&(t=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(t)),e}ensureColumns(e){const t=this.parent,i=this.parent.getColumnIndexesInView();for(let s=0,n=e.length;s<n;s++){if(t.allowGrouping)for(let n=0,o=t.groupSettings.columns.length;n<o;n++)this.parent.enableColumnVirtualization&&-1===i.indexOf(n)||e[s].cells.push(this.generateCell({},Ia.HeaderIndent));if(t.detailTemplate||t.childGrid){const t={};this.parent.notify(ga,t),e[s].cells.push(this.generateCell(t,Ia.DetailHeader))}t.isRowDragable()&&e[s].cells.push(this.generateCell({},Ia.RowDragHIcon))}return e}getHeaderCells(e,t){const i=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),s=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(let n=0;n<s.length;n++)this.lockColsRendered=!1,e=this.appendCells(s[n],e,0,0===n,!1,n===s.length-1,i,t);for(let n=0,o=s.length;n<o;n++)this.notfrzIdx=0,this.lockColsRendered=!0,e=this.appendCells(s[n],e,0,0===n,!1,n===o-1,i,t);return e}appendCells(e,t,i,s,n,o,r,l){const a=o?"e-lastcell":"",h=this.parent.isFrozenGrid(),c=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered,d=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered,p=this.parent.getContent().querySelector(".e-movablescrollbar");let u;if(h&&p&&this.parent.enableColumnVirtualization&&(u=p.scrollLeft),e.columns){this.isFirstCol=!1;const n=this.getCellCnt(e,0);if(n){const s=this.getStackedLockColsCount(e,0),o=0===this.parent.lockcolPositionCount||!this.lockColsRendered&&0!==s||this.lockColsRendered&&n-s!=0,r=h&&this.ensureStackedFrozen(e.columns,l,!1);(!h&&o||r)&&t[i].cells.push(new Ba({cellType:Ia.StackedHeader,column:e,colSpan:this.getColSpan(n,s,e.columns,l,h)}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(let a=0;a<e.columns.length;a++)t=this.appendCells(e.columns[a],t,i+1,s,0===a,a===e.columns.length-1&&o,r,l);if(this.lockColsRendered)for(let a=0,h=e.columns.length;a<h;a++){const n=this.isFirstCol=e.columns[a].visible&&!this.isFirstCol&&1!==h;t=this.appendCells(e.columns[a],t,i+1,s,n,a===h-1&&o,r,l)}}else(u&&u>0&&this.parent.contentModule.isXaxis()&&0!==this.parent.inViewIndexes[0]&&"movable"===e.getFreezeTableName()||!h&&c||h&&e.getFreezeTableName()===l&&d)&&t[i].cells.push(this.generateCell(e,Ia.Header,this.colDepth-i,(s?"":n?"e-firstcell":"")+a,i,this.parent.getColumnIndexByUid(e.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;return t}ensureStackedFrozen(e,t,i){const s=e.length;for(let n=0;n<s;n++)if(e[n].columns)i=this.ensureStackedFrozen(e[n].columns,t,i);else if(e[n].getFreezeTableName()===t){i=!0;break}return i}getStackedLockColsCount(e,t){if(e.columns)for(let i=0;i<e.columns.length;i++)t=this.getStackedLockColsCount(e.columns[i],t);else e.lockColumn&&t++;return t}getColSpan(e,t,i,s,n){return n?e=this.getFrozenColSpan(i,s,0):this.parent.lockcolPositionCount&&(e=this.lockColsRendered?e-t:t),e}getFrozenColSpan(e,t,i){const s=e.length;for(let n=0;n<s;n++)e[n].columns?i=this.getFrozenColSpan(e[n].columns,t,i):e[n].getFreezeTableName()===t&&e[n].visible&&i++;return i}generateRow(e){return new za({})}generateCell(e,t,i,s,n,o){const r={visible:e.visible,isDataCell:!1,isTemplate:!Object(Ae.T)(e.headerTemplate),rowID:"",column:e,cellType:t,rowSpan:i,className:s,index:n,colIndex:o};return(!r.rowSpan||r.rowSpan<2)&&delete r.rowSpan,new Ba(r)}setVisible(e){const t=this.parent;let i,s;const n=t.getFrozenColumns();for(let o=0,r=e.length;o<r;o++){const r=e[o];if(s=t.getNormalizedColumnIndex(r.uid),i=r.visible?"":"none",n){const e=this.parent.isRowDragable()?n+1:n;if(s<e)Object(Ae.kb)(this.getColGroup().children[s],{display:i});else{const n=t.getHeaderContent().querySelector("."+Ga).querySelector(oh);Object(Ae.kb)(n.children[s-e],{display:i})}}else Object(Ae.kb)(this.getColGroup().children[s],{display:i})}this.refreshUI()}colPosRefresh(){this.refreshUI()}refreshUI(){const e=this.parent.isFrozenGrid(),t=this.parent.enableColumnVirtualization&&e,i=this.getPanel();this.toggleStackClass(i);let s=this.freezeReorder?this.headerPanel.querySelector("."+Ga).querySelector(".e-table"):this.getTable(),n=this.parent.isFrozenGrid()?this.parent.getFrozenLeftCount()?"frozen-left":"frozen-right":void 0;if(t&&(s=this.parent.contentModule.getVirtualFreezeHeader(),n=this.parent.contentModule.isXaxis()?"movable":n),s){Object(Ae.db)(s),s.removeChild(s.firstChild),s.removeChild(s.childNodes[0]);const o=this.parent.createElement(oh),r=this.createHeaderContent(n);this.rows=r.rows,s.insertBefore(r.thead,s.firstChild),this.updateColGroup(o),s.insertBefore(this.setColGroup(o),s.firstChild),t||this.setTable(s),this.appendContent(s),this.parent.notify(wl,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),(!e||this.parent.enableColumnVirtualization&&e)&&this.initializeHeaderDrag();const l=[].slice.call(i.querySelectorAll("tr.e-columnheader"));for(const e of l){const t=[].slice.call(e.getElementsByClassName("e-grouptopleftcell"));t.length&&t[t.length-1].classList.add("e-lastgrouptopleftcell")}e||this.parent.notify(Ol,{rows:this.rows,args:{isFrozen:e}}),this.parent.enableColumnVirtualization&&Ic(s,Ga)&&this.parent.notify(Ol,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&"Header"===this.parent.textWrapSettings.wrapMode&&Gc(l,!0)}}toggleStackClass(e){this.parent.columns.some(e=>!Object(Ae.T)(e.columns))?e.classList.add("e-stackedheader"):e.classList.remove("e-stackedheader")}appendContent(e){this.getPanel().querySelector("."+qa).appendChild(e)}getCellCnt(e,t){if(e.columns)for(let i=0,s=e.columns.length;i<s;i++)t=this.getCellCnt(e.columns[i],t);else e.visible&&t++;return t}initializeHeaderDrag(){(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)&&(this.draggable=new Ae.i(this.parent.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}))}initializeHeaderDrop(){new Ae.j(this.parent.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})}renderCustomToolbar(){const e=this.parent;if("Vertical"===e.rowRenderingMode&&!e.toolbar&&(e.allowSorting||e.allowFiltering&&"FilterBar"!==e.filterSettings.type)){const t=e.createElement("div",{className:"e-res-toolbar e-toolbar"}),i=e.createElement("div",{className:"e-toolbar-items"}),s=e.createElement("div",{className:"e-toolbar-left"}),n=this.parent.allowFiltering&&this.parent.allowSorting?2:1;for(let o=0;o<n;o++){const t=e.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),i=1===n?this.parent.allowSorting?"sort":"filter":1===o?"sort":"filter",r=e.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),l=e.createElement("span",{className:"e-btn-icon e-res"+i+"-icon e-icons"});r.appendChild(l),new Ue.a({}).appendTo(r),r.onclick=e=>{e.target.classList.contains("e-ressort-btn")||e.target.classList.contains("e-ressort-icon")?this.parent.showResponsiveCustomSort():this.parent.showResponsiveCustomFilter()},t.appendChild(r),s.appendChild(t)}i.appendChild(s),t.appendChild(i),e.element.insertBefore(t,this.parent.element.querySelector(".e-gridheader"))}else e.enableAdaptiveUI&&!e.toolbar&&e.getContent().classList.add("e-responsive-header")}updateCustomResponsiveToolbar(e){const t=this.parent.element.querySelector(".e-responsive-toolbar");"toolbar"===e.module&&(t?Object(Ae.db)(t):this.renderCustomToolbar())}}class yh{constructor(e,t){this.localizer=t.getService("localization"),this.formatter=t.getService("valueFormatter"),this.parent=e,this.element=this.parent.createElement("TD",{className:Ha,attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox"}})}getGui(){return""}format(e,t,i){return Object(Ae.T)(e.format)||("number"===e.type&&isNaN(parseInt(t,10))&&(t=null),t=this.formatter.toView(t,e.getFormatter())),Object(Ae.T)(t)?"":t.toString()}evaluate(e,t,i,s,n,o){let r;if(t.column.template){const o=this.parent.isReact&&"string"!=typeof t.column.template,l=["index"],a=sd({},i,{[ea]:n,column:t.column}),h=this.parent.element.id+t.column.uid,c="isStringTemplate";if(o){const i={index:s[l[0]]};t.column.getColumnTemplate()(Object(Ae.G)(i,a),this.parent,"columnTemplate",h,this.parent[c],null,e),this.parent.renderTemplates()}else r=t.column.getColumnTemplate()(Object(Ae.G)({index:s[l[0]]},a),this.parent,"template",h,this.parent[c]);return o||zc(e,r),this.parent.notify("template-result",{template:r}),r=null,e.setAttribute("aria-label",e.innerText+" is template cell column header "+t.column.headerText),!1}return!0}invokeFormatter(e,t,i){var s;return Object(Ae.T)(e.formatter)||(t=(s=e.formatter).prototype&&"getValue"in s.prototype?(new(0,e.formatter)).getValue(e,i):"function"==typeof e.formatter?e.formatter(e,i):e.formatter.getValue(e,i)),t}render(e,t,i,s,n){return this.refreshCell(e,t,i,n)}refreshTD(e,t,i,s){const n="Batch"===this.parent.editSettings.mode&&e.classList.contains("e-editedbatchcell");if(this.parent.isReact){e.innerHTML="";const o=e.cellIndex,r=e.parentElement;Object(Ae.db)(e);const l=this.refreshCell(t,i,s,n);this.cloneAttributes(l,e),r.cells.length!==o-1?r.insertBefore(l,r.cells[o]):r.appendChild(l)}else{const o=this.refreshCell(t,i,s,n);e.innerHTML="",e.setAttribute("aria-label",o.getAttribute("aria-label"));const r=[].slice.call(o.childNodes);for(const t of r)e.appendChild(t)}}cloneAttributes(e,t){const i=t.attributes;let s,n=i.length;for(;n--;)s=i[n],e.setAttribute(s.name,s.value)}refreshCell(e,t,i,s){const n=this.element.cloneNode(),o=e.column;let r;e.isForeignKey&&(r=e.foreignKeyData[0]||{[o.foreignKeyValue]:o.format?null:""});let l=this.getGui(),a=e.isForeignKey?this.getValue(o.foreignKeyValue,r,o):this.getValue(o.field,t,o);if("date"!==o.type&&"datetime"!==o.type||Object(Ae.T)(a)||(a=new Date(a)),a=this.format(o,a,t),l=a.toString(),"boolean"===o.type&&!o.displayAsCheckBox){const e="true"!==a&&"false"!==a?null:"true"===a?"True":"False";l=e?this.localizer.getConstant(e):l}const h=this.invokeFormatter(o,a,t);if(l=Object(Ae.T)(o.formatter)?l:Object(Ae.T)(h)?"":h.toString(),n.setAttribute("aria-label",l+" column header "+e.column.headerText),this.evaluate(n,e,t,i,r,s)&&"checkbox"!==o.type)this.appendHtml(n,l,o.getDomSetter?o.getDomSetter():"innerHTML");else if("checkbox"===o.type){n.classList.add(Qa),n.setAttribute("aria-label","checkbox"),a=!!this.parent.selectionSettings.persistSelection&&"true"===a;const e=Object(Ue.e)(this.parent.createElement,!1,{checked:a,label:" "});e.insertBefore(this.rowChkBox.cloneNode(),e.firstChild),n.appendChild(e)}if("Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0),this.setAttributes(n,e,i),"boolean"===o.type&&o.displayAsCheckBox){const t=isNaN(parseInt(a.toString(),10))?"true"===a:parseInt(a.toString(),10)>0,i=Object(Ue.e)(this.parent.createElement,!1,{checked:t,label:" "});n.innerHTML="",i.classList.add("e-checkbox-disabled"),n.appendChild(i),n.setAttribute("aria-label",t+" column header "+e.column.headerText)}return n}appendHtml(e,t,i="innerHTML"){return e[i]=t,e}setAttributes(e,t,i){const s=t.column;this.buildAttributeFromCell(e,t,"checkbox"===s.type),xc(e,i),xc(e,t.attributes),s.customAttributes&&xc(e,s.customAttributes),"Vertical"===this.parent.rowRenderingMode&&xc(e,{"data-cell":s.headerText}),s.textAlign&&(e.style.textAlign=s.textAlign),"Clip"===s.clipMode||!s.clipMode&&"Clip"===this.parent.clipMode?e.classList.add("e-gridclip"):("EllipsisWithTooltip"===s.clipMode||!s.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==s.type&&e.classList.add("e-ellipsistooltip")}buildAttributeFromCell(e,t,i){const s={},n=ih,o=[];t.colSpan&&(s.colSpan=t.colSpan),t.rowSpan&&(s.rowSpan=t.rowSpan),t.isTemplate&&o.push("e-templatecell"),t.isSelected&&(o.push("e-selectionbackground","e-active"),i&&e.querySelector(".e-frame").classList.add("e-check")),t.isColumnSelected&&o.push("e-columnselection"),t.cellType===Ia.Header?s[n]=t.colIndex:Object(Ae.T)(t.index)||(s[n]=t.index),t.visible||o.push("e-hide"),s.class=o,xc(e,s)}getValue(e,t,i){return i.valueAccessor(e,t,i)}}class vh{setOptions(e,t){const i=Object.keys(t);for(let s=0;s<i.length;s++)Ch(e,wh[i[s]],t[i[s]])}setExpand(e,t){Ch(e,wh.expand,t)}setSort(e,t){Ch(e,wh.sort,t,"boolean"==typeof t)}setBusy(e,t){Ch(e,wh.busy,t),Ch(e,wh.invalid,null,!0)}setGrabbed(e,t,i){Ch(e,wh.grabbed,t,i)}setDropTarget(e,t){Ch(e,wh.dropeffect,"copy",!t)}}function Ch(e,t,i,s){s&&e?e.removeAttribute(t):e&&e.setAttribute(t,i)}const wh={expand:"aria-expanded",role:"role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"};class Oh extends yh{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-headercell",attrs:{role:"columnheader",tabindex:"-1"}}),this.ariaService=new vh,this.hTxtEle=this.parent.createElement("span",{className:"e-headertext"}),this.sortEle=this.parent.createElement("div",{className:"e-sortfilterdiv e-icons"}),this.gui=this.parent.createElement("div"),this.chkAllBox=this.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox"}})}getGui(){return this.gui.cloneNode()}render(e,t,i){const s=this.element.cloneNode(),n=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,s,n)}refresh(e,t){this.clean(t);const i=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,t,i)}clean(e){e.innerHTML=""}prepareHeader(e,t,i){const s=e.column,n={},o=this.getGui();let r,l;if(Object(Ae.w)(o,{"e-mappinguid":s.uid,class:"e-headercelldiv"}),Object(Ae.T)(s.headerValueAccessor)||(r=this.getValue(s.headerText,s)),"checkbox"!==s.type){let e=s.headerText;Object(Ae.T)(r)||(e=r);const t=this.hTxtEle.cloneNode();t[s.getDomSetter()]=e,o.appendChild(t)}else{s.editType="booleanedit";const e=Object(Ue.e)(this.parent.createElement,!1,{checked:!1,label:" "});e.insertBefore(this.chkAllBox.cloneNode(),e.firstChild),o.appendChild(e),o.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(t,e),this.appendHtml(t,o),t.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&s.allowFiltering&&!Object(Ae.T)(s.field)&&(!this.parent.showColumnMenu||!s.showColumnMenu)){Object(Ae.w)(i,{"e-mappinguid":"e-flmenu-"+s.uid}),t.classList.add("e-fltr-icon");const e=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==e.length){const t=this.parent.getForeignKeyColumns();for(let n=0;n<this.parent.columns.length;n++)for(let o=0;o<this.parent.filterSettings.columns.length;o++)if(this.parent.filterSettings.columns[o].field===s.field||t.length&&s.foreignKeyValue===this.parent.filterSettings.columns[o].field){i.classList.add("e-filtered"),e.push(s.field);break}}t.appendChild(i.cloneNode())}e.className&&t.classList.add(e.className),s.customAttributes&&xc(t,s.customAttributes),s.allowSorting&&(n.sort="none"),s.allowGrouping&&(n.grabbed=!1),t=this.extendPrepareHeader(s,t);const a=this.parent,h=a.getColumnIndexByField(s.field);if(!Object(Ae.T)(s.headerTemplate)){const e=a.element.id+s.uid+"headerTemplate",i="isStringTemplate",n=s;if(this.parent.isReact&&"string"!=typeof s.headerTemplate){const o={index:h};t.firstElementChild.innerHTML="",s.getHeaderTemplate()(Object(Ae.G)(o,n),a,"headerTemplate",e,this.parent[i],null,t.firstElementChild),this.parent.renderTemplates()}else l=s.getHeaderTemplate()(Object(Ae.G)({index:h},n),a,"headerTemplate",e,this.parent[i]),t.firstElementChild.innerHTML="",zc(t.firstElementChild,l)}if(this.ariaService.setOptions(t,n),!Object(Ae.T)(s.headerTextAlign)||!Object(Ae.T)(s.textAlign)){const e=s.headerTextAlign||s.textAlign;o.style.textAlign=e,"Right"===e||"Left"===e?t.classList.add("Right"===e?"e-rightalign":"e-leftalign"):"Center"===e&&t.classList.add("e-centeralign")}return"Clip"===s.clipMode||!s.clipMode&&"Clip"===this.parent.clipMode?t.classList.add("e-gridclip"):("EllipsisWithTooltip"===s.clipMode||!s.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==s.type&&t.classList.add("e-ellipsistooltip"),t.setAttribute("aria-rowspan",(Object(Ae.T)(e.rowSpan)?1:e.rowSpan).toString()),t.setAttribute("aria-colspan","1"),this.parent.trigger(Gr,{cell:e,node:t}),t}getValue(e,t){return t.headerValueAccessor(e,t)}extendPrepareHeader(e,t){if(this.parent.showColumnMenu&&e.showColumnMenu&&!Object(Ae.T)(e.field)){const i=this.parent.createElement("div",{className:"e-icons e-columnmenu"}),s=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==s.length)for(let t=0;t<this.parent.columns.length;t++)for(let n=0;n<this.parent.filterSettings.columns.length;n++)if(this.parent.filterSettings.columns[n].field===e.field){i.classList.add("e-filtered"),s.push(e.field);break}t.classList.add("e-fltr-icon"),t.appendChild(i)}if(this.parent.allowResizing){const i=this.parent.createElement("div");i.className=e.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",t.appendChild(i)}return t}appendHtml(e,t){return e.appendChild(t),e}}class Sh extends yh{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{role:"columnheader",tabindex:"-1"}})}render(e,t,i){const s=this.element.cloneNode(),n=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":e.column.uid}}),o=e.column;if(s.appendChild(n),Object(Ae.T)(o.headerTemplate)?this.appendHtml(n,o.headerText,o.getDomSetter()):zc(n,o.getHeaderTemplate()(o,this.parent,"headerTemplate")),e.column.toolTip&&s.setAttribute("title",e.column.toolTip),"Clip"===o.clipMode||!o.clipMode&&"Clip"===this.parent.clipMode?s.classList.add("e-gridclip"):("EllipsisWithTooltip"===o.clipMode||!o.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&s.classList.add("e-ellipsistooltip"),Object(Ae.T)(e.column.textAlign)||(n.style.textAlign=e.column.textAlign),e.column.customAttributes&&xc(s,e.column.customAttributes),s.setAttribute("colspan",e.colSpan.toString()),s.setAttribute("aria-colspan",e.colSpan.toString()),s.setAttribute("aria-rowspan","1"),this.parent.allowResizing){const t=this.parent.createElement("div");t.className=e.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",s.appendChild(t)}return this.parent.trigger(Gr,{cell:e,node:s}),s}}class Th extends yh{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-indentcell"})}render(e,t){const i=this.element.cloneNode();return xc(i,e.attributes),i}}class jh extends yh{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:this.parent.element.id+"captioncell",role:"gridcell",tabindex:"-1"}})}render(e,t){const i=this.element.cloneNode(),s=this.parent;let n,o;t.headerText=e.column.headerText,e.isForeignKey&&(o=this.format(e.column,e.column.valueAccessor("foreignKey",t,e.column)));const r=e.isForeignKey?o:e.column.enableGroupByFormat?t.key:this.format(e.column,e.column.valueAccessor("key",t,e.column));if(Object(Ae.T)(s.groupSettings.captionTemplate))i.innerHTML=s.groupSettings.enableLazyLoading?e.column.headerText+": "+r:e.column.headerText+": "+r+" - "+t.count+" "+this.localizer.getConstant(t.count<2?"Item":"Items");else{const e=this.parent.isReact&&"string"!=typeof s.groupSettings.captionTemplate;if(e){const e=s.element.id+"captionTemplate";Ec(s.groupSettings.captionTemplate)(t,this.parent,"captionTemplate",e,null,null,i),this.parent.renderTemplates()}else n=this.parent.isVue?Ec(s.groupSettings.captionTemplate)(t,this.parent):Ec(s.groupSettings.captionTemplate)(t);e||zc(i,n)}return i.setAttribute("colspan",e.colSpan.toString()),i.setAttribute("aria-label",i.innerHTML+" is groupcaption cell"),i.setAttribute("title",i.innerHTML),i}}class Eh extends yh{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-groupcaption"})}render(e,t){const i=this.element.cloneNode();return i.innerHTML="&nbsp;",i.setAttribute("colspan",e.colSpan.toString()),i}}class xh extends Th{render(e,t,i,s){const n=this.element.cloneNode();return n.className=s?"e-recordplusexpand":"e-recordpluscollapse",n.setAttribute("ej-mappingname",t.field),n.setAttribute("ej-mappingvalue",t.key),n.setAttribute("aria-expanded",s?"true":"false"),n.setAttribute("tabindex","-1"),n.appendChild(this.parent.createElement("div",{className:s?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow"})),n}}class Rh extends yh{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-grouptopleftcell"})}render(e,t){const i=this.element.cloneNode();return i.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),i}}class Dh extends yh{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-detailheadercell"})}render(e,t){const i=this.element.cloneNode();return i.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),i}}class kh extends yh{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",role:"gridcell",tabindex:"-1"}})}render(e,t,i){const s=this.element.cloneNode();return i&&!Object(Ae.T)(i.class)?(s.className="",s.className=i.class,s.appendChild(this.parent.createElement("div",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow"}))):s.appendChild(this.parent.createElement("div",{className:"e-icons e-dtdiagonalright e-icon-grightarrow"})),s}}class Ih extends yh{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{role:"gridcell",tabindex:"-1"}})}render(e,t){const i=this.element.cloneNode();return i.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon"})),e.isSelected&&(i.classList.add("e-selectionbackground"),i.classList.add("e-active")),i}}class Fh extends yh{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-rowdragheader"})}render(e,t){const i=this.element.cloneNode();return i.appendChild(Object(Ae.D)("div",{className:"e-emptycell"})),i}}class Ah{constructor(e,t){this.emptyGrid=!1,this.counter=0,this.parent=e,this.locator=t,this.data=new La(e,t),this.l10n=t.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}render(){const e=this.parent;this.headerRenderer=this.renderer.getRenderer(Fa.Header),this.contentRenderer=this.renderer.getRenderer(Fa.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),e.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),"auto"!==this.parent.height&&this.parent.scrollModule.setPadding(),this.refreshDataManager()}refresh(e={requestType:"refresh"}){const t=this.parent;t.notify(`${e.requestType}-begin`,e),t.trigger(_r,e,(e={requestType:"refresh"})=>{if(e.cancel)t.notify(la,e);else{if("delete"===e.requestType&&t.allowPaging){const i=e.data.length,s=t.pageSettings.totalRecordsCount-i;t.getCurrentViewRecords().length-i||!s||(t.pageSettings.currentPage-1)*t.pageSettings.pageSize!==s||(t.prevPageMoving=!0,t.setProperties({pageSettings:{totalRecordsCount:s,currentPage:Math.ceil(s/t.pageSettings.pageSize)}},!0),t.pagerModule.pagerObj.totalRecordsCount=s)}"reorder"===e.requestType&&this.parent.dataSource&&"result"in this.parent.dataSource||("paging"===e.requestType||"columnstate"===e.requestType||"reorder"===e.requestType)&&this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]?this.contentRenderer.refreshContentRows(e):this.refreshDataManager(e)}})}resetTemplates(){const e=this.parent,t=e.getColumns();if(e.detailTemplate){const t=e.element.id+"detailTemplate";Ae.x[t]=[],Object(Ae.fb)(t,"DetailTemplate")}e.groupSettings.captionTemplate&&Object(Ae.fb)(e.element.id+"captionTemplate","CaptionTemplate"),e.rowTemplate&&Object(Ae.fb)(e.element.id+"rowTemplate","RowTemplate"),e.toolbarTemplate&&Object(Ae.fb)(e.element.id+"toolbarTemplate","ToolbarTemplate"),e.pageSettings.template&&Object(Ae.fb)(e.element.id+"_template","pageSettings");for(let i=0;i<t.length;i++)t[i].template&&(Ae.x[e.element.id+t[i].uid]=[],Object(Ae.fb)(e.element.id+t[i].uid,"Template")),t[i].headerTemplate&&Object(Ae.fb)(e.element.id+t[i].uid+"headerTemplate","HeaderTemplate"),t[i].filterTemplate&&Object(Ae.fb)(e.element.id+t[i].uid+"filterTemplate","FilterTemplate");for(let i=0;i<e.aggregates.length;i++)for(let t=0;t<e.aggregates[i].columns.length;t++){if(e.aggregates[i].columns[t].footerTemplate){const s=e.element.id+e.aggregates[i].columns[t].guid+"footerTemplate";Object(Ae.fb)(s,"FooterTemplate")}if(e.aggregates[i].columns[t].groupFooterTemplate){const s=e.element.id+e.aggregates[i].columns[t].guid+"groupFooterTemplate";Object(Ae.fb)(s,"GroupFooterTemplate")}if(e.aggregates[i].columns[t].groupCaptionTemplate){const s=e.element.id+e.aggregates[i].columns[t].guid+"groupCaptionTemplate";Object(Ae.fb)(s,"GroupCaptionTemplate")}}}refreshComplete(e){this.parent.trigger(Ur,e)}refreshDataManager(e={}){let t;"virtualscroll"===e.requestType||e.isCaptionCollapse||this.parent.showSpinner(),this.parent.notify("reset-infinite-blocks",e),this.emptyGrid=!1;const i=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector(".e-content"),!0),i){const i=new _e.c;t=this.getFData(i,e)}if(t=t?t.then(t=>{const i=this.data.generateQuery().requiresCount();if(this.emptyGrid){const e=new _e.c;return e.resolve({result:[],count:0}),e.promise}return this.data.getData(e,i)}):this.data.getData(e,this.data.generateQuery().requiresCount()),this.parent.getForeignKeyColumns().length&&(!i||this.parent.searchSettings.key.length)){const i=new _e.c;t=t.then(s=>(this.parent.notify($l,{dataManager:t,result:s,promise:i,action:e}),i.promise))}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(t=t.then(e=>this.validateGroupRecords(e))),t.then(t=>this.dataManagerSuccess(t,e)).catch(t=>this.dataManagerFailure(t,e))}getFData(e,t){return this.parent.notify($l,{isComplex:!0,promise:e,action:t}),e.promise}isNeedForeignAction(){const e=this.parent;return!!(e.allowFiltering&&e.filterSettings.columns.length||e.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())}foreignKey(e){return e.some(e=>{let t=!1;return t=this.parent.filterSettings.columns.some(t=>e.uid===t.uid),!(!t&&!this.parent.searchSettings.key.length)})}sendBulkRequest(e){e.requestType="batchsave";const t=this.data.saveChanges(e.changes,this.parent.getPrimaryKeyFieldNames()[0],e.original),i=this.data.generateQuery().requiresCount();this.data.dataManager.dataSource.offline?this.refreshDataManager({requestType:"batchsave"}):t.then(t=>{this.data.getData(e,i).then(t=>this.dmSuccess(t,e)).catch(t=>this.dmFailure(t,e))}).catch(t=>this.dmFailure(t,e))}dmSuccess(e,t){this.dataManagerSuccess(e,t)}dmFailure(e,t){this.dataManagerFailure(e,t)}renderEmptyRow(){this.emptyRow(!0)}emptyRow(e){const t=this.parent;let i=this.contentRenderer.getTable().querySelector(nh);Object(Ae.T)(i)||Object(Ae.db)(i),i=this.parent.createElement(nh);let s=0;(t.detailTemplate||t.childGrid)&&++s;const n=this.parent.createElement("tr",{className:"e-emptyrow"});n.appendChild(this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(t.getVisibleColumns().length+s+t.groupSettings.columns.length).toString()}})),i.appendChild(n),this.contentRenderer.renderEmpty(i),e&&(this.parent.trigger(Yr,{}),this.parent.notify(yl,{rows:[new za({isDataRow:!0,cells:[new Ba({isDataCell:!0,visible:!0})]})]}))}dynamicColumnChange(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])}updateColumnType(e){const t=this.parent.getColumns();let i;const s="customFormat",n=e&&e.items?e.items[0]:e,o=this.locator.getService("valueFormatter");for(let r=0,l=t.length;r<l;r++){i=td(t[r].field||"",n),Object(Ae.T)(t[r][s])||(t[r].format=t[r][s]),Object(Ae.T)(t[r].validationRules)||Object(Ae.T)(t[r].validationRules.equalTo)||(t[r].validationRules.equalTo[0]=this.parent.element.id+t[r].validationRules.equalTo[0]),t[r].isForeignColumn()&&t[r].columnData&&(i=td(t[r].foreignKeyValue||"",t[r].columnData[0])),Object(Ae.T)(i)?t[r].type=t[r].type||null:(this.isColTypeDef=!0,t[r].type||(t[r].type=i.getDay?i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0?"datetime":"date":typeof i));const e=new Hr;t[r].format&&(t[r].format.skeleton||t[r].format.format&&"string"==typeof t[r].format.format)&&(t[r].setFormatter(e.getFormatFunction(Object(Ae.G)({},t[r].format))),t[r].setParser(e.getParserFunction(t[r].format))),"string"==typeof t[r].format?_c(this.locator,t[r]):t[r].format||"number"!==t[r].type||t[r].setParser(o.getParserFunction({format:"n2"}))}}dataManagerSuccess(e,t){const i=this.parent;this.contentRenderer=this.renderer.getRenderer(Fa.Content),this.headerRenderer=this.renderer.getRenderer(Fa.Header),e.actionArgs=t;const s=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&("delete"===t.requestType||"save"===t.requestType&&"add"===this.parent.infiniteScrollModule.requestType);i.trigger(cl,e,n=>{if(n.cancel)return;n.result=Object(Ae.T)(n.result)?[]:n.result;const o=Object.keys(n.result).length;if(!this.parent.isDestroyed)if(i.getColumns().length||o||i.columns.length&&i.columns[0]instanceof Vr)if(!this.isInfiniteEnd(t)||o){if(this.parent.isEdit=!1,this.parent.notify("edit-reset",{}),this.parent.notify(ql,{}),this.contentRenderer.prevCurrentView=this.parent.currentViewData.slice(),i.currentViewData=n.result,i.notify("refresh-infinite-current-view-data",{args:t,data:n.result}),!o&&n.count&&i.allowPaging&&t&&"delete"!==t.requestType)return!this.parent.groupSettings.enableLazyLoading||"grouping"!==t.requestType&&"ungrouping"!==t.requestType||this.parent.notify("grouping-complete",t),i.prevPageMoving=!0,i.pageSettings.totalRecordsCount=n.count,"paging"!==t.requestType&&(i.pageSettings.currentPage=Math.ceil(n.count/i.pageSettings.pageSize)),void i.dataBind();if((i.getColumns().length||!o)&&this.isLayoutRendered||ed(i)||this.updatesOnInitialRender(n),!this.isColTypeDef&&i.getCurrentViewRecords()&&this.updateColumnType(this.data.dataManager.dataSource.offline&&i.dataSource&&i.dataSource.length?i.dataSource[0]:i.getCurrentViewRecords()[0]),this.parent.isInitialLoad||!this.parent.groupSettings.disablePageWiseAggregates||this.parent.groupSettings.columns.length||(n.result=this.parent.dataSource instanceof Array?this.parent.dataSource:this.parent.currentViewData),!this.parent.isReact&&!this.parent.isVue||Object(Ae.T)(t)||"infiniteScroll"===t.requestType||t.isFrozen||Td(this.parent,["footerTemplate"]),this.parent.notify(gl,Object(Ae.G)({count:n.count,result:n.result,aggregates:n.aggregates},t)),(i.groupSettings.columns.length||t&&"ungrouping"===t.requestType)&&t&&"filtering"!==t.requestType&&this.headerRenderer.refreshUI(),o)ed(i)&&(t.scrollTop={top:this.contentRenderer.content.scrollTop}),s?this.parent.notify(va,{e:t,result:e.result,count:e.count,agg:e.aggregates}):this.parent.enableImmutableMode?this.contentRenderer.immutableModeRendering(t):this.contentRenderer.refreshContentRows(t);else{if(t&&t.isCaptionCollapse)return;if(!i.getColumns().length)return i.element.innerHTML="",void alert(this.l10n.getConstant("EmptyDataSourceError"));if(this.contentRenderer.setRowElements([]),this.contentRenderer.setRowObjects([]),this.ariaService.setBusy(this.parent.getContent().querySelector(".e-content"),!1),this.renderEmptyRow(),t){const e=(t.requestType||"").toLowerCase()+"-complete";this.parent.notify(e,t),"batchsave"===t.requestType&&(t.cancel=!1,t.rows=[],t.isFrozen=0!==this.parent.getFrozenColumns()&&!t.isFrozen,this.parent.trigger(Ur,t))}this.parent.hideSpinner()}this.parent.notify(Hl,{}),this.setRowCount(this.parent.getCurrentViewRecords().length),this.parent.getDataModule().isQueryInvokedFromData=!1}else this.parent.notify(va,{e:t,result:e.result,count:e.count,agg:e.aggregates});else i.hideSpinner()})}dataManagerFailure(e,t){this.ariaService.setOptions(this.parent.getContent().querySelector(".e-content"),{busy:!1,invalid:!0}),this.setRowCount(1),this.parent.trigger(Kr,{error:e}),this.parent.hideSpinner(),"save"!==t.requestType&&"delete"!==t.requestType&&"bulk-save"!==t.name&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.log("actionfailure",{error:e}))}setRowCount(e){this.ariaService.setOptions(this.parent.getHeaderTable(),{rowcount:e?e.toString():"1"})}isInfiniteEnd(e){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&"delete"===e.requestType}updatesOnInitialRender(e){this.isLayoutRendered=!0,this.parent.columns.length<1&&this.buildColumns(e.result[0]),Dc(this.parent.columns,null,this.parent),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(Nl,{})}iterateComplexColumns(e,t,i){const s=Object.keys(e);for(let n=0;n<s.length;n++)("object"!=typeof e[s[n]]||!e[s[n]]||e[s[n]]instanceof Date?[]:Object.keys(e[s[n]])).length?this.iterateComplexColumns(e[s[n]],t+(s[n]+"."),i):(i[this.counter]=t+s[n],this.counter++)}buildColumns(e){const t=[],i={};this.iterateComplexColumns(e,"",i);const s=Object.keys(i).filter(e=>"BlazId"!==i[e]).map(e=>i[e]);for(let n=0,o=s.length;n<o;n++)t[n]={field:s[n]},this.parent.enableColumnVirtualization&&(t[n].width=Object(Ae.T)(t[n].width)?200:t[n].width);this.parent.setProperties({columns:t},!0)}instantiateRenderer(){this.renderer.addRenderer(Fa.Header,new fh(this.parent,this.locator)),this.renderer.addRenderer(Fa.Content,new bh(this.parent,this.locator));const e=this.locator.getService("cellRendererFactory");e.addCellRenderer(Ia.Header,new Oh(this.parent,this.locator)),e.addCellRenderer(Ia.Data,new yh(this.parent,this.locator)),e.addCellRenderer(Ia.StackedHeader,new Sh(this.parent,this.locator)),e.addCellRenderer(Ia.Indent,new Th(this.parent,this.locator)),e.addCellRenderer(Ia.GroupCaption,new jh(this.parent,this.locator)),e.addCellRenderer(Ia.GroupCaptionEmpty,new Eh(this.parent,this.locator)),e.addCellRenderer(Ia.Expand,new xh(this.parent,this.locator)),e.addCellRenderer(Ia.HeaderIndent,new Rh(this.parent,this.locator)),e.addCellRenderer(Ia.StackedHeader,new Sh(this.parent,this.locator)),e.addCellRenderer(Ia.DetailHeader,new Dh(this.parent,this.locator)),e.addCellRenderer(Ia.RowDragHIcon,new Fh(this.parent,this.locator)),e.addCellRenderer(Ia.DetailExpand,new kh(this.parent,this.locator)),e.addCellRenderer(Ia.DetailFooterIntent,new Th(this.parent,this.locator)),e.addCellRenderer(Ia.RowDragIcon,new Ih(this.parent,this.locator))}addEventListener(){this.parent.isDestroyed||(this.parent.on(ul,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(Cl,this.refresh,this),this.parent.on("refresh-complete",this.refreshComplete,this),this.parent.on(Vl,this.sendBulkRequest,this),this.parent.on(Zl,()=>{this.emptyGrid=!0},this),this.parent.on(Nl,this.dynamicColumnChange,this))}validateGroupRecords(e){const t=e.result.length-1;if(t<0)return Promise.resolve(e);const i=e.result[0],s=e.result[t],n=[],o=e=>{const t=[i,s];for(let i=0;i<t.length;i++)n.push(new _e.d("field","==",t[i].field).and(this.getPredicate("key","equal",t[i].key)));e.where(_e.d.or(n))},r=new _e.e;o(r);const l=new _e.a(e.result).executeLocal(r),a=this.data.generateQuery(!0),h=[];if(this.data.isRemote()){const e=[i,s];for(let t=0;t<e.length;t++)h.push(this.getPredicate(e[t].field,"equal",e[t].key));a.where(_e.d.or(h))}else o(a);const c=new _e.c;return this.data.getData({},a).then(t=>{this.updateGroupInfo(l,t.result),c.resolve(e)}).catch(e=>c.reject(e)),c.promise}getPredicate(e,t,i){return i instanceof Date?Zc({field:e,operator:t,value:i}):new _e.d(e,t,i)}updateGroupInfo(e,t){const i=new _e.a(t),s=e;for(let n=0;n<s.length;n++){const e=i.executeLocal((new _e.e).where(new _e.d("field","==",s[n].field).and(this.getPredicate("key","equal",s[n].key))))[0];s[n].count=e.count;const t=s[n].items,o=e.items;t.GroupGuid&&(s[n].items=this.updateGroupInfo(s[n].items,e.items));const r=this.parent.aggregates;for(let i=0;i<r.length;i++){const l=r[i];for(let i=0;i<l.columns.length;i++){const r=l.columns[i].type instanceof Array?l.columns[i].type:[l.columns[i].type];for(let a=0;a<r.length;a++){const h=l.columns[i].field+" - "+r[a].toLowerCase(),c=t.level?o.records:e.items,d=this.parent;if("Custom"===r[a]){const r=t.level?o:e;let a=l.columns[i].customAggregate;"string"==typeof a&&(a=Object(Ae.R)(a,window)),s[n].aggregates[h]=a?a.call(d,r,l.columns[i]):""}else s[n].aggregates[h]=_e.b.aggregates[r[a].toLowerCase()](c,l.columns[i].field)}}}}return e}}class Mh{constructor(){this.cellRenderMap={}}addCellRenderer(e,t){e="string"==typeof e?e:Object(Ae.L)(Ia,e),Object(Ae.T)(this.cellRenderMap[e])&&(this.cellRenderMap[e]=t)}getCellRenderer(e){if(e="string"==typeof e?e:Object(Ae.L)(Ia,e),Object(Ae.T)(this.cellRenderMap[e]))throw`The cellRenderer ${e} is not found`;return this.cellRenderMap[e]}}class Lh{constructor(e,t){this.sortedCols=[],this.sortPredicate=[],this.isCustomDialog=!1,this.parent=e,this.serviceLocator=t,this.addEventListener()}addEventListener(){this.evtHandlers=[{event:Sa,handler:this.closeCustomDialog},{event:Ta,handler:this.refreshCustomFilterOkBtn},{event:"render-responsive-cmenu",handler:this.renderResponsiveContextMenu},{event:"filter-cmenu-select",handler:this.renderCustomFilterDiv},{event:"custom-filter-close",handler:this.customExFilterClose},{event:"refresh-cutsom-filter-clear-button",handler:this.refreshCustomFilterClearBtn}],wd(this.parent,this.evtHandlers,!0,this),this.onActionCompleteFn=this.editComplate.bind(this),this.parent.addEventListener(Ur,this.onActionCompleteFn)}customExFilterClose(){this.isCustomDlgRender=!1}renderCustomFilterDiv(){const e=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),t=e.querySelector(".e-dlg-custom-header"),i=e.querySelector(".e-dlg-closeicon-btn");this.isCustomDlgRender=!0,this.parent.filterModule.filterModule.closeDialog(),this.saveBtn.element.style.display="",this.refreshCustomFilterOkBtn({disabled:!1}),this.backBtn.element.style.display="none",i.style.display="",t.innerHTML=this.parent.localeObj.getConstant("CustomFilter");const s=this.customResponsiveDlg.element.querySelector(".e-dlg-content");this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"}),s.appendChild(this.customExcelFilterParent)}renderResponsiveContextMenu(e){if(this.action===Aa.isFilter){const t=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),i=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),s=i.querySelector(".e-dlg-closeicon-btn"),n=i.querySelector(".e-dlg-custom-header");if(e.isOpen){t.firstChild.style.display="none",t.appendChild(e.target),s.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",n.innerHTML=e.header;const i=this.parent.createElement("button"),o=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"});i.appendChild(o),this.backBtn=new Ue.a({cssClass:"e-res-back-btn"}),this.backBtn.appendTo(i),n.parentElement.insertBefore(i,n)}else this.backBtn&&!this.isCustomDlgRender&&(t.firstChild.style.display="",Object(Ae.db)(this.backBtn.element),s.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),n.innerHTML=this.getHeaderTitle({action:Aa.isFilter},e.col))}}refreshCustomFilterClearBtn(e){this.filterClearBtn&&(this.isFiltered=e.isFiltered,this.filterClearBtn.element.style.display=e.isFiltered?"":"none")}refreshCustomFilterOkBtn(e){this.saveBtn&&(this.saveBtn.disabled=e.disabled)}renderResponsiveContent(e){const t=this.parent;if(e)return this.filterParent=this.parent.createElement("div",{className:"e-mainfilterdiv e-default-filter",id:e.uid+"-main-filter"}),this.filterParent;{const e=t.getColumns();this.customColumnDiv=t.createElement("div",{className:"columndiv",styles:"width: 100%"});const i=t.createElement("div",{className:"e-ressortbutton-parent"}),s=[],n=this.action===Aa.isSort,o=this.action===Aa.isFilter;if(o)for(let r=0;r<t.filterSettings.columns.length;r++)s.push(t.filterSettings.columns[r].field);for(let r=0;r<e.length;r++){if(!e[r].visible||!e[r].allowSorting&&n||!e[r].allowFiltering&&o)continue;const l=t.createElement("div",{className:"e-responsivecoldiv"});l.setAttribute("data-e-mappingname",e[r].field),l.setAttribute("data-e-mappinguid",e[r].uid);const a=t.createElement("span",{innerHTML:e[r].headerText,className:"e-res-header-text"});if(l.appendChild(a),this.customColumnDiv.appendChild(l),n){const s=this.getSortedFieldsAndDirections("field").indexOf(e[r].field),n=t.createElement("button",{id:t.element.id+e[r].field+"sortbutton"}),o=i.cloneNode();o.appendChild(n),l.appendChild(o),new Ue.a({cssClass:"e-ressortbutton"}).appendTo(n),n.innerHTML=s>-1?this.parent.sortSettings.columns[s].direction:"None",n.onclick=e=>{this.sortButtonClickHandler(e.target)}}if(o&&s.indexOf(e[r].field)>-1){const i=t.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),s=t.createElement("span",{className:"e-icons e-res-icon e-filterset"});s.setAttribute("colType",e[r].type),i.appendChild(s),l.appendChild(i)}}return Ae.l.add(this.customColumnDiv,"click",this.customFilterColumnClickHandler,this),this.customColumnDiv}}getSortedFieldsAndDirections(e){const t=[];for(let i=0;i<this.parent.sortSettings.columns.length;i++)t.push(this.parent.sortSettings.columns[i][e]);return t}sortButtonClickHandler(e){if(e){const t=Ic(e,"e-responsivecoldiv").getAttribute("data-e-mappingname");this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(e));const i=e.textContent,s="None"===i?"Ascending":"Ascending"===i?"Descending":"None";e.innerHTML=s,this.setSortedCols(t,s)}}resetSortButtons(e){const t=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton"));for(let i=0;i<t.length;i++)t[i]!==e&&(t[i].innerHTML="None")}setSortedCols(e,t){const i=this.getCurrentSortedFields().indexOf(e);this.parent.allowMultiSorting&&i>-1&&(this.sortedCols.splice(i,1),this.sortPredicate.splice(i,1)),this.isSortApplied=!0,"None"!==t&&(this.sortedCols.push(e),this.sortPredicate.push({field:e,direction:t}))}getCurrentSortedFields(){const e=[];for(let t=0;t<this.sortedCols.length;t++)e.push(this.sortedCols[t]);return e}customFilterColumnClickHandler(e){if(this.action!==Aa.isFilter)return;const t=this.parent,i=e.target;if("FilterBar"!==t.filterSettings.type)if(i.classList.contains("e-responsivecoldiv")||i.parentElement.classList.contains("e-responsivecoldiv")){let e=i.getAttribute("data-e-mappingname");if(e||(e=i.parentElement.getAttribute("data-e-mappingname")),e){const i=t.getColumnByField(e);this.isRowResponsive=!0,this.showResponsiveDialog(i)}}else if(i.classList.contains("e-filterset")||i.parentElement.classList.contains("e-filtersetdiv")){const e=Ic(i,"e-responsivecoldiv");if(e){const s=e.getAttribute("data-e-mappingname"),n=t.getColumnByField(s);("Menu"===n.filter.type||!n.filter.type&&"Menu"===t.filterSettings.type)&&(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(n),this.removeCustomDlgFilterEle(i)}}}showResponsiveDialog(e){if(this.isCustomDialog&&this.action===Aa.isFilter&&!this.isRowResponsive)this.renderCustomFilterDialog();else{if(this.filteredCol=e,this.renderResponsiveDialog(e),this.parent.enableAdaptiveUI&&e&&(this.parent.filterModule.setFilterModel(e),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(e,void 0))),this.action===Aa.isSort){const e={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(dl,e),e.cancel)return}this.customResponsiveDlg.show(!0),this.customResponsiveDlg.element.style.maxHeight="100%",this.setTopToChildDialog(this.customResponsiveDlg.element)}}setTopToChildDialog(e){const t=e.querySelector(".e-dialog");if(t){const i=e.querySelector(".e-dlg-header-content").getBoundingClientRect().height;t.style.top=i+"px"}}renderCustomFilterDialog(e){const t=this.parent;if(this.action===Aa.isFilter&&"FilterBar"===t.filterSettings.type)return;const i=this.parent.createElement("div",{id:t.element.id+"customfilter",className:"e-customfilterdiv e-responsive-dialog"});this.parent.element.appendChild(i),this.customFilterDlg=this.getDialogOptions(e,!0);const s={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"};this.parent.trigger(dl,s),s.cancel||(this.customFilterDlg.appendTo(i),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%")}getDialogOptions(e,t,i){const s=new Qi({isModal:!0,showCloseIcon:!0,closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget?this.parent.adaptiveDlgTarget:document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(e),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"}});return s.isStringTemplate=!0,t?(s.header=this.renderResponsiveHeader(e,void 0,!0),s.cssClass="e-customfilter"):(s.header=this.renderResponsiveHeader(e),s.cssClass="Vertical"===this.parent.rowRenderingMode&&this.action===Aa.isFilter?"e-res"+i+" e-row-responsive-filter":"e-res"+i),s}renderResponsiveDialog(e){const t=this.parent;if(this.action===Aa.isFilter&&"FilterBar"===t.filterSettings.type)return;const i=this.action===Aa.isFilter?"filter":"sort",s=this.parent.createElement("div",{id:t.element.id+"responsive"+i,className:"e-res"+i+"div e-responsive-dialog"});this.parent.element.appendChild(s),this.customResponsiveDlg=this.getDialogOptions(e,!1,i),this.customResponsiveDlg.appendTo(s)}dialogCreated(){vd(this.parent)}dialogOpen(){if(this.action===Aa.isSort&&this.parent.allowMultiSorting)for(let e=0;e<this.parent.sortSettings.columns.length;e++)this.sortedCols.push(this.parent.sortSettings.columns[e].field),this.sortPredicate.push({field:this.parent.sortSettings.columns[e].field,direction:this.parent.sortSettings.columns[e].direction})}beforeDialogClose(e){this.isDialogClose=e.element&&!e.element.querySelector(".e-xl-customfilterdiv")&&e.element.classList.contains("e-resfilterdiv"),this.action===Aa.isFilter?e.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):e.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter():this.action===Aa.isSort&&this.closeCustomDialog(),this.parent.off(xa,this.keyHandler)}sortColumn(){if(this.isSortApplied){this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(let e=0;e<this.sortPredicate.length;e++)this.parent.sortColumn(this.sortPredicate[e].field,this.sortPredicate[e].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting(),this.closeCustomDialog()}else this.closeCustomDialog()}getHeaderTitle(e,t){const i=this.parent;let s;return this.action===Aa.isEdit?s=i.localeObj.getConstant("EditFormTitle")+e.primaryKeyValue[0]:this.action===Aa.isAdd?s=i.localeObj.getConstant("AddFormTitle"):this.action===Aa.isFilter?s=t?t.headerText||t.field:i.localeObj.getConstant("FilterButton"):this.action===Aa.isSort&&(s=i.localeObj.getConstant("Sort")),s}getDialogName(e){let t;return e===Aa.isAdd||e===Aa.isEdit?t="dialogEdit_wrapper_title":e===Aa.isFilter&&(t="responsive_filter_dialog_wrapper"),t}getButtonText(e){let t;return e===Aa.isAdd||e===Aa.isEdit?t="Save":e!==Aa.isFilter&&this.action!==Aa.isSort||(t="OKButton"),t}renderResponsiveHeader(e,t,i){const s=this.parent;s.on(xa,this.keyHandler,this);const n=s.element.id+this.getDialogName(this.action),o=s.createElement("div",{className:"e-res-custom-element"}),r=s.createElement("div",{className:"e-dlg-custom-header",id:n});r.innerHTML=this.getHeaderTitle(t,e),o.appendChild(r);const l=s.createElement("button");i||(this.saveBtn=new Ue.a({cssClass:"e-primary e-flat e-res-apply-btn"}),l.innerHTML=s.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(l),l.onclick=e=>{this.dialogHdrBtnClickHandler()});const a=this.action===Aa.isSort,h=this.action===Aa.isFilter;if(h||a){const e=a?"sort":"filter",t=s.createElement("button");if(this.filterClearBtn=new Ue.a({cssClass:"e-primary e-flat e-res-"+e+"-clear-btn"}),h){const e=s.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"});t.appendChild(e)}else t.innerHTML=s.localeObj.getConstant("Clear");o.appendChild(t),this.filterClearBtn.appendTo(t),t.onclick=e=>{Ic(e.target,"e-customfilter")?(this.parent.filterModule.clearFiltering(),this.removeCustomDlgFilterEle()):h?this.filterClear():(this.resetSortButtons(),this.sortedCols=[],this.sortPredicate=[],this.isSortApplied=!0)},o.appendChild(t)}return i||o.appendChild(l),o}filterClear(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol),this.parent.filterModule.filterModule.closeResponsiveDialog()}dialogHdrBtnClickHandler(){this.action===Aa.isEdit||this.action===Aa.isAdd?this.parent.endEdit():this.action===Aa.isFilter?this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}):this.action===Aa.isSort&&this.sortColumn()}closeCustomDialog(){if(this.isCustomDlgRender){const e=this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv");Object(Ae.db)(e)}else this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog()}destroyCustomFilterDialog(){if(!this.customResponsiveDlg)return;const e=document.getElementById(this.customResponsiveDlg.element.id);this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&e&&(this.customResponsiveDlg.destroy(),Object(Ae.db)(e)),this.closeCustomFilter(),this.action===Aa.isSort&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)}closeCustomFilter(){if(!this.isDialogClose&&this.customFilterDlg){const e=document.getElementById(this.customFilterDlg.element.id);this.customFilterDlg&&!this.customFilterDlg.isDestroyed&&e&&(this.customFilterDlg.destroy(),Object(Ae.db)(e))}this.isCustomDialog=!1,this.isDialogClose=!1}removeCustomDlgFilterEle(e){if(e)e.parentElement.classList.contains("e-filtersetdiv")?Object(Ae.db)(e.parentElement):Object(Ae.db)(e);else{const t=this.customColumnDiv.children;for(let i=0;i<t.length;i++)(e=t[i].querySelector(".e-filtersetdiv"))&&(Object(Ae.db)(e),i--)}}keyHandler(e){13===e.keyCode&&(this.action===Aa.isFilter&&e.target.classList.contains("e-searchinput")||this.action===Aa.isEdit||this.action===Aa.isAdd)&&this.dialogHdrBtnClickHandler()}editComplate(e){"save"!==e.requestType&&"cancel"!==e.requestType||this.parent.off(xa,this.keyHandler)}removeEventListener(){this.customColumnDiv&&Ae.l.remove(this.customColumnDiv,"click",this.customFilterColumnClickHandler),wd(this.parent,this.evtHandlers,!0,this),this.parent.removeEventListener(Ur,this.onActionCompleteFn)}}class zh{constructor(){this.services={}}register(e,t){Object(Ae.T)(this.services[e])&&(this.services[e]=t)}getService(e){if(Object(Ae.T)(this.services[e]))throw`The service ${e} is not registered`;return this.services[e]}registerAdaptiveService(e,t,i){t?(e.responsiveDialogRenderer=new Lh(e.parent,e.serviceLocator),e.responsiveDialogRenderer.action=i):e.responsiveDialogRenderer&&(e.responsiveDialogRenderer.removeEventListener(),e.responsiveDialogRenderer=void 0)}}class Bh{constructor(){this.rendererMap={}}addRenderer(e,t){const i=Object(Ae.L)(Fa,e);Object(Ae.T)(this.rendererMap[i])&&(this.rendererMap[i]=t)}getRenderer(e){const t=Object(Ae.L)(Fa,e);if(Object(Ae.T)(this.rendererMap[t]))throw`The renderer ${t} is not found`;return this.rendererMap[t]}}class Ph{constructor(e){this.parent=e}setWidthToColumns(){let e=0;const t=this.parent.getColumnIndexesInView();let i=!0,s=0;if(this.parent.allowGrouping)for(let o=this.parent.groupSettings.columns.length;e<o;e++)this.parent.enableColumnVirtualization&&-1===t.indexOf(e)?i=!1:this.setColumnWidth(new Vr({width:"30px"}),e);(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new Vr({width:"30px"}),e),e++),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(this.setColumnWidth(new Vr({width:"30px"}),e),e++);const n=this.parent.getColumns();for(let o=0;o<n.length;o++)this.setColumnWidth(n[o],i&&this.parent.enableColumnVirtualization?void 0:o+e);this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&this.setColumnWidth(new Vr({width:"30px"}),n.length),s=this.getTableWidth(this.parent.getColumns()),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(s)}setMinwidthBycalculation(e){let t=0;const i=this.parent.getColumns().filter(e=>Object(Ae.T)(e.width)||"auto"===e.width);if(i.length){t=Object(Ae.T)(this.parent.width)||"auto"===this.parent.width||"string"!=typeof this.parent.width||-1!==this.parent.width.indexOf("%")?this.parent.element.getBoundingClientRect().width-e:("string"==typeof this.parent.width?parseInt(this.parent.width,10):this.parent.width)-e;let s=0;for(const e of i)s+=Object(Ae.T)(e.minWidth)?0:"string"==typeof e.minWidth?parseInt(e.minWidth,10):e.minWidth;for(let n=0;n<i.length;n++){0===e&&this.parent.allowResizing&&this.isWidthUndefined()&&n!==i.length-1&&this.setUndefinedColumnWidth(i);const o=this.parent.getColumnIndexByField(i[n].field)+this.parent.getIndentCount();0!==e&&t<s?this.setWidth(i[n].minWidth,o):0!==e&&t>s&&this.setWidth("",o,!0)}}}setUndefinedColumnWidth(e){for(let t=0;t<e.length;t++)t!==e.length-1&&(e[t].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[t].field)))}setColumnWidth(e,t,i){if(this.parent.getColumns().length<1)return;const s=Object(Ae.T)(t)?this.parent.getNormalizedColumnIndex(e.uid):t,n=this.getWidth(e),o=this.getTableWidth(this.parent.getColumns());null!==n&&(this.setWidth(n,s),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(o),(this.parent.allowResizing&&"resize"===i||this.parent.getFrozenColumns()&&this.parent.allowResizing)&&this.setWidthToTable(),this.parent.notify(Al,{index:s,width:n,column:e,module:i}))}setWidth(e,t,i){this.parent.groupSettings.columns.length>t&&ad(this.parent)&&(e=(30/this.parent.element.offsetWidth*100).toFixed(1)+"%");const s=this.parent.getHeaderTable(),n=this.parent.getContentTable(),o=Object(Ae.H)(e);let r,l=this.parent.getFrozenColumns();const a=this.parent.isRowDragable();l=l&&a?l+1:l;const h=this.parent.getHeaderContent().querySelector("."+Ga),c=this.parent.getContent().querySelector("."+Wa),d=this.parent.getFrozenLeftColumnsCount(),p=this.parent.getFrozenRightColumnsCount(),u=this.parent.getMovableColumnsCount(),m=0!==d||0!==p;if(l&&t>=l){if(!h||!h.querySelector(oh))return;r=h.querySelector(oh).children[t-l]}else if(this.parent.enableColumnVirtualization&&l&&this.parent.contentModule.isXaxis()&&h.scrollLeft>0){const e=h.querySelector(oh);r=e.children[e.children.length-1-t]}else if(m){let e;if(d&&!p)e=(t=a?t-1:t)<d?s:h;else if(!d&&p)e=t>=u?s:h;else if(d&&p){t=a?t-1:t;const i=this.parent.getFrozenRightHeader();e=t<d?s:t<d+u?h:i}if(r=this.getColumnLevelFrozenColgroup(t,d,u,e),!r)return}else r=s.querySelector(oh).children[t];let g;if(r&&!i?r.style.width=o:r&&i&&(r.style.width=""),l&&t>=l)g=this.parent.getContent().querySelector("."+Wa).querySelector(oh).children[t-l];else if(this.parent.enableColumnVirtualization&&l&&this.parent.contentModule.isXaxis()&&c.scrollLeft>0){const e=this.parent.getContent().querySelector("."+Wa).querySelector(oh);g=e.children[e.children.length-1-t]}else if(m){let e;if(d&&!p&&(e=t<d?n:c),!d&&p&&(e=t>=u?n:c),d&&p){const i=this.parent.getContent().querySelector(".e-frozen-right-content");e=t<d?n:t<d+u?c:i}g=this.getColumnLevelFrozenColgroup(t,d,u,e)}else g=n.querySelector(oh).children[t];if(g&&!i?g.style.width=o:g&&i&&(g.style.width=""),!this.parent.enableColumnVirtualization){const e=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),i=[];for(let t=0;t<e.length;t++)if(Ic(e[t],"e-grid").id===this.parent.element.id)for(let s=0;s<e[t].querySelector("colgroup").children.length;s++)i.push(e[t].querySelector("colgroup").children[s]);e.length&&i.length&&(i[t].style.width=o)}this.parent.isFrozenGrid()&&this.refreshFrozenScrollbar()}getColumnLevelFrozenColgroup(e,t,i,s){if(!s||!s.querySelector(oh))return null;const n=this.parent.getColumns(),o=this.parent.isRowDragable(),r=this.parent.getFrozenMode();let l;const a=[].slice.call(s.querySelector(oh).children);return l="Right"===r&&o&&e===i+this.parent.getFrozenRightColumnsCount()?a[a.length-1]:o&&-1===e?a[0]:"Left"===n[e].freeze?a[o?e+1:e]:"Right"===n[e].freeze?a[e-(t+i)]:a[e-t],l}refreshFrozenScrollbar(){const e={cancel:!1};if(this.parent.notify("prevent-frozen-scroll-refresh",e),e.cancel)return;const t=Vc(),i=this.parent.element.querySelector(".e-frozenscrollbar"),s=this.parent.element.querySelector(".e-movablescrollbar"),n=this.parent.getContent().querySelector("."+_a),o=this.parent.getContent().querySelector("."+Wa);let r=n.firstElementChild.getBoundingClientRect().width,l=o.firstElementChild.getBoundingClientRect().width;if("Right"===this.parent.getFrozenMode()&&(r+=t),i.style.width=r+"px",this.parent.getFrozenMode()===Za){const e=this.parent.element.querySelector(".e-frozen-right-scrollbar");let i=this.parent.getContent().querySelector(".e-frozen-right-content").firstElementChild.getBoundingClientRect().width;"auto"!==this.parent.height&&(i+=t),e.style.width=i+"px"}else{if(this.parent.enableColumnVirtualization){const e=this.parent.getMovableVirtualContent().querySelector(".e-virtualtrack");e&&(l=e.scrollWidth)}"Right"!==this.parent.getFrozenMode()&&"auto"!==this.parent.height&&(l+=t)}s.firstElementChild.style.width=l+"px"}getSiblingsHeight(e){return this.getHeightFromDirection(e,"previous")+this.getHeightFromDirection(e,"next")}getHeightFromDirection(e,t){let i=e[t+"ElementSibling"],s=0;const n=["e-gridheader",Na,"e-groupdroparea","e-gridpager","e-toolbar"];for(;i;)n.some(e=>i.classList.contains(e))&&(s+=i.offsetHeight),i=i[t+"ElementSibling"];return s}isWidthUndefined(){const e=this.parent.getColumns().filter(e=>Object(Ae.T)(e.width)&&Object(Ae.T)(e.minWidth)).length;return this.parent.getColumns().length===e}getWidth(e){if(Object(Ae.T)(e.width)&&this.parent.allowResizing&&Object(Ae.T)(e.minWidth)&&!this.isWidthUndefined()&&(e.width=200),this.parent.isFrozenGrid()&&Object(Ae.T)(e.width)&&(e.getFreezeTableName()===th||e.getFreezeTableName()===eh)&&(e.width=200),!e.width)return null;const t=parseInt(e.width.toString(),10);return e.minWidth&&t<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&t>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width}getTableWidth(e){let t=0;for(const i of e){let e=this.getWidth(i);"auto"===i.width&&(e=0),!1!==i.visible&&null!==e&&(t+=parseInt(e.toString(),10))}return t}calcMovableOrFreezeColWidth(e){const t=this.parent.getColumns().slice(),i=this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenColumns(),s=this.parent.getMovableColumnsCount(),n=this.parent.getFrozenRightColumnsCount();return"movable"===e?(n&&t.splice(i+s,t.length),i&&t.splice(0,i)):"freeze-left"===e?t.splice(i,t.length):"freeze-right"===e&&t.splice(0,i+s),Object(Ae.H)(this.getTableWidth(t))}setWidthToFrozenRightTable(){let e=this.calcMovableOrFreezeColWidth("freeze-right");e=this.isAutoResize()?"100%":e;const t=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(".e-table"),i=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(".e-table");t.style.width=e,i.style.width=e}setWidthToFrozenLeftTable(){let e=this.calcMovableOrFreezeColWidth("freeze-left");e=this.isAutoResize()?"100%":e,this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e}setWidthToMovableTable(){let e="";const t=this.parent.getColumns().filter(e=>Object(Ae.T)(e.width)).length>=1,i=this.parent.getColumns().filter(e=>"auto"===e.width).length>=1;"number"!=typeof this.parent.width||t||i?t||i||(e=this.calcMovableOrFreezeColWidth("movable")):e=Object(Ae.H)(this.parent.width-parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0],10)-5),e=this.isAutoResize()?"100%":e,this.parent.getHeaderContent().querySelector("."+Ga).firstElementChild&&(this.parent.getHeaderContent().querySelector("."+Ga).firstElementChild.style.width=e),this.parent.getContent().querySelector("."+Wa).firstElementChild.style.width=e}setWidthToFrozenEditTable(){let e=this.calcMovableOrFreezeColWidth("freeze");e=this.isAutoResize()?"100%":e,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=e}setWidthToMovableEditTable(){let e=this.calcMovableOrFreezeColWidth("movable");e=this.isAutoResize()?"100%":e,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=e}setWidthToTable(){let e=Object(Ae.H)(this.getTableWidth(this.parent.getColumns()));this.parent.isFrozenGrid()?((this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount())&&this.setWidthToFrozenLeftTable(),this.setWidthToMovableTable(),this.parent.getFrozenRightColumnsCount()&&this.setWidthToFrozenRightTable()):((this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new Vr({width:"30px"})),e=this.isAutoResize()?"100%":e,this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e);const t=this.parent.element.querySelector(".e-table.e-inline-edit");t&&this.parent.getFrozenColumns()?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):t&&(t.style.width=e)}isAutoResize(){return this.parent.allowResizing&&"Auto"===this.parent.resizeSettings.mode}}class Hh{constructor(e){this.currentInfo={},this.oneTime=!0,this.swap={},this.isInfiniteScroll=!1,this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.parent=e,this.rowModelGen=new dh(this.parent),this.addEventListener()}focusCheck(e){const t=e.target;this.focusByClick=!0,this.skipFocus=t.classList.contains("e-grid")}onFocus(e){if(this.parent.isDestroyed||Ae.d.isDevice||this.parent.enableVirtualization)return;this.setActive(!this.parent.enableHeaderFocus&&0===this.parent.frozenRows,this.parent.isFrozenGrid()),this.parent.enableHeaderFocus||this.parent.getCurrentViewRecords().length||"Batch"===this.parent.editSettings.mode&&("Batch"!==this.parent.editSettings.mode||this.parent.editModule.getBatchChanges().addedRecords.length)||this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new za({isDataRow:!0})]}),this.getContent().selector,!1);const t=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(t[0],t[1]),this.skipFocus&&(this.focus(e),this.skipFocus=!1)}passiveFocus(e){this.parent.isDestroyed||e.target&&e.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,Object(Ae.u)([this.currentInfo.element],["e-focused","e-focus"]))}onBlur(e){(!this.parent.isEdit&&(!e||e.relatedTarget&&!Object(Ae.A)(e.relatedTarget,".e-grid"))||Object(Ae.T)(e.relatedTarget)&&0===parseInt(e.target.getAttribute("aria-colindex"),10)&&0===parseInt(e.target.getAttribute("index"),10))&&(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.parent.element.tabIndex=0)}onClick(e,t){if(Ic(e.target,"e-filterbarcell")&&(Ic(e.target,"e-multiselect")||e.target.classList.contains("e-input-group-icon")))return;let i=!Object(Ae.T)(Object(Ae.A)(e.target,"."+Va));const s=!Object(Ae.T)(Object(Ae.A)(e.target,".e-gridheader"));i=i&&s?!i:i;let n=!Object(Ae.T)(Object(Ae.A)(e.target,"."+_a))||!Object(Ae.T)(Object(Ae.A)(e.target,"."+Ua)),o=!1;if(this.parent.getFrozenMode()===Za&&(o=!Object(Ae.T)(Object(Ae.A)(e.target,".e-frozen-right-content"))||!Object(Ae.T)(Object(Ae.A)(e.target,".e-frozen-right-header")),n=n&&!o),!i&&Object(Ae.T)(Object(Ae.A)(e.target,".e-gridheader"))||e.target.classList.contains(Ka)||!Object(Ae.T)(Object(Ae.A)(e.target,".e-unboundcell")))return;if(this.setActive(i,n,o),!i&&Object(Ae.T)(Object(Ae.A)(e.target,".e-gridheader")))return void this.clearOutline();const r={cancel:!1,byKey:!1,byClick:!Object(Ae.T)(e.target),clickArgs:e};if(this.parent.notify(El,r),!r.cancel&&!Object(Ae.A)(e.target,".e-inline-edit")&&(this.setActive(i,n,o),this.getContent())){if(!1===this.getContent().onClick(e,t))return;this.focus()}}onKeyPress(e){if(this.skipOn(e))return;this.activeKey=e.action;const t={cancel:!1,byKey:!0,byClick:!1,keyArgs:e};if(this.parent.notify(El,t),t.cancel)return;const i=this.getContent().matrix.current;this.currentInfo.outline=!0;const s=this.getContent().jump(e.action,i);if(this.swap=s,s.swap&&(this.setActive(!s.toHeader,s.toFrozen,s.toFrozenRight),this.getContent().matrix.current=this.getContent().getNextCurrent(i,s,this.active,e.action),this.prevIndexes={}),this.setActiveByKey(e.action,this.getContent()),!1===(!this.content.lastIdxCell&&this.getContent().onKeyPress(e)))return this.clearIndicator(),void("shiftTab"===e.action&&i.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1));e.preventDefault(),this.focus(e)}skipOn(e){const t=e.target;if(!t)return!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(e.action)>-1)return this.clearIndicator(),!0;const i=Object(Ae.A)(t,"th")&&!Object(Ae.A)(t,"th").tabIndex;!e.target.classList.contains("e-filterbaroperator")||13!==e.keyCode&&27!==e.keyCode||Object(Ae.A)(e.target,".e-filterbarcell").querySelector("input").focus(),i&&null!==Object(Ae.A)(document.activeElement,".e-filterbarcell")&&this.removeFocus();let s=null!==Object(Ae.A)(document.activeElement,".e-filterbarcell");if(this.parent.enableHeaderFocus&&s){const e=this.active.matrix,t=e.current;s=e.matrix[t[0]].lastIndexOf(1)!==t[1]}return"delete"===e.action||"Batch"!==this.parent.editSettings.mode&&(this.parent.isEdit||["insert","f2"].indexOf(e.action)>-1)||s||null!==Object(Ae.A)(document.activeElement,"#"+this.parent.element.id+"_searchbar")&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(e.action)>-1||null===Object(Ae.A)(t,"."+Va)&&null===Object(Ae.A)(t,".e-gridheader")||"space"===e.action&&!t.classList.contains(Qa)&&null===Object(Ae.A)(t,"."+Qa)&&null===Object(Ae.A)(t,".e-headerchkcelldiv")||null!==Object(Ae.A)(t,".e-filter-popup")}focusVirtualElement(e){if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){const t={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify(fa,t);const i=this.actions.some(e=>e===this.activeKey),s=!!this.parent.contentModule&&this.parent.contentModule.selectedRowIndex>-1;t.isAdd||Object.keys(t.virtualData).length||i||t.isCancel||s?(this.parent.notify("reset-virtual-focus",{isCancel:!1}),t.isCancel=!1,this.parent.contentModule.selectedRowIndex=-1,i&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",e)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()}this.isVirtualScroll=this.isInfiniteScroll=!1}getFocusedElement(){return this.currentInfo.elementToFocus}getContent(){return this.active||this.content}setActive(e,t,i){this.active=e?t?this.fContent:i?this.frContent:this.content:t?this.fHeader:i?this.frHeader:this.header}setFocusedElement(e,t){this.currentInfo.elementToFocus=e,setTimeout(()=>{Object(Ae.T)(this.currentInfo.elementToFocus)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling?this.focusVirtualElement(t):this.currentInfo.elementToFocus.focus())},0)}focus(e){this.parent.notify("virtaul-cell-focus",e),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)}removeFocus(e){this.currentInfo.element&&(Object(Ae.eb)([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1)}addOutline(){const e=this.getContent().getFocusInfo();e.element&&(Object(Ae.u)([e.element],["e-focused"]),Object(Ae.u)([e.elementToFocus],["e-focus"]))}focusHeader(){this.setActive(!1,this.parent.isFrozenGrid()),this.resetFocus()}focusContent(){this.setActive(!0,this.parent.isFrozenGrid()),this.resetFocus()}resetFocus(){const e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.focus()}addFocus(e,t){if(this.currentInfo=e,this.currentInfo.outline=e.outline&&!Object(Ae.T)(t),this.isInfiniteScroll&&(this.currentInfo.outline=!0),!e.element)return;const i=e.elementToFocus.classList.contains("e-focus");if(i)return;this.currentInfo.outline&&Object(Ae.u)([e.element],["e-focused"]),Object(Ae.u)([e.elementToFocus],["e-focus"]),e.element.tabIndex=0,i||this.setFocusedElement(e.elementToFocus,t),this.parent.notify(xl,{element:e.elementToFocus,parent:e.element,indexes:this.getContent().matrix.current,byKey:!Object(Ae.T)(t),byClick:Object(Ae.T)(t),keyArgs:t,isJump:this.swap.swap,container:this.getContent().getInfo(t),outline:!Object(Ae.T)(t),swapInfo:this.swap});const[s,n]=this.getContent().matrix.current;this.prevIndexes={rowIndex:s,cellIndex:n},this.focusedColumnUid=this.parent.getColumnByIndex(n).uid,this.focusByClick=!1}refreshMatrix(e){return t=>{e&&t.args&&t.args.isFrozen&&!this.fContent?this.fContent=new Wh(this.parent):e&&!this.frContent&&t.args&&t.args.renderFrozenRightContent?this.frContent=new Uh(this.parent):e&&!this.content&&(this.content=new Nh(this.parent)),!e&&t.args&&t.args.isFrozen&&!this.fHeader?this.fHeader=new Gh(this.parent):!e&&t.args&&t.args.renderFrozenRightContent&&!this.frHeader?this.frHeader=new Kh(this.parent):e||this.header||(this.header=new qh(this.parent));const i=e?t.args&&t.args.isFrozen?this.fContent:t.args&&t.args.renderFrozenRightContent?this.frContent:this.content:t.args&&t.args.isFrozen?this.fHeader:t.args&&t.args.renderFrozenRightContent?this.frHeader:this.header;let s=e?t.rows.slice(this.parent.frozenRows):t.rows;const n=e?t.rows.slice(0,this.parent.frozenRows):t.rows;this.parent.isCollapseStateEnabled()&&e&&(s=s.filter(e=>!1!==e.visible));const o=!Object(Ae.T)(this.parent.rowTemplate),r=i.matrix.generate(n,i.selector,o);if("batchAdd"===t.name&&this.parent.isFrozenGrid()){const e=this.parent.getMovableRowsObject().map(e=>e.clone()),t=s.map(e=>e.clone());if(this.fContent.matrix.generate(t,this.fContent.selector,o),this.content.matrix.generate(e,this.content.selector,o),this.parent.getFrozenMode()===Za){const e=this.parent.getFrozenRightRowsObject().map(e=>e.clone());this.frContent.matrix.generate(e,this.frContent.selector,o)}}else i.matrix.generate(s,i.selector,o);if(i.generateRows(n,{matrix:r,handlerInstance:t.args&&t.args.isFrozen?this.fHeader:t.args&&t.args.renderFrozenRightContent?this.frHeader:this.header}),!Ae.d.isDevice&&t&&t.args&&(this.focusByClick||"paging"!==t.args.requestType||(this.skipFocus=!1,this.parent.element.focus()),"grouping"===t.args.requestType&&(this.skipFocus=!0)),t&&t.args&&"virtualscroll"===t.args.requestType)if(this.currentInfo.uid){let e;if(t.rows.some((t,i)=>(e=i,t.uid===this.currentInfo.uid))){this.content.matrix.current[0]=e,this.content.matrix.current[1]=this.parent.getColumnIndexByUid(this.focusedColumnUid)||0;const t=this.getContent().getFocusInfo().elementToFocus;if(t){const e=t.getBoundingClientRect(),i=this.parent.element.getBoundingClientRect();e.top>=0&&e.left>=0&&e.right<=Math.min(i.right,window.innerWidth||document.documentElement.clientWidth)&&e.bottom<=Math.min(i.bottom,window.innerHeight||document.documentElement.clientHeight)&&(this.isVirtualScroll=!0,this.focus())}}}else if(t.args.focusElement&&t.args.focusElement.classList.contains("e-filtertext")){const e=this.parent.element.querySelector("#"+t.args.focusElement.id);e&&e.focus()}}}addEventListener(){this.parent.isDestroyed||(Ae.l.add(this.parent.element,"mousedown",this.focusCheck,this),Ae.l.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=e=>this.passiveFocus(e),!0),Ae.l.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:Rl,handler:this.onKeyPress},{event:Dl,handler:this.onClick},{event:bl,handler:this.refMatrix},{event:ca,handler:this.refMatrix},{event:"refresh-Expand-and-Collapse",handler:this.refMatrix},{event:Ol,handler:this.refreshMatrix()},{event:Ra,handler:this.restoreFocus},{event:ma,handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:ll,handler:this.refMatrix},{event:al,handler:this.refMatrix},{event:hl,handler:this.refMatrix},{event:"detailDataBound",handler:this.refMatrix},{event:yl,handler:this.refMatrix},{event:xl,handler:this.internalCellFocus}],wd(this.parent,this.evtHandlers,!0,this))}filterfocus(){"FilterBar"!==this.parent.filterSettings.type&&this.restoreFocus()}removeEventListener(){this.parent.isDestroyed||(Ae.l.remove(this.parent.element,"mousedown",this.focusCheck),Ae.l.remove(this.parent.element,"focus",this.onFocus),Ae.l.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),wd(this.parent,this.evtHandlers,!1))}destroy(){this.removeEventListener()}restoreFocus(){this.addFocus(this.getContent().getFocusInfo())}restoreFocusWithAction(e){if(!this.parent.enableInfiniteScrolling){const t=this.getContent().matrix,i=t.current;switch(e.requestType){case"grouping":case"ungrouping":i[1]=!i.length||this.parent.groupSettings.showGroupedColumn||Object(Ae.T)(t.matrix[i[0]])?"grouping"===e.requestType?i[1]+1:i[1]-1:t.matrix[i[0]].indexOf(1)}this.getContent().matrix.current=i,this.addFocus(this.getContent().getFocusInfo())}}clearOutline(){this.getContent().matrix.current=this.getContent().matrix.get(0,-1,[0,1],"downArrow",this.getContent().validator()),this.clearIndicator()}clearIndicator(){this.currentInfo.element&&this.currentInfo.elementToFocus&&Object(Ae.eb)([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])}getPrevIndexes(){const e=this.forget;return this.forget=!1,e||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes}forgetPrevious(){this.forget=!0}setActiveByKey(e,t){if(!this.parent.isFrozenGrid()&&0===this.parent.frozenRows)return;let i;const s={home:()=>({toHeader:!i.isContent,toFrozen:!0}),end:()=>({toHeader:!i.isContent,toFrozen:!1}),ctrlHome:()=>({toHeader:!0,toFrozen:this.parent.isFrozenGrid()}),ctrlEnd:()=>({toHeader:!1,toFrozen:!1})};if(!(e in s))return;i=t.getInfo();const n=s[e]();this.setActive(!n.toHeader,n.toFrozen),this.getContent().matrix.current=t.matrix.current}internalCellFocus(e){if(!(e.byKey&&e.container.isContent&&"enter"===e.keyArgs.action&&(e.parent.classList.contains("e-detailcell")||e.parent.classList.contains("e-unboundcell")||e.parent.classList.contains("e-templatecell"))))return;this.clearIndicator();const t=this.getContent().getFocusable(this.getFocusedElement());this.setFocusedElement(t),this.currentInfo.skipAction=!0}}class Vh{constructor(){this.matrix=[],this.current=[]}set(e,t,i){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.columns)),this.matrix[e]=this.matrix[e]||[],this.matrix[e][t]=i?1:0}get(e,t,i,s,n){const o=t;if(e+i[0]<0)return[e,t];e=Math.max(0,Math.min(e+i[0],this.rows));let r=!0;if(Object(Ae.T)(this.matrix[e]))return null;if(t=Math.max(0,Math.min(t+i[1],this.matrix[e].length-1)),o+i[1]>this.matrix[e].length-1&&n(e,t,s))return[e,o];const l=this.first(this.matrix[e],t,i,!0,s);t=null===l?o:l;const a=Object(Ae.R)(`${e}.${t}`,this.matrix);if(e!==this.rows||"downArrow"!==s&&"enter"!==s||(i[0]=-1),null===l){for(let e=0;e<this.rows;e++)if(this.matrix[e].some(e=>1===e)){r=!1;break}if(r)return[e=this.current[0],t]}return this.inValid(a)||!n(e,t,s)?this.get(e,o,i,s,n):[e,t]}first(e,t,i,s,n){return(t<0||t===e.length)&&this.inValid(e[t])&&"upArrow"!==n&&"downArrow"!==n||!e.some(e=>1===e)?null:this.inValid(e[t])?this.first(e,-1!==["upArrow","downArrow","shiftUp","shiftDown"].indexOf(n)?s?0:++t:t+i[1],i,!1,n):t}select(e,t){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.matrix[e].length-1)),this.current=[e,t]}generate(e,t,i){this.rows=e.length-1,this.matrix=[];for(let s=0;s<e.length;s++){const n=e[s].cells.filter(e=>!0!==e.isSpanned);this.columns=Math.max(n.length-1,0|this.columns);for(let o=0;o<n.length;o++)this.set(s,o,!1!==e[s].visible&&t(e[s],n[o],i))}return this.matrix}inValid(e){return 0===e||void 0===e}}class Nh{constructor(e){this.matrix=new Vh,this.lastIdxCell=!1,this.parent=e,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=e=>({home:[this.matrix.current[0],-1,0,1],end:[this.matrix.current[0],this.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[this.matrix.rows,this.matrix.columns+1,0,-1]}[e]||null)}getTable(){return this.parent.isFrozenGrid()?this.parent.getContent().querySelector(".e-movablecontent .e-table"):this.parent.getContentTable()}onKeyPress(e){let t=this.getCurrentFromAction(e.action,this.keyActions[e.action],e.action in this.keyActions,e);if(t){if((["tab","shiftTab"].indexOf(e.action)>-1&&this.matrix.current||[]).toString()===t.toString()){if(t.toString()===[this.matrix.rows,this.matrix.columns].toString()||t.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===t.toString())return!1;t=this.editNextRow(t[0],t[1],e.action)}this.matrix.select(t[0],t[1])}}editNextRow(e,t,i){const s=this.parent,n=s.editSettings.allowNextRowEdit&&(s.isEdit||s.isLastCellPrimaryKey),o=s.getColumnIndexByField(s.getVisibleColumns()[0].field),r=this.getTable().rows[e].cells[t];return"tab"===i&&n&&(e++,t=o+(this.getTable().rows[e].getElementsByClassName("e-indentcell").length+this.getTable().rows[e].getElementsByClassName("e-detailrowcollapse").length)),"shiftTab"===i&&n&&(e--,t=s.getColumnIndexByField(s.getVisibleColumns()[s.getVisibleColumns().length-1].field)),r.classList.contains(Ha)||r.classList.contains("e-headercell")||r.classList.contains("e-groupcaption")?[e,t]:this.editNextRow(e,t,i)}getCurrentFromAction(e,t=[0,0],i,s){if(!i&&!this.indexesByKey(e)||0===this.matrix.current.length)return null;if(!this.shouldFocusChange(s))return this.matrix.current;const[n,o,r,l]=this.indexesByKey(e)||[...this.matrix.current,...t];return this.matrix.get(n,o,[r,l],e,this.validator())}onClick(e,t){let i=e.target;if(this.target=i,i=i.classList.contains(Ha)?i:Object(Ae.A)(i,"td"),i=i||Object(Ae.A)(e.target,"td.e-detailrowcollapse")||Object(Ae.A)(e.target,"td.e-detailrowexpand"),i=Object(Ae.A)(e.target,"td.e-detailcell")&&Object(Ae.T)(Object(Ae.A)(Object(Ae.A)(e.target,".e-grid"),"td.e-detailcell"))?null:i,i=i&&Object(Ae.A)(i,"table").classList.contains(Ya)?i:null,!i)return!1;const[s,n]=[i.parentElement.rowIndex,i.cellIndex],[o,r]=this.matrix.current,l=Object(Ae.R)(`${s}.${n}`,this.matrix.matrix);if(this.matrix.inValid(l)||!t&&o===s&&r===n||!Ic(e.target,Ha)&&!Ic(e.target,"e-groupcaption"))return!1;this.matrix.select(s,n)}getFocusInfo(){const e={},[t=0,i=0]=this.matrix.current;return this.matrix.current=[t,i],e.element=Object(Ae.T)(this.getTable().rows[t])?null:this.getTable().rows[t].cells[i],e.element?(e.elementToFocus=e.element.classList.contains("e-unboundcell")||e.element.classList.contains("e-detailcell")?e.element:this.getFocusable(e.element),e.outline=!0,e.uid=e.element.parentElement.getAttribute("data-uid"),e):e}getFocusable(e){let t='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])';const i=!Object(Ae.T)(Object(Ae.A)(e,".e-templatecell"));this.parent.isEdit&&(t='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea');const s=[].slice.call(e.querySelectorAll(t));return s.length?i&&s.length>1?this.target:s[0]:e}selector(e,t,i){const s=[Ia.Expand,Ia.GroupCaption,Ia.CaptionSummary,Ia.GroupSummary];return(e.isDataRow&&t.visible&&(t.isDataCell||t.isTemplate)||e.isDataRow&&t.cellType===Ia.DetailExpand&&Object(Ae.T)(t.visible)||!e.isDataRow&&s.indexOf(t.cellType)>-1||t.column&&"checkbox"===t.column.type||t.cellType===Ia.CommandColumn||e.isDataRow&&i)&&!("delete"===e.edit&&e.isDirty)}nextRowFocusValidate(e){const t=e;for(let i=e,s=this.matrix.rows;i<=s;i++){if(-1!==this.matrix.matrix[e].indexOf(1))return e;e+=1}return this.lastIdxCell=!0,t}previousRowFocusValidate(e){const t=e;for(let i=e,s=0;i>=s;i--){if(-1!==this.matrix.matrix[e].indexOf(1))return e;if((e-=1)<0)return this.lastIdxCell=!0,t}return t}jump(e,t){let i=this.parent.getFrozenLeftCount()&&("leftArrow"===e||"shiftTab"===e)&&0===t[1];const s=("rightArrow"===e||"tab"===e)&&t[1]===this.matrix.columns,n=this.parent.getFrozenMode()===Za&&s;"Right"===this.parent.getFrozenMode()&&(i=s),this.lastIdxCell=!1;const o=0!==this.parent.frozenRows&&"shiftEnter"===e;"tab"!==e||this.parent.isEdit||t[1]!==this.matrix.matrix[t[0]].lastIndexOf(1)||this.matrix.matrix.length-1===t[0]||(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1,i=this.parent.isFrozenGrid()),"shiftTab"!==e||this.parent.isEdit||0===t[0]||this.matrix.matrix[t[0]].indexOf(1)!==t[1]||(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[t[0]].length);let r=!1;const l=document.activeElement.parentElement;return(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&l.classList.contains(Xa)&&(r=parseInt(l.getAttribute(sh),10)>0),{swap:!r&&(("upArrow"===e||o)&&0===t[0]||i||n),toHeader:("upArrow"===e||o)&&0===t[0],toFrozen:i,toFrozenRight:n}}getNextCurrent(e=[],t,i,s){const n=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Za?("leftArrow"!==s&&"shiftTab"!==s||(n[0]=e[0],n[1]=i.matrix.columns+1),this.parent.getFrozenMode()!==Za||"rightArrow"!==s&&"tab"!==s||(n[0]=e[0],n[1]=-1)):"rightArrow"!==s&&"tab"!==s||(n[0]=e[0],n[1]=-1),"downArrow"!==s&&"enter"!==s||(n[0]=-1,n[1]=e[1]),n}generateRows(e,t){const{matrix:i,handlerInstance:s}=t,n=s.matrix.matrix.length,o=this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type?n+1:n;s.matrix.matrix=s.matrix.matrix.slice(0,o),s.matrix.rows=o,s.matrix.matrix.push(...i),s.matrix.rows+=i.length}getInfo(e){const t=this.getFocusInfo(),[i,s]=this.matrix.current,n=t.element.classList.contains(Ha),o=n||e&&"enter"!==e.action&&(t.element.classList.contains("e-detailrowcollapse")||t.element.classList.contains("e-detailrowexpand")),[r,l]=[Math.min(parseInt(t.element.parentElement.getAttribute(sh),10),i),Math.min(parseInt(t.element.getAttribute(ih),10),s)];return{isContent:!0,isDataCell:n,indexes:[r,l],isSelectable:o}}validator(){const e=this.getTable();return(t,i,s)=>{if(!Object(Ae.T)(e.rows[t])){let n;i=e.querySelector(".e-emptyrow")?0:i,n=e.rows[t].cells[0].classList.contains("e-editcell")?e.rows[t].cells[0].querySelectorAll("td")[i]:e.rows[t].cells[i];const o=0!==n.getBoundingClientRect().width;if("enter"===s||"shiftEnter"===s)return o&&n.classList.contains(Ha);if(("shiftUp"===s||"shiftDown"===s)&&n.classList.contains(Ha))return o;if("shiftUp"!==s&&"shiftDown"!==s)return o}return!1}}shouldFocusChange(e){const[t=-1,i=-1]=this.matrix.current;if(t<0||i<0)return!0;const s=Object(Ae.R)(`${t}.cells.${i}`,this.getTable().rows);return!s||"enter"!==e.action&&"shiftEnter"!==e.action||s.classList.contains(Ha)&&!s.classList.contains("e-unboundcell")&&(!s.classList.contains("e-templatecell")||s.classList.contains("e-editedbatchcell"))&&!s.classList.contains("e-detailcell")}getGridSeletion(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection}}class qh extends Nh{constructor(e){super(e)}getTable(){return this.parent.isFrozenGrid()?this.parent.getHeaderContent().querySelector(".e-movableheader .e-table"):this.parent.getHeaderTable()}onClick(e){let t=e.target;if(this.target=t,t=t.classList.contains("e-headercell")?t:Object(Ae.A)(t,"th"),t||0===this.parent.frozenRows||(t=e.target.classList.contains(Ha)?e.target:Object(Ae.A)(e.target,"td")),e.target.classList.contains("e-columnheader")||e.target.querySelector(".e-stackedheadercell"))return!1;if(!t)return;const[i,s]=[t.parentElement.rowIndex,t.cellIndex],n=Object(Ae.R)(`${i}.${s}`,this.matrix.matrix);if(this.matrix.inValid(n))return!1;this.matrix.select(t.parentElement.rowIndex,t.cellIndex)}getFocusInfo(){const e={},[t=0,i=0]=this.matrix.current;return e.element=this.getTable().rows[t].cells[i],Object(Ae.T)(e.element)||(e.elementToFocus=this.getFocusable(e.element),e.outline=!e.element.classList.contains("e-filterbarcell")),e}selector(e,t){return t.visible&&(void 0!==t.column.field||t.isTemplate||!Object(Ae.T)(t.column.template))||"checkbox"===t.column.type||t.cellType===Ia.StackedHeader}jump(e,t){let i=this.parent.getFrozenLeftCount()&&("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&0===t[1];const s=("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&t[1]===this.matrix.columns,n=this.parent.getFrozenMode()===Za&&s;"Right"===this.parent.getFrozenMode()&&(i=s);const o=0!==this.parent.frozenRows&&"enter"===e;let r,l,a=i||n;const h=this.parent.focusModule.fHeader&&this.parent.focusModule.fHeader.matrix.matrix,c=h&&!Object(Ae.T)(h[t[0]]);return this.parent.enableHeaderFocus&&"tab"===e&&(l=this.matrix.matrix.length-1===t[0],r=t[1]===this.matrix.matrix[t[0]].lastIndexOf(1),r&&(this.matrix.current[0]=l?0:this.matrix.current[0]+1,this.matrix.current[1]=-1),this.parent.isFrozenGrid()&&l&&r&&(i=!0,a=!1)),{swap:("downArrow"===e||o)&&t[0]===this.matrix.matrix.length-1||c&&(i||n)||"tab"===e&&l&&r,toHeader:a,toFrozen:i,toFrozenRight:n}}getNextCurrent(e=[],t,i,s){const n=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Za?(("leftArrow"===s||"shiftLeft"===s&&this.getGridSeletion()||"shiftTab"===s)&&(n[0]=e[0],n[1]=i.matrix.columns+1),this.parent.getFrozenMode()===Za&&("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(n[0]=e[0],n[1]=-1)):("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(n[0]=e[0],n[1]=-1),"upArrow"!==s&&"shiftEnter"!==s||(n[0]=this.matrix.matrix.length,n[1]=e[1]),n}generateRows(e){const t=this.matrix.matrix.length;if(this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type){this.matrix.rows=++this.matrix.rows;const i=e[0].cells;for(let e=0;e<i.length;e++)this.matrix.set(t,e,i[e].visible&&!1!==i[e].column.allowFiltering)}}getInfo(e){return Object(Ae.G)(super.getInfo(e),{isContent:!1,isHeader:!0})}validator(){return()=>!0}shouldFocusChange(e){const[t,i]=this.matrix.current;if(t<0||i<0)return!0;const s=Object(Ae.R)(`${t}.cells.${i}`,this.getTable().rows);return!s||"enter"!==e.action&&"altDownArrow"!==e.action||!s.classList.contains("e-headercell")}}class Wh extends Nh{getTable(){return this.parent.getContent().querySelector(".e-frozencontent .e-table")}jump(e,t){const i=("upArrow"===e||0!==this.parent.frozenRows&&"shiftEnter"===e)&&0===t[0];return"Right"===this.parent.getFrozenMode()?{swap:i||("shiftTab"===e||"leftArrow"===e)&&0===t[1],toHeader:i,toFrozen:i}:{swap:i||("tab"===e||"rightArrow"===e)&&t[1]===this.matrix.columns,toHeader:i,toFrozen:i}}getNextCurrent(e=[],t,i,s){const n=[];return"Right"===this.parent.getFrozenMode()?"rightArrow"!==s&&"tab"!==s||(n[0]=e[0],n[1]=-1):("tab"===s&&this.parent.enableHeaderFocus&&(n[0]=e[0],n[1]=-1),"leftArrow"!==s&&"shiftTab"!==s||(n[0]=e[0],n[1]=i.matrix.columns+1)),"downArrow"!==s&&"enter"!==s||(n[0]=-1,n[1]=e[1]),n}}class Gh extends qh{jump(e,t){const i=0!==this.parent.frozenRows&&"enter"===e,s=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,n=s&&!Object(Ae.T)(s[t[0]]);if("Right"===this.parent.getFrozenMode()){const s=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&0===t[1];return{swap:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1||n&&s,toHeader:s,toFrozen:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1}}return{swap:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1||("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&t[1]===this.matrix.columns&&n,toHeader:("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&t[1]===this.matrix.columns,toFrozen:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1}}getTable(){return this.parent.getHeaderContent().querySelector(".e-frozenheader .e-table")}getNextCurrent(e=[],t,i,s){const n=[];return"Right"===this.parent.getFrozenMode()?("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(n[0]=e[0],n[1]=-1):("leftArrow"===s||"shiftLeft"===s&&this.getGridSeletion()||"shiftTab"===s)&&(n[0]=e[0],n[1]=i.matrix.columns+1),"upArrow"!==s&&"shiftEnter"!==s||(n[0]=this.matrix.matrix.length,n[1]=e[1]),n}}class _h{constructor(e){this.searchBox=e}searchFocus(e){e.target.parentElement.classList.add("e-input-focus")}searchBlur(e){e.target.parentElement.classList.remove("e-input-focus")}wireEvent(){this.searchBox&&(Ae.l.add(this.searchBox,"focus",this.searchFocus,this),Ae.l.add(this.searchBox,"blur",this.searchBlur,this))}unWireEvent(){this.searchBox&&(Ae.l.remove(this.searchBox,"focus",this.searchFocus),Ae.l.remove(this.searchBox,"blur",this.searchBlur))}}class Uh extends Nh{getTable(){return this.parent.getContent().querySelector(".e-frozen-right-content .e-table")}jump(e,t){const i=("upArrow"===e||0!==this.parent.frozenRows&&"shiftEnter"===e)&&0===t[0];return{swap:i||("shiftTab"===e||"leftArrow"===e)&&0===t[1],toHeader:i,toFrozenRight:i}}getNextCurrent(e=[],t,i,s){const n=[];return"rightArrow"!==s&&"tab"!==s||(n[0]=e[0],n[1]=-1),"downArrow"!==s&&"enter"!==s||(n[0]=-1,n[1]=e[1]),n}}class Kh extends qh{jump(e,t){const i=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,s=i&&!Object(Ae.T)(i[t[0]]),n=0!==this.parent.frozenRows&&"enter"===e,o=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&0===t[1];return{swap:("downArrow"===e||n)&&t[0]===this.matrix.matrix.length-1||s&&o,toHeader:o,toFrozenRight:("downArrow"===e||n)&&t[0]===this.matrix.matrix.length-1}}getTable(){return this.parent.getHeaderContent().querySelector(".e-frozen-right-header .e-table")}getNextCurrent(e=[],t,i,s){const n=[];return("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(n[0]=e[0],n[1]=0),"upArrow"!==s&&"shiftEnter"!==s||(n[0]=this.matrix.matrix.length,n[1]=e[1]),n}}var Yh=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let Xh=(()=>{class e extends Ae.e{}return Yh([Object(Ae.r)(12)],e.prototype,"pageSize",void 0),Yh([Object(Ae.r)(8)],e.prototype,"pageCount",void 0),Yh([Object(Ae.r)(1)],e.prototype,"currentPage",void 0),Yh([Object(Ae.r)()],e.prototype,"totalRecordsCount",void 0),Yh([Object(Ae.r)(!1)],e.prototype,"enableQueryString",void 0),Yh([Object(Ae.r)(!1)],e.prototype,"pageSizes",void 0),Yh([Object(Ae.r)(null)],e.prototype,"template",void 0),e})();var Qh=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let $h=(()=>{class e extends Ae.e{}return Qh([Object(Ae.r)("startsWith")],e.prototype,"operator",void 0),Qh([Object(Ae.r)(!1)],e.prototype,"ignoreAccent",void 0),e})();class Jh{constructor(e,t,i){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.deSelectedData=[],this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.autoFillRLselection=!0,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=e,this.selectionSettings=t,this.factory=i.getService("rendererFactory"),this.focus=i.getService("focus"),this.addEventListener(),this.wireEvents()}initializeSelection(){this.parent.log("selection_key_missing"),this.render()}onActionBegin(e,t){this.parent.trigger(t,this.fDataUpdate(e))}fDataUpdate(e){if(!(this.isMultiSelection||Object(Ae.T)(e.cellIndex)&&Object(Ae.T)(e.rowIndex))){const t=this.getRowObj(Object(Ae.T)(e.rowIndex)?Object(Ae.T)(e.cellIndex)?this.currentIndex:e.cellIndex.rowIndex:e.rowIndex);e.foreignKeyData=t.foreignKeyData}return e}onActionComplete(e,t){this.parent.trigger(t,this.fDataUpdate(e)),this.isMultiSelection=!1}getModuleName(){return"selection"}destroy(){const e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector("."+Va))&&(this.hidePopUp(),this.clearSelection(),this.removeEventListener(),this.unWireEvents(),Ae.l.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),Ae.l.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))}isEditing(){return("Normal"===this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.isPersistSelection}getSelectedMovableRow(e){const t=this.parent;return t.isFrozenGrid()&&this.parent.getContent().querySelector("."+Wa)?t.getMovableRowByIndex(e):null}getSelectedFrozenRightRow(e){const t=this.parent;return t.isFrozenGrid()&&t.getFrozenMode()===Za&&t.getFrozenRightContent()?t.getFrozenRightRowByIndex(e):null}getCurrentBatchRecordChanges(){const e=this.parent;if("Batch"===e.editSettings.mode&&e.editModule){let t=jc(this.parent.getCurrentViewRecords());t="Bottom"===e.editSettings.newRowPosition?t.concat(this.parent.editModule.getBatchChanges().addedRecords):this.parent.editModule.getBatchChanges().addedRecords.concat(t);const i=this.parent.editModule.getBatchChanges().deletedRecords,s=this.parent.getPrimaryKeyFieldNames()[0];for(let e=0;e<i.length;e++)for(let n=0;n<t.length;n++)if(i[e][s]===t[n][s]){t.splice(n,1);break}return t}return e.getCurrentViewRecords()}selectRow(e,t){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection)return void this.addRowsToSelection([e]);const i=this.parent,s=i.getRowByIndex(e),n=this.getSelectedMovableRow(e),o=this.getSelectedFrozenRightRow(e);let r;if(i.enableVirtualization&&e>-1){const t={selectedIndex:e,isAvailable:!0};this.parent.notify("select-virtual-Row",t);const n=i.isFrozenGrid()?i.contentModule.getRowObjectByIndex(e):null;if(!s||!i.getRowObjectFromUID(s.getAttribute("data-uid"))&&!n)return void(t.isAvailable&&!i.selectionSettings.persistSelection&&this.parent.getSelectedRecords().length>0&&this.clearRowSelection());r=n||i.getRowObjectFromUID(s.getAttribute("data-uid")).data}else r=this.getRowObj(e).data;if(!this.isRowType()||!s||this.isEditing())return;const l=s.hasAttribute("aria-selected");let a;this.activeTarget(),t=t?!(!this.selectedRowIndexes.length||1!==this.selectedRowIndexes.length||this.isKeyAction&&this.parent.isCheckBoxSelection||e!==this.selectedRowIndexes[0]):t,this.isKeyAction=!1;const h="cancel";t?this.rowSelectingCallBack(a,t,e,r,!1,l,h)(a):(a={data:r,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:s,previousRow:i.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},a=this.addMovableArgs(a,n,o),this.parent.trigger(Xr,this.fDataUpdate(a),this.rowSelectingCallBack(a,t,e,r,!1,l,h)))}rowSelectingCallBack(e,t,i,s,n,o,r){return e=>{Object(Ae.T)(e)||!0!==e[r]?(this.index=i,this.toggle=t,this.data=s,this.removed=n,o&&this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode?(this.clearSelectedRow(i),this.selectRowCallBack()):!o&&this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&this.selectRowCallBack(),"ResetOnRowClick"===this.selectionSettings.checkboxMode&&this.clearSelection(),(!this.selectionSettings.persistSelection||"ResetOnRowClick"===this.selectionSettings.checkboxMode||!this.parent.isCheckBoxSelection&&this.selectionSettings.persistSelection)&&(this.selectRowCheck=!0,this.clearRow())):this.disableInteracted()}}selectRowCallBack(){const e=this.parent;let t;const i=this.index,s=this.toggle,n=this.data,o=this.removed,r=e.getRowByIndex(i),l=this.getSelectedMovableRow(i),a=this.getSelectedFrozenRightRow(i);s||o||(this.selectedRowIndexes.indexOf(i)<=-1&&(this.updateRowSelection(r,i),this.selectMovableRow(l,a,i)),this.selectRowIndex(i)),s||(t={data:n,rowIndex:i,row:r,previousRow:e.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked},t=this.addMovableArgs(t,l,a),this.onActionComplete(t,Qr)),this.isInteracted=!1,this.updateRowProps(i)}selectMovableRow(e,t,i){this.parent.isFrozenGrid()&&(this.updateRowSelection(e,i),this.parent.getFrozenMode()===Za&&t&&this.updateRowSelection(t,i))}addMovableArgs(e,t,i){if(this.parent.isFrozenGrid()){const s={mRow:t,previousMovRow:this.parent.getMovableRows()[this.prevRowIndex]},n="frozenRightRow",o="previousFrozenRightRow";this.parent.getFrozenMode()===Za&&i&&(s[n]=i,s[o]=this.parent.getFrozenRightDataRows()[this.prevRowIndex]),e=Object.assign({},e,s)}return e}selectRowsByRange(e,t){this.selectRows(this.getCollectionFromIndexes(e,t)),this.selectRowIndex(t)}selectRows(e){const t=this.parent,i=this.isSingleSel()?e[e.length-1]:e[0];this.isMultiSelection=!0;const s=[],n=[],o=this.getSelectedMovableRow(i),r=this.getSelectedFrozenRightRow(i),l=[];if(!this.isRowType()||this.isEditing())return;for(let h=0,c=e.length;h<c;h++){const t=this.parent.getDataRows()[e[h]],i=this.getRowObj(t);i&&(l.push(i.data),s.push(t),n.push(i.foreignKeyData))}this.activeTarget();let a={cancel:!1,rowIndexes:e,row:s,rowIndex:i,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:l,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:n};a=this.addMovableArgs(a,o,r),this.parent.trigger(Xr,this.fDataUpdate(a),l=>{if(!Object(Ae.T)(l)&&!0===l.cancel)return void this.disableInteracted();this.clearRow(),this.selectRowIndex(e.slice(-1)[0]);const a=e=>{if(this.updateRowSelection(t.getRowByIndex(e),e),t.isFrozenGrid()){const i=this.parent.getFrozenMode()===Za?t.getFrozenRightRowByIndex(e):void 0;this.selectMovableRow(t.getMovableRowByIndex(e),i,e)}this.updateRowProps(i)};if(this.isSingleSel())a(i);else for(const t of e)a(t);l={rowIndexes:e,row:s,rowIndex:i,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,data:this.getSelectedRecords(),isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:n},l=this.addMovableArgs(l,o,r),this.isRowSelected&&this.onActionComplete(l,Qr),this.isInteracted=!1})}addRowsToSelection(e){const t=this.parent,i=this.target;this.isMultiSelection=!0;const s=t.getSelectedRowIndexes().concat(e),n=this.isSingleSel()?t.getRowByIndex(e[e.length-1]):t.getRowByIndex(e[0]),o=this.isSingleSel()?this.getSelectedMovableRow(e[e.length-1]):this.getSelectedMovableRow(e[0]),r=this.isSingleSel()?this.getSelectedFrozenRightRow(e[e.length-1]):this.getSelectedFrozenRightRow(e[0]);if((!this.isRowType()||this.isEditing())&&!this.selectionSettings.checkboxOnly)return;let l;const a=this.parent.getColumns().filter(e=>"checkbox"===e.type);for(const h of e){const e=this.getRowObj(h),c=this.selectedRowIndexes.indexOf(h)>-1;if(this.selectRowIndex(h),c&&(a.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect($r,[h],[e.data],[n],[e.foreignKeyData],i),this.isCancelDeSelect)return;this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(h),1),this.selectedRecords.splice(this.selectedRecords.indexOf(n),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),n.removeAttribute("aria-selected"),this.addRemoveClassesForRow(n,!1,null,"e-selectionbackground","e-active"),o&&(this.selectedRecords.splice(this.selectedRecords.indexOf(o),1),o.removeAttribute("aria-selected"),this.addRemoveClassesForRow(o,!1,null,"e-selectionbackground","e-active")),r&&(this.selectedRecords.splice(this.selectedRecords.indexOf(r),1),r.removeAttribute("aria-selected"),this.addRemoveClassesForRow(r,!1,null,"e-selectionbackground","e-active")),this.rowDeselect(Jr,[h],[e.data],[n],[e.foreignKeyData],i,[o],void 0,[r]),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1}else{if(this.activeTarget(),l={cancel:!1,data:e.data,rowIndex:h,row:n,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:e.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:s},l=this.addMovableArgs(l,o,r),this.parent.trigger(Xr,this.fDataUpdate(l)),!Object(Ae.T)(l)&&!0===l.cancel)return void this.disableInteracted();this.isSingleSel()&&this.clearRow(),this.updateRowSelection(n,h),this.selectMovableRow(o,r,h)}if(c||(l={data:e.data,rowIndex:h,row:n,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:e.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:s},l=this.addMovableArgs(l,o,r),this.onActionComplete(l,Qr)),this.isInteracted=!1,this.updateRowProps(h),this.isSingleSel())break}}getCollectionFromIndexes(e,t){const i=[];let{i:s,max:n}=e<=t?{i:e,max:t}:{i:t,max:e};for(;s<=n;s++)i.push(s);return e>t&&i.reverse(),i}clearRow(){this.clearRowCheck=!0,this.clearRowSelection()}clearRowCallBack(){this.isCancelDeSelect&&"Check"!==this.parent.checkAllRows||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))}clearSelectedRow(e){if(this.toggle){const t=this.parent.getRowByIndex(e);this.disableUI||(t.removeAttribute("aria-selected"),this.addRemoveClassesForRow(t,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(t,!1),this.updateCheckBoxes(t),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(e),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(e)),1)}}updateRowProps(e){this.prevRowIndex=e,this.isRowSelected=this.selectedRowIndexes.length&&!0}updatePersistCollection(e,t){if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!Object(Ae.T)(e)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();const i=this.getRowObj(e),s=i.data?i.data[this.primaryKey]:null;if(null===s)return;i.isSelected=t,t?(this.selectedRowState[s]=t,this.persistSelectedData.some(e=>e[this.primaryKey]===s)||this.persistSelectedData.push(i.data)):this.updatePersistDelete(s)}}updatePersistDelete(e){let t;delete this.selectedRowState[e],this.persistSelectedData.some((i,s)=>(t=s,i[this.primaryKey]===e))&&this.persistSelectedData.splice(t,1)}updateCheckBoxes(e,t,i){if(!Object(Ae.T)(e)){const s=e.querySelector(".e-checkselect");Object(Ae.T)(s)||(Xc(s.nextElementSibling,t),Kc(s,t),(Object(Ae.T)(this.checkedTarget)||!Object(Ae.T)(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(i))}}updateRowSelection(e,t){if(!e)return;this.selectedRowIndexes.push(t);const i=this.selectedRowIndexes.length;if(this.parent.isFrozenGrid()&&i>1&&this.selectedRowIndexes[i-2]===this.selectedRowIndexes[i-1]&&this.selectedRowIndexes.pop(),this.selectedRecords.push(e),e.setAttribute("aria-selected","true"),this.updatePersistCollection(e,!0),this.updateCheckBoxes(e,!0),this.addRemoveClassesForRow(e,!0,null,"e-selectionbackground","e-active"),!this.preventFocus){let t=this.focus.getPrevIndexes().cellIndex?e.cells[this.focus.getPrevIndexes().cellIndex]:e.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(this.parent.contextMenuModule&&2===this.mouseButton&&(t=this.parent.contextMenuModule.cell),!t)return;this.focus.onClick({target:t},!0)}}clearSelection(){if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=jc(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!Object(Ae.T)(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){const e=this.parent.element.querySelector(".e-gridpopup").querySelector("span");e.classList.contains("e-rowselect")&&e.classList.remove("e-spanclicked"),this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1,this.checkSelectAllClicked=!1}}clearRowSelection(){if(this.isRowSelected){const e=this.parent,t=this.parent.getDataRows(),i=[],s=[],n=[],o=[],r=[],l=[],a=this.target;for(let h=0,c=this.selectedRowIndexes.length;h<c;h++){const t="Batch"===this.parent.editSettings.mode?this.parent.getRows()[this.selectedRowIndexes[h]]:this.parent.getDataRows()[this.selectedRowIndexes[h]],a=this.getRowObj(t);if(a&&(i.push(a.data),s.push(t),r.push(this.selectedRowIndexes[h]),l.push(a.foreignKeyData)),e.isFrozenGrid()){const t=e.getMovableRows();if(t&&t.length&&n.push(t[this.selectedRowIndexes[h]]),e.getFrozenMode()===Za){const t=e.getFrozenRightRows();t&&t.length&&o.push(t[this.selectedRowIndexes[h]])}}}this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect($r,r,i,s,l,a,n,()=>{if(this.isCancelDeSelect&&(this.isRowClicked||this.checkSelectAllClicked||this.isInteracted&&!this.parent.isPersistSelection)){if(this.parent.isPersistSelection)if("Intermediate"===this.getCheckAllStatus(this.parent.element.querySelector(".e-checkselectall")))for(let e=0;e<this.selectedRecords.length;e++)this.updatePersistCollection(this.selectedRecords[e],!0);else this.parent.checkAllRows="Check",this.updatePersistSelectedData(!0);return void(this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1)))}const e=[].slice.call(t.filter(e=>e.hasAttribute("aria-selected")));for(let t=0;t<e.length;t++)this.disableUI||(e[t].removeAttribute("aria-selected"),this.addRemoveClassesForRow(e[t],!1,!0,"e-selectionbackground","e-active")),this.isPrevRowSelection||this.updatePersistCollection(e[t],!1),this.updateCheckBoxes(e[t]);for(let t=0,i=this.selectedRowIndexes.length;t<i;t++){const e=this.getSelectedMovableRow(this.selectedRowIndexes[t]);e&&(this.disableUI||(e.removeAttribute("aria-selected"),this.addRemoveClassesForRow(e,!1,!0,"e-selectionbackground","e-active")),this.updateCheckBoxes(e),this.isPrevRowSelection||this.updatePersistCollection(e,!1));const i=this.getSelectedFrozenRightRow(this.selectedRowIndexes[t]);i&&(this.disableUI||(i.removeAttribute("aria-selected"),this.addRemoveClassesForRow(i,!1,!0,"e-selectionbackground","e-active")),this.updateCheckBoxes(i),this.isPrevRowSelection||this.updatePersistCollection(i,!1))}this.selectedRowIndexes=[],this.selectedRecords=[],this.isRowSelected=!1,this.selectRowIndex(-1),this.isPrevRowSelection=!1,this.rowDeselect(Jr,r,i,s,l,a,n,void 0,o),this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},o)}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))}rowDeselect(e,t,i,s,n,o,r,l,a){if(this.selectionSettings.persistSelection&&(this.isRowClicked||this.checkSelectAllClicked)||!this.selectionSettings.persistSelection){const o="cancel",h=1===t.length&&1===this.deSelectedData.length,c={rowIndex:t[0],data:this.selectionSettings.persistSelection&&"Uncheck"===this.parent.checkAllRows&&!h&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode?this.deSelectedData:i,foreignKeyData:n,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};"rowDeselected"===e&&delete c.cancel;const d="row",p="target",u="rowIndex",m="rowIndexes",g="data",b="foreignKeyData";c[d]=s,c[p]=this.actualTarget,this.actualTarget&&!Object(Ae.T)(Object(Ae.A)(this.actualTarget,"thead"))||t.length>1?(c[u]=t[0],c[m]=t):1===t.length&&(c[g]=c[g][0],c[d]=c[d][0],c[b]=c[b][0],this.isAddRowsToSelection&&(c[m]=t)),this.parent.trigger(e,this.parent.isFrozenGrid()?Object.assign({},c,{mRow:r,frozenRightRow:a}):c,e=>{this.isCancelDeSelect=e[o],this.isCancelDeSelect&&(this.isRowClicked||this.isInteracted||this.checkSelectAllClicked)||(this.updatePersistCollection(s[0],!1),this.updateCheckBoxes(s[0],void 0,t[0]),r&&this.updateCheckBoxes(r[0],void 0,t[0]),a&&this.updateCheckBoxes(a[0],void 0,t[0])),void 0!==l&&l()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&void 0!==l&&l()}getRowObj(e=this.currentIndex){return Object(Ae.T)(e)?{}:("number"==typeof e&&(e=this.parent.getRowByIndex(e)),e&&this.parent.getRowObjectFromUID(e.getAttribute("data-uid"))||{})}getSelectedMovableCell(e){const t=this.parent,i=t.getColumnByIndex(e.cellIndex);return t.isFrozenGrid()&&"movable"===i.getFreezeTableName()?t.getMovableCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex)):null}selectCell(e,t){if(!this.isCellType())return;const i=this.parent;let s,n=this.getSelectedMovableCell(e);n||(n=i.getCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex))),this.currentIndex=e.rowIndex;const o=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isCellType()||!n||this.isEditing())return;const r=n.classList.contains("e-cellselectionbackground");(t=t?!Object(Ae.W)(this.prevCIdxs)&&e.rowIndex===this.prevCIdxs.rowIndex&&e.cellIndex===this.prevCIdxs.cellIndex&&r:t)?this.successCallBack(s,t,e,n,o)(s):(s={data:o,cellIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1},s.currentCell=n,s.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(Zr,this.fDataUpdate(s),this.successCallBack(s,t,e,n,o)),this.cellselected=!0)}successCallBack(e,t,i,s,n){return e=>{if((Object(Ae.T)(e)||!0!==e.cancel)&&(t||(e.currentCell=e.currentCell?e.currentCell:s),this.clearCell(),t||this.updateCellSelection(s,i.rowIndex,i.cellIndex),!t)){const e={data:n,cellIndex:i,currentCell:s,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};e.previousRowCellIndex=this.prevECIdxs,this.updateCellProps(i,i),this.onActionComplete(e,el)}}}getCellIndex(e,t){return this.parent.getFrozenColumns()&&t>=this.parent.getFrozenColumns()?this.parent.getMovableCellFromIndex(e,t):this.parent.getCellFromIndex(e,t)}selectCellsByRange(e,t){if(!this.isCellType())return;const i=this.parent;let s=this.getSelectedMovableCell(e);const n=i.getFrozenColumns();let o,r;s||(s=i.getCellFromIndex(e.rowIndex,e.cellIndex));const l=e,a=t=t||e;let h;this.currentIndex=e.rowIndex;const c=this.getCurrentBatchRecordChanges()[this.currentIndex];if(this.isSingleSel()||!this.isCellType()||this.isEditing())return;const d={data:c,cellIndex:e,currentCell:s,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};d.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(Zr,this.fDataUpdate(d),d=>{if(!Object(Ae.T)(d)&&!0===d.cancel)return;if(this.clearCell(),e.rowIndex>t.rowIndex){const i=e;e=t,t=i}for(let l=e.rowIndex;l<=t.rowIndex;l++){this.selectionSettings.cellSelectionMode.indexOf("Box")<0?(o=l===e.rowIndex?e.cellIndex:0,r=l===t.rowIndex?t.cellIndex:this.getLastColIndex(l)):(o=e.cellIndex,r=t.cellIndex),h=[];for(let e=o<r?o:r,t=o>r?o:r;e<=t;e++)s=n?e<n?i.getCellFromIndex(l,e):i.getMovableCellFromIndex(l,e):i.getCellFromIndex(l,e),s&&(h.push(e),this.updateCellSelection(s),this.addAttribute(s));this.selectedRowCellIndexes.push({rowIndex:l,cellIndexes:h})}const p={data:c,cellIndex:a,currentCell:i.getCellFromIndex(a.rowIndex,a.cellIndex),selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};p.previousRowCellIndex=this.prevECIdxs,this.isDragged||(this.onActionComplete(p,el),this.cellselected=!0),this.updateCellProps(l,a)})}selectCells(e){if(!this.isCellType())return;const t=this.parent;let i=this.getSelectedMovableCell(e[0]);const s=t.getFrozenColumns();i||(i=t.getCellFromIndex(e[0].rowIndex,e[0].cellIndexes[0])),this.currentIndex=e[0].rowIndex;const n=this.getCurrentBatchRecordChanges()[this.currentIndex];if(this.isSingleSel()||!this.isCellType()||this.isEditing())return;const o={data:n,cellIndex:e[0].cellIndexes[0],currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};o.previousRowCellIndex=this.prevECIdxs,this.onActionBegin(o,Zr);for(let l=0,a=e.length;l<a;l++)for(let n=0,o=e[l].cellIndexes.length;n<o;n++)i=s?e[l].cellIndexes[n]<s?t.getCellFromIndex(e[l].rowIndex,e[l].cellIndexes[n]):t.getMovableCellFromIndex(e[l].rowIndex,e[l].cellIndexes[n]):t.getCellFromIndex(e[l].rowIndex,e[l].cellIndexes[n]),i&&(this.updateCellSelection(i),this.addAttribute(i),this.addRowCellIndex({rowIndex:e[l].rowIndex,cellIndex:e[l].cellIndexes[n]}));this.updateCellProps({rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]},{rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]});const r={data:n,cellIndex:e[0].cellIndexes[0],currentCell:i,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};r.previousRowCellIndex=this.prevECIdxs,this.onActionComplete(r,el)}addCellsToSelection(e){if(!this.isCellType())return;const t=this.parent;let i,s;this.currentIndex=e[0].rowIndex;const n=this.getCurrentBatchRecordChanges()[this.currentIndex],o=t.getFrozenLeftCount(),r=t.getMovableColumnsCount();if(this.isSingleSel()||!this.isCellType()||this.isEditing())return;this.hideAutoFill();const l=t.getColumnByIndex(e[0].cellIndex);let a;cd(this.parent,(t,i)=>{a=i[e[0].rowIndex]},[l.getFreezeTableName()&&l.getFreezeTableName()!==th?[]:t.getRowsObject(),"movable"===l.getFreezeTableName()?t.getMovableRowsObject():[],l.getFreezeTableName()===eh?t.getFrozenRightRowsObject():[]]);const h=[];for(const c of e){for(let e=0,t=this.selectedRowCellIndexes.length;e<t;e++)if(this.selectedRowCellIndexes[e].rowIndex===c.rowIndex){s=e;break}i=this.getSelectedMovableCell(c),i||(i=t.getCellFromIndex(c.rowIndex,this.getColIndex(c.rowIndex,c.cellIndex)));const d="movable"===l.getFreezeTableName()?c.cellIndex-o:l.getFreezeTableName()===eh?c.cellIndex-(o+r):c.cellIndex;h.push(a.cells[d].foreignKeyData);const p={cancel:!1,data:n,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?t.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},u="previousRowCellIndex";p[u]=this.prevECIdxs;let m=s>-1;if(m){const e=this.selectedRowCellIndexes[s].cellIndexes;e.indexOf(c.cellIndex)>-1?(this.cellDeselect(tl,[{rowIndex:c.rowIndex,cellIndexes:[c.cellIndex]}],n,[i],h),e.splice(e.indexOf(c.cellIndex),1),0===e.length&&this.selectedRowCellIndexes.splice(s,1),i.classList.remove("e-cellselectionbackground"),i.removeAttribute("aria-selected"),this.cellDeselect(il,[{rowIndex:c.rowIndex,cellIndexes:[c.cellIndex]}],n,[i],h)):(m=!1,this.onActionBegin(p,Zr),this.addRowCellIndex({rowIndex:c.rowIndex,cellIndex:c.cellIndex}),this.updateCellSelection(i),this.addAttribute(i))}else{if(this.onActionBegin(p,Zr),!Object(Ae.T)(p)&&!0===p.cancel)return;this.updateCellSelection(i,c.rowIndex,c.cellIndex)}if(!m){const t={data:n,cellIndex:e[0],currentCell:i,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes};t[u]=this.prevECIdxs,this.onActionComplete(t,el),this.cellselected=!0}this.updateCellProps(c,c)}}getColIndex(e,t){const i=this.parent.isFrozenGrid(),s=this.parent.getColumnByIndex(t),n=ud(this.parent,s,e);if(n)for(let o=0;o<n.length;o++)if(parseInt(n[o].getAttribute(ih),10)===t)return i&&("movable"===s.getFreezeTableName()?o+=this.parent.getFrozenLeftCount():s.getFreezeTableName()===eh&&(o+=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount())),o;return-1}getLastColIndex(e){const t=this.parent.getFrozenColumns()?this.parent.getMovableDataRows()[e].querySelectorAll("td.e-rowcell"):this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell");return parseInt(t[t.length-1].getAttribute(ih),10)}clearCell(){this.clearCellSelection()}cellDeselect(e,t,i,s,n){s[0]&&s[0].classList.contains(Qa)&&this.updateCheckBoxes(Object(Ae.A)(s[0],"tr"));const o={cells:s,data:i,cellIndexes:t,foreignKeyData:n,cancel:!1};this.parent.trigger(e,o),this.isPreventCellSelect=o.cancel}updateCellSelection(e,t,i){Object(Ae.T)(t)||this.addRowCellIndex({rowIndex:t,cellIndex:i}),e.classList.add("e-cellselectionbackground"),e.classList.contains(Qa)&&this.updateCheckBoxes(Object(Ae.A)(e,"tr"),!0),this.addAttribute(e)}addAttribute(e){this.target=e,Object(Ae.T)(e)||(e.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:e},!0))}updateCellProps(e,t){this.prevCIdxs=e,this.prevECIdxs=t,this.isCellSelected=this.selectedRowCellIndexes.length&&!0}addRowCellIndex(e){let t,i;for(let s=0,n=this.selectedRowCellIndexes.length;s<n;s++)if(this.selectedRowCellIndexes[s].rowIndex===e.rowIndex){t=!0,i=s;break}t?this.selectedRowCellIndexes[i].cellIndexes.indexOf(e.cellIndex)<0&&this.selectedRowCellIndexes[i].cellIndexes.push(e.cellIndex):this.selectedRowCellIndexes.push({rowIndex:e.rowIndex,cellIndexes:[e.cellIndex]})}clearCellSelection(){if(this.isCellSelected){const e=this.parent,t=this.getSelectedCellsElement(),i=this.selectedRowCellIndexes,s=[],n=[],o=[],r=this.getCurrentBatchRecordChanges(),l=e.isFrozenGrid();this.hideAutoFill();for(let a=0,h=i.length;a<h;a++){s.push(r[i[a].rowIndex]);const t=this.getRowObj(i[a].rowIndex);for(let s=0,r=i[a].cellIndexes.length;s<r;s++)if(l){const t=e.getColumnByIndex(i[a].cellIndexes[s]);n.push(md(this.parent,t,i[a].rowIndex,i[a].cellIndexes[s]))}else t.cells&&o.push(t.cells[i[a].cellIndexes[s]].foreignKeyData),n.push(e.getCellFromIndex(i[a].rowIndex,i[a].cellIndexes[s]))}if(this.cellDeselect(tl,i,s,n,o),!0===this.isPreventCellSelect)return;for(let a=0,h=t.length;a<h;a++)t[a].classList.remove("e-cellselectionbackground"),t[a].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(il,i,s,n,o)}}getSelectedCellsElement(){const e=this.parent;let t,i=e.getDataRows();e.isFrozenGrid()&&(t=e.getMovableDataRows(),i=e.addMovableRows(i,t),e.getFrozenMode()===Za&&(i=e.addMovableRows(i,e.getFrozenRightDataRows())));let s=[];for(let n=0,o=i.length;n<o;n++)s=s.concat([].slice.call(i[n].getElementsByClassName("e-cellselectionbackground")));return s}mouseMoveHandler(e){e.preventDefault();const t=this.parent.element.getBoundingClientRect();let i=this.x,s=this.y;const n=Ac(e);let o,r=n.x-t.left,l=n.y-t.top,a=Object(Ae.A)(e.target,"tr");if(this.isDragged=!0,this.isCellDrag||(a||(a=Object(Ae.A)(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr")),i>r&&(o=r,r=i,i=o),s>l&&(o=l,l=s,s=o),this.element.style.left=i+"px",this.element.style.top=s+"px",this.element.style.width=r-i+"px",this.element.style.height=l-s+"px"),a&&!e.ctrlKey&&!e.shiftKey){const t=parseInt(a.getAttribute(sh),10);if(this.isCellDrag){const i=Ic(e.target,Ha);i&&(this.startAFCell=this.startCell,this.endAFCell=Ic(e.target,Ha),this.selectLikeExcel(e,t,parseInt(i.getAttribute(ih),10)))}else this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,t),this.isRowDragSelected=!0}}selectLikeExcel(e,t,i){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(e)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:i}),this.drawBorders())}drawBorders(){"BoxWithBorder"===this.selectionSettings.cellSelectionMode&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders()):this.showHideBorders("none")}isLastCell(e){const t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]===e}isLastRow(e){const t=[].slice.call(Object(Ae.A)(e,nh).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[t.length-1]}isFirstRow(e){const t=[].slice.call(Object(Ae.A)(e,nh).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[0]}isFirstCell(e){return[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===e}setBorders(e,t,i){const s=[].slice.call(e.getElementsByClassName("e-cellselectionbackground")).filter(e=>""===e.style.display);if(s.length){const e=this.parent.isFrozenGrid(),n=s[0],o=s[s.length-1],r=n.getBoundingClientRect(),l=o.getBoundingClientRect(),a=n.offsetParent.getBoundingClientRect(),h=!this.isLastRow(o)||"1"!==i&&"2"!==i&&"5"!==i?0:2,c=this.parent.frozenRows&&("1"===i||"2"===i)&&this.isFirstRow(n)?1.5:0,d=e&&("2"===i||"4"===i)&&this.isFirstCell(n)?1:0,p=("Right"!==this.parent.getFrozenMode()||"1"!==i&&"3"!==i)&&(this.parent.getFrozenMode()!==Za||"5"!==i&&"6"!==i)||!this.isFirstCell(n)?0:1;this.parent.enableRtl?(t.style.right=a.right-r.right-d+"px",t.style.width=r.right-l.left+d+1+"px"):(t.style.left=r.left-a.left-d-p+"px",t.style.width=l.right-r.left+d-p+1+"px"),t.style.top=r.top-a.top-c+"px",t.style.height=l.top-r.top>0?l.top-a.top+l.height+1-(r.top-a.top)-h+c+"px":l.height+c-h+1+"px",this.selectDirection+=i}else t.style.display="none"}positionBorders(){this.updateStartEndCells(),this.startCell&&this.bdrElement&&this.selectedRowCellIndexes.length&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.contentModule.getMovableContent(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===Za&&this.setBorders(this.parent.contentModule.getFrozenRightContent(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.headerModule.getMovableHeader(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===Za&&this.setBorders(this.parent.headerModule.getFrozenRightHeader(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))}applyBothFrozenBorders(e){const t=this.parent.enableRtl;switch(e.length){case 6:this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right;break;case 4:e.includes("1")&&e.includes("2")&&e.includes("3")&&e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom),e.includes("2")&&e.includes("4")&&e.includes("5")&&e.includes("6")&&(this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom);break;case 2:e.includes("1")&&(this.mcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left)),e.includes("2")&&(this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left)),e.includes("3")&&(this.mhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),e.includes("5")&&(this.mcBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left)),e.includes("6")&&(this.mhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border)}}applyBorders(e){const t=this.parent.enableRtl;if(this.parent.getFrozenMode()===Za)this.applyBothFrozenBorders(e);else switch(e.length){case 4:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 2:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border))}}createBorders(){this.bdrElement||(this.bdrElement=this.parent.getContentTable().parentElement.appendChild(Object(Ae.D)("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr",styles:"width: 2px; border-width: 0;"})),this.parent.isFrozenGrid()&&(this.mcBdrElement=this.parent.contentModule.getMovableContent().appendChild(Object(Ae.D)("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr",styles:"height: 2px; border-width: 0;"})),this.parent.getFrozenMode()===Za&&(this.frcBdrElement=this.parent.contentModule.getFrozenRightContent().appendChild(Object(Ae.D)("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr",styles:"height: 2px; border-width: 0;"})))),this.parent.frozenRows&&(this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(Object(Ae.D)("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr",styles:"height: 2px;"}))),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement=this.parent.headerModule.getMovableHeader().appendChild(Object(Ae.D)("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr",styles:"height: 2px;"})),this.parent.getFrozenMode()===Za&&(this.frhBdrElement=this.parent.headerModule.getFrozenRightHeader().appendChild(Object(Ae.D)("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr",styles:"height: 2px;"})))))}showHideBorders(e){this.bdrElement&&(this.bdrElement.style.display=e,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.display=e,this.parent.getFrozenMode()===Za&&(this.frcBdrElement.style.display=e)),this.parent.frozenRows&&(this.fhBdrElement.style.display=e),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement.style.display=e,this.parent.getFrozenMode()===Za&&(this.frhBdrElement.style.display=e)))}drawAFBorders(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()}positionAFBorders(){if(!this.startCell||!this.bdrAFLeft)return;const e=this.startAFCell.getBoundingClientRect(),t=this.endAFCell.getBoundingClientRect(),i=t.top-e.top>0?1:0,s=t.top-e.top>=0&&(Ic(this.startAFCell,Wa)||Ic(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,n=(Ic(this.startAFCell,Wa)||Ic(this.startAFCell,Ga))&&this.isFirstCell(this.startAFCell)?1:0,o=this.isLastRow(this.endAFCell)&&(Ic(this.endAFCell,Wa)||Ic(this.endAFCell,"e-frozencontent"))?2:0,r=this.startAFCell.offsetParent.getBoundingClientRect(),l=this.parent.element.getBoundingClientRect();let a=this.startAFCell.offsetParent.parentElement.scrollTop-this.startAFCell.offsetTop,h=this.startAFCell.offsetParent.parentElement.scrollLeft-this.startAFCell.offsetLeft;const c=this.parent.element.clientHeight,d=this.parent.element.clientWidth;a=a>0?Math.floor(a)-1:0,h=h>0?h:0;const p=e.left-l.left;if(this.parent.enableRtl){const i=Ic(this.startAFCell,Wa)||Ic(this.startAFCell,Ga)?e.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-l.left:0;this.bdrAFLeft.style.right=l.right-t.right-2+t.width+"px",this.bdrAFLeft.style.width=d<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px",this.bdrAFRight.style.right=l.right-e.right-n+i-1+"px",this.bdrAFTop.style.left=t.left-l.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-n+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=p-n+h-1+"px",this.bdrAFRight.style.left=t.left-l.left-2+t.width+"px",this.bdrAFRight.style.width=d<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=p+h-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-n+1+"px",d<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){const e=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-d;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-e+"px"}if(this.bdrAFLeft.style.top=e.top-l.top-s+a+"px",this.bdrAFLeft.style.height=t.top-e.top>0?t.top-r.top+t.height+1-(e.top-r.top)+s-o-a+"px":t.height+s-o-a+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-i-1+"px",this.bdrAFBottom.style.width=c<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,c<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){const e=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-c;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-e+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}createAFBorders(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.element.appendChild(Object(Ae.D)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.element.appendChild(Object(Ae.D)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.element.appendChild(Object(Ae.D)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.element.appendChild(Object(Ae.D)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))}showAFBorders(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")}hideAFBorders(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")}updateValue(e,t,i){const s=this.createBeforeAutoFill(e,t,i);if(!s.cancel){const n=this.parent.getColumnByIndex(t);this.parent.editModule&&i&&this.parent.editModule.updateCell(e,n.field,"number"===n.type?parseInt(s.value,10):s.value)}}createBeforeAutoFill(e,t,i){const s={column:this.parent.getColumnByIndex(t),value:i.innerText};return this.parent.trigger("beforeAutoFill",s),s}getAutoFillCells(e,t){const i=".e-cellselectionbackground";let s=[].slice.call(this.parent.getDataRows()[e].querySelectorAll(i));return this.parent.isFrozenGrid()&&(s=s.concat([].slice.call(this.parent.getMovableDataRows()[e].querySelectorAll(i))),this.parent.getFrozenMode()===Za&&(s=s.concat([].slice.call(this.parent.getFrozenRightDataRows()[e].querySelectorAll(i))))),s}selectLikeAutoFill(e,t){const i=parseInt(Ic(this.startAFCell,Xa).getAttribute(sh),10),s=parseInt(this.startAFCell.getAttribute(ih),10);let n=parseInt(Ic(this.endAFCell,Xa).getAttribute(sh),10),o=parseInt(this.endAFCell.getAttribute(ih),10);const r=this.selectedRowCellIndexes.length-1,l=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!Ic(e.target,Ha):this.startAFCell=this.parent.getCellFromIndex(i,s),this.endAFCell=this.parent.getCellFromIndex(i+r,s+l),this.drawAFBorders();break;case this.autoFillRLselection&&s+l<o&&o-s-l+1>n-i-r&&o-s-l+1>i-n:if(this.endAFCell=this.parent.getCellFromIndex(i+r,o),n=parseInt(Ic(this.endAFCell,Xa).getAttribute(sh),10),o=parseInt(this.endAFCell.getAttribute(ih),10),t){const e=parseInt(this.endCell.getAttribute(ih),10);for(let t=i;t<=n;t++){const i=this.getAutoFillCells(t,s);let n=0;for(let s=e+1;s<=o;s++)n>l&&(n=0),this.updateValue(t,s,i[n]),n++}this.selectCellsByRange({rowIndex:i,cellIndex:this.startCellIndex},{rowIndex:n,cellIndex:o})}else this.drawAFBorders();break;case this.autoFillRLselection&&s>o&&s-o+1>n-i-r&&s-o+1>i-n:if(this.startAFCell=this.parent.getCellFromIndex(i,o),this.endAFCell=this.endCell,t){for(let e=i;e<=i+r;e++){const t=this.getAutoFillCells(e,s);t.reverse();let i=0;for(let s=this.startCellIndex-1;s>=o;s--)i>l&&(i=0),this.updateValue(e,s,t[i]),i++}this.selectCellsByRange({rowIndex:i,cellIndex:o},{rowIndex:i+r,cellIndex:this.startCellIndex+l})}else this.drawAFBorders();break;case i>n:if(this.startAFCell=this.parent.getCellFromIndex(n,s),this.endAFCell=this.endCell,t){const e=parseInt(this.endCell.parentElement.getAttribute(sh),10);let t=e;for(let o=i-1;o>=n;o--){t===this.startIndex-1&&(t=e);const i=this.getAutoFillCells(t,s);let n=0;t--;for(let e=this.startCellIndex;e<=this.startCellIndex+l;e++)this.updateValue(o,e,i[n]),n++}this.selectCellsByRange({rowIndex:n,cellIndex:s+l},{rowIndex:i+r,cellIndex:s})}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(n,s+l),t){const e=parseInt(this.endCell.parentElement.getAttribute(sh),10);let t=this.startIndex;for(let i=e+1;i<=n;i++){t===e+1&&(t=this.startIndex);const n=this.getAutoFillCells(t,s);t++;let o=0;for(let e=this.startCellIndex;e<=this.startCellIndex+l;e++)this.updateValue(i,e,n[o]),o++}this.selectCellsByRange({rowIndex:e-r,cellIndex:s},{rowIndex:n,cellIndex:s+l})}else this.drawAFBorders()}}mouseUpHandler(e){if(document.body.classList.remove("e-disableuserselect"),this.element&&Object(Ae.db)(this.element),this.mUPTarget=this.isDragged&&1===this.selectedRowCellIndexes.length&&1===this.selectedRowCellIndexes[0].cellIndexes.length?Ic(e.target,Ha):null,this.isDragged&&!this.isAutoFillSel&&"Cell"===this.selectionSettings.mode&&e.target.classList.contains(Ha)){const t=e.target,i=parseInt(t.parentElement.getAttribute(sh),10),s=parseInt(t.getAttribute(ih),10);this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:i,cellIndex:s})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){const t=Ic(e.target,Ha);this.endAFCell=t||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,this.updateStartCellsIndex(),this.selectLikeAutoFill(e,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.isAutoFillSel=!1}Ae.l.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&Ae.l.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),Ae.l.remove(document,"mouseup",this.mouseUpHandler)}hideAutoFill(){this.autofill&&(this.autofill.style.display="none")}updateAutoFillPosition(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){const e=parseInt(this.target.getAttribute(ih),10),t=parseInt(this.target.getAttribute("index"),10),i=this.getAutoFillCells(this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,e).filter(e=>""===e.style.display),s=this.parent.getColumnByIndex(e),n="movable"===s.getFreezeTableName(),o=t<this.parent.frozenRows,r=this.parent.getFrozenMode()===Za&&s.getFreezeTableName()===eh;Object(Ae.hb)("#"+this.parent.element.id+"_autofill",Ic(this.target,Ya))||(Object(Ae.hb)("#"+this.parent.element.id+"_autofill",this.parent.element)&&Object(Ae.hb)("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=Object(Ae.D)("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",o?n?this.parent.headerModule.getMovableHeader().appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):n?this.parent.contentModule.getMovableContent().appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),r&&(o?this.parent.getFrozenRightHeader().appendChild(this.autofill):this.parent.getFrozenRightContent().appendChild(this.autofill)));const l=i[i.length-1];if(l&&l.offsetParent){const e=l.getBoundingClientRect(),t=l.offsetParent.getBoundingClientRect(),i=this.isLastCell(l)?4:0,s=this.isLastRow(l)?3:0;this.parent.enableRtl?this.autofill.style.right=t.right-e.right+e.width-4-i+"px":this.autofill.style.left=e.left-t.left+e.width-4-i+"px",this.autofill.style.top=e.top-t.top+e.height-5-s+"px"}this.autofill.style.display=""}else this.hideAutoFill()}mouseDownHandler(e){this.mouseButton=e.button;const t=e.target,i=this.parent;let s;const n=Ic(t,"e-grid");if(!(n&&n.id!==i.element.id||Ic(t,qa)&&!this.parent.frozenRows||Ic(t,"e-editedbatchcell")||Ic(t,$a))){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),Ic(t,Ha)&&!e.shiftKey&&!e.ctrlKey){if(i.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,s=!0;else if(i.allowRowDragAndDrop&&!i.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||Object(Ae.A)(t,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);s=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),i.getContent().appendChild(this.element)}s&&this.enableDrag(e,!0)}this.updateStartEndCells(),(t.classList.contains("e-autofill")||t.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e))}}updateStartEndCells(){const e=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(sh),10),this.startCellIndex=parseInt(Ic(this.startCell,Ha).getAttribute(ih),10))}updateStartCellsIndex(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(sh),10),this.startCellIndex=parseInt(Ic(this.startCell,Ha).getAttribute(ih),10))}enableDrag(e,t){const i=this.parent;if(t){const t=Object(Ae.A)(e.target,"tr");this.startDIndex=parseInt(t.getAttribute(sh),10),this.startDCellIndex=parseInt(Ic(e.target,Ha).getAttribute(ih),10)}document.body.classList.add("e-disableuserselect");const s=i.element.getBoundingClientRect(),n=Ac(e);this.x=n.x-s.left,this.y=n.y-s.top,Ae.l.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&Ae.l.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),Ae.l.add(document,"mouseup",this.mouseUpHandler,this)}clearSelAfterRefresh(e){"virtualscroll"===e.requestType||this.parent.isPersistSelection||this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType||this.clearSelection()}addEventListener(){this.parent.isDestroyed||(this.evtHandlers=[{event:fl,handler:this.enableAfterRender},{event:ml,handler:this.initializeSelection},{event:"rowselected",handler:this.onActionComplete},{event:"cellselected",handler:this.onActionComplete},{event:vl,handler:this.onPropertyChanged},{event:xl,handler:this.onCellFocused},{event:sa,handler:this.clearSelAfterRefresh},{event:Ml,handler:this.columnPositionChanged},{event:bl,handler:this.initialEnd},{event:zl,handler:this.rowsRemoved},{event:Ol,handler:this.refreshHeader},{event:kl,handler:this.destroy}],wd(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(_r,this.actionBeginFunction),this.parent.addEventListener(Ur,this.actionCompleteFunction),this.addEventListener_checkbox())}removeEventListener(){this.parent.isDestroyed||(wd(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(_r,this.actionBeginFunction),this.parent.removeEventListener(Ur,this.actionCompleteFunction),this.removeEventListener_checkbox())}wireEvents(){this.isMacOS=-1!==navigator.userAgent.indexOf("Mac OS"),this.isMacOS&&(Ae.l.add(this.parent.element,"keydown",this.keyDownHandler,this),Ae.l.add(this.parent.element,"keyup",this.keyUpHandler,this))}unWireEvents(){this.isMacOS&&(Ae.l.remove(this.parent.element,"keydown",this.keyDownHandler),Ae.l.remove(this.parent.element,"keyup",this.keyUpHandler))}columnPositionChanged(){this.parent.isPersistSelection||this.clearSelection()}refreshHeader(){this.setCheckAllState()}rowsRemoved(e){for(let t=0;t<e.records.length;t++)delete this.selectedRowState[e.records[t][this.primaryKey]],--this.totalRecordsCount;this.setCheckAllState()}beforeFragAppend(e){"virtualscroll"===e.requestType||this.parent.isPersistSelection||this.clearSelection()}getCheckAllBox(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")}enableAfterRender(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.initPerisistSelection())}render(e){Ae.l.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),Ae.l.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)}onPropertyChanged(e){if(e.module!==this.getModuleName())return;const t=this.parent;Object(Ae.T)(e.properties.type)||"Single"!==this.selectionSettings.type||(this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()),Object(Ae.T)(e.properties.mode)&&Object(Ae.T)(e.properties.cellSelectionMode)||(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection(),this.parent.getColumns().filter(e=>"checkbox"===e.type).length&&(t.isCheckBoxSelection=!("ResetOnRowClick"===this.selectionSettings.checkboxMode)),this.drawBorders()}hidePopUp(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")}initialEnd(e){const t=this.parent.isFrozenGrid(),i=this.parent.getFrozenMode()===Za;(!t||t&&!i&&!e.args.isFrozen||i&&e.args.renderFrozenRightContent)&&(this.parent.off(bl,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))}checkBoxSelectionChanged(){const e=this.parent;e.off(bl,this.checkBoxSelectionChanged);const t=e.getColumns().filter(e=>"checkbox"===e.type);t.length>0&&(e.isCheckBoxSelection=!0,this.chkField=t[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,Object(Ae.T)(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(e.selectionSettings.type="Multiple",e.dataBind()):this.initPerisistSelection()),e.isCheckBoxSelection||this.isPersisted||(this.chkField=null,this.initPerisistSelection())}initPerisistSelection(){const e=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(e.isPersistSelection=!1,this.selectedRowState={})}ensureCheckboxFieldSelection(){const e=this.parent;if(this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!e.enableVirtualization&&this.chkField&&(e.isPersistSelection&&0===Object.keys(this.selectedRowState).length||!e.isPersistSelection)){const e=this.parent.getDataModule(),t=(new _e.e).where(this.chkField,"equal",!0);t.params||(t.params=this.parent.query.params);const i=e.getData({},t),s=this;this.parent.showSpinner(),i.then(e=>{s.dataSuccess(e.result),s.refreshPersistSelection(),s.parent.hideSpinner()})}}dataSuccess(e){for(let t=0;t<e.length;t++)Object(Ae.T)(this.selectedRowState[e[t][this.primaryKey]])&&e[t][this.chkField]&&(this.selectedRowState[e[t][this.primaryKey]]=e[t][this.chkField]);this.persistSelectedData=e}setRowSelection(e){if(!this.parent.getDataModule().isRemote())if(e)if(this.parent.groupSettings.columns.length)for(const t of this.getData().records)this.selectedRowState[t[this.primaryKey]]=!0;else for(const t of this.getData())this.selectedRowState[t[this.primaryKey]]=!0;else this.selectedRowState={}}getData(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))}refreshPersistSelection(){let e=this.parent.getRows();if(this.parent.isCheckBoxSelection&&this.parent.isFrozenGrid()&&(this.parent.getMovableContentTbody().querySelector(".e-checkselect")&&(e=this.parent.getMovableRows()),this.parent.getFrozenMode()===Za&&this.parent.getFrozenRightContentTbody().querySelector(".e-checkselect")&&(e=this.parent.getFrozenRightRows())),this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),null!==e&&e.length>0&&(this.parent.isPersistSelection||this.chkField)){const t=[];for(let i=0;i<e.length;i++){const s=this.getRowObj(e[i]),n=s&&s.data?s.data[this.primaryKey]:null;if(null===n)return;let o;const r=e[i].querySelector(".e-checkselect");this.selectedRowState[n]||"Check"===this.parent.checkAllRows&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(n)<0||"Uncheck"===this.parent.checkAllRows&&this.chkAllCollec.indexOf(n)>0||"Intermediate"===this.parent.checkAllRows&&!Object(Ae.T)(this.chkField)&&s.data[this.chkField]?(t.push(parseInt(e[i].getAttribute(sh),10)),o=!0):(o=!1,this.checkedTarget!==r&&this.parent.isCheckBoxSelection&&Xc(r.nextElementSibling,o)),this.updatePersistCollection(e[i],o)}this.isSingleSel()&&t.length>0?this.selectRow(t[0],!0):this.selectRows(t)}this.parent.isCheckBoxSelection&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()}actionBegin(e){if("save"===e.requestType&&this.parent.isPersistSelection){const e=this.parent.element.querySelector(".e-edit-checkselect");if(!Object(Ae.T)(e)){let t=Object(Ae.A)(e,"."+$a);if(t){"Dialog"===this.parent.editSettings.mode&&(t=this.parent.element.querySelector(".e-dlgeditrow"));const i=this.getRowObj(t);if(!i)return;this.selectedRowState[i.data[this.primaryKey]]=i.isSelected=e.checked}else this.isCheckedOnAdd=e.checked}}}actionComplete(e){if("save"===e.requestType&&this.parent.isPersistSelection){if("add"===e.action&&this.isCheckedOnAdd){const t=this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));this.selectedRowState[t.data[this.primaryKey]]=t.isSelected=this.isCheckedOnAdd}this.refreshPersistSelection()}if("delete"===e.requestType&&this.parent.isPersistSelection){const t=e.data.slice();for(let e=0;e<t.length;e++)Object(Ae.T)(t[e][this.primaryKey])||this.updatePersistDelete(t[e][this.primaryKey]);this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}"paging"===e.requestType&&(this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0)}onDataBound(){if(!this.parent.enableVirtualization&&this.parent.isPersistSelection&&(this.selectedRecords.length&&(this.isPrevRowSelection=!0),this.refreshPersistSelection()),this.parent.enableVirtualization&&this.setCheckAllState(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){const e=this.parent.getRowsObject(),t=[];for(let i=0;i<e.length;i++)e[i].isSelected&&t.push(i);t.length&&this.selectRows(t),this.initialRowSelection=!0}}updatePersistSelectedData(e){if(this.parent.isPersistSelection){const t=this.parent.getRows();for(let i=0;i<t.length;i++)this.updatePersistCollection(t[i],e);"Uncheck"===this.parent.checkAllRows?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:[]):"Check"===this.parent.checkAllRows&&(this.setRowSelection(!0),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice())}}checkSelectAllAction(e){const t=this.getRenderer(),i=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),e&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(e),this.selectRowsByRange(t.getVirtualRowIndex(0),t.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(e),this.clearSelection()),this.chkAllCollec=[],!Object(Ae.T)(i)){const t=i.querySelector(".e-edit-checkselect");Object(Ae.T)(t)||Xc(t.nextElementSibling,e)}}checkSelectAll(e){const t=this.getCheckAllStatus(e);let i="Check"===t;this.isHeaderCheckboxClicked=!0,"Intermediate"===t&&(i=this.getCurrentBatchRecordChanges().some(e=>e[this.primaryKey]in this.selectedRowState)),this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!i),this.target=null,this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState(),this.triggerChkChangeEvent(e,!i)}getCheckAllStatus(e){const t=e?e.nextElementSibling.classList:this.getCheckAllBox().nextElementSibling.classList;let i;return i=t.contains("e-check")?"Check":t.contains("e-uncheck")?"Uncheck":t.contains("e-stop")?"Intermediate":"None",i}checkSelect(e){const t=Object(Ae.A)(this.checkedTarget,"."+Ha),i=this.parent;this.isMultiCtrlRequest=!0;let s=0;if(this.isHeaderCheckboxClicked=!1,ed(i)){const e=t.parentElement.getAttribute("data-uid");s=i.getRows().map(e=>e.getAttribute("data-uid")).indexOf(e)}else s=parseInt(t.parentElement.getAttribute(sh),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(Ja).length>0&&"Top"===this.parent.editSettings.newRowPosition&&++s,this.rowCellSelectionHandler(s,parseInt(t.getAttribute(ih),10)),this.moveIntoUncheckCollection(Object(Ae.A)(t,".e-row")),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(e,e.nextElementSibling.classList.contains("e-check"))}moveIntoUncheckCollection(e){if("Check"===this.parent.checkAllRows||"Uncheck"===this.parent.checkAllRows){const t=this.getRowObj(e),i=t&&t.data?t.data[this.primaryKey]:null;if(!i)return;this.chkAllCollec.indexOf(i)<0?this.chkAllCollec.push(i):this.chkAllCollec.splice(this.chkAllCollec.indexOf(i),1)}}triggerChkChangeEvent(e,t){this.parent.trigger("checkBoxChange",{checked:t,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:e}),this.parent.isEdit||(this.checkedTarget=null)}updateSelectedRowIndex(e){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.getDataModule().isRemote())if("Check"===this.parent.checkAllRows){this.selectedRowIndexes=[];const e=this.getData().length;for(let t=0;t<e;t++)this.selectedRowIndexes.push(t)}else if("Uncheck"===this.parent.checkAllRows)this.selectedRowIndexes=[];else{const t=this.parent.getRowByIndex(e);if(e&&t&&"false"===t.getAttribute("aria-selected")){const t=this.selectedRowIndexes.indexOf(e);this.selectedRowIndexes.splice(t,1)}}}setCheckAllState(e,t){if(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode){let i,s=Object.keys(this.selectedRowState).length;this.parent.isPersistSelection||(s=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length);const n=this.getCheckAllBox();if(n){const o=n.nextElementSibling;Object(Ae.eb)([o],["e-check","e-stop","e-uncheck"]),Kc(n,!1),n.indeterminate=!1,i||s===this.totalRecordsCount&&this.totalRecordsCount||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!this.parent.getDataModule().isRemote()&&this.getData().length&&s===this.getData().length?(Object(Ae.u)([o],["e-check"]),Kc(n,!0),t&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):!this.selectedRowIndexes.length||0===s&&0===this.getCurrentBatchRecordChanges().length?(Object(Ae.u)([o],["e-uncheck"]),t&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck",0===s&&0===this.getCurrentBatchRecordChanges().length?Object(Ae.u)([o.parentElement],["e-checkbox-disabled"]):Object(Ae.eb)([o.parentElement],["e-checkbox-disabled"])):(Object(Ae.u)([o],["e-stop"]),this.parent.checkAllRows="Intermediate",n.indeterminate=!0),!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling||this.parent.allowPaging||this.parent.getDataModule().isRemote()||this.updateSelectedRowIndex(e)}}}keyDownHandler(e){(("chrome"===Ae.d.info.name||"safari"===Ae.d.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===Ae.d.info.name&&17===e.keyCode||"mozilla"===Ae.d.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!0)}keyUpHandler(e){(("chrome"===Ae.d.info.name||"safari"===Ae.d.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===Ae.d.info.name&&17===e.keyCode||"mozilla"===Ae.d.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!1)}clickHandler(e){let t=e.target;this.actualTarget=t,this.selectionSettings.persistSelection&&(this.deSelectedData=jc(this.persistSelectedData)),(Ic(t,Xa)||Ic(t,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&t.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.isMultiShiftRequest=e.shiftKey,this.popUpClickHandler(e);let i,s=!1;this.preventFocus=!0;const n=Ic(t,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(n&&n.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&Ic(t,Xa)),n&&n.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(i=n.querySelector('input[type="checkbox"]'),s=!0),this.drawBorders(),this.updateAutoFillPosition(),t=Ic(t,Ha),(t&&t.parentElement.classList.contains(Xa)&&!this.parent.selectionSettings.checkboxOnly||s)&&!this.isRowDragSelected){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=t,Object(Ae.T)(i)){const i=this.parent;let s=0;if(ed(i)){const e=t.parentElement.getAttribute("data-uid");s=i.getRows().map(e=>e.getAttribute("data-uid")).indexOf(e)}else s=parseInt(t.parentElement.getAttribute(sh),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(Ja).length>0&&++s,this.mUPTarget&&this.mUPTarget.isEqualNode(t)||this.rowCellSelectionHandler(s,parseInt(t.getAttribute(ih),10)),this.parent.hoverFrozenRows(e),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(Object(Ae.A)(t,".e-row")),this.setCheckAllState())}else this.checkedTarget=i,i.classList.contains("e-checkselectall")?this.checkSelectAll(i):this.checkSelect(i);this.parent.isCheckBoxSelection||!Ae.d.isDevice||this.isSingleSel()||this.showPopup(e)}else if(e.target.classList.contains("e-headercell")&&!e.target.classList.contains("e-stackedheadercell")){const t=e.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");this.headerSelectionHandler(this.parent.getColumnIndexByUid(t))}this.isMultiCtrlRequest=!1,this.isMultiShiftRequest=!1,Object(Ae.T)(Object(Ae.A)(e.target,".e-unboundcell"))&&(this.preventFocus=!1)}popUpClickHandler(e){const t=e.target;Object(Ae.A)(t,".e-headercell")||e.target.classList.contains(Ha)||Object(Ae.A)(t,".e-gridpopup")?t.classList.contains("e-rowselect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"}showPopup(e){this.selectionSettings.enableSimpleMultiRowSelection||function(e,t,i){const s=e.querySelector("span"),n=e.parentElement.getBoundingClientRect(),o=t.target.getBoundingClientRect();s.className=i,e.style.display="";const r=(Object(Ae.T)(t.clientY)?t.changedTouches[0].clientY:t.clientY)>e.offsetHeight+10;e.style.top=o.top-n.top+(r?-(e.offsetHeight+10):e.offsetHeight+10)+"px",e.style.left=function(e,t,i,s){const n=e.offsetWidth/2,o=Ac(t).x;return o-i.left<n?i.left-s:i.right-o<n?i.right-s-2*n:o-s-n}(e,t,o,n.left)+"px",r?(e.querySelector(".e-downtail").style.display="",e.querySelector(".e-uptail").style.display="none"):(e.querySelector(".e-downtail").style.display="none",e.querySelector(".e-uptail").style.display="")}(this.parent.element.querySelector(".e-gridpopup"),e,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>(this.parent.getFrozenColumns()?2:1)||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))}rowCellSelectionHandler(e,t){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?(this.isDragged||this.selectRow(e,this.selectionSettings.enableToggle),this.selectCell({rowIndex:e,cellIndex:t},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders()):this.isMultiShiftRequest?(this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!Object(Ae.A)(this.target,"."+Ha).classList.contains(Qa)?this.selectRowsByRange(Object(Ae.W)(this.prevRowIndex)?e:this.prevRowIndex,e):this.addRowsToSelection([e]),this.selectCellsByRange(Object(Ae.W)(this.prevCIdxs)?{rowIndex:e,cellIndex:t}:this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.updateAutoFillPosition(),this.drawBorders()):(this.addRowsToSelection([e]),this.addCellsToSelection([{rowIndex:e,cellIndex:t}]),this.showHideBorders("none")),this.isDragged=!1}onCellFocused(e){if(this.parent.frozenRows&&e.container.isHeader&&e.byKey)if("upArrow"===e.keyArgs.action)e.isJump=this.parent.allowFiltering?"INPUT"===e.element.tagName:"TH"===e.element.tagName;else if("downArrow"===e.keyArgs.action){const t=Number(e.element.parentElement.getAttribute(sh));e.isJump=0===t}else"ctrlHome"===e.keyArgs.action&&(e.isJump=!0);const t=this.parent.isFrozenGrid()?(e.container.isHeader&&"TD"!==e.element.tagName&&e.isJump&&!this.selectionSettings.allowColumnSelection||(e.container.isContent||"TD"===e.element.tagName)&&!(e.container.isSelectable||"TD"===e.element.tagName))&&!(e.byKey&&"space"===e.keyArgs.action):(e.container.isHeader&&e.isJump||e.container.isContent&&!e.container.isSelectable)&&!(e.byKey&&"space"===e.keyArgs.action)&&!(e.element.classList.contains("e-detailrowexpand")||e.element.classList.contains("e-detailrowcollapse")),i=e.container.isHeader&&"TD"!==e.element.tagName&&!Object(Ae.A)(e.element,"."+Ha)&&!(e.byKey&&"space"===e.keyArgs.action);if(!e.byKey||t)return void(t&&!this.parent.isCheckBoxSelection&&this.clearSelection());let[s,n]=e.container.isContent?e.container.indexes:e.indexes;const o=this.focus.getPrevIndexes();if(this.parent.frozenRows)if(e.container.isHeader&&("TD"===e.element.tagName||Object(Ae.A)(e.element,"."+Ha))){const e=this.parent.getHeaderTable().querySelector("thead").childElementCount;s-=e,o.rowIndex=Object(Ae.T)(o.rowIndex)?null:o.rowIndex-e}else s+=this.parent.frozenRows,o.rowIndex=0!==o.rowIndex&&Object(Ae.T)(o.rowIndex)?null:o.rowIndex+this.parent.frozenRows;if(this.parent.isFrozenGrid()){const t=Number(e.element.getAttribute(ih)),i=this.parent.getSelectedRowCellIndexes();i.length&&0===o.cellIndex&&(o.cellIndex=i[i.length-1].cellIndexes[0]),o.cellIndex=Object(Ae.T)(o.cellIndex)?null:o.cellIndex===n?t:t-1,n=t}if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(s=parseInt(e.element.parentElement.getAttribute("aria-rowindex"),10)),(i||-1===["ctrlPlusA","escape"].indexOf(e.keyArgs.action)&&"space"!==e.keyArgs.action&&s===o.rowIndex&&n===o.cellIndex)&&!this.selectionSettings.allowColumnSelection)return;this.preventFocus=!0;const r=this.getKeyColIndex(e);switch(this.needColumnSelection&&(n=r),e.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=e.element,this.isKeyAction=!0,this.applyDownUpKey(s,n);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(s,n);break;case"shiftDown":case"shiftUp":this.shiftDownKey(s,n);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(s,n);break;case"home":case"end":n="end"===e.keyArgs.action?this.getLastColIndex(s):0,this.applyHomeEndKey(s,n);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(s,n);break;case"escape":this.clearSelection();break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(e.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(s)}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.updateAutoFillPosition()}getKeyColIndex(e){let t,i=null;const s=e.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&Ic(e.element,"e-columnheader"))if(this.needColumnSelection=!!e.container.isHeader,s){if("rightArrow"===e.keyArgs.action||"leftArrow"===e.keyArgs.action)return i;t=s.getAttribute("e-mappinguid");const n=this.getstackedColumns(this.parent.getColumnByUid(t).columns),o=this.parent.getColumnIndexByUid(n[n.length-1].uid),r=this.parent.getColumnIndexByUid(n[0].uid);i=this.prevColIndex>=o?r:o}else i=this.parent.getColumnIndexByUid(e.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));return i}ctrlPlusA(){this.isRowType()&&!this.isSingleSel()&&this.selectRowsByRange(0,this.getCurrentBatchRecordChanges().length-1),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})}applySpaceSelection(e){e.classList.contains("e-checkselectall")?(this.checkedTarget=e,this.checkSelectAll(this.checkedTarget)):e.classList.contains("e-checkselect")&&(this.checkedTarget=e,this.checkSelect(this.checkedTarget))}applyDownUpKey(e,t){const i=this.parent;this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&!this.selectionSettings.persistSelection&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&(this.selectRow(e,!0),this.applyUpDown(i.selectedRowIndex)),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(t)}applyUpDown(e){if(e<0)return;this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);const t=parseInt(this.target.getAttribute(ih),10),i=this.parent.getFrozenColumns();if(i)this.target=t>=i?this.contentRenderer.getMovableRowByIndex(e).getElementsByClassName(Ha)[t-i]:this.contentRenderer.getRowByIndex(e).getElementsByClassName(Ha)[t];else{const i=this.contentRenderer.getRowByIndex(e);i&&(this.target=i.getElementsByClassName(Ha)[t])}this.addAttribute(this.target)}applyRightLeftKey(e,t){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(t):this.isCellType()&&(this.selectCell({rowIndex:e,cellIndex:t},!0),this.addAttribute(this.target))}applyHomeEndKey(e,t){this.isCellType()?this.selectCell({rowIndex:e,cellIndex:t},!0):this.addAttribute(this.parent.getCellFromIndex(e,t))}shiftDownKey(e,t){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(Object(Ae.W)(this.prevRowIndex)?this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,e),this.applyUpDown(e))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1}applyShiftLeftRightKey(e,t){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,t):this.selectCellsByRange(this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1}getstackedColumns(e){const t=[];for(let i=0,s=e.length;i<s;i++)e[i].columns?this.getstackedColumns(e[i].columns):t.push(e[i]);return t}applyCtrlHomeEndKey(e,t){this.isRowType()&&(this.selectRow(e,!0),this.addAttribute(this.parent.getCellFromIndex(e,t))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)}addRemoveClassesForRow(e,t,i,...s){if(e){const i=[].slice.call(e.getElementsByClassName(Ha)),n=e.querySelector(".e-detailrowcollapse")||e.querySelector(".e-detailrowexpand"),o=e.querySelector(".e-rowdragdrop");n&&i.push(n),o&&i.push(o),Uc(i,t,...s)}this.getRenderer().setSelection(e?e.getAttribute("data-uid"):null,t,i)}isRowType(){return"Row"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode}isCellType(){return"Cell"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode}isSingleSel(){return"Single"===this.selectionSettings.type}getRenderer(){return Object(Ae.T)(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(Fa.Content)),this.contentRenderer}getSelectedRecords(){let e=[];return e=this.selectionSettings.persistSelection?this.persistSelectedData:this.parent.getRowsObject().filter(e=>e.isSelected).map(e=>e.data),e}selectColumn(e){const t=this.parent;if(Object(Ae.T)(t.getColumns()[e]))return;const i=t.getColumnByIndex(e),s=t.getColumnHeaderByUid(i.uid),n=s.classList.contains("e-columnselection");if(!t.selectionSettings.allowColumnSelection)return;const o=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(e)>-1;if(this.clearColDependency(),!n||!this.selectionSettings.enableToggle||o){const r={columnIndex:e,headerCell:s,column:i,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(r,sl),r.cancel)return void this.disableInteracted();t.selectionSettings.enableToggle&&e===this.prevColIndex&&n&&!o||this.updateColSelection(s,e),this.onActionComplete({columnIndex:e,headerCell:s,column:i,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex},nl)}this.updateColProps(e)}selectColumnsByRange(e,t){const i=this.parent;if(Object(Ae.T)(i.getColumns()[e]))return;const s=[];if("Single"===i.selectionSettings.type||Object(Ae.T)(t))s[0]=e;else{const i=e<t;for(let n=e;i?n<=t:n>=t;i?n++:n--)s.push(n)}this.selectColumns(s)}selectColumns(e){const t=this.parent;let i=this.getselectedCols();if("Single"===t.selectionSettings.type&&(e=[e[0]]),!t.selectionSettings.allowColumnSelection)return;this.clearColDependency();const s={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(s,sl),s.cancel)return void this.disableInteracted();for(let o=0,r=e.length;o<r;o++)this.updateColSelection(t.getColumnHeaderByUid(t.getColumnByIndex(e[o]).uid),e[o]);i=this.getselectedCols();const n={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(n,nl),this.updateColProps(e[0])}selectColumnWithExisting(e){const t=this.parent;if(Object(Ae.T)(t.getColumns()[e]))return;const i=t.getColumnHeaderByUid(t.getColumnByIndex(e).uid);let s=this.getselectedCols();if("Single"===t.selectionSettings.type&&this.clearColDependency(),t.selectionSettings.allowColumnSelection){if(this.selectedColumnsIndexes.indexOf(e)>-1)this.clearColumnSelection(e);else{const n={columnIndex:e,headerCell:s,columnIndexes:this.selectedColumnsIndexes,column:t.getColumnByIndex(e),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(n,sl),n.cancel)return void this.disableInteracted();this.updateColSelection(i,e),s=this.getselectedCols();const o={columnIndex:e,headerCell:s,column:t.getColumnByIndex(e),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(o,nl)}this.updateColProps(e)}}clearColumnSelection(e){if(this.isColumnSelected){const t=this.parent;if(!Object(Ae.T)(e)&&-1===this.selectedColumnsIndexes.indexOf(e))return;const i=Object(Ae.T)(e)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:e,s=t.getColumnByIndex(i);let n;const o=t.getColumnByIndex(i);n=s.getFreezeTableName()===eh?t.getFrozenRightColumnHeaderByIndex(i):"movable"===s.getFreezeTableName()?t.getMovableColumnHeaderByIndex(i):t.getColumnHeaderByUid(o.uid);const r={columnIndex:i,headerCell:n,columnIndexes:this.selectedColumnsIndexes,column:o,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted};if(this.columnDeselect(r,"columnDeselecting"))return void this.disableInteracted();const l=Object(Ae.T)(e)?[].slice.call(t.getHeaderContent().getElementsByClassName("e-columnselection")):[n],a=this.getSelectedColumnCells(e);for(let e=0,h=l.length;e<h;e++)Uc([l[e]],!1,"e-columnselection");for(let e=0,h=a.length;e<h;e++)Uc([a[e]],!1,"e-columnselection");Object(Ae.T)(e)?(this.columnDeselect(r,"columnDeselected"),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(e=>e.isSelected=!1)):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(e),1),this.parent.getColumns()[e].isSelected=!1)}}getselectedCols(){const e=this.parent;let t;if(this.selectedColumnsIndexes.length>1){t=[];for(let i=0;i<this.selectedColumnsIndexes.length;i++)t.push(e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[i]).uid))}else t=e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return t}getSelectedColumnCells(e){const t=this.parent,i=!Object(Ae.T)(this.parent.rowTemplate);let s,n,o=i?t.getRows():t.getDataRows();t.isFrozenGrid()&&t.getContent().querySelector("."+Wa)&&(s=i?t.getMovableRows():t.getMovableDataRows(),o=t.addMovableRows(o,s),t.getFrozenMode()===Za&&(n=i?t.getFrozenRightRows():t.getFrozenRightDataRows(),o=t.addMovableRows(o,n)));let r=[];const l=Object(Ae.T)(e)?".e-columnselection":'[aria-colindex="'+e+'"]';for(let a=0,h=o.length;a<h;a++)r=r.concat([].slice.call(o[a].querySelectorAll(l)));return r}columnDeselect(e,t){return"columnDeselected"===t&&delete e.cancel,this.onActionComplete(e,t),e.cancel}updateColProps(e){this.prevColIndex=e,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0}clearColDependency(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]}updateColSelection(e,t){if(Object(Ae.T)(this.parent.getColumns()[t]))return;const i=this.parent.getFrozenLeftCount(),s=this.parent.getMovableColumnsCount(),n=this.parent.getColumnByIndex(t),o=!Object(Ae.T)(this.parent.rowTemplate);let r;this.selectedColumnsIndexes.push(t),this.parent.getColumns()[t].isSelected=!0,n.getFreezeTableName()===eh?(t-=i+s,r=o?this.parent.getFrozenRightRows():this.parent.getFrozenRightDataRows()):"movable"===n.getFreezeTableName()?(t-=i,r=o?this.parent.getMovableRows():this.parent.getMovableDataRows()):(t+=this.parent.getIndentCount(),r=o?this.parent.getRows():this.parent.getDataRows()),Uc([e],!0,"e-columnselection");for(let l=0,a=r.length;l<a;l++)r[l].classList.contains(Xa)&&(!r[l].classList.contains($a)&&!r[l].classList.contains(Ja)||"Normal"!==this.parent.editSettings.mode||Object(Ae.T)(r[l].querySelector("tr").childNodes[t])?Object(Ae.T)(r[l].childNodes[t])||Uc([r[l].childNodes[t]],!0,"e-columnselection"):Uc([r[l].querySelector("tr").childNodes[t]],!0,"e-columnselection"))}headerSelectionHandler(e){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(e):this.isMultiShiftRequest?this.selectColumnsByRange(Object(Ae.W)(this.prevColIndex)?e:this.prevColIndex,e):this.selectColumnWithExisting(e)}addEventListener_checkbox(){this.parent.on(gl,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(Yr,this.onDataBoundFunction),this.parent.on(ka,this.onDataBoundFunction),this.parent.on(bl,this.checkBoxSelectionChanged,this),this.parent.on(Oa,this.initPerisistSelection,this),this.parent.on(yl,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(Ur,this.actionCompleteFunc),this.parent.on(Dl,this.clickHandler,this),this.resizeEndFn=()=>{this.updateAutoFillPosition(),this.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener("resizeStop",this.resizeEndFn)}removeEventListener_checkbox(){this.parent.off(gl,this.dataReady),this.parent.removeEventListener(Yr,this.onDataBoundFunction),this.parent.removeEventListener(Ur,this.actionCompleteFunc),this.parent.off(ka,this.onDataBoundFunction),this.parent.off(yl,this.setCheckAllForEmptyGrid),this.parent.off(Dl,this.clickHandler),this.parent.off(Oa,this.initPerisistSelection)}setCheckAllForEmptyGrid(){const e=this.getCheckAllBox();if(e){this.parent.isCheckBoxSelection=!0;const t=e.nextElementSibling;Object(Ae.eb)([t],["e-check","e-stop","e-uncheck"])}}dataReady(e){this.isHeaderCheckboxClicked=!1,"virtualscroll"===e.requestType||this.parent.isPersistSelection||this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType||(this.disableUI=!this.parent.enableImmutableMode,this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)}actionCompleteHandler(e){"save"===e.requestType&&this.parent.isPersistSelection&&this.refreshPersistSelection()}selectRowIndex(e){this.parent.isSelectedRowIndexUpdating=!0,this.parent.selectedRowIndex=e}disableInteracted(){this.isInteracted=!1}activeTarget(){this.actualTarget=this.isInteracted?this.actualTarget:null}}class Zh{constructor(e){this.parent=e,this.addEventListener()}search(e){const t=this.parent;e=Object(Ae.T)(e)?"":e,function(e){const t=Object(Ae.hb)("#"+e.element.id+"EditConfirm",e.element);return"Batch"===e.editSettings.mode&&Object(Ae.ib)(".e-updatedtd",e.element).length&&e.editSettings.showConfirmDialog&&(!t||t.classList.contains("e-popup-close"))}(t)?t.notify(Gl,{instance:this,handler:this.search,arg1:e}):e!==t.searchSettings.key?(t.searchSettings.key=e.toString(),t.dataBind()):this.refreshSearch&&t.refresh()}addEventListener(){this.parent.isDestroyed||(this.parent.on(vl,this.onPropertyChanged,this),this.parent.on(Sl,this.onSearchComplete,this),this.parent.on(kl,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(Ur,this.actionCompleteFunc),this.parent.on(la,this.cancelBeginEvent,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(vl,this.onPropertyChanged),this.parent.off(Sl,this.onSearchComplete),this.parent.off(kl,this.destroy),this.parent.removeEventListener(Ur,this.actionCompleteFunc),this.parent.off(la,this.cancelBeginEvent))}destroy(){this.removeEventListener()}onPropertyChanged(e){e.module===this.getModuleName()&&(Object(Ae.T)(e.properties.key)?this.parent.notify(Cl,{requestType:"searching",type:_r}):this.parent.notify(Cl,{requestType:"searching",type:_r,searchString:this.parent.searchSettings.key}))}onSearchComplete(e){this.parent.trigger(Ur,Object(Ae.G)(e,{searchString:this.parent.searchSettings.key,requestType:"searching",type:Ur}))}onActionComplete(e){this.refreshSearch="searching"!==e.requestType}cancelBeginEvent(e){"searching"===e.requestType&&this.parent.setProperties({searchSettings:{key:""}},!0)}getModuleName(){return"search"}}class ec{constructor(e){this.parent=e}show(e,t){const i=this.getToggleFields(e),s=this.getColumns(i,t);this.parent.notify(ql,{module:"edit"});for(let n=0;n<s.length;n++)s[n].visible=!0;this.setVisible(s)}hide(e,t){const i=this.getToggleFields(e),s=this.getColumns(i,t);this.parent.notify(ql,{module:"edit"});for(let n=0;n<s.length;n++)s[n].visible=!1;this.setVisible(s)}getToggleFields(e){let t=[];return t="string"==typeof e?[e]:e,t}getColumns(e,t){return Tc(e,e=>Tc(this.parent.columnModel,i=>{if(i[t]===e)return i})[0])}setVisible(e,t=[]){this.parent.trigger(_r,{requestType:"columnstate",cancel:!1,columns:t=t.length>0?t:e},i=>{const s=this.parent.getColumns();if(e=Object(Ae.T)(e)?s:e,i.cancel)return this.parent.notify("reset-columns",{showHideArgs:i}),void(e.length>0&&(e[0].visible=!0));ed(this.parent)&&this.parent.contentModule.emptyVcRows(),this.parent.allowSelection&&this.parent.getSelectedRecords().length&&!this.parent.selectionSettings.persistSelection&&this.parent.clearSelection(),this.parent.enableColumnVirtualization?e.filter(e=>s.some(t=>e.field===t.field)).length&&this.parent.notify(Il,e):this.parent.notify(Il,e),this.parent.trigger(Ur,{requestType:"columnstate",columns:t}),"All"!==this.parent.columnQueryMode&&this.parent.refresh()})}}class tc{constructor(e){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.widthService=new Ph(e),this.addEventListener()}getModuleName(){return"scroll"}setWidth(e){this.parent.element.style.width=Object(Ae.H)(this.parent.width),e&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element&&this.parent.toolbarModule.toolbar.refreshOverflow()}setHeight(){let e=0;const t=this.parent.getContent().querySelector(".e-content");let i=this.parent.height;if(this.parent.isFrozenGrid()&&"auto"!==this.parent.height&&this.parent.height.toString().indexOf("%")<0&&(i=parseInt(i,10)-tc.getScrollBarWidth()),!this.parent.enableVirtualization&&this.parent.frozenRows&&"auto"!==this.parent.height){const s=this.parent.getHeaderContent().querySelector(nh);e=s?s.offsetHeight:0,s&&e&&(e-=s.getElementsByClassName(Ja).length*this.parent.getRowHeight()),t.style.height=Object(Ae.H)(i-e)}else t.style.height=Object(Ae.H)(i);this.ensureOverflow(t),this.parent.isFrozenGrid()&&this.refresh()}setPadding(){const e=this.parent.getHeaderContent(),t=tc.getScrollBarWidth()-this.getThreshold(),i=this.getCssProperties(),s="Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Za?"0.5px":"1px";e.querySelector("."+qa).style[i.border]=t>0?s:"0px",e.style[i.padding]=t>0?t+"px":"0px"}removePadding(e){const t=this.getCssProperties(e),i=this.parent.getHeaderContent().querySelector("."+qa);i.style[t.border]="",i.parentElement.style[t.padding]="";const s=this.parent.getFooterContent();s&&s.classList.contains("e-footerpadding")&&s.classList.remove("e-footerpadding")}refresh(){if("100%"!==this.parent.height)return;const e=this.parent.getContent();this.parent.element.style.height="100%";const t=this.widthService.getSiblingsHeight(e);e.style.height="calc(100% - "+t+"px)",this.parent.isFrozenGrid()&&(e.firstElementChild.style.height="calc(100% - "+Vc()+"px)")}getThreshold(){return"mozilla"===Ae.d.info.name?.5:1}addEventListener(){this.parent.isDestroyed||(this.parent.on(yl,this.wireEvents,this),this.parent.on(bl,this.wireEvents,this),this.parent.on(fl,this.onPropertyChanged,this),this.parent.on(oa,this.wireEvents,this),this.parent.on(Ol,this.setScrollLeft,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(yl,this.wireEvents),this.parent.off(bl,this.wireEvents),this.parent.off(fl,this.onPropertyChanged),this.parent.off(oa,this.wireEvents),this.parent.off(Ol,this.setScrollLeft))}setScrollLeft(){this.parent.isFrozenGrid()?this.parent.headerModule.getMovableHeader().scrollLeft=this.previousValues.left:this.parent.getHeaderContent().querySelector("."+qa).scrollLeft=this.previousValues.left}onFrozenContentScroll(){return e=>{null===this.content.querySelector(nh)||this.parent.isPreventScrollEvent||(!Object(Ae.T)(this.parent.infiniteScrollModule)&&this.parent.enableInfiniteScrolling&&this.parent.notify(ya,e),this.previousValues.top=e.target.scrollTop)}}onContentScroll(e){const t=e,i=t.classList.contains(qa);return e=>{if(null===this.content.querySelector(nh)||this.parent.isPreventScrollEvent)return;const s=e.target,n=s.scrollLeft;if(!Object(Ae.T)(this.parent.infiniteScrollModule)&&this.parent.enableInfiniteScrolling&&this.parent.notify(ya,{target:e.target,isLeft:this.previousValues.left!==n}),this.parent.groupSettings.columns.length&&this.parent.groupSettings.enableLazyLoading){const e=this.previousValues.top<this.parent.getContent().firstElementChild.scrollTop;this.parent.notify("lazy-load-scroll-handler",{scrollDown:e})}this.parent.notify("virtual-scroll-edit",{});const o=s.classList.contains("e-summarycontent");this.previousValues.left!==n?(this.parent.notify("close-filter-dialog",e),t.scrollLeft=n,o&&(this.header.scrollLeft=n),this.previousValues.left=n,this.parent.notify(Fl,{left:n})):this.previousValues.top=i?s.scrollTop:this.previousValues.top}}onCustomScrollbarScroll(e,t){const i=e,s=t;return e=>{if(null===this.content.querySelector(nh))return;const t=e.target.scrollLeft;this.previousValues.left!==t&&(i.scrollLeft=t,s.scrollLeft=t,this.previousValues.left=t,this.parent.notify(Fl,{left:t}))}}onTouchScroll(e){const t=e;return e=>{if("mouse"===e.pointerType)return;const i=this.parent.isFrozenGrid(),s=this.getPointXY(e),n=t.scrollLeft+(this.pageXY.x-s.x),o=i?this.parent.getHeaderContent().querySelector("."+Ga):this.parent.getHeaderContent().querySelector("."+qa),r=i?this.parent.getContent().querySelector("."+Wa):this.parent.getContent().querySelector(".e-content");this.previousValues.left===n||n<0||o.scrollWidth-o.clientWidth<n||(e.preventDefault(),o.scrollLeft=n,r.scrollLeft=n,i&&(this.parent.getContent().querySelector(".e-movablescrollbar").scrollLeft=n),this.pageXY.x=s.x,this.previousValues.left=n)}}setPageXY(){return e=>{"mouse"!==e.pointerType&&(this.pageXY=this.getPointXY(e))}}getPointXY(e){const t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t}getScrollbleParent(e){if(null===e)return null;const t=Object(Ae.T)(e.tagName)?e.scrollingElement:e,i=document.defaultView.getComputedStyle(t,null).overflowY;return t.scrollHeight>t.clientHeight&&"hidden"!==i&&"visible"!==i||"HTML"===e.tagName||"BODY"===e.tagName?e:this.getScrollbleParent(e.parentNode)}addStickyListener(e){e?(this.parentElement=this.getScrollbleParent(this.parent.element.parentElement),this.parentElement&&Ae.l.add("HTML"===this.parentElement.tagName||"BODY"===this.parentElement.tagName?document:this.parentElement,"scroll",this.makeStickyHeader,this)):Ae.l.remove(this.parentElement,"scroll",this.makeStickyHeader)}wireEvents(){if(this.oneTimeReady){const e=this.parent.isFrozenGrid();this.content=this.parent.getContent().querySelector(".e-content"),this.header=this.parent.getHeaderContent().querySelector("."+qa);const t=this.content.querySelector("."+Wa),i=this.header.querySelector("."+Ga),s=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.frozenRows&&(Ae.l.add(e?i:this.header,"touchstart pointerdown",this.setPageXY(),this),Ae.l.add(e?i:this.header,"touchmove pointermove",this.onTouchScroll(e?t:this.content),this)),this.parent.isFrozenGrid()?(Ae.l.add(s,"scroll",this.onCustomScrollbarScroll(t,i),this),Ae.l.add(t,"scroll",this.onCustomScrollbarScroll(s,i),this),Ae.l.add(i,"scroll",this.onCustomScrollbarScroll(s,t),this),Ae.l.add(this.content,"scroll",this.onFrozenContentScroll(),this),Ae.l.add(i,"touchstart pointerdown",this.setPageXY(),this),Ae.l.add(i,"touchmove pointermove",this.onTouchScroll(t),this),Ae.l.add(t,"touchstart pointerdown",this.setPageXY(),this),Ae.l.add(t,"touchmove pointermove",this.onTouchScroll(i),this)):(Ae.l.add(this.content,"scroll",this.onContentScroll(this.header),this),Ae.l.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.aggregates.length&&Ae.l.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}const e=this.parent.getContentTable();let t,i,s;Sc(()=>{t=this.header.scrollLeft,i=e.scrollHeight,s=this.parent.getContent().clientHeight},()=>{const n={cancel:!1};this.parent.notify("check-scroll-reset",n),this.parent.enableVirtualization||this.parent.enableInfiniteScrolling||(i<s&&(Object(Ae.u)(e.querySelectorAll("tr:last-child td"),"e-lastrowcell"),this.parent.isFrozenGrid()&&Object(Ae.u)(this.parent.getContent().querySelector("."+Wa).querySelectorAll("tr:last-child td"),"e-lastrowcell")),n.cancel||((this.parent.frozenRows>0||this.parent.isFrozenGrid())&&this.header.querySelector("."+Ga)?this.header.querySelector("."+Ga).scrollLeft=this.previousValues.left:this.header.scrollLeft=this.previousValues.left,this.content.scrollLeft=this.previousValues.left,this.content.scrollTop=this.previousValues.top)),this.parent.enableColumnVirtualization||(this.content.scrollLeft=t),this.parent.isFrozenGrid()&&this.header.querySelector("."+Ga)&&(this.header.querySelector("."+Ga).scrollLeft=this.content.querySelector("."+Wa).scrollLeft)}),this.parent.isPreventScrollEvent=!1}getCssProperties(e){const t={},i=Object(Ae.T)(e)?this.parent.enableRtl:e;return t.border=i?"borderLeftWidth":"borderRightWidth",t.padding=i?"paddingLeft":"paddingRight",t}ensureOverflow(e){e.style.overflowY="auto"===this.parent.height?"auto":"scroll"}onPropertyChanged(e){e.module===this.getModuleName()&&(this.setPadding(),this.oneTimeReady=!0,"auto"===this.parent.height&&this.removePadding(),this.wireEvents(),this.setHeight(),this.setWidth(!Object(Ae.T)(e.properties.width)))}makeStickyHeader(){if(this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()){const e=this.parent.getContent().getClientRects()[0];if(e){const t=this.parent.getHeaderContent(),i=this.parent.element.querySelector(".e-toolbar"),s=this.parent.element.querySelector(".e-groupdroparea"),n=t.offsetHeight+(i?i.offsetHeight:0)+(s?s.offsetHeight:0),o=this.parentElement.getClientRects()[0].top,r=e.left;if(e.top-(o<0?0:o)<n&&e.bottom>0){t.classList.add("e-sticky");let n=0;s&&(this.setSticky(s,n,e.width,r,!0),n+=s.getClientRects()[0].height),i&&(this.setSticky(i,n,e.width,r,!0),n+=i.getClientRects()[0].height),this.setSticky(t,n,e.width,r,!0)}else if(t.classList.contains("e-sticky")){this.setSticky(t,null,null,null,!1),i&&this.setSticky(i,null,null,null,!1),s&&this.setSticky(s,null,null,null,!1);const e=this.parent.element.querySelector(".e-ccdlg");e&&e.classList.remove("e-sticky")}this.parent.notify("sticky-scroll-complete",{})}}}setSticky(e,t,i,s,n){n?(e.style.width=i+"px",e.classList.add("e-sticky")):e.classList.remove("e-sticky"),e.style.top=null!=t?t+"px":"",e.style.left=null!==s?parseInt(e.style.left,10)!==s?s+"px":e.style.left:""}destroy(){const e=this.parent.element;if(!e||!e.querySelector(".e-gridheader")&&!e.querySelector("."+Va))return;this.removeEventListener(),this.removePadding();const t=this.parent.getContent().querySelector(".e-content");Object(Ae.eb)([this.parent.getHeaderContent().querySelector("."+qa)],qa),Object(Ae.eb)([t],Ka),t.style.height="",this.parent.element.style.width="",Ae.l.remove(t,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1)}static getScrollBarWidth(){return Vc()}}var ic=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let sc=(()=>{class e extends Ae.e{constructor(){super(...arguments),this.templateFn={}}setFormatter(e){this.formatFn=e}getFormatter(){return this.formatFn}setTemplate(e={}){void 0!==this.footerTemplate&&(this.templateFn[Object(Ae.L)(Ia,Ia.Summary)]={fn:Object(Ae.C)(this.footerTemplate,e),property:"footerTemplate"}),void 0!==this.groupFooterTemplate&&(this.templateFn[Object(Ae.L)(Ia,Ia.GroupSummary)]={fn:Object(Ae.C)(this.groupFooterTemplate,e),property:"groupFooterTemplate"}),void 0!==this.groupCaptionTemplate&&(this.templateFn[Object(Ae.L)(Ia,Ia.CaptionSummary)]={fn:Object(Ae.C)(this.groupCaptionTemplate,e),property:"groupCaptionTemplate"})}getTemplate(e){return this.templateFn[Object(Ae.L)(Ia,e)]}setPropertiesSilent(e){this.setProperties(e,!0)}}return ic([Object(Ae.r)()],e.prototype,"type",void 0),ic([Object(Ae.r)()],e.prototype,"field",void 0),ic([Object(Ae.r)()],e.prototype,"columnName",void 0),ic([Object(Ae.r)()],e.prototype,"format",void 0),ic([Object(Ae.r)()],e.prototype,"footerTemplate",void 0),ic([Object(Ae.r)()],e.prototype,"groupFooterTemplate",void 0),ic([Object(Ae.r)()],e.prototype,"groupCaptionTemplate",void 0),ic([Object(Ae.r)()],e.prototype,"customAggregate",void 0),e})(),nc=(()=>{class e extends Ae.e{}return ic([Object(Ae.f)([],sc)],e.prototype,"columns",void 0),e})();class oc{constructor(e){this.copyContent="",this.isSelect=!1,this.parent=e,this.addEventListener()}addEventListener(){this.parent.isDestroyed||(this.parent.on(bl,this.initialEnd,this),this.parent.on(Rl,this.keyDownHandler,this),this.parent.on(Dl,this.clickHandler,this),Ae.l.add(this.parent.element,"keydown",this.pasteHandler,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(Rl,this.keyDownHandler),this.parent.off(bl,this.initialEnd),this.parent.off(Dl,this.clickHandler),Ae.l.remove(this.parent.element,"keydown",this.pasteHandler))}clickHandler(e){let t=e.target;t=Ic(t,"e-rowcell")}pasteHandler(e){const t=this.parent,i=/(Mac)/i.test(navigator.platform);if(67===e.keyCode&&i&&e.metaKey&&!t.isEdit&&this.copy(),86===e.keyCode&&(e.ctrlKey||i&&e.metaKey)&&!t.isEdit){if(!Object(Ae.A)(document.activeElement,"."+Ha)||!t.editSettings.allowEditing||"Batch"!==t.editSettings.mode||"Cell"!==t.selectionSettings.mode||"Flow"===t.selectionSettings.cellSelectionMode)return;this.activeElement=document.activeElement,this.clipBoardTextArea.value="";const e=window.scrollX,i=window.scrollY;this.clipBoardTextArea.focus(),setTimeout(()=>{this.activeElement.focus(),window.scrollTo(e,i),this.paste(this.clipBoardTextArea.value,this.parent.getSelectedRowCellIndexes()[0].rowIndex,this.parent.getSelectedRowCellIndexes()[0].cellIndexes[0])},10)}}paste(e,t,i){const s=this.parent;let n,o,r,l=i,a=t;if(!s.editSettings.allowEditing||"Batch"!==s.editSettings.mode||"Cell"!==s.selectionSettings.mode||"Flow"===s.selectionSettings.cellSelectionMode)return;const h=e.split("\n");let c;const d=s.getDataRows();let p,u;const m=this.parent.isFrozenGrid();m&&(p=s.getMovableDataRows(),s.getFrozenRightColumnsCount()&&(u=s.getFrozenRightDataRows()));for(let b=0;b<h.length;b++){if(c=h[b].split("\t"),l=i,b===h.length-1&&""===h[b]||Object(Ae.W)(s.getRowByIndex(a))){l++;break}for(let e=0;e<c.length;e++){if(r=s.getCellFromIndex(a,l),m){const e=p[a];r=!!d[a].querySelector('[aria-colindex="'+l+'"]')||e.querySelector('[aria-colindex="'+l+'"]'),u&&!r&&(r=u[a].querySelector('[aria-colindex="'+l+'"]'))}if(!r){l++;break}if(n=s.getColumnByIndex(l),o=n.getParser()?n.getParser()(c[e]):c[e],n.allowEditing&&!n.isPrimaryKey&&!n.template){const e={column:n,data:o,rowIndex:a};this.parent.trigger("beforePaste",e),a=e.rowIndex,e.cancel||s.editModule&&("number"===n.type?this.parent.editModule.updateCell(a,n.field,parseFloat(e.data)):s.editModule.updateCell(a,n.field,e.data))}l++}a++}s.selectionModule.selectCellsByRange({rowIndex:t,cellIndex:i},{rowIndex:a-1,cellIndex:l-1});const g=this.parent.getCellFromIndex(a-1,l-1);g&&Object(Ae.y)(g,["e-focus","e-focused"],[])}initialEnd(){this.parent.off(bl,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":"clipboard"}}),this.parent.element.appendChild(this.clipBoardTextArea)}keyDownHandler(e){"ctrlPlusC"===e.action?this.copy():"ctrlShiftPlusH"===e.action&&this.copy(!0)}setCopyData(e){if(""===window.getSelection().toString()){const t=this.parent.isFrozenGrid();let i,s;this.clipBoardTextArea.value=this.copyContent="";const n=this.parent.getRows();if(t&&(i=this.parent.getMovableDataRows(),this.parent.getFrozenMode()===Za&&(s=this.parent.getFrozenRightRows())),"Cell"!==this.parent.selectionSettings.mode){const o=this.parent.getSelectedRowIndexes().sort((e,t)=>e-t);if(e){const t=[];for(let e=0;e<this.parent.getVisibleColumns().length;e++)t[e]=this.parent.getVisibleColumns()[e].headerText;this.getCopyData(t,!1,"\t",e),this.copyContent+="\n"}for(let r=0;r<o.length;r++){r>0&&(this.copyContent+="\n");const l=[].slice.call(n[o[r]].querySelectorAll(".e-rowcell:not(.e-hide)"));t&&(l.push(...[].slice.call(i[o[r]].querySelectorAll(".e-rowcell:not(.e-hide)"))),s&&l.push(...[].slice.call(s[o[r]].querySelectorAll(".e-rowcell:not(.e-hide)")))),this.getCopyData(l,!1,"\t",e)}}else{const o=this.checkBoxSelection();if(o.status){if(e){const t=[];for(let e=0;e<o.colIndexes.length;e++)t.push(this.parent.getColumnHeaderByIndex(o.colIndexes[e]));this.getCopyData(t,!1,"\t",e),this.copyContent+="\n"}for(let r=0;r<o.rowIndexes.length;r++){r>0&&(this.copyContent+="\n");const l=[].slice.call(n[o.rowIndexes[r]].getElementsByClassName("e-cellselectionbackground"));t&&(l.push(...[].slice.call(i[o.rowIndexes[r]].getElementsByClassName("e-cellselectionbackground"))),s&&l.push(...[].slice.call(s[o.rowIndexes[r]].getElementsByClassName("e-cellselectionbackground")))),this.getCopyData(l,!1,"\t",e)}}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,"\n",e)}const o={data:this.copyContent,cancel:!1};if(this.parent.trigger("beforeCopy",o),o.cancel)return;this.clipBoardTextArea.value=this.copyContent=o.data,Ae.d.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}}getCopyData(e,t,i,s){const n="string"!=typeof e[0];for(let o=0;o<e.length;o++){if(s&&t){const t=parseInt(e[o].getAttribute(ih),10);this.copyContent+=this.parent.getColumns()[t].headerText+"\n"}n?e[o].classList.contains("e-hide")||(this.copyContent+=e[o].innerText):this.copyContent+=e[o],o<e.length-1&&(this.copyContent+=i)}}copy(e){document.queryCommandSupported("copy")&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)}getModuleName(){return"clipboard"}destroy(){this.removeEventListener(),this.clipBoardTextArea&&Object(Ae.db)(this.clipBoardTextArea)}checkBoxSelection(){const e=this.parent;let t={status:!1};if("Cell"===e.selectionSettings.mode){const i=e.getSelectedRowCellIndexes();let s;const n=[];let o;for(o=0;o<i.length&&(i[o].cellIndexes.length&&n.push(i[o].rowIndex),!i[o].cellIndexes.length||(s||(s=JSON.stringify(i[o].cellIndexes.sort())),s===JSON.stringify(i[o].cellIndexes.sort())));o++);n.sort((e,t)=>e-t),o===i.length&&n[n.length-1]-n[0]==n.length-1&&(t={status:!0,rowIndexes:n,colIndexes:i[0].cellIndexes})}return t}}var rc,lc=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let ac=(()=>{class e extends Ae.e{}return lc([Object(Ae.r)()],e.prototype,"field",void 0),lc([Object(Ae.r)()],e.prototype,"direction",void 0),lc([Object(Ae.r)(!1)],e.prototype,"isFromGroup",void 0),e})(),hc=(()=>{class e extends Ae.e{}return lc([Object(Ae.f)([],ac)],e.prototype,"columns",void 0),lc([Object(Ae.r)(!0)],e.prototype,"allowUnsort",void 0),e})(),cc=(()=>{class e extends Ae.e{}return lc([Object(Ae.r)()],e.prototype,"field",void 0),lc([Object(Ae.r)()],e.prototype,"operator",void 0),lc([Object(Ae.r)()],e.prototype,"value",void 0),lc([Object(Ae.r)()],e.prototype,"matchCase",void 0),lc([Object(Ae.r)(!1)],e.prototype,"ignoreAccent",void 0),lc([Object(Ae.r)()],e.prototype,"predicate",void 0),lc([Object(Ae.r)({})],e.prototype,"actualFilterValue",void 0),lc([Object(Ae.r)({})],e.prototype,"actualOperator",void 0),lc([Object(Ae.r)()],e.prototype,"type",void 0),lc([Object(Ae.r)()],e.prototype,"ejpredicate",void 0),lc([Object(Ae.r)()],e.prototype,"uid",void 0),lc([Object(Ae.r)()],e.prototype,"isForeignKey",void 0),e})(),dc=(()=>{class e extends Ae.e{}return lc([Object(Ae.r)(!1)],e.prototype,"enableCache",void 0),lc([Object(Ae.r)(3)],e.prototype,"maxBlocks",void 0),lc([Object(Ae.r)(3)],e.prototype,"initialBlocks",void 0),e})(),pc=(()=>{class e extends Ae.e{}return lc([Object(Ae.f)([],cc)],e.prototype,"columns",void 0),lc([Object(Ae.r)("FilterBar")],e.prototype,"type",void 0),lc([Object(Ae.r)()],e.prototype,"mode",void 0),lc([Object(Ae.r)(!0)],e.prototype,"showFilterBarStatus",void 0),lc([Object(Ae.r)(1500)],e.prototype,"immediateModeDelay",void 0),lc([Object(Ae.r)()],e.prototype,"operators",void 0),lc([Object(Ae.r)(!1)],e.prototype,"ignoreAccent",void 0),lc([Object(Ae.r)(!1)],e.prototype,"enableCaseSensitivity",void 0),lc([Object(Ae.r)(!1)],e.prototype,"showFilterBarOperator",void 0),e})(),uc=(()=>{class e extends Ae.e{}return lc([Object(Ae.r)("Row")],e.prototype,"mode",void 0),lc([Object(Ae.r)("Flow")],e.prototype,"cellSelectionMode",void 0),lc([Object(Ae.r)("Single")],e.prototype,"type",void 0),lc([Object(Ae.r)(!1)],e.prototype,"checkboxOnly",void 0),lc([Object(Ae.r)(!1)],e.prototype,"persistSelection",void 0),lc([Object(Ae.r)("Default")],e.prototype,"checkboxMode",void 0),lc([Object(Ae.r)(!1)],e.prototype,"enableSimpleMultiRowSelection",void 0),lc([Object(Ae.r)(!0)],e.prototype,"enableToggle",void 0),lc([Object(Ae.r)(!1)],e.prototype,"allowColumnSelection",void 0),e})(),mc=(()=>{class e extends Ae.e{}return lc([Object(Ae.r)([])],e.prototype,"fields",void 0),lc([Object(Ae.r)("")],e.prototype,"key",void 0),lc([Object(Ae.r)("contains")],e.prototype,"operator",void 0),lc([Object(Ae.r)(!0)],e.prototype,"ignoreCase",void 0),lc([Object(Ae.r)(!1)],e.prototype,"ignoreAccent",void 0),e})(),gc=(()=>{class e extends Ae.e{}return lc([Object(Ae.r)()],e.prototype,"targetID",void 0),e})(),bc=(()=>{class e extends Ae.e{}return lc([Object(Ae.r)("Both")],e.prototype,"wrapMode",void 0),e})(),fc=(()=>{class e extends Ae.e{}return lc([Object(Ae.r)("Normal")],e.prototype,"mode",void 0),e})(),yc=(()=>{class e extends Ae.e{}return lc([Object(Ae.r)(!0)],e.prototype,"showDropArea",void 0),lc([Object(Ae.r)(!1)],e.prototype,"allowReordering",void 0),lc([Object(Ae.r)(!1)],e.prototype,"showToggleButton",void 0),lc([Object(Ae.r)(!1)],e.prototype,"showGroupedColumn",void 0),lc([Object(Ae.r)(!0)],e.prototype,"showUngroupButton",void 0),lc([Object(Ae.r)(!1)],e.prototype,"disablePageWiseAggregates",void 0),lc([Object(Ae.r)([])],e.prototype,"columns",void 0),lc([Object(Ae.r)()],e.prototype,"captionTemplate",void 0),lc([Object(Ae.r)(!1)],e.prototype,"enableLazyLoading",void 0),e})(),vc=(()=>{class e extends Ae.e{}return lc([Object(Ae.r)(!1)],e.prototype,"allowAdding",void 0),lc([Object(Ae.r)(!1)],e.prototype,"allowEditing",void 0),lc([Object(Ae.r)(!1)],e.prototype,"allowDeleting",void 0),lc([Object(Ae.r)("Normal")],e.prototype,"mode",void 0),lc([Object(Ae.r)(!0)],e.prototype,"allowEditOnDblClick",void 0),lc([Object(Ae.r)(!0)],e.prototype,"showConfirmDialog",void 0),lc([Object(Ae.r)(!1)],e.prototype,"showDeleteConfirmDialog",void 0),lc([Object(Ae.r)("")],e.prototype,"template",void 0),lc([Object(Ae.r)("")],e.prototype,"headerTemplate",void 0),lc([Object(Ae.r)("")],e.prototype,"footerTemplate",void 0),lc([Object(Ae.r)("Top")],e.prototype,"newRowPosition",void 0),lc([Object(Ae.r)({})],e.prototype,"dialog",void 0),lc([Object(Ae.r)(!1)],e.prototype,"allowNextRowEdit",void 0),e})(),Cc=(()=>{let e=rc=class extends Ae.h{constructor(e,t){super(e,t),this.isPreventScrollEvent=!1,this.inViewIndexes=[],this.keyA=!1,this.frozenRightCount=0,this.frozenLeftCount=0,this.tablesCount=1,this.movableCount=0,this.visibleFrozenLeft=0,this.visibleFrozenRight=0,this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.media={},this.isFreezeRefresh=!1,this.tableIndex=0,this.componentRefresh=Ae.h.prototype.refresh,this.isVirtualAdaptive=!1,this.vRows=[],this.vcRows=[],this.vGroupOffsets={},this.rowUid=0,this.currentViewData=[],this.isManualRefresh=!1,this.enableDeepCompare=!1,this.lockcolPositionCount=0,this.prevPageMoving=!1,this.pageTemplateChange=!1,this.isAutoGen=!1,this.mediaBindInstance={},this.commandDelIndex=void 0,this.asyncTimeOut=50,this.isExportGrid=!1,this.enableLogger=!0,this.needsID=!0,rc.Inject(Jh),Object(Ae.mb)("mergePersistData",this.mergePersistGridData,this)}getPersistData(){const e=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],t={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]};for(let o=0;o<e.length;o++){const i=this[e[o]];for(const s of t[e[o]])delete i[s]}const i=this.pageSettings.template,s=Object.assign({template:void 0},this.pageSettings);this.setProperties({pageSettings:s},!0),this.isAngular&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!Object(Ae.T)(this.pagerTemplate);const n=this.addOnPersist(e);return s.template=i,this.setProperties({pageSettings:s},!0),n}requiredModules(){this.setFrozenCount(),this.enableInfiniteAggrgate();const e=[];return this.isDestroyed||(this.allowFiltering&&e.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator]}),this.allowExcelExport&&e.push({member:"ExcelExport",args:[this,this.serviceLocator]}),this.allowPdfExport&&e.push({member:"PdfExport",args:[this]}),this.allowSorting&&e.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator]}),this.allowPaging&&e.push({member:"pager",args:[this,this.pageSettings]}),this.allowSelection&&e.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator]}),e.push({member:"resize",args:[this]}),this.allowReordering&&e.push({member:"reorder",args:[this]}),this.allowRowDragAndDrop&&e.push({member:"rowDragAndDrop",args:[this]}),this.allowGrouping&&e.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator]}),this.aggregates.length&&e.push({member:"aggregate",args:[this,this.serviceLocator]}),this.isDetail()&&e.push({member:"detailRow",args:[this,this.serviceLocator]}),(this.toolbar||this.toolbarTemplate)&&e.push({member:"toolbar",args:[this,this.serviceLocator]}),(this.enableVirtualization||this.enableColumnVirtualization)&&e.push({member:"virtualscroll",args:[this,this.serviceLocator]}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&e.push({member:"freeze",args:[this,this.serviceLocator]}),this.isCommandColumn(this.columns)&&e.push({member:"commandColumn",args:[this,this.serviceLocator]}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&e.push({member:"edit",args:[this,this.serviceLocator]}),this.extendRequiredModules(e)),e}extendRequiredModules(e){this.enableInfiniteScrolling&&e.push({member:"infiniteScroll",args:[this,this.serviceLocator]}),this.groupSettings.enableLazyLoading&&e.push({member:"lazyLoadGroup",args:[this,this.serviceLocator]}),this.contextMenuItems&&e.push({member:"contextMenu",args:[this,this.serviceLocator]}),this.showColumnMenu&&e.push({member:"columnMenu",args:[this,this.serviceLocator]}),this.showColumnChooser&&e.push({member:"columnChooser",args:[this,this.serviceLocator]}),this.isForeignKeyEnabled(this.columns)&&e.push({member:"foreignKey",args:[this,this.serviceLocator]}),this.enableLogger&&e.push({member:"logger",args:[this]})}preRender(){this.serviceLocator=new zh,this.initProperties(),this.initializeServices()}initProperties(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=Ae.h.prototype.refresh,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",FilterMenuDialogARIA:"Filter menu dialog",ExcelFilterDialogARIA:"Excel filter dialog",DialogEditARIA:"Edit dialog",ColumnChooserDialogARIA:"Column chooser dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}}render(){this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{role:"grid"}),Ts({target:this.element},this.createElement),this.renderModule=new Ah(this,this.serviceLocator),this.searchModule=new Zh(this),this.scrollModule=new tc(this),this.notify(ul,{}),!0!==this.getDataModule().dataManager.dataSource.offline&&void 0!==this.getDataModule().dataManager.dataSource.url||(this.isVirtualAdaptive=!0),this.trigger(Nr),Dc(this.columns,this.enableColumnVirtualization,this),this.enablePersistence&&this.notify(da,{}),this.getMediaColumns(),Rc(this.columns),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),this.showSpinner(),this.notify(ml,{})}showSpinner(){this.isExportGrid||zs(this.element)}hideSpinner(){this.isExportGrid||Ps(this.element)}updateStackedFilter(){this.allowFiltering&&"FilterBar"===this.filterSettings.type&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")}getMediaColumns(){if(!this.enableColumnVirtualization){const e=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!Object(Ae.T)(e))for(let t=0;t<e.length;t++)Object(Ae.T)(e[t].hideAtMedia)||!Object(Ae.T)(e[t].visible)&&!e[t].visible||this.pushMediaColumn(e[t],t)}}pushMediaColumn(e,t){this.mediaCol.push(e),this.media[e.uid]=window.matchMedia(e.hideAtMedia),this.mediaQueryUpdate(t,this.media[e.uid]),this.mediaBindInstance[t]=this.mediaQueryUpdate.bind(this,t),this.media[e.uid].addListener(this.mediaBindInstance[t])}updateMediaColumns(e){if(!this.enableColumnVirtualization){const t=this.getColumnIndexByUid(e.uid);for(let i=0;i<this.mediaCol.length;i++)if(e.uid===this.mediaCol[i].uid)return void this.mediaCol.splice(i,1);this.pushMediaColumn(e,t)}}mediaQueryUpdate(e,t){const i=this.getColumns()[e];this.mediaCol.some(e=>e.uid===i.uid)&&(i.visible=t.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,i.visible?this.showHider.show(i.headerText,"headerText"):this.showHider.hide(i.headerText,"headerText")))}refreshMediaCol(){this.isInitialLoad=!0;const e=this.element.querySelector("."+Na);this.aggregates.length&&this.element.scrollHeight>this.height&&e&&Object(Ae.u)([e],["e-footerpadding"]),this.getColumns().filter(e=>"checkbox"===e.type).length&&"ResetOnRowClick"===this.selectionSettings.checkboxMode&&(this.isCheckBoxSelection=!1),"Vertical"===this.rowRenderingMode&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),Object(Ae.eb)([this.element],"e-gridhover")),this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh()}removeMediaListener(){for(let e=0;e<this.mediaCol.length;e++)this.media[this.mediaCol[e].uid].removeListener(this.mediaBindInstance[this.mediaCol[e].index])}eventInitializer(){}destroy(){const e=this.element;if(!e)return;const t=!(!e.querySelector(".e-gridheader")||!e.querySelector("."+Va));t&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(kl,{}),this.destroyDependentModules(),this.destroyTemplate(["template"]),t&&super.destroy(),this.toolTipObj.destroy();const i=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"];for(let s=0;s<i.length;s++)this[i[s]]&&(this[i[s]]=null);this.element.innerHTML="",Object(Ae.y)(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"]),this.isFreezeRefresh=!1}destroyDependentModules(){const e=this.element;e&&(e.querySelector(".e-gridheader")||e.querySelector("."+Va))&&(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())}getModuleName(){return"grid"}enableBoxSelection(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):this.element.classList.remove("e-afenabled")}onPropertyChanged(e,t){let i,s=!1,n=!1,o=!1;if(this.isDestroyed)return;this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();const r=Object.keys(e);r.indexOf("columns")>-1&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),n=!0);for(const l of r)switch(l){case"allowPaging":this.notify(fl,{module:"pager",enable:this.allowPaging}),s=!0;break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(vl,{module:"pager",properties:e.pageSettings});break}this.notify(vl,{module:"pager",properties:e.pageSettings}),(Object(Ae.T)(e.pageSettings.currentPage)&&Object(Ae.T)(e.pageSettings.pageSize)&&Object(Ae.T)(e.pageSettings.totalRecordsCount)||!Object(Ae.T)(t.pageSettings)&&e.pageSettings.currentPage!==t.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(s=!0);break;case"allowSorting":this.notify(fl,{module:"sort",enable:this.allowSorting}),s=!0,i=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(fl,{module:"filter",enable:this.allowFiltering}),s=!0,"FilterBar"!==this.filterSettings.type&&this.refreshHeader();break;case"height":case"width":this.notify(fl,{module:"scroll",properties:{width:e.width,height:e.height}});break;case"allowReordering":this.headerModule.refreshUI(),i=!0;break;case"allowRowDragAndDrop":this.notify(fl,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(fl,{module:"selection",enable:this.allowSelection});break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=Ec(this.rowTemplate),s=!0;break;case"detailTemplate":this.detailTemplateFn=Ec(this.detailTemplate),s=!0;break;case"allowGrouping":this.notify(fl,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),s=!0,i=!0;break;case"enableInfiniteScrolling":case"childGrid":s=!0;break;case"toolbar":this.notify(fl,{module:"toolbar"});break;case"groupSettings":this.notify(vl,{module:"group",properties:e.groupSettings,oldProperties:t.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(s=!0),this.notify(fl,{module:"aggregate",properties:e});break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"currencyCode":case"locale":this.log("frozen_rows_columns"),o=!0,n=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(s=!0),this.getDataModule().isQueryInvokedFromData=!1;break;default:this.extendedPropertyChange(l,e,n)}i&&this.updateDefaultCursor(),n?o||this.getFrozenColumns()||this.frozenRows?this.freezeRefresh():this.refresh():s&&(this.notify(Cl,{requestType:"refresh"}),s=!1,this.maintainSelection(e.selectedRowIndex))}extendedPropertyChange(e,t,i){switch(e){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=t.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),"auto"!==this.height&&(this.scrollModule.removePadding(!t.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=t.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=t.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=t.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify("rtl-updated",{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?Object(Ae.u)([this.element],"e-grid-min-height"):Object(Ae.eb)([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(fl,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(fl,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(fl,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.notify(fl,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(vl,{module:"filter",properties:t.filterSettings});break;case"searchSettings":this.notify(vl,{module:"search",properties:t.searchSettings});break;case"sortSettings":this.notify(vl,{module:"sort"});break;case"selectionSettings":this.notify(vl,{module:"selection",properties:t.selectionSettings});break;case"editSettings":this.notify(vl,{module:"edit",properties:t.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(Ql,{case:"textwrap",isModeChg:"textWrapSettings"===e});break;case"dataSource":const s=this.getDataModule().getState();if(Object.getPrototypeOf(t).deepWatch){const e=this.getPrimaryKeyFieldNames()[0];for(let i=0,s=Object.keys(t.dataSource);i<s.length;i++)this.setRowData(Object(Ae.R)(e,this.dataSource[s[i]]),this.dataSource[s[i]])}else if(s.isPending){let e=Object(Ae.T)(this.dataSource)?[]:this.dataSource.result;const t=s.group||[];for(let i=0;i<t.length;i++)e=_e.b.group(e,t[i],s.aggregates||[]);this.dataSource={result:e,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),s.resolver(this.dataSource)}else this.getDataModule().setState({isDataChanged:!1}),this.notify(Bl,{}),i||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(Oa,{}));this.scrollRefresh();break;case"enableHover":(t.enableHover?Ae.u:Ae.eb)([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(t.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify(ja,{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.notify(Ea,{}),this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(t.enableStickyHeader)}}maintainSelection(e){if(-1!==e){const t=()=>{this.selectRow(e),this.off(bl,t)};this.on(bl,t,this)}}setProperties(e,t){super.setProperties(e,t),e.filterSettings&&this.filterModule&&t&&this.filterModule.refreshFilter()}setTablesCount(){const e=this.getFrozenColumns(),t=this.getFrozenLeftColumnsCount(),i=this.getFrozenRightColumnsCount();!e||t||i?e||!t&&!i||(t&&!i||i&&!t?this.tablesCount=2:t&&i&&(this.tablesCount=3)):this.tablesCount=2}getTablesCount(){return this.tablesCount}updateDefaultCursor(){let e=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)"));const t=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),i=this.getColumns();if(this.enableColumnVirtualization&&this.getFrozenColumns()){const t=this.contentModule.getHeaderCells();e=t.length?t:e}for(let s=0;s<e.length;s++){const t=e[s];(this.allowGrouping||this.allowReordering||this.allowSorting)&&t.classList.add(i[s].allowReordering&&i[s].allowSorting&&i[s].allowGrouping?"e-mousepointer":"e-defaultcursor")}for(let s=0;s<t.length;s++)this.allowReordering&&t[s].classList.add("e-mousepointer")}updateColumnModel(e){for(let t=0,i=e.length;t<i;t++)e[t].columns?this.updateColumnModel(e[t].columns):this.columnModel.push(e[t]);this.updateColumnLevelFrozen(),this.updateFrozenColumns(),this.updateLockableColumns()}updateColumnLevelFrozen(){const e=this.columnModel,t=[],i=[],s=[];if(this.frozenLeftCount||this.frozenRightCount){for(let n=0,o=e.length;n<o;n++){const o=e[n];"Left"===o.freeze?(o.freezeTable=th,t.push(o)):"Right"===o.freeze?(o.freezeTable=eh,i.push(o)):(o.freezeTable="movable",s.push(o))}this.columnModel=t.concat(s).concat(i)}}updateFrozenColumns(){if(this.frozenLeftCount||this.frozenRightCount)return;const e=this.columnModel,t=this.frozenColumns,i=this.getFrozenColumns();let s=0;for(let n=0,o=e.length;n<o;n++){const o=e[n];t&&(o.freezeTable=n<t?th:"movable"),o.isFrozen&&n>=t?(o.freezeTable=th,e.splice(this.frozenColumns+s,0,e.splice(n,1)[0]),s++):i&&!t&&(o.freezeTable="movable")}}getFrozenLeftCount(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()}isFrozenGrid(){return 0!==this.getFrozenColumns()||0!==this.getFrozenLeftColumnsCount()||0!==this.getFrozenRightColumnsCount()}getFrozenMode(){return this.frozenName}updateLockableColumns(){const e=this.columnModel;let t=0,i=0;const s=this.getFrozenColumns();for(let n=0;n<e.length;n++)e[n].lockColumn&&(n<s?(e.splice(t,0,e.splice(n,1)[0]),t++):(e.splice(s+i,0,e.splice(n,1)[0]),i++))}checkLockColumns(e){for(let t=0;t<e.length;t++)e[t].columns?this.checkLockColumns(e[t].columns):e[t].lockColumn&&this.lockcolPositionCount++}getColumns(e){const t=this.inViewIndexes.map(e=>e-this.groupSettings.columns.length).filter(e=>e>-1),i=t.length;(!this.enableColumnVirtualization||Object(Ae.T)(this.columnModel)||0===this.columnModel.length||e)&&(this.columnModel=[],this.updateColumnModel(this.columns));let s=0===i?this.columnModel:this.columnModel.slice(t[0],t[i-1]+1);return this.contentModule&&this.enableColumnVirtualization&&this.isFrozenGrid()&&t.length&&t[0]>0&&(s=this.contentModule.ensureFrozenCols(s)),s}getStackedHeaderColumnByHeaderText(e,t){for(let i=0;i<t.length;i++){const s=t[i];if(s.field===e||s.headerText===e){this.stackedColumn=s;break}s.columns&&this.getStackedHeaderColumnByHeaderText(e,s.columns)}return this.stackedColumn}getColumnIndexesInView(){return this.inViewIndexes}getQuery(){return this.query}getLocaleConstants(){return this.defaultLocale}setColumnIndexesInView(e){this.inViewIndexes=e}getVisibleColumns(){return this.getCurrentVisibleColumns()}getHeaderContent(){return this.headerModule.getPanel()}setGridHeaderContent(e){this.headerModule.setPanel(e)}getContentTable(){return this.contentModule.getTable()}setGridContentTable(e){this.contentModule.setTable(e)}getContent(){return this.contentModule.getPanel()}setGridContent(e){this.contentModule.setPanel(e)}getHeaderTable(){return this.headerModule.getTable()}setGridHeaderTable(e){this.headerModule.setTable(e)}getFooterContent(){return this.footerElement=this.element.getElementsByClassName(Na)[0],this.footerElement}getFooterContentTable(){return this.footerElement=this.element.getElementsByClassName(Na)[0],this.footerElement.firstChild.firstChild}getPager(){return this.gridPager}setGridPager(e){this.gridPager=e}getRowByIndex(e){return this.contentModule.getRowByIndex(e)}getMovableRowByIndex(e){return this.contentModule.getMovableRowByIndex(e)}getFrozenRowByIndex(e){return this.getFrozenDataRows()[e]}getRows(){return this.contentModule.getRowElements()}getFrozenRightRowByIndex(e){return this.contentModule.getFrozenRightRowByIndex(e)}getRowInfo(e){const t=e;let i={target:e};if(!Object(Ae.T)(e)&&Object(Ae.T)(Ic(t,"e-detailrowcollapse")&&Object(Ae.T)(Ic(t,"e-recordplusexpand")))){const s=Object(Ae.A)(t,"."+Ha);if(!s){const e=Object(Ae.A)(t,".e-row");if(!Object(Ae.T)(e)&&!e.classList.contains("e-addedrow")){const t=this.getRowObjectFromUID(e.getAttribute("data-uid")),s=parseInt(e.getAttribute(sh),10);i={row:e,rowData:t.data,rowIndex:s}}return i}const n=parseInt(s.getAttribute(ih),10);if(!Object(Ae.T)(s)&&!isNaN(n)){const t=Object(Ae.A)(s,".e-row"),o=parseInt(t.getAttribute(sh),10),r=this.getFrozenColumns(),l=this.columnModel[n].getFreezeTableName();let a=this.contentModule.getRows(),h=n+this.getIndentCount();this.isFrozenGrid()&&(l===th?a=this.contentModule.getRows():"movable"===l?(h=n-r-this.frozenLeftCount,a=this.contentModule.getMovableRows()):l===eh&&(h=n-(this.frozenLeftCount+this.movableCount),a=this.contentModule.getFrozenRightRows()));const c=a.filter(e=>e.uid===t.getAttribute("data-uid"));let d,p={};Object.keys(c).length&&(p=c[0].data,d=c[0].cells[h].column),i={cell:s,cellIndex:n,row:t,rowIndex:o,rowData:p,column:d,target:e}}}return i}getMovableRows(){return this.contentModule.getMovableRowElements()}getFrozenRightRows(){return this.contentModule.getFrozenRightRowElements()}getDataRows(){return this.getAllDataRows()}getAllDataRows(e){if(Object(Ae.T)(this.getContentTable().querySelector(nh)))return[];const t=this.isFrozenGrid()?this.getFrozenLeftContentTbody():this.getContentTable().querySelector(nh);let i=[].slice.call(t.children);if(this.frozenRows){const e=this.isFrozenGrid()?this.getHeaderContent().querySelector("."+Ua).querySelector(nh):this.getHeaderTable().querySelector(nh),t=[].slice.call(e.children);i=this.addMovableRows(t,i)}return this.generateDataRows(i,e)}addMovableRows(e,t){for(let i=0,s=t.length;i<s;i++)e.push(t[i]);return e}generateDataRows(e,t){const i=[];for(let s=0,n=e.length;s<n;s++)!e[s].classList.contains(Xa)||e[s].classList.contains("e-hiddenrow")&&!t||(this.isCollapseStateEnabled()?i[parseInt(e[s].getAttribute("aria-rowindex"),10)]=e[s]:i.push(e[s]));return i}getMovableDataRows(){return this.getAllMovableDataRows()}getAllMovableDataRows(e){if(!this.isFrozenGrid())return[];let t=[].slice.call(this.getContent().querySelector("."+Wa).querySelector(nh).children);if(this.frozenRows){const e=[].slice.call(this.getHeaderContent().querySelector("."+Ga).querySelector(nh).children);t=this.addMovableRows(e,t)}return this.generateDataRows(t,e)}getFrozenDataRows(){return this.getAllFrozenDataRows()}getAllFrozenDataRows(e){let t=[].slice.call(this.getContent().querySelector("."+_a).querySelector(nh).children);if(this.frozenRows){const e=[].slice.call(this.getHeaderContent().querySelector("."+Ua).querySelector(nh).children);t=this.addMovableRows(e,t)}return this.generateDataRows(t,e)}getFrozenRightDataRows(){return this.getAllFrozenRightDataRows()}getAllFrozenRightDataRows(e){if("Right"!==this.getFrozenMode()&&"Left-Right"!==this.getFrozenMode())return[];let t=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(nh).children);if(this.frozenRows){const e=[].slice.call(this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(nh).children);t=this.addMovableRows(e,t)}return this.generateDataRows(t,e)}setCellValue(e,t,i){const s="Right"===this.getFrozenMode(),n=this.getPrimaryKeyFieldNames()[0],o=new yh(this,this.serviceLocator);let r=this.getColumnIndexByField(t);const l=this.getColumnByField(t),a=("movable"===l.getFreezeTableName()?this.contentModule.getMovableRows():"frozen-right"===l.getFreezeTableName()?this.getFrozenRightRowsObject():this.contentModule.getRows()).filter(t=>Object(Ae.R)(n,t.data)===e)[0],h=a?this.element.querySelector("[data-uid="+a.uid+"]"):null;if(!Object(Ae.T)(h)){Object(Ae.mb)(t,i,a.data);let e=this.getFrozenLeftColumnsCount()||this.getFrozenColumns();const n=this.getMovableColumnsCount();this.isRowDragable()&&!s&&e++;const h=e+n,c=this.getCellFromIndex(a.index,r);if(!Object(Ae.T)(c)){const n="movable"===l.getFreezeTableName()?e:"frozen-right"===l.getFreezeTableName()?h:0;this.groupSettings.columns.length&&(r+=this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&r++,this.isRowDragable()&&!s&&r++,o.refreshTD(c,a.cells[r-n],a.data,{index:a.index}),this.aggregates.length>0&&(this.notify(jl,{}),this.groupSettings.columns.length>0&&this.notify(Tl,{})),Object(Ae.T)(a)||Object(Ae.T)(a.changes)||(a.changes[t]=i),this.trigger(Wr,{cell:c,column:l,data:a.data})}}}refreshReactColumnTemplateByUid(e){this.isReact&&this.clearTemplate(["columnTemplate"],void 0,()=>{const t=this.getRowsObject(),i=this.getIndentCount(),s=this.getNormalizedColumnIndex(e);for(let e=0;e<t.length;e++)if(t[e].isDataRow&&!Object(Ae.T)(t[e].index)){const n=t[e].cells[s],o=new yh(this,this.serviceLocator),r=this.getCellFromIndex(t[e].index,s-i);o.refreshTD(r,n,t[e].data,{index:t[e].index})}})}setRowData(e,t){let i=this.contentModule.getRows();const s=this.getPrimaryKeyFieldNames()[0],n=new ch(this.serviceLocator,null,this);this.groupSettings.columns.length>0&&this.aggregates.length>0&&(i=i.filter(e=>e.isDataRow));const o=i.filter(t=>Object(Ae.R)(s,t.data)===e)[0];!Object(Ae.T)(o)&&this.element.querySelectorAll("[data-uid="+o.uid+"]").length&&(o.changes=t,Qc(o,this.getForeignKeyColumns(),o.changes),n.refresh(o,this.getColumns(),!0),this.aggregates.length>0&&(this.notify(jl,{}),this.groupSettings.columns.length>0&&this.notify(Tl,{})))}getCellFromIndex(e,t){return md(this,this.getColumnByIndex(t),e,t)}getMovableCellFromIndex(e,t){if("Left-Right"===this.frozenName&&t>=this.movableCount)return;const i=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableDataRows()[e]&&this.getMovableDataRows()[e].getElementsByClassName(Ha)[t-i]}getFrozenRightCellFromIndex(e,t){const i=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount(),s=this.getFrozenRightDataRows();return s[e]&&s[e].getElementsByClassName(Ha)[t-i]}getColumnHeaderByIndex(e){return this.getHeaderTable().getElementsByClassName("e-headercell")[e]}getMovableColumnHeaderByIndex(e){const t=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableVirtualHeader().getElementsByClassName("e-headercell")[e-t]}getFrozenRightColumnHeaderByIndex(e){const t=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount();return this.getFrozenRightHeader().getElementsByClassName("e-headercell")[e-t]}getFrozenLeftColumnHeaderByIndex(e){return this.getFrozenVirtualHeader().getElementsByClassName("e-headercell")[e]}getRowObjectFromUID(e,t,i){const s=this.contentModule.getRows();let n=this.rowObject(s,e);return this.isFrozenGrid()&&(!n||t||i)?(n=this.rowObject(this.contentModule.getMovableRows(),e),(!n&&"Left-Right"===this.getFrozenMode()||i)&&(n=this.rowObject(this.contentModule.getFrozenRightRows(),e)),n):Object(Ae.T)(n)&&this.enableVirtualization&&this.groupSettings.columns.length>0?(n=this.rowObject(this.vRows,e),n):n}rowObject(e,t){for(const i of e)if(i.uid===t)return i;return null}getRowsObject(){return this.contentModule.getRows()}getMovableRowsObject(){let e=[];return this.isFrozenGrid()&&(e=this.contentModule.getMovableRows()),e}getFrozenRightRowsObject(){let e=[];return"Right"!==this.getFrozenMode()&&"Left-Right"!==this.getFrozenMode()||(e=this.contentModule.getFrozenRightRows()),e}getColumnHeaderByField(e){const t=this.getColumnByField(e);return t?this.getColumnHeaderByUid(t.uid):void 0}getColumnHeaderByUid(e){const t=this.getHeaderContent().querySelector("[e-mappinguid="+e+"]");return t?t.parentElement:void 0}getColumnByIndex(e){let t;return this.getColumns().some((i,s)=>(t=i,s===e)),t}getColumnByField(e){return Tc(this.getColumns(),t=>{if(t.field===e)return t})[0]}getColumnIndexByField(e){const t=this.getColumns();for(let i=0;i<t.length;i++)if(t[i].field===e)return i;return-1}getColumnByUid(e){return Tc([...this.getColumns(),...this.getStackedColumns(this.columns)],t=>{if(t.uid===e)return t})[0]}getStackedColumns(e,t=[]){for(const i of e)i.columns&&(t.push(i),this.getStackedColumns(i.columns,t));return t}getColumnIndexByUid(e){const t=Tc(this.getColumns(),(t,i)=>{if(t.uid===e)return i})[0];return Object(Ae.T)(t)?-1:t}getUidByColumnField(e){return Tc(this.getColumns(),t=>{if(t.field===e)return t.uid})[0]}getNormalizedColumnIndex(e){return this.getColumnIndexByUid(e)+this.getIndentCount()}getIndentCount(){let e=0;return this.allowGrouping&&(e+=this.groupSettings.columns.length),this.isDetail()&&e++,this.isRowDragable()&&Object(Ae.T)(this.rowDropSettings.targetID)&&e++,e}getColumnFieldNames(){const e=[];let t;for(let i=0,s=this.getColumns().length;i<s;i++)t=this.getColumns()[i],t.visible&&e.push(t.field);return e}getRowTemplate(){return this.rowTemplateFn}getDetailTemplate(){return this.detailTemplateFn}getEditTemplate(){return this.editTemplateFn}getEditHeaderTemplate(){return this.editHeaderTemplateFn}getEditFooterTemplate(){return this.editFooterTemplateFn}getPrimaryKeyFieldNames(){const e=[];for(let t=0;t<this.columnModel.length;t++)this.columnModel[t].isPrimaryKey&&e.push(this.columnModel[t].field);return e}refresh(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())}refreshHeader(){this.headerModule.refreshUI()}getSelectedRows(){return this.selectionModule?this.selectionModule.selectedRecords:[]}getSelectedRowIndexes(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]}getSelectedRowCellIndexes(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]}getSelectedRecords(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]}getSelectedColumnsUid(){const e=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(t=>e.push(this.getColumns()[t].uid)),e}getDataModule(){return this.renderModule.data}showColumns(e,t){this.showHider.show(e,t=t||"headerText")}hideColumns(e,t){this.showHider.hide(e,t=t||"headerText")}getFrozenColumns(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)}getFrozenRightColumnsCount(){return this.frozenRightCount}getFrozenLeftColumnsCount(){return this.frozenLeftCount}getMovableColumnsCount(){return this.movableCount}setFrozenCount(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.splitFrozenCount(this.columns),this.frozenColumns&&(this.frozenLeftCount||this.frozenRightCount)&&this.setProperties({frozenColumns:0},!0),this.setTablesCount(),this.frozenLeftCount&&!this.frozenRightCount?this.frozenName="Left":this.frozenRightCount&&!this.frozenLeftCount?this.frozenName="Right":this.frozenLeftCount&&this.frozenRightCount&&(this.frozenName="Left-Right")}getVisibleFrozenLeftCount(){return this.visibleFrozenLeft}getVisibleFrozenRightCount(){return this.visibleFrozenRight}getVisibleMovableCount(){return this.visibleMovable}getFrozenRightColumns(){return this.frozenRightColumns}getFrozenLeftColumns(){return this.frozenLeftColumns}getMovableColumns(){return this.movableColumns}splitFrozenCount(e){for(let t=0;t<e.length;t++)e[t].columns?this.splitFrozenCount(e[t].columns):"Right"===e[t].freeze?(!1!==e[t].visible&&this.visibleFrozenRight++,this.frozenRightColumns.push(e[t]),this.frozenRightCount++):"Left"===e[t].freeze?(!1!==e[t].visible&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(e[t]),this.frozenLeftCount++):(!1!==e[t].visible&&this.visibleMovable++,this.movableColumns.push(e[t]),this.movableCount++)}getVisibleFrozenColumns(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)}getFilterUIInfo(){return this.filterModule?this.filterModule.getFilterUIInfo():{}}getVisibleFrozenColumnsCount(){let e=0;const t=this.columnModel;for(let i=0;i<this.frozenColumns;i++)t[i].visible&&e++;if(this.frozenLeftCount||this.frozenRightCount)for(let i=0;i<t.length;i++)!t[i].visible||"Left"!==t[i].freeze&&"Right"!==t[i].freeze||e++;return e}getVisibleFrozenCount(e,t){if(!this.frozenLeftCount&&!this.frozenRightCount)for(let i=0,s=e.length;i<s;i++)e[i].columns?t=this.getVisibleFrozenCount(e[i].columns,t):e[i].isFrozen&&e[i].visible&&t++;return t}getFrozenCount(e,t,i){for(let s=0,n=e.length;s<n;s++)e[s].columns?t=this.getFrozenCount(e[s].columns,t,i):(e[s].isFrozen&&i>this.frozenColumns-1&&t++,i++);return t}goToPage(e){this.pagerModule&&this.pagerModule.goToPage(e)}updateExternalMessage(e){this.pagerModule&&this.pagerModule.updateExternalMessage(e)}sortColumn(e,t,i){this.sortModule&&this.sortModule.sortColumn(e,t,i)}clearSorting(){this.sortModule&&this.sortModule.clearSorting()}removeSortColumn(e){this.sortModule&&this.sortModule.removeSortColumn(e)}clearGridActions(){this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()}filterByColumn(e,t,i,s,n,o,r,l){this.filterModule&&this.filterModule.filterByColumn(e,t,i,s,n,o,r,l)}clearFiltering(e){this.filterModule&&this.filterModule.clearFiltering(e)}removeFilteredColsByField(e,t){this.filterModule&&this.filterModule.removeFilteredColsByField(e,t)}selectRow(e,t){this.selectionModule&&this.selectionModule.selectRow(e,t)}selectRows(e){this.selectionModule&&this.selectionModule.selectRows(e)}clearSelection(){this.selectionModule&&this.selectionModule.clearSelection()}selectCell(e,t){this.selectionModule&&this.selectionModule.selectCell(e,t)}selectCellsByRange(e,t){this.selectionModule.selectCellsByRange(e,t)}search(e){this.searchModule&&this.searchModule.search(e)}print(){this.printModule&&this.printModule.print()}deleteRecord(e,t){this.editModule&&this.editModule.deleteRecord(e,t)}startEdit(){this.editModule&&this.editModule.startEdit()}endEdit(){this.editModule&&this.editModule.endEdit()}closeEdit(){this.editModule&&this.editModule.closeEdit()}addRecord(e,t){this.editModule&&this.editModule.addRecord(e,t)}deleteRow(e){this.editModule&&this.editModule.deleteRow(e)}editCell(e,t){this.editModule&&this.editModule.editCell(e,t)}saveCell(){this.editModule&&this.editModule.saveCell()}updateCell(e,t,i){this.editModule&&this.editModule.updateCell(e,t,i)}updateRow(e,t){this.editModule&&this.editModule.updateRow(e,t)}getBatchChanges(){return this.editModule?this.editModule.getBatchChanges():{}}enableToolbarItems(e,t){this.toolbarModule&&this.toolbarModule.enableItems(e,t)}copy(e){this.clipboardModule&&this.clipboardModule.copy(e)}recalcIndentWidth(){if(!this.getHeaderTable().querySelector(".e-emptycell"))return;if(!this.groupSettings.columns.length&&!this.isDetail()&&!this.isRowDragable()||this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")||!this.getContentTable())return;let e=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth;const t=[].slice.call(this.getHeaderTable().querySelector(oh).childNodes),i=[].slice.call(this.getContentTable().querySelector(oh).childNodes),s=e/30;let n="Right"===this.getFrozenMode()?this.frozenRightCount:0;const o=this.element.offsetWidth,r=(e,s)=>{if(ad(this)){const n=(s/o*100).toFixed(1)+"%";t[e].style.width=n,i[e].style.width=n}else t[e].style.width=s+"px",i[e].style.width=s+"px";this.notify(Al,{index:e,width:s})};for(s>=1&&(e=30/s),e<1&&(e=1),(this.enableColumnVirtualization||this.isAutoGen)&&(e=30);n<this.groupSettings.columns.length;)r(n,e),n++;this.isDetail()&&(r(n,e),n++),this.isRowDragable()&&r(n,e),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}resetIndentWidth(){if(ad(this)&&(this.getHeaderTable().querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth()),("auto"===this.width||"string"==typeof this.width&&-1!==this.width.indexOf("%"))&&this.getColumns().filter(e=>(!e.width||"auto"===e.width)&&e.minWidth).length>0){const e=this.widthService.getTableWidth(this.getColumns());this.widthService.setMinwidthBycalculation(e)}this.isFrozenGrid()&&this.widthService&&this.widthService.refreshFrozenScrollbar(),this.allowTextWrap&&"Content"!==this.textWrapSettings.wrapMode&&this.notify(wa,{})}isRowDragable(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID}reorderColumns(e,t){this.reorderModule&&this.reorderModule.reorderColumns(e,t)}reorderColumnByIndex(e,t){this.reorderModule&&this.reorderModule.reorderColumnByIndex(e,t)}reorderColumnByTargetIndex(e,t){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(e,t)}reorderRows(e,t){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(e,t)}refreshDataSource(e){this.notify("refreshdataSource",e)}disableRowDD(e){const t=this.getHeaderTable(),i=this.getContentTable(),s=t.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),n=this.getRows(),o=e?"none":"";Object(Ae.kb)(t.querySelector(oh).childNodes[0],{display:o}),Object(Ae.kb)(i.querySelector(oh).childNodes[0],{display:o});for(let r=0;r<this.getRows().length;r++){const t=n[r].firstElementChild;e?Object(Ae.u)([t],"e-hide"):Object(Ae.eb)([t],["e-hide"])}for(let r=0;r<t.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;r++){const t=s[r];e?Object(Ae.u)([t],"e-hide"):Object(Ae.eb)([t],["e-hide"])}}autoFitColumns(e){this.resizeModule&&this.resizeModule.autoFitColumns(e)}createColumnchooser(e,t,i){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(e,t,i)}initializeServices(){this.serviceLocator.register("widthService",this.widthService=new Ph(this)),this.serviceLocator.register("cellRendererFactory",new Mh),this.serviceLocator.register("rendererFactory",new Bh),this.serviceLocator.register("localization",this.localeObj=new Ae.p(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new Hr(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new ec(this)),this.serviceLocator.register("ariaService",this.ariaService=new vh),this.serviceLocator.register("focus",this.focusModule=new Hh(this))}processModel(){const e=this.groupSettings.columns,t=this.sortSettings.columns;let i,s;if(this.allowGrouping)for(let n=0,o=e.length;n<o;n++){s=0;for(let o=t.length;s<o;s++)if(t[s].field===e[n]){i=!0;break}if(i?this.allowSorting?this.sortedColumns.push(t[s].field):t[s].direction="Ascending":t.push({field:e[n],direction:"Ascending",isFromGroup:!0}),!this.groupSettings.showGroupedColumn){const t=this.enableColumnVirtualization?this.columns.filter(t=>t.field===e[n])[0]:this.getColumnByField(e[n]);t?t.visible=!1:this.log("initial_action",{moduleName:"group",columnName:e[n]})}}if(!e.length)for(let n=0;n<t.length;n++)this.sortedColumns.push(t[n].field);if(this.rowTemplateFn=Ec(this.rowTemplate),this.detailTemplateFn=Ec(this.detailTemplate),this.editTemplateFn=Ec(this.editSettings.template),this.editHeaderTemplateFn=Ec(this.editSettings.headerTemplate),this.editFooterTemplateFn=Ec(this.editSettings.footerTemplate),!Object(Ae.T)(this.parentDetails)){const e=Object(Ae.T)(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",e,!0)}this.initForeignColumn()}initForeignColumn(){this.isForeignKeyEnabled(this.getColumns())&&this.notify("initForeignKeyColumn",this.getForeignKeyColumns())}enableVerticalRendering(){"Vertical"===this.rowRenderingMode?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")}gridRender(){this.updateRTL(),"Vertical"===this.rowRenderingMode&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),Ae.d.isDevice&&this.element.classList.add("e-device"),this.rowHeight&&this.element.classList.add("e-grid-min-height"),Object(Ae.y)(this.element,["e-responsive","e-default"],[]);const e=this.serviceLocator.getService("rendererFactory");this.headerModule=e.getRenderer(Fa.Header),this.contentModule=e.getRenderer(Fa.Content),this.printModule=new wc(this,this.scrollModule),this.clipboardModule=new oc(this),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()}dataReady(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),"auto"!==this.height&&this.scrollModule.setPadding()}updateRTL(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}createGridPopUpElement(){const e=this.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),t=this.createElement("div",{className:Ka,attrs:{tabIndex:"-1"}});Object(Ae.v)([t,this.createElement("div",{className:"e-uptail e-tail"})],e),t.appendChild(this.createElement("span")),Object(Ae.v)([t,this.createElement("div",{className:"e-downtail e-tail"})],e),this.element.appendChild(e)}updateGridLines(){switch(Object(Ae.y)(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines")}this.updateResizeLines()}updateResizeLines(){this.allowResizing&&"Vertical"!==this.gridLines&&"Both"!==this.gridLines?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")}applyTextWrap(){if(this.allowTextWrap){const e=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":Gc(this.element,!1),Gc(this.getContent(),!1),Gc(e,!0);break;case"Content":Gc(this.getContent(),!0),Gc(this.element,!1),Gc(e,!1);break;default:Gc(this.element,!0),Gc(this.getContent(),!1),Gc(e,!1)}"Content"!==this.textWrapSettings.wrapMode&&this.notify(wa,{})}}removeTextWrap(){Gc(this.element,!1),Gc([].slice.call(this.element.getElementsByClassName("e-columnheader")),!1),Gc(this.getContent(),!1),"Content"!==this.textWrapSettings.wrapMode&&this.notify(wa,{})}createTooltip(){this.toolTipObj=new ds({opensOn:"custom",content:""},this.element)}freezeRefresh(){this.isFreezeRefresh=!0,this.enableVirtualization&&(this.pageSettings.currentPage=1),this.componentRefresh()}getTooltipStatus(e){const t=this.getHeaderTable(),i="e-gridheader",s=this.createTable(t,i,"header"),n=this.createTable(t,i,"content"),o=e.classList.contains("e-headercell")?s:n,r=e.classList.contains("e-headercell")?"th":"tr";o.querySelector(r).className=e.className,o.querySelector(r).innerHTML=e.innerHTML;const l=o.querySelector(r).getBoundingClientRect().width;return document.body.removeChild(s),document.body.removeChild(n),l>e.getBoundingClientRect().width}mouseMoveHandler(e){if(this.isEllipsisTooltip()){const t=Ic(e.target,"e-ellipsistooltip");this.prevElement===t&&"mouseout"!==e.type||this.toolTipObj.close();const i=e.target.tagName,s=["A","BUTTON","INPUT"];if(t&&"mouseout"!==e.type&&(!Ae.d.isDevice||-1===s.indexOf(i))){if(t.getAttribute("aria-describedby"))return;this.getTooltipStatus(t)&&(this.toolTipObj.content=t.getElementsByClassName("e-headertext").length?t.getElementsByClassName("e-headertext")[0].innerText:t.innerText,this.prevElement=t,this.toolTipObj.open(t))}}this.hoverFrozenRows(e)}hoverFrozenRows(e){if(this.isFrozenGrid()){const t=Ic(e.target,Xa);if([].slice.call(this.element.getElementsByClassName("e-frozenhover")).length&&"mouseout"===e.type){const e=[].slice.call(this.element.getElementsByClassName("e-frozenhover"));for(let t=0;t<e.length;t++)e[t].classList.remove("e-frozenhover")}else if(t){const e=[].slice.call(this.element.querySelectorAll('tr[aria-rowindex="'+t.getAttribute(sh)+'"]'));e.splice(e.indexOf(t),1);for(let i=0;i<e.length;i++)"true"!==t.getAttribute("aria-selected")&&e[i]?e[i].classList.add("e-frozenhover"):e[i]&&e[i].classList.remove("e-frozenhover")}}}isEllipsisTooltip(){const e=this.getColumns();if("EllipsisWithTooltip"===this.clipMode)return!0;for(let t=0;t<e.length;t++)if("EllipsisWithTooltip"===e[t].clipMode)return!0;return!1}scrollHandler(){this.isEllipsisTooltip()&&this.toolTipObj.close()}createTable(e,t,i){const s=this.createElement("div");s.className=this.element.className,s.style.cssText="display: inline-block;visibility:hidden;position:absolute";const n=this.createElement("div");n.className=t;const o=this.createElement("table");o.className=e.className,o.style.cssText="table-layout: auto;width: auto";const r="header"===i?"th":"td",l=this.createElement("tr"),a=this.createElement(r);return l.appendChild(a),o.appendChild(l),n.appendChild(o),s.appendChild(n),document.body.appendChild(s),s}onKeyPressed(e){"tab"!==e.action&&"shiftTab"!==e.action||this.toolTipObj.close()}wireEvents(){Ae.l.add(this.element,"click",this.mouseClickHandler,this),Ae.l.add(this.element,"touchend",this.mouseClickHandler,this),Ae.l.add(this.element,"focusout",this.focusOutHandler,this),Ae.l.add(this.element,"dblclick",this.dblClickHandler,this),Ae.l.add(this.element,"keydown",this.keyPressHandler,this),Ae.l.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=-1===this.element.tabIndex?0:this.element.tabIndex),this.keyboardModule=new Ae.o(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),Ae.l.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),Ae.l.add(this.element,"mousemove",this.mouseMoveHandler,this),Ae.l.add(this.element,"mouseout",this.mouseMoveHandler,this),Ae.l.add(this.getContent(),"touchstart",this.tapEvent,this),Ae.l.add(document.body,"keydown",this.keyDownHandler,this)}unwireEvents(){Ae.l.remove(this.element,"click",this.mouseClickHandler),Ae.l.remove(this.element,"touchend",this.mouseClickHandler),Ae.l.remove(this.element,"focusout",this.focusOutHandler),Ae.l.remove(this.element,"dblclick",this.dblClickHandler),Ae.l.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),Ae.l.remove(this.element,"mousemove",this.mouseMoveHandler),Ae.l.remove(this.element,"mouseout",this.mouseMoveHandler),Ae.l.remove(this.element,"keydown",this.keyPressHandler),Ae.l.remove(this.getContent(),"touchstart",this.tapEvent),Ae.l.remove(document.body,"keydown",this.keyDownHandler),Ae.l.remove(window,"resize",this.resetIndentWidth)}addListener(){this.isDestroyed||(this.on(gl,this.dataReady,this),this.on(bl,this.recalcIndentWidth,this),this.on(Ol,this.recalcIndentWidth,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(Yr,this.dataBoundFunction),this.on(Rl,this.onKeyPressed,this))}removeListener(){this.isDestroyed||(this.off(gl,this.dataReady),this.off(bl,this.recalcIndentWidth),this.off(Ol,this.recalcIndentWidth),this.removeEventListener(Yr,this.dataBoundFunction),this.off(Rl,this.onKeyPressed))}getCurrentViewRecords(){return ed(this)?Object(Ae.T)(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData}mouseClickHandler(e){if(this.isChildGrid(e)||Ic(e.target,"e-gridpopup")&&e.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(e))return;if((!this.allowRowDragAndDrop&&(Ic(e.target,Va)||"TD"===e.target.tagName)||!this.allowGrouping&&!this.allowReordering&&Ic(e.target,"e-gridheader"))&&e.touches)return;Ic(e.target,"e-gridheader")&&this.allowRowDragAndDrop&&!Ic(e.target,"e-filterbarcell")&&e.preventDefault();const t=this.getRowInfo(e.target);t.cancel=!1;let i=!1;const s=Object(Ae.A)(e.target,"tr");if(s&&s.getAttribute("data-uid")){const e=this.getRowObjectFromUID(s.getAttribute("data-uid"));i=!!e&&e.isDataRow}i&&this.trigger("recordClick",t),this.notify(Dl,e)}checkEdit(e){const t=Ic(e.target,Xa),i="Batch"!==this.editSettings.mode&&this.isEdit&&t&&(t.classList.contains($a)||t.classList.contains(Ja));return!Ic(e.target,"e-unboundcelldiv")&&(i||Ic(e.target,Ha)&&Ic(e.target,Ha).classList.contains("e-editedbatchcell"))}dblClickHandler(e){const t=Ic(e.target,"e-grid");if(Object(Ae.T)(t)||t.id!==this.element.id||Object(Ae.A)(e.target,".e-unboundcelldiv"))return;let i=!1;const s=Object(Ae.A)(e.target,"tr");if(s&&s.getAttribute("data-uid")){const e=this.getRowObjectFromUID(s.getAttribute("data-uid"));i=!!e&&e.isDataRow}const n=this.getRowInfo(e.target);n.target=e.target,i&&this.trigger("recordDoubleClick",n),this.notify(Pl,e)}focusOutHandler(e){if(this.isChildGrid(e))return;Ic(e.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");const t=this.element.querySelector(".e-cancel:not(.e-hide)");t&&t.classList.add("e-hide");const i=e.relatedTarget,s=i?i.getAttribute("aria-owns"):null;i&&(Ic(i,"e-grid")||(!Object(Ae.T)(s)&&s)===e.target.getAttribute("aria-owns"))||this.keyPress||!this.isEdit||Ae.d.isDevice||("Batch"!==this.editSettings.mode||(Ic(i,"e-ddl")||Ic(i,"e-ddt"))&&Ic(i,"e-input-group")||(this.editModule.saveCell(),this.notify(aa,{})),"Normal"===this.editSettings.mode&&this.editModule.editFormValidate()),this.keyPress=!1}isChildGrid(e){const t=Ic(e.target,"e-grid");return!(!t||t.id===this.element.id)}mergePersistGridData(e){const t=this.getLocalData();if(!Object(Ae.T)(t)&&""!==t||!Object(Ae.T)(e)){const i=Object(Ae.T)(e)?JSON.parse(t):e;this.enableVirtualization&&(i.pageSettings.currentPage=1);const s=Object.keys(i);this.isProtectedOnChange=!0;for(const e of s)"object"!=typeof this[e]||Object(Ae.T)(this[e])?this[e]=i[e]:Array.isArray(this[e])&&"columns"===e?(Rc(this[e]),this.mergeColumns(i[e],this[e]),this[e]=i[e]):Object(Ae.G)(this[e],i[e]);this.isProtectedOnChange=!1}}mergeColumns(e,t){const i=e;for(let s=0;s<i.length;s++){const e=t.filter(e=>e.index===i[s].index)[0];Object(Ae.T)(e)||(e.columns&&e.columns.length?(this.mergeColumns(i[s].columns,e.columns),i[s]=Object(Ae.G)(e,i[s],{},!0)):i[s]=Object(Ae.G)(e,i[s],{},!0))}}isDetail(){return!Object(Ae.T)(this.detailTemplate)||!Object(Ae.T)(this.childGrid)}isCommandColumn(e){return e.some(e=>e.columns?this.isCommandColumn(e.columns):!(!e.commands&&!e.commandsTemplate))}isForeignKeyEnabled(e){return e.some(e=>e.columns?this.isForeignKeyEnabled(e.columns):!(!e.dataSource||!e.foreignKeyValue))}keyPressHandler(e){const t=Object(Ae.G)(e,{cancel:!1});this.trigger("keyPressed",t),!0===t.cancel&&e.stopImmediatePropagation()}keyDownHandler(e){e.altKey&&(74===e.keyCode&&(this.keyA?(this.notify(Ca,{target:e.target,collapse:!1}),this.keyA=!1):(this.focusModule.focusHeader(),this.focusModule.addOutline())),87===e.keyCode&&(this.focusModule.focusContent(),this.focusModule.addOutline()),65===e.keyCode&&(this.keyA=!0),72===e.keyCode&&this.keyA&&(this.notify(Ca,{target:e.target,collapse:!0}),this.keyA=!1)),13===e.keyCode&&this.notify(xa,e)}keyActionHandler(e){this.isChildGrid(e)||this.isEdit&&"escape"!==e.action&&"enter"!==e.action&&"shiftEnter"!==e.action&&"tab"!==e.action&&"shiftTab"!==e.action||(this.keyPress=!0,this.allowKeyboard&&("ctrlPlusP"===e.action&&(e.preventDefault(),this.print()),this.notify(Rl,e)))}setInjectedModules(e){this.injectedModules=e}updateColumnObject(){Dc(this.columns,this.enableColumnVirtualization,this),Rc(this.columns),this.initForeignColumn(),this.notify(Nl,{})}getForeignKeyColumns(){return this.getColumns().filter(e=>e.isForeignColumn())}getRowHeight(){return this.rowHeight?this.rowHeight:function(e){if(void 0!==Pc)return Pc;const t=Object(Ae.D)("table",{className:Ya,styles:"visibility: hidden"});t.innerHTML='<tr><td class="e-rowcell">A<td></tr>',e.appendChild(t);const i=t.querySelector("td").getBoundingClientRect();return e.removeChild(t),Pc=Math.ceil(i.height),Pc}(this.element)}refreshColumns(){this.setFrozenCount();const e=this.getContent().querySelector(".e-frozen-left-content"),t=this.getContent().querySelector(".e-frozen-right-content"),i=!this.frozenRightCount&&!this.frozenLeftCount;if(0===this.getFrozenColumns()&&(!e&&this.frozenLeftCount||!t&&this.frozenRightCount||e&&!this.frozenLeftCount||t&&!this.frozenRightCount))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(i&&(1===this.getFrozenColumns()&&!e||0===this.getFrozenColumns()&&e))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(this.isPreventScrollEvent=!0,this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()){const e=this.contentModule.getMovableContent().querySelector(".e-table");Object(Ae.db)(e.querySelector(oh));const t=this.getHeaderContent().querySelector("."+Ga).querySelector(oh).cloneNode(!0);if(e.insertBefore(t,e.querySelector(nh)),"Left-Right"===this.getFrozenMode()){const e=this.contentModule.getFrozenRightContent().querySelector(".e-table");Object(Ae.db)(e.querySelector(oh));const t=this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(oh).cloneNode(!0);e.insertBefore(t,e.querySelector(nh))}}if(this.isFrozenGrid()){const e=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.headerModule.getMovableHeader().scrollLeft=e,this.contentModule.getMovableContent().scrollLeft=e}}excelExport(e,t,i,s){return this.excelExportModule?this.excelExportModule.Map(this,e,t,i,!1,s):null}csvExport(e,t,i,s){return this.excelExportModule?this.excelExportModule.Map(this,e,t,i,!0,s):null}pdfExport(e,t,i,s){return this.pdfExportModule?this.pdfExportModule.Map(this,e,t,i,s):null}groupColumn(e){this.groupModule&&this.groupModule.groupColumn(e)}groupExpandAll(){this.groupModule&&this.groupModule.expandAll()}groupCollapseAll(){this.groupModule&&this.groupModule.collapseAll()}clearGrouping(){this.groupModule&&this.groupModule.clearGrouping()}ungroupColumn(e){this.groupModule&&this.groupModule.ungroupColumn(e)}openColumnChooser(e,t){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(e,t)}scrollRefresh(){const e=()=>{this.scrollModule.refresh(),this.off(bl,e)};this.on(bl,e,this)}detailCollapseAll(){this.detailRowModule&&this.detailRowModule.collapseAll()}detailExpandAll(){this.detailRowModule&&this.detailRowModule.expandAll()}clearCellSelection(){this.selectionModule&&this.selectionModule.clearCellSelection()}clearRowSelection(){this.selectionModule&&this.selectionModule.clearRowSelection()}selectCells(e){this.selectionModule&&this.selectionModule.selectCells(e)}selectRowsByRange(e,t){this.selectionModule&&this.selectionModule.selectRowsByRange(e,t)}isContextMenuOpen(){return this.contextMenuModule&&this.contextMenuModule.isOpen}ensureModuleInjected(e){return this.getInjectedModules().indexOf(e)>=0}destroyTemplate(e,t){this.clearTemplate(e,t)}log(e,t){this.loggerModule&&this.loggerModule.log(e,t)}applyBiggerTheme(e){this.element.classList.contains("e-bigger")&&e.classList.add("e-bigger")}getPreviousRowData(){return this.getRowsObject()[this.getRows().length-1].data}hideScroll(){const e=this.getContent().querySelector(".e-content"),t=this.getContent().querySelector(".e-scrollbar");if(e.scrollHeight<=e.clientHeight&&(this.scrollModule.removePadding(),e.style.overflowY="auto"),this.isFrozenGrid()&&t){const e=this.getContent().querySelector(".e-movablescrollbar"),i=this.getContent().querySelector(".e-movablechild");t.style.display="flex",e.offsetWidth>=i.offsetWidth&&(t.style.display="none",this.notify(na,0))}}getRowIndexByPrimaryKey(e){const t=this.getPrimaryKeyFieldNames()[0];e="object"==typeof e?e[t]:e;const i=this.getRowsObject();for(let s=0;s<i.length;s++){if(i[s].isDetailRow||i[s].isCaptionRow)continue;let n=i[s].data[t];if(t.split(".").length>1&&(n=Cd(t,i[s].data)),n===e)return i[s].index}return-1}grabColumnByFieldFromAllCols(e){let t;this.columnModel=[],this.updateColumnModel(this.columns);const i=this.columnModel;for(let s=0;s<i.length;s++)e===i[s].field&&(t=i[s]);return t}grabColumnByUidFromAllCols(e){let t;this.columnModel=[],this.updateColumnModel(this.columns);const i=this.columnModel;for(let s=0;s<i.length;s++)e===i[s].uid&&(t=i[s]);return t}getFilteredRecords(){if(this.allowFiltering&&this.filterSettings.columns.length){const e=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof _e.a?this.renderModule.data.getData(this.dataSource,e):this.dataSource instanceof _e.a?this.dataSource.executeLocal(e):new _e.a(this.dataSource,e).executeLocal(e)}return[]}getUserAgent(){const e=Ae.d.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)}tapEvent(e){this.getUserAgent()&&(rd.timer?(clearTimeout(rd.timer),rd.timer=null,this.dblClickHandler(e),this.notify(Xl,e)):rd.timer=setTimeout(()=>{rd.timer=null},300))}getRowUid(e){return`${e}${this.rowUid++}`}getMovableVirtualContent(){return this.getContent().querySelector("."+Wa)}getFrozenVirtualContent(){return this.getContent().querySelector("."+_a)}getMovableVirtualHeader(){return this.getHeaderContent().querySelector("."+Ga)}getFrozenVirtualHeader(){return this.getHeaderContent().querySelector("."+Ua)}getRowElementByUID(e){let t,i=[];if(this.isFrozenGrid()){const e=[].slice.call(this.getFrozenVirtualContent().querySelector(nh).children),t=[].slice.call(this.getMovableVirtualContent().querySelector(nh).children);let s=[];if(3===this.tablesCount&&(s=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(nh).children)),this.frozenRows){if(i=[].slice.call(this.getFrozenVirtualHeader().querySelector(nh).children),i=i.concat([].slice.call(this.getMovableVirtualHeader().querySelector(nh).children)),3===this.tablesCount){const e=this.getHeaderContent().querySelector(".e-frozen-right-header");i=i.concat([].slice.call(e.querySelector(nh).children)).concat(s)}i=i.concat(e).concat(t)}else i=e.concat(t).concat(s)}else{const e=[].slice.call(this.getContent().querySelector(nh).children);this.frozenRows?(i=[].slice.call(this.getHeaderContent().querySelector(nh).children),i=i.concat(e)):i=e}for(const s of i)if(s.getAttribute("data-uid")===e){t=s;break}return t}getHiddenColumns(){const e=[];for(const t of this.columnModel)!1===t.visible&&e.push(t);return e}calculatePageSizeByParentHeight(e){if(this.allowPaging&&(this.allowTextWrap&&"Header"===this.textWrapSettings.wrapMode||!this.allowTextWrap)){let t=0;if(-1!==e.indexOf("%")&&(e=parseInt(e,10)/100*this.element.clientHeight),e>this.getNoncontentHeight()+this.getRowHeight()){let i=0;i=e-this.getNoncontentHeight(),t=i/this.getRowHeight()}if(t>0)return Math.floor(t)}return 0}getNoncontentHeight(){let e=0;if(Object(Ae.T)(this.getHeaderContent().clientHeight)||(e+=this.getHeaderContent().clientHeight),this.toolbar&&!Object(Ae.T)(this.element.querySelector(".e-toolbar").clientHeight)&&(e+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!Object(Ae.T)(this.element.querySelector(".e-gridpager").clientHeight)&&(e+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!Object(Ae.T)(this.element.querySelector(".e-columnheader").clientHeight)&&(e+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!Object(Ae.T)(this.element.querySelector(".e-groupdroparea").clientHeight)&&(e+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!Object(Ae.T)(this.element.querySelector(".e-summaryrow").clientHeight))for(let t=0;t<this.element.getElementsByClassName("e-summaryrow").length;t++)e+=this.element.getElementsByClassName("e-summaryrow")[t].clientHeight;return e}getSummaryValues(e,t){return _e.b.aggregates[e.type.toLowerCase()](t,e.field)}serverExcelExport(e){this.isExcel=!0,this.exportGrid(e)}serverPdfExport(e){this.isExcel=!1,this.exportGrid(e)}serverCsvExport(e){this.isExcel=!0,this.exportGrid(e)}exportGrid(e){const t=this.getDataModule().generateQuery(!0),i=(new _e.f).processQuery(new _e.a({url:""}),t),s=JSON.parse(i.data),n=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"]));n.filterSettings.columns=s.where,n.searchSettings.fields=s.search&&s.search[0].fields||[],n.sortSettings.columns=s.sorted,n.columns=this.setHeaderText(n.columns,["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"]);const o=this.createElement("form",{id:"ExportForm",styles:"display:none;"}),r=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});r.value=JSON.stringify(n),o.method="POST",o.action=e,o.appendChild(r),document.body.appendChild(o),o.submit(),o.remove()}setHeaderText(e,t){for(let i=0;i<e.length;i++){const s=this.getColumnByUid(e[i].uid);e[i].headerText=s.headerText,Object(Ae.T)(s.template)||(e[i].template="true"),e[i].format&&(e[i].format=yd(this.getFormat(e[i].format),e[i].type,this.isExcel)),e[i].columns&&this.setHeaderText(e[i].columns,t);const n=Object.keys(e[i]);for(let o=0;o<n.length;o++)t.indexOf(n[o])<0&&delete e[i][n[o]]}return e}getFormat(e){return"object"==typeof e?Object(Ae.T)(e.format)?e.skeleton:e.format:e}isCollapseStateEnabled(){return!1===this.isExpanded}updateRowValue(e,t){const i={requestType:"save",data:t};this.showSpinner(),this.notify(Wl,i),this.refresh()}setForeignKeyData(){this.dataBind();const e=this.getDataModule().getForeignKeyDataState();e.isPending?(this.getDataModule().setForeignKeyDataState({}),e.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())}resetFilterDlgPosition(e){const t=this.getColumnHeaderByField(e);if(t){const e=t.querySelector(".e-filtermenudiv"),i=this.element.querySelector(".e-filter-popup");if(e&&i){const t=this.element.getBoundingClientRect(),s=e.getBoundingClientRect();i&&(i.style.left=(s.right-t.left).toString()+"px")}}}renderTemplates(){this.notify("reactTemplateRender",this.portals),this.renderReactTemplates()}batchUpdate(e){this.processRowChanges(e)}batchAsyncUpdate(e){this.processBulkRowChanges(e)}processBulkRowChanges(e){if(this.dataToBeUpdated){const t=["addedRecords","changedRecords","deletedRecords"],i=this.getPrimaryKeyFieldNames()[0];for(let s=0;s<t.length;s++)e[t[s]]&&hd(this,e,t[s],i)}else this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},e),setTimeout(()=>{this.processRowChanges(this.dataToBeUpdated),this.dataToBeUpdated=null},this.asyncTimeOut)}processRowChanges(e){const t=this.getPrimaryKeyFieldNames()[0];e=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},e);const i=this.getDataModule().saveChanges(e,t,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?i.then(()=>{this.setNewData()}):this.setNewData()}setNewData(){const e=JSON.parse(JSON.stringify(this.getCurrentViewRecords()));this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount()).then(t=>{this.bulkRefresh(t.result,e,t.count)})}deleteRowElement(e){const t=this.getRowElementByUID(e.uid),i=parseInt(t.getAttribute(sh),10);if(Object(Ae.db)(t),this.getFrozenColumns()){const e=this.getMovableRows()[i];Object(Ae.db)(e)}}bulkRefresh(e,t,i){const s=this.getRowsObject(),n=this.getPrimaryKeyFieldNames()[0];for(let r=0;r<s.length;r++)e.filter(e=>e[n]===s[r].data[n]).length||(this.deleteRowElement(s[r]),s.splice(r,1),r--);for(let r=0;r<e.length;r++){let i;t.filter(t=>{t[n]===e[r][n]&&(t!==e[r]&&this.setRowData(e[r][n],e[r]),i=!0)}),i||this.renderRowElement(e[r],r)}this.currentViewData=e;const o=[].slice.call(this.getContentTable().getElementsByClassName(Xa));(function(e,t,i,s){let n=0;for(let o=0;o<t.length;o++)if(t[o].isDataRow){t[o].index=n,t[o].isAltRow=!!e.enableAltRow&&n%2!=0,i[o].setAttribute(sh,n.toString()),t[o].isAltRow?i[o].classList.add("e-altrow"):i[o].classList.remove("e-altrow");for(let e=0;e<i[o].cells.length;e++)i[o].cells[e].setAttribute("index",n.toString());n++}t.length||e.renderModule.emptyRow(!0)})(this,this.getRowsObject(),o),function(e){if(e.isFrozenGrid()){e.contentModule.rowElements=[].slice.call(e.element.querySelectorAll(".e-movableheader .e-row, .e-movablecontent .e-row"));const t=e.getFrozenMode()===Za?".e-frozen-left-header .e-row, .e-frozen-left-content .e-row":".e-frozenheader .e-row, .e-frozencontent .e-row";e.contentModule.freezeRowElements=[].slice.call(e.element.querySelectorAll(t)),e.getFrozenMode()===Za&&(e.contentModule.frozenRightRowElements=[].slice.call(e.element.querySelectorAll(".e-frozen-right-header .e-row, .e-frozen-right-content .e-row")))}else e.contentModule.rowElements=[].slice.call(e.element.querySelectorAll(".e-row:not(.e-addedrow)"))}(this),this.allowPaging&&this.notify(vl,{module:"pager",properties:{totalRecordsCount:i}})}renderRowElement(e,t){const i=new ch(this.serviceLocator,null,this),s=new dh(this).generateRows([e]),n=i.render(s[0],this.getColumns());let o,r;this.addRowObject(s[0],t);let l=this.getContentTable().querySelector(nh);if(l.querySelector(".e-emptyrow")){const e=l.querySelector(".e-emptyrow");if(e.parentNode.removeChild(e),this.getFrozenColumns()){const e=this.getContent().querySelector("."+Wa).querySelector(nh);e.firstElementChild.parentNode.removeChild(e.firstElementChild)}}this.getFrozenColumns()&&(o=function(e,t,i){t=t&&i&&i.isRowDragable()?t+1:t;const s=e.cloneNode(!0);for(let n=0;n<t;n++)s.removeChild(s.children[0]);for(let n=t,o=e.childElementCount;n<o;n++)e.removeChild(e.children[e.childElementCount-1]);return s}(n,this.getFrozenColumns(),this),r=this.frozenRows&&t<this.frozenRows?this.getHeaderContent().querySelector("."+Ga).querySelector(nh):this.getContent().querySelector("."+Wa).querySelector(nh),r.appendChild(o),"auto"===this.height&&this.notify(na,{})),l=this.frozenRows&&t<this.frozenRows?this.getHeaderContent().querySelector(nh):this.getContent().querySelector(nh),l=this.getContent().querySelector(nh),l.appendChild(n)}addRowObject(e,t){const i=this.getFrozenColumns();if(i){const s=this.getMovableRowsObject(),n=e.clone();n.cells=n.cells.slice(i),e.cells=e.cells.slice(0,i),s.splice(t,1,n)}this.getRowsObject().splice(t,1,e)}updateVisibleExpandCollapseRows(){const e=this.getRowsObject();for(let t=0,i=e.length;t<i;t++)e[t].visible=!e[t].isDataRow||"none"!==this.getRowElementByUID(e[t].uid).style.display}getHeight(e){return Number.isInteger(e)||-1===e.indexOf("%")?Number.isInteger(e)||"auto"===this.height?this.height:parseInt(e,10):parseInt(e,10)/100*this.element.clientHeight}getFrozenRightContent(){return this.getContent().querySelector(".e-frozen-right-content")}getFrozenRightHeader(){return this.getHeaderContent().querySelector(".e-frozen-right-header")}getMovableHeaderTbody(){return this.getMovableVirtualHeader().querySelector(nh)}getMovableContentTbody(){return this.getMovableVirtualContent().querySelector(nh)}getFrozenHeaderTbody(){return this.getFrozenVirtualHeader().querySelector(nh)}getFrozenLeftContentTbody(){return this.getFrozenVirtualContent().querySelector(nh)}getFrozenRightHeaderTbody(){return this.getFrozenRightHeader().querySelector(nh)}getFrozenRightContentTbody(){let e;return this.getFrozenRightContent()&&(e=this.getFrozenRightContent().querySelector(nh)),e}showResponsiveCustomFilter(e){this.filterModule&&this.filterModule.showCustomFilter(e||"Vertical"===this.rowRenderingMode)}showResponsiveCustomSort(e){this.sortModule&&this.sortModule.showCustomSort(e||"Vertical"===this.rowRenderingMode)}showAdaptiveFilterDialog(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)}showAdaptiveSortDialog(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)}getCurrentVisibleColumns(e){const t=[],i=e?this.getColumns():this.columnModel;for(const s of i)s.visible&&t.push(s);return t}enableInfiniteAggrgate(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)}};return lc([Object(Ae.r)()],e.prototype,"parentDetails",void 0),lc([Object(Ae.r)([])],e.prototype,"columns",void 0),lc([Object(Ae.r)(!0)],e.prototype,"enableAltRow",void 0),lc([Object(Ae.r)(!0)],e.prototype,"enableHover",void 0),lc([Object(Ae.r)(!1)],e.prototype,"enableAutoFill",void 0),lc([Object(Ae.r)(!0)],e.prototype,"allowKeyboard",void 0),lc([Object(Ae.r)(!1)],e.prototype,"enableStickyHeader",void 0),lc([Object(Ae.r)(!1)],e.prototype,"allowTextWrap",void 0),lc([Object(Ae.g)({},bc)],e.prototype,"textWrapSettings",void 0),lc([Object(Ae.g)({},fc)],e.prototype,"resizeSettings",void 0),lc([Object(Ae.r)(!1)],e.prototype,"allowPaging",void 0),lc([Object(Ae.g)({},Xh)],e.prototype,"pageSettings",void 0),lc([Object(Ae.r)(!1)],e.prototype,"enableVirtualization",void 0),lc([Object(Ae.r)(!1)],e.prototype,"enableColumnVirtualization",void 0),lc([Object(Ae.r)(!1)],e.prototype,"enableInfiniteScrolling",void 0),lc([Object(Ae.g)({},mc)],e.prototype,"searchSettings",void 0),lc([Object(Ae.r)(!1)],e.prototype,"allowSorting",void 0),lc([Object(Ae.r)("Ellipsis")],e.prototype,"clipMode",void 0),lc([Object(Ae.r)(!0)],e.prototype,"allowMultiSorting",void 0),lc([Object(Ae.r)(!1)],e.prototype,"allowExcelExport",void 0),lc([Object(Ae.r)(!1)],e.prototype,"allowPdfExport",void 0),lc([Object(Ae.g)({},hc)],e.prototype,"sortSettings",void 0),lc([Object(Ae.g)({},dc)],e.prototype,"infiniteScrollSettings",void 0),lc([Object(Ae.r)(!0)],e.prototype,"allowSelection",void 0),lc([Object(Ae.r)(-1)],e.prototype,"selectedRowIndex",void 0),lc([Object(Ae.g)({},uc)],e.prototype,"selectionSettings",void 0),lc([Object(Ae.r)(!1)],e.prototype,"allowFiltering",void 0),lc([Object(Ae.r)("Horizontal")],e.prototype,"rowRenderingMode",void 0),lc([Object(Ae.r)(!1)],e.prototype,"enableAdaptiveUI",void 0),lc([Object(Ae.r)(!1)],e.prototype,"allowReordering",void 0),lc([Object(Ae.r)(!1)],e.prototype,"allowResizing",void 0),lc([Object(Ae.r)(!1)],e.prototype,"allowRowDragAndDrop",void 0),lc([Object(Ae.g)({},gc)],e.prototype,"rowDropSettings",void 0),lc([Object(Ae.g)({},pc)],e.prototype,"filterSettings",void 0),lc([Object(Ae.r)(!1)],e.prototype,"allowGrouping",void 0),lc([Object(Ae.r)(!1)],e.prototype,"enableImmutableMode",void 0),lc([Object(Ae.r)(!1)],e.prototype,"showColumnMenu",void 0),lc([Object(Ae.g)({},yc)],e.prototype,"groupSettings",void 0),lc([Object(Ae.g)({},vc)],e.prototype,"editSettings",void 0),lc([Object(Ae.f)([],nc)],e.prototype,"aggregates",void 0),lc([Object(Ae.r)(!1)],e.prototype,"showColumnChooser",void 0),lc([Object(Ae.g)({},$h)],e.prototype,"columnChooserSettings",void 0),lc([Object(Ae.r)(!1)],e.prototype,"enableHeaderFocus",void 0),lc([Object(Ae.r)("auto")],e.prototype,"height",void 0),lc([Object(Ae.r)("auto")],e.prototype,"width",void 0),lc([Object(Ae.r)("Default")],e.prototype,"gridLines",void 0),lc([Object(Ae.r)()],e.prototype,"rowTemplate",void 0),lc([Object(Ae.r)()],e.prototype,"detailTemplate",void 0),lc([Object(Ae.r)()],e.prototype,"childGrid",void 0),lc([Object(Ae.r)()],e.prototype,"queryString",void 0),lc([Object(Ae.r)("AllPages")],e.prototype,"printMode",void 0),lc([Object(Ae.r)("Expanded")],e.prototype,"hierarchyPrintMode",void 0),lc([Object(Ae.r)([])],e.prototype,"dataSource",void 0),lc([Object(Ae.r)(null)],e.prototype,"rowHeight",void 0),lc([Object(Ae.r)()],e.prototype,"query",void 0),lc([Object(Ae.r)("USD")],e.prototype,"currencyCode",void 0),lc([Object(Ae.r)()],e.prototype,"toolbar",void 0),lc([Object(Ae.r)()],e.prototype,"contextMenuItems",void 0),lc([Object(Ae.r)()],e.prototype,"columnMenuItems",void 0),lc([Object(Ae.r)()],e.prototype,"toolbarTemplate",void 0),lc([Object(Ae.r)()],e.prototype,"pagerTemplate",void 0),lc([Object(Ae.r)(0)],e.prototype,"frozenRows",void 0),lc([Object(Ae.r)(0)],e.prototype,"frozenColumns",void 0),lc([Object(Ae.r)("All")],e.prototype,"columnQueryMode",void 0),lc([Object(Ae.r)({})],e.prototype,"currentAction",void 0),lc([Object(Ae.r)("19.3.53")],e.prototype,"ej2StatePersistenceVersion",void 0),lc([Object(Ae.k)()],e.prototype,"created",void 0),lc([Object(Ae.k)()],e.prototype,"destroyed",void 0),lc([Object(Ae.k)()],e.prototype,"load",void 0),lc([Object(Ae.k)()],e.prototype,"rowDataBound",void 0),lc([Object(Ae.k)()],e.prototype,"queryCellInfo",void 0),lc([Object(Ae.k)()],e.prototype,"headerCellInfo",void 0),lc([Object(Ae.k)()],e.prototype,"actionBegin",void 0),lc([Object(Ae.k)()],e.prototype,"actionComplete",void 0),lc([Object(Ae.k)()],e.prototype,"actionFailure",void 0),lc([Object(Ae.k)()],e.prototype,"dataBound",void 0),lc([Object(Ae.k)()],e.prototype,"recordDoubleClick",void 0),lc([Object(Ae.k)()],e.prototype,"recordClick",void 0),lc([Object(Ae.k)()],e.prototype,"rowSelecting",void 0),lc([Object(Ae.k)()],e.prototype,"rowSelected",void 0),lc([Object(Ae.k)()],e.prototype,"rowDeselecting",void 0),lc([Object(Ae.k)()],e.prototype,"rowDeselected",void 0),lc([Object(Ae.k)()],e.prototype,"cellSelecting",void 0),lc([Object(Ae.k)()],e.prototype,"cellSelected",void 0),lc([Object(Ae.k)()],e.prototype,"cellDeselecting",void 0),lc([Object(Ae.k)()],e.prototype,"cellDeselected",void 0),lc([Object(Ae.k)()],e.prototype,"columnSelecting",void 0),lc([Object(Ae.k)()],e.prototype,"columnSelected",void 0),lc([Object(Ae.k)()],e.prototype,"columnDeselecting",void 0),lc([Object(Ae.k)()],e.prototype,"columnDeselected",void 0),lc([Object(Ae.k)()],e.prototype,"columnDragStart",void 0),lc([Object(Ae.k)()],e.prototype,"columnDrag",void 0),lc([Object(Ae.k)()],e.prototype,"columnDrop",void 0),lc([Object(Ae.k)()],e.prototype,"printComplete",void 0),lc([Object(Ae.k)()],e.prototype,"beforePrint",void 0),lc([Object(Ae.k)()],e.prototype,"pdfQueryCellInfo",void 0),lc([Object(Ae.k)()],e.prototype,"pdfHeaderQueryCellInfo",void 0),lc([Object(Ae.k)()],e.prototype,"pdfAggregateQueryCellInfo",void 0),lc([Object(Ae.k)()],e.prototype,"excelAggregateQueryCellInfo",void 0),lc([Object(Ae.k)()],e.prototype,"exportDetailDataBound",void 0),lc([Object(Ae.k)()],e.prototype,"excelQueryCellInfo",void 0),lc([Object(Ae.k)()],e.prototype,"excelHeaderQueryCellInfo",void 0),lc([Object(Ae.k)()],e.prototype,"beforeExcelExport",void 0),lc([Object(Ae.k)()],e.prototype,"excelExportComplete",void 0),lc([Object(Ae.k)()],e.prototype,"beforePdfExport",void 0),lc([Object(Ae.k)()],e.prototype,"pdfExportComplete",void 0),lc([Object(Ae.k)()],e.prototype,"rowDragStartHelper",void 0),lc([Object(Ae.k)()],e.prototype,"detailDataBound",void 0),lc([Object(Ae.k)()],e.prototype,"rowDragStart",void 0),lc([Object(Ae.k)()],e.prototype,"rowDrag",void 0),lc([Object(Ae.k)()],e.prototype,"rowDrop",void 0),lc([Object(Ae.k)()],e.prototype,"toolbarClick",void 0),lc([Object(Ae.k)()],e.prototype,"beforeOpenColumnChooser",void 0),lc([Object(Ae.k)()],e.prototype,"beforeOpenAdaptiveDialog",void 0),lc([Object(Ae.k)()],e.prototype,"batchAdd",void 0),lc([Object(Ae.k)()],e.prototype,"batchDelete",void 0),lc([Object(Ae.k)()],e.prototype,"batchCancel",void 0),lc([Object(Ae.k)()],e.prototype,"beforeBatchAdd",void 0),lc([Object(Ae.k)()],e.prototype,"beforeBatchDelete",void 0),lc([Object(Ae.k)()],e.prototype,"beforeBatchSave",void 0),lc([Object(Ae.k)()],e.prototype,"beginEdit",void 0),lc([Object(Ae.k)()],e.prototype,"commandClick",void 0),lc([Object(Ae.k)()],e.prototype,"cellEdit",void 0),lc([Object(Ae.k)()],e.prototype,"cellSave",void 0),lc([Object(Ae.k)()],e.prototype,"cellSaved",void 0),lc([Object(Ae.k)()],e.prototype,"resizeStart",void 0),lc([Object(Ae.k)()],e.prototype,"resizing",void 0),lc([Object(Ae.k)()],e.prototype,"resizeStop",void 0),lc([Object(Ae.k)()],e.prototype,"keyPressed",void 0),lc([Object(Ae.k)()],e.prototype,"beforeDataBound",void 0),lc([Object(Ae.k)()],e.prototype,"contextMenuOpen",void 0),lc([Object(Ae.k)()],e.prototype,"contextMenuClick",void 0),lc([Object(Ae.k)()],e.prototype,"columnMenuOpen",void 0),lc([Object(Ae.k)()],e.prototype,"columnMenuClick",void 0),lc([Object(Ae.k)()],e.prototype,"checkBoxChange",void 0),lc([Object(Ae.k)()],e.prototype,"beforeCopy",void 0),lc([Object(Ae.k)()],e.prototype,"beforePaste",void 0),lc([Object(Ae.k)()],e.prototype,"beforeAutoFill",void 0),lc([Object(Ae.k)()],e.prototype,"columnDataStateChange",void 0),lc([Object(Ae.k)()],e.prototype,"dataStateChange",void 0),lc([Object(Ae.k)()],e.prototype,"dataSourceChanged",void 0),lc([Object(Ae.k)()],e.prototype,"exportGroupCaption",void 0),lc([Object(Ae.k)()],e.prototype,"lazyLoadGroupExpand",void 0),lc([Object(Ae.k)()],e.prototype,"lazyLoadGroupCollapse",void 0),e=rc=lc([Ae.q],e),e})(),wc=(()=>{class e{constructor(e,t){this.isAsyncPrint=!1,this.defered=new _e.c,this.parent=e,this.parent.isDestroyed||(this.parent.on(bl,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(_r,this.actionBeginFunction),this.parent.on(yl,this.onEmpty.bind(this)),this.parent.on(ha,this.hierarchyPrint,this),this.scrollModule=t)}isContentReady(){return!this.isPrintGrid()||"None"!==this.parent.hierarchyPrintMode&&this.parent.childGrid?()=>{this.defered.promise.then(()=>{this.contentReady()}),this.isPrintGrid()&&this.hierarchyPrint()}:this.contentReady}hierarchyPrint(){this.removeColGroup(this.parent);const e=window.printGridObj;e&&!e.element.querySelector("[aria-busy=true")&&e.printModule.defered.resolve()}print(){this.renderPrintGrid()}onEmpty(){this.isPrintGrid()&&this.contentReady()}actionBegin(){this.isPrintGrid()&&(this.isAsyncPrint=!0)}renderPrintGrid(){const e=this.parent,t=Object(Ae.D)("div",{id:this.parent.element.id+"_print",className:e.element.className+" e-print-grid"});t.classList.remove("e-gridhover"),document.body.appendChild(t);const i=new Cc(id(e,e.hierarchyPrintMode));if(e.isFrozenGrid()&&!e.getFrozenColumns())for(let o=0;o<i.columns.length;o++)i.columns[o]=Object(Ae.G)({},i.columns[o]),i.columns[o].freeze=void 0;this.parent.isAngular&&(i.viewContainerRef=this.parent.viewContainerRef),i.load=()=>{},i.query=e.getQuery().clone(),window.printGridObj=i,i.isPrinting=!0;const s=i.getInjectedModules(),n=e.getInjectedModules();s&&s.length===n.length||i.setInjectedModules(n),e.notify("printGrid-Init",{element:t,printgrid:i}),this.parent.log("exporting_begin",this.getModuleName()),i.registeredTemplate=this.parent.registeredTemplate,i.appendTo(t),i.trigger=e.trigger}contentReady(){if(this.isPrintGrid()){const e=this.parent;if(this.isAsyncPrint)return void this.printGrid();const t={requestType:"print",element:e.element,selectedRows:e.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:e.hierarchyPrintMode};if(this.isAsyncPrint||e.trigger(ol,t),t.cancel)return void Object(Ae.F)(e.element);this.isAsyncPrint||this.printGrid()}}printGrid(){const e=this.parent;if("auto"!==e.height){const t=this.scrollModule.getCssProperties(),i=e.element.querySelector(".e-content"),s=e.element.querySelector(".e-gridheader");i.style.height="auto",i.style.overflowY="auto",s.style[t.padding]="",s.firstElementChild.style[t.border]=""}e.allowGrouping&&(e.groupSettings.columns.length?this.removeColGroup(e):e.element.querySelector(".e-groupdroparea").style.display="none");for(const i of[].slice.call(e.element.getElementsByClassName(Ka)))i.style.overflowX="hidden";const t=[].slice.call(e.element.getElementsByClassName("e-spin-show"));for(const i of[].slice.call(t))Object(Ae.y)(i,["e-spin-hide"],["e-spin-show"]);this.printGridElement(e),e.isPrinting=!1,delete window.printGridObj,e.trigger(rl,{element:e.element}),e.destroy(),this.parent.log("exporting_complete",this.getModuleName())}printGridElement(e){Object(Ae.y)(e.element,["e-print-grid-layout"],["e-print-grid"]),e.isPrinting&&Object(Ae.F)(e.element),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=Object(Ae.cb)(e.element,this.printWind)}removeColGroup(e){const t=e.groupSettings.columns.length,i=e.element,s="#"+e.element.id;if(!t)return;const n=Object(Ae.ib)(`${s}captioncell.e-groupcaption`,i),o=n[t-1].getAttribute("colspan");for(let a=0;a<n.length;a++)n[a].setAttribute("colspan",o);const r=Object(Ae.ib)(`colgroup${s}colGroup`,i),l=Object(Ae.ib)(".e-content colgroup",i);this.hideColGroup(r,t),this.hideColGroup(l,t)}hideColGroup(e,t){for(let i=0;i<e.length;i++)for(let s=0;s<t;s++)e[i].children[s].style.display="none"}isPrintGrid(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting}destroy(){this.parent.isDestroyed||(this.parent.off(bl,this.contentReady.bind(this)),this.parent.removeEventListener(_r,this.actionBeginFunction),this.parent.off(yl,this.onEmpty.bind(this)),this.parent.off(ha,this.hierarchyPrint))}getModuleName(){return"print"}}return e.printGridProp=["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound",ol,rl,Nr],e})();function Oc(e,t,i){return Object(Ae.T)(e)||""===e?"":_e.b.getObject(e,t)}function Sc(e,t){requestAnimationFrame(()=>{try{t(null,e())}catch(i){t(i)}})}function Tc(e,t){const i=[];for(let s=0,n=e.length;s<n;s++){const n=t(e[s],s);Object(Ae.T)(n)||i.push(n)}return i}function jc(e){const t=[];for(let i=0;i<e.length;i++)t.push(Object(Ae.G)({},kc(e[i]),{},!0));return t}function Ec(e){if(e)try{if(document.querySelectorAll(e).length)return Object(Ae.C)(document.querySelector(e).innerHTML.trim())}catch(t){return Object(Ae.C)(e)}}function xc(e,t){const i={},s=["style","class"];Object(Ae.G)(i,t,{}),"style"in i&&(Object(Ae.kb)(e,i[s[0]]),delete i[s[0]]),"class"in i&&(Object(Ae.u)([e],i[s[1]]),delete i[s[1]]),Object(Ae.w)(e,i)}function Rc(e,t=0){for(let i=0,s=e.length;i<s;i++)e[i].columns?(e[i].index=Object(Ae.T)(e[i].index)?t:e[i].index,t++,t=Rc(e[i].columns,t)):(e[i].index=Object(Ae.T)(e[i].index)?t:e[i].index,t++);return t}function Dc(e,t,i){for(let s=0,n=e.length;s<n;s++){let n;"string"==typeof e[s]?n=new Vr({field:e[s]},i):e[s]instanceof Vr&&!e[s].columns?n=e[s]:e[s].columns?(e[s].columns=Dc(e[s].columns,null,i),n=new Vr(e[s],i)):n=new Vr(e[s],i),n.type&&"checkbox"===n.type.toLowerCase()&&(n.allowReordering=!1),n.headerText=Object(Ae.T)(n.headerText)?n.foreignKeyValue||n.field||"":n.headerText,n.foreignKeyField=n.foreignKeyField||n.field,n.valueAccessor=("string"==typeof n.valueAccessor?Object(Ae.R)(n.valueAccessor,window):n.valueAccessor)||Oc,n.width=t&&Object(Ae.T)(n.width)?200:n.width,Object(Ae.T)(n.visible)&&(n.visible=!0),e[s]=n}return e}function kc(e){return e instanceof Ae.e?Object(Ae.R)("properties",e):e}function Ic(e,t,i){let s=e;for(;s&&!(i?s.id===t:s.classList.contains(t));)s=s.parentElement;return s}function Fc(e){const t=[];for(let i=0,s=e.length;i<s;i++)e[i].hasOwnProperty("properties")?t.push(e[i].properties):t.push(e[i]);return t}function Ac(e){const t={};return t.x=Object(Ae.T)(e.clientX)?e.changedTouches[0].clientX:e.clientX,t.y=Object(Ae.T)(e.clientY)?e.changedTouches[0].clientY:e.clientY,t}let Mc=0;function Lc(e){return e+Mc++}function zc(e,t){for(let i=0,s=t.length;i<s;i++)e.appendChild(s===t.length?t[i]:t[0]);return e}function Bc(e,t,i,s){if("Custom"===e){let e=i.customAggregate;return"string"==typeof e&&(e=Object(Ae.R)(e,window)),e?e.call(s,t,i):""}return i.field in t||t instanceof Array?_e.b.aggregates[e.toLowerCase()](t,i.field):null}let Pc,Hc=null;function Vc(){if(null!==Hc)return Hc;const e=document.createElement("div");let t=0;return e.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth|0,document.body.removeChild(e),Hc=t}function Nc(e=""){return e.replace(/\./g,"___")}function qc(e=""){return e.replace(/___/g,".")}function Wc(e,t,i){const s=Ic(i,Xa),n=!s||s&&!s.classList.contains("e-insertedrow");return"beginEdit"===t&&n?!(e.isIdentity||e.isPrimaryKey||!e.allowEditing):!("add"===t&&e.isIdentity||n&&!e.allowEditing&&!e.isIdentity&&!e.isPrimaryKey)}function Gc(e,t){const i="e-wrap";e=e instanceof Array?e:[e];for(let s=0;s<e.length;s++)t?e[s].classList.add(i):e[s].classList.remove(i)}function _c(e,t){const i=e.getService("valueFormatter");let s;switch("date"!==t.type&&"datetime"!==t.type||(s={type:t.type,skeleton:t.format},"string"==typeof t.format&&"yMd"!==t.format&&(s.format=t.format)),t.type){case"date":case"datetime":t.setFormatter(i.getFormatFunction(s)),t.setParser(i.getParserFunction(s));break;case"number":t.setFormatter(i.getFormatFunction({format:t.format})),t.setParser(i.getParserFunction({format:t.format}))}}function Uc(e,t,...i){for(let s=0,n=e.length;s<n;s++)t?(Object(Ae.y)(e[s],[...i],[]),e[s].setAttribute("aria-selected","true")):(Object(Ae.y)(e[s],[],[...i]),e[s].removeAttribute("aria-selected"))}function Kc(e,t){e.checked=t}function Yc(e,t,i){const s=Object(Ae.D)("div",{className:i});return s.appendChild(t),s.setAttribute("uid",e),s}function Xc(e,t){Object(Ae.eb)([e],["e-check","e-stop","e-uncheck"]),e.classList.add(t?"e-check":"e-uncheck")}function Qc(e,t,i){for(let n=0;n<t.length;n++)Object(Ae.mb)(t[n].field,$c(t[n],i),e.foreignKeyData);const s=e.cells;for(let n=0;n<s.length;n++)s[n].isForeignKey&&Object(Ae.mb)("foreignKeyData",Object(Ae.R)(s[n].column.field,e.foreignKeyData),s[n])}function $c(e,t,i,s){const n=e.foreignKeyField;let o=Object(Ae.T)(i)?Oc(e.field,t):i;o=Object(Ae.T)(o)?"":o;const r=new _e.e,l=s||(e.dataSource instanceof _e.a&&e.dataSource.dataSource.json.length?e.dataSource.dataSource.json:e.columnData);return o.getDay?r.where(Zc({field:n,operator:"equal",value:o,matchCase:!1})):r.where(n,"==",o,!1),new _e.a(l).executeLocal(r)}function Jc(e,t){let i;return t.some(t=>(i=t,t.foreignKeyValue===e))&&i}function Zc(e,t){let i,s,n;const o=Object(Ae.G)({},kc(e)),r=Object(Ae.G)({},kc(e));if(Object(Ae.T)(e.value))return i=new _e.d(o.field,o.operator,o.value,!1),i;const l=new Date(e.value);if("equal"===e.operator||"notequal"===e.operator){"datetime"===t?(s=new Date(l.setSeconds(l.getSeconds()-1)),n=new Date(l.setSeconds(l.getSeconds()+2)),e.value=new Date(l.setSeconds(n.getSeconds()-1))):(s=new Date(l.setHours(0)-1),n=new Date(l.setHours(24))),o.value=s,r.value=n,"equal"===e.operator?(o.operator="greaterthan",r.operator="lessthan"):"notequal"===e.operator&&(o.operator="lessthanorequal",r.operator="greaterthanorequal");const a=new _e.d(o.field,o.operator,o.value,!1),h=new _e.d(r.field,r.operator,r.value,!1);i="equal"===e.operator?a.and(h):a.or(h)}else"date"!==t||"lessthanorequal"!==e.operator&&"greaterthan"!==e.operator||(o.value=new Date(l.setHours(24)-1)),"string"==typeof o.value&&(o.value=new Date(o.value)),i=new _e.d(o.field,o.operator,o.value,!1);return e.setProperties?e.setProperties({ejpredicate:i},!0):e.ejpredicate=i,i}function ed(e){return e.enableVirtualization&&e.groupSettings.columns.length>0&&e.isVirtualAdaptive}function td(e="",t){if(e){let i=t;const s=e.split(".");for(let e=0;e<s.length&&!Object(Ae.T)(i);e++)i=i[s[e]];return i}}function id(e,t="Expanded"){const i={};if(!e)return i;const s=e.isFrozenGrid()&&!e.getFrozenColumns();for(const n of wc.printGridProp)i[n]="columns"===n?Fc(s?e.getColumns():e[n]):"allowPaging"===n?"CurrentPage"===e.printMode:kc(e[n]);return i.enableHover=!1,e.childGrid&&"None"!==t&&(i.expandedRows=function(e,t){const i=e.getRowsObject(),s={};for(const n of i)if(n.isExpand&&!n.isDetailRow){const i=e.allowPaging&&"AllPages"===e.printMode?n.index+e.pageSettings.currentPage*e.pageSettings.pageSize-e.pageSettings.pageSize:n.index;s[i]={},s[i].isExpand=!0,s[i].gridModel=id(n.childGrid,t),s[i].gridModel.query=e.childGrid.query}return s}(e,t)),i}function sd(e,t,i,s){const n=e||{};let o=arguments.length;s&&(o-=1);for(let r=1;r<o;r++){if(!arguments[r])continue;const e=arguments[r],t=Object.keys(Object.getPrototypeOf(e)).length?Object.keys(e).concat(nd(e)):Object.keys(e);for(let i=0;i<t.length;i++){const o=n[t[i]],r=e[t[i]];let l;s&&(Object(Ae.U)(r)||Array.isArray(r))?Object(Ae.U)(r)?(l=o||{},n[t[i]]=Object(Ae.G)({},l,r,s)):(l=o||[],n[t[i]]=Object(Ae.G)([],l,r,s)):n[t[i]]=r}}return n}function nd(e){let t=[];for(;Object.getPrototypeOf(e)&&Object.keys(Object.getPrototypeOf(e)).length;)t=t.concat(Object.keys(Object.getPrototypeOf(e))),e=Object.getPrototypeOf(e);return t}function od(e,t){let i=t;const s=[];if(e.columns){t++;for(let i=0;i<e.columns.length;i++)s[i]=od(e.columns[i],t);for(let e=0;e<s.length;e++)i<s[e]&&(i=s[e]);t=i}return t}var rd;function ld(e,t){if(e&&t){const i=Object(Ae.A)(e,".e-row").getBoundingClientRect().height,s=Object(Ae.A)(t,".e-row").getBoundingClientRect().height;i>s?t.style.height=i+"px":e.style.height=s+"px"}}function ad(e){const t=e.getVisibleColumns();let i=0,s=0;for(let n=0;n<t.length;n++)Object(Ae.W)(t[n].width)?s++:-1!==t[n].width.toString().indexOf("%")&&i++;return("auto"===e.width||"string"==typeof e.width&&-1!==e.width.indexOf("%"))&&!e.groupSettings.showGroupedColumn&&e.groupSettings.columns.length&&i&&!s}function hd(e,t,i,s){const n=e.dataToBeUpdated[i].concat(t[i]).reduce((e,t)=>(e[t[s]]=void 0===e[t[s]]?t:Object.assign(e[t[s]],t),e),{});e.dataToBeUpdated[i]=Object.keys(n).map(e=>n[e])}function cd(e,t,i,s,n){(i[0].length||s)&&(n?t(th,i[0],n[0]):t(th,i[0])),e.isFrozenGrid()&&(i[1].length||s)&&(n?t("movable",i[1],n[1]):t("movable",i[1])),e.getFrozenMode()!==Za&&"Right"!==e.getFrozenMode()||!i[2].length&&!s||(n?t(eh,i[2],n[2]):t(eh,i[2]))}function dd(e){return["Right"!==e.getFrozenMode()?e.getRowsObject():[],e.getMovableRowsObject(),e.getFrozenRightRowsObject()]}function pd(e,t,i){const s=e.children.length;let n=0;for(let o=0;o<s;o++,n++)o>=t&&o<i||(e.removeChild(e.children[n]),n--)}function ud(e,t,i){return"movable"===t.getFreezeTableName()?[].slice.call(e.getMovableDataRows()[i].getElementsByClassName(Ha)):t.getFreezeTableName()===eh?[].slice.call(e.getFrozenRightDataRows()[i].getElementsByClassName(Ha)):[].slice.call(e.getDataRows()[i].getElementsByClassName(Ha))}function md(e,t,i,s){const n=e.getFrozenLeftCount(),o=e.getMovableColumnsCount();return s="movable"===t.getFreezeTableName()?s-n:t.getFreezeTableName()===eh?s-(n+o):s,ud(e,t,i)[s]}function gd(e,t,i,s,n,o,r){r||e.getFreezeTableName()===th||!t&&e.getFreezeTableName()===eh||1===o?i[Nc(e.field)]=e.validationRules:"movable"!==e.getFreezeTableName()&&e.getFreezeTableName()?e.getFreezeTableName()===eh&&(n[Nc(e.field)]=e.validationRules):s[Nc(e.field)]=e.validationRules}function bd(e){let t;return e.isFrozenGrid()&&(t=e.frozenRows&&"Top"===e.editSettings.newRowPosition?e.getMovableHeaderTbody():e.getMovableContentTbody()),t}function fd(e){let t;return e.getFrozenMode()===Za&&(t=e.frozenRows&&"Top"===e.editSettings.newRowPosition?e.getFrozenRightHeaderTbody():e.getFrozenRightContentTbody()),t}function yd(e,t,i){let s;const n=new Ae.n;if("number"===t)try{s=n.getNumberPattern({format:e,currency:this.currency,useGrouping:!0},!0)}catch(o){s=e}else if("date"===t||"time"===t||"datetime"===t)try{if(s=n.getDatePattern({skeleton:e,type:t},i),Object(Ae.T)(s))throw"error"}catch(o){try{s=n.getDatePattern({format:e,type:t},i)}catch(o){s=e}}else s=e;if("number"!==t){const e={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};s=s.replace(/G|H|c|'| a|yy|y|EEEE|E/g,t=>e[t])}return s}function vd(e){if(e.enableAdaptiveUI){const e=document.getElementsByClassName("e-responsive-dialog");for(let t=0;t<e.length;t++)e[t].classList.add("e-bigger")}}function Cd(e,t){let i;const s=e.split(".").length,n=e.split(".");let o=t;for(let r=0;r<s;r++)i=o[n[r]],o=i;return i}function wd(e,t,i,s){for(const n of t)i?e.on(n.event,n.handler,s):e.off(n.event,n.handler)}function Od(e,t,i,s){const n=Nc(t.field);return s=Object.assign(s,{id:e.element.id+n,name:n,"e-mappinguid":t.uid}),e.createElement("input",{className:i,attrs:s})}function Sd(e,t){let i;e.columnModel||e.getColumns();for(const s of e.columnModel)if(s.field===t){i=s;break}return i}function Td(e,t){e.destroyTemplate(t),e.isReact&&e.renderTemplates()}!function(e){e.timer=null}(rd||(rd={}));class jd{constructor(e){this.existingPredicate={},this.foreignKeyQuery=new _e.e,this.filterState=!0,this.values={},this.renderEmpty=!1,this.parent=e,this.id=this.parent.element.id,this.valueFormatter=new Hr(this.parent.locale),this.cBoxTrue=Object(Ue.e)(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=Object(Ue.e)(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&Object(Ae.u)([this.cBoxTrue,this.cBoxFalse],["e-rtl"])}destroy(){this.closeDialog()}wireEvents(){Ae.l.add(this.dlg,"click",this.clickHandler,this),Ae.l.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=Object(Ae.E)(this.searchBoxKeyUp,200);const e=this.dialogObj.element.querySelector(".e-searchinput");e&&Ae.l.add(e,"keyup",this.searchHandler,this)}unWireEvents(){Ae.l.remove(this.dlg,"click",this.clickHandler),Ae.l.remove(this.dlg,"keyup",this.keyupHandler);const e=this.dialogObj.element.querySelector(".e-searchinput");e&&Ae.l.remove(e,"keyup",this.searchHandler)}foreignKeyFilter(e,t,i){const s={},n=[],o=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(o.where(i)).then(i=>{this.options.column.columnData=i.result,this.parent.notify(Jl,{predicate:s,column:this.options.column}),e.ejpredicate=s.predicate.predicates;const o=s.predicate.predicates;for(let e=0;e<o.length;e++)n.push({field:o[e].field,predicate:"or",matchCase:o[e].ignoreCase,ignoreAccent:o[e].ignoreAccent,operator:o[e].operator,value:o[e].value,type:this.options.type});e.filterCollection=n.length?n:t.filter(e=>e.field=this.options.field),this.options.handler(e)})}foreignFilter(e,t){const i=new _e.d(this.options.column.foreignKeyValue,this.options.isRemote?"string"===this.options.column.type?"contains":"equal":this.options.column.type?"contains":"equal",t,!0,this.options.ignoreAccent);this.foreignKeyFilter(e,[e.filterCollection],i)}searchBoxClick(e){e.target.classList.contains("e-searchclear")&&(this.sInput.value="",this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())}searchBoxKeyUp(e){this.refreshCheckboxes(),this.updateSearchIcon()}updateSearchIcon(){this.sInput.value.length?Object(Ae.y)(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]):Object(Ae.y)(this.sIcon,["e-search-icon"],["e-chkcancel-icon"])}getLocalizedLabel(e){return this.localeObj.getConstant(e)}updateDataSource(){const e=this.options.dataSource;if(!(e instanceof _e.a))for(let t=0;t<e.length;t++)if("object"!=typeof e){const i={};i[this.options.field]=e[t],e[t]=i}}updateModel(e){this.options=e,this.existingPredicate=e.actualPredicate||{},this.options.dataSource=e.dataSource,this.options.dataManager=e.dataManager?e.dataManager:e.dataSource,this.updateDataSource(),this.options.type=e.type,this.options.format=e.format||"",this.options.ignoreAccent=e.ignoreAccent||!1,this.options.filteredColumns=e.filteredColumns||this.parent.filterSettings.columns,this.options.query=e.query||new _e.e,this.options.allowCaseSensitive=e.allowCaseSensitive||!1,this.options.uid=e.column.uid,this.values={},this.localeObj=e.localeObj,this.isFiltered=e.filteredColumns.length}getAndSetChkElem(e){if(this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{uid:this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),!e.hideSearchbox){this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox);const e={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search")}};$s.createInput(e,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)}return this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox}showDialog(e){const t={requestType:"filterbeforeopen",columnName:this.options.field,columnType:this.options.type,cancel:!1};t.filterModel=this,this.parent.notify("cbox-filter-begin",t),t.cancel||(this.dialogObj=new Qi({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!Object(Ae.T)(Ic(e.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this)}),this.dialogObj.isStringTemplate=!0,this.renderResponsiveFilter(e),this.dlg.setAttribute("aria-label",this.getLocalizedLabel("ExcelFilterDialogARIA")),e.isResponsiveFilter?document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv").appendChild(this.dlg):this.parent.element.appendChild(this.dlg),this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=e.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show(),this.dialogObj.element.querySelector(".e-dlg-content").appendChild(this.sBox),this.wireEvents(),Ts({target:this.spinner},this.parent.createElement),zs(this.spinner),this.getAllData())}renderResponsiveFilter(e){e.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")}dialogCreated(e){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":Ae.d.isDevice?this.dialogObj.position={X:"center",Y:"center"}:function(e,t){const i=t.element.style.display;t.element.style.display="block";const s=t.width,n=et(e,t.element);t.element.style.display=i,t.element.style.top=n.top+e.getBoundingClientRect().height-5+"px";const o=n.left-s+e.clientWidth;t.element.style.left=o<1?s+o-16+"px":o+-4+"px"}(this.options.target,this.dialogObj),this.parent.notify("filterDialogCreated",e)}openDialog(e){this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e)}closeDialog(){if(this.dialogObj&&!this.dialogObj.isDestroyed){this.isBlanks=!1;const e=this.options.columns.filter(e=>e.getFilterItemTemplate()),t=this.parent.registeredTemplate;e.length&&!Object(Ae.T)(t)&&t.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&void 0!==this.parent.destroyTemplate&&Td(this.parent,["filterItemTemplate"]),this.parent.notify("filter-menu-close",{field:this.options.field}),this.dialogObj.destroy(),this.unWireEvents(),Object(Ae.db)(this.dlg),this.dlg=null,this.parent.notify(Sa,{})}}clearFilter(e){const t={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(ua,t),t.cancel||this.options.handler({action:"clear-filter",field:e?e.field:this.options.field})}btnClick(e){if(this.filterState){if("input"===e.target.tagName.toLowerCase()&&e.target.classList.contains("e-searchinput")){let t=e.target.value;"boolean"===this.options.column.type&&(""!==t&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(t.toLowerCase())?t=!0:""!==t&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(t.toLowerCase())&&(t=!1)),"date"!==this.options.type&&"datetime"!==this.options.type||(t=this.valueFormatter.fromView(t,this.options.parserFn,this.options.type));const i={action:"filtering",filterCollection:{field:this.options.field,operator:this.options.isRemote?"string"===this.options.column.type?"contains":"equal":"date"===this.options.column.type||"datetime"===this.options.column.type||"boolean"===this.options.column.type?"equal":"contains",value:t,matchCase:!1,type:this.options.column.type,ignoreAccent:this.options.ignoreAccent},field:this.options.field};null!=t&&""!==t?this.isBlanks&&t&&"string"==typeof t&&this.getLocalizedLabel("Blanks").toLowerCase().indexOf(t.toLowerCase())>=0?this.fltrBtnHandler():this.isForeignColumn(this.options.column)?this.foreignFilter(i,t):this.options.handler(i):this.closeDialog()}else if(13===e.keyCode)this.fltrBtnHandler();else{const t=e.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===t?this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===t&&this.clearFilter()}this.closeDialog()}else"input"!==e.target.tagName.toLowerCase()&&(this.clearFilter(),this.closeDialog())}fltrBtnHandler(){let e=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall)"));const t=e;let i="equal";const s=this.dialogObj.element.querySelector(".e-dropdownlist");let n;s&&(this.options.operator=i=s.ej2_instances[0].value),this.isMenuNotEqual="notequal"===this.options.operator,this.options.hideSearchbox||(n=this.searchBox.querySelector(".e-searchinput"));const o={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:i,type:this.options.type,matchCase:this.options.allowCaseSensitive,ignoreAccent:this.options.ignoreAccent},r=this.itemsCnt!==e.length&&this.itemsCnt-e.length<e.length;let l,a,h,c;r&&n&&""===n.value&&(i=this.isMenuNotEqual?"equal":"notequal",e=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),o.predicate=this.isMenuNotEqual?"or":"and",o.operator=i);let d=[];if(e.length!==this.itemsCnt||n&&n.value&&""!==n.value){for(let t=0;t<e.length;t++){l=this.values[Ic(e[t],"e-ftrchk").getAttribute("uid")],c=Object(Ae.G)({},{value:l},o),l&&!l.toString().length&&(c.operator=r?"notequal":"equal"),""===l||Object(Ae.T)(l)?d=d.concat(jd.generateNullValuePredicates(o)):d.push(c);const i={instance:this,handler:this.fltrBtnHandler,arg1:c.field,arg2:c.predicate,arg3:c.operator,arg4:c.matchCase,arg5:c.ignoreAccent,arg6:c.value,cancel:!1};if(this.parent.notify(ua,i),i.cancel)return}"date"!==this.options.type&&"datetime"!==this.options.type||(h=t.length-1,a=this.values[Ic(t[h],"e-ftrchk").getAttribute("uid")],Object(Ae.T)(a)&&r&&d.push({field:o.field,matchCase:o.matchCase,operator:"equal",predicate:"and",value:null})),this.initiateFilter(d)}else this.clearFilter()}static generateNullValuePredicates(e){const t=[];return"string"===e.type&&t.push({field:e.field,ignoreAccent:e.ignoreAccent,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:""}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:null}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:void 0}),t}initiateFilter(e){const t=e[0];let i;if(!Object(Ae.T)(t)){i=t.ejpredicate?t.ejpredicate:new _e.d(t.field,t.operator,t.value,!t.matchCase,t.ignoreAccent);for(let t=1;t<e.length;t++)i=void 0!==e[t].ejpredicate?i[e[t].predicate](e[t].ejpredicate):i[e[t].predicate](e[t].field,e[t].operator,e[t].value,!e[t].matchCase,e[t].ignoreAccent);const s={action:"filtering",filterCollection:e,field:this.options.field,ejpredicate:_e.d.or(i)};this.options.handler(s)}}isForeignColumn(e){return!!e.isForeignColumn&&e.isForeignColumn()}refreshCheckboxes(){const e=this.sInput.value,t=this.options.column,i=this.isForeignColumn(t)?this.foreignKeyQuery.clone():this.options.query.clone(),s=this.options.query.clone(),n=i.queries.filter(e=>e&&"onWhere"===e.fn)[0];i.queries=[],s.queries=[];let o="string"!==this.options.type&&parseFloat(e)?parseFloat(e):e,r=this.options.isRemote?"string"===this.options.type?"contains":"equal":this.options.type?"contains":"equal";const l=!0,a=this.options.ignoreAccent,h=this.isForeignColumn(t)?t.foreignKeyValue:t.field;o=""===o||void 0===o?void 0:o;let c=[];const d={field:h,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:l,ignoreAccent:a};let p;const u=this.options.dataManager.adaptor.getModuleName;"boolean"===this.options.type&&(void 0!==o&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(o.toLowerCase())?o="true":void 0!==o&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(o.toLowerCase())&&(o="false"),void 0!==o&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(o.toLowerCase())&&u?(u(),o=!0):void 0!==o&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(o.toLowerCase())&&u&&(u(),o=!1),r="equal"),"date"!==this.options.type&&"datetime"!==this.options.type||(o=this.valueFormatter.fromView(e,this.options.parserFn,this.options.type)),this.addDistinct(i),this.parent.trigger(_r,{requestType:"filtersearchbegin",filterModel:this,columnName:h,column:t,operator:r,matchCase:l,ignoreAccent:a,filterChoiceCount:null,query:i,value:o},u=>{if(u.operator=u.operator,p=new _e.d(h,u.operator,o,u.matchCase,u.ignoreAccent),"date"===this.options.type||"datetime"===this.options.type){r="equal";const e={field:h,operator:r,value:o,matchCase:l,ignoreAccent:a};Object(Ae.T)(o)||(p=Zc(e,this.options.type))}if(e&&"string"==typeof e&&this.isBlanks&&this.getLocalizedLabel("Blanks").toLowerCase().indexOf(e.toLowerCase())>=0){c=c.concat(jd.generateNullValuePredicates(d));const e=jd.generatePredicate(c);e.predicates.push(p),i.where(e)}else e.length?(p=Object(Ae.T)(n)?p:p.and(n.e),i.where(p)):Object(Ae.T)(n)||i.where(n.e);u.filterChoiceCount=Object(Ae.T)(u.filterChoiceCount)?1e3:u.filterChoiceCount;const m={};zs(this.spinner),this.renderEmpty=!1,this.isForeignColumn(t)&&e.length?("result"in t.dataSource?new _e.a(t.dataSource.result):t.dataSource).executeQuery(i).then(e=>{const i=this.options.column.columnData;this.options.column.columnData=e.result,this.parent.notify(Jl,{predicate:m,column:t}),m.predicate.predicates.length?s.where(m.predicate):this.renderEmpty=!0,this.options.column.columnData=i,s.take(u.filterChoiceCount),this.search(u,s)}):(i.take(u.filterChoiceCount),this.search(u,i))})}search(e,t){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(e,t):this.processSearch(t)}getPredicateFromCols(e){const t=jd.getPredicate(e),i=[],s={},n=void 0!==this.parent.getForeignKeyColumns,o=n?this.parent.getForeignKeyColumns():[];for(const r of Object.keys(t)){let e;n&&this.parent.getColumnByField(r).isForeignColumn()&&(e=Jc(r,o)),e?(this.parent.notify(Jl,{predicate:s,column:e}),s.predicate.predicates.length&&i.push(_e.d.or(s.predicate.predicates))):i.push(t[r])}return i.length&&_e.d.and(i)}getQuery(){return this.parent.getQuery?this.parent.getQuery().clone():new _e.e}getAllData(){const e=this.getQuery();e.requiresCount(),this.addDistinct(e);const t={requestType:pl,query:e,filterChoiceCount:null};t.filterModel=this,this.parent.trigger(_r,t,t=>{t.filterChoiceCount=Object(Ae.T)(t.filterChoiceCount)?1e3:t.filterChoiceCount,e.take(t.filterChoiceCount),this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(t,e):this.processDataOperation(e,!0)})}addDistinct(e){let t=_e.b.distinct(this.options.filteredColumns,"field");return t.indexOf(this.options.column.field)<=-1&&(t=t.concat(this.options.column.field)),e.distinct(t),e}filterEvent(e,t){const i=function(e,t){const i=function(e){const t=new _e.f,i=new _e.a({url:"",adaptor:new _e.f}),s=t.processQuery(i,e);return JSON.parse(s.data)}(t),s=new _e.c;return i.dataSource=s.resolve,i.action=e,{state:i,deffered:s}}(e,t);this.parent.trigger(ta,i.state),i.deffered.promise.then(e=>{this.dataSuccess(e)})}processDataOperation(e,t){this.options.dataSource=this.options.dataSource instanceof _e.a?this.options.dataSource:new _e.a(this.options.dataSource);const i=[],s=[];if(this.isForeignColumn(this.options.column)&&t){const t="result"in this.options.column.dataSource?new _e.a(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=e.params,i.push(t.executeQuery(this.foreignKeyQuery)),s.push(e=>this.foreignKeyData=e)}i.push(this.options.dataSource.executeQuery(e)),s.push(this.dataSuccess.bind(this));let n=0;Promise.all(i).then(e=>{for(let t=0;t<e.length;t++)s[n++](e[t].result)})}dataSuccess(e){this.fullData=e;const t={dataSource:this.fullData,executeQuery:!0,field:this.options.field};if(this.parent.notify("beforeCheckboxRenderer",t),t.executeQuery){const e=new _e.e;if(this.parent.searchSettings&&this.parent.searchSettings.key.length){const t=this.parent.searchSettings,i=t.fields.length?t.fields:this.options.columns.map(e=>e.field);e.search(t.key,i,t.operator,t.ignoreCase,t.ignoreAccent)}if(this.options.filteredColumns.length){const t=[];for(let e=0;e<this.options.filteredColumns.length;e++){const i=this.options.filteredColumns[e];this.options.uid?(i.uid=i.uid||this.parent.getColumnByField(i.field).uid,i.uid!==this.options.uid&&t.push(this.options.filteredColumns[e])):i.field!==this.options.field&&t.push(this.options.filteredColumns[e])}const i=this.getPredicateFromCols(t);i&&e.where(i)}const i=new _e.a(t.dataSource).executeLocal(e);this.filteredData=jd.getDistinct(i,this.options.field,this.options.column,this.foreignKeyData).records||[]}this.processDataSource(null,!0,t.executeQuery?this.filteredData:t.dataSource,t),this.sInput&&this.sInput.focus();const i={requestType:"filterafteropen",columnName:this.options.field,columnType:this.options.type};i.filterModel=this,this.parent.notify(pa,i)}processDataSource(e,t,i,s){zs(this.spinner),this.updateResult(),this.createFilterItems(i,t,s)}processSearch(e){this.processDataOperation(e)}updateResult(){this.result={};const e=this.getPredicateFromCols(this.options.filteredColumns),t=new _e.e;e&&t.where(e),this.parent.notify("before-checkbox-renderer-query",{query:t});const i=new _e.a(this.fullData).executeLocal(t);for(const s of i)this.result[td(this.options.field,s)]=!0}clickHandler(e){const t=e.target,i=Ic(t,"e-checkbox-wrapper");if(Ic(t,"e-searchbox")&&this.searchBoxClick(e),i){const e=i.querySelector(".e-selectall");e?this.updateAllCBoxes(!e.classList.contains("e-check")):function(e){const t=e.querySelector(".e-frame"),i=t.previousSibling;t.classList.contains("e-check")?(i.checked=!1,Object(Ae.y)(t,["e-uncheck"],["e-check"])):(i.checked=!0,Object(Ae.y)(t,["e-check"],["e-uncheck"]))}(i.parentElement),this.updateIndeterminatenBtn(),i.querySelector(".e-chk-hidden").focus()}this.setFocus(Ic(i,"e-ftrchk"))}keyupHandler(e){this.setFocus(Ic(e.target,"e-ftrchk"))}setFocus(e){const t=this.dlg.querySelector(".e-chkfocus");t&&t.classList.remove("e-chkfocus"),e&&e.classList.add("e-chkfocus")}updateAllCBoxes(e){const t=[].slice.call(this.cBox.getElementsByClassName("e-frame"));for(const i of t)Xc(i,e),Kc(i.previousSibling,e)}dialogOpen(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())}createCheckbox(e,t,i){const s=t?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);Kc(s.querySelector("input"),t);const n=s.querySelector(".e-label"),o=sd({},i,{column:this.options.column,parent:this.parent});return n.innerHTML=!Object(Ae.T)(e)&&e.toString().length?e:this.getLocalizedLabel("Blanks"),n.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),"boolean"==typeof e&&(n.innerHTML=this.getLocalizedLabel(!0===e?"FilterTrue":"FilterFalse")),Object(Ae.u)([n],["e-checkboxfiltertext"]),this.options.template&&i[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&(n.innerHTML="",this.parent.isReact&&this.options.column.filter&&"string"!=typeof this.options.column.filter.itemTemplate?(this.options.template(o,this.parent,"filterItemTemplate",null,null,null,n),this.parent.renderTemplates()):zc(n,this.options.template(o,this.parent,"filterItemTemplate"))),s}updateIndeterminatenBtn(){const e=this.cBox.children.length-1;let t=[],i=!1;const s=this.cBox.querySelector(".e-selectall"),n=this.cBox.querySelectorAll(".e-check:not(.e-selectall)").length;let o;this.options.isResponsiveFilter||(o=this.dialogObj.btnObj[0],o.disabled=!1);const r=s.previousSibling;Kc(r,!1),r.indeterminate=!1,e===n?(t=["e-check"],Kc(r,!0)):n?(t=["e-stop"],r.indeterminate=!0):(t=["e-uncheck"],i=!0,o&&(o.disabled=!0)),o&&(this.filterState=!o.disabled,o.dataBind()),Object(Ae.eb)([s],["e-check","e-stop","e-uncheck"]),Object(Ae.u)([s],t),this.parent.notify(Ta,{disabled:i})}createFilterItems(e,t,i){const s=this.parent.createElement("div");let n,o=!1;this.options.isResponsiveFilter||(n=this.dialogObj.btnObj[0]);let r=-1,l="ejValue";i.executeQuery||(l=i.field);for(let h=0;h<e.length;h++){const t=Object(Ae.R)(l,e[h]);(""===t||Object(Ae.T)(t))&&(r+=1)}if(this.itemsCnt=-1!==r?e.length-r:e.length,e.length&&!this.renderEmpty){const t=this.getLocalizedLabel("SelectAll"),i=this.cBox.querySelector(".e-checkfltrnmdiv");i&&i.classList.remove("e-checkfltrnmdiv");const r=this.createCheckbox(t,!1,{[this.options.field]:t}),a=Yc(Lc("cbox"),r,"e-ftrchk");a.querySelector(".e-frame").classList.add("e-selectall"),s.appendChild(a);let h=new _e.d("field","equal",this.options.field);this.options.foreignKeyValue&&(h=h.or("field","equal",this.options.foreignKeyValue));const c=new _e.a(this.options.filteredColumns).executeLocal((new _e.e).where(h)).length;let d;for(let n=0;n<e.length;n++){const t=Lc("cbox");this.values[t]=Object(Ae.R)(l,e[n]);let i=Object(Ae.R)(this.options.field,e[n]);this.options.formatFn&&(i=this.valueFormatter.toView(i,this.options.formatFn));const o={value:i,column:this.options.column,data:e[n]};if(this.parent.notify("filter-cbox-value",o),i=o.value,""===i||Object(Ae.T)(i)){if(d)continue;d=!0}const r=this.createCheckbox(i,this.getCheckedState(c,this.values[t]),Object(Ae.R)("dataObj",e[n]));s.appendChild(Yc(t,r,"e-ftrchk"))}this.cBox.innerHTML="",zc(this.cBox,[].slice.call(s.children)),this.updateIndeterminatenBtn(),n&&(n.disabled=!1),o=!1}else s.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),zc(this.cBox.children[0],[].slice.call(s.children)),n&&(n.disabled=!0),o=!0;n&&(this.filterState=!n.disabled,n.dataBind());const a={requestType:pl,dataSource:this.renderEmpty?[]:e};a.filterModel=this,this.parent.notify(pa,a),this.parent.notify(Ta,{disabled:o}),Ps(this.spinner)}getCheckedState(e,t){if(this.isFiltered&&e){const e=this.result[t];return"notequal"===this.options.operator?!e:e}return!0}static getDistinct(e,t,i,s){let n=e.length;const o=[];let r;const l={},a=!(!i||!i.isForeignColumn)&&i.isForeignColumn();for(;n--;)if(r=e[n],r=td(t,r),!(r in l)){const h={};if(h.ejValue=r,l[r]=!0,a){const t=$c(i,{},r,s)[0];Object(Ae.mb)(ea,t,e[n]),r=Object(Ae.R)(i.foreignKeyValue,t)}Object(Ae.mb)(t,Object(Ae.T)(r)?null:r,h),Object(Ae.mb)("dataObj",e[n],h),o.push(h)}return _e.b.group(_e.b.sort(o,t,_e.b.fnAscending),"ejValue")}static getPredicate(e){const t=_e.b.distinct(e,"field",!0)||[];let i=[];const s={};for(let n=0;n<t.length;n++)i=new _e.a(e).executeLocal((new _e.e).where("field","equal",t[n].field)),0!==i.length&&(s[t[n].field]=jd.generatePredicate(i));return s}static generatePredicate(e){const t=e?e.length:0;let i;const s=jd.updateDateFilter(e[0]);s.ignoreAccent=!Object(Ae.T)(s.ignoreAccent)&&s.ignoreAccent,i="date"===s.type||"datetime"===s.type?Zc(s,s.type):s.ejpredicate?s.ejpredicate:new _e.d(s.field,s.operator,s.value,!jd.getCaseValue(s),s.ignoreAccent);for(let n=1;n<t;n++)e[n]=jd.updateDateFilter(e[n]),t>2&&n>1&&"or"===e[n].predicate?i.predicates.push("date"===e[n].type||"datetime"===e[n].type?Zc(e[n],e[n].type):new _e.d(e[n].field,e[n].operator,e[n].value,!jd.getCaseValue(e[n]),e[n].ignoreAccent)):i="date"===e[n].type||"datetime"===e[n].type?"and"===e[n].predicate&&"equal"===e[n].operator?i.or(Zc(e[n],e[n].type),e[n].type,e[n].ignoreAccent):i[e[n].predicate](Zc(e[n],e[n].type),e[n].type,e[n].ignoreAccent):e[n].ejpredicate?i[e[n].predicate](e[n].ejpredicate):i[e[n].predicate](e[n].field,e[n].operator,e[n].value,!jd.getCaseValue(e[n]),e[n].ignoreAccent);return i||null}static getCaseValue(e){return Object(Ae.T)(e.matchCase)?!("string"===e.type||Object(Ae.T)(e.type)&&"string"==typeof e.value):e.matchCase}static updateDateFilter(e){return("date"===e.type||"datetime"===e.type||e.value instanceof Date)&&(e.type=e.type||"date"),e}}class Ed{constructor(e){this.parent=e}addNew(e,t){let i;this.isEdit=!1;const s=bd(this.parent),n=fd(this.parent),o=this.parent.isFrozenGrid(),r=o&&this.parent.enableColumnVirtualization&&t.isScroll;if(i=this.parent.frozenRows&&"Top"===this.parent.editSettings.newRowPosition?r?this.parent.getMovableHeaderTbody():this.parent.getHeaderTable().querySelector(nh):r?this.parent.getMovableContentTbody():this.parent.getContentTable().querySelector(nh),t.row=this.parent.createElement("tr",{className:"e-row e-addedrow"}),i.querySelector(".e-emptyrow")){const e=i.querySelector(".e-emptyrow");if(e.parentNode.removeChild(e),o&&!r){const e=this.parent.getContent().querySelector("."+Wa).querySelector(nh);if(e.firstElementChild.parentNode.removeChild(e.firstElementChild),this.parent.getFrozenMode()===Za){const e=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(nh);e.firstElementChild.parentNode.removeChild(e.firstElementChild)}}}if("Top"===this.parent.editSettings.newRowPosition?i.insertBefore(t.row,i.firstChild):i.appendChild(t.row),t.row.appendChild(this.getEditElement(e,!1,void 0,t,!0)),this.parent.editModule.checkLastRow(t.row,t),o&&!r){const e=this.renderMovableform(t.row,t);if("Top"===this.parent.editSettings.newRowPosition?s.insertBefore(e,s.firstChild):s.appendChild(e),t.row.querySelector(".e-normaledit").setAttribute("colspan",this.parent.getVisibleFrozenColumns()+""),e.setAttribute("colspan",""+(this.parent.getVisibleColumns().length-this.parent.getVisibleFrozenColumns())),n){const e=this.renderFrozenRightForm(t.row,t);"Top"===this.parent.editSettings.newRowPosition?n.insertBefore(e,n.firstChild):n.appendChild(e);const i=this.parent.getVisibleFrozenColumns()-this.parent.getFrozenRightColumnsCount();t.row.querySelector(".e-normaledit").setAttribute("colspan",i+""),e.querySelector(".e-normaledit").setAttribute("colspan",""+this.parent.getFrozenRightColumnsCount())}"auto"===this.parent.height&&this.parent.notify(na,{})}}renderFrozenRightForm(e,t){const i=e.cloneNode(!0),s=t.frozenRightForm=i.querySelector("form");return this.parent.editSettings.template?(s.innerHTML="",this.appendChildren(s,t.rowData,!1),i):(this.renderRightFrozen(e,i),i.querySelector(oh).innerHTML=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(oh).innerHTML,i)}renderMovableform(e,t){const i=e.cloneNode(!0),s=t.movableForm=i.querySelector("form");return this.parent.editSettings.template?(s.innerHTML="",this.appendChildren(s,t.rowData,!1),i):(this.renderMovable(e,i),i.querySelector(oh).innerHTML=this.parent.getHeaderContent().querySelector("."+Ga).querySelector(oh).innerHTML,i)}updateFreezeEdit(e,t){return t=t.concat([].slice.call(this.getFreezeRow(e).querySelectorAll("td.e-rowcell"))),this.parent.getFrozenMode()===Za&&(t=t.concat([].slice.call(this.getFreezeRightRow(e).querySelectorAll("td.e-rowcell")))),t}getFreezeRightRow(e){const t=parseInt(e.getAttribute(sh),10),i=this.parent.getFrozenLeftContentTbody(),s=this.parent.getFrozenHeaderTbody(),n=this.parent.getFrozenRightHeaderTbody(),o=this.parent.getFrozenRightContentTbody();return i.contains(e)||s.contains(e)?this.parent.getFrozenRightRowByIndex(t):o.contains(e)||n.contains(e)?this.parent.getRowByIndex(t):e}getFreezeRow(e){if(this.parent.isFrozenGrid()){const t=parseInt(e.getAttribute(sh),10),i=this.parent.getFrozenLeftContentTbody(),s=this.parent.getMovableContentTbody(),n=this.parent.getFrozenHeaderTbody(),o=this.parent.getMovableHeaderTbody();if(i.contains(e)||n.contains(e))return this.parent.getMovableRowByIndex(t);if(s.contains(e)||o.contains(e))return this.parent.getRowByIndex(t)}return e}update(e,t){this.isEdit=!0;const i=t.isCustomFormValidation,s=t.isScroll;s||!Object(Ae.A)(t.row,"."+Wa)&&!Object(Ae.A)(t.row,"."+Ga)||(t.row=this.getFreezeRow(t.row)),(Object(Ae.A)(t.row,".e-frozen-right-content")||Object(Ae.A)(t.row,".e-frozen-right-header"))&&(t.row=this.getFreezeRightRow(t.row));const n=this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&s;let o=[].slice.call(t.row.querySelectorAll("td.e-rowcell"));t.row.innerHTML="",n||i||(o=this.updateFreezeEdit(t.row,o)),t.row.appendChild(this.getEditElement(e,!0,o,t,!0)),t.row.classList.add($a),this.parent.editModule.checkLastRow(t.row,t),n||i||this.refreshFreezeEdit(t.row,t)}refreshFreezeEdit(e,t){const i=e.firstChild;let s,n;this.parent.getVisibleFrozenColumns()&&this.parent.editSettings.template&&(i.querySelector(oh).innerHTML=this.parent.getHeaderContent().querySelector("."+Ua).querySelector(oh).innerHTML);const o=parseInt(e.getAttribute(sh),10);if(this.parent.isFrozenGrid()){o<this.parent.frozenRows?(n=this.parent.getHeaderContent(),s="."+Ua):(n=this.parent.getContent(),s="."+_a);const r=i.cloneNode(!0),l=i.cloneNode(!0),a=t.movableForm=r.querySelector("form");let h,c;this.parent.editSettings.template&&this.refreshEditForm(a,t.rowData),n.querySelector(s).contains(e)?(h=this.parent.getMovableRowByIndex(o),this.updateFrozenCont(h,i,r),this.parent.getFrozenMode()===Za&&(t.frozenRightForm=l.querySelector("form"),this.refreshEditForm(t.frozenRightForm,t.rowData),c=this.parent.getFrozenRightRowByIndex(o),this.updateFrozenRightCont(c,i,l))):(h=this.parent.getRowByIndex(o),this.updateFrozenCont(h,r,i),this.parent.getFrozenMode()===Za&&(t.frozenRightForm=l.querySelector("form"),this.refreshEditForm(t.frozenRightForm,t.rowData),c=this.parent.getFrozenRightRowByIndex(o),this.updateFrozenRightCont(c,l,i))),h.appendChild(r),h.classList.add($a),this.parent.getFrozenMode()===Za&&(c.appendChild(l),c.classList.add($a),ld(t.frozenRightForm.querySelector("td:not(.e-hide)"),t.form.querySelector("td:not(.e-hide)"))),ld(t.movableForm.querySelector("td:not(.e-hide)"),t.form.querySelector("td:not(.e-hide)"))}}refreshEditForm(e,t){this.parent.editSettings.template&&(e.innerHTML="",this.appendChildren(e,t,!1))}updateFrozenRightCont(e,t,i){e.innerHTML="",this.renderRightFrozen(t,i),i.querySelector(oh).innerHTML=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(oh).innerHTML,t.setAttribute("colspan",this.parent.getVisibleFrozenColumns()-this.parent.getFrozenRightColumnsCount()+""),i.setAttribute("colspan",this.parent.getFrozenRightColumnsCount()+"")}updateFrozenCont(e,t,i){e.innerHTML="",this.renderMovable(t,i),i.querySelector(oh).innerHTML=this.parent.getHeaderContent().querySelector("."+Ga).querySelector(oh).innerHTML,t.setAttribute("colspan",this.parent.getVisibleFrozenColumns()+""),i.setAttribute("colspan",this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length-this.parent.getVisibleFrozenColumns()+"")}renderRightFrozen(e,t){t.querySelector("tr").innerHTML="";const i=this.parent.getColumns();let s=0;for(let n=0;n<i.length;n++,s++)if(i[n].getFreezeTableName()===eh){const i=s-this.parent.getMovableColumnsCount();t.querySelector("tr").appendChild(e.querySelector("tr").removeChild(e.querySelector("tr").children[i])),s--}}renderMovable(e,t){t.querySelector("tr").innerHTML="";const i=this.parent.getColumns();let s=0;for(let n=0;n<i.length;n++,s++)"movable"===i[n].getFreezeTableName()&&(t.querySelector("tr").appendChild(e.querySelector("tr").removeChild(e.querySelector("tr").children[s])),s--)}getEditElement(e,t,i,s,n){const o=this.parent;let r=0;const l=Object(Ae.T)(o.detailTemplate)&&Object(Ae.T)(o.childGrid)?0:1;o.allowGrouping&&(r=o.groupSettings.columns.length);const a=this.parent.createElement("td",{className:"e-editcell e-normaledit",attrs:{colspan:(o.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length-o.getVisibleFrozenColumns()+this.parent.getIndentCount()).toString()}}),h=s.form=this.parent.createElement("form",{id:o.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template)return this.appendChildren(h,s.rowData,n),a.appendChild(h),a;const c=this.parent.createElement("table",{className:"e-table e-inline-edit",attrs:{cellspacing:"0.25"}});c.appendChild(o.getContentTable().querySelector(oh).cloneNode(!0));const d=this.parent.createElement(nh),p=this.parent.createElement("tr");let u=0;for(l&&p.insertBefore(this.parent.createElement("td",{className:"e-detailrowcollapse"}),p.firstChild),o.isRowDragable()&&p.appendChild(this.parent.createElement("td",{className:"e-dragindentcell"}));u<r;)p.appendChild(this.parent.createElement("td",{className:"e-indentcell"})),u++;let m=0;u=0;const g=o.isFrozenGrid()&&o.enableColumnVirtualization&&s.isScroll,b=s.isCustomFormValidation?this.parent.columnModel:o.getColumns();for(;t&&m<i.length&&u<b.length||u<b.length;){const n=t?i[m].getAttribute("colspan"):null,o=b[u];if(g&&"movable"!==o.getFreezeTableName()||s.isCustomFormValidation&&(o.commands||o.commandsTemplate||!o.field)){u++;continue}const r=this.parent.createElement("td",{className:Ha,attrs:{style:"text-align:"+(o.textAlign?o.textAlign:""),colspan:n||""}});o.visible?(r.appendChild(e[o.uid]),"Vertical"===this.parent.rowRenderingMode&&(xc(r,{"data-cell":o.headerText}),0===u&&r.classList.add("e-responsive-editcell")),"booleanedit"===o.editType?r.classList.add("e-boolcell"):(o.commands||o.commandsTemplate)&&Object(Ae.u)([r],"e-unboundcell")):r.classList.add("e-hide"),p.appendChild(r),u=n?u+parseInt(n,10):u+1,m++}return d.appendChild(p),c.appendChild(d),h.appendChild(c),a.appendChild(h),a}removeEventListener(){}appendChildren(e,t,i){const s=Object(Ae.G)({},t,{isAdd:!this.isEdit,isFrozen:i},!0),n=this.parent.element.id+"editSettingsTemplate";this.parent.isReact&&"string"!=typeof this.parent.editSettings.template?(this.parent.getEditTemplate()(s,this.parent,"editSettingsTemplate",n,null,null,e),this.parent.renderTemplates()):zc(e,this.parent.getEditTemplate()(s,this.parent,"editSettingsTemplate",n))}}class xd{constructor(e){this.parent=e}update(e,t){if(this.parent.isReact&&t.columnObject&&t.columnObject.template){const e=t.cell.parentElement,i=t.cell.cloneNode(!0);e.insertBefore(i,t.cell),i.focus(),t.cell.remove(),t.cell=i}t.cell.innerHTML="",t.cell.appendChild(this.getEditElement(e,t)),t.cell.classList.remove("e-ellipsistooltip"),t.cell.classList.add("e-editedbatchcell"),Object(Ae.y)(t.row,[$a,"e-batchrow"],[])}getEditElement(e,t){const i=this.parent.createElement("form",{id:this.parent.element.id+"EditForm",className:"e-gridform"});return i.appendChild(e[t.columnObject.uid]),"booleanedit"===t.columnObject.editType&&t.cell.classList.add("e-boolcell"),t.columnObject.editType||t.cell.classList.add("e-inputbox"),i}removeEventListener(){}}class Rd{constructor(e,t){this.parent=e,this.serviceLocator=t,this.parent.isDestroyed||(this.parent.on(_l,this.destroy,this),this.parent.on(kl,this.destroy,this))}setLocaleObj(){this.l10n=this.serviceLocator.getService("localization")}addNew(e,t){this.isEdit=!1,this.createDialog(e,t)}update(e,t){this.isEdit=!0,this.createDialog(e,t)}createDialogHeader(e){const t=this.parent;let i;if(this.parent.enableAdaptiveUI){const t=new Lh(this.parent,this.serviceLocator);return t.action=this.isEdit?Aa.isEdit:Aa.isAdd,t.renderResponsiveHeader(void 0,e)}return i=t.editSettings.headerTemplate?this.getDialogEditTemplateElement("HeaderTemplate",e):this.isEdit?this.l10n.getConstant("EditFormTitle")+e.primaryKeyValue[0]:this.l10n.getConstant("AddFormTitle"),i}createDialog(e,t){const i=this.parent;var s;this.dialog=this.parent.createElement("div",{id:i.element.id+"_dialogEdit_wrapper",styles:"width: auto"}),i.enableAdaptiveUI&&this.dialog.classList.add("e-responsive-dialog"),this.dialog.setAttribute("aria-label","Dialog edit"),i.element.appendChild(this.dialog),this.setLocaleObj(),this.dialogObj=new Qi(Object(Ae.G)({header:this.createDialogHeader(t),isModal:!0,visible:!0,cssClass:"e-edit-dialog",content:this.getEditElement(e,t),showCloseIcon:!0,allowDragging:!0,close:this.dialogClose.bind(this),created:this.dialogCreated.bind(this),closeOnEscape:!0,width:i.editSettings.template?"auto":"330px",target:t.target?t.target:document.body,animationSettings:{effect:"None"},footerTemplate:i.editSettings.footerTemplate?this.getDialogEditTemplateElement("FooterTemplate",t):null,buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.l10n.getConstant("SaveButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}]},i.editSettings.dialog&&i.editSettings.dialog.params||{})),t.dialog=this.dialogObj,this.dialogObj.isStringTemplate=!0,this.renderResponsiveDialog(),this.dialogObj.appendTo(this.dialog),s=this.dialogObj.element.parentElement,this.parent.element.classList.contains("e-bigger")&&s.classList.add("e-bigger"),i.enableAdaptiveUI&&this.dialogObj.show(!0)}dialogCreated(){vd(this.parent)}renderResponsiveDialog(){this.parent.enableAdaptiveUI&&(this.parent.adaptiveDlgTarget&&(this.dialogObj.target=this.parent.adaptiveDlgTarget),this.dialogObj.buttons=[{}],this.dialogObj.showCloseIcon=!0,this.dialogObj.visible=!1,this.dialogObj.width="100%",this.dialogObj.open=()=>{this.dialogObj.element.style.maxHeight="100%"})}btnClick(e){this.l10n.getConstant("CancelButton").toLowerCase()===e.target.innerText.trim().toLowerCase()?this.dialogClose():this.parent.endEdit()}dialogClose(){this.parent.closeEdit()}destroy(e){const t=["template","headerTemplate","footerTemplate"];for(let i=0;i<t.length;i++)if(this.parent.editSettings[t[i]]){const e=t[i].charAt(0).toUpperCase()+t[i].slice(1),s=this.parent.element.id+"editSettings"+e;Object(Ae.ob)(s,e,this.parent.editSettings)}this.parent.notify(Yl,{}),this.parent.isEdit=!1,this.parent.notify(Hl,{}),this.dialog&&!this.dialogObj.isDestroyed&&(this.dialogObj.destroy(),Object(Ae.db)(this.dialog))}getDialogEditTemplateElement(e,t){const i=this.parent.createElement("div",{className:"e-dialog"+e}),s=Object(Ae.G)({},t.rowData,{isAdd:!this.isEdit},!0),n=this.parent.element.id+"editSettings"+e;return zc(i,("HeaderTemplate"===e?this.parent.getEditHeaderTemplate():this.parent.getEditFooterTemplate())(s,this.parent,"editSettings"+e,n)),Object(Ae.ob)(n,e,this.parent.editSettings),i}getEditElement(e,t){const i=this.parent,s=this.parent.createElement("div",{className:this.isEdit?$a:"e-insertedrow"}),n=t.form=this.parent.createElement("form",{id:i.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template){const e=this.parent.element.id+"editSettingsTemplate",i=Object(Ae.G)({},t.rowData,{isAdd:!this.isEdit},!0);this.parent.isReact&&"string"!=typeof this.parent.editSettings.template?(this.parent.getEditTemplate()(i,this.parent,"editSettingsTemplate",e,null,null,n),this.parent.renderTemplates()):zc(n,this.parent.getEditTemplate()(i,this.parent,"editSettingsTemplate",e));const o=()=>{const e=this.parent.getColumns();for(let t=0;t<e.length;t++)e[t].validationRules&&(this.parent.editModule.formObj.rules[e[t].field]=e[t].validationRules)};return Object(Ae.ob)(e,"Template",this.parent.editSettings,!0,o),s.appendChild(n),s}const o=this.parent.createElement("table",{className:Ya,attrs:{cellspacing:"6px"}}),r=this.parent.createElement(nh),l=i.getColumns();for(let a=0;a<l.length;a++){if(this.parent.editModule.checkColumnIsGrouped(l[a])||l[a].commands||l[a].commandsTemplate||"checkbox"===l[a].type)continue;const t=this.parent.createElement("tr"),i=this.parent.createElement("td",{className:Ha,attrs:{style:"text-align:"+(this.parent.enableRtl?"right":"left")+";width:190px"}});e[l[a].uid].classList.remove("e-input"),i.appendChild(e[l[a].uid]),t.appendChild(i),r.appendChild(t)}return o.appendChild(r),n.appendChild(o),s.appendChild(n),s}removeEventListener(){this.parent.isDestroyed||(this.parent.off(_l,this.destroy),this.parent.off(kl,this.destroy))}}class Dd{constructor(e,t){this.editType={Inline:Ed,Normal:Ed,Batch:xd,Dialog:Rd},this.parent=e,this.serviceLocator=t,this.renderer=new this.editType[this.parent.editSettings.mode](e,t),this.focus=t.getService("focus")}addNew(e){this.renderer.addNew(this.getEditElements(e),e),this.convertWidget(e)}update(e){this.renderer.update(this.getEditElements(e),e),e.isCustomFormValidation||(this.parent.notify("edit-form",e),this.convertWidget(e))}convertWidget(e){const t=this.parent;let i,s,n,o,r;const l=t.isFrozenGrid(),a="Right"===t.getFrozenMode()&&"Normal"===t.editSettings.mode?1:0,h="Dialog"===t.editSettings.mode?Object(Ae.hb)("#"+t.element.id+"_dialogEdit_wrapper .e-gridform",document):t.element.getElementsByClassName("e-gridform")[a],c=l&&this.parent.enableColumnVirtualization&&e.isScroll;if(l&&"Normal"===t.editSettings.mode){const i=parseInt(e.row.getAttribute(sh),10);t.frozenRows&&("add"===e.requestType&&"Top"===t.editSettings.newRowPosition||i<t.frozenRows)?(o=t.element.querySelector("."+Ga).querySelector(".e-gridform"),this.parent.getFrozenMode()===Za&&(r=e.frozenRightForm)):(o=t.element.querySelector("."+Wa).querySelector(".e-gridform"),this.parent.getFrozenMode()===Za&&(r=e.frozenRightForm))}const d="Batch"!==t.editSettings.mode?t.getColumns():[t.getColumnByField(e.columnName)];for(const p of d){if(c&&"movable"!==p.getFreezeTableName())continue;if(this.parent.editSettings.template&&!Object(Ae.T)(p.field)){const t=Object(Ae.G)({},e);t.element=h.querySelector("[name="+Nc(p.field)+"]"),Object(Ae.T)(t.element)&&l&&(t.element=o.querySelector("[name="+Nc(p.field)+"]")),"string"==typeof p.edit.write?td(p.edit.write,window)(t):p.edit.write(t);continue}if(this.parent.editModule.checkColumnIsGrouped(p)||p.commands)continue;n=p.valueAccessor(p.field,e.rowData,p),s="movable"===p.getFreezeTableName()&&"Normal"===t.editSettings.mode?o.querySelector("[e-mappinguid="+p.uid+"]"):r&&p.getFreezeTableName()===eh&&"Normal"===t.editSettings.mode?r.querySelector("[e-mappinguid="+p.uid+"]"):h.querySelector("[e-mappinguid="+p.uid+"]");let a=p.edit.write;Object(Ae.T)(s)||("string"==typeof a?(a=td(a,window),a({rowData:e.rowData,element:s,column:p,requestType:e.requestType,row:e.row,foreignKeyData:p.isForeignColumn()&&td(p.field,e.foreignKeyData)})):p.edit.write({rowData:e.rowData,element:s,column:p,requestType:e.requestType,row:e.row,foreignKeyData:p.isForeignColumn()&&td(p.field,e.foreignKeyData)}),i||s.getAttribute("disabled")||Ic(s,"e-checkbox-disabled")||(this.focusElement(s,e.type),i=!0))}if(l&&!this.parent.allowTextWrap&&("add"===e.requestType||"beginEdit"===e.requestType)&&"Dialog"!==this.parent.editSettings.mode&&!Object(Ae.T)(h)&&!Object(Ae.T)(o)){const e=o.querySelector("tr").children[0],t=h.querySelector("tr").children[0];t.offsetHeight>e.offsetHeight?(e.style.height=t.offsetHeight+"px",r&&(o.querySelector("tr").children[0].style.height=t.offsetHeight+"px")):(t.style.height=e.offsetHeight+"px",r&&(o.querySelector("tr").children[0].style.height=e.offsetHeight+"px"))}}focusElement(e,t){const i=this.parent.element.querySelector(".e-edit-checkselect");Object(Ae.T)(i)||i.nextElementSibling.classList.add("e-focus"),"Batch"===this.parent.editSettings.mode?this.focus.onClick({target:Object(Ae.A)(e,"td")},!0):!this.parent.enableVirtualization||"Normal"!==this.parent.editSettings.mode||this.parent.enableVirtualization&&"Bottom"===this.parent.editSettings.newRowPosition&&Ic(e,Ja)?e.focus():e.focus({preventScroll:!0}),e.classList.contains("e-defaultcell")&&e.setSelectionRange(e.value.length,e.value.length)}getEditElements(e){const t=this.parent,i={};let s="Batch"!==t.editSettings.mode?t.getColumns():[t.getColumnByField(e.columnName)];if(e.isCustomFormValidation&&(s=this.parent.columnModel),this.parent.editSettings.template)return{};const n=t.isFrozenGrid()&&t.enableColumnVirtualization&&e.isScroll;for(let o=0,r=s.length;o<r;o++){const r=s[o];if(this.parent.editModule.checkColumnIsGrouped(r)||n&&"movable"!==s[o].getFreezeTableName()||e.isCustomFormValidation&&(r.commands||r.commandsTemplate||!r.field))continue;if(r.commands||r.commandsTemplate){const t=this.serviceLocator.getService("cellRendererFactory"),s=new dh(this.parent),n=t.getCellRenderer(Ia.CommandColumn),l=s.generateRows(e.rowData)[0].cells.filter(e=>e.rowID),a=n.render(l[o],e.rowData,{index:e.row?e.row.getAttribute(sh):0},this.parent.enableVirtualization),h=a.firstElementChild;h.setAttribute("textAlign",a.getAttribute("textAlign")),i[r.uid]=h;continue}const l=r.valueAccessor(r.field,e.rowData,r),a={column:r,value:l,type:e.requestType,data:e.rowData};let h,c=r.edit.create;if(r.editTemplate){h=this.parent.createElement("span",{attrs:{"e-mappinguid":r.uid}});const t=this.parent.element.id+r.uid+"editTemplate",i=sd({},e.rowData,{column:r});this.parent.isReact&&"string"!=typeof r.editTemplate?(r.getEditTemplate()(Object(Ae.G)({index:e.rowIndex},i),this.parent,"editTemplate",t,null,null,h),this.parent.renderTemplates()):zc(h,r.getEditTemplate()(Object(Ae.G)({index:e.rowIndex},i),this.parent,"editTemplate",t))}else{if("string"==typeof c?(c=td(c,window),h=c(a)):h=r.edit.create(a),"string"==typeof h){const e=this.parent.createElement("div");e.innerHTML=h,h=e.firstChild}const i="input"!==h.tagName&&h.querySelectorAll("input").length,s=Nc(r.field);Object(Ae.w)(i?h.querySelector("input"):h,{name:s,"e-mappinguid":r.uid,id:t.element.id+s}),Object(Ae.y)(h,["e-input","e-field"],[]),"Right"===r.textAlign&&h.classList.add("e-ralign"),((r.isPrimaryKey||r.isIdentity)&&"beginEdit"===e.requestType||r.isIdentity&&"add"===e.requestType)&&h.setAttribute("disabled","")}i[r.uid]=h}return i}destroy(){this.renderer.removeEventListener()}}class kd{constructor(e){this.parent=e}create(e){return Od(this.parent,e.column,"e-field",{type:"text"})}read(e){return e.ej2_instances[0].value}destroy(){this.obj&&!this.obj.isDestroyed&&(this.removeEventHandler&&this.removeEventHandler(),this.obj.destroy())}}class Id extends kd{constructor(){super(...arguments),this.activeClasses=["e-selectionbackground","e-active"]}create(e){let t="e-field e-boolcell";return"checkbox"===e.column.type&&(t="e-field e-boolcell e-edit-checkselect"),this.removeEventHandler=this.removeEventListener,Od(this.parent,e.column,t,{type:"checkbox",value:e.value})}read(e){return e.checked}write(e){let t,i;if(Object(Ae.T)(e.row)||(t=e.row.querySelector(".e-edit-checkselect")),td(e.column.field,e.rowData)&&(i=JSON.parse(td(e.column.field,e.rowData).toString().toLowerCase())),!Object(Ae.T)(t)&&"checkbox"===e.column.type){if(this.editType=this.parent.editSettings.mode,this.editRow=e.row,"add"!==e.requestType){const t=this.parent.getRowObjectFromUID(e.row.getAttribute("data-uid"));i=!!t&&t.isSelected}Uc([].slice.call(e.row.getElementsByClassName(Ha)),i,...this.activeClasses)}this.obj=new Ue.b(Object(Ae.G)({label:"Dialog"!==this.parent.editSettings.mode?" ":e.column.headerText,checked:i,disabled:!Wc(e.column,e.requestType,e.element),enableRtl:this.parent.enableRtl},e.column.edit.params)),this.addEventListener(),this.obj.appendTo(e.element)}addEventListener(){this.cbChange=this.checkBoxChange.bind(this),this.obj.addEventListener(lh,this.cbChange)}removeEventListener(){this.obj.isDestroyed||this.obj.removeEventListener(lh,this.cbChange)}checkBoxChange(e){if(this.editRow&&"Dialog"!==this.editType){let t=!1;e.checked?(t=!0,this.editRow.setAttribute("aria-selected",t.toString())):this.editRow.removeAttribute("aria-selected"),Uc([].slice.call(this.editRow.getElementsByClassName(Ha)),t,...this.activeClasses)}}}class Fd extends kd{constructor(e){super(),this.parent=e,this.flag=!1,this.removeEventHandler=this.removeEventListener}write(e){const t="Dialog"!==this.parent.editSettings.mode;this.column=e.column;const i=new _e.d(e.column.field,"notequal",null,!0,!1),s={};if(e.column.edit.params){const t=Object.keys(e.column.edit.params);for(let i=0;i<t.length;i++)s[t[i]]="query"===t[i]?e.column.edit.params[t[i]].clone():e.column.edit.params[t[i]]}this.obj=new Po(Object(Ae.G)({dataSource:this.parent.dataSource instanceof _e.a?this.parent.dataSource:new _e.a(this.parent.dataSource),query:(new _e.e).where(i).select(e.column.field),enabled:Wc(e.column,e.requestType,e.element),fields:{value:e.column.field},value:td(e.column.field,e.rowData),enableRtl:this.parent.enableRtl,placeholder:t?"":e.column.headerText,popupHeight:"200px",floatLabelType:t?"Never":"Always",sortOrder:"Ascending"},s)),this.parent.enableVirtualization&&(this.obj.dataSource=[e.rowData]),this.addEventListener(),this.obj.query.params=this.parent.query.params,this.obj.appendTo(e.element),e.element.setAttribute("name",Nc(e.column.field))}addEventListener(){this.ddCreated=this.dropdownCreated.bind(this),this.ddOpen=this.dropDownOpen.bind(this),this.ddBeforeOpen=this.dropdownBeforeOpen.bind(this),this.ddComplete=this.ddActionComplete.bind(this),this.obj.addEventListener(ah,this.ddCreated),this.obj.addEventListener(rh,this.ddOpen),this.obj.addEventListener(hh,this.ddBeforeOpen),this.obj.addEventListener(Ur,this.ddComplete)}removeEventListener(){this.obj.isDestroyed||(this.obj.removeEventListener(ah,this.ddCreated),this.obj.removeEventListener(rh,this.ddOpen),this.obj.removeEventListener(hh,this.ddBeforeOpen),this.obj.removeEventListener(Ur,this.ddComplete))}dropdownCreated(e){this.flag=!0}dropdownBeforeOpen(){this.parent.enableVirtualization&&(this.obj.dataSource=this.parent.dataSource instanceof _e.a?this.parent.dataSource:new _e.a(this.parent.dataSource))}ddActionComplete(e){e.result=_e.b.distinct(e.result,this.obj.fields.value,!0),this.flag&&this.column.dataSource&&("result"in this.column.dataSource?this.column.dataSource.result=e.result:this.column.dataSource instanceof _e.a&&(this.column.dataSource.dataSource.json=e.result)),this.flag=!1}dropDownOpen(e){const t=Ic(this.obj.element,"e-dialog");if("Dialog"===this.parent.editSettings.mode&&!Object(Ae.T)(t)){const i=Object(Ae.hb)("#"+t.id,document).ej2_instances[0];e.popup.element.style.zIndex=(i.zIndex+1).toString()}}}class Ad{constructor(e){this.parent=e}keyEventHandler(e){if(13===e.keyCode||9===e.keyCode){const e=document.createEvent("HTMLEvents");e.initEvent("change",!1,!0),this.dispatchEvent(e)}}create(e){return this.instances=new Ae.n(this.parent.locale),Od(this.parent,e.column,"e-field",{})}read(e){return this.obj.value}write(e){const t=e.column,i="Dialog"!==this.parent.editSettings.mode;this.obj=new an(Object(Ae.G)({value:parseFloat(td(e.column.field,e.rowData)),enableRtl:this.parent.enableRtl,placeholder:i?"":e.column.headerText,enabled:Wc(e.column,e.requestType,e.element),floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",locale:this.parent.locale},t.edit.params)),e.element.setAttribute("name",Nc(e.column.field)),this.obj.appendTo(e.element),this.obj.element.addEventListener("keydown",this.keyEventHandler)}destroy(){this.obj&&!this.obj.isDestroyed&&(this.obj.element.removeEventListener("keydown",this.keyEventHandler),this.obj.destroy())}}class Md extends kd{create(e){const t={type:"text",value:Object(Ae.T)(e.value)?"":e.value,style:"text-align:"+e.column.textAlign};return Od(this.parent,e.column,"e-field e-input e-defaultcell",t)}read(e){return e.value}write(e){const t=e.column,i="Dialog"!==this.parent.editSettings.mode;this.obj=new fn(Object(Ae.G)({element:e.element,floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",enableRtl:this.parent.enableRtl,enabled:Wc(e.column,e.requestType,e.element),placeholder:i?"":e.column.headerText},t.edit.params)),this.obj.appendTo(e.element)}}class Ld{constructor(e,t,i){this.args={},this.currentVirtualData={},this.parent=e,this.renderer=i,this.serviceLocator=t,this.addEventListener()}clickHandler(e){const t=e.target,i=this.parent;(Ic(t,Va)&&Ic(Ic(t,Va),"e-grid").id===i.element.id||i.frozenRows&&Ic(t,qa))&&!Ic(t,"e-unboundcelldiv")&&(this.rowIndex=Ic(t,Ha)?parseInt(t.parentElement.getAttribute(sh),10):-1,i.isEdit&&i.editModule.endEdit())}dblClickHandler(e){Ic(e.target,Ha)&&this.parent.editSettings.allowEditOnDblClick&&this.parent.editModule.startEdit(Ic(e.target,Xa))}editComplete(e){switch(this.parent.isEdit=!1,e.requestType){case"save":(this.parent.isCheckBoxSelection||"Multiple"===this.parent.selectionSettings.type)&&this.parent.isPersistSelection||"edit"!==e.action&&this.parent.selectRow(0),this.parent.trigger(Ur,Object(Ae.G)(e,{requestType:"save",type:Ur}));break;case"delete":this.parent.trigger(Ur,Object(Ae.G)(e,{requestType:"delete",type:Ur})),this.parent.isCheckBoxSelection||this.parent.selectRow(this.editRowIndex)}}getEditArgs(e,t,i){const s=this.parent.getPrimaryKeyFieldNames(),n=[];for(let o=0;o<s.length;o++)n.push(td(s[o],e));return{primaryKey:s,primaryKeyValue:n,requestType:"beginEdit",rowData:e,rowIndex:this.rowIndex,type:"edit",cancel:!1,foreignKeyData:t&&t.foreignKeyData,target:void 0,isScroll:i}}startEdit(e){const t=this.parent;if(this.rowIndex=this.editRowIndex=parseInt(e.getAttribute(sh),10),(t.enableVirtualization||t.enableInfiniteScrolling)&&!this.parent.element.querySelector('.e-row[aria-rowindex="'+this.rowIndex+'"]'))return;const i={data:void 0,index:this.rowIndex,isScroll:!1};if(this.parent.notify("virtual-scroll-edit-action-begin",i),ed(t)){const i=t.getRowObjectFromUID(e.getAttribute("data-uid"));this.previousData=i.data}else this.previousData||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling?this.parent.enableVirtualization||(this.previousData=Object(Ae.G)({},{},t.getCurrentViewRecords()[this.rowIndex],!0)):this.previousData=i.data;const s=Object(Ae.G)({},{},i.data||this.previousData,!0);this.uid=e.getAttribute("data-uid");const n=t.getRowObjectFromUID(this.uid),o=this.getEditArgs(s,n,i.isScroll);o.row=e,o.isScroll?this.inlineEditHandler(o,e):(this.parent.notify(Da,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),t.trigger("beginEdit",o,i=>{i.type="actionBegin",t.trigger(_r,i,t=>{t.cancel||this.inlineEditHandler(t,e)})}))}inlineEditHandler(e,t){const i=this.parent;i.isEdit=!0,e.row=e.row?e.row:t,"Dialog"!==i.editSettings.mode&&i.clearSelection(),"Dialog"===i.editSettings.mode&&i.selectionModule&&(i.selectionModule.preventFocus=!0,e.row.classList.add("e-dlgeditrow")),this.renderer.update(e),this.uid=t.getAttribute("data-uid"),i.editModule.applyFormValidation(),e.type="actionComplete",i.trigger(Ur,e),this.args=e,this.parent.allowTextWrap&&this.parent.notify(Ql,{case:"textwrap"})}updateRow(e,t){const i=this.parent;this.editRowIndex=e;const s={requestType:"save",action:"edit",type:_r,data:t,cancel:!1,previousData:i.getCurrentViewRecords()[e],row:i.getRowByIndex(e)};i.showSpinner(),i.notify(Wl,s),s.promise?s.promise.then(()=>i.refresh()).catch(e=>this.edFail(e)):i.refresh()}editFormValidate(){const e=this.parent,t=e.editModule.editFormValidate(),i={prevData:this.previousData,isValid:!0,editIdx:this.editRowIndex,addIdx:this.addedRowIndex};return e.notify("validate-virtual-form",i),t&&i.isValid}endEdit(){const e=this.parent;if(!this.parent.isEdit||!this.editFormValidate())return;let t=Object(Ae.G)({},{},this.previousData,!0);const i=Object(Ae.G)(this.args,{requestType:"save",type:_r,data:t,cancel:!1,previousData:this.previousData,selectedRow:e.selectedRowIndex,foreignKeyData:{}}),s="Right"===e.getFrozenMode()?1:0,n="Dialog"===e.editSettings.mode,o=Object(Ae.hb)("#"+e.element.id+"_dialogEdit_wrapper",document),r=n?o.querySelector(".e-gridform"):e.element.getElementsByClassName("e-gridform")[s],l={virtualData:Object(Ae.G)({},{},this.previousData,!0),isAdd:!1,isScroll:!1,endEdit:!0};if(this.parent.notify(fa,l),(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&"Normal"===this.parent.editSettings.mode&&Object.keys(l.virtualData).length?this.parent.isEdit&&(this.currentVirtualData=t=i.data=l.virtualData):t=e.editModule.getCurrentEditedData(r,t),e.isFrozenGrid()&&"Normal"===e.editSettings.mode){const i=e.getMovableVirtualHeader().querySelector(".e-gridform"),s=e.getMovableVirtualContent().querySelector(".e-gridform"),n=[i||s];let o,r,l=[];e.getFrozenMode()===Za&&(o=e.getFrozenRightHeader().querySelector(".e-gridform"),r=e.getFrozenRightContent().querySelector(".e-gridform"),l=[o||r]),cd(this.parent,(i,s)=>{for(const n of s)n&&(t=e.editModule.getCurrentEditedData(n,t))},[[],n,l])}let a=[].slice.call(e.element.getElementsByClassName($a)).length;if(l.isAdd||!Object.keys(this.currentVirtualData).length||a||(a=1),n?o.getElementsByClassName($a).length:a)i.action="edit",e.trigger(_r,i,t=>{t.cancel||(e.showSpinner(),e.notify(Wl,t))});else if(i.action="add",i.selectedRow=0,i.index=this.addedRowIndex,e.notify(ba,{}),e.notify(Cl,i),this.addedRowIndex=null,i.cancel)return}destroyElements(){const e=this.parent;e.editModule.destroyWidgets(),e.editModule.destroyForm(),this.parent.notify(_l,{})}editHandler(e){e.promise?e.promise.then(t=>this.edSucc(t,e)).catch(e=>this.edFail(e)):this.editSuccess(e.data,e)}edSucc(e,t){this.editSuccess(e,t)}edFail(e){this.editFailure(e)}updateCurrentViewData(e){this.parent.enableVirtualization||this.parent.enableInfiniteScrolling||(this.parent.getCurrentViewRecords()[this.editRowIndex]=e)}requestSuccess(e){this.parent.editModule.formObj&&!this.parent.editModule.formObj.isDestroyed&&(this.destroyElements(),this.stopEditStatus(),"Dialog"===this.parent.editSettings.mode&&"add"!==e.action&&this.parent.selectionModule&&this.parent.element.querySelector(".e-dlgeditrow").classList.remove("e-dlgeditrow"))}editSuccess(e,t){if(!(Object(Ae.T)(e)||e instanceof Array)){const i="rowData";t.data=Object(Ae.G)({},Object(Ae.G)({},t[i],t.data),e)}this.requestSuccess(t),this.parent.trigger(cl,t),t.type=Ur,this.parent.isEdit=!1,this.refreshRow(t.data),this.parent.notify(ba,t),this.parent.editModule.checkLastRow(t.row),this.parent.editModule.isLastRow=!1,this.updateCurrentViewData(t.data),this.blazorTemplate(),this.editRowIndex=null,this.parent.trigger(Ur,t),(!this.parent.isCheckBoxSelection&&"Multiple"!==this.parent.selectionSettings.type||!this.parent.isPersistSelection&&!this.parent.selectionSettings.checkboxOnly)&&"Dialog"!==this.parent.editSettings.mode&&this.parent.selectRow(this.rowIndex>-1?this.rowIndex:this.editRowIndex),this.parent.hideSpinner()}closeForm(){!this.cloneRow&&this.parent.isEdit&&this.stopEditStatus(),this.cloneRow&&(this.cloneRow.remove(),this.cloneRow=null,this.originalRow.classList.remove("e-hiddenrow")),this.parent.isFrozenGrid()&&this.cloneFrozen&&(this.cloneFrozen.remove(),this.frozen.classList.remove("e-hiddenrow"))}blazorTemplate(){const e=this.parent.getColumns();this.parent.editSettings.template&&"Normal"===this.parent.editSettings.mode&&Object(Ae.ob)(this.parent.element.id+"editSettingsTemplate","Template",this.parent.editSettings);for(let t=0;t<e.length;t++){const i=e[t];i.template&&Object(Ae.ob)(this.parent.element.id+i.uid,"Template",i,!1),i.editTemplate&&Object(Ae.ob)(this.parent.element.id+i.uid+"editTemplate","EditTemplate",i)}}editFailure(e){this.parent.trigger(Kr,{error:e}),this.parent.hideSpinner(),this.parent.log("actionfailure",{error:e})}needRefresh(){let e=!0;const t=this.parent.element.querySelector(".e-gridform");return!this.parent.enableVirtualization&&!this.parent.infiniteScrollSettings.enableCache||"Normal"!==this.parent.editSettings.mode||t||(e=!1),e}refreshRow(e){const t=this.parent.isFrozenGrid(),i=new ch(this.serviceLocator,null,this.parent);let s=this.parent.getRowObjectFromUID(this.uid);if(s){s.changes=e,this.parent.notify("refresh-virtual-cache",{data:e}),Qc(s,this.parent.getForeignKeyColumns(),s.changes),this.needRefresh()&&i.refresh(s,this.parent.getColumns(),!0);const n=[].slice.call(this.parent.element.querySelectorAll('[aria-rowindex="'+s.index+'"]'));if(t&&n.length)for(let t=0;t<n.length;t++){const o=n[t].getAttribute("data-uid");o!==this.uid&&(s=this.parent.getRowObjectFromUID(o),s.changes=e,i.refresh(s,this.parent.getColumns(),!0),this.parent.editModule.checkLastRow(n[t]))}}}closeEdit(){if(!this.parent.isEdit)return;const e=this.parent,t=Object(Ae.G)(this.args,{requestType:"cancel",type:_r,cancel:!1,data:this.previousData,selectedRow:e.selectedRowIndex});e.notify("virtual-scroll-edit-cancel",t),this.blazorTemplate(),e.trigger(_r,t,t=>{if(t.cancel)return;"Dialog"===this.parent.editSettings.mode&&this.parent.notify(_l,{}),e.isEdit=!1,this.stopEditStatus(),t.type=Ur,"Dialog"!==e.editSettings.mode&&this.refreshRow(t.data);const i=e.groupSettings.enableLazyLoading&&e.groupSettings.columns.length&&!e.getContentTable().querySelector("tr.e-emptyrow");e.getContentTable().querySelector("tr.e-emptyrow")||e.getContentTable().querySelector("tr.e-row")||i||e.renderModule.emptyRow(),"Dialog"!==e.editSettings.mode&&e.selectRow(this.rowIndex),e.trigger(Ur,t)})}addRecord(e,t){const i=this.parent;if(this.addedRowIndex=t=Object(Ae.T)(t)?0:t,e)return void i.notify(Cl,{requestType:"save",type:_r,data:e,selectedRow:0,action:"add",index:t});if(i.isEdit)return;this.previousData={},this.uid="";const s=i.getColumns(),n={virtualData:{},isScroll:!1};this.parent.notify(fa,n);for(let r=0;r<s.length;r++)n.isScroll&&"movable"!==s[r].getFreezeTableName()||s[r].field&&_e.b.setValue(s[r].field,s[r].defaultValue,this.previousData);const o={cancel:!1,foreignKeyData:{},requestType:"add",data:this.previousData,type:_r,index:t,rowData:this.previousData,target:void 0,isScroll:n.isScroll};(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&Object.keys(n.virtualData).length&&(o.data=o.rowData=n.virtualData),o.isScroll?this.inlineAddHandler(o):(this.parent.notify(Da,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),i.trigger(_r,o,e=>{e.cancel||this.inlineAddHandler(e)}))}inlineAddHandler(e){const t=this.parent;t.isEdit=!0,"Dialog"!==t.editSettings.mode&&t.clearSelection(),this.renderer.addNew(e),t.editModule.applyFormValidation(),e.type=Ur,e.row=t.element.querySelector("."+Ja),t.trigger(Ur,e),this.args=e}deleteRecord(e,t){if(this.editRowIndex=this.parent.selectedRowIndex,t){t=t instanceof Array?t:[t];const i=this.parent,s=Object.keys(t).length;e=e||this.parent.getPrimaryKeyFieldNames()[0];for(let n=0;n<s;n++){let s;const o=i.currentViewData.some(i=>(s=i,t[n]===td(e,i)||t[n]===i));t[n]=o?s:t[n][e]?t[n]:{[e]:t[n]}}}const i={requestType:"delete",type:_r,foreignKeyData:{},data:t||this.parent.getSelectedRecords(),tr:this.parent.getSelectedRows(),cancel:!1};if(Object(Ae.T)(this.parent.commandDelIndex)||(i.data[0]=this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute("data-uid")).data),this.parent.enableVirtualization&&i.data.length>1){const e=this.parent.getSelectedRows()[0].getAttribute("data-uid");i.data=[this.parent.getRowObjectFromUID(e).data]}this.parent.notify(Cl,i)}stopEditStatus(){const e=this.parent,t=[].slice.call(e.element.getElementsByClassName(Ja)),i=[].slice.call(e.element.getElementsByClassName($a));for(let s=0;s<t.length;s++)Object(Ae.db)(t[s]);for(let s=0;s<i.length;s++)i[s].classList.remove($a)}addEventListener(){this.parent.isDestroyed||(this.evtHandlers=[{event:Ul,handler:this.editHandler},{event:Xl,handler:this.dblClickHandler},{event:Dl,handler:this.clickHandler},{event:ra,handler:this.requestSuccess},{event:Pl,handler:this.dblClickHandler},{event:"delete-complete",handler:this.editComplete},{event:"save-complete",handler:this.editComplete},{event:Ea,handler:this.closeEdit},{event:"closeinline",handler:this.closeForm}],wd(this.parent,this.evtHandlers,!0,this))}removeEventListener(){this.parent.isDestroyed||wd(this.parent,this.evtHandlers,!1)}destroy(){this.removeEventListener(),this.renderer.destroy()}}class zd extends Ld{constructor(e,t,i){super(e,t),this.parent=e,this.serviceLocator=t,this.renderer=i}closeEdit(){super.closeEdit()}addRecord(e,t){super.addRecord(e,t)}endEdit(){super.endEdit()}updateRow(e,t){super.updateRow(e,t)}deleteRecord(e,t){super.deleteRecord(e,t)}startEdit(e){super.startEdit(e)}}class Bd{constructor(e,t,i){this.cellDetails={},this.originalCell={},this.cloneCell={},this.editNext=!1,this.preventSaveCell=!1,this.parent=e,this.serviceLocator=t,this.renderer=i,this.focus=t.getService("focus"),this.addEventListener()}addEventListener(){this.parent.isDestroyed||(this.evtHandlers=[{event:Dl,handler:this.clickHandler},{event:Pl,handler:this.dblClickHandler},{event:El,handler:this.onBeforeCellFocused},{event:xl,handler:this.onCellFocused},{event:Xl,handler:this.dblClickHandler},{event:Rl,handler:this.keyDownHandler},{event:aa,handler:this.editNextValCell},{event:"closebatch",handler:this.closeForm},{event:kl,handler:this.destroy}],wd(this.parent,this.evtHandlers,!0,this),this.dataBoundFunction=this.dataBound.bind(this),this.batchCancelFunction=this.batchCancel.bind(this),this.parent.addEventListener(Yr,this.dataBoundFunction),this.parent.addEventListener(al,this.batchCancelFunction))}removeEventListener(){this.parent.isDestroyed||(wd(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(Yr,this.dataBoundFunction),this.parent.removeEventListener(al,this.batchCancelFunction))}batchCancel(){this.parent.focusModule.restoreFocus()}dataBound(){this.parent.notify(Hl,{})}destroy(){this.removeEventListener()}clickHandler(e){Ic(e.target,this.parent.element.id+"_add",!0)||(this.parent.isEdit&&Object(Ae.A)(this.form,"td")!==Object(Ae.A)(e.target,"td")&&(this.saveCell(),this.editNextValCell()),Ic(e.target,Ha)&&!this.parent.isEdit&&this.setCellIdx(e.target))}dblClickHandler(e){const t=Ic(e.target,Ha),i=Ic(e.target,Xa),s=i&&parseInt(i.getAttribute(sh),10),n=t&&parseInt(t.getAttribute(ih),10);Object(Ae.T)(t)||Object(Ae.T)(s)||isNaN(n)||t.parentElement.classList.contains($a)||this.editCell(s,this.parent.getColumns()[n].field,this.isAddRow(s))}onBeforeCellFocused(e){this.parent.isEdit&&this.validateFormObj()&&(e.byClick||["tab","shiftTab","enter","shiftEnter"].indexOf(e.keyArgs.action)>-1)&&(e.cancel=!0,e.byClick?e.clickArgs.preventDefault():e.keyArgs.preventDefault())}onCellFocused(e){const t=this.parent.getFrozenLeftCount(),i=this.parent.getFrozenRightColumnsCount(),s=this.parent.getContent().querySelector("."+Wa),n=this.parent.getHeaderContent().querySelector("."+Ga),o=!(e.container.isContent&&e.container.isDataCell||this.parent.frozenRows&&e.container.isHeader);if(!e.byKey||o)return void(this.parent.isEdit&&o&&this.saveCell());let[r,l]=e.container.indexes;if(t&&(s.contains(e.element)||this.parent.frozenRows&&n.contains(e.element))&&(l+=t),i){const i=this.parent.getHeaderContent().querySelector(".e-frozen-right-header");(this.parent.getContent().querySelector(".e-frozen-right-content").contains(e.element)||this.parent.frozenRows&&i.contains(e.element))&&(l+=t+this.parent.getMovableColumnsCount())}this.parent.frozenRows&&e.container.isContent&&(r+=this.parent.frozenRows);let a=this.parent.isEdit;if(!this.parent.element.getElementsByClassName("e-popup-open").length)switch(a=a&&!this.validateFormObj(),e.keyArgs.action){case"tab":case"shiftTab":const t=this.parent.getColumns()[e.indexes[1]];t&&!this.parent.isEdit&&this.editCell(e.indexes[0],t.field),(a||this.parent.isLastCellPrimaryKey)&&this.editCellFromIndex(r,l);break;case"enter":case"shiftEnter":e.keyArgs.preventDefault();const i={cancel:!1,keyArgs:e.keyArgs};this.parent.notify("beforeFocusCellEdit",i),!i.cancel&&a&&this.editCell(r,this.cellDetails.column.field);break;case"f2":this.editCellFromIndex(r,l),this.focus.focus()}}isAddRow(e){return this.parent.getDataRows()[e].classList.contains("e-insertedrow")}editCellFromIndex(e,t){this.cellDetails.rowIndex=e,this.cellDetails.cellIndex=t,this.editCell(e,this.parent.getColumns()[t].field,this.isAddRow(e))}closeEdit(){const e=this.parent,t=this.parent.getRowsObject(),i={cancel:!1,batchChanges:this.getBatchChanges()};if(e.notify("before-batch-cancel",i),i.cancel)return;e.isEdit&&this.saveCell(!0),this.isAdded=!1,e.clearSelection();const s=dd(this.parent);for(let o=0;o<t.length;o++){let e=!1;const i=t[o].isDirty;cd(this.parent,(t,s)=>{e=this.removeBatchElementChanges(s[o],i),e&&s.splice(o,1)},s),e&&o--}e.getContentTable().querySelector("tr.e-row")||e.renderModule.renderEmptyRow();let n={requestType:"batchCancel",rows:this.parent.getRowsObject()};e.notify(al,{rows:this.parent.getRowsObject().length?this.parent.getRowsObject():[new za({isDataRow:!0,cells:[new Ba({isDataCell:!0,visible:!0})]})]}),e.selectRow(this.cellDetails.rowIndex),this.refreshRowIdx(),e.notify(Hl,{}),this.parent.notify(ql,{}),n={requestType:"batchCancel",rows:this.parent.getRowsObject()},e.trigger(al,n)}removeBatchElementChanges(e,t){const i=this.parent,s=new ch(this.serviceLocator,null,this.parent);let n=!1;if(t){e.isDirty=t;const o=i.getRowElementByUID(e.uid);if(o&&(o.classList.contains("e-insertedrow")?(Object(Ae.db)(o),n=!0):(Qc(e,this.parent.getForeignKeyColumns(),e.data),delete e.changes,delete e.edit,e.isDirty=!1,Object(Ae.y)(o,[],["e-hiddenrow","e-updatedtd"]),s.refresh(e,i.getColumns(),!1)),this.parent.aggregates.length>0)){const e=[];e.type="cancel",this.parent.notify(jl,e),this.parent.groupSettings.columns.length>0&&this.parent.notify(Tl,e)}}return n}removeHideAndSelection(e){if(e.classList.contains("e-hiddenrow")){e.removeAttribute("aria-selected");const t=[].slice.call(e.getElementsByClassName("e-selectionbackground"));for(let e=0;e<t.length;e++)Object(Ae.eb)([t[e]],["e-selectionbackground","e-active"])}Object(Ae.y)(e,[],["e-hiddenrow","e-updatedtd"])}deleteRecord(e,t){this.saveCell(),this.validateFormObj()&&this.saveCell(!0),this.isAdded=!1,this.bulkDelete(e,t),this.parent.aggregates.length>0&&(this.parent.notify(jl,{}),this.parent.groupSettings.columns.length>0&&this.parent.notify(Tl,{}))}addRecord(e){this.bulkAddRow(e)}endEdit(){this.parent.isEdit&&this.validateFormObj()||this.batchSave()}closeForm(){for(let e=0;e<Object.keys(this.originalCell).length;e++)for(let t=0;t<Object.keys(this.cloneCell).length;t++)Object.keys(this.originalCell)[e]===Object.keys(this.cloneCell)[t]&&(this.cloneCell[Object.keys(this.cloneCell)[t]].replaceWith(this.originalCell[Object.keys(this.originalCell)[e]]),this.originalCell[Object.keys(this.originalCell)[e]].classList.contains("e-selectionbackground")&&this.originalCell[Object.keys(this.originalCell)[e]].classList.remove("e-selectionbackground","e-cellselectionbackground","e-active"));this.cloneCell={},this.originalCell={}}validateFormObj(){return this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate()}batchSave(){const e=this.parent;if(e.isCheckBoxSelection){const t=e.element.querySelector(".e-checkselectall").parentElement;t.classList.contains("e-checkbox-disabled")&&e.pageSettings.totalRecordsCount>e.currentViewData.length&&Object(Ae.eb)([t],["e-checkbox-disabled"])}if(this.saveCell(),e.isEdit||this.editNextValCell()||e.isEdit)return;const t=this.getBatchChanges();"Multiple"===this.parent.selectionSettings.type&&t.deletedRecords.length&&this.parent.selectionSettings.persistSelection&&(t.deletedRecords=this.removeSelectedData,this.removeSelectedData=[]);const i={changedRecords:this.parent.getRowsObject().filter(e=>e.isDirty&&-1===["add","delete"].indexOf(e.edit)).map(e=>e.data)};e.trigger("beforeBatchSave",{batchChanges:t,cancel:!1},s=>{s.cancel||(e.showSpinner(),e.notify(Vl,{changes:t,original:i}))})}getBatchChanges(){const e={addedRecords:[],deletedRecords:[],changedRecords:[]},t=this.parent.getRowsObject();for(const i of t)if(i.isDirty)switch(i.edit){case"add":e.addedRecords.push(i.changes);break;case"delete":e.deletedRecords.push(i.data);break;default:e.changedRecords.push(i.changes)}return e}removeRowObjectFromUID(e){const t=this.parent.getRowsObject();let i=0;for(let s=t.length;i<s&&t[i].uid!==e;i++);cd(this.parent,(e,t)=>{t.splice(i,1)},dd(this.parent))}addRowObject(e){const t=this.parent,i="Top"===t.editSettings.newRowPosition;cd(this.parent,(s,n)=>{const o=e.clone();o.cells=function(e,t,i){const s=e.getFrozenLeftCount(),n=e.getMovableColumnsCount(),o=e.getFrozenRightColumnsCount(),r=e.getFrozenMode(),l=e.isRowDragable()?1:0,a="Right"===r?s+n:s+n+l,h="Right"===r?s:s+l,c="Right"===r?t.length-o-l:o?t.length-o:t.length;return i===th?t=t.slice(0,s?s+l:t.length):i===eh?t=t.slice(a,t.length):"movable"===i&&(t=t.slice(h,c)),t}(t,o.cells,s),i?n.unshift(o):n.push(o)},dd(this.parent),!0)}bulkDelete(e,t){this.removeSelectedData=[];const i=this.parent;let s=i.selectedRowIndex,n=i.getSelectedRows();const o={primaryKey:this.parent.getPrimaryKeyFieldNames(),rowIndex:s,rowData:t||i.getSelectedRecords()[0],cancel:!1};o.row=t?i.editModule.deleteRowUid?i.getRowElementByUID(i.editModule.deleteRowUid):i.getRows()[i.getCurrentViewRecords().indexOf(t)]:t?i.getRows()[s]:n[0],o.row&&i.trigger("beforeBatchDelete",o,e=>{if(!e.cancel){if(this.removeSelectedData=i.getSelectedRecords(),i.clearSelection(),e.row=e.row?e.row:t?i.getRows()[s]:n[0],this.parent.isFrozenGrid()){t&&(s=parseInt(e.row.getAttribute(sh),10),n=[],n.push(i.getRowByIndex(s)),n.push(i.getMovableRowByIndex(s)),i.getFrozenMode()===Za&&n.push(i.getFrozenRightRowByIndex(s)));for(let e=0;e<n.length;e++){const t=n[e].getAttribute("data-uid");if(n[e].classList.contains("e-insertedrow"))this.removeRowObjectFromUID(t),Object(Ae.db)(n[e]);else{const o=i.getRowObjectFromUID(t);o.isDirty=!0,o.edit="delete",Object(Ae.y)(n[e],["e-hiddenrow","e-updatedtd"],[]),i.frozenRows&&s<i.frozenRows&&i.getMovableDataRows().length>=i.frozenRows&&(i.getMovableHeaderTbody().appendChild(i.getMovableRowByIndex(i.frozenRows-1)),i.getFrozenHeaderTbody().appendChild(i.getRowByIndex(i.frozenRows-1)),i.getFrozenMode()===Za&&i.getFrozenRightHeaderTbody().appendChild(i.getFrozenRightRowByIndex(i.frozenRows-1))),i.frozenRows&&s<i.frozenRows&&i.getDataRows().length>=i.frozenRows&&i.getHeaderTable().querySelector(nh).appendChild(i.getRowByIndex(i.frozenRows-1))}delete n[e]}}else if(this.parent.isFrozenGrid()||1!==n.length&&!t)for(let e=0;e<n.length;e++){const t=n[e].getAttribute("data-uid");if(n[e].classList.contains("e-insertedrow"))this.removeRowObjectFromUID(t),Object(Ae.db)(n[e]);else{Object(Ae.y)(n[e],["e-hiddenrow","e-updatedtd"],[]);const s=i.getRowObjectFromUID(t);s.isDirty=!0,s.edit="delete",delete n[e]}}else{let s=e.row.getAttribute("data-uid");if(s=t&&this.parent.editModule.deleteRowUid?s=this.parent.editModule.deleteRowUid:s,e.row.classList.contains("e-insertedrow"))this.removeRowObjectFromUID(s),Object(Ae.db)(e.row);else{const t=i.getRowObjectFromUID(s);t.isDirty=!0,t.edit="delete",Object(Ae.y)(e.row,["e-hiddenrow","e-updatedtd"],[])}delete e.row}this.refreshRowIdx(),t&&(i.editModule.deleteRowUid=void 0,i.getSelectedRows().length&&(s=parseInt(i.getSelectedRows()[0].getAttribute(sh),10))),i.isCheckBoxSelection||i.selectRow(s),i.trigger(hl,e),i.notify(hl,{rows:this.parent.getRowsObject()}),i.notify(Hl,{})}})}refreshRowIdx(){const e=this.parent.getAllDataRows(!0),t=["Right"!==(s=this.parent).getFrozenMode()?s.getAllDataRows(!0):[],s.getAllMovableDataRows(!0),s.getAllFrozenRightDataRows(!0)],i=dd(this.parent);var s;for(let n=0,o=0,r=e.length;n<r;n++)e[n].classList.contains(Xa)&&!e[n].classList.contains("e-hiddenrow")?(cd(this.parent,(e,t,i)=>{t[n].setAttribute(sh,o.toString()),i[n].index=o},t,null,i),o++):cd(this.parent,(e,t,i)=>{t[n].removeAttribute(sh),i[n].index=-1},t,null,i)}getIndexFromData(e){return function(e,t){for(let i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1}(e,this.parent.getCurrentViewRecords())}bulkAddRow(e){const t=this.parent;if(!t.editSettings.allowAdding)return;if(t.isEdit&&(this.saveCell(),this.parent.notify(aa,{})),t.isEdit)return;this.parent.element.classList.add("e-editing");const i={defaultData:e||this.getDefaultData(),primaryKey:t.getPrimaryKeyFieldNames(),cancel:!1};t.trigger("beforeBatchAdd",i,i=>{if(i.cancel)return;let s,n;this.isAdded=!0,t.clearSelection();const o=new ch(this.serviceLocator,null,this.parent),r=new dh(this.parent).generateRows([i.defaultData]);let l,a,h=o.render(r[0],t.getColumns());for(let e=0;e<this.parent.groupSettings.columns.length;e++)h.insertBefore(this.parent.createElement("td",{className:"e-indentcell"}),h.firstChild),r[0].cells.unshift(new Ba({cellType:Ia.Indent}));let c=t.getContentTable().querySelector(nh);if(h.classList.add("e-insertedrow"),c.querySelector(".e-emptyrow")){const e=c.querySelector(".e-emptyrow");e.parentNode.removeChild(e),this.removeFrozenTbody()}t.isFrozenGrid()&&(n=h.cloneNode(!0),s=this.renderMovable(h,n),h="Right"===t.getFrozenMode()?n:h,this.renderFrozenAddRow(h,s,n)),c=t.frozenRows&&"Top"===t.editSettings.newRowPosition?t.getHeaderTable().querySelector(nh):t.getContentTable().querySelector(nh),"Top"===this.parent.editSettings.newRowPosition?c.insertBefore(h,c.firstChild):c.appendChild(h),Object(Ae.u)([].slice.call(h.getElementsByClassName(Ha)),["e-updatedtd"]),r[0].isDirty=!0,r[0].changes=Object(Ae.G)({},{},r[0].data,!0),r[0].edit="add",this.addRowObject(r[0]),this.refreshRowIdx(),this.focus.forgetPrevious(),t.notify(ll,{rows:this.parent.getRowsObject(),args:{isFrozen:this.parent.isFrozenGrid()}});const d=this.getBatchChanges(),p=this.getBottomIndex();t.selectRow("Top"===this.parent.editSettings.newRowPosition?0:p),e||(a=this.findNextEditableCell(0,!0),l=t.getColumns()[a],this.editCell("Top"===this.parent.editSettings.newRowPosition?0:p,l.field,!0)),this.parent.aggregates.length>0&&(e||d.addedRecords.length)&&this.parent.notify(jl,{}),t.trigger(ll,{defaultData:i.defaultData,row:h,columnObject:l,columnIndex:a,primaryKey:i.primaryKey,cell:h.cells[a]}),t.isFrozenGrid()&&ld(s.querySelector("td:not(.e-hide)"),h.querySelector("td:not(.e-hide)"))})}renderFrozenAddRow(e,t,i){const s=this.parent,n=bd(this.parent),o=fd(this.parent);"Top"===s.editSettings.newRowPosition?n.insertBefore(t,n.firstChild):n.appendChild(t),Object(Ae.u)([].slice.call(t.getElementsByClassName(Ha)),["e-updatedtd"]),o&&i&&("Top"===s.editSettings.newRowPosition?o.insertBefore(i,o.firstChild):o.appendChild(i),Object(Ae.u)([].slice.call(i.getElementsByClassName(Ha)),["e-updatedtd"]),ld(i.querySelector("td:not(.e-hide)"),e.querySelector("td:not(.e-hide)"))),"auto"===s.height&&s.notify(na,{})}removeFrozenTbody(){const e=this.parent;if(e.isFrozenGrid()){const t=e.getContent().querySelector("."+Wa).querySelector(nh);if(t.firstElementChild.parentNode.removeChild(t.firstElementChild),e.getFrozenMode()===Za){const t=e.getContent().querySelector(".e-frozen-right-content").querySelector(nh);t.firstElementChild.parentNode.removeChild(t.firstElementChild)}}}renderMovable(e,t){const i=e.cloneNode(!0),s=this.parent.getMovableColumnsCount(),n=this.parent.getFrozenLeftCount(),o=this.parent.getFrozenRightColumnsCount();return pd(e,0,n),pd(i,n,o?i.children.length-o:i.children.length),pd(t,n+s,t.children.length),i}findNextEditableCell(e,t,i){const s=this.parent.getColumns(),n=s.length;let o;for(let r=e;r<n;r++){if(o=!!i&&Object(Ae.T)(s[r].validationRules),!t&&this.checkNPCell(s[r]))return r;if(t&&!s[r].template&&s[r].visible&&s[r].allowEditing&&(!s[r].isIdentity||!s[r].isPrimaryKey)&&!o)return r}return-1}checkNPCell(e){return!e.template&&e.visible&&!e.isPrimaryKey&&!e.isIdentity&&e.allowEditing}getDefaultData(){const e=this.parent,t={},i={number:0,string:null,boolean:!1,date:null,datetime:null};for(const s of e.columnModel)s.field&&Object(Ae.mb)(s.field,Object.keys(s).indexOf("defaultValue")>=0?s.defaultValue:i[s.type],t);return t}setCellIdx(e){let t=0;this.parent.allowGrouping&&(t=this.parent.groupSettings.columns.length),this.cellDetails.cellIndex=e.cellIndex-t,this.cellDetails.rowIndex=parseInt(e.getAttribute("index"),10)}editCell(e,t,i){const s=this.parent,n=s.getColumnByField(t);this.index=e,this.field=t,this.isAdd=i;const o=s.isEdit&&!(this.cellDetails.column.field===t&&this.cellDetails.rowIndex===e&&this.parent.getDataRows().length-1!==e);s.editSettings.allowEditing&&(!o&&n.allowEditing?this.editCellExtend(e,t,i):o&&(this.editNext=!0,this.saveCell()))}editCellExtend(e,t,i){const s=this.parent,n=s.getColumnByField(t),o=s.getPrimaryKeyFieldNames();if(s.isEdit)return;let r,l,a=Object(Ae.G)({},{},this.getDataByIndex(e),!0);if("movable"===n.getFreezeTableName()||n.getFreezeTableName()===eh?(r="movable"===n.getFreezeTableName()?s.getMovableDataRows()[e]:s.getFrozenRightDataRows()[e],l=this.parent.getRowObjectFromUID(r.getAttribute("data-uid")),a=l.changes?Object(Ae.G)({},{},l.changes,!0):a):(r=s.getDataRows()[e],a=Object(Ae.G)({},{},this.getDataByIndex(e),!0)),o[0]===n.field&&!r.classList.contains("e-insertedrow")||n.columns||n.isPrimaryKey&&n.isIdentity)return void(this.parent.isLastCellPrimaryKey=!0);this.parent.isLastCellPrimaryKey=!1,this.parent.element.classList.add("e-editing");const h=s.getRowObjectFromUID(r.getAttribute("data-uid")),c=[].slice.apply(r.cells),d={columnName:n.field,isForeignKey:!Object(Ae.T)(n.foreignKeyValue),primaryKey:o,rowData:a,validationRules:Object(Ae.G)({},n.validationRules?n.validationRules:{}),value:td(n.field,a),type:i?"add":"edit",cancel:!1,foreignKeyData:h&&h.foreignKeyData};d.cell=c[this.getColIndex(c,this.getCellIdx(n.uid))],d.row=r,d.columnObject=n,d.cell&&s.trigger("cellEdit",d,t=>{t.cancel||(t.cell=t.cell?t.cell:c[this.getColIndex(c,this.getCellIdx(n.uid))],t.row=t.row?t.row:r,t.columnObject=t.columnObject?t.columnObject:n,t.columnObject.index=Object(Ae.T)(t.columnObject.index)?0:t.columnObject.index,this.cellDetails={rowData:a,column:n,value:t.value,isForeignKey:t.isForeignKey,rowIndex:e,cellIndex:parseInt(t.cell.getAttribute(ih),10),foreignKeyData:t.foreignKeyData},t.cell.classList.contains("e-updatedtd")&&(this.isColored=!0,t.cell.classList.remove("e-updatedtd")),s.isEdit=!0,s.clearSelection(),s.isCheckBoxSelection&&s.isPersistSelection||s.selectRow(this.cellDetails.rowIndex,!0),this.renderer.update(t),this.parent.notify("batcheditform-rendered",t),this.form=Object(Ae.hb)("#"+s.element.id+"EditForm",s.element),s.editModule.applyFormValidation([n]),this.parent.element.querySelector(".e-gridpopup").style.display="none")})}updateCell(e,t,i){const s=this.parent,n=s.getColumnByField(t),o=s.getColumnIndexByField(t);if(n&&!n.isPrimaryKey&&n.allowEditing){const t=md(this.parent,n,e,o),r="movable"===n.getFreezeTableName()?this.parent.getMovableRowsObject()[e]:n.getFreezeTableName()===eh?s.getFrozenRightRowsObject()[e]:s.getRowObjectFromUID(t.parentElement.getAttribute("data-uid"));this.refreshTD(t,n,r,i),this.parent.trigger(Wr,{cell:this.newReactTd||t,column:n,data:r.changes})}}setChanges(e,t,i){let s;if(this.parent.isFrozenGrid()){const n=this.parent.getRowElementByUID(e.uid),o=parseInt(n.getAttribute(sh),10);s=this.parent.getRowsObject()[o],s.changes||(s.changes=Object(Ae.G)({},{},e.data,!0)),Object(Ae.T)(t)||Object(Ae.mb)(t,i,s.changes);const r=this.parent.getMovableRowsObject()[o];if(r.changes=Object(Ae.G)({},{},s.changes,!0),e.data[t]!==i&&(r.isDirty=!0,s.isDirty=!0),this.parent.getFrozenMode()===Za){const n=this.parent.getFrozenRightRowsObject()[o];n.changes=Object(Ae.G)({},{},s.changes,!0),e.data[t]!==i&&(n.isDirty=!0)}}else if(e.changes||(e.changes=Object(Ae.G)({},{},e.data,!0)),Object(Ae.T)(t)||_e.b.setValue(t,i,e.changes),e.data[t]!==i){const s=this.parent.getColumnByField(t).type;"date"===s||"datetime"===s?new Date(e.data[t]).toString()!==new Date(i).toString()&&(e.isDirty=!0):e.isDirty=!0}}updateRow(e,t){const i=Object.keys(t);for(const s of i)this.updateCell(e,s,t[s])}getCellIdx(e){let t=this.parent.getColumnIndexByUid(e)+this.parent.groupSettings.columns.length;return Object(Ae.T)(this.parent.detailTemplate)&&Object(Ae.T)(this.parent.childGrid)||t++,this.parent.isRowDragable()&&t++,t}refreshTD(e,t,i,s){const n=new yh(this.parent,this.serviceLocator);let o;s="number"!==t.type||Object(Ae.T)(s)?s:parseFloat(s),this.setChanges(i,t.field,s);let r,l,a=this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenRightColumnsCount();a=a&&this.parent.isRowDragable()?a+1:a,Qc(i,this.parent.getForeignKeyColumns(),i.changes),o=a&&"movable"===t.getFreezeTableName()&&this.parent.getColumns().length===i.cells.length?i.cells.slice(a,i.cells.length):i.cells,this.parent.isReact&&(r=e.parentElement,l=e.cellIndex);let h=0;a&&(h="movable"===t.getFreezeTableName()&&"Right"!==this.parent.getFrozenMode()?a:t.getFreezeTableName()===eh?this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount():h),n.refreshTD(e,o[this.getCellIdx(t.uid)-h],i.changes,{index:this.getCellIdx(t.uid)}),this.parent.isReact?(this.newReactTd=r.cells[l],r.cells[l].classList.add("e-updatedtd")):e.classList.add("e-updatedtd"),e.classList.add("e-updatedtd"),this.parent.notify(Hl,{})}getColIndex(e,t){let i=0;this.parent.allowGrouping&&this.parent.groupSettings.columns&&(i=this.parent.groupSettings.columns.length),Object(Ae.T)(this.parent.detailTemplate)&&Object(Ae.T)(this.parent.childGrid)||i++,this.parent.isRowDragable()&&i++;for(let s=0;s<e.length;s++)if(parseInt(e[s].getAttribute(ih),10)===t-i)return s;return-1}editNextValCell(){const e=this.parent,t=this.getBottomIndex();if(this.isAdded&&!e.isEdit){for(let i=this.cellDetails.cellIndex;i<e.getColumns().length;i++){if(e.isEdit)return;const i=this.findNextEditableCell(this.cellDetails.cellIndex+1,!0,!0),s=e.getColumns()[i];if(s){if("Bottom"===this.parent.editSettings.newRowPosition)this.editCell(t,s.field,!0);else{const e={index:0,column:s};this.parent.notify("next-cell-index",e),this.editCell(e.index,s.field,!0)}this.saveCell()}}e.isEdit||(this.isAdded=!1)}}escapeCellEdit(){const e=this.generateCellArgs();e.value=e.previousValue,this.successCallBack(e,e.cell.parentElement,e.column,!0)(e)}generateCellArgs(){const e=this.parent;this.parent.element.classList.remove("e-editing");const t=this.cellDetails.column,i={};i[t.field]=td(t.field,this.cellDetails.rowData);let s=e.editModule.getCurrentEditedData(this.form,i);const n=Object(Ae.G)({},s);s=Object(Ae.G)({},s,this.cellDetails.rowData);const o=td(t.field,n);Object(Ae.T)(t.field)||Object(Ae.W)(o)||Object(Ae.mb)(t.field,o,s);const r={columnName:t.field,value:td(t.field,s),rowData:this.cellDetails.rowData,column:t,previousValue:this.cellDetails.value,isForeignKey:this.cellDetails.isForeignKey,cancel:!1};return r.cell=this.form.parentElement,r.columnObject=t,r}saveCell(e){if(this.preventSaveCell||!this.form)return;const t=this.parent;if(!e&&(!t.isEdit||this.validateFormObj()))return;this.preventSaveCell=!0;const i=this.generateCellArgs(),s=i.cell.parentElement,n=i.column;e?this.successCallBack(i,s,n)(i):(t.trigger("cellSave",i,this.successCallBack(i,s,n)),t.notify("batchedit-form",{formObj:this.form}))}successCallBack(e,t,i,s){return e=>{const n=this.parent;if(e.cell=e.cell?e.cell:this.form.parentElement,e.columnObject=e.columnObject?e.columnObject:i,e.columnObject.index=Object(Ae.T)(e.columnObject.index)?0:e.columnObject.index,e.cancel){if(this.preventSaveCell=!1,this.editNext){if(this.editNext=!1,this.cellDetails.rowIndex===this.index&&this.cellDetails.column.field===this.field)return;this.editCellExtend(this.index,this.field,this.isAdd)}return}n.editModule.destroyWidgets([i]),n.isEdit=!1,n.editModule.destroyForm(),this.parent.notify(ql,{});let o=Ic(e.cell,Wa)||Ic(e.cell,Ga)?n.getRowObjectFromUID(t.getAttribute("data-uid"),!0):n.getRowObjectFromUID(t.getAttribute("data-uid"));if(n.getFrozenMode()===Za&&(Ic(e.cell,"e-frozen-right-header")||Ic(e.cell,"e-frozen-right-content"))&&(o=n.getRowObjectFromUID(t.getAttribute("data-uid"),!1,!0)),this.refreshTD(e.cell,i,o,e.value),this.parent.isReact&&(e.cell=this.newReactTd),Object(Ae.eb)([t],[$a,"e-batchrow"]),Object(Ae.eb)([e.cell],["e-editedbatchcell","e-boolcell"]),(!Object(Ae.T)(e.value)&&e.value.toString()===(Object(Ae.T)(this.cellDetails.value)?"":this.cellDetails.value).toString()&&!this.isColored||Object(Ae.T)(e.value)&&Object(Ae.T)(o.data[i.field])&&Object(Ae.T)(this.cellDetails.value)&&!e.cell.parentElement.classList.contains("e-insertedrow"))&&e.cell.classList.remove("e-updatedtd"),Object(Ae.T)(s)&&n.trigger("cellSaved",e),n.notify(Hl,{}),this.isColored=!1,this.parent.aggregates.length>0&&(this.parent.notify(jl,{}),this.parent.groupSettings.columns.length>0&&!this.isAddRow(this.cellDetails.rowIndex)&&this.parent.notify(Tl,{})),this.preventSaveCell=!1,this.editNext){if(this.editNext=!1,this.cellDetails.rowIndex===this.index&&this.cellDetails.column.field===this.field)return;const e=n.getColumnByField(this.field);e&&e.allowEditing&&this.editCellExtend(this.index,this.field,this.isAdd)}s&&n.notify(ma,{})}}getDataByIndex(e){const t=this.parent.getRowObjectFromUID(this.parent.getDataRows()[e].getAttribute("data-uid"));return t.changes?t.changes:t.data}keyDownHandler(e){if(("tab"===e.action||"shiftTab"===e.action)&&this.parent.isEdit){const t=this.parent,i=this.getBottomIndex(),s=Ic(e.target,Ha);if(s){const n=s.querySelector(".e-field");if(n){const s=this.parent.getVisibleColumns();s["tab"===e.action?s.length-1:0].field===n.getAttribute("id").slice(this.parent.element.id.length)&&(this.cellDetails.rowIndex===i&&"tab"===e.action?"Top"===t.editSettings.newRowPosition?(t.editSettings.newRowPosition="Bottom",this.addRecord(),t.editSettings.newRowPosition="Top"):this.addRecord():this.saveCell())}}}}addCancelWhilePaging(){this.validateFormObj()&&(this.parent.notify(Yl,{}),this.parent.isEdit=!1,this.isColored=!1)}getBottomIndex(){const e=this.getBatchChanges();return this.parent.getCurrentViewRecords().length+e.addedRecords.length-e.deletedRecords.length-1}}class Pd extends Ld{constructor(e,t,i){super(e,t),this.parent=e,this.serviceLocator=t,this.renderer=i}closeEdit(){super.closeEdit()}addRecord(e,t){super.addRecord(e,t)}endEdit(){super.endEdit()}updateRow(e,t){super.updateRow(e,t)}deleteRecord(e,t){super.deleteRecord(e,t)}startEdit(e){super.startEdit(e)}}class Hd extends kd{write(e){"datepickeredit"===e.column.editType?this.obj=new br(Object(Ae.G)(Vd(e,this.parent.editSettings.mode,this.parent.enableRtl),e.column.edit.params)):"datetimepickeredit"===e.column.editType&&(this.obj=new Pr(Object(Ae.G)(Vd(e,this.parent.editSettings.mode,this.parent.enableRtl),e.column.edit.params))),this.obj.appendTo(e.element)}}function Vd(e,t,i){const s="Dialog"!==t,n=function(e,t){let i;return i=(new Ae.n).getDatePattern("date"===t?"object"==typeof e?{type:e.type?e.type:"date",format:e.format}:{type:"dateTime",skeleton:e}:"object"==typeof e?{type:e.type?e.type:"dateTime",format:e.format}:{type:"dateTime",skeleton:e},!1),i}(e.column.format,e.column.type);let o=td(e.column.field,e.rowData);return o=o?new Date(o):null,{floatLabelType:s?"Never":"Always",value:o,format:n,placeholder:s?"":e.column.headerText,enableRtl:i,enabled:Wc(e.column,e.requestType,e.element)}}class Nd{constructor(e){this.parent=e}read(e,t){return t}write(){}destroy(){}}let qd=(()=>{class e{constructor(e,t){this.editType={Inline:zd,Normal:zd,Batch:Bd,Dialog:Pd},this.parent=e,this.serviceLocator=t,this.l10n=this.serviceLocator.getService("localization"),this.addEventListener(),this.updateEditObj(),this.createAlertDlg(),this.createConfirmDlg()}updateColTypeObj(){const t=this.parent.columnModel;for(let i=0;i<t.length;i++)if(this.parent.editSettings.template||t[i].editTemplate){const s="templateedit";t[i].edit=Object(Ae.G)(new e.editCellType[s](this.parent),t[i].edit||{})}else t[i].edit=Object(Ae.G)(new e.editCellType[t[i].editType&&e.editCellType[t[i].editType]?t[i].editType:"defaultedit"](this.parent,this.serviceLocator),t[i].edit||{});this.parent.log("primary_column_missing")}getModuleName(){return"edit"}onPropertyChanged(e){if(e.module!==this.getModuleName())return;const t=this.parent;for(const i of Object.keys(e.properties))switch(i){case"allowAdding":case"allowDeleting":case"allowEditing":(t.editSettings.allowAdding||t.editSettings.allowEditing||t.editSettings.allowDeleting)&&this.initialEnd();break;case"mode":this.updateEditObj(),t.isEdit=!1,t.refresh()}}updateEditObj(){this.editModule&&this.editModule.destroy(),this.renderer=new Dd(this.parent,this.serviceLocator),this.editModule=new this.editType[this.parent.editSettings.mode](this.parent,this.serviceLocator,this.renderer)}initialEnd(){this.updateColTypeObj()}startEdit(e){const t=this.parent;if(t.editSettings.allowEditing&&!t.isEdit&&"Batch"!==t.editSettings.mode){if(this.parent.element.classList.add("e-editing"),t.getSelectedRows().length)e||(e=t.getSelectedRows()[0]);else if(!e)return void this.showDialog("EditOperationAlert",this.alertDObj);this.isLastRow=e.rowIndex===this.parent.getContent().querySelector("tr:last-child").rowIndex,"none"!==e.style.display&&(this.editModule.startEdit(e),this.refreshToolbar(),t.element.querySelector(".e-gridpopup").style.display="none",this.parent.notify("start-edit",{}))}}checkLastRow(e,t){const i=this.isLastRow;"auto"!==this.parent.height&&"Bottom"===this.parent.editSettings.newRowPosition&&t&&"add"===t.requestType&&this.parent.getContent().firstElementChild.offsetHeight>this.parent.getContentTable().scrollHeight?Object(Ae.u)([].slice.call(e.getElementsByClassName(Ha)),"e-lastrowadded"):i&&e&&e.classList&&Object(Ae.u)([].slice.call(e.getElementsByClassName(Ha)),"e-lastrowcell")}closeEdit(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&this.parent.element.getElementsByClassName("e-updatedtd").length?this.showDialog("CancelEdit",this.dialogObj):(this.parent.element.classList.remove("e-editing"),this.editModule.closeEdit(),this.refreshToolbar(),this.parent.notify(Ra,{}))}refreshToolbar(){this.parent.notify(Hl,{})}addRecord(e,t){if(!this.parent.editSettings.allowAdding)return;const i={startEdit:!0};e||this.parent.notify("virtual-scroll-add-action-begin",i),i.startEdit&&(this.parent.element.classList.add("e-editing"),this.editModule.addRecord(e,t),this.refreshToolbar(),this.parent.notify("start-add",{}))}deleteRecord(e,t){const i=this.parent;i.editSettings.allowDeleting&&(t||i.getSelectedRecords().length||!Object(Ae.T)(i.commandDelIndex)?i.editSettings.showDeleteConfirmDialog?this.showDialog("ConfirmDelete",this.dialogObj):this.editModule.deleteRecord(e,t):this.showDialog("DeleteOperationAlert",this.alertDObj))}deleteRow(e){this.deleteRowUid=e.getAttribute("data-uid");const t=this.parent.getRowObjectFromUID(this.deleteRowUid);Object(Ae.T)(t)||this.deleteRecord(null,t.data)}endEdit(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&(Object(Ae.T)(this.formObj)||this.formObj.validate())&&(this.parent.editModule.saveCell(),this.parent.notify(aa,{}),Object(Ae.T)(this.formObj)||this.formObj.validate())?this.showDialog("BatchSaveConfirm",this.dialogObj):this.endEditing()}updateCell(e,t,i){this.editModule.updateCell(e,t,i)}updateRow(e,t){this.editModule.updateRow(e,t)}batchCancel(){this.closeEdit()}batchSave(){this.endEdit()}editCell(e,t){this.editModule.editCell(e,t)}editFormValidate(){const e=!this.formObj||this.formObj.validate(),t=!this.mFormObj||this.mFormObj.validate(),i=!this.frFormObj||this.frFormObj.validate();return e&&t&&i}getBatchChanges(){return this.editModule.getBatchChanges?this.editModule.getBatchChanges():{}}getCurrentEditCellData(){const e=this.getCurrentEditedData(this.formObj.element,{});return e[Object.keys(e)[0]]}saveCell(){this.editModule.saveCell()}endEditing(){this.parent.element.classList.remove("e-editing"),this.editModule.endEdit(),this.refreshToolbar()}showDialog(e,t){t.content="<div>"+this.l10n.getConstant(e)+"</div>",t.dataBind(),t.show()}getValueFromType(e,t){let i=t;switch(e.type){case"number":i=isNaN(parseFloat(t))?null:parseFloat(t);break;case"boolean":"booleanedit"!==e.editType&&(i=t===this.l10n.getConstant("True")||!0===t);break;case"date":case"datetime":"datepickeredit"!==e.editType&&"datetimepickeredit"!==e.editType&&t&&t.length?i=new Date(t):""===t&&(i=null)}return i}destroyToolTip(){const e=[].slice.call(this.parent.element.getElementsByClassName("e-griderror"));for(const t of e)Object(Ae.db)(t);this.parent.getContent().firstElementChild.style.position="relative"}createConfirmDlg(){this.dialogObj=this.dlgWidget([{click:this.dlgOk.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.dlgCancel.bind(this),buttonModel:{cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}],"EditConfirm")}createAlertDlg(){this.alertDObj=this.dlgWidget([{click:this.alertClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:"e-flat",isPrimary:!0}}],"EditAlert")}alertClick(){this.alertDObj.hide()}dlgWidget(e,t){const i=this.parent.createElement("div",{id:this.parent.element.id+t});this.parent.element.appendChild(i);const s={showCloseIcon:!1,isModal:!0,visible:!1,closeOnEscape:!0,target:this.parent.element,width:"320px",animationSettings:{effect:"None"}};s.buttons=e;const n=new Qi(s);return n.isStringTemplate=!0,n.appendTo(i),n}dlgCancel(){this.parent.focusModule.clearIndicator(),this.parent.focusModule.restoreFocus(),this.dialogObj.hide()}dlgOk(){switch(this.dialogObj.element.querySelector(".e-dlg-content").firstElementChild.innerText){case this.l10n.getConstant("ConfirmDelete"):this.editModule.deleteRecord();break;case this.l10n.getConstant("CancelEdit"):this.editModule.closeEdit();break;case this.l10n.getConstant("BatchSaveConfirm"):this.endEditing();break;case this.l10n.getConstant("BatchSaveLostChanges"):"Batch"===this.parent.editSettings.mode&&this.editModule.addCancelWhilePaging(),this.executeAction()}this.dlgCancel()}destroyEditComponents(){this.parent.isEdit&&(this.destroyWidgets(),this.destroyForm()),this.destroy()}addEventListener(){this.parent.isDestroyed||(this.eventDetails=[{event:vl,handler:this.onPropertyChanged},{event:ml,handler:this.initialEnd},{event:Rl,handler:this.keyPressHandler},{event:Nl,handler:this.updateColTypeObj},{event:ql,handler:this.destroyToolTip},{event:Gl,handler:this.preventBatch},{event:Yl,handler:this.destroyForm},{event:kl,handler:this.destroyEditComponents}],wd(this.parent,this.eventDetails,!0,this),this.actionBeginFunction=this.onActionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(_r,this.actionBeginFunction),this.parent.addEventListener(Ur,this.actionCompleteFunction))}removeEventListener(){this.parent.isDestroyed||(wd(this.parent,this.eventDetails,!1),this.parent.removeEventListener(Ur,this.actionCompleteFunction),this.parent.removeEventListener(_r,this.actionBeginFunction))}actionComplete(e){["add","beginEdit","save","delete","cancel"].indexOf(e.requestType)<0&&(this.parent.isEdit=!1),"batchsave"===e.requestType&&this.parent.focusModule.restoreFocus(),this.refreshToolbar()}getCurrentEditedData(e,t){const i=this.parent;if(i.editSettings.template){const s=[].slice.call(e.elements);for(let e=0;e<s.length;e++)if((s[e].hasAttribute("name")&&"e-multi-hidden"!==s[e].className||s[e].classList.contains("e-multiselect"))&&("hidden"!==s[e].type||!Ic(s[e],"e-switch-wrapper")&&!Ic(s[e],"e-checkbox-wrapper"))){const n=s[e].hasAttribute("name")?qc(s[e].getAttribute("name")):qc(s[e].getAttribute("id")),o=i.getColumnByField(n)||{field:n,type:s[e].getAttribute("type")};let r;"checkbox"===o.type||"boolean"===o.type?r=s[e].checked:s[e].value?(r=s[e].value,s[e].ej2_instances&&s[e].ej2_instances.length&&!Object(Ae.T)(s[e].ej2_instances[0].value)&&(s[e].blur(),r=s[e].ej2_instances[0].value)):s[e].ej2_instances&&(r=s[e].ej2_instances[0].value),o.edit&&"string"==typeof o.edit.read?r=Object(Ae.R)(o.edit.read,window)(s[e],r):o.edit&&o.edit.read&&(r=o.edit.read(s[e],r)),r=i.editModule.getValueFromType(o,r),"radio"===s[e].type?s[e].checked&&_e.b.setValue(o.field,r,t):_e.b.setValue(o.field,r,t)}return t}const s=i.columnModel.filter(e=>e.editTemplate);for(let o=0;o<s.length;o++)if(e[Nc(s[o].field)]){let i=[].slice.call(e[Nc(s[o].field)]);i=i.length?i:[e[Nc(s[o].field)]];let n=i.filter(e=>!Object(Ae.T)(e.ej2_instances));0===n.length&&(n=i.filter(e=>e.hasAttribute("name")));for(let e=0;e<n.length;e++){const i=this.getValue(s[o],n[e],t);_e.b.setValue(s[o].field,i,t)}}const n=[].slice.call(e.getElementsByClassName("e-field"));for(let o=0,r=n.length;o<r;o++){const e=i.getColumnByUid(n[o].getAttribute("e-mappinguid"));if(e&&e.field){const i=this.getValue(e,n[o],t);_e.b.setValue(e.field,i,t)}}return t}getValue(e,t,i){let s=t.ej2_instances?t.ej2_instances[0].value:t.value;const n=this.parent;let o=e.edit.read;return"checkbox"!==e.type&&"boolean"!==e.type||(s=t.checked),"string"==typeof o?(o=Object(Ae.R)(o,window),s=n.editModule.getValueFromType(e,o(t,s))):s=n.editModule.getValueFromType(e,e.edit.read(t,s)),Object(Ae.T)(i[e.field])&&""===s&&(s=i[e.field]),s}onActionBegin(e){if("columnstate"===e.requestType&&this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode)this.closeEdit();else{const t=this.parent.element.querySelector("."+$a),i=this.parent.element.querySelector("."+Ja);if(t&&this.parent.frozenRows&&"virtualscroll"===e.requestType&&parseInt(Ic(t,Xa).getAttribute(sh),10)<this.parent.frozenRows)return;const s=-1===["filterafteropen","filterbeforeopen","filterchoicerequest","save","infiniteScroll","virtualscroll"].indexOf(e.requestType),n=this.parent.enableVirtualization&&this.formObj&&!this.formObj.isDestroyed&&(t||i||"cancel"===e.requestType)&&s;(!this.parent.enableVirtualization&&"Batch"!==this.parent.editSettings.mode&&this.formObj&&!this.formObj.isDestroyed&&s&&!e.cancel||n)&&(this.destroyWidgets(),this.destroyForm())}}destroyWidgets(e){this.parent.editSettings.template&&(this.parent.destroyTemplate(["editSettingsTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),(e=e||this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization)).some(e=>!Object(Ae.T)(e.editTemplate))&&(this.parent.destroyTemplate(["editTemplate"]),this.parent.isReact&&this.parent.renderTemplates());for(const i of e){let e=i.edit.destroy;i.edit.destroy&&("string"==typeof e?(e=Object(Ae.R)(e,window),e()):i.edit.destroy())}const t=[].slice.call(this.formObj.element.elements);for(let i=0;i<t.length;i++)t[i].hasAttribute("name")&&t[i].ej2_instances&&t[i].ej2_instances.length&&!t[i].ej2_instances[0].isDestroyed&&t[i].ej2_instances[0].destroy()}destroyForm(){this.destroyToolTip();const e=[this.formObj,this.mFormObj,this.frFormObj,this.virtualFormObj];for(let t=0;t<e.length;t++)e[t]&&e[t].element&&!e[t].isDestroyed&&e[t].destroy();this.destroyToolTip()}destroy(){const e=this.parent.element;if(!e)return;const t=!(!e.querySelector(".e-gridheader")||!e.querySelector("."+Va));t&&this.destroyForm(),this.removeEventListener();let i=this.dialogObj.element;i.childElementCount>0&&(this.dialogObj.destroy(),Object(Ae.db)(i)),i=this.alertDObj.element,i.childElementCount>0&&(this.alertDObj.destroy(),Object(Ae.db)(i)),t&&this.editModule&&this.editModule.destroy()}keyPressHandler(e){switch(e.action){case"insert":this.addRecord();break;case"delete":"INPUT"===e.target.tagName&&!e.target.classList.contains("e-checkselect")||document.querySelector(".e-popup-open")||this.deleteRecord();break;case"f2":this.startEdit();break;case"enter":Ic(e.target,"e-unboundcelldiv")||"Batch"===this.parent.editSettings.mode||!(Ic(e.target,Va)||this.parent.frozenRows&&Ic(e.target,qa))||document.getElementsByClassName("e-popup-open").length||(e.preventDefault(),this.endEdit());break;case"escape":this.parent.isEdit&&("Batch"===this.parent.editSettings.mode?this.editModule.escapeCellEdit():this.closeEdit())}}preventBatch(e){this.preventObj=e,this.showDialog("BatchSaveLostChanges",this.dialogObj)}executeAction(){this.preventObj.handler.call(this.preventObj.instance,this.preventObj.arg1,this.preventObj.arg2,this.preventObj.arg3,this.preventObj.arg4,this.preventObj.arg5,this.preventObj.arg6,this.preventObj.arg7,this.preventObj.arg8)}applyFormValidation(e){const t=this.parent,i=t.isFrozenGrid(),s="Normal"===this.parent.editSettings.mode,n="Right"===this.parent.getFrozenMode()&&s?1:0,o="Dialog"!==this.parent.editSettings.mode?t.element.getElementsByClassName("e-gridform")[n]:Object(Ae.hb)("#"+t.element.id+"_dialogEdit_wrapper .e-gridform",document),r="Right"===this.parent.getFrozenMode()&&s?0:1,l=t.element.getElementsByClassName("e-gridform")[r];let a={};const h={},c={};e=e||t.getColumns();for(let d=0;d<e.length;d++)(e[d].visible||"Dialog"===t.editSettings.mode&&(-1!==t.groupSettings.columns.indexOf(e[d].field)||"Dialog"!==t.editSettings.mode))&&e[d].validationRules&&gd(e[d],r,a,h,c,e.length);if(i&&"Dialog"!==this.parent.editSettings.mode){if(this.parent.editModule.mFormObj=this.createFormObj(l,h),this.parent.getFrozenMode()===Za){const e=t.element.getElementsByClassName("e-gridform")[2];this.parent.editModule.frFormObj=this.createFormObj(e,c)}}else a=Object(Ae.G)(a,h,c);this.parent.editModule.formObj=this.createFormObj(o,a)}createFormObj(e,t){return new un(e,{rules:t,locale:this.parent.locale,validationComplete:e=>{this.validationComplete(e)},customPlacement:(e,t)=>{const i=e.getAttribute("e-mappinguid"),s={column:this.parent.getColumnByUid(i),error:t,inputElement:e,value:e.value};this.valErrorPlacement(e,t),this.parent.notify("validation-custom-placement",s)}})}valErrorPlacement(e,t){if(this.parent.isEdit){const i=t.getAttribute("for"),s=this.getElemTable(e).querySelector("#"+i+"_Error");s?s.querySelector(".e-tip-content").innerHTML=t.outerHTML:this.createTooltip(e,t,i,"")}}getElemTable(e){let t;const i=this.parent;let s;if("Dialog"!==i.editSettings.mode){t=i.frozenRows&&i.frozenRows>(parseInt(Object(Ae.A)(e,".e-row").getAttribute(sh),10)||0);const n=e.name;let o;n&&(o=Sd(this.parent,qc(n))),o&&i.isFrozenGrid()?"frozen-left"===o.getFreezeTableName()?s=t?i.getFrozenVirtualHeader().querySelector("table"):i.getFrozenVirtualContent().querySelector("table"):"frozen-right"===o.getFreezeTableName()?s=t?i.getFrozenRightHeader().querySelector("table"):i.getFrozenRightContent().querySelector("table"):"movable"===o.getFreezeTableName()&&(s=t?i.getMovableVirtualHeader().querySelector("table"):i.getMovableVirtualContent().querySelector("table")):s=t?i.getHeaderTable():i.getContentTable()}else s=Object(Ae.hb)("#"+i.element.id+"_dialogEdit_wrapper",document);return s}resetElemPosition(e,t){const i=Ic(t.element,Ha);if(i){const t=i.getBoundingClientRect().right,s=e.getBoundingClientRect().right;s>t&&(e.style.left=e.offsetLeft-(s-t)+"px")}}validationComplete(e){if(this.parent.isEdit){const t=this.getElemTable(e.element).querySelector("#"+e.inputName+"_Error");t&&("failure"===e.status?(t.style.display="",this.resetElemPosition(t,e)):t.style.display="none")}}createTooltip(e,t,i,s){const n=this.parent.getColumnByField(i);let o=this.parent.getFrozenMode()===Za&&"Normal"===this.parent.editSettings.mode&&n.getFreezeTableName()===eh?this.frFormObj.element:this.formObj.element;const r=Ic(e,"e-virtual-validation");r&&(o=this.virtualFormObj.element);let l=this.parent.getContent().firstElementChild;const a=this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenRightColumnsCount();a&&(l=this.parent.getMovableVirtualContent());const h=l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth,c="Dialog"!==this.parent.editSettings.mode,d=Object(Ae.A)(e,"."+Ha),p=Object(Ae.A)(e,".e-row"),u=this.parent.getContent().querySelector("."+_a);let m,g,b=!1,f=!1;const y=Math.round(this.parent.getContent().clientHeight/this.parent.getRowHeight())-1,v=[].slice.call(u?this.parent.getFrozenVirtualContent().getElementsByClassName(Xa):this.parent.getContent().getElementsByClassName(Xa));if("Batch"===this.parent.editSettings.mode&&y>1&&v.length>=y&&v[v.length-1].getAttribute(sh)===p.getAttribute(sh)&&(f=!0),c){if(this.parent.frozenRows){const e=a?this.parent.getFrozenVirtualHeader().querySelector(nh).children:this.parent.getHeaderTable().querySelector(nh).children;m=e.length>(parseInt(p.getAttribute(sh),10)||0),b=m&&parseInt(p.getAttribute(sh),10)===e.length-1}(b||y>1&&v.length>=y&&("Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType||d.classList.contains("e-lastrowcell")&&!p.classList.contains(Ja))||f)&&(g=!0)}const C=c?m?this.parent.getHeaderTable():this.parent.getContentTable():Object(Ae.hb)("#"+this.parent.element.id+"_dialogEdit_wrapper .e-dlg-content",document),w=C.getBoundingClientRect(),O=c?this.parent.element.getBoundingClientRect().left:w.left,S=Object(Ae.A)(e,"td"),T=S?S.getBoundingClientRect():e.parentElement.getBoundingClientRect(),j=this.parent.createElement("div",{className:"e-tooltip-wrap e-lib e-control e-popup e-griderror",id:i+"_Error",styles:"display:"+s+";top:"+((m?T.top+T.height:T.bottom-w.top-(a?u.scrollTop:0))+C.scrollTop+9)+"px;left:"+(T.left-O+C.scrollLeft+T.width/2)+"px;max-width:"+T.width+"px;text-align:center;"});c&&w.left<O&&(j.style.left=parseInt(j.style.left,10)-w.left+O+"px");const E=this.parent.createElement("div",{className:"e-tip-content"});let x;E.appendChild(t),g?(x=this.parent.createElement("div",{className:"e-arrow-tip e-tip-bottom"}),x.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"})),x.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom"}))):(x=this.parent.createElement("div",{className:"e-arrow-tip e-tip-top"}),x.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),x.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-top"}))),j.appendChild(E),j.appendChild(x),r||!a&&!this.parent.frozenRows||"Dialog"===this.parent.editSettings.mode?r?this.virtualFormObj.element.appendChild(j):this.formObj.element.appendChild(j):(("Normal"===this.parent.editSettings.mode?Object(Ae.A)(e,".e-editcell"):Object(Ae.A)(e,".e-table")).style.position="relative",j.style.position="absolute","Batch"===this.parent.editSettings.mode||Object(Ae.A)(e,"."+_a)||Object(Ae.A)(e,"."+Ua)||this.parent.frozenRows&&!a?o.appendChild(j):this.mFormObj.element.appendChild(j)),!g&&c&&l.getBoundingClientRect().bottom<T.bottom+T.height&&(l.scrollTop=l.scrollTop+j.offsetHeight+x.scrollHeight);const R=parseInt(document.defaultView.getComputedStyle(j,null).getPropertyValue("font-size"),10);if(j.getBoundingClientRect().width<T.width&&j.querySelector("label").getBoundingClientRect().height/(1.2*R)>=2&&(j.style.width=j.style.maxWidth),j.style.left=(a||this.parent.frozenRows)&&"Dialog"!==this.parent.editSettings.mode?S.offsetLeft+(S.offsetWidth/2-j.offsetWidth/2)+"px":parseInt(j.style.left,10)-j.offsetWidth/2+"px",c&&!h&&!this.parent.allowPaging||a||this.parent.frozenRows){l.style.position="static";const e=et(S,j);j.style.top=e.top+T.height+9+"px"}if(g){if(!h||a||"auto"===this.parent.height||this.parent.frozenRows||this.parent.enableVirtualization)j.style.bottom=T.height+9+"px";else{const e=l.scrollWidth>l.offsetWidth?Vc():0;j.style.bottom=this.parent.height-l.querySelector("table").offsetHeight-e+T.height+9+"px"}if(v.length<y&&"Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType){const e=(this.parent.frozenRows?this.parent.frozenRows+(v.length-1):v.length-1)*this.parent.getRowHeight(),t=this.parent.getContent().clientHeight-e;j.style.bottom=t+9+"px"}j.style.top=null}}checkColumnIsGrouped(e){return!(e.visible||this.parent.groupSettings.columns.indexOf(e.field)>-1)}static AddEditors(t){e.editCellType=Object(Ae.G)(e.editCellType,t)}}return e.editCellType={dropdownedit:Fd,numericedit:Ad,datepickeredit:Hd,datetimepickeredit:Hd,booleanedit:Id,defaultedit:Md,templateedit:Nd},e})();class Wd extends yh{constructor(e,t){super(e,t),this.buttonElement=this.parent.createElement("button",{}),this.unbounDiv=this.parent.createElement("div",{className:"e-unboundcelldiv",styles:"display: inline-block"}),this.childRefs=[],this.element=this.parent.createElement("TD",{className:"e-rowcell e-unboundcell",attrs:{role:"gridcell",tabindex:"-1"}}),this.parent.on(kl,this.destroyButtons,this)}destroyButtons(){for(let e=0;e<this.childRefs.length;e++)this.childRefs[e]&&!this.childRefs[e].isDestroyed&&this.childRefs[e].destroy();this.parent.off(kl,this.destroyButtons)}render(e,t,i,s){let n=this.element.cloneNode();if(n.appendChild(this.unbounDiv.cloneNode()),n.setAttribute("aria-label","is Command column column header "+e.column.headerText),e.column.commandsTemplate)if(this.parent.isReact&&"string"!=typeof e.column.commandsTemplate){const i=this.parent+"commandsTemplate";e.column.getColumnTemplate()(t,this.parent,"commandsTemplate",i,null,null,n.firstElementChild),this.parent.renderTemplates()}else zc(n.firstElementChild,e.column.getColumnTemplate()(t));else for(const o of e.commands)n=this.renderButton(n,o,i.index,o.uid);return this.setAttributes(n,e,i),!this.parent.enableVirtualization&&this.parent.isEdit||s?(Object(Ae.u)([].slice.call(n.getElementsByClassName("e-edit-delete")),"e-hide"),Object(Ae.eb)([].slice.call(n.getElementsByClassName("e-save-cancel")),"e-hide")):(Object(Ae.u)([].slice.call(n.getElementsByClassName("e-save-cancel")),"e-hide"),Object(Ae.eb)([].slice.call(n.getElementsByClassName("e-edit-delete")),"e-hide")),n}renderButton(e,t,i,s){const n=this.buttonElement.cloneNode();Object(Ae.w)(n,{id:this.parent.element.id+(t.type||"")+"_"+i+"_"+s,type:"button",title:Object(Ae.T)(t.title)?t.buttonOption.content||this.localizer.getConstant(t.type)||t.type:t.title,"data-uid":s}),n.onclick=t.buttonOption.click;const o=new Ue.a(t.buttonOption,n);switch(this.childRefs.push(o),o.commandType=t.type,e.firstElementChild.appendChild(o.element),t.type){case"Edit":case"Delete":Object(Ae.u)([n],["e-edit-delete","e-"+t.type.toLowerCase()+"button"]);break;case"Cancel":case"Save":Object(Ae.u)([n],["e-save-cancel","e-"+t.type.toLowerCase()+"button"])}return e}}const Gd=["template"],_d=["headerTemplate"],Ud=["commandsTemplate"],Kd=["filterItemTemplate"],Yd=["editTemplate"],Xd=["filterTemplate"],Qd=["footerTemplate"],$d=["groupFooterTemplate"],Jd=["groupCaptionTemplate"],Zd=["rowTemplate"],ep=["detailTemplate"],tp=["toolbarTemplate"],ip=["pagerTemplate"],sp=["editSettingsTemplate"],np=["groupSettingsCaptionTemplate"];var op=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},rp=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let lp=["allowEditing","allowFiltering","allowGrouping","allowReordering","allowResizing","allowSearching","allowSorting","autoFit","clipMode","columns","commands","customAttributes","dataSource","defaultValue","disableHtmlEncode","displayAsCheckBox","edit","editTemplate","editType","enableGroupByFormat","field","filter","filterBarTemplate","filterTemplate","foreignKeyField","foreignKeyValue","format","formatter","freeze","headerTemplate","headerText","headerTextAlign","headerValueAccessor","hideAtMedia","index","isFrozen","isIdentity","isPrimaryKey","lockColumn","maxWidth","minWidth","showColumnMenu","showInColumnChooser","sortComparer","template","textAlign","type","uid","validationRules","valueAccessor","visible","width"],ap=[],hp=(()=>{class e extends Pe{constructor(e){super(),this.viewContainerRef=e,ze("currentInstance",this,this.viewContainerRef),this.registerEvents(ap),this.directivePropList=lp}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(m.S))},e.\u0275dir=m.Lb({type:e,selectors:[["e-column"]],contentQueries:function(e,t,i){if(1&e&&(m.Jb(i,Gd,1),m.Jb(i,_d,1),m.Jb(i,Ud,1),m.Jb(i,Kd,1),m.Jb(i,Yd,1),m.Jb(i,Xd,1)),2&e){let e;m.rc(e=m.ec())&&(t.template=e.first),m.rc(e=m.ec())&&(t.headerTemplate=e.first),m.rc(e=m.ec())&&(t.commandsTemplate=e.first),m.rc(e=m.ec())&&(t.filter_itemTemplate=e.first),m.rc(e=m.ec())&&(t.editTemplate=e.first),m.rc(e=m.ec())&&(t.filterTemplate=e.first)}},inputs:{allowEditing:"allowEditing",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowReordering:"allowReordering",allowResizing:"allowResizing",allowSearching:"allowSearching",allowSorting:"allowSorting",autoFit:"autoFit",clipMode:"clipMode",columns:"columns",commands:"commands",customAttributes:"customAttributes",dataSource:"dataSource",defaultValue:"defaultValue",disableHtmlEncode:"disableHtmlEncode",displayAsCheckBox:"displayAsCheckBox",edit:"edit",editTemplate:"editTemplate",editType:"editType",enableGroupByFormat:"enableGroupByFormat",field:"field",filter:"filter",filterBarTemplate:"filterBarTemplate",filterTemplate:"filterTemplate",foreignKeyField:"foreignKeyField",foreignKeyValue:"foreignKeyValue",format:"format",formatter:"formatter",freeze:"freeze",headerTemplate:"headerTemplate",headerText:"headerText",headerTextAlign:"headerTextAlign",headerValueAccessor:"headerValueAccessor",hideAtMedia:"hideAtMedia",index:"index",isFrozen:"isFrozen",isIdentity:"isIdentity",isPrimaryKey:"isPrimaryKey",lockColumn:"lockColumn",maxWidth:"maxWidth",minWidth:"minWidth",showColumnMenu:"showColumnMenu",showInColumnChooser:"showInColumnChooser",sortComparer:"sortComparer",template:"template",textAlign:"textAlign",type:"type",uid:"uid",validationRules:"validationRules",valueAccessor:"valueAccessor",visible:"visible",width:"width"},features:[m.Bb]}),op([qe(),rp("design:type",Object)],e.prototype,"template",void 0),op([qe(),rp("design:type",Object)],e.prototype,"headerTemplate",void 0),op([qe(),rp("design:type",Object)],e.prototype,"commandsTemplate",void 0),op([qe(),rp("design:type",Object)],e.prototype,"filter_itemTemplate",void 0),op([qe(),rp("design:type",Object)],e.prototype,"editTemplate",void 0),op([qe(),rp("design:type",Object)],e.prototype,"filterTemplate",void 0),e})(),cp=(()=>{class e extends He{constructor(){super("columns")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=m.Lb({type:e,selectors:[["e-columns"]],contentQueries:function(e,t,i){if(1&e&&m.Jb(i,hp,0),2&e){let e;m.rc(e=m.ec())&&(t.children=e)}},features:[m.Bb]}),e})();var dp=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},pp=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let up=["columnName","customAggregate","field","footerTemplate","format","groupCaptionTemplate","groupFooterTemplate","type"],mp=[],gp=(()=>{class e extends Pe{constructor(e){super(),this.viewContainerRef=e,ze("currentInstance",this,this.viewContainerRef),this.registerEvents(mp),this.directivePropList=up}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(m.S))},e.\u0275dir=m.Lb({type:e,selectors:[["e-column"]],contentQueries:function(e,t,i){if(1&e&&(m.Jb(i,Qd,1),m.Jb(i,$d,1),m.Jb(i,Jd,1)),2&e){let e;m.rc(e=m.ec())&&(t.footerTemplate=e.first),m.rc(e=m.ec())&&(t.groupFooterTemplate=e.first),m.rc(e=m.ec())&&(t.groupCaptionTemplate=e.first)}},inputs:{columnName:"columnName",customAggregate:"customAggregate",field:"field",footerTemplate:"footerTemplate",format:"format",groupCaptionTemplate:"groupCaptionTemplate",groupFooterTemplate:"groupFooterTemplate",type:"type"},features:[m.Bb]}),dp([qe(),pp("design:type",Object)],e.prototype,"footerTemplate",void 0),dp([qe(),pp("design:type",Object)],e.prototype,"groupFooterTemplate",void 0),dp([qe(),pp("design:type",Object)],e.prototype,"groupCaptionTemplate",void 0),e})(),bp=(()=>{class e extends He{constructor(){super("columns")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=m.Lb({type:e,selectors:[["e-columns"]],contentQueries:function(e,t,i){if(1&e&&m.Jb(i,gp,0),2&e){let e;m.rc(e=m.ec())&&(t.children=e)}},features:[m.Bb]}),e})(),fp=["columns"],yp=[],vp=(()=>{class e extends Pe{constructor(e){super(),this.viewContainerRef=e,this.tags=["columns"],ze("currentInstance",this,this.viewContainerRef),this.registerEvents(yp),this.directivePropList=fp}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(m.S))},e.\u0275dir=m.Lb({type:e,selectors:[["e-aggregate"]],contentQueries:function(e,t,i){if(1&e&&m.Jb(i,bp,1),2&e){let e;m.rc(e=m.ec())&&(t.childColumns=e.first)}},inputs:{columns:"columns"},features:[m.Bb]}),e})(),Cp=(()=>{class e extends He{constructor(){super("aggregates")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=m.Lb({type:e,selectors:[["e-aggregates"]],contentQueries:function(e,t,i){if(1&e&&m.Jb(i,vp,0),2&e){let e;m.rc(e=m.ec())&&(t.children=e)}},features:[m.Bb]}),e})();var wp=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Op=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const Sp=["actionBegin","actionComplete","actionFailure","batchAdd","batchCancel","batchDelete","beforeAutoFill","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beforeCopy","beforeDataBound","beforeExcelExport","beforeOpenAdaptiveDialog","beforeOpenColumnChooser","beforePaste","beforePdfExport","beforePrint","beginEdit","cellDeselected","cellDeselecting","cellEdit","cellSave","cellSaved","cellSelected","cellSelecting","checkBoxChange","columnDataStateChange","columnDeselected","columnDeselecting","columnDrag","columnDragStart","columnDrop","columnMenuClick","columnMenuOpen","columnSelected","columnSelecting","commandClick","contextMenuClick","contextMenuOpen","created","dataBound","dataSourceChanged","dataStateChange","destroyed","detailDataBound","excelAggregateQueryCellInfo","excelExportComplete","excelHeaderQueryCellInfo","excelQueryCellInfo","exportDetailDataBound","exportGroupCaption","headerCellInfo","keyPressed","lazyLoadGroupCollapse","lazyLoadGroupExpand","load","pdfAggregateQueryCellInfo","pdfExportComplete","pdfHeaderQueryCellInfo","pdfQueryCellInfo","printComplete","queryCellInfo","recordClick","recordDoubleClick","resizeStart","resizeStop","resizing","rowDataBound","rowDeselected","rowDeselecting","rowDrag","rowDragStart","rowDragStartHelper","rowDrop","rowSelected","rowSelecting","toolbarClick","dataSourceChange"],Tp=["dataSource"];let jp=(()=>{let e=class extends Cc{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.tags=["columns","aggregates"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let e=this.injector.get("GridsFilter");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(n){}try{let e=this.injector.get("GridsPage");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(o){}try{let e=this.injector.get("GridsSelection");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(r){}try{let e=this.injector.get("GridsSort");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(l){}try{let e=this.injector.get("GridsGroup");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(a){}try{let e=this.injector.get("GridsReorder");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(h){}try{let e=this.injector.get("GridsRowDD");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(c){}try{let e=this.injector.get("GridsDetailRow");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(d){}try{let e=this.injector.get("GridsToolbar");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(p){}try{let e=this.injector.get("GridsAggregate");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(u){}try{let e=this.injector.get("GridsSearch");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(m){}try{let e=this.injector.get("GridsVirtualScroll");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(g){}try{let e=this.injector.get("GridsEdit");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(b){}try{let e=this.injector.get("GridsResize");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(f){}try{let e=this.injector.get("GridsExcelExport");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(y){}try{let e=this.injector.get("GridsPdfExport");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(v){}try{let e=this.injector.get("GridsCommandColumn");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(C){}try{let e=this.injector.get("GridsContextMenu");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(w){}try{let e=this.injector.get("GridsFreeze");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(O){}try{let e=this.injector.get("GridsColumnMenu");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(S){}try{let e=this.injector.get("GridsColumnChooser");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(T){}try{let e=this.injector.get("GridsForeignKey");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(j){}try{let e=this.injector.get("GridsInfiniteScroll");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(E){}try{let e=this.injector.get("GridsLazyLoadGroup");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(x){}this.registerEvents(Sp),this.addTwoWay.call(this,Tp),ze("currentInstance",this,this.viewContainerRef),this.context=new Ve}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childColumns,this.childAggregates&&(this.tagObjects[1].instance=this.childAggregates),this.context.ngAfterContentChecked(this)}};return e.\u0275fac=function(t){return new(t||e)(m.Qb(m.l),m.Qb(m.G),m.Qb(m.S),m.Qb(m.t))},e.\u0275cmp=m.Kb({type:e,selectors:[["ejs-grid"]],contentQueries:function(e,t,i){if(1&e&&(m.Jb(i,Zd,1),m.Jb(i,ep,1),m.Jb(i,tp,1),m.Jb(i,ip,1),m.Jb(i,sp,1),m.Jb(i,np,1),m.Jb(i,cp,1),m.Jb(i,Cp,1)),2&e){let e;m.rc(e=m.ec())&&(t.rowTemplate=e.first),m.rc(e=m.ec())&&(t.detailTemplate=e.first),m.rc(e=m.ec())&&(t.toolbarTemplate=e.first),m.rc(e=m.ec())&&(t.pagerTemplate=e.first),m.rc(e=m.ec())&&(t.editSettings_template=e.first),m.rc(e=m.ec())&&(t.groupSettings_captionTemplate=e.first),m.rc(e=m.ec())&&(t.childColumns=e.first),m.rc(e=m.ec())&&(t.childAggregates=e.first)}},inputs:{aggregates:"aggregates",allowExcelExport:"allowExcelExport",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowKeyboard:"allowKeyboard",allowMultiSorting:"allowMultiSorting",allowPaging:"allowPaging",allowPdfExport:"allowPdfExport",allowReordering:"allowReordering",allowResizing:"allowResizing",allowRowDragAndDrop:"allowRowDragAndDrop",allowSelection:"allowSelection",allowSorting:"allowSorting",allowTextWrap:"allowTextWrap",childGrid:"childGrid",clipMode:"clipMode",columnChooserSettings:"columnChooserSettings",columnMenuItems:"columnMenuItems",columnQueryMode:"columnQueryMode",columns:"columns",contextMenuItems:"contextMenuItems",currencyCode:"currencyCode",currentAction:"currentAction",dataSource:"dataSource",detailTemplate:"detailTemplate",editSettings:"editSettings",ej2StatePersistenceVersion:"ej2StatePersistenceVersion",enableAdaptiveUI:"enableAdaptiveUI",enableAltRow:"enableAltRow",enableAutoFill:"enableAutoFill",enableColumnVirtualization:"enableColumnVirtualization",enableHeaderFocus:"enableHeaderFocus",enableHover:"enableHover",enableImmutableMode:"enableImmutableMode",enableInfiniteScrolling:"enableInfiniteScrolling",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enableStickyHeader:"enableStickyHeader",enableVirtualization:"enableVirtualization",filterSettings:"filterSettings",frozenColumns:"frozenColumns",frozenRows:"frozenRows",gridLines:"gridLines",groupSettings:"groupSettings",height:"height",hierarchyPrintMode:"hierarchyPrintMode",infiniteScrollSettings:"infiniteScrollSettings",locale:"locale",pageSettings:"pageSettings",pagerTemplate:"pagerTemplate",parentDetails:"parentDetails",printMode:"printMode",query:"query",queryString:"queryString",resizeSettings:"resizeSettings",rowDropSettings:"rowDropSettings",rowHeight:"rowHeight",rowRenderingMode:"rowRenderingMode",rowTemplate:"rowTemplate",searchSettings:"searchSettings",selectedRowIndex:"selectedRowIndex",selectionSettings:"selectionSettings",showColumnChooser:"showColumnChooser",showColumnMenu:"showColumnMenu",sortSettings:"sortSettings",textWrapSettings:"textWrapSettings",toolbar:"toolbar",toolbarTemplate:"toolbarTemplate",width:"width"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",batchAdd:"batchAdd",batchCancel:"batchCancel",batchDelete:"batchDelete",beforeAutoFill:"beforeAutoFill",beforeBatchAdd:"beforeBatchAdd",beforeBatchDelete:"beforeBatchDelete",beforeBatchSave:"beforeBatchSave",beforeCopy:"beforeCopy",beforeDataBound:"beforeDataBound",beforeExcelExport:"beforeExcelExport",beforeOpenAdaptiveDialog:"beforeOpenAdaptiveDialog",beforeOpenColumnChooser:"beforeOpenColumnChooser",beforePaste:"beforePaste",beforePdfExport:"beforePdfExport",beforePrint:"beforePrint",beginEdit:"beginEdit",cellDeselected:"cellDeselected",cellDeselecting:"cellDeselecting",cellEdit:"cellEdit",cellSave:"cellSave",cellSaved:"cellSaved",cellSelected:"cellSelected",cellSelecting:"cellSelecting",checkBoxChange:"checkBoxChange",columnDataStateChange:"columnDataStateChange",columnDeselected:"columnDeselected",columnDeselecting:"columnDeselecting",columnDrag:"columnDrag",columnDragStart:"columnDragStart",columnDrop:"columnDrop",columnMenuClick:"columnMenuClick",columnMenuOpen:"columnMenuOpen",columnSelected:"columnSelected",columnSelecting:"columnSelecting",commandClick:"commandClick",contextMenuClick:"contextMenuClick",contextMenuOpen:"contextMenuOpen",created:"created",dataBound:"dataBound",dataSourceChanged:"dataSourceChanged",dataStateChange:"dataStateChange",destroyed:"destroyed",detailDataBound:"detailDataBound",excelAggregateQueryCellInfo:"excelAggregateQueryCellInfo",excelExportComplete:"excelExportComplete",excelHeaderQueryCellInfo:"excelHeaderQueryCellInfo",excelQueryCellInfo:"excelQueryCellInfo",exportDetailDataBound:"exportDetailDataBound",exportGroupCaption:"exportGroupCaption",headerCellInfo:"headerCellInfo",keyPressed:"keyPressed",lazyLoadGroupCollapse:"lazyLoadGroupCollapse",lazyLoadGroupExpand:"lazyLoadGroupExpand",load:"load",pdfAggregateQueryCellInfo:"pdfAggregateQueryCellInfo",pdfExportComplete:"pdfExportComplete",pdfHeaderQueryCellInfo:"pdfHeaderQueryCellInfo",pdfQueryCellInfo:"pdfQueryCellInfo",printComplete:"printComplete",queryCellInfo:"queryCellInfo",recordClick:"recordClick",recordDoubleClick:"recordDoubleClick",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",rowDataBound:"rowDataBound",rowDeselected:"rowDeselected",rowDeselecting:"rowDeselecting",rowDrag:"rowDrag",rowDragStart:"rowDragStart",rowDragStartHelper:"rowDragStartHelper",rowDrop:"rowDrop",rowSelected:"rowSelected",rowSelecting:"rowSelecting",toolbarClick:"toolbarClick",dataSourceChange:"dataSourceChange"},features:[m.Bb],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),wp([qe(),Op("design:type",Object)],e.prototype,"rowTemplate",void 0),wp([qe(),Op("design:type",Object)],e.prototype,"detailTemplate",void 0),wp([qe(),Op("design:type",Object)],e.prototype,"toolbarTemplate",void 0),wp([qe(),Op("design:type",Object)],e.prototype,"pagerTemplate",void 0),wp([qe(),Op("design:type",Object)],e.prototype,"editSettings_template",void 0),wp([qe(),Op("design:type",Object)],e.prototype,"groupSettings_captionTemplate",void 0),e=wp([(t=[Ve],function(e){!function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(i){e.prototype.hasOwnProperty(i)&&!t.isFormBase||(e.prototype[i]=t.prototype[i])})})}(e,t)}),Op("design:paramtypes",[m.l,m.G,m.S,m.t])],e),e;var t})(),Ep=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Ob({type:e}),e.\u0275inj=m.Nb({imports:[[s.c]]}),e})();const xp={provide:"GridsToolbar",useValue:class{constructor(e,t){this.predefinedItems={},this.items=["Add","Edit","Update","Delete","Cancel","Print","Search","ColumnChooser","PdfExport","ExcelExport","CsvExport","WordExport"],this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}render(){this.l10n=this.serviceLocator.getService("localization");const e=["Add","Edit","Update","Delete","Cancel","Print","PdfExport","ExcelExport","WordExport","CsvExport"],t=this.parent.enableAdaptiveUI,i=["Edit","Delete","Update","Cancel"];for(const s of e){const e=s.toLowerCase(),n=e[0].toUpperCase()+e.slice(1);this.predefinedItems[s]={id:this.gridID+"_"+e,prefixIcon:"e-"+e,text:this.l10n.getConstant(n),tooltipText:this.l10n.getConstant(n)},t&&(this.predefinedItems[s].text="",this.predefinedItems[s].visible=-1===i.indexOf(s))}this.predefinedItems.Search={id:this.gridID+"_search",tooltipText:this.l10n.getConstant("Search"),align:"Right",cssClass:"e-search-wrapper",type:"Input"},this.predefinedItems.ColumnChooser={id:this.gridID+"_columnchooser",cssClass:"e-cc e-ccdiv e-cc-toolbar",suffixIcon:"e-columnchooser-btn",text:t?"":this.l10n.getConstant("Columnchooser"),tooltipText:this.l10n.getConstant("Columnchooser"),align:"Right"},"Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&(this.predefinedItems.responsiveFilter={id:this.gridID+"_responsivefilter",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resfilter-icon",tooltipText:this.l10n.getConstant("FilterButton")}),this.parent.allowSorting&&(this.predefinedItems.responsiveSort={id:this.gridID+"_responsivesort",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-ressort-icon",tooltipText:this.l10n.getConstant("Sort")})),this.parent.enableAdaptiveUI&&this.parent.toolbar.indexOf("Search")>-1&&(this.predefinedItems.responsiveBack={id:this.gridID+"_responsiveback",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resback-icon",visible:!1}),this.createToolbar()}getToolbar(){return this.toolbar.element}destroy(){this.toolbar&&!this.toolbar.isDestroyed&&(this.toolbar.element?(this.toolbar.off("render-react-toolbar-template",this.addReactToolbarPortals),this.toolbar.destroy()):(this.parent.destroyTemplate(["toolbarTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),this.unWireEvent(),this.removeEventListener(),this.element.parentNode&&Object(Ae.db)(this.element))}bindSearchEvents(){this.searchElement=Object(Ae.hb)("#"+this.gridID+"_searchbar",this.element),this.wireEvent(),this.refreshToolbarItems(),this.parent.searchSettings&&this.updateSearchBox()}toolbarCreated(e){this.element.querySelector(".e-search-wrapper")&&(this.element.querySelector(".e-search-wrapper").innerHTML=!this.parent.enableAdaptiveUI||e?'<div class="e-input-group e-search" role="search">                    <input id="'+this.gridID+'_searchbar" class="e-input" name="input" type="search"                     placeholder= "'+this.l10n.getConstant("Search")+'"/>                    <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" title="'+this.l10n.getConstant("Search")+'" aria-label= "search"></span>                     </div>':'<span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" title="'+this.l10n.getConstant("Search")+'" aria-label= "search"></span>                     </div>'),this.bindSearchEvents()}createToolbar(){const e=this.getItems();this.toolbar=new vo({items:e,clicked:this.toolbarClickHandler.bind(this),enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,created:this.toolbarCreated.bind(this)}),this.toolbar.isReact=this.parent.isReact,this.toolbar.on("render-react-toolbar-template",this.addReactToolbarPortals,this),this.toolbar.isStringTemplate=!0;const t="viewContainerRef";if(this.parent[t]&&(this.toolbar.registeredTemplate={},this.toolbar[t]=this.parent[t]),this.element=this.parent.createElement("div",{id:this.gridID+"_toolbarItems"}),this.parent.enableAdaptiveUI&&this.element.classList.add("e-res-toolbar"),this.parent.toolbarTemplate)if("string"==typeof this.parent.toolbarTemplate)this.toolbar.appendTo(this.parent.toolbarTemplate),this.element=this.toolbar.element;else{const e=this.parent.element.id+"toolbarTemplate";this.parent.isReact&&"string"!=typeof this.parent.toolbarTemplate?(Ec(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate",e,null,null,this.element),this.parent.renderTemplates()):zc(this.element,Ec(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate"))}else this.toolbar.appendTo(this.element);this.parent.element.insertBefore(this.element,this.parent.getHeaderContent())}addReactToolbarPortals(e){this.parent.isReact&&e&&(this.parent.portals=this.parent.portals.concat(e),this.parent.renderTemplates())}renderResponsiveSearch(e){e?(this.toolbarCreated(!0),this.refreshResponsiveToolbarItems(Ma.isSearch),this.searchElement=Object(Ae.hb)("#"+this.gridID+"_searchbar",this.element),Ic(this.searchElement,"e-toolbar-right").classList.add("e-responsive-right"),this.parent.searchSettings&&this.updateSearchBox(),this.searchBoxObj.searchFocus({target:this.searchElement}),this.searchElement.focus()):this.refreshResponsiveToolbarItems(Ma.isInitial)}refreshResponsiveToolbarItems(e){if(e===Ma.isInitial){const e=this.parent.element.id,t=[e+"_edit",e+"_delete"],i=this.parent.getSelectedRowIndexes(),s=[e+"_responsiveback",e+"_update",e+"_cancel"];for(const n of this.toolbar.items){const e=this.toolbar.element.querySelector("#"+n.id);e&&(t.indexOf(n.id)>-1?i.length?e.parentElement.classList.remove("e-hidden"):e.parentElement.classList.add("e-hidden"):-1===s.indexOf(n.id)?e.parentElement.classList.remove("e-hidden"):e.parentElement.classList.add("e-hidden"))}this.searchElement&&(Ic(this.searchElement,"e-toolbar-right").classList.remove("e-responsive-right"),this.toolbarCreated(!1),this.unWireEvent(),this.searchElement=void 0)}if(e===Ma.isSearch){const e=[this.parent.element.id+"_responsiveback",this.parent.element.id+"_search"];for(const t of this.toolbar.items){const i=this.toolbar.element.querySelector("#"+t.id);i&&(e.indexOf(t.id)>-1?i.parentElement.classList.remove("e-hidden"):i.parentElement.classList.add("e-hidden"))}}}refreshToolbarItems(e){const t=this.parent;let i=[],s=[];const n=t.editSettings,o=t.currentViewData&&t.currentViewData.length;n.allowAdding?i.push(this.gridID+"_add"):s.push(this.gridID+"_add"),n.allowEditing&&o?i.push(this.gridID+"_edit"):s.push(this.gridID+"_edit"),n.allowDeleting&&o?i.push(this.gridID+"_delete"):s.push(this.gridID+"_delete"),"Batch"===t.editSettings.mode?t.element.getElementsByClassName("e-updatedtd").length&&(n.allowAdding||n.allowEditing)?(i.push(this.gridID+"_update"),i.push(this.gridID+"_cancel")):(s.push(this.gridID+"_update"),s.push(this.gridID+"_cancel")):t.isEdit&&(n.allowAdding||n.allowEditing)?(i=[this.gridID+"_update",this.gridID+"_cancel"],s=[this.gridID+"_add",this.gridID+"_edit",this.gridID+"_delete"]):(s.push(this.gridID+"_update"),s.push(this.gridID+"_cancel")),this.enableItems(i,!0),this.enableItems(s,!1)}getItems(){const e=[],t=this.parent.toolbar||[];if("string"==typeof this.parent.toolbar)return[];"Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&e.push(this.getItemObject("responsiveFilter")),this.parent.allowSorting&&e.push(this.getItemObject("responsiveSort")));for(const i of t)switch(typeof i){case"number":e.push(this.getItemObject(this.items[i]));break;case"string":e.push(this.getItemObject(i));break;default:e.push(this.getItem(i))}return this.parent.enableAdaptiveUI&&this.parent.toolbar.indexOf("Search")>-1&&e.push(this.getItemObject("responsiveBack")),e}getItem(e){const t=this.predefinedItems[e.text];return t?Object(Ae.G)(t,t,e):e}getItemObject(e){return this.predefinedItems[e]||{text:e,id:this.gridID+"_"+e}}enableItems(e,t){for(const i of e){const e=Object(Ae.hb)("#"+i,this.element);e&&this.toolbar.enableItems(e.parentElement,t)}}toolbarClickHandler(e){const t=this.parent,i=this.gridID;Object(Ae.G)(e,{cancel:!1});const s=e.originalEvent;t.trigger("toolbarClick",e,e=>{if(e.originalEvent=e.originalEvent?e.originalEvent:s,!e.cancel)switch(!Object(Ae.T)(e.item)&&e.item.id){case i+"_print":t.print();break;case i+"_edit":t.startEdit();break;case i+"_update":t.endEdit();break;case i+"_cancel":t.closeEdit();break;case i+"_add":t.addRecord();break;case i+"_delete":t.deleteRecord();break;case i+"_search":e.originalEvent.target.id===i+"_searchbutton"&&this.searchElement?this.search():!t.enableAdaptiveUI||this.searchElement||!e.originalEvent.target.classList.contains("e-search-wrapper")&&e.originalEvent.target.id!==i+"_searchbutton"||this.renderResponsiveSearch(!0);break;case i+"_columnchooser":const s=this.parent.element.querySelector(".e-ccdiv");let n=s.getBoundingClientRect().top;const o=s.getBoundingClientRect().left,r=e.originalEvent.target;n=s.getBoundingClientRect().top+s.offsetTop,t.createColumnchooser(o,n,r);break;case i+"_responsivefilter":t.showResponsiveCustomFilter();break;case i+"_responsivesort":t.showResponsiveCustomSort();break;case i+"_responsiveback":this.renderResponsiveSearch(!1)}})}modelChanged(e){"edit"===e.module&&this.refreshToolbarItems()}onPropertyChanged(e){e.module===this.getModuleName()&&this.parent.toolbar&&(this.element&&Object(Ae.db)(this.element),this.render())}keyUpHandler(e){13===e.keyCode&&this.search()}search(){this.parent.search(this.searchElement.value)}updateSearchBox(){this.searchElement&&(this.searchElement.value=this.parent.searchSettings.key)}wireEvent(){this.searchElement&&(this.searchBoxObj=new _h(this.searchElement),Ae.l.add(this.searchElement,"keyup",this.keyUpHandler,this),this.searchBoxObj.wireEvent())}unWireEvent(){this.searchElement&&(Ae.l.remove(this.searchElement,"keyup",this.keyUpHandler),this.searchBoxObj.unWireEvent())}reRenderToolbar(){this.element&&Object(Ae.db)(this.element),this.render()}addEventListener(){this.parent.isDestroyed||(this.evtHandlers=[{event:ja,handler:this.reRenderToolbar},{event:ml,handler:this.render},{event:fl,handler:this.onPropertyChanged},{event:vl,handler:this.updateSearchBox.bind(this)},{event:Cl,handler:this.refreshToolbarItems},{event:Hl,handler:this.refreshToolbarItems},{event:vl,handler:this.modelChanged},{event:Yr,handler:this.refreshToolbarItems},{event:Dl,handler:this.removeResponsiveSearch},{event:Ea,handler:this.reRenderToolbar},{event:kl,handler:this.destroy}],wd(this.parent,this.evtHandlers,!0,this),this.rowSelectedFunction=this.rowSelected.bind(this),this.rowDeSelectedFunction=this.rowSelected.bind(this),this.parent.addEventListener(Qr,this.rowSelectedFunction),this.parent.addEventListener(Jr,this.rowDeSelectedFunction))}removeEventListener(){this.parent.isDestroyed||(wd(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(Qr,this.rowSelectedFunction),this.parent.removeEventListener(Jr,this.rowDeSelectedFunction))}removeResponsiveSearch(e){const t=e.target,i=t.classList.contains("e-search-icon")||t.classList.contains("e-search-wrapper");this.parent.enableAdaptiveUI&&!i&&this.searchElement&&!Ic(e.target,"e-res-toolbar")&&this.renderResponsiveSearch(!1)}rowSelected(){this.parent.enableAdaptiveUI&&this.refreshResponsiveToolbarItems(Ma.isInitial)}getModuleName(){return"toolbar"}}},Rp={provide:"GridsEdit",useValue:qd},Dp={provide:"GridsCommandColumn",useValue:class{constructor(e,t){this.parent=e,this.locator=t,this.initiateRender(),this.addEventListener()}initiateRender(){this.locator.getService("cellRendererFactory").addCellRenderer(Ia.CommandColumn,new Wd(this.parent,this.locator))}commandClickHandler(e){const t=this.parent,i=Object(Ae.A)(e.target,"button");if(!i||!Object(Ae.A)(e.target,".e-unboundcell"))return;const s=i.ej2_instances[0],n=s.commandType,o=i.getAttribute("data-uid");let r;const l=t.getRowObjectFromUID(Object(Ae.A)(i,".e-row").getAttribute("data-uid")),a=this.parent.columnModel;for(let c=0;c<a.length;c++)if(a[c].commands){const e=a[c].commands;for(let t=0;t<e.length;t++){const s="type";if(e[t].uid===o&&e[t][s]===n)r=e[t];else{const t=[].slice.call(Object(Ae.A)(i,".e-unboundcell").querySelectorAll("button")).findIndex(e=>e===i);t>=0&&(r=e[t])}}}const h={cancel:!1,target:i,commandColumn:r,rowData:Object(Ae.T)(l)?void 0:l.data};this.parent.trigger("commandClick",h,e=>{if(!s.disabled&&t.editModule&&!e.cancel)switch(n){case"Edit":t.editModule.endEdit(),t.editModule.startEdit(Object(Ae.A)(i,"tr"));break;case"Cancel":t.editModule.closeEdit();break;case"Save":t.editModule.endEdit();break;case"Delete":"Batch"!==t.editSettings.mode&&t.editModule.endEdit(),t.commandDelIndex=parseInt(Object(Ae.A)(i,"tr").getAttribute(sh),10),t.clearSelection(),t.selectRow(t.commandDelIndex,!1),t.editModule.deleteRecord(),t.commandDelIndex=void 0}})}getModuleName(){return"commandColumn"}destroy(){this.parent.isDestroyed||this.removeEventListener()}removeEventListener(){this.parent.isDestroyed||(this.parent.off(Dl,this.commandClickHandler),this.parent.off(Rl,this.keyPressHandler),this.parent.off(ml,this.load),this.parent.off(kl,this.destroy))}addEventListener(){this.parent.isDestroyed||(this.parent.on(Dl,this.commandClickHandler,this),this.parent.on(Rl,this.keyPressHandler,this),this.parent.on(ml,this.load,this),this.parent.on(kl,this.destroy,this))}keyPressHandler(e){"enter"===e.action&&Object(Ae.A)(e.target,".e-unboundcelldiv")&&(this.commandClickHandler(e),e.preventDefault())}load(){const e=this.parent.columnModel;for(let t=0;t<e.length;t++)if(e[t].commands){const i=e[t].commands;for(let e=0;e<i.length;e++)i[e].uid=Lc("gridcommand")}}}},kp=["grid"];let Ip=(()=>{class e{constructor(e,t,i,s){this._store=e,this._dataRiesgo=t,this._storeCR=i,this._dialogRef=s}ngOnInit(){this.selectOptions={persistSelection:!0},this.toolbar=[{text:"Agregar seleccionados",tooltipText:"Agregar seleccionados",prefixIcon:"add",id:"addSelected"},{text:"Cancelar",tooltipText:"Cerrar ventana",prefixIcon:"close",id:"close"}],this.pageSettings={pageSize:10},this._store.dispatch(d.q()),this.controlSubs=this._store.select("control").subscribe(e=>{this.inventarioData=e.inventario})}ngOnDestroy(){this.controlSubs&&this.controlSubs.unsubscribe(),this.controlRiesgoSubs&&this.controlRiesgoSubs.unsubscribe()}clickHandler(e){if("addSelected"===e.item.id){let e=this.grid.getSelectedRecords();e.length>0&&(e.forEach(e=>{this.controlSeleccionado=e,this.controlRiesgo={eventoId:this._dataRiesgo.riesgoId,inventarioId:this.controlSeleccionado.controlId,reduccion:0,reducirA:"",peso:0,suficienciaId:1},this._storeCR.dispatch(d.c({control:this.controlRiesgo}))}),this.controlRiesgoSubs=this._storeCR.select("controlRiesgo").subscribe(e=>{this.procesado=e.procesado,this.procesado&&this._dialogRef.close(!0)}))}"close"===e.item.id&&this._dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(g.h),m.Qb(a.a),m.Qb(g.h),m.Qb(a.h))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-check-list-controles"]],viewQuery:function(e,t){if(1&e&&m.Ic(kp,1),2&e){let e;m.rc(e=m.ec())&&(t.grid=e.first)}},decls:10,vars:4,consts:[["allowPaging","true",3,"dataSource","pageSettings","selectionSettings","toolbar","toolbarClick"],["grid",""],["type","checkbox","width","50"],["field","controlId","isPrimaryKey","true","headerText","ID","width","60"],["field","nombre","headerText","Control","width","120"],["field","nombreAplicacion","headerText","Aplicaci\xf3n","width","90"],["field","nombrePeriodicidad","headerText","Periodicidad","format","C2","width","90"],["field","nombreResponsabilidad","headerText","Responsabilidad","width","90"],["field","nombreDocumentacion","headerText","Documentaci\xf3n","width","90"]],template:function(e,t){1&e&&(m.Wb(0,"ejs-grid",0,1),m.dc("toolbarClick",function(e){return t.clickHandler(e)}),m.Wb(2,"e-columns"),m.Rb(3,"e-column",2),m.Rb(4,"e-column",3),m.Rb(5,"e-column",4),m.Rb(6,"e-column",5),m.Rb(7,"e-column",6),m.Rb(8,"e-column",7),m.Rb(9,"e-column",8),m.Vb(),m.Vb()),2&e&&m.mc("dataSource",t.inventarioData)("pageSettings",t.pageSettings)("selectionSettings",t.selectOptions)("toolbar",t.toolbar)},directives:[jp,cp,bp,hp,gp],styles:[""]}),e})();var Fp=i("IbWt"),Ap=i("p+B5"),Mp=i("xHqg"),Lp=i("Wp6s");function zp(e,t){1&e&&m.Ec(0,"Seleccione el riesgo")}function Bp(e,t){if(1&e&&(m.Wb(0,"mat-option",34),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.procesoId),m.Eb(1),m.Gc(" ",e.nombre," ")}}function Pp(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Seleccione un proceso"),m.Vb())}function Hp(e,t){if(1&e&&(m.Wb(0,"mat-option",34),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.procesoId),m.Eb(1),m.Gc(" ",e.nombre," ")}}function Vp(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Seleccione una actividad"),m.Vb())}function Np(e,t){if(1&e&&(m.Wb(0,"mat-option",34),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.riesgoId),m.Eb(1),m.Gc(" ",e.nombre," ")}}function qp(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Seleccione un riesgo"),m.Vb())}function Wp(e,t){1&e&&m.Ec(0,"Agrege uno o m\xe1s controles")}function Gp(e,t){1&e&&m.Ec(0,"Afectaci\xf3n")}function _p(e,t){if(1&e&&(m.Wb(0,"mat-option",34),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.codigo),m.Eb(1),m.Gc(" ",e.valor," ")}}function Up(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Seleccione una opci\xf3n"),m.Vb())}function Kp(e,t){if(1&e&&(m.Wb(0,"mat-option",34),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.codigo),m.Eb(1),m.Gc(" ",e.valor," ")}}function Yp(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Seleccione una opci\xf3n"),m.Vb())}let Xp=(()=>{class e{constructor(e,t,i,s,n,o,r,l,a){this._formBuilder=e,this._procesosService=t,this._catalogoService=i,this._store=s,this._storeRiesgo=n,this._riesgoService=o,this._dialog=r,this._dialogRef=l,this._dataToUpdate=a}ngOnInit(){this.editSettings={allowEditing:!0,allowAdding:!1,allowDeleting:!0,mode:"Normal"},this.commands=[{type:"Edit",buttonOption:{cssClass:"e-flat",iconCss:"e-edit e-icons"}},{type:"Delete",buttonOption:{cssClass:"e-flat",iconCss:"e-delete e-icons"}},{type:"Save",buttonOption:{cssClass:"e-flat",iconCss:"e-update e-icons"}},{type:"Cancel",buttonOption:{cssClass:"e-flat",iconCss:"e-cancel-icon e-icons"}}],this.cargaCatalogos(),this._dataToUpdate?(this._procesosService.getProceosHijos(this._dataToUpdate.control.subprocesoId).subscribe(e=>this.dataActividades=e),this._riesgoService.getRiesgosActividad(this._dataToUpdate.control.actividadId).subscribe(e=>this.dataRiesgo=e),this.cargaRiesgoSeleccionado(this._dataToUpdate.control.riesgoId),this.afectacionSeleccionada=this._dataToUpdate.control.reducirA,this.suficienciaSeleccionada=this._dataToUpdate.control.suficienciaId,this.riesgoFormGroup=this._formBuilder.group({proceso:[this._dataToUpdate.control.subprocesoId,p.p.required],actividad:[this._dataToUpdate.control.actividadId,p.p.required],riesgo:[this._dataToUpdate.control.riesgoId,p.p.required]}),this.afectacionFormGroup=this._formBuilder.group({afectacion:[this.afectacionSeleccionada,p.p.required],suficiencia:[this.suficienciaSeleccionada.toString(),p.p.required]})):(this.riesgoFormGroup=this._formBuilder.group({proceso:["",p.p.required],actividad:["",p.p.required],riesgo:["",p.p.required]}),this.afectacionFormGroup=this._formBuilder.group({afectacion:["",p.p.required],suficiencia:["",p.p.required]}))}ngOnDestroy(){this.controlSubs&&this.controlSubs.unsubscribe(),this.riesgoSubs&&this.riesgoSubs.unsubscribe()}cargaCatalogos(){this._procesosService.getInventarioPorNivel(4).subscribe(e=>this.dataProcesos=e),this._catalogoService.getCatalogoItems(13).subscribe(e=>this.suficienciaData=e),this._catalogoService.getCatalogoItems(14).subscribe(e=>this.afectacionData=e)}cargaControlRiesgo(){this._store.dispatch(d.p({riesgoId:this.riesgoSeleccionado.riesgoId})),this.controlSubs=this._store.select("controlRiesgo").subscribe(e=>{this.controlRiesgoData=JSON.parse(JSON.stringify(e.controlRiesgo)),setTimeout(()=>{var t;this.tieneControles=(null===(t=e.controlRiesgo)||void 0===t?void 0:t.length)>0},500)})}cmbProcesoChange(e){this._procesosService.getProceosHijos(e).subscribe(e=>this.dataActividades=e)}cmbActividadChange(e){this._riesgoService.getRiesgosActividad(e).subscribe(e=>this.dataRiesgo=e)}cargaRiesgoSeleccionado(e){this._storeRiesgo.dispatch(d.A({riesgoId:e})),this.riesgoSubs=this._storeRiesgo.select("riesgo").subscribe(e=>{this.riesgoSeleccionado=e.unRiesgo}),setTimeout(()=>{this.cargaControlRiesgo()},500)}cmbRiesgoChange(e){this.cargaRiesgoSeleccionado(e.value)}dialogInventario(){const e=new a.e;e.disableClose=!1,e.width="70%",e.data={riesgoId:this.riesgoSeleccionado.riesgoId},this._dialog.open(Ip,e).afterClosed().subscribe(e=>{console.log(e),e&&this.cargaControlRiesgo()})}actionBegin(e){"beginEdit"!==e.requestType&&"add"!==e.requestType||(this.controlRiesgoEditado=Object.assign({},e.rowData)),"save"===e.requestType&&(this.controlRiesgoEditado=Object.assign({},e.data),this._store.dispatch(d.n({control:this.controlRiesgoEditado})),setTimeout(()=>{this.cargaControlRiesgo()},100)),"delete"===e.requestType&&this._store.dispatch(d.g({controlId:e.data[0].controlEventoId}))}cmbAfectacionChange(e){console.log(e),this.afectacionSeleccionada=e}cmbSuficienciaChange(e){console.log(e),this.suficienciaSeleccionada=e}calculoResidual(){this.controlRiesgo={eventoId:this.riesgoSeleccionado.riesgoId,reducirA:this.afectacionSeleccionada.toString(),suficienciaId:this.suficienciaSeleccionada},console.log(this.controlRiesgo),this._store.dispatch(d.e({control:this.controlRiesgo}))}finalizar(){this._dialogRef.close(!0)}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(p.d),m.Qb(Fp.a),m.Qb(b.a),m.Qb(g.h),m.Qb(g.h),m.Qb(Ap.a),m.Qb(a.b),m.Qb(a.h),m.Qb(a.a))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-crear-vinculacion"]],features:[m.Db([Dp,Rp])],decls:98,vars:26,consts:[["linear",""],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"col-sm-12","col-md-6"],[1,"inputForm","celdaIndiviual"],["formControlName","proceso","required","",3,"valueChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formControlName","actividad","required","",3,"valueChange"],[1,"col-sm-12","col-md-12"],[1,"inputForm","celdaCombinada"],["formControlName","riesgo","required","",3,"selectionChange"],["mat-raised-button","","matStepperNext","","color","primary",3,"disabled"],[1,"tituloRiesgo"],[1,"controlSection"],["mat-raised-button","","color","warn",3,"click"],[2,"clear","right"],[3,"dataSource","editSettings","actionBegin"],["field","controlEventoId","headerText","ID","isPrimaryKey","true","width","60",3,"visible"],["field","nombreControl","headerText","Control","width","150"],["field","peso","headerText","Peso","textAlign","Right","format","n","width","70"],["headerText"," ","width","50",3,"commands"],[1,"col-sm-12"],["mat-raised-button","","color","primary","matStepperPrevious",""],["mat-raised-button","","color","primary","matStepperNext","",3,"disabled"],[1,"col-sm-12","col-md-3","col-md-offset-2","cardRI"],[1,"col-sm-12","col-md-3","col-md-offset-2","cardRR"],["formControlName","afectacion","required","",3,"valueChange"],["formControlName","suficiencia","required","",3,"valueChange"],[1,"col-sm-12","col-md-6",2,"padding-bottom","15px"],["mat-raised-button","","color","primary","matStepperPrevious","",2,"padding-right","5px"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(m.Wb(0,"mat-horizontal-stepper",0,1),m.Wb(2,"mat-step",2),m.Wb(3,"form",3),m.Cc(4,zp,1,0,"ng-template",4),m.Wb(5,"div",5),m.Wb(6,"mat-form-field",6),m.Wb(7,"mat-label"),m.Ec(8,"Proceso"),m.Vb(),m.Wb(9,"mat-select",7),m.dc("valueChange",function(e){return t.cmbProcesoChange(e)}),m.Cc(10,Bp,2,2,"mat-option",8),m.Vb(),m.Cc(11,Pp,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(12,"div",5),m.Wb(13,"mat-form-field",6),m.Wb(14,"mat-label"),m.Ec(15,"Actividad"),m.Vb(),m.Wb(16,"mat-select",10),m.dc("valueChange",function(e){return t.cmbActividadChange(e)}),m.Cc(17,Hp,2,2,"mat-option",8),m.Vb(),m.Cc(18,Vp,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(19,"div",11),m.Wb(20,"mat-form-field",12),m.Wb(21,"mat-label"),m.Ec(22,"Riesgo"),m.Vb(),m.Wb(23,"mat-select",13),m.dc("selectionChange",function(e){return t.cmbRiesgoChange(e)}),m.Cc(24,Np,2,2,"mat-option",8),m.Vb(),m.Cc(25,qp,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(26,"div"),m.Wb(27,"button",14),m.Ec(28,"Siguiente "),m.Wb(29,"mat-icon"),m.Ec(30,"fast_forward"),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(31,"mat-step"),m.Cc(32,Wp,1,0,"ng-template",4),m.Wb(33,"p",15),m.Ec(34),m.Vb(),m.Wb(35,"div",16),m.Wb(36,"button",17),m.dc("click",function(){return t.dialogInventario()}),m.Wb(37,"mat-icon"),m.Ec(38,"list"),m.Vb(),m.Ec(39," Inventario de controles"),m.Vb(),m.Rb(40,"div",18),m.Wb(41,"ejs-grid",19),m.dc("actionBegin",function(e){return t.actionBegin(e)}),m.Wb(42,"e-columns"),m.Rb(43,"e-column",20),m.Rb(44,"e-column",21),m.Rb(45,"e-column",22),m.Rb(46,"e-column",23),m.Vb(),m.Vb(),m.Vb(),m.Wb(47,"div",24),m.Wb(48,"button",25),m.Wb(49,"mat-icon"),m.Ec(50,"fast_rewind"),m.Vb(),m.Ec(51,"Atr\xe1s"),m.Vb(),m.Wb(52,"button",26),m.Ec(53,"Siguiente"),m.Wb(54,"mat-icon"),m.Ec(55,"fast_forward"),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(56,"mat-step",2),m.Wb(57,"form",3),m.Cc(58,Gp,1,0,"ng-template",4),m.Wb(59,"div"),m.Wb(60,"mat-card",27),m.Wb(61,"mat-card-subtitle"),m.Ec(62,"Riesgo Inherente"),m.Vb(),m.Wb(63,"mat-card-subtitle"),m.Ec(64),m.Vb(),m.Vb(),m.Wb(65,"mat-card",28),m.Wb(66,"mat-card-subtitle"),m.Ec(67,"Riesgo Residual"),m.Vb(),m.Wb(68,"mat-card-subtitle"),m.Ec(69),m.Vb(),m.Vb(),m.Vb(),m.Wb(70,"div",5),m.Wb(71,"mat-form-field",6),m.Wb(72,"mat-label"),m.Ec(73,"Afectaci\xf3n"),m.Vb(),m.Wb(74,"mat-select",29),m.dc("valueChange",function(e){return t.cmbAfectacionChange(e)}),m.Cc(75,_p,2,2,"mat-option",8),m.Vb(),m.Cc(76,Up,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(77,"div",5),m.Wb(78,"mat-form-field",6),m.Wb(79,"mat-label"),m.Ec(80,"Suficiencia"),m.Vb(),m.Wb(81,"mat-select",30),m.dc("valueChange",function(e){return t.cmbSuficienciaChange(e)}),m.Cc(82,Kp,2,2,"mat-option",8),m.Vb(),m.Cc(83,Yp,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(84,"div",31),m.Wb(85,"button",17),m.dc("click",function(){return t.calculoResidual()}),m.Wb(86,"mat-icon"),m.Ec(87,"refresh"),m.Vb(),m.Ec(88," Calcular"),m.Vb(),m.Vb(),m.Wb(89,"div",24),m.Wb(90,"button",32),m.Wb(91,"mat-icon"),m.Ec(92,"fast_rewind"),m.Vb(),m.Ec(93," Atr\xe1s"),m.Vb(),m.Wb(94,"button",33),m.dc("click",function(){return t.finalizar()}),m.Wb(95,"mat-icon"),m.Ec(96,"done"),m.Vb(),m.Ec(97," Finalizar"),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Vb()),2&e&&(m.Eb(2),m.mc("stepControl",t.riesgoFormGroup),m.Eb(1),m.mc("formGroup",t.riesgoFormGroup),m.Eb(7),m.mc("ngForOf",t.dataProcesos),m.Eb(1),m.mc("ngIf",null==t.riesgoFormGroup.get("proceso").errors?null:t.riesgoFormGroup.get("proceso").errors.required),m.Eb(6),m.mc("ngForOf",t.dataActividades),m.Eb(1),m.mc("ngIf",null==t.riesgoFormGroup.get("actividad").errors?null:t.riesgoFormGroup.get("actividad").errors.required),m.Eb(6),m.mc("ngForOf",t.dataRiesgo),m.Eb(1),m.mc("ngIf",null==t.riesgoFormGroup.get("riesgo").errors?null:t.riesgoFormGroup.get("riesgo").errors.required),m.Eb(2),m.mc("disabled",!t.riesgoFormGroup.valid),m.Eb(7),m.Gc("Riesgo: ",null==t.riesgoSeleccionado?null:t.riesgoSeleccionado.nombre,""),m.Eb(7),m.mc("dataSource",t.controlRiesgoData)("editSettings",t.editSettings),m.Eb(2),m.mc("visible",!1),m.Eb(3),m.mc("commands",t.commands),m.Eb(6),m.mc("disabled",!t.tieneControles),m.Eb(4),m.mc("stepControl",t.riesgoFormGroup),m.Eb(1),m.mc("formGroup",t.afectacionFormGroup),m.Eb(7),m.Hc("",null==t.riesgoSeleccionado?null:t.riesgoSeleccionado.nombreRI,": ",null==t.riesgoSeleccionado?null:t.riesgoSeleccionado.riesgoInherente,""),m.Eb(5),m.Hc("",null==t.riesgoSeleccionado?null:t.riesgoSeleccionado.nombreRR,": ",null===(null==t.riesgoSeleccionado?null:t.riesgoSeleccionado.riesgoResidual)?null==t.riesgoSeleccionado?null:t.riesgoSeleccionado.riesgoInherente:null==t.riesgoSeleccionado?null:t.riesgoSeleccionado.riesgoResidual,""),m.Eb(6),m.mc("ngForOf",t.afectacionData),m.Eb(1),m.mc("ngIf",null==t.afectacionFormGroup.get("afectacion").errors?null:t.afectacionFormGroup.get("afectacion").errors.required),m.Eb(6),m.mc("ngForOf",t.suficienciaData),m.Eb(1),m.mc("ngIf",null==t.afectacionFormGroup.get("suficiencia").errors?null:t.afectacionFormGroup.get("suficiencia").errors.required),m.Eb(11),m.mc("disabled",!t.afectacionFormGroup.valid))},directives:[Mp.a,Mp.b,p.q,p.l,p.f,Mp.c,f.c,f.g,v.a,p.k,p.e,p.o,s.j,s.k,C.a,Mp.e,w.a,jp,cp,bp,hp,gp,Mp.f,Lp.a,Lp.c,O.k,f.b],styles:[".mat-stepper-horizontal[_ngcontent-%COMP%]{margin-top:8px}.mat-form-field[_ngcontent-%COMP%]{margin-top:16px}.celdaIndiviual[_ngcontent-%COMP%]{width:80%}.celdaCombinada[_ngcontent-%COMP%]{width:90%}.tituloRiesgo[_ngcontent-%COMP%]{font-size:medium}.cardRI[_ngcontent-%COMP%]{background-color:#f5271699}.cardRI[_ngcontent-%COMP%], .cardRR[_ngcontent-%COMP%]{text-align:center;font-weight:700}.cardRR[_ngcontent-%COMP%]{background-color:#57be0699}.controlSection[_ngcontent-%COMP%]{padding-bottom:20px}"]}),e})();function Qp(e,t){1&e&&(m.Wb(0,"th",18),m.Ec(1," Riesgo "),m.Vb())}function $p(e,t){if(1&e&&(m.Wb(0,"td",19),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.nombre," ")}}function Jp(e,t){1&e&&(m.Wb(0,"th",18),m.Ec(1," Riesgo inherente "),m.Vb())}function Zp(e,t){if(1&e&&(m.Wb(0,"td",19),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.riesgoInherente," ")}}function eu(e,t){1&e&&(m.Wb(0,"th",18),m.Ec(1," Riesgo residual"),m.Vb())}function tu(e,t){if(1&e&&(m.Wb(0,"td",19),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.riesgoResidual," ")}}function iu(e,t){1&e&&(m.Wb(0,"th",18),m.Ec(1," Total controles"),m.Vb())}function su(e,t){if(1&e&&(m.Wb(0,"td",19),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.totalControles," ")}}function nu(e,t){1&e&&m.Rb(0,"th",18)}function ou(e,t){if(1&e){const e=m.Xb();m.Wb(0,"td",20),m.Wb(1,"a",21),m.dc("click",function(){m.vc(e);const i=t.$implicit;return m.hc().dialogEdit(i)}),m.Wb(2,"mat-icon"),m.Ec(3,"edit"),m.Vb(),m.Vb(),m.Wb(4,"a",22),m.dc("click",function(){m.vc(e);const i=t.$implicit;return m.hc().eliminar(i.riesgoId)}),m.Wb(5,"mat-icon"),m.Ec(6,"delete"),m.Vb(),m.Vb(),m.Vb()}}function ru(e,t){1&e&&m.Rb(0,"tr",23)}function lu(e,t){1&e&&m.Rb(0,"tr",24)}const au=function(){return[5,10,25,100]},hu=[{path:"",children:[{path:"inventario",component:Q},{path:"parametros",component:Fe},{path:"vinculacion",component:(()=>{class e{constructor(e,t){this._dialog=e,this._store=t,this.dataSource=new o.o,this.displayedColumns=["nombre","riesgoInherente","riesgoResidual","totalControles","acciones"]}ngOnDestroy(){this.controlSubs&&this.controlSubs.unsubscribe()}cargaVinculados(){this._store.dispatch(d.r()),this.controlSubs=this._store.select("controlRiesgo").subscribe(e=>this.dataSource.data=e.controlesVinculados)}ngOnInit(){this.cargaVinculados()}applyFilter(e){var t;(null===(t=this.dataSource.data)||void 0===t?void 0:t.length)>0&&(this.dataSource.filter=e.target.value.trim().toLowerCase())}dialogNew(){const e=new a.e;e.disableClose=!1,e.width="70%",this._dialog.open(Xp,e).afterClosed().subscribe(e=>{e&&this.cargaVinculados()})}dialogEdit(e){const t=new a.e;t.disableClose=!1,t.width="70%",t.data={control:e},this._dialog.open(Xp,t).afterClosed().subscribe(e=>{e&&this.cargaVinculados()})}eliminar(e){c.a.fire({title:"Esta seguro que desea eliminar el registro?",icon:"warning",showDenyButton:!0,showCancelButton:!0,showConfirmButton:!1,denyButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.isDenied&&this._store.dispatch(d.h({riesgoId:e}))})}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(a.b),m.Qb(g.h))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-vinculacion"]],viewQuery:function(e,t){if(1&e&&(m.Ic(r.a,1),m.Ic(l.a,1)),2&e){let e;m.rc(e=m.ec())&&(t.paginator=e.first),m.rc(e=m.ec())&&(t.sort=e.first)}},decls:30,vars:5,consts:[[1,"search-div"],["mat-raised-button","","matTooltip","Crear nuevo registro","color","primary",1,"btn-add",3,"click"],[1,"search-form-field"],["matInput","","placeholder","Buscar",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","riesgoInherente"],["matColumnDef","riesgoResidual"],["matColumnDef","totalControles"],["matColumnDef","acciones"],["mat-cell","","style","text-align: right;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","10","aria-label","Select page of perfils",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",2,"text-align","right"],["matTooltip","Editar",1,"pointer",2,"color","#1f5164",3,"click"],["matTooltip","Eliminar",1,"pointer",2,"color","#e15634",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(m.Wb(0,"div",0),m.Wb(1,"button",1),m.dc("click",function(){return t.dialogNew()}),m.Wb(2,"mat-icon"),m.Ec(3,"add"),m.Vb(),m.Ec(4,"Crear "),m.Vb(),m.Wb(5,"mat-form-field",2),m.Wb(6,"mat-label"),m.Ec(7,"Filter"),m.Vb(),m.Wb(8,"input",3,4),m.dc("keyup",function(e){return t.applyFilter(e)}),m.Vb(),m.Vb(),m.Vb(),m.Wb(10,"div",5),m.Wb(11,"table",6),m.Ub(12,7),m.Cc(13,Qp,2,0,"th",8),m.Cc(14,$p,2,1,"td",9),m.Tb(),m.Ub(15,10),m.Cc(16,Jp,2,0,"th",8),m.Cc(17,Zp,2,1,"td",9),m.Tb(),m.Ub(18,11),m.Cc(19,eu,2,0,"th",8),m.Cc(20,tu,2,1,"td",9),m.Tb(),m.Ub(21,12),m.Cc(22,iu,2,0,"th",8),m.Cc(23,su,2,1,"td",9),m.Tb(),m.Ub(24,13),m.Cc(25,nu,1,0,"th",8),m.Cc(26,ou,7,0,"td",14),m.Tb(),m.Cc(27,ru,1,0,"tr",15),m.Cc(28,lu,1,0,"tr",16),m.Vb(),m.Rb(29,"mat-paginator",17),m.Vb()),2&e&&(m.Eb(11),m.mc("dataSource",t.dataSource),m.Eb(16),m.mc("matHeaderRowDef",t.displayedColumns),m.Eb(1),m.mc("matRowDefColumns",t.displayedColumns),m.Eb(1),m.mc("pageSizeOptions",m.oc(4,au)))},directives:[C.a,M.a,w.a,f.c,f.g,y.b,o.n,l.a,o.c,o.i,o.b,o.k,o.m,r.a,o.h,o.a,o.j,o.l],styles:["table[_ngcontent-%COMP%]{width:100%}.pointer[_ngcontent-%COMP%]{cursor:pointer}.search-div[_ngcontent-%COMP%]{margin:10px}.search-form-field[_ngcontent-%COMP%]{width:85%;margin-left:10px}"]}),e})()},{path:"**",redirectTo:"inventario"}]}];let cu=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Ob({type:e}),e.\u0275inj=m.Nb({imports:[[n.e.forChild(hu)],n.e]}),e})();var du=i("7Mg6"),pu=i("fa8z"),uu=i("U3D8"),mu=i("Af5F");let gu=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Ob({type:e}),e.\u0275inj=m.Nb({providers:[xp],imports:[[s.c,g.j.forFeature("catalogo",du.a),g.j.forFeature("control",pu.a),g.j.forFeature("controlRiesgo",uu.a),g.j.forFeature("riesgo",mu.a),cu,p.n,ne.c,v.b,w.b,C.b,y.c,o.p,M.b,f.e,r.b,l.c,a.g,Mp.d,Lp.b,Ep]]}),e})()}}]);