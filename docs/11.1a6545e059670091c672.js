(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"6oWQ":function(e,t,i){"use strict";i.r(t),i.d(t,"ControlesModule",function(){return gf});var s=i("ofXK"),n=i("tyNb"),o=i("+0xr"),r=i("M9IT"),l=i("Dh3D"),a=i("0IaG"),h=i("PSD3"),c=i.n(h),d=i("v8Ou"),p=i("3Pt+"),u=i("MgB1"),m=i("fXoL"),g=i("l7P3"),f=i("FesS"),b=i("kmnG"),y=i("qFsG"),v=i("d3UM"),C=i("bTqV"),w=i("NFeN"),S=i("FKr1");function E(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}function x(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}function R(e,t){if(1&e&&(m.Wb(0,"mat-option",22),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.codigo),m.Eb(1),m.Gc(" ",e.valor," ")}}function D(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}function T(e,t){if(1&e&&(m.Wb(0,"mat-option",22),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.codigo),m.Eb(1),m.Gc(" ",e.valor," ")}}function M(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}function I(e,t){if(1&e&&(m.Wb(0,"mat-option",22),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.codigo),m.Eb(1),m.Gc(" ",e.valor," ")}}function k(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}function F(e,t){if(1&e&&(m.Wb(0,"mat-option",22),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.codigo),m.Eb(1),m.Gc(" ",e.valor," ")}}function A(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}let O=(()=>{class e{constructor(e,t,i,s,n){this._formBuilder=e,this._store=t,this._catalogoService=i,this._dialogRef=s,this._dataToUpdate=n}ngOnDestroy(){this.controlSubs&&this.controlSubs.unsubscribe()}ngOnInit(){this.cargaCatalogos(),console.log(this._dataToUpdate),this._dataToUpdate?(this.tituloDialog="Editar registro",this.controlFormGroup=this._formBuilder.group({controlId:[this._dataToUpdate.control.controlId],codigo:[this._dataToUpdate.control.codigo,p.p.required],nombre:[this._dataToUpdate.control.nombre,p.p.required],detalle:[this._dataToUpdate.control.detalle],aplicacion:[this._dataToUpdate.control.aplicacion.toString(),p.p.required],periodicidad:[this._dataToUpdate.control.periodicidad.toString(),p.p.required],responsabilidad:[this._dataToUpdate.control.responsabilidad.toString(),p.p.required],documentacion:[this._dataToUpdate.control.documentacion.toString(),p.p.required]})):(this.tituloDialog="Nuevo registro",this.controlFormGroup=this._formBuilder.group({controlId:["0"],codigo:["",p.p.required],nombre:["",p.p.required],detalle:[""],aplicacion:["",p.p.required],periodicidad:["",p.p.required],responsabilidad:["",p.p.required],documentacion:["",p.p.required]}))}cargaCatalogos(){this._catalogoService.getCatalogoItems(10).subscribe(e=>this.dataAplicacion=e),this._catalogoService.getCatalogoItems(9).subscribe(e=>this.dataPeriodicidad=e),this._catalogoService.getCatalogoItems(11).subscribe(e=>this.dataResponsabilidad=e),this._catalogoService.getCatalogoItems(12).subscribe(e=>this.dataDocumentacion=e)}guardar(){this._dataToUpdate?(this.controlItem={controlId:this.controlFormGroup.get("controlId").value,codigo:this.controlFormGroup.get("codigo").value,nombre:this.controlFormGroup.get("nombre").value,detalle:this.controlFormGroup.get("detalle").value,aplicacion:this.controlFormGroup.get("aplicacion").value,periodicidad:this.controlFormGroup.get("periodicidad").value,responsabilidad:this.controlFormGroup.get("responsabilidad").value,documentacion:this.controlFormGroup.get("documentacion").value,estado:"V"},this._store.dispatch(u.d({control:this.controlItem}))):(this.controlItem={codigo:this.controlFormGroup.get("codigo").value,nombre:this.controlFormGroup.get("nombre").value,detalle:this.controlFormGroup.get("detalle").value,aplicacion:this.controlFormGroup.get("aplicacion").value,periodicidad:this.controlFormGroup.get("periodicidad").value,responsabilidad:this.controlFormGroup.get("responsabilidad").value,documentacion:this.controlFormGroup.get("documentacion").value,estado:"V"},this._store.dispatch(u.j({control:this.controlItem}))),this.controlSubs=this._store.select("control").subscribe(e=>{this.procesado=e.procesado,this.procesado&&this._dialogRef.close(!0)})}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(p.d),m.Qb(g.h),m.Qb(f.a),m.Qb(a.h),m.Qb(a.a))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-crear-control"]],decls:63,vars:12,consts:[["mat-dialog-title",""],[1,"mat-typography"],[3,"formGroup"],[2,"display","block","visibility","hidden","height","0","width","0"],[1,"inputForm"],["matInput","","formControlName","controlId"],[1,"col-sm-12","col-md-6"],[1,"inputForm","celdaIndiviual"],["matInput","","formControlName","codigo","required",""],[4,"ngIf"],["matInput","","formControlName","nombre","required",""],[1,"col-sm-12","col-md-12"],[1,"inputForm","celdaCombinada"],["matInput","","formControlName","detalle"],["formControlName","aplicacion","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","periodicidad","required",""],["formControlName","responsabilidad","required",""],["formControlName","documentacion","required",""],["align","end"],["mat-raised-button","","mat-dialog-close","","color","warn"],["mat-raised-button","","color","primary",3,"click"],[3,"value"]],template:function(e,t){1&e&&(m.Wb(0,"h3",0),m.Ec(1),m.Vb(),m.Wb(2,"mat-dialog-content",1),m.Wb(3,"form",2),m.Wb(4,"div",3),m.Wb(5,"mat-form-field",4),m.Wb(6,"mat-label"),m.Ec(7,"ControlId"),m.Vb(),m.Rb(8,"input",5),m.Vb(),m.Vb(),m.Wb(9,"div",6),m.Wb(10,"mat-form-field",7),m.Wb(11,"mat-label"),m.Ec(12,"C\xf3digo"),m.Vb(),m.Rb(13,"input",8),m.Cc(14,E,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(15,"div",6),m.Wb(16,"mat-form-field",7),m.Wb(17,"mat-label"),m.Ec(18,"Nombre"),m.Vb(),m.Rb(19,"input",10),m.Cc(20,x,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(21,"div",11),m.Wb(22,"mat-form-field",12),m.Wb(23,"mat-label"),m.Ec(24,"Detalle"),m.Vb(),m.Rb(25,"textarea",13),m.Vb(),m.Vb(),m.Wb(26,"div",6),m.Wb(27,"mat-form-field",7),m.Wb(28,"mat-label"),m.Ec(29,"Aplicaci\xf3n"),m.Vb(),m.Wb(30,"mat-select",14),m.Cc(31,R,2,2,"mat-option",15),m.Vb(),m.Cc(32,D,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(33,"div",6),m.Wb(34,"mat-form-field",7),m.Wb(35,"mat-label"),m.Ec(36,"Periodicidad"),m.Vb(),m.Wb(37,"mat-select",16),m.Cc(38,T,2,2,"mat-option",15),m.Vb(),m.Cc(39,M,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(40,"div",6),m.Wb(41,"mat-form-field",7),m.Wb(42,"mat-label"),m.Ec(43,"Responsabilidad"),m.Vb(),m.Wb(44,"mat-select",17),m.Cc(45,I,2,2,"mat-option",15),m.Vb(),m.Cc(46,k,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(47,"div",6),m.Wb(48,"mat-form-field",7),m.Wb(49,"mat-label"),m.Ec(50,"Documentacion"),m.Vb(),m.Wb(51,"mat-select",18),m.Cc(52,F,2,2,"mat-option",15),m.Vb(),m.Cc(53,A,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(54,"mat-dialog-actions",19),m.Wb(55,"button",20),m.Wb(56,"mat-icon"),m.Ec(57,"not_interested"),m.Vb(),m.Ec(58," Cancelar "),m.Vb(),m.Wb(59,"button",21),m.dc("click",function(){return t.guardar()}),m.Wb(60,"mat-icon"),m.Ec(61,"save"),m.Vb(),m.Ec(62," Guardar "),m.Vb(),m.Vb()),2&e&&(m.Eb(1),m.Fc(t.tituloDialog),m.Eb(2),m.mc("formGroup",t.controlFormGroup),m.Eb(11),m.mc("ngIf",null==t.controlFormGroup.get("codigo").errors?null:t.controlFormGroup.get("codigo").errors.required),m.Eb(6),m.mc("ngIf",null==t.controlFormGroup.get("nombre").errors?null:t.controlFormGroup.get("nombre").errors.required),m.Eb(11),m.mc("ngForOf",t.dataAplicacion),m.Eb(1),m.mc("ngIf",null==t.controlFormGroup.get("aplicacion").errors?null:t.controlFormGroup.get("aplicacion").errors.required),m.Eb(6),m.mc("ngForOf",t.dataPeriodicidad),m.Eb(1),m.mc("ngIf",null==t.controlFormGroup.get("periodicidad").errors?null:t.controlFormGroup.get("periodicidad").errors.required),m.Eb(6),m.mc("ngForOf",t.dataResponsabilidad),m.Eb(1),m.mc("ngIf",null==t.controlFormGroup.get("responsabilidad").errors?null:t.controlFormGroup.get("responsabilidad").errors.required),m.Eb(6),m.mc("ngForOf",t.dataDocumentacion),m.Eb(1),m.mc("ngIf",null==t.controlFormGroup.get("documentacion").errors?null:t.controlFormGroup.get("documentacion").errors.required))},directives:[a.i,a.f,p.q,p.l,p.f,b.c,b.g,y.b,p.c,p.k,p.e,p.o,s.k,v.a,s.j,a.c,C.a,a.d,w.a,b.b,S.k],styles:[".celdaIndiviual[_ngcontent-%COMP%]{width:80%}.celdaCombinada[_ngcontent-%COMP%]{width:90%}"]}),e})();var L=i("Qu3c");function P(e,t){1&e&&(m.Wb(0,"th",20),m.Ec(1," Control "),m.Vb())}function z(e,t){if(1&e&&(m.Wb(0,"td",21),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.nombre," ")}}function B(e,t){1&e&&(m.Wb(0,"th",22),m.Ec(1," Aplicaci\xf3n "),m.Vb())}function H(e,t){if(1&e&&(m.Wb(0,"td",21),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.nombreAplicacion," ")}}function N(e,t){1&e&&(m.Wb(0,"th",22),m.Ec(1," Periodicidad "),m.Vb())}function V(e,t){if(1&e&&(m.Wb(0,"td",21),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.nombrePeriodicidad," ")}}function q(e,t){1&e&&(m.Wb(0,"th",22),m.Ec(1," Responsabilidad "),m.Vb())}function j(e,t){if(1&e&&(m.Wb(0,"td",21),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.nombreResponsabilidad," ")}}function W(e,t){1&e&&(m.Wb(0,"th",22),m.Ec(1," Documentaci\xf3n "),m.Vb())}function G(e,t){if(1&e&&(m.Wb(0,"td",21),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.nombreDocumentacion," ")}}function _(e,t){1&e&&m.Rb(0,"th",22)}function U(e,t){if(1&e){const e=m.Xb();m.Wb(0,"td",23),m.Wb(1,"a",24),m.dc("click",function(){m.vc(e);const i=t.$implicit;return m.hc().dialogEdit(i)}),m.Wb(2,"mat-icon"),m.Ec(3,"edit"),m.Vb(),m.Vb(),m.Wb(4,"a",25),m.dc("click",function(){m.vc(e);const i=t.$implicit;return m.hc().eliminar(i.controlId)}),m.Wb(5,"mat-icon"),m.Ec(6,"delete"),m.Vb(),m.Vb(),m.Vb()}}function K(e,t){1&e&&m.Rb(0,"tr",26)}function Y(e,t){1&e&&m.Rb(0,"tr",27)}const X=function(){return[5,10,25,100]};let Q=(()=>{class e{constructor(e,t){this._store=e,this._dialog=t,this.dataSource=new o.o,this.displayedColumns=["nombre","nombreAplicacion","nombrePeriodicidad","nombreResponsabilidad","nombreDocumentacion","acciones"]}ngOnInit(){this.cargaControles()}ngOnDestroy(){this.controlSubs&&this.controlSubs.unsubscribe()}applyFilter(e){var t;(null===(t=this.dataSource.data)||void 0===t?void 0:t.length)>0&&(this.dataSource.filter=e.target.value.trim().toLowerCase())}cargaControles(){this._store.dispatch(d.q()),this.controlSubs=this._store.select("control").subscribe(e=>{this.dataSource.data=e.inventario,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}dialogNew(){const e=new a.e;e.disableClose=!1,e.width="70%",this._dialog.open(O,e).afterClosed().subscribe(e=>{e&&this.cargaControles()})}dialogEdit(e){this._dialog.open(O,{width:"70%",disableClose:!0,data:{control:e}}).afterClosed().subscribe(e=>{e&&this.cargaControles()})}eliminar(e){c.a.fire({title:"Esta seguro que desea eliminar el registro?",icon:"warning",showDenyButton:!0,showCancelButton:!0,showConfirmButton:!1,denyButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.isDenied&&this._store.dispatch(d.f({controlId:e}))})}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(g.h),m.Qb(a.b))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-inventario"]],viewQuery:function(e,t){if(1&e&&(m.Ic(r.a,1),m.Ic(l.a,1)),2&e){let e;m.rc(e=m.ec())&&(t.paginator=e.first),m.rc(e=m.ec())&&(t.sort=e.first)}},decls:33,vars:5,consts:[[1,"search-div"],["mat-raised-button","","matTooltip","Crear nuevo registro","color","primary",1,"btn-add",3,"click"],[1,"search-form-field"],["matInput","","placeholder","Buscar",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombreAplicacion"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","nombrePeriodicidad"],["matColumnDef","nombreResponsabilidad"],["matColumnDef","nombreDocumentacion"],["matColumnDef","acciones"],["mat-cell","","style","text-align: right;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","10","aria-label","Select page of perfils",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",2,"text-align","right"],["matTooltip","Editar",1,"pointer",2,"color","#1f5164",3,"click"],["matTooltip","Eliminar",1,"pointer",2,"color","#e15634",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(m.Wb(0,"div",0),m.Wb(1,"button",1),m.dc("click",function(){return t.dialogNew()}),m.Wb(2,"mat-icon"),m.Ec(3,"add"),m.Vb(),m.Ec(4,"Crear "),m.Vb(),m.Wb(5,"mat-form-field",2),m.Wb(6,"mat-label"),m.Ec(7,"Filter"),m.Vb(),m.Wb(8,"input",3,4),m.dc("keyup",function(e){return t.applyFilter(e)}),m.Vb(),m.Vb(),m.Vb(),m.Wb(10,"div",5),m.Wb(11,"table",6),m.Ub(12,7),m.Cc(13,P,2,0,"th",8),m.Cc(14,z,2,1,"td",9),m.Tb(),m.Ub(15,10),m.Cc(16,B,2,0,"th",11),m.Cc(17,H,2,1,"td",9),m.Tb(),m.Ub(18,12),m.Cc(19,N,2,0,"th",11),m.Cc(20,V,2,1,"td",9),m.Tb(),m.Ub(21,13),m.Cc(22,q,2,0,"th",11),m.Cc(23,j,2,1,"td",9),m.Tb(),m.Ub(24,14),m.Cc(25,W,2,0,"th",11),m.Cc(26,G,2,1,"td",9),m.Tb(),m.Ub(27,15),m.Cc(28,_,1,0,"th",11),m.Cc(29,U,7,0,"td",16),m.Tb(),m.Cc(30,K,1,0,"tr",17),m.Cc(31,Y,1,0,"tr",18),m.Vb(),m.Rb(32,"mat-paginator",19),m.Vb()),2&e&&(m.Eb(11),m.mc("dataSource",t.dataSource),m.Eb(19),m.mc("matHeaderRowDef",t.displayedColumns),m.Eb(1),m.mc("matRowDefColumns",t.displayedColumns),m.Eb(1),m.mc("pageSizeOptions",m.oc(4,X)))},directives:[C.a,L.a,w.a,b.c,b.g,y.b,o.n,l.a,o.c,o.i,o.b,o.k,o.m,r.a,o.h,l.b,o.a,o.j,o.l],styles:["table[_ngcontent-%COMP%]{width:100%}.pointer[_ngcontent-%COMP%]{cursor:pointer}.search-div[_ngcontent-%COMP%]{margin:10px}.search-form-field[_ngcontent-%COMP%]{width:85%;margin-left:10px}"]}),e})();var $=i("e2k9");function J(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}function Z(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}let ee=(()=>{class e{constructor(e,t,i,s){this._formBuilder=e,this._dialogRef=t,this._catalogoService=i,this._dataToUpdate=s}ngOnInit(){this.tituloDialog="Editar registro",this.catalogoFormGroup=this._formBuilder.group({grupoId:[this._dataToUpdate.item.grupoId],codigo:[this._dataToUpdate.item.codigo],nombre:[this._dataToUpdate.item.nombre,p.p.required],segmento:[this._dataToUpdate.item.segmento],peso:[this._dataToUpdate.item.peso,p.p.required]})}guardaItem(){this.catalogoItem={grupoId:this.catalogoFormGroup.get("grupoId").value,codigo:this.catalogoFormGroup.get("codigo").value,nombre:this.catalogoFormGroup.get("nombre").value,segmento:this.catalogoFormGroup.get("segmento").value,peso:this.catalogoFormGroup.get("peso").value},this._catalogoService.updateCatalogoGrupo(this.catalogoItem).subscribe(e=>this._dialogRef.close(!0))}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(p.d),m.Qb(a.h),m.Qb(f.a),m.Qb(a.a))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-edita-variable"]],decls:40,vars:5,consts:[["mat-dialog-title",""],[1,"mat-typography"],[3,"formGroup"],[2,"display","block","visibility","hidden","height","0","width","0"],["matInput","","formControlName","grupoId"],[1,"col-sm-12","col-md-6",2,"display","block","visibility","hidden","height","0","width","0"],["matInput","","formControlName","codigo","required",""],["matInput","","formControlName","segmento","required",""],[1,"col-sm-12","col-md-6"],["matInput","","formControlName","nombre","required",""],[4,"ngIf"],["matInput","","formControlName","peso","required",""],["align","end"],["mat-raised-button","","mat-dialog-close","","color","warn"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&(m.Wb(0,"h3",0),m.Ec(1),m.Vb(),m.Wb(2,"mat-dialog-content",1),m.Wb(3,"form",2),m.Wb(4,"div",3),m.Wb(5,"mat-form-field"),m.Wb(6,"mat-label"),m.Ec(7,"GrupoId"),m.Vb(),m.Rb(8,"input",4),m.Vb(),m.Vb(),m.Wb(9,"div",5),m.Wb(10,"mat-form-field"),m.Wb(11,"mat-label"),m.Ec(12,"C\xf3digo"),m.Vb(),m.Rb(13,"input",6),m.Vb(),m.Vb(),m.Wb(14,"div",5),m.Wb(15,"mat-form-field"),m.Wb(16,"mat-label"),m.Ec(17,"Segmento"),m.Vb(),m.Rb(18,"input",7),m.Vb(),m.Vb(),m.Wb(19,"div",8),m.Wb(20,"mat-form-field"),m.Wb(21,"mat-label"),m.Ec(22,"Nombre variable"),m.Vb(),m.Rb(23,"input",9),m.Cc(24,J,2,0,"mat-error",10),m.Vb(),m.Vb(),m.Wb(25,"div",8),m.Wb(26,"mat-form-field"),m.Wb(27,"mat-label"),m.Ec(28,"Peso"),m.Vb(),m.Rb(29,"input",11),m.Cc(30,Z,2,0,"mat-error",10),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(31,"mat-dialog-actions",12),m.Wb(32,"button",13),m.Wb(33,"mat-icon"),m.Ec(34,"not_interested"),m.Vb(),m.Ec(35," Cancelar "),m.Vb(),m.Wb(36,"button",14),m.dc("click",function(){return t.guardaItem()}),m.Wb(37,"mat-icon"),m.Ec(38,"save"),m.Vb(),m.Ec(39," Guardar "),m.Vb(),m.Vb()),2&e&&(m.Eb(1),m.Fc(t.tituloDialog),m.Eb(2),m.mc("formGroup",t.catalogoFormGroup),m.Eb(21),m.mc("ngIf",null==t.catalogoFormGroup.get("nombre").errors?null:t.catalogoFormGroup.get("nombre").errors.required),m.Eb(6),m.mc("ngIf",null==t.catalogoFormGroup.get("peso").errors?null:t.catalogoFormGroup.get("peso").errors.required),m.Eb(6),m.mc("disabled",!t.catalogoFormGroup.valid))},directives:[a.i,a.f,p.q,p.l,p.f,b.c,b.g,y.b,p.c,p.k,p.e,p.o,s.k,a.c,C.a,a.d,w.a,b.b],styles:[""]}),e})();function te(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}function ie(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Campo obligatorio"),m.Vb())}let se=(()=>{class e{constructor(e,t,i,s){this._formBuilder=e,this._dialogRef=t,this._store=i,this._dataToUpdate=s}ngOnInit(){this.tituloDialog="Editar registro",this.catalogoFormGroup=this._formBuilder.group({catalogoId:[this._dataToUpdate.item.catalogoId],grupoId:[this._dataToUpdate.item.grupoId],codigo:[this._dataToUpdate.item.codigo],valor:[this._dataToUpdate.item.valor,p.p.required],peso:[this._dataToUpdate.item.peso,p.p.required]})}guardaItem(){this.catalogoItem={catalogoId:this.catalogoFormGroup.get("catalogoId").value,codigo:this.catalogoFormGroup.get("codigo").value,valor:this.catalogoFormGroup.get("valor").value,grupoId:this.catalogoFormGroup.get("grupoId").value,peso:this.catalogoFormGroup.get("peso").value},this._store.dispatch($.g({catalogo:this.catalogoItem})),this._store.select("catalogo").subscribe(e=>{this.procesado=e.procesado,this.procesado&&this._dialogRef.close(!0)})}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(p.d),m.Qb(a.h),m.Qb(g.h),m.Qb(a.a))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-edita-factor"]],decls:40,vars:5,consts:[["mat-dialog-title",""],[1,"mat-typography"],[3,"formGroup"],[2,"display","block","visibility","hidden","height","0","width","0"],["matInput","","formControlName","catalogoId"],["matInput","","formControlName","grupoId"],["matInput","","formControlName","codigo"],[1,"col-sm-12","col-md-6"],["matInput","","formControlName","valor","required",""],[4,"ngIf"],["matInput","","formControlName","peso","required",""],["align","end"],["mat-raised-button","","mat-dialog-close","","color","warn"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&(m.Wb(0,"h3",0),m.Ec(1),m.Vb(),m.Wb(2,"mat-dialog-content",1),m.Wb(3,"form",2),m.Wb(4,"div",3),m.Wb(5,"mat-form-field"),m.Wb(6,"mat-label"),m.Ec(7,"CatalogoId"),m.Vb(),m.Rb(8,"input",4),m.Vb(),m.Vb(),m.Wb(9,"div",3),m.Wb(10,"mat-form-field"),m.Wb(11,"mat-label"),m.Ec(12,"GrupoId"),m.Vb(),m.Rb(13,"input",5),m.Vb(),m.Vb(),m.Wb(14,"div",3),m.Wb(15,"mat-form-field"),m.Wb(16,"mat-label"),m.Ec(17,"C\xf3digo"),m.Vb(),m.Rb(18,"input",6),m.Vb(),m.Vb(),m.Wb(19,"div",7),m.Wb(20,"mat-form-field"),m.Wb(21,"mat-label"),m.Ec(22,"Factor"),m.Vb(),m.Rb(23,"input",8),m.Cc(24,te,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(25,"div",7),m.Wb(26,"mat-form-field"),m.Wb(27,"mat-label"),m.Ec(28,"Peso"),m.Vb(),m.Rb(29,"input",10),m.Cc(30,ie,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(31,"mat-dialog-actions",11),m.Wb(32,"button",12),m.Wb(33,"mat-icon"),m.Ec(34,"not_interested"),m.Vb(),m.Ec(35," Cancelar "),m.Vb(),m.Wb(36,"button",13),m.dc("click",function(){return t.guardaItem()}),m.Wb(37,"mat-icon"),m.Ec(38,"save"),m.Vb(),m.Ec(39," Guardar "),m.Vb(),m.Vb()),2&e&&(m.Eb(1),m.Fc(t.tituloDialog),m.Eb(2),m.mc("formGroup",t.catalogoFormGroup),m.Eb(21),m.mc("ngIf",null==t.catalogoFormGroup.get("valor").errors?null:t.catalogoFormGroup.get("valor").errors.required),m.Eb(6),m.mc("ngIf",null==t.catalogoFormGroup.get("peso").errors?null:t.catalogoFormGroup.get("peso").errors.required),m.Eb(6),m.mc("disabled",!t.catalogoFormGroup.valid))},directives:[a.i,a.f,p.q,p.l,p.f,b.c,b.g,y.b,p.c,p.k,p.e,p.o,s.k,a.c,C.a,a.d,w.a,b.b],styles:[""]}),e})();var ne=i("wZkO");function oe(e,t){1&e&&(m.Wb(0,"th",24),m.Ec(1," Id "),m.Vb())}function re(e,t){if(1&e&&(m.Wb(0,"td",25),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.grupoId," ")}}function le(e,t){1&e&&m.Rb(0,"td",26)}function ae(e,t){1&e&&(m.Wb(0,"th",24),m.Ec(1," Variable "),m.Vb())}function he(e,t){if(1&e&&(m.Wb(0,"td",25),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.nombre," ")}}function ce(e,t){1&e&&m.Rb(0,"td",26)}function de(e,t){1&e&&(m.Wb(0,"th",24),m.Ec(1," Peso "),m.Vb())}function pe(e,t){if(1&e&&(m.Wb(0,"td",27),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.peso," ")}}function ue(e,t){if(1&e&&(m.Wb(0,"td",26),m.Ec(1),m.Vb()),2&e){const e=m.hc();m.Eb(1),m.Gc(" Total: ",e.totalPonderacionVariables(),"")}}function me(e,t){1&e&&m.Rb(0,"th",28)}function ge(e,t){if(1&e){const e=m.Xb();m.Wb(0,"td",29),m.Wb(1,"a",30),m.dc("click",function(){m.vc(e);const i=t.$implicit;return m.hc().dialogEditItem(i)}),m.Wb(2,"mat-icon"),m.Ec(3,"edit"),m.Vb(),m.Vb(),m.Vb()}}function fe(e,t){1&e&&m.Rb(0,"tr",31)}function be(e,t){1&e&&m.Rb(0,"tr",32)}function ye(e,t){1&e&&m.Rb(0,"tr",33)}function ve(e,t){if(1&e&&(m.Wb(0,"mat-option",34),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.grupoId),m.Eb(1),m.Gc(" ",e.nombre," ")}}function Ce(e,t){1&e&&(m.Wb(0,"th",24),m.Ec(1," Codigo "),m.Vb())}function we(e,t){if(1&e&&(m.Wb(0,"td",25),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.codigo," ")}}function Se(e,t){1&e&&(m.Wb(0,"th",24),m.Ec(1," Factor "),m.Vb())}function Ee(e,t){if(1&e&&(m.Wb(0,"td",25),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.valor," ")}}function xe(e,t){1&e&&(m.Wb(0,"th",24),m.Ec(1," Peso "),m.Vb())}function Re(e,t){if(1&e&&(m.Wb(0,"td",25),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.peso," ")}}function De(e,t){1&e&&m.Rb(0,"th",28)}function Te(e,t){if(1&e){const e=m.Xb();m.Wb(0,"td",29),m.Wb(1,"a",30),m.dc("click",function(){m.vc(e);const i=t.$implicit;return m.hc().dialogEditFactor(i)}),m.Wb(2,"mat-icon"),m.Ec(3,"edit"),m.Vb(),m.Vb(),m.Vb()}}function Me(e,t){1&e&&m.Rb(0,"tr",31)}function Ie(e,t){1&e&&m.Rb(0,"tr",32)}const ke=function(){return["grupoId","nombre","peso"]},Fe=function(){return[5,10,25,100]};let Ae=(()=>{class e{constructor(e,t,i){this.catalogoService=e,this.store=t,this.dialog=i,this.dataSourceVariable=new o.o,this.displayedColumnsVariable=["grupoId","nombre","peso","acciones"],this.dataSource=new o.o,this.displayedColumns=["codigo","valor","peso","acciones"],this.grupoId=0}ngOnInit(){this.getGruposCatalogos()}ngOnDestroy(){}applyFilter(e){var t;(null===(t=this.dataSource.data)||void 0===t?void 0:t.length)>0&&(this.dataSource.filter=e.target.value.trim().toLowerCase())}getGruposCatalogos(){this.catalogoService.getCatalogoGrupoSegmento("Control").subscribe(e=>{this.catalogoGrupos=e,this.dataSourceVariable.data=this.catalogoGrupos.filter(e=>"SUFICIENCIA"!=e.codigo),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}totalPonderacionVariables(){if(this.catalogoGrupos)return this.catalogoGrupos.reduce((e,t)=>e+t.peso,0)}grupoChange(e){this.cargaItems(e),this.grupoId=e}cargaItems(e){this.store.dispatch($.j({grupoId:e})),this.catalogoSubs=this.store.select("catalogo").subscribe(e=>{this.dataSource.data=e.catalogo,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}dialogEditItem(e){this.dialog.open(ee,{width:"40%",disableClose:!0,data:{item:e}}).afterClosed().subscribe(e=>{e&&this.getGruposCatalogos()})}dialogEditFactor(e){this.dialog.open(se,{width:"40%",disableClose:!0,data:{item:e}}).afterClosed().subscribe(e=>{e&&this.cargaItems(this.grupoId)})}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(f.a),m.Qb(g.h),m.Qb(a.b))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-parametros"]],viewQuery:function(e,t){if(1&e&&(m.Ic(r.a,1),m.Ic(l.a,1)),2&e){let e;m.rc(e=m.ec())&&(t.paginator=e.first),m.rc(e=m.ec())&&(t.sort=e.first)}},decls:47,vars:13,consts:[["label","Ponderacion variables"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","grupoId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","nombre"],["matColumnDef","peso"],["mat-cell","","align","right",4,"matCellDef"],["matColumnDef","acciones"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","style","text-align: right;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],["aria-label","Select page",3,"pageSizeOptions"],["label","Factores"],[1,"search-div"],["appearance","fill"],[3,"valueChange"],[3,"value",4,"ngFor","ngForOf"],["matColumnDef","codigo"],["matColumnDef","valor"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-footer-cell",""],["mat-cell","","align","right"],["mat-header-cell",""],["mat-cell","",2,"text-align","right"],["matTooltip","Editar",1,"pointer",2,"color","#1f5164",3,"click"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""],[3,"value"]],template:function(e,t){1&e&&(m.Wb(0,"mat-tab-group"),m.Wb(1,"mat-tab",0),m.Wb(2,"div",1),m.Wb(3,"table",2),m.Ub(4,3),m.Cc(5,oe,2,0,"th",4),m.Cc(6,re,2,1,"td",5),m.Cc(7,le,1,0,"td",6),m.Tb(),m.Ub(8,7),m.Cc(9,ae,2,0,"th",4),m.Cc(10,he,2,1,"td",5),m.Cc(11,ce,1,0,"td",6),m.Tb(),m.Ub(12,8),m.Cc(13,de,2,0,"th",4),m.Cc(14,pe,2,1,"td",9),m.Cc(15,ue,2,1,"td",6),m.Tb(),m.Ub(16,10),m.Cc(17,me,1,0,"th",11),m.Cc(18,ge,4,0,"td",12),m.Tb(),m.Cc(19,fe,1,0,"tr",13),m.Cc(20,be,1,0,"tr",14),m.Cc(21,ye,1,0,"tr",15),m.Vb(),m.Rb(22,"mat-paginator",16),m.Vb(),m.Vb(),m.Wb(23,"mat-tab",17),m.Wb(24,"div",18),m.Wb(25,"mat-form-field",19),m.Wb(26,"mat-label"),m.Ec(27,"Variables"),m.Vb(),m.Wb(28,"mat-select",20),m.dc("valueChange",function(e){return t.grupoChange(e)}),m.Cc(29,ve,2,2,"mat-option",21),m.Vb(),m.Vb(),m.Vb(),m.Wb(30,"div",1),m.Wb(31,"table",2),m.Ub(32,22),m.Cc(33,Ce,2,0,"th",4),m.Cc(34,we,2,1,"td",5),m.Tb(),m.Ub(35,23),m.Cc(36,Se,2,0,"th",4),m.Cc(37,Ee,2,1,"td",5),m.Tb(),m.Ub(38,8),m.Cc(39,xe,2,0,"th",4),m.Cc(40,Re,2,1,"td",5),m.Tb(),m.Ub(41,10),m.Cc(42,De,1,0,"th",11),m.Cc(43,Te,4,0,"td",12),m.Tb(),m.Cc(44,Me,1,0,"tr",13),m.Cc(45,Ie,1,0,"tr",14),m.Vb(),m.Rb(46,"mat-paginator",16),m.Vb(),m.Vb(),m.Vb()),2&e&&(m.Eb(3),m.mc("dataSource",t.dataSourceVariable),m.Eb(16),m.mc("matHeaderRowDef",t.displayedColumnsVariable),m.Eb(1),m.mc("matRowDefColumns",t.displayedColumnsVariable),m.Eb(1),m.mc("matFooterRowDef",m.oc(10,ke)),m.Eb(1),m.mc("pageSizeOptions",m.oc(11,Fe)),m.Eb(7),m.mc("ngForOf",t.catalogoGrupos),m.Eb(2),m.mc("dataSource",t.dataSource),m.Eb(13),m.mc("matHeaderRowDef",t.displayedColumns),m.Eb(1),m.mc("matRowDefColumns",t.displayedColumns),m.Eb(1),m.mc("pageSizeOptions",m.oc(12,Fe)))},directives:[ne.b,ne.a,o.n,l.a,o.c,o.i,o.b,o.e,o.k,o.m,o.g,r.a,b.c,b.g,v.a,s.j,o.h,l.b,o.a,o.d,L.a,w.a,o.j,o.l,o.f,S.k],styles:["table[_ngcontent-%COMP%]{width:100%}.pointer[_ngcontent-%COMP%]{cursor:pointer}.search-div[_ngcontent-%COMP%]{margin:10px}.search-form-field[_ngcontent-%COMP%]{width:85%;margin-left:10px}"]}),e})(),Oe=0;function Le(e,t){const i=t;return i.unshift(void 0),new(Function.prototype.bind.apply(e,i))}function Pe(e,t){let i=t;const s=e.replace(/\[/g,".").replace(/\]/g,"").split(".");for(let n=0;n<s.length&&!je(i);n++)i=i[s[n]];return i}function ze(e,t,i){const s=e.replace(/\[/g,".").replace(/\]/g,"").split("."),n=i||{};let o,r=n;const l=s.length;let a;for(o=0;o<l;o++)a=s[o],o+1===l?r[a]=void 0===t?{}:t:qe(r[a])&&(r[a]={}),r=r[a];return n}function Be(e){return!qe(e)&&e.constructor==={}.constructor}function He(e,t){return e[t]}function Ne(e,t){if(!qe(t)){const i=e,s=t,n=Object.keys(t),o="deepMerge";for(const e of n)qe(i[o])||-1===i[o].indexOf(e)||!Be(s[e])&&!Array.isArray(s[e])?i[e]=s[e]:Ve(i[e],i[e],s[e],!0)}}function Ve(e,t,i,s){const n=e&&"object"==typeof e?e:{};let o=arguments.length;s&&(o-=1);for(let r=1;r<o;r++){if(!arguments[r])continue;let e=arguments[r];Object.keys(e).forEach(t=>{const i=n[t],o=e[t];let r;Array.isArray(o)&&Array.isArray(i);s&&(Be(o)||Array.isArray(o))?Be(o)?(r=i||{},Array.isArray(r)&&r.hasOwnProperty("isComplexArray")?Ve(r,{},o,s):n[t]=Ve(r,{},o,s)):(r=i||[],n[t]=Ve([],r,o,s)):n[t]=o})}return n}function qe(e){return null==e}function je(e){return void 0===e}function We(e){return e+"_"+Oe++}function Ge(e,t){let i;return function(){const s=arguments,n=()=>(i=null,e.apply(this,s));clearTimeout(i),i=setTimeout(n,t)}}function _e(e,t){return e===t||!(e===document||!e)&&_e(e.parentNode,t)}function Ue(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}}function Ke(e){const t=e+"";return t.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?t:t+"px"}function Ye(){return!1}const Xe={latn:{_digits:"0123456789",_type:"numeric"}},Qe={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},$e=[0,1,2,3,4,5,6,7,8,9];let Je=(()=>{class e{static getMainObject(e,t){return Pe("main."+t,e)}static getNumberingSystem(e){return Pe("supplemental.numberingSystems",e)||this.numberingSystems}static reverseObject(e,t){const i=t||Object.keys(e),s={};for(const n of i)s.hasOwnProperty(e[n])||(s[e[n]]=n);return s}static getSymbolRegex(e){const t=e.map(e=>e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")).join("|");return new RegExp(t,"g")}static getSymbolMatch(e){const t=Object.keys(Qe),i={};for(const s of t)i[e[s]]=Qe[s];return i}static constructRegex(e){const t=e.length;let i="";for(let s=0;s<t;s++)i+=s!==t-1?e[s]+"|":e[s];return i}static convertValueParts(e,t,i){return e.replace(t,e=>i[e])}static getDefaultNumberingSystem(e){const t={};return t.obj=Pe("numbers",e),t.nSystem=Pe("defaultNumberingSystem",t.obj),t}static getCurrentNumericOptions(e,t,i,s){const n={},o=this.getDefaultNumberingSystem(e);if(!je(o.nSystem)||s){const e=s?Pe("obj.mapperDigits",o):Pe(o.nSystem+"._digits",t);je(e)||(n.numericPair=this.reverseObject(e,$e),n.numberParseRegex=new RegExp(this.constructRegex(e),"g"),n.numericRegex="["+e[0]+"-"+e[9]+"]",i&&(n.numericRegex=e[0]+"-"+e[9],n.symbolNumberSystem=Pe(s?"numberSymbols":"symbols-numberSystem-"+o.nSystem,o.obj),n.symbolMatch=this.getSymbolMatch(n.symbolNumberSystem),n.numberSystem=o.nSystem))}return n}static getNumberMapper(e,t,i){const s={mapper:{}},n=this.getDefaultNumberingSystem(e);if(!je(n.nSystem)){s.numberSystem=n.nSystem,s.numberSymbols=Pe("symbols-numberSystem-"+n.nSystem,n.obj),s.timeSeparator=Pe("timeSeparator",s.numberSymbols);const e=Pe(n.nSystem+"._digits",t);if(!je(e))for(const t of $e)s.mapper[t]=e[t]}return s}}return e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=Xe,e})();const Ze={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.\u200f",BHD:"\u062f.\u0628.\u200f",DZD:"\u062f.\u062c.\u200f",EGP:"\u062c.\u0645.\u200f",ILS:"\u20aa",IQD:"\u062f.\u0639.\u200f",JOD:"\u062f.\u0627.\u200f",KMF:"CF",KWD:"\u062f.\u0643.\u200f",LBP:"\u0644.\u0644.\u200f",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.\u200f",QAR:"\u0631.\u0642.\u200f",SAR:"\u0631.\u0633.\u200f",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.\u200f",TND:"\u062f.\u062a.\u200f",YER:"\u0631.\u064a.\u200f",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};var et;!function(e){const t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){let i=e.getDate(),s=e.getMonth(),n=e.getFullYear(),o=s+1,r=n;o<3&&(r-=1,o+=12);let l=Math.floor(r/100),a=l-Math.floor(l/4)-2;const h=Math.floor(365.25*(r+4716))+Math.floor(30.6001*(o+1))+i-a-1524;l=Math.floor((h-1867216.25)/36524.25),a=l-Math.floor(l/4)+1;const c=h+a+1524;let d=Math.floor((c-122.1)/365.25);const p=Math.floor(365.25*d),u=Math.floor((c-p)/30.6001);i=c-p-Math.floor(30.6001*u),s=Math.floor((c-p)/20.6001),s>13&&(d+=1,s-=12),s-=1,n=d-4716;const m=h-24e5,g=10631/30;let f=h-1948084;const b=Math.floor(f/10631);f-=10631*b;const y=Math.floor((f-.1335)/g),v=30*b+y;f-=Math.floor(y*g+.1335);let C=Math.floor((f+28.5001)/29.5);13===C&&(C=12);const w=f-Math.floor(29.5001*C-29);let S=0;for(;S<t.length&&!(t[S]>m);S++);const E=S+16260,x=Math.floor((E-1)/12);let R=x+1,D=E-12*x,T=m-t[S-1]+1;return(T+"").length>2&&(T=w,D=C,R=v),{year:R,month:D,date:T}},e.toGregorian=function(e,i,s){const n=Math.floor(s+t[12*(e-1)+1+(i-1)-16260-1]-1+24e5+.5);let o=Math.floor((n-1867216.25)/36524.25);o=n+1+o-Math.floor(o/4);const r=o+1524,l=Math.floor((r-122.1)/365.25),a=Math.floor(365.25*l),h=Math.floor((r-a)/30.6001),c=r-a-Math.floor(30.6001*h);let d=h-(h>13.5?13:1);const p=l-(d>2.5?4716:4715);return p<=0&&d--,new Date(p+"/"+d+"/"+c)}}(et||(et={}));const tt=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,it="stand-alone",st=["sun","mon","tue","wed","thu","fri","sat"],nt={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},ot={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"};class rt{static dateFormat(e,t,i){const s=Dt.getDependables(i,e,t.calendar),n=(Pe("parserObject.numbers",s),s.dateObject),o={isIslamic:Dt.islamicRegex.test(t.calendar)};let r=t.format||Dt.getResultantPattern(t.skeleton,s.dateObject,t.type,!1,"");if(o.dateSeperator=Dt.getDateSeparator(s.dateObject),je(r))Ue("Format options or type given must be invalid");else{r=Dt.ConvertDateToWeekFormat(r),o.pattern=r,o.numMapper=Je.getNumberMapper(s.parserObject,Je.getNumberingSystem(i));const e=r.match(tt)||[];for(const t of e){const e=t.length;let i=t[0];switch("K"===i&&(i="h"),i){case"E":case"c":o.weekday=s.dateObject[Dt.days][it][Dt.monthIndex[e]];break;case"M":case"L":o.month=s.dateObject[Dt.month][it][Dt.monthIndex[e]];break;case"a":o.designator=Pe("dayPeriods.format.wide",n);break;case"G":o.era=Pe("eras."+(e<=3?"eraAbbr":4===e?"eraNames":"eraNarrow"),s.dateObject);break;case"z":o.timeZone=Pe("dates.timeZoneNames",s.parserObject)}}}return e=>isNaN(e.getDate())?null:this.intDateFormatter(e,o)}static intDateFormatter(e,t){let i="";const s=t.pattern.match(Dt.dateParseRegex),n=this.getCurrentDateValue(e,t.isIslamic);for(const o of s){const s=o.length;let r,l=o[0];"K"===l&&(l="h");let a,h,c="",d="";switch(l){case"M":case"L":r=n.month,s>2?i+=t.month[r]:a=!0;break;case"E":case"c":i+=t.weekday[st[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(a=!0,"d"===l)r=n.date;else if("f"===l){a=!1,h=!0,c=e[nt[l]]().toString(),c=c.substring(0,s);const t=c.length;if(s!==t){if(s>3)continue;for(let e=0;e<s-t;e++)c="0"+c.toString()}d+=c}else r=e[nt[l]]();"h"===l&&(r=r%12||12);break;case"y":h=!0,d+=n.year,2===s&&(d=d.substr(d.length-2));break;case"a":let p=e.getHours()<12?"am":"pm";i+=t.designator[p];break;case"G":let u=e.getFullYear()<0?0:1,m=t.era[u];qe(m)&&(m=t.era[u?0:1]),i+=m||"";break;case"'":i+="''"===o?"'":o.replace(/'/g,"");break;case"z":let g=e.getTimezoneOffset(),f=s<4?"+H;-H":t.timeZone.hourFormat;f=f.replace(/:/g,t.numMapper.timeSeparator),0===g?i+=t.timeZone.gmtZeroFormat:(h=!0,d=this.getTimeZoneValue(g,f)),d=t.timeZone.gmtFormat.replace(/\{0\}/,d);break;case":":i+=t.numMapper.numberSymbols.timeSeparator;break;case"/":i+=t.dateSeperator;break;case"W":a=!0,r=Dt.getWeekOfYear(e);break;default:i+=o}a&&(h=!0,d=this.checkTwodigitNumber(r,s)),h&&(i+=Je.convertValueParts(d,Dt.latnParseRegex,t.numMapper.mapper))}return i}static getCurrentDateValue(e,t){return t?et.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}}static checkTwodigitNumber(e,t){const i=e+"";return 2===t&&2!==i.length?"0"+i:i}static getTimeZoneValue(e,t){let i=t.split(";")[e>0?1:0];const s=Math.abs(e);return i.replace(/HH?|mm/g,e=>{const t=e.length,i=-1!==e.indexOf("H");return this.checkTwodigitNumber(Math.floor(i?s/60:s%60),t)})}}const lt={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},at=["infinity","nan","group","decimal","exponential"];class ht{static numberFormatter(e,t,i){const s=Ve({},t);let n={};const o={};let r;const l=Dt.getDependables(i,e,"",!0);o.numberMapper=Je.getNumberMapper(l.parserObject,Je.getNumberingSystem(i),!0),o.currencySymbol=Dt.getCurrencySymbol(l.numericObject,s.currency||Ct,t.altSymbol),o.percentSymbol=o.numberMapper.numberSymbols.percentSign,o.minusSymbol=o.numberMapper.numberSymbols.minusSign;const a=o.numberMapper.numberSymbols;if(t.format&&!Dt.formatRegex.test(t.format))n=Dt.customFormat(t.format,o,l.numericObject);else{Ve(s,Dt.getProperNumericSkeleton(t.format||"N")),s.isCurrency="currency"===s.type,s.isPercent="percent"===s.type,r=Dt.getSymbolPattern(s.type,o.numberMapper.numberSystem,l.numericObject,s.isAccount),s.groupOne=this.checkValueRange(s.maximumSignificantDigits,s.minimumSignificantDigits,!0),this.checkValueRange(s.maximumFractionDigits,s.minimumFractionDigits,!1,!0),je(s.fractionDigits)||(s.minimumFractionDigits=s.maximumFractionDigits=s.fractionDigits),je(s.useGrouping)&&(s.useGrouping=!0),s.isCurrency&&(r=r.replace(/\u00A4/g,Dt.defaultCurrency));{const e=r.split(";");n.nData=Dt.getFormatData(e[1]||"-"+e[0],!0,o.currencySymbol),n.pData=Dt.getFormatData(e[0],!1,o.currencySymbol),s.useGrouping&&(s.groupSeparator=a[at[2]],s.groupData=this.getGroupingDetails(e[0]))}if(je(s.minimumFractionDigits)&&(s.minimumFractionDigits=n.nData.minimumFraction),je(s.maximumFractionDigits)){const e=n.nData.maximumFraction;s.maximumFractionDigits=je(e)&&s.isPercent?0:e}const e=s.minimumFractionDigits,i=s.maximumFractionDigits;je(e)||je(i)||e>i&&(s.maximumFractionDigits=e)}return Ve(n.nData,s),Ve(n.pData,s),e=>isNaN(e)?a[at[1]]:isFinite(e)?this.intNumberFormatter(e,n,o):a[at[0]]}static getGroupingDetails(e){const t={},i=e.match(Dt.negativeDataRegex);if(i&&i[4]){const e=i[4],s=e.lastIndexOf(",");if(-1!==s){const i=e.split(".")[0];t.primary=i.length-s-1;const n=e.lastIndexOf(",",s-1);-1!==n&&(t.secondary=s-1-n)}}return t}static checkValueRange(e,t,i,s){const n=s?"f":"s";let o=0;const r=lt["l"+n];let l=lt["m"+n];if(je(e)||(this.checkRange(e,r,s),o++),je(t)||(this.checkRange(t,l,s),o++),2===o){if(!(e<t))return!0;Ue(l+"specified must be less than the"+r)}else i&&1===o&&Ue("Both"+l+"and"+l+"must be present");return!1}static checkRange(e,t,i){const s=i?[0,20]:[1,21];(e<s[0]||e>s[1])&&Ue(t+"value must be within the range"+s[0]+"to"+s[1])}static intNumberFormatter(e,t,i){let s;if(!je(t.nData.type)){e<0?(e*=-1,s=t.nData):s=0===e&&t.zeroData||t.pData;let n="";return s.isPercent&&(e*=100),s.groupOne?n=this.processSignificantDigits(e,s.minimumSignificantDigits,s.maximumSignificantDigits):(n=this.processFraction(e,s.minimumFractionDigits,s.maximumFractionDigits),s.minimumIntegerDigits&&(n=this.processMinimumIntegers(n,s.minimumIntegerDigits))),"scientific"===s.type&&(n=e.toExponential(s.maximumFractionDigits),n=n.replace("e",i.numberMapper.numberSymbols[at[4]])),n=n.replace(".",i.numberMapper.numberSymbols[at[3]]),s.useGrouping&&(n=this.groupNumbers(n,s.groupData.primary,s.groupSeparator||",",i.numberMapper.numberSymbols[at[3]]||".",s.groupData.secondary)),n=Je.convertValueParts(n,Dt.latnParseRegex,i.numberMapper.mapper),"N/A"===s.nlead?s.nlead:s.nlead+n+s.nend}}static processSignificantDigits(e,t,i){let s,n=e+"";return n.length<t?e.toPrecision(t):(n=e.toPrecision(i),s=+n,s+"")}static groupNumbers(e,t,i,s,n){let o=!qe(n)&&0!==n;const r=e.split(s),l=r[0];let a=l.length,h="";for(;a>t;)h=l.slice(a-t,a)+(h.length?i+h:""),a-=t,o&&(t=n,o=!1);return r[0]=l.slice(0,a)+(h.length?i:"")+h,r.join(s)}static processFraction(e,t,i){const s=(e+"").split(".")[1],n=s?s.length:0;if(t&&n<t){let i="";if(0!==n){i+=e;for(let e=0;e<t-n;e++)i+="0";return i}return i=e.toFixed(t),e.toFixed(t)}return!qe(i)&&(n>i||0===i)?e.toFixed(i):e+""}static processMinimumIntegers(e,t){const i=e.split(".");let s=i[0];const n=s.length;if(n<t){for(let e=0;e<t-n;e++)s="0"+s;i[0]=s}return i.join(".")}}const ct="stand-alone",dt=/^[0-9]*$/,pt={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},ut=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,mt=/,/g,gt=["minusSign","infinity"];class ft{constructor(e){this.ranArray=[],this.boundedEvents={},qe(e)||(this.context=e)}on(e,t,i,s){if(qe(t))return;const n=i||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:n}]:qe(s)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:n}):-1===this.ranArray.indexOf(s)&&(this.ranArray.push(s),this.boundedEvents[e].push({handler:t,context:n,id:s}))}off(e,t,i){if(this.notExist(e))return;const s=Pe(e,this.boundedEvents);if(t){for(let n=0;n<s.length;n++)if(i){if(s[n].id===i){s.splice(n,1);const e=this.ranArray.indexOf(i);-1!==e&&this.ranArray.splice(e,1);break}}else if(t===s[n].handler){s.splice(n,1);break}}else delete this.boundedEvents[e]}notify(e,t,i,s){if(this.notExist(e))return void(i&&i.call(this,t));t&&(t.name=e);const n=Pe(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(n,t,i,s,0);for(const o of n)o.handler.call(o.context,t);i&&i.call(this,t)}blazorCallback(e,t,i,s,n){const o=n===e.length-1;if(n<e.length){const r=e[n],l=r.handler.call(r.context,t);if(l&&"function"==typeof l.then){if(!i)return l;l.then(l=>{if(l="string"==typeof l&&this.isJson(l)?JSON.parse(l,this.dateReviver):l,Ve(t,t,l,!0),!i||!o)return this.blazorCallback(e,t,i,s,n+1);i.call(r.context,t)}).catch(e=>{s&&s.call(r.context,"string"==typeof e&&this.isJson(e)?JSON.parse(e,this.dateReviver):e)})}else{if(!i||!o)return this.blazorCallback(e,t,i,s,n+1);i.call(r.context,t)}}}dateReviver(e,t){return Ye&&"string"==typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t}isJson(e){try{JSON.parse(e)}catch(t){return!1}return!0}destroy(){this.boundedEvents=this.context=void 0}notExist(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0}isHandlerPresent(e,t){for(const i of e)if(i.handler===t)return!0;return!1}}const bt=new ft,yt={};let vt="en-US",Ct="USD";const wt=["numericObject","dateObject"];class St{constructor(e){e&&(this.culture=e)}getDateFormat(e){return rt.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},yt)}getNumberFormat(e){return e&&!e.currency&&(e.currency=Ct),ht.numberFormatter(this.getCulture(),e||{},yt)}getDateParser(e){return class{static dateParser(e,t,i){const s=Dt.getDependables(i,e,t.calendar),n=Je.getCurrentNumericOptions(s.parserObject,Je.getNumberingSystem(i),!1,!1);let o,r={},l=t.format||Dt.getResultantPattern(t.skeleton,s.dateObject,t.type,!1,""),a="";if(je(l))Ue("Format options or type given must be invalid");else{l=Dt.ConvertDateToWeekFormat(l),r={isIslamic:Dt.islamicRegex.test(t.calendar),pattern:l,evalposition:{},culture:e};const h=l.match(Dt.dateParseRegex)||[],c=h.length;let d=0,p=0,u=!1;const m=n.numericRegex;let g=Je.getNumberMapper(s.parserObject,Je.getNumberingSystem(i));for(let e=0;e<c;e++){const t=h[e],i=t.length,n="K"===t[0]?"h":t[0];let l,f,b=ot[n];const y=2===i?"":"?";switch(u&&(d=p,u=!1),n){case"E":case"c":let e;e=s.dateObject[Dt.days][ct][Dt.monthIndex[i]];let h=Je.reverseObject(e);a+="("+Object.keys(h).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(f=!0,("M"===n||"L"===n)&&i>2){let e;e=s.dateObject.months[ct][Dt.monthIndex[i]],r[b]=Je.reverseObject(e),a+="("+Object.keys(r[b]).join("|")+")"}else if("f"===n){if(i>3)continue;l=!0,a+="("+m+m+"?"+m+"?)"}else l=!0,a+="("+m+m+y+")";"h"===n&&(r.hour12=!0);break;case"W":a+="("+m+(1===i?"?":"")+m+")";break;case"y":f=l=!0,a+=2===i?"("+m+m+")":"("+m+"{"+i+",})";break;case"a":f=!0;let c=Pe("dayPeriods.format.wide",s.dateObject);r[b]=Je.reverseObject(c),a+="("+Object.keys(r[b]).join("|")+")";break;case"G":f=!0,r[b]=Je.reverseObject(Pe("eras."+(i<=3?"eraAbbr":4===i?"eraNames":"eraNarrow"),s.dateObject)),a+="("+Object.keys(r[b]).join("|")+"?)";break;case"z":f=0!==(new Date).getTimezoneOffset(),r[b]=Pe("dates.timeZoneNames",s.parserObject);let d=r[b];o=i<4;let v=o?"+H;-H":d.hourFormat;v=v.replace(/:/g,g.timeSeparator),a+="("+this.parseTimeZoneRegx(v,d,m)+")?",u=!0,p=o?6:12;break;case"'":a+="("+t.replace(/'/g,"")+")?";break;default:a+="([\\D])"}f&&(r.evalposition[b]={isNumber:l,pos:e+1+d,hourOnly:o}),e!==c-1||qe(a)||(r.parserRegex=new RegExp("^"+a+"$","i"))}}return e=>{const t=this.internalDateParse(e,r,n);if(qe(t)||!Object.keys(t).length)return null;if(r.isIslamic){let e={},i=t.year;const s=t.day,n=t.month,o=i?i+"":"",r=2===o.length;i&&n&&s&&!r||(e=et.getHijriDate(new Date)),r&&(i=parseInt((e.year+"").slice(0,2)+o,10));const l=et.toGregorian(i||e.year,n||e.month,s||e.date);t.year=l.getFullYear(),t.month=l.getMonth()+1,t.day=l.getDate()}return this.getDateObject(t)}}static getDateObject(e,t){const i=t||new Date;i.setMilliseconds(0);const s=["hour","minute","second","milliseconds","month","day"];let n=e.year;const o=e.designator,r=e.timeZone;je(n)||((n+"").length<=2&&(n+=100*Math.floor(i.getFullYear()/100)),i.setFullYear(n));for(const l of s){let t=e[l];if(je(t)&&"day"===l&&i.setDate(1),!je(t))if("month"===l){if(t-=1,t<0||t>11)return new Date("invalid");const e=i.getDate();i.setDate(1),i[pt[l]](t);const s=new Date(i.getFullYear(),t+1,0).getDate();i.setDate(e<s?e:s)}else{if("day"===l){const e=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(t<1||t>e)return null}i[pt[l]](t)}}if(!je(o)){const e=i.getHours();"pm"===o?i.setHours(e+(12===e?0:12)):12===e&&i.setHours(0)}if(!je(r)){const e=r-i.getTimezoneOffset();0!==e&&i.setMinutes(i.getMinutes()+e)}return i}static internalDateParse(e,t,i){const s=e.match(t.parserRegex),n={hour:0,minute:0,second:0};if(qe(s))return null;{const e=Object.keys(t.evalposition);for(const o of e){const e=t.evalposition[o];let r=s[e.pos];if(e.isNumber)n[o]=this.internalNumberParser(r,i);else if("timeZone"!==o||je(r))r="month"!==o||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?r:r[0].toUpperCase()+r.substring(1).toLowerCase(),n[o]=t[o][r];else{const t=e.pos;let r;const l=s[t+1],a=!je(l);e.hourOnly?r=60*this.getZoneValue(a,l,s[t+4],i):(r=60*this.getZoneValue(a,l,s[t+7],i),r+=this.getZoneValue(a,s[t+4],s[t+10],i)),qe(r)||(n[o]=r)}}t.hour12&&(n.hour12=!0)}return n}static internalNumberParser(e,t){return e=Je.convertValueParts(e,t.numberParseRegex,t.numericPair),dt.test(e)?+e:null}static parseTimeZoneRegx(e,t,i){const s=t.gmtFormat;let n;const o="("+i+")("+i+")";let r;return n=e.replace("+","\\+"),n=-1!==e.indexOf("HH")?n.replace(/HH|mm/g,"("+o+")"):n.replace(/H|m/g,"("+o+"?)"),r=n.split(";").map(e=>s.replace("{0}",e)),n=r.join("|")+"|"+t.gmtZeroFormat,n}static getZoneValue(e,t,i,s){const n=e?t:i;if(!n)return 0;const o=this.internalNumberParser(n,s);return e?-o:o}}.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},yt)}getNumberParser(e){return class{static numberParser(e,t,i){const s=Dt.getDependables(i,e,"",!0),n={custom:!0};let o,r;if(Dt.formatRegex.test(t.format)||!t.format?(Ve(n,Dt.getProperNumericSkeleton(t.format||"N")),n.custom=!1,n.fractionDigits||t.maximumFractionDigits&&(n.maximumFractionDigits=t.maximumFractionDigits)):Ve(n,Dt.customFormat(t.format,null,null)),Pe("numbers",s.parserObject),o=Je.getCurrentNumericOptions(s.parserObject,Je.getNumberingSystem(i),!0,!1),n.symbolRegex=Je.getSymbolRegex(Object.keys(o.symbolMatch)),n.infinity=o.symbolNumberSystem[gt[1]],r=Dt.getSymbolPattern(n.type,o.numberSystem,s.numericObject,n.isAccount),r){r=r.replace(/\u00A4/g,Dt.defaultCurrency);const e=r.split(";");n.nData=Dt.getFormatData(e[1]||"-"+e[0],!0,""),n.pData=Dt.getFormatData(e[0],!0,"")}return e=>this.getParsedNumber(e,n,o)}static getParsedNumber(e,t,i){let s,n,o,r,l,a;if(-1!==e.indexOf(t.infinity))return 1/0;{e=Je.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=-1!==(e=Je.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf("-")?e.replace("-.","-0."):e).indexOf(".")&&(e="0"+e);const h=e.match(ut);if(qe(h))return NaN;r=h[1],o=h[2];const c=h[5];return l=h[6],s=t.custom?r===t.nData.nlead&&l===t.nData.nend:-1!==r.indexOf(t.nData.nlead)&&-1!==l.indexOf(t.nData.nend),n=s?t.nData.isPercent:t.pData.isPercent,o=o.replace(mt,""),c&&(o+=c),a=+o,("percent"===t.type||n)&&(a/=100),(t.custom||t.fractionDigits)&&(a=parseFloat(a.toFixed(t.custom?s?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),t.maximumFractionDigits&&(a=this.convertMaxFracDigits(o,t,a,s)),s&&(a*=-1),a}}static convertMaxFracDigits(e,t,i,s){let n=e.split(".");return n[1]&&n[1].length>t.maximumFractionDigits&&(i=+i.toFixed(t.custom?s?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.maximumFractionDigits)),i}}.numberParser(this.getCulture(),e||{format:"N"},yt)}formatNumber(e,t){return this.getNumberFormat(t)(e)}formatDate(e,t){return this.getDateFormat(t)(e)}parseDate(e,t){return this.getDateParser(t)(e)}parseNumber(e,t){return this.getNumberParser(t)(e)}getDatePattern(e,t){return Dt.getActualDateTimeFormat(this.getCulture(),e,yt,t)}getNumberPattern(e,t){return Dt.getActualNumberFormat(this.getCulture(),e,yt,t)}getFirstDayOfWeek(){return Dt.getWeekData(this.getCulture(),yt)}getCulture(){return this.culture||vt}}function Et(e,t){let i=Dt.getDependables(yt,e,"",!0)[wt[0]];const s=Dt.getDependables(yt,e,"")[wt[1]],n=Pe("defaultNumberingSystem",i),o=Pe("symbols-numberSystem-"+n,i),r=Dt.getSymbolPattern(t||"decimal",n,i,!1);return Ve(o,Dt.getFormatData(r,!0,"",!0),{dateSeparator:Dt.getDateSeparator(s)})}function xt(e){return Dt.getDependables(yt,"",e,!1)[wt[1]]}const Rt={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};var Dt;!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;const t=/[0-9]/g;e.defaultCurrency="$";const i=["infinity","nan","group","decimal"],s=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,n={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};e.dateConverterMapper=/dddd|ddd/gi,e.islamicRegex=/^islamic/;const o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;const r={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function l(t,i,s,n,o){let r;const l=s||"date";if(o)r=d({skeleton:t},o).format||d({skeleton:"d"},"en-US").format;else{if(-1!==e.basicPatterns.indexOf(t)){if(r=Pe(l+"Formats."+t,i),"dateTime"===l){const e=Pe("dateFormats."+t,i),s=Pe("timeFormats."+t,i);r=r.replace("{1}",e).replace("{0}",s)}}else r=Pe("dateTimeFormats.availableFormats."+t,i);je(r)&&"yMd"===t&&(r="M/d/y")}return r}function a(t,i,s,n){const o={},r=s||"gregorian";return o.parserObject=Je.getMainObject(t,i)||e.defaultObject,n?o.numericObject=Pe("numbers",o.parserObject):o.dateObject=Pe("dates.calendars."+r,o.parserObject),o}function h(e,t,i,s){return Pe(e+"Formats-numberSystem-"+t+(s?".accounting":".standard"),i)||(s?Pe(e+"Formats-numberSystem-"+t+".standard",i):"")}function c(t){return t.match(e.dateConverterMapper),t}function d(e,t){const i=e.format||e.skeleton;let s=Pe((t||"en-US")+"."+i,Rt);return s||(s=Pe("en-US."+i,Rt)),s&&(s=c(s),e.format=s.replace(/tt/,"a")),e}function p(t){const i=t.match(e.formatRegex),s={},n=i[1].toUpperCase();return s.isAccount="A"===n,s.type=e.patternMatcher[n],t.length>1&&(s.fractionDigits=parseInt(i[2],10)),s}function u(i,s,n,o){const r=o?{}:{nlead:"",nend:""},l=i.match(e.customRegex);if(l){o||(r.nlead=m(l[1],n),r.nend=m(l[10],n),r.groupPattern=l[4]);const e=l[7];if(e&&s){const i=e.match(t);r.minimumFraction=qe(i)?0:i.length,r.maximumFraction=e.length-1}}return r}function m(t,i){return t?t.replace(e.defaultCurrency,i):""}function g(e,t,i){return Pe("currencies."+t+(i?"."+i:".symbol"),e)||Pe("currencies."+t+".symbol-alt-narrow",e)||"$"}function f(t,s,n){const o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},r=t.match(e.customRegex);if(qe(r)||""===r[5]&&"N/A"!==t)return o.type=void 0,o;o.nlead=r[1],o.nend=r[10];let l=r[6];o.useGrouping=-1!==l.indexOf(","),l=l.replace(/,/g,"");const a=r[7];if(-1!==l.indexOf("0")&&(o.minimumIntegerDigits=l.length-l.indexOf("0")),qe(a)||(o.minimumFractionDigits=a.lastIndexOf("0"),o.maximumFractionDigits=a.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),qe(s)?Ve(o,b([o.nlead,o.nend],"%","%")):(Ve(o,b([o.nlead,o.nend],"$",s.currencySymbol)),o.isCurrency||Ve(o,b([o.nlead,o.nend],"%",s.percentSymbol))),!qe(n)){const e=h(o.type,s.numberMapper.numberSystem,n,!1);o.useGrouping&&(o.groupSeparator=s.numberMapper.numberSymbols[i[2]],o.groupData=ht.getGroupingDetails(e.split(";")[0])),o.nlead=o.nlead.replace(/'/g,""),o.nend=o.nend.replace(/'/g,"")}return o}function b(e,t,i){const s={nlead:e[0],nend:e[1]};for(let n=0;n<2;n++){const o=e[n],l=o.indexOf(t);if(-1!==l&&(l<o.indexOf("'")||l>o.lastIndexOf("'"))){s[r[n]]=o.substr(0,l)+i+o.substr(l+1),s[r[t]]=!0,s.type=s.isCurrency?"currency":"percent";break}}return s}function y(e,t,i){e+=".";for(let s=0;s<t;s++)e+="0";if(t<i){const s=i-t;for(let t=0;t<s;t++)e+="#"}return e}function v(e,t){const i=e.split(".");let s="";for(let n=0;n<t;n++)s+="0";return i[1]?s+"."+i[1]:s}function C(e){const t=e.split(".");let i=t[0];const s=3-i.length%3;i=(s&&1===s?"#":2===s?"##":"")+i,e="";for(let n=i.length-1;n>0;n-=3)e=","+i[n-2]+i[n-1]+i[n]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=l,e.getDependables=a,e.getSymbolPattern=h,e.ConvertDateToWeekFormat=c,e.compareBlazorDateFormats=d,e.getProperNumericSkeleton=p,e.getFormatData=u,e.changeCurrencySymbol=m,e.getCurrencySymbol=g,e.customFormat=function(e,t,i){const s={},n=e.split(";"),o=["pData","nData","zeroData"];for(let r=0;r<n.length;r++)s[o[r]]=f(n[r],t,i);return qe(s.nData)&&(s.nData=Ve({},s.pData),s.nData.nlead=qe(t)?"-"+s.nData.nlead:t.minusSymbol+s.nData.nlead),s},e.customNumberFormat=f,e.isCurrencyPercent=b,e.getDateSeparator=function(e){const t=(Pe("dateFormats.short",e)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return t?t[1]:"/"},e.getActualDateTimeFormat=function(e,t,i,o){const r=a(i,e,t.calendar);let h=t.format||l(t.skeleton,r.dateObject,t.type);if(o){if(h=h.replace(s,e=>n[e]),-1!==h.indexOf("z")){const e=h.match(/z/g).length;let t;const s={timeZone:{}};s.numMapper=Je.getNumberMapper(r.parserObject,Je.getNumberingSystem(i)),s.timeZone=Pe("dates.timeZoneNames",r.parserObject);const n=(new Date).getTimezoneOffset();let o=e<4?"+H;-H":s.timeZone.hourFormat;o=o.replace(/:/g,s.numMapper.timeSeparator),0===n?t=s.timeZone.gmtZeroFormat:(t=rt.getTimeZoneValue(n,o),t=s.timeZone.gmtFormat.replace(/\{0\}/,t)),h=h.replace(/[z]+/,'"'+t+'"')}h=h.replace(/ $/,"")}return h},e.getActualNumberFormat=function(t,i,s,n){const o=a(s,t,"",!0),r={custom:!0};let l;const c={},d=(i.format||"").match(e.currencyFormatRegex),m=(e.formatRegex.test(i.format)&&p(i.format||"N"),{});if(d){m.numberMapper=Je.getNumberMapper(o.parserObject,Je.getNumberingSystem(s),!0);const e=g(o.numericObject,i.currency||Ct,i.altSymbol);let t=h("currency",m.numberMapper.numberSystem,o.numericObject,/a/i.test(i.format));t=t.replace(/\u00A4/g,e);const n=t.split(";");c.hasNegativePattern=n.length>1,c.nData=u(n[1]||"-"+n[0],!0,e),c.pData=u(n[0],!1,e),d[2]||i.minimumFractionDigits||i.maximumFractionDigits||(l=u(t.split(";")[0],!0,"",!0).minimumFraction)}let f;if(e.formatRegex.test(i.format)||!i.format){if(Ve(r,p(i.format||"N")),r.custom=!1,f="###0",r.fractionDigits||i.minimumFractionDigits||i.maximumFractionDigits||l){const e=0;r.fractionDigits&&(i.minimumFractionDigits=i.maximumFractionDigits=r.fractionDigits),f=y(f,l||r.fractionDigits||i.minimumFractionDigits||e,i.maximumFractionDigits||e)}if(i.minimumIntegerDigits&&(f=v(f,i.minimumIntegerDigits)),i.useGrouping&&(f=C(f)),"currency"===r.type){const e=f;f=c.pData.nlead+e+c.pData.nend,c.hasNegativePattern&&(f+=";"+c.nData.nlead+e+c.nData.nend)}"percent"!==r.type||(f+=" %")}else f=i.format.replace(/'/g,'"');return Object.keys(m).length>0&&(f=n?f:function(e,t){if(-1!==e.indexOf(",")){let i=e.split(",");e=i[0]+Pe("numberMapper.numberSymbols.group",t)+i[1].replace(".",Pe("numberMapper.numberSymbols.decimal",t))}else e=e.replace(".",Pe("numberMapper.numberSymbols.decimal",t));return e}(f,m)),f},e.fractionDigitsPattern=y,e.minimumIntegerPattern=v,e.groupingPattern=C,e.getWeekData=function(e,t){let i="sun";const s=Pe("supplemental.weekData.firstDay",t);let n=e;return/en-/.test(n)&&(n=n.slice(3)),n=n.slice(0,2).toUpperCase()+n.substr(2),s&&(i=s[n]||"sun"),o[i]},e.replaceBlazorCurrency=function(e,t,i){const s=Pe(i||"",Ze);if(t!==s)for(const n of e)n.nend=n.nend.replace(t,s),n.nlead=n.nlead.replace(t,s)},e.getWeekOfYear=function(e){const t=new Date(e.getFullYear(),0,1);let i,s=t.getDay();s=s>=0?s:s+7;const n=Math.floor((e.getTime()-t.getTime()-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)+1;if(s<4){if(i=Math.floor((n+s-1)/7)+1,i>52){let e=new Date(this.getFullYear()+1,0,1).getDay();e=e>=0?e:e+7,i=e<4?1:53}}else i=Math.floor((n+s-1)/7);return i}}(Dt||(Dt={}));const Tt=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,Mt=/msie|trident/i,It=/Trident\/7\./,kt=/(ipad|iphone|ipod touch)/i,Ft=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,At=/android/i,Ot=/trident|windows phone|edge/i,Lt=/(version)[ /]([\w.]+)/i,Pt={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});let zt=(()=>{class e{static extractBrowserDetail(){const t={culture:{}},i=Object.keys(Pt);let s=[];for(const n of i)if(s=e.userAgent.match(Pt[n]),s){if(t.name="opr"===s[1].toLowerCase()?"opera":s[1].toLowerCase(),t.name="crios"===s[1].toLowerCase()?"chrome":t.name,t.version=s[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(It)){t.name="msie";break}const i=e.userAgent.match(Lt);"safari"===t.name&&i&&(t.version=i[2]);break}return t}static getEvent(t){const i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?i[t].isPointer:e.isTouch?i[t].isTouch+(e.isDevice?"":" "+i[t].isDevice):i[t].isDevice}static getTouchStartEvent(){return e.getEvent("start")}static getTouchEndEvent(){return e.getEvent("end")}static getTouchMoveEvent(){return e.getEvent("move")}static getTouchCancelEvent(){return e.getEvent("cancel")}static getValue(t,i){const s=window.browserDetails;return void 0===s[t]?s[t]=i.test(e.userAgent):("MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===e.isTouch&&(s.isIos=!0,s.isDevice=!0,s.isTouch=!0,s.isPointer=!0),s[t])}static set userAgent(t){e.uA=t,window.browserDetails={}}static get userAgent(){return e.uA}static get info(){return je(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info}static get isIE(){return e.getValue("isIE",Mt)}static get isTouch(){return je(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch}static get isPointer(){return je(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer}static get isMSPointer(){return je(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer}static get isDevice(){return e.getValue("isDevice",Tt)}static get isIos(){return e.getValue("isIos",kt)}static get isIos7(){return e.getValue("isIos7",Ft)}static get isAndroid(){return e.getValue("isAndroid",At)}static get isWebView(){return je(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(je(window.cordova)&&je(window.PhoneGap)&&je(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView}static get isWindows(){return e.getValue("isWindows",Ot)}static get touchStartEvent(){return je(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent}static get touchMoveEvent(){return je(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent}static get touchEndEvent(){return je(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent}static get touchCancelEvent(){return je(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent}}return e.uA="undefined"!=typeof navigator?navigator.userAgent:"",e})();class Bt{static addOrGetEventData(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])}static add(e,t,i,s,n){const o=Bt.addOrGetEventData(e);let r;r=n?Ge(i,n):i,s&&(r=r.bind(s));const l=t.split(" ");for(let a=0;a<l.length;a++)o.push({name:l[a],listener:i,debounce:r}),zt.isIE?e.addEventListener(l[a],r):e.addEventListener(l[a],r,{passive:!1});return r}static remove(e,t,i){const s=Bt.addOrGetEventData(e),n=t.split(" ");for(let o=0;o<n.length;o++){let t,r=-1;s&&0!==s.length&&s.some((e,s)=>e.name===n[o]&&e.listener===i&&(r=s,t=e.debounce,!0)),-1!==r&&s.splice(r,1),t&&e.removeEventListener(n[o],t)}}static clearEvents(e){let t,i;t=Bt.addOrGetEventData(e),i=Ve([],i,t);for(let s=0;s<i.length;s++)e.removeEventListener(i[s].name,i[s].debounce),t.shift()}static trigger(e,t,i){const s=Bt.addOrGetEventData(e);for(const n of s)n.name===t&&n.debounce.call(this,i)}}const Ht=/^svg|^path|^g/;function Nt(e,t){const i=Ht.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return void 0===t||(i.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(i.className=t.className),void 0!==t.id&&(i.id=t.id),void 0!==t.styles&&i.setAttribute("style",t.styles),void 0!==t.attrs&&Xt(i,t.attrs)),i}function Vt(e,t){const i=jt(t);for(const s of e)for(const e of i)if(Be(s)){const t=Pe("attributes.className",s);qe(t)?ze("attributes.className",e,s):new RegExp("\\b"+e+"\\b","i").test(t)||ze("attributes.className",t+" "+e,s)}else s.classList.contains(e)||s.classList.add(e);return e}function qt(e,t){const i=jt(t);for(const s of e){const e=Be(s);if(e?Pe("attributes.className",s):""!==s.className)for(const t of i)if(e){const e=Pe("attributes.className",s).split(" "),i=e.indexOf(t);-1!==i&&e.splice(i,1),ze("attributes.className",e.join(" "),s)}else s.classList.remove(t)}return e}function jt(e){let t=[];return"string"==typeof e?t.push(e):t=e,t}function Wt(e){return""===e.style.visibility&&e.offsetWidth>0}function Gt(e,t,i){const s=document.createDocumentFragment();for(const n of e)s.appendChild(n);return t.insertBefore(s,t.firstElementChild),i&&Ut(t),e}function _t(e,t,i){const s=document.createDocumentFragment();for(const n of e)s.appendChild(n);return t.appendChild(s),i&&Ut(t),e}function Ut(e){e.querySelectorAll("script").forEach(e=>{const t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),Kt(t)})}function Kt(e){const t=e.parentNode;if(t)return t.removeChild(e)}function Yt(e){const t=e.parentNode;Bt.clearEvents(e),t.removeChild(e)}function Xt(e,t){const i=Object.keys(t),s=e;for(const n of i)if(Be(s)){let e=n;"tabindex"===n&&(e="tabIndex"),s.attributes[e]=t[n]}else s.setAttribute(n,t[n]);return s}function Qt(e,t=document,i){return e=Jt(e),t.querySelector(e)}function $t(e,t=document,i){return e=Jt(e),t.querySelectorAll(e)}function Jt(e){const t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(e.match(/#[0-9]/g)||e.match(t)){const i=e.split(",");for(let e=0;e<i.length;e++){const s=i[e].split(" ");for(let e=0;e<s.length;e++)if(s[e].indexOf("#")>-1&&!s[e].match(/\[.*\]/)){const i=s[e].split("#");if(i[1].match(/^\d/)||i[1].match(t)){const t=s[e].split(".");t[0]=t[0].replace(/#/,"[id='")+"']",s[e]=t.join(".")}}i[e]=s.join(" ")}return i.join(",")}return e}function Zt(e,t){let i=e;if("function"==typeof i.closest)return i.closest(t);for(;i&&1===i.nodeType;){if(ii(i,t))return i;i=i.parentNode}return null}function ei(e,t){void 0!==t&&Object.keys(t).forEach(i=>{e.style[i]=t[i]})}function ti(e,t,i){Vt([e],t),qt([e],i)}function ii(e,t){let i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return i?i.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}const si=new RegExp("]");class ni{constructor(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=()=>{},this.childChangedProperties={},this.modelObserver=new ft(this),je(t)||(this.element="string"==typeof t?document.querySelector(t):t,qe(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),je(e)||this.setProperties(e,!0),this.isDestroyed=!1}setProperties(e,t){const i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,Ne(this,e),!0!==t&&(Ne(this.changedProperties,e),this.dataBind()),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i}static callChildDataBind(e,t){const i=Object.keys(e);for(const s of i)if(t[s]instanceof Array)for(const e of t[s])void 0!==e.dataBind&&e.dataBind();else t[s].dataBind()}clearChanges(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}}dataBind(){if(ni.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){const e=this.isProtectedOnChange,t=this.changedProperties,i=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(t,i),this.isProtectedOnChange=e}}serverDataBind(e){}saveChanges(e,t,i){this.isProtectedOnChange||(this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=function(e){let t;const i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);let s="ej2"+function(e){let t="";for(let i=0;i<5;i++)t+=(i?",":"")+e[i];return t}(i),n=i=>{i.source===window&&"string"==typeof i.data&&i.data.length<=32&&i.data===s&&(e(),t())};return window.addEventListener("message",n,!1),window.postMessage(s,"*"),t=()=>{window.removeEventListener("message",n),e=n=s=void 0}}(this.dataBind.bind(this)))}addEventListener(e,t){this.modelObserver.on(e,t)}removeEventListener(e,t){this.modelObserver.off(e,t)}trigger(e,t,i,s){if(!0!==this.isDestroyed){const n=this.isProtectedOnChange;this.isProtectedOnChange=!1;let o=this.modelObserver.notify(e,t,i,s);if(si.test(e)){const n=Pe(e,this);if(n)if(window.Blazor){const e=n.call(this,t);e&&"function"==typeof e.then?i?e.then(e=>{i&&(e="string"==typeof e&&this.modelObserver.isJson(e)?JSON.parse(e):e,i.call(this,e))}).catch(e=>{s&&(e="string"==typeof e&&this.modelObserver.isJson(e)?JSON.parse(e):e,s.call(this,e))}):o=e:i&&i.call(this,t)}else n.call(this,t),i&&i.call(this,t);else i&&i.call(this,t)}return this.isProtectedOnChange=n,o}}addInstance(){const e="e-"+this.getModuleName().toLowerCase();Vt([this.element],["e-lib",e]),qe(this.element.ej2_instances)?ze("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)}destroy(){this.element.ej2_instances=this.element.ej2_instances.filter(e=>e!==this),qt([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&qt([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0}}function oi(e,t,i,s){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof s||(e.properties[t]=Le(s,[e,t,i])),e.properties[t]}function ri(e,t,i,s,n,o){const r=[],l=i?i.length:0;for(let a=0;a<l;a++){let l=s;if(o&&(l=s(i[a],e)),n){const s=Le(l,[e,t,{},!0]);s.setProperties(i[a],!0),r.push(s)}else r.push(Le(l,[e,t,i[a],!1]))}return r}function li(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=e),this.properties[t]}}function ai(e,t){return function(i){if(this.properties[t]!==i){let s=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,i,s),this.properties[t]=i}}}function hi(e,t,i){return function(){return oi(this,t,e,i)}}function ci(e,t,i){return function(s){oi(this,t,e,i).setProperties(s)}}function di(e,t,i){return function(){if(!this.properties.hasOwnProperty(t)){const s=ri(this,t,e,i,!1);this.properties[t]=s}const s=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[t].hasOwnProperty("push")||s||["push","pop"].forEach(e=>{const i={value:ui(e,t,0,this.properties[t]).bind(this),configurable:!0};Object.defineProperty(this.properties[t],e,i)}),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[t],"isComplexArray",{value:!0}),this.properties[t]}}function pi(e,t,i){return function(s){this.isComplexArraySetter=!0;const n=ri(this,t,e,i,!1),o=ri(this,t,s,i,!0);this.isComplexArraySetter=!1,this.saveChanges(t,o,n),this.properties[t]=o}}function ui(e,t,i,s){return function(...i){const n=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(e){case"push":for(let o=0;o<i.length;o++){Array.prototype[e].apply(s,[i[o]]);const t=mi(n+(s.length-1),i[o],!this.controlParent,e);this.serverDataBind(t,i[o],!1,e)}break;case"pop":Array.prototype[e].apply(s);let t=mi(n+s.length,null,!this.controlParent,e);this.serverDataBind(t,{ejsAction:"pop"},!1,e)}return s}}function mi(e,t,i,s){let n=e;return i&&(n={},n[e]=t,t&&"object"==typeof t)&&(n[e].ejsAction=s),n}function gi(e){return(t,i)=>{const s={set:ai(e,i),get:li(e,i),enumerable:!0,configurable:!0};Object.defineProperty(t,i,s),Ci(t,i,"prop",e)}}function fi(e,t){return(i,s)=>{const n={set:ci(e,s,t),get:hi(e,s,t),enumerable:!0,configurable:!0};Object.defineProperty(i,s,n),Ci(i,s,"complexProp",e,t)}}function bi(e,t){return(i,s)=>{const n={set:pi(e,s,t),get:di(e,s,t),enumerable:!0,configurable:!0};Object.defineProperty(i,s,n),Ci(i,s,"colProp",e,t)}}function yi(){return(e,t)=>{const i={set:function(e){const i=this.properties[t];if(i!==e){const s=wi(this,t);!1===je(i)&&s.context.removeEventListener(s.prefix,i),s.context.addEventListener(s.prefix,e),this.properties[t]=e}},get:li(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),Ci(e,t,"event")}}function vi(e){}function Ci(e,t,i,s,n){je(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[i+"s"].push({propertyName:t,defaultValue:s,type:n}),e.propList[i+"Names"].push(t)}function wi(e,t){if(!1===e.hasOwnProperty("parentObj"))return{context:e,prefix:t};{const i=Pe("propName",e);return i&&(t=i+"-"+t),wi(Pe("parentObj",e),t)}}var Si,Ei=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let xi=(()=>{let e=Si=class extends ni{constructor(e){super(e,void 0),this.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"}}animate(e,t){const i=this.getModel(t=t||{});if("string"==typeof e){const t=Array.prototype.slice.call($t(e,document));for(const e of t)i.element=e,Si.delayAnimation(i)}else i.element=e,Si.delayAnimation(i)}static stop(e,t){e.style.animation="",e.removeAttribute("e-animate");const i=e.getAttribute("e-animation-id");if(i){const t=parseInt(i,10);cancelAnimationFrame(t),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)}static delayAnimation(e){e.delay?setTimeout(()=>{Si.applyAnimation(e)},e.delay):Si.applyAnimation(e)}static applyAnimation(e){e.timeStamp=0;let t=0,i=0,s=0;const n=e.duration;e.element.setAttribute("e-animate","true");const o=r=>{try{if(r){s=0===s?r:s,e.timeStamp=r+e.timeStamp-s,s=r,!t&&e.begin&&e.begin.call(this,e),t+=1;const l=e.timeStamp/t;e.timeStamp<n&&e.timeStamp+l<n&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(this,e),requestAnimationFrame(o)):(cancelAnimationFrame(i),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(this,e))}else i=requestAnimationFrame(o),e.element.setAttribute("e-animation-id",i.toString())}catch(l){cancelAnimationFrame(i),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(this,l)}};o()}getModel(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}}onPropertyChanged(e,t){}getModuleName(){return"animation"}destroy(){}};return Ei([gi("FadeIn")],e.prototype,"name",void 0),Ei([gi(400)],e.prototype,"duration",void 0),Ei([gi("ease")],e.prototype,"timingFunction",void 0),Ei([gi(0)],e.prototype,"delay",void 0),Ei([yi()],e.prototype,"progress",void 0),Ei([yi()],e.prototype,"begin",void 0),Ei([yi()],e.prototype,"end",void 0),Ei([yi()],e.prototype,"fail",void 0),e=Si=Ei([vi],e),e})();function Ri(e,t,i){const s=function(e){return{selector:e&&e.selector?e.selector:null,ignore:e&&e.ignore?e.ignore:null,rippleFlag:e&&e.rippleFlag,isCenterRipple:e&&e.isCenterRipple,duration:e&&e.duration?e.duration:350}}(t);return!1===s.rippleFlag||void 0===s.rippleFlag&&!ki?Function:(e.setAttribute("data-ripple","true"),Bt.add(e,"mousedown",Di,{parent:e,rippleOptions:s}),Bt.add(e,"mouseup",Ti,{parent:e,rippleOptions:s,done:i}),Bt.add(e,"mouseleave",Mi,{parent:e,rippleOptions:s}),zt.isPointer&&Bt.add(e,"transitionend",Mi,{parent:e,rippleOptions:s}),()=>{e.removeAttribute("data-ripple"),Bt.remove(e,"mousedown",Di),Bt.remove(e,"mouseup",Ti),Bt.remove(e,"mouseleave",Mi),Bt.remove(e,"transitionend",Mi)})}function Di(e){const t=e.target,i=this.rippleOptions.selector,s=i?Zt(t,i):t;if(!s||this.rippleOptions&&Zt(t,this.rippleOptions.ignore))return;const n=s.getBoundingClientRect(),o=e.pageX-document.body.scrollLeft,r=e.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),l=Math.max(Math.abs(o-n.left),Math.abs(o-n.right)),a=Math.max(Math.abs(r-n.top),Math.abs(r-n.bottom)),h=Math.sqrt(l*l+a*a);let c=2*h+"px",d=o-n.left-h,p=r-n.top-h;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(d=0,p=0,c="100%"),s.classList.add("e-ripple");const u=Nt("div",{className:"e-ripple-element",styles:"width: "+c+";height: "+c+";left: "+d+"px;top: "+p+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});s.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)",s!==this.parent&&Bt.add(s,"mouseleave",Mi,{parent:this.parent,rippleOptions:this.rippleOptions})}function Ti(e){Ii(e,this)}function Mi(e){Ii(e,this)}function Ii(e,t){const i=t.rippleOptions.duration,s=e.target,n=t.rippleOptions.selector,o=n?Zt(s,n):s;if(!o||o&&-1===o.className.indexOf("e-ripple"))return;const r=$t(".e-ripple-element",o),l=r[r.length-1];l&&(l.style.opacity="0.5"),t.parent!==o&&Bt.remove(o,"mouseleave",Mi),setTimeout(()=>{l&&l.parentNode&&l.parentNode.removeChild(l),o.getElementsByClassName("e-ripple-element").length||o.classList.remove("e-ripple"),t.done&&t.done(e)},i)}let ki=!1;class Fi{constructor(e){this.loadedModules=[],this.parent=e}inject(e,t){const i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(let s=0;s<i;s++){const i=e[s];for(const e of t){const t=i.member;if(e.prototype.getModuleName()===i.member&&!this.isModuleLoaded(t)){const s=Le(e,i.args),n=this.getMemberName(t);ze(n,i.isProperty?e:s,this.parent);const o=i;o.member=n,this.loadedModules.push(o)}}}}else this.clean()}clean(){for(const e of this.loadedModules)e.isProperty||Pe(e.member,this.parent).destroy();this.loadedModules=[]}clearUnusedModule(e){const t=e.map(e=>this.getMemberName(e.member)),i=this.loadedModules.filter(e=>-1===t.indexOf(e.member));for(const s of i)s.isProperty||Pe(s.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(s),1),delete this.parent[s.member]}getMemberName(e){return e[0].toLowerCase()+e.substring(1)+"Module"}isModuleLoaded(e){for(const t of this.loadedModules)if(t.member===this.getMemberName(e))return!0;return!1}}class Ai{constructor(e,t,i,s){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=()=>{},this.callChildDataBind=Pe("callChildDataBind",ni),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=s,this.setProperties(i,!0)}updateChange(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)}updateTimeOut(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{const e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=()=>{clearTimeout(e)}}}clearChanges(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}}setProperties(e,t){!0===t?(Ne(this,e),this.updateChange(!1,this.propName),this.clearChanges()):Ne(this,e)}dataBind(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){const e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(ze(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),ze(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()}saveChanges(e,t,i,s){this.controlParent.isProtectedOnChange||(s||this.serverDataBind(e,t,!0),this.oldProperties[e]=i,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())}serverDataBind(e,t,i,s){}getParentKey(e){let t="",i=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);let s=this.parentObj[this.propName].length;s=e?s:s>0?s-1:0,t=-1!==t?"-"+t:"-"+s,i+=t}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+t),i}}var Oi=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let Li,Pi=0,zi=0,Bi=(()=>{let e=class extends ni{constructor(e,t){super(e,t),this.randomId=function(){if("undefined"==typeof window)return;let e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}(),this.isStringTemplate=!1,this.needsID=!1,this.isReactHybrid=!1,qe(this.enableRtl)&&this.setProperties({enableRtl:!1},!0),qe(this.locale)&&this.setProperties({locale:vt},!0),this.moduleLoader=new Fi(this),this.localObserver=new ft(this),bt.on("notifyExternalChange",this.detectFunction,this,this.randomId),je(t)||this.appendTo()}requiredModules(){return[]}destroy(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(qt([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),super.destroy(),this.moduleLoader.clean(),bt.off("notifyExternalChange",this.detectFunction,this.randomId)))}refresh(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new ft(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1}accessMount(){this.mount&&!this.isReactHybrid&&this.mount()}getRootElement(){return this.isReactHybrid?this.actualElement:this.element}getLocalData(){const e=this.getModuleName()+this.element.id;return window.localStorage.getItem(e)}appendTo(e){if(qe(e)||"string"!=typeof e?qe(e)||(this.element=e):this.element=Qt(e,document),!qe(this.element)){const e="e-"+this.getModuleName().toLowerCase();Vt([this.element],["e-control",e]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));const t=Pe("ej2_instances",this.element);t&&-1!==t.indexOf(this)||super.addInstance(),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}}renderComplete(e){this.isRendered=!0}dataBind(){this.injectModules(),super.dataBind()}on(e,t,i){if("string"==typeof e)this.localObserver.on(e,t,i);else for(const s of e)this.localObserver.on(s.event,s.handler,s.context)}off(e,t){if("string"==typeof e)this.localObserver.off(e,t);else for(const i of e)this.localObserver.off(i.event,i.handler)}notify(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)}getInjectedModules(){return this.injectedModules}static Inject(...e){this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(let t=0;t<e.length;t++)-1===this.prototype.injectedModules.indexOf(e[t])&&this.prototype.injectedModules.push(e[t])}createElement(e,t,i){return Nt(e,t)}triggerStateChange(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})}injectModules(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)}detectFunction(e){const t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])}mergePersistData(){let e;e=window.localStorage.getItem(this.getModuleName()+this.element.id),qe(e)||""===e||this.setProperties(JSON.parse(e),!0)}setPersistData(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())}renderReactTemplates(){}clearTemplate(e,t){}getUniqueID(e){return this.isHistoryChanged()&&(Pi=0),Li=this.pageID(location.href),zi=history.length,e+"_"+Li+"_"+Pi++}pageID(e){let t=0;if(0===e.length)return t;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return Math.abs(t)}isHistoryChanged(){return Li!==this.pageID(location.href)||zi!==history.length}addOnPersist(e){const t={};for(const i of e){let e;e=Pe(i,this),je(e)||ze(i,this.getActualProperties(e),t)}return JSON.stringify(t,(e,t)=>this.getActualProperties(t))}getActualProperties(e){return e instanceof Ai?Pe("properties",e):e}ignoreOnPersist(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))}iterateJsonProperties(e,t){const i={};for(const s of Object.keys(e))if(-1===t.indexOf(s)){const n=e[s];if("object"!=typeof n||n instanceof Array)i[s]=n;else{const e=t.filter(e=>new RegExp(s+".").test(e)).map(e=>e.replace(s+".",""));i[s]=this.iterateJsonProperties(this.getActualProperties(n),e)}}return i}};return Oi([gi(!1)],e.prototype,"enablePersistence",void 0),Oi([gi()],e.prototype,"enableRtl",void 0),Oi([gi()],e.prototype,"locale",void 0),e=Oi([vi],e),e})();"undefined"!=typeof window&&window.addEventListener("popstate",()=>{Pi=0});var Hi,Ni=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const Vi={left:0,top:0,bottom:0,right:0},qi={isDragged:!1};let ji=(()=>{class e extends Ai{}return Ni([gi(0)],e.prototype,"left",void 0),Ni([gi(0)],e.prototype,"top",void 0),e})(),Wi=(()=>{let e=Hi=class extends ni{constructor(e,t){super(t,e),this.dragLimit=Hi.getDefaultPosition(),this.borderWidth=Hi.getDefaultPosition(),this.padding=Hi.getDefaultPosition(),this.diffX=0,this.prevLeft=0,this.prevTop=0,this.dragProcessStarted=!1,this.tapHoldTimer=0,this.externalInitialize=!1,this.diffY=0,this.parentScrollX=0,this.parentScrollY=0,this.droppables={},this.bind()}bind(){this.toggleEvents(),zt.isIE&&Vt([this.element],"e-block-touch"),this.droppables[this.scope]={}}static getDefaultPosition(){return Ve({},Vi)}toggleEvents(e){let t;je(this.handle)||(t=Qt(this.handle,this.element));let i=this.enableTapHold&&zt.isDevice&&zt.isTouch?this.mobileInitialize:this.initialize;e?Bt.remove(t||this.element,zt.touchStartEvent,i):Bt.add(t||this.element,zt.touchStartEvent,i,this)}mobileInitialize(e){let t=e.currentTarget;this.tapHoldTimer=setTimeout(()=>{this.externalInitialize=!0,this.removeTapholdTimer(),this.initialize(e,t)},this.tapHoldThreshold),Bt.add(document,zt.touchMoveEvent,this.removeTapholdTimer,this),Bt.add(document,zt.touchEndEvent,this.removeTapholdTimer,this)}removeTapholdTimer(){clearTimeout(this.tapHoldTimer),Bt.remove(document,zt.touchMoveEvent,this.removeTapholdTimer),Bt.remove(document,zt.touchEndEvent,this.removeTapholdTimer)}getScrollableParent(e,t){return qe(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY),this.tempScrollHeight=e.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),this.tempScrollWidth=e.scrollWidth),qe(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)}getScrollableValues(){this.parentScrollX=0,this.parentScrollY=0,this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")}initialize(e,t){if(this.currentStateTarget=e.target,this.isDragStarted())return;if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){let t=this.abort;"string"==typeof t&&(t=[t]);for(let i=0;i<t.length;i++)if(!qe(Zt(e.target,t[i])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!je(e.changedTouches)&&"touchstart"!==e.type&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");let i=this.getCoordinates(e);if(this.initialPosition={x:i.pageX,y:i.pageY},!this.clone){let t=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=i.pageX-(t.left+this.parentScrollX),this.relativeYPosition=i.pageY-(t.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(Bt.add(document,zt.touchMoveEvent,this.intDragStart,this),Bt.add(document,zt.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==e.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,Bt.trigger(document.documentElement,zt.touchStartEvent,e)}intDragStart(e){this.removeTapholdTimer();let t=!je(e.changedTouches);if(t&&1!==e.changedTouches.length)return;t&&e.preventDefault();let i,s=this.getCoordinates(e),n=getComputedStyle(this.element);this.margin={left:parseInt(n.marginLeft,10),top:parseInt(n.marginTop,10),right:parseInt(n.marginRight,10),bottom:parseInt(n.marginBottom,10)};let o=this.element;if(this.clone&&this.dragTarget){let t=Zt(e.target,this.dragTarget);qe(t)||(o=t)}this.isReplaceDragEle&&(o=this.currentStateCheck(e.target,o)),this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(e,this.isDragScroll);let r=this.initialPosition.x-s.pageX,l=this.initialPosition.y-s.pageY;if(Math.sqrt(r*r+l*l)>=this.distance||this.externalInitialize){let t=this.getHelperElement(e);if(!t||qe(t))return;let s=this.helperElement=t;if(this.parentClientRect=this.calculateParentPosition(s.offsetParent),this.dragStart){let t={event:e,element:o,target:this.getProperTargetElement(e),bindEvents:null,dragElement:s};this.trigger("dragStart",t)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();let n=getComputedStyle(o),r=parseFloat(n.marginTop);this.clone&&0!==r&&(i.top+=r),this.enableScrollHandler&&!this.clone&&(i.top-=this.parentScrollY,i.left-=this.parentScrollX);let l=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});this.dragElePosition={top:i.top,left:i.left},ei(s,this.getDragPosition({position:"absolute",left:l.left,top:l.top})),Bt.remove(document,zt.touchMoveEvent,this.intDragStart),Bt.remove(document,zt.touchEndEvent,this.intDestroy),this.bindDragEvents(s)}}bindDragEvents(e){Wt(e)?(Bt.add(document,zt.touchMoveEvent,this.intDrag,this),Bt.add(document,zt.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))}elementInViewport(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)this.top+=(e=e.offsetParent).offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth}getProcessedPositionValue(e){return this.queryPositionInfo?this.queryPositionInfo(e):e}calculateParentPosition(e){if(qe(e))return{left:0,top:0};let t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}}intDrag(e){if(!je(e.changedTouches)&&1!==e.changedTouches.length)return;let t,i;this.position=this.getMousePosition(e,this.isDragScroll);let s=this.getDocumentWidthHeight("Height");s<this.position.top&&(this.position.top=s);let n=this.getDocumentWidthHeight("Width");if(n<this.position.left&&(this.position.left=n),this.drag){let t=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:t})}let o=this.checkTargetElement(e);if(o.target&&o.instance){let t=!0;this.hoverObject&&(this.hoverObject.instance!==o.instance?this.triggerOutFunction(e,o):t=!1),t&&(o.instance.dragData[this.scope]=this.droppables[this.scope],o.instance.intOver(e,o.target),this.hoverObject=o)}else this.hoverObject&&this.triggerOutFunction(e,o);let r=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);let l=this.parentClientRect.left,a=this.parentClientRect.top,h=this.getCoordinates(e),c=h.pageX,d=h.pageY,p=this.position.left-this.diffX,u=this.position.top-this.diffY,m=getComputedStyle(r),g=parseFloat(m.marginTop);if(this.dragArea){if(this.pageX!==c||this.skipDistanceCheck){let e=r.offsetWidth+(parseFloat(m.marginLeft)+parseFloat(m.marginRight));t=this.dragLimit.left>p&&p>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<p+e&&p>0?p-(p-this.dragLimit.right)+window.pageXOffset-e:p<0?this.dragLimit.left:p}if(this.pageY!==d||this.skipDistanceCheck){let e=r.offsetHeight+(parseFloat(m.marginTop)+parseFloat(m.marginBottom));i=this.dragLimit.top>u&&u>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<u+e&&u>0?u-(u-this.dragLimit.bottom)+window.pageYOffset-e:u<0?this.dragLimit.top:u}}else t=p,i=u;let f,b,y=a+this.borderWidth.top,v=l+this.borderWidth.left;if(this.dragProcessStarted&&(qe(i)&&(i=this.prevTop),qe(t)&&(t=this.prevLeft)),this.dragArea){if(this.dragLimit.top=this.clone?this.dragLimit.top:0,f=i-y<0?this.dragLimit.top:i-y,b=t-v<0?this.dragElePosition.left:t-v,g>0&&(this.clone&&(f+=this.element.offsetTop,u<0&&(this.element.offsetTop+u>=0?f=this.element.offsetTop+u:f-=this.element.offsetTop),f=this.dragLimit.bottom<f?this.dragLimit.bottom:f),i-y<0))if(u+g+(r.offsetHeight-y)>=0){let e=this.dragLimit.top+u-y;e+g+y<0?f-=g+y:f=e}else f-=g+y}else f=i-y,b=t-v;this.enableScrollHandler&&!this.clone&&(f-=this.parentScrollY,b-=this.parentScrollX);let C=this.getProcessedPositionValue({top:f+"px",left:b+"px"});ei(r,this.getDragPosition(C)),!this.elementInViewport(r)&&this.enableAutoScroll&&this.helperElement.scrollIntoView(),this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=c,this.pageY=d}triggerOutFunction(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null}getDragPosition(e){let t=Ve({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t}getDocumentWidthHeight(e){let t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])}intDragStop(e){if(this.dragProcessStarted=!1,!je(e.changedTouches)&&1!==e.changedTouches.length)return;if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){let t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");let t=this.checkTargetElement(e);t.target&&t.instance&&(t.instance.dragStopCalled=!0,t.instance.dragData[this.scope]=this.droppables[this.scope],t.instance.intDrop(e,t.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}intDestroy(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),Bt.remove(document,zt.touchMoveEvent,this.intDragStart),Bt.remove(document,zt.touchEndEvent,this.intDragStop),Bt.remove(document,zt.touchEndEvent,this.intDestroy),Bt.remove(document,zt.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)}onPropertyChanged(e,t){}getModuleName(){return"draggable"}isDragStarted(e){return e&&(qi.isDragged=!qi.isDragged),qi.isDragged}setDragArea(){let e,t,i,s=0,n=0;if(i="string"==typeof this.dragArea?Qt(this.dragArea):this.dragArea,i){let o=i.getBoundingClientRect();e=i.scrollWidth?i.scrollWidth:o.right-o.left,t=i.scrollHeight?i.scrollHeight:o.bottom-o.top;let r=["Top","Left","Bottom","Right"],l=getComputedStyle(i);for(let e=0;e<r.length;e++){let t=r[e],i=l["border"+t+"Width"],s=l["padding"+t],n=t.toLowerCase();this.borderWidth[n]=isNaN(parseFloat(i))?0:parseFloat(i),this.padding[n]=isNaN(parseFloat(s))?0:parseFloat(s)}s=o.top,n=o.left,this.dragLimit.left=n+this.borderWidth.left+this.padding.left,this.dragLimit.top=i.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=n+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=s+t-(this.borderWidth.bottom+this.padding.bottom)}}getProperTargetElement(e){let t,i=this.getCoordinates(e),s=this.helperElement.style.pointerEvents||"";return _e(e.target,this.helperElement)||-1!==e.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=s):t=e.target,t}currentStateCheck(e,t){let i;return i=qe(this.currentStateTarget)||this.currentStateTarget===e?qe(t)?e:t:this.currentStateTarget,i}getMousePosition(e,t){let i,s,n=void 0!==e.srcElement?e.srcElement:e.target,o=this.getCoordinates(e),r=qe(n.offsetParent);return t?(i=this.clone?o.pageX:o.pageX+(r?0:n.offsetParent.scrollLeft)-this.relativeXPosition,s=this.clone?o.pageY:o.pageY+(r?0:n.offsetParent.scrollTop)-this.relativeYPosition):(i=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,s=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),this.clone||!this.dragArea||t||(this.getScrollableValues(),s-=this.tempScrollHeight?this.parentScrollY:0,i-=this.tempScrollWidth?this.parentScrollX:0),{left:i-(this.margin.left+this.cursorAt.left),top:s-(this.margin.top+this.cursorAt.top)}}getCoordinates(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e}getHelperElement(e){let t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=Nt("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t}setGlobalDroppables(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}}checkTargetElement(e){let t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!qe(t.parentNode)){let e=Zt(t.parentNode,".e-droppable")||t.parentElement;e&&(i=this.getDropInstance(e))}return{target:t,instance:i}}getDropInstance(e){let t,i=e&&e.ej2_instances;if(i)for(let s of i)if("droppable"===s.getModuleName()){t=s;break}return t}destroy(){this.toggleEvents(!0),super.destroy()}};return Ni([fi({},ji)],e.prototype,"cursorAt",void 0),Ni([gi(!0)],e.prototype,"clone",void 0),Ni([gi()],e.prototype,"dragArea",void 0),Ni([gi()],e.prototype,"isDragScroll",void 0),Ni([gi()],e.prototype,"isReplaceDragEle",void 0),Ni([gi(!0)],e.prototype,"isPreventSelect",void 0),Ni([yi()],e.prototype,"drag",void 0),Ni([yi()],e.prototype,"dragStart",void 0),Ni([yi()],e.prototype,"dragStop",void 0),Ni([gi(1)],e.prototype,"distance",void 0),Ni([gi()],e.prototype,"handle",void 0),Ni([gi()],e.prototype,"abort",void 0),Ni([gi()],e.prototype,"helper",void 0),Ni([gi("default")],e.prototype,"scope",void 0),Ni([gi("")],e.prototype,"dragTarget",void 0),Ni([gi()],e.prototype,"axis",void 0),Ni([gi()],e.prototype,"queryPositionInfo",void 0),Ni([gi(!1)],e.prototype,"enableTailMode",void 0),Ni([gi(!1)],e.prototype,"skipDistanceCheck",void 0),Ni([gi(!0)],e.prototype,"preventDefault",void 0),Ni([gi(!1)],e.prototype,"enableAutoScroll",void 0),Ni([gi(!1)],e.prototype,"enableTapHold",void 0),Ni([gi(750)],e.prototype,"tapHoldThreshold",void 0),Ni([gi(!1)],e.prototype,"enableScrollHandler",void 0),e=Hi=Ni([vi],e),e})();var Gi=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let _i=(()=>{let e=class extends ni{constructor(e,t){super(t,e),this.mouseOver=!1,this.dragData={},this.dragStopCalled=!1,this.bind()}bind(){this.wireEvents()}wireEvents(){Bt.add(this.element,zt.touchEndEvent,this.intDrop,this)}onPropertyChanged(e,t){}getModuleName(){return"droppable"}intOver(e,t){this.mouseOver||(this.trigger("over",{event:e,target:t,dragData:this.dragData[this.scope]}),this.mouseOver=!0)}intOut(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)}intDrop(e,t){if(!this.dragStopCalled)return;this.dragStopCalled=!1;let i=!0;const s=this.dragData[this.scope],n=!!s&&s.helper&&Wt(s.helper);let o;n&&(o=this.isDropArea(e,s.helper,t),this.accept&&(i=ii(s.helper,this.accept))),n&&this.drop&&o.canDrop&&i&&this.trigger("drop",{event:e,target:o.target,droppedElement:s.helper,dragData:s}),this.mouseOver=!1}isDropArea(e,t,i){const s={canDrop:!0,target:i||e.target},n="touchend"===e.type;if(n||s.target===t){t.style.display="none";const i=n?e.changedTouches[0]:e,o=document.elementFromPoint(i.clientX,i.clientY);s.canDrop=!1,s.canDrop=_e(o,this.element),s.canDrop&&(s.target=o),t.style.display=""}return s}destroy(){Bt.remove(this.element,zt.touchEndEvent,this.intDrop),super.destroy()}};return Gi([gi()],e.prototype,"accept",void 0),Gi([gi("default")],e.prototype,"scope",void 0),Gi([yi()],e.prototype,"drop",void 0),Gi([yi()],e.prototype,"over",void 0),Gi([yi()],e.prototype,"out",void 0),e=Gi([vi],e),e})();var Ui,Ki=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const Yi={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222};let Xi=(()=>{let e=Ui=class extends ni{constructor(e,t){super(t,e),this.keyPressHandler=e=>{const t=e.altKey,i=e.ctrlKey,s=e.shiftKey,n=e.which,o=Object.keys(this.keyConfigs);for(const r of o){const o=this.keyConfigs[r].split(",");for(const l of o){const o=Ui.getKeyConfigData(l.trim());t===o.altKey&&i===o.ctrlKey&&s===o.shiftKey&&n===o.keyCode&&(e.action=r,this.keyAction&&this.keyAction(e))}}},this.bind()}destroy(){this.unwireEvents(),super.destroy()}onPropertyChanged(e,t){}bind(){this.wireEvents()}getModuleName(){return"keyboard"}wireEvents(){this.element.addEventListener(this.eventName,this.keyPressHandler)}unwireEvents(){this.element.removeEventListener(this.eventName,this.keyPressHandler)}static getKeyConfigData(e){if(e in this.configCache)return this.configCache[e];const t=e.toLowerCase().split("+"),i={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return i.keyCode=t[t.length-1].length>1&&Number(t[t.length-1])?Number(t[t.length-1]):Ui.getKeyCode(t[t.length-1]),Ui.configCache[e]=i,i}static getKeyCode(e){return Yi[e]||e.toUpperCase().charCodeAt(0)}};return e.configCache={},Ki([gi({})],e.prototype,"keyConfigs",void 0),Ki([gi("keyup")],e.prototype,"eventName",void 0),Ki([yi()],e.prototype,"keyAction",void 0),e=Ui=Ki([vi],e),e})(),Qi=(()=>{class e{constructor(e,t,i){this.controlName=e,this.localeStrings=t,this.setLocale(i||vt)}setLocale(t){const i=this.intGetControlConstant(e.locale,t);this.currentLocale=i||this.localeStrings}static load(e){this.locale=Ve(this.locale,e,{},!0)}getConstant(e){return qe(this.currentLocale[e])?this.localeStrings[e]||"":this.currentLocale[e]}intGetControlConstant(e,t){return e[t]?e[t][this.controlName]:null}}return e.locale={},e})();var $i=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let Ji=(()=>{class e extends Ai{}return $i([gi(50)],e.prototype,"swipeThresholdDistance",void 0),e})();const Zi=/(Up|Down)/;let es=(()=>{let e=class extends ni{constructor(e,t){super(t,e),this.touchAction=!0,this.tapCount=0,this.startEvent=e=>{if(!0===this.touchAction){const t=this.updateChangeTouches(e);void 0!==e.changedTouches&&(this.touchAction=!1),this.isTouchMoved=!1,this.movedDirection="",this.startPoint=this.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},this.startEventData=t,this.hScrollLocked=this.vScrollLocked=!1,this.tStampStart=Date.now(),this.timeOutTapHold=setTimeout(()=>{this.tapHoldEvent(e)},this.tapHoldThreshold),Bt.add(this.element,zt.touchMoveEvent,this.moveEvent,this),Bt.add(this.element,zt.touchEndEvent,this.endEvent,this),Bt.add(this.element,zt.touchCancelEvent,this.cancelEvent,this)}},this.moveEvent=e=>{const t=this.updateChangeTouches(e);this.movedPoint=t,this.isTouchMoved=!(t.clientX===this.startPoint.clientX&&t.clientY===this.startPoint.clientY);let i={};this.isTouchMoved&&(clearTimeout(this.timeOutTapHold),this.calcScrollPoints(e),i=Ve(i,{},{startEvents:this.startEventData,originalEvent:e,startX:this.startPoint.clientX,startY:this.startPoint.clientY,distanceX:this.distanceX,distanceY:this.distanceY,scrollDirection:this.scrollDirection,velocity:this.getVelocity(t)}),this.trigger("scroll",i),this.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},this.cancelEvent=e=>{clearTimeout(this.timeOutTapHold),clearTimeout(this.timeOutTap),this.tapCount=0,this.swipeFn(e),Bt.remove(this.element,zt.touchCancelEvent,this.cancelEvent)},this.endEvent=e=>{this.swipeFn(e),this.isTouchMoved||"function"==typeof this.tap&&(this.trigger("tap",{originalEvent:e,tapCount:++this.tapCount}),this.timeOutTap=setTimeout(()=>{this.tapCount=0},this.tapThreshold)),this.modeclear()},this.swipeFn=e=>{clearTimeout(this.timeOutTapHold),clearTimeout(this.timeOutTap);const t=this.updateChangeTouches(e);let i=t.clientX-this.startPoint.clientX,s=t.clientY-this.startPoint.clientY;i=Math.floor(i<0?-1*i:i),s=Math.floor(s<0?-1*s:i),this.isTouchMoved=i>1||s>1,this.endPoint=t,this.calcPoints(e);const n={originalEvent:e,startEvents:this.startEventData,startX:this.startPoint.clientX,startY:this.startPoint.clientY,distanceX:this.distanceX,distanceY:this.distanceY,swipeDirection:this.movedDirection,velocity:this.getVelocity(t)};if(this.isTouchMoved){let e;const t=this.swipeSettings.swipeThresholdDistance;e=Ve(e,this.defaultArgs,n);let i=!1;const s=this.element,o=this.isScrollable(s),r=Zi.test(this.movedDirection);(t<this.distanceX&&!r||t<this.distanceY&&r)&&(i=!o||this.checkSwipe(s,r)),i&&this.trigger("swipe",e)}this.modeclear()},this.modeclear=()=>{this.modeClear=setTimeout(()=>{this.touchAction=!0},"function"!=typeof this.tap?0:20),this.lastTapTime=(new Date).getTime(),Bt.remove(this.element,zt.touchMoveEvent,this.moveEvent),Bt.remove(this.element,zt.touchEndEvent,this.endEvent),Bt.remove(this.element,zt.touchCancelEvent,this.cancelEvent)},this.bind()}onPropertyChanged(e,t){}bind(){this.wireEvents(),zt.isIE&&this.element.classList.add("e-block-touch")}destroy(){this.unwireEvents(),super.destroy()}wireEvents(){Bt.add(this.element,zt.touchStartEvent,this.startEvent,this)}unwireEvents(){Bt.remove(this.element,zt.touchStartEvent,this.startEvent)}getModuleName(){return"touch"}isScrollable(e){const t=getComputedStyle(e);return!!/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}tapHoldEvent(e){let t;this.tapCount=0,this.touchAction=!0,Bt.remove(this.element,zt.touchMoveEvent,this.moveEvent),Bt.remove(this.element,zt.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),Bt.remove(this.element,zt.touchCancelEvent,this.cancelEvent)}calcPoints(e){const t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.movedDirection=this.distanceX>this.distanceY?t.clientX>this.startPoint.clientX?"Right":"Left":t.clientY<this.startPoint.clientY?"Up":"Down"}calcScrollPoints(e){const t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)}getVelocity(e){const t=e.clientX,i=e.clientY,s=Date.now(),n=t-this.startPoint.clientX,o=i-this.startPoint.clientX,r=s-this.tStampStart;return Math.sqrt(n*n+o*o)/r}checkSwipe(e,t){const i=["scroll","offset"],s=t?["Height","Top"]:["Width","Left"];return e[i[0]+s[0]]<=e[i[1]+s[0]]||0===e[i[0]+s[1]]||e[i[1]+s[0]]+e[i[0]+s[1]]>=e[i[0]+s[0]]}updateChangeTouches(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e}};return $i([yi()],e.prototype,"tap",void 0),$i([yi()],e.prototype,"tapHold",void 0),$i([yi()],e.prototype,"swipe",void 0),$i([yi()],e.prototype,"scroll",void 0),$i([gi(350)],e.prototype,"tapThreshold",void 0),$i([gi(750)],e.prototype,"tapHoldThreshold",void 0),$i([fi({},Ji)],e.prototype,"swipeSettings",void 0),e=$i([vi],e),e})();const ts=new RegExp("\\n|\\r|\\s\\s+","g"),is=new RegExp(/'|"/g),ss=new RegExp("if ?\\("),ns=new RegExp("else if ?\\("),os=new RegExp("else"),rs=new RegExp("for ?\\("),ls=new RegExp("(/if|/for)"),as=new RegExp("\\((.*)\\)",""),hs=new RegExp("^[0-9]+$","g"),cs=new RegExp("[\\w\"'.\\s+]+","g"),ds=new RegExp('"(.*?)"',"g"),ps=new RegExp("[\\w\"'@#$.\\s-+]+","g");let us=new RegExp("\\${([^}]*)}","g");const ms=/^\..*/gm,gs=/\\/gi,fs=/\\\\/gi,bs=new RegExp("[\\w\"'@#$.\\s+]+","g"),ys=/\window\./gm;function vs(e,t,i,s,n){return!t||hs.test(e)||-1!==s.indexOf(e.split(".")[0])||n?e:i+"."+e}function Cs(e,t,i,s){return t&&!hs.test(e)&&-1===s.indexOf(e.split(".")[0])?i+'["'+e:e}function ws(e){return e.match(fs)?e:e.replace(gs,"\\\\")}function Ss(e,t,i,s){if(e=e.trim(),/\window\./gm.test(e))return e;{const n=/'|"/gm;return/@|\$|#/gm.test(e)&&(e=Cs(e,-1===i.indexOf(e),t,i)+'"]'),ms.test(e)?function(e,t,i,s){return!t||hs.test(e)||-1!==s.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:i+"."+e}(e,!n.test(e)&&-1===i.indexOf(e),t,i):vs(e,!n.test(e)&&-1===i.indexOf(e),t,i,s)}}const Es=/^[\n\r.]+<tr|^<tr/,xs=/^[\n\r.]+<svg|^<path|^<g/,Rs={};function Ds(e,t,i){const s=Ms.compile(e,t,i);return(e,t,i,n,o,r,l)=>{const a=s(e,t,i,l);return"string"==typeof a?xs.test(a)?Nt("svg",{innerHTML:a}).childNodes:Nt(Es.test(a)?"table":"div",{innerHTML:a}).childNodes:a}}function Ts(e,t,i){const s=document.getElementById(e);if(s){const e=s.getElementsByClassName("blazor-inner-template");for(let t=0;t<e.length;t++){let s=" ";s=qe(i)?e[t].getAttribute("data-templateId"):e[i].getAttribute("data-templateId");const n=document.getElementById(s);if(n){const s=n.childNodes.length;for(let o=0;o<s;o++)qe(i)?e[t].appendChild(n.childNodes[0]):(e[i].appendChild(n.childNodes[0]),t=e.length)}}}}const Ms={compile:(new class{compile(e,t={},i){return function(e,t,i){const s="data",n=function(e,t,i,s){let n=0;const o=[],r=e.match(/class="([^"]+|)\s{2}/g);let l="";return r&&r.forEach(t=>{l=t.replace(/\s\s+/g," "),e=e.replace(t,l)}),e.replace(ts,"").replace(ds,"'$1'").replace(us,(e,r,l,a)=>{const h=r.match(as);if(h){const e=h[1];if(ns.test(r))r='";} '+r.replace(h[1],e.replace(cs,e=>vs(e=e.trim(),!is.test(e)&&-1===o.indexOf(e),t,o,s)))+'{ \n str = str + "';else if(ss.test(r))r='"; '+r.replace(h[1],e.replace(ps,e=>Ss(e,t,o,s)))+'{ \n str = str + "';else if(rs.test(r)){const e=h[1].split(" of ");r='"; '+r.replace(h[1],i=>(o.push(e[0]),o.push(e[0]+"Index"),n+=1,"var i"+n+"=0; i"+n+" < "+vs(e[1],!0,t,o,s)+".length; i"+n+"++"))+"{ \n "+e[0]+"= "+vs(e[1],!0,t,o,s)+"[i"+n+"]; \n var "+e[0]+"Index=i"+n+'; \n str = str + "'}else{const n=r.split("(");let l=i&&i.hasOwnProperty(n[0])?"this.":"global";l=/\./.test(n[0])?"":l;const a=h[1].split(",");0===h[1].length||/data/.test(a[0])||/window./.test(a[0])||(h[1]="global"===l?"data."+h[1]:h[1]);const c=/@|\$|#/gm,d=/\]\./gm;ys.test(r)&&d.test(r)||c.test(r)?/@|\$|#|\]\./gm.test(r)&&(r='"+ '+("global"===l?"":l)+r.replace(h[1],e.replace(bs,e=>Ss(e,t,o,s)))+'+ "'):r='" + '+("global"===l?"":l)+r.replace(e,vs(h[1].replace(/,( |)data.|,/gi,",data.").replace(/,( |)data.window/gi,",window"),"global"!==l,t,o,s))+'+"'}}else os.test(r)?r='"; '+r.replace(os,'} else { \n str = str + "'):r.match(ls)?r=r.replace(ls,'"; \n } \n str = str + "'):/@|#|\$/gm.test(r)?(r.match(gs)&&(r=ws(r)),r='"+'+Cs(r,-1===o.indexOf(r),t,o)+'"]+"'):r=r.match(gs)?'"+'+Cs(r=ws(r),-1===o.indexOf(r),t,o)+'"]+"':'"+'+vs(r.replace(/,/gi,"+data."),-1===o.indexOf(r),t,o,s)+'+"';return r})}(e,s,t,void 0);return new Function(s,'var str="'+n+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-\u25a0\\s]+)['])/g);\n    var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-\u25a0\\s]+)['])/g);\n    if(str.match(valueRegEx)){\n        var check = str.match(valueRegEx);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(valueRegEx)[i].split('value=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n    else if(str.match(hrefRegex)) {\n        var check = str.match(hrefRegex);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(hrefRegex)[i].split('href=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n     return str;").bind(t)}(e,t)}}).compile},Is=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],ks=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],Fs=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"];class As{static beforeSanitize(){return{selectors:{tags:Is,attributes:ks}}}static sanitize(e){const t=this.beforeSanitize();return this.serializeValue(t,e)}static serializeValue(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();const i=this.wrapElement.innerHTML;return this.removeElement(),i}static removeElement(){const e=this.wrapElement.children;for(let t=0;t<e.length;t++){const i=e[t].attributes;for(let e=0;e<i.length;e++)this.wrapElement.children[t].removeAttribute(i[e].localName)}}static removeXssTags(){const e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach(e=>{Kt(e)})}static removeJsEvents(){const e=this.wrapElement.querySelectorAll("["+Fs.join("],[")+"]");e.length>0&&e.forEach(e=>{Fs.forEach(t=>{e.hasAttribute(t)&&e.removeAttribute(t)})})}static removeXssAttrs(){this.removeAttrs.forEach((e,t)=>{const i=this.wrapElement.querySelectorAll(e.selector);i.length>0&&i.forEach(t=>{t.removeAttribute(e.attribute)})})}}function Os(e,t,i){var s={};if(e&&e.length){for(var n=0,o=e;n<o.length;n++){var r=o[n];!0===i?(t.propCollection[r]=new m.o(!1),t[r]=t.propCollection[r]):s[r]=new m.o(!1)}!0!==i&&t.setProperties(s,!0)}}function Ls(e,t,i){var s=Object.keys(e.registeredTemplate);if(s.length)for(var n=t&&t.filter(function(e){return!/\./g.test(e)}),o=0,r=n&&n||s;o<r.length;o++){var l=r[o];if(i&&i.length)for(var a=0;a<i.length;a++)for(var h=0;h<e.registeredTemplate.template.length;h++)e.registeredTemplate.template[h].rootNodes[0]===i[a]&&(p=e.registeredTemplate[l])[h].destroy();else if(e.registeredTemplate[l])for(var c=0,d=e.registeredTemplate[l];c<d.length;c++){var p;if(!(p=d[c]).destroyed){if(p._view){var u=p._view.renderer.parentNode(p.rootNodes[0]);if(!qe(u))for(h=0;h<p.rootNodes.length;h++)u.appendChild(p.rootNodes[h])}p.destroy()}}delete e.registeredTemplate[l]}for(var m=function(e){e.instance&&e.instance.clearTemplate(t&&t.filter(function(t){return!!new RegExp(e.name).test(t)}))},g=0,f=e.tagObjects;g<f.length;g++)m(f[g])}function Ps(e,t,i){for(var s=e.replace(/\[/g,".").replace(/\]/g,"").split("."),n=i||{},o=0;o<s.length;o++){var r=s[o];o+1===s.length?n[r]=void 0===t?{}:t:void 0===n[r]&&(n[r]={}),n=n[r]}return n}var zs=/Ref$/,Bs=function(){function e(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return e.prototype.ngOnInit=function(){this.registeredTemplate={};for(var e=0,t=this.tags;e<t.length;e++){var i=t[e],s=Pe("child"+i.substring(0,1).toUpperCase()+i.substring(1),this);s&&this.tagObjects.push({instance:s,name:i})}for(var n=Object.keys(this),o=0;o<n.length;o++){var r=Pe(n[o],this);"object"==typeof r&&r.elementRef&&!Pe(n[o]+"Ref",this)&&ze(n[o]+"Ref",r,this)}for(var l=0,a=n=(n=Object.keys(this)).filter(function(e){return/Ref$/i.test(e)});l<a.length;l++){var h=a[l].replace("Ref","");ze(h.replace("_","."),Pe(h,this),this.propCollection)}var c=Object.keys(this);if(this.directivePropList){for(var d=0;d<this.directivePropList.length;d++){var p=this.directivePropList[d];-1!==c.indexOf(p)&&Pe(p,this)&&ze(p,Pe(p,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},e.prototype.registerEvents=function(e){Os(e,this,!0)},e.prototype.ngOnChanges=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var s=i[t];this.propCollection[s]=e[s].currentValue}this.isUpdated=!1,this.hasChanges=!0},e.prototype.clearTemplate=function(e){Ls(this,e)},e.prototype.getProperties=function(){for(var e=0,t=this.tagObjects;e<t.length;e++){var i=t[e];this.propCollection[i.name]=i.instance.getProperties()}return this.propCollection},e.prototype.isChanged=function(){var e=this.hasChanges;if(!qe(this.propCollection[this.property]))for(var t=Object.keys(this.propCollection[this.property][0]),i=0;i<t.length;i++)if(!qe(this.propCollection[t[i]])){var s=Pe(t[i],this),n=this.propCollection[this.property][0][t[i]];qe(s)||this.propCollection[t[i]]===s||n===s||(ze(t[i],s,this.propCollection[this.property][0]),ze(t[i],s,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var o=0,r=this.tagObjects;o<r.length;o++)e=e||r[o].instance.hasChanges;return e||this.hasChanges},e.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var e=Object.keys(this),t=0,i=e=e.filter(function(e){return zs.test(e)});t<i.length;t++){var s=i[t].replace("Ref","");ze(s.replace("_","."),Pe(s,this),this.propCollection)}},e.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},e.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},e.prototype.ngOnDestroy=function(){this.directivePropList=[]},e}(),Hs=function(){function e(e){this.list=[],this.hasChanges=!1,this.propertyName=e}return e.prototype.ngOnInit=function(){this.isInitChanges=!0},e.prototype.ngAfterContentInit=function(){var e=this,t=0;this.list=this.children.map(function(i){return i.dirIndex=t++,i.property=e.propertyName,i}),this.hasChanges=!0},e.prototype.getProperties=function(){for(var e=[],t=0,i=this.list;t<i.length;t++)e.push(i[t].getProperties());return e},e.prototype.isChanged=function(){var e=this,t=!1,i=0,s=!1,n=this.children.map(function(e){return e});if(this.list.length===this.children.length)for(var o=0;o<this.list.length;o++)this.list[o].propCollection.dataSource&&(this.list[o].dataSource&&this.list[o].propCollection.dataSource!==this.list[o].dataSource&&(this.list[o].propCollection.dataSource=this.list[o].dataSource,this.list[o].hasChanges=!0),s=JSON.stringify(this.list[o].propCollection.dataSource)!==JSON.stringify(n[o].propCollection.dataSource));this.hasNewChildren=!(this.list.length===this.children.length&&!s)||null,this.hasNewChildren&&(this.list=this.children.map(function(t){return t.dirIndex=i++,t.property=e.propertyName,t}));for(var r=0,l=this.list;r<l.length;r++)t=t||l[r].hasChanges;return!!this.list.length&&t},e.prototype.clearTemplate=function(e){for(var t=this,i=0,s=this.list;i<s.length;i++)s[i].clearTemplate(e&&e.map(function(e){return new RegExp(t.propertyName).test(e)?e.replace(t.propertyName+".",""):e}))},e.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var e=0;e<this.list.length;e++)Pe("childColumns",this.list[e])&&"columns"===Pe("property",this.list[e])&&ze("columns",Pe("childColumns",this.list[e]).getProperties(),this.list[e].propCollection),this.list[e].isUpdated=!0},e.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},e.prototype.ngOnDestroy=function(){this.list=[]},e}(),Ns=function(){function e(){this.isProtectedOnChange=!0,this.isFormInit=!0}return e.prototype.saveChanges=function(e,t,i){if(!this.isProtectedOnChange){this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate();var s=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(s)}}},e.prototype.ngOnInit=function(e){var t=e||this;t.registeredTemplate={},t.ngBoundedEvents={},t.isAngular=!0,t.isFormInit=!0,e&&(this.tags=e.tags),t.tags=this.tags||[],t.complexTemplate=this.complexTemplate||[],t.tagObjects=[],t.ngAttr=this.getAngularAttr(t.element),t.createElement=function(e,i){var s=t.srenderer?t.srenderer.createElement(e):Nt(e);return void 0===i||(s.innerHTML=i.innerHTML?i.innerHTML:"",void 0!==i.className&&(s.className=i.className),void 0!==i.id&&(s.id=i.id),void 0!==i.styles&&s.setAttribute("style",i.styles),void 0!==t.ngAttr&&s.setAttribute(t.ngAttr,""),void 0!==i.attrs&&Xt(s,i.attrs)),s};for(var i=0,s=t.tags;i<s.length;i++){var n=s[i],o={instance:Pe("child"+n.substring(0,1).toUpperCase()+n.substring(1),t),name:n};t.tagObjects.push(o)}for(var r=Object.keys(t),l=0,a=r=r.filter(function(e){return/Ref$/i.test(e)&&/\_/i.test(e)});l<a.length;l++){var h=a[l].replace("Ref",""),c={};ze(h.replace("_","."),Pe(h,t),c),t.setProperties(c,!0)}},e.prototype.getAngularAttr=function(e){for(var t,i=e.attributes,s=i.length,n=0;n<s;n++)/_ngcontent/g.test(i[n].name)&&(t=i[n].name);return t},e.prototype.ngAfterViewInit=function(e){var t=e||this;/ejs-tab|ejs-accordion/g.test(t.ngEle.nativeElement.outerHTML)&&(t.ngEle.nativeElement.style.visibility="hidden");for(var i=Object.keys(t),s=0,n=i=i.filter(function(e){return/Ref$/i.test(e)});s<n.length;s++){var o=n[s].replace("Ref","");ze(o.replace("_","."),Pe(o+"Ref",t),t)}"btn"===t.getModuleName()?"undefined"!=typeof window&&document.body.contains(t.element)&&(t.appendTo(t.element),t.ngEle.nativeElement.style.visibility=""):setTimeout(function(){"undefined"!=typeof window&&document.body.contains(t.element)&&(t.appendTo(t.element),t.ngEle.nativeElement.style.visibility="")})},e.prototype.ngOnDestroy=function(e){var t=e||this;setTimeout(function(){"undefined"!=typeof window&&t.element.classList.contains("e-control")&&(t.destroy(),t.clearTemplate(null),t.ngBoundedEvents={},t.tagObjects={},t.ngEle=null)})},e.prototype.clearTemplate=function(e,t){Ls(this,e,t)},e.prototype.ngAfterContentChecked=function(e){for(var t=e||this,i=0,s=t.tagObjects;i<s.length;i++){var n=s[i];if(!je(n.instance)&&(n.instance.isInitChanges||n.instance.hasChanges||n.instance.hasNewChildren))if(n.instance.isInitChanges){var o={},r=void 0;(w=Pe("instance.list",n))&&w.length&&(r=w[0].directivePropList);var l=!0;if(t.getModuleName&&"gantt"===t.getModuleName()&&(l=!1),r&&l&&-1===r.indexOf(n.instance.propertyName))for(var a=Object.keys(n.instance.list[0].propCollection),h=0;h<n.instance.list.length;h++){n.instance.list[h].propCollection[n.instance.propertyName]=[];for(var c={},d=0;d<a.length;d++)c[T=a[d]]=n.instance.list[h].propCollection[T];for(var p=0;p<n.instance.list[h].tags.length;p++){var u=n.instance.list[h].tags[p],m=Pe("child"+u.substring(0,1).toUpperCase()+u.substring(1),n.instance.list[h]);if(m){var g=n.instance.list[h]["child"+u.substring(0,1).toUpperCase()+u.substring(1)];if(g)for(var f=0;f<g.list.length;f++){var b=g.list[0].tags[0];if(b){var y=Pe("child"+b.substring(0,1).toUpperCase()+b.substring(1),g.list[f]);y&&g.list[f].tagObjects.push({instance:y,name:b})}}n.instance.list[h].tagObjects.push({instance:m,name:u})}}n.instance.list[h].propCollection[n.instance.propertyName].push(c)}o[n.name]=n.instance.getProperties(),t.setProperties(o,n.instance.isInitChanges)}else{t[n.name].length===n.instance.list.length&&"diagram"!==t.getModuleName()||(t[n.name]=n.instance.list);for(var v=0,C=n.instance.list;v<C.length;v++){var w,S=n.instance.list.indexOf(w=C[v]),E=Pe(n.name,t)[S],x=Object.keys(E);if(x=x.filter(function(e){return/Ref$/i.test(e)}),E.properties&&0!==Object.keys(E.properties).length&&/chart/.test(t.getModuleName()))for(var R=0,D=x;R<D.length;R++){var T;T=(T=D[R]).replace(/Ref/,""),E.properties[T]=E.properties[T]?E.properties[T]:E.propCollection[T]}je(E)||je(E.setProperties)||(/diagram|DashboardLayout/.test(t.getModuleName())?E.setProperties(w.getProperties(),!0):E.setProperties(w.getProperties())),w.isUpdated=!0}}}},e.prototype.registerEvents=function(e){Os(e,this)},e.prototype.twoWaySetter=function(e,t){var i=Pe(t,this.properties);i!==e&&(this.saveChanges(t,e,i),ze(t,qe(e)?null:e,this.properties),Pe(t+"Change",this).emit(e))},e.prototype.addTwoWay=function(e){for(var t=this,i=function(e){Pe(e,s),Object.defineProperty(s,e,{get:function(){return Pe(e,t.properties)},set:function(i){return t.twoWaySetter(i,e)}}),ze(e+"Change",new m.o,s)},s=this,n=0,o=e;n<o.length;n++)i(o[n])},e.prototype.addEventListener=function(e,t){var i=Pe(e,this);je(i)||(this.ngBoundedEvents[e]||(this.ngBoundedEvents[e]=new Map),this.ngBoundedEvents[e].set(t,i.subscribe(t)))},e.prototype.removeEventListener=function(e,t){je(Pe(e,this))||this.ngBoundedEvents[e].get(t).unsubscribe()},e.prototype.trigger=function(e,t,i){var s=Pe(e,this),n=this.isProtectedOnChange;this.isProtectedOnChange=!1,t&&(t.name=e),je(s)||s.next(t);var o=Pe("local"+e.charAt(0).toUpperCase()+e.slice(1),this);je(o)||o.call(this,t),this.isProtectedOnChange=n,i&&(this.preventChange=this.isPreventChange,i.call(this,t)),this.isPreventChange=!1},e}(),Vs=Ms.compile;function qs(e){return function(t,i){var s={set:js(i),get:Ws(i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,s)}}function js(e){return function(t){void 0!==t&&(ze(e+"Ref",t,this),"string"!=typeof t?(t.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,t.elementRef.nativeElement.propName=e):this.saveChanges&&(this.saveChanges(e,t,void 0),this.dataBind()))}}function Ws(e,t){return function(){return Pe(e+"Ref",this)||t}}Ms.compile=function(e,t){if("string"==typeof e)return Vs(e,t);var i=e.elementRef.nativeElement._viewContainerRef,s=e.elementRef.nativeElement.propName;return function(t,n,o){var r=i||n.viewContainerRef,l=r.createEmbeddedView(e,{$implicit:t});l.markForCheck();var a=n&&n.registeredTemplate?n.registeredTemplate:Pe("currentInstance.registeredTemplate",r);return void 0===a[o=o&&n.registeredTemplate?o:s]&&(a[o]=[]),a[o].push(l),l.rootNodes}};var Gs=i("YFW5"),_s=i("iKlE");let Us,Ks,Ys,Xs,Qs,$s,Js=!1;function Zs(e,t){let i=!1;const s={left:0,top:0},n=e;if(!e||!t)return s;for(qe(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)s.left+=e.offsetLeft,s.top+=e.offsetTop,e=e.offsetParent;for(e=n;(t.offsetParent||i)&&e&&t.offsetParent!==e;)s.left-=e.scrollLeft,s.top-=e.scrollTop,e=e.parentElement;return s}function en(e,t,i,s,n){return Ks=void 0,Ks=n,Js=!!s,e?(t||(t="left"),i||(i="top"),Xs=e.ownerDocument,Ys=e,function(e,t,i){switch(Us=Ys.getBoundingClientRect(),t+e){case"topcenter":tn(dn(),i),sn(an(),i);break;case"topright":tn(cn(),i),sn(an(),i);break;case"centercenter":tn(dn(),i),sn(ln(),i);break;case"centerright":tn(cn(),i),sn(ln(),i);break;case"centerleft":tn(hn(),i),sn(ln(),i);break;case"bottomcenter":tn(dn(),i),sn(rn(),i);break;case"bottomright":tn(cn(),i),sn(rn(),i);break;case"bottomleft":tn(hn(),i),sn(rn(),i);break;default:case"topleft":tn(hn(),i),sn(an(),i)}return i}(t.toLowerCase(),i.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function tn(e,t){t.left=e}function sn(e,t){t.top=e}function nn(){return Xs.documentElement.scrollTop||Xs.body.scrollTop}function on(){return Xs.documentElement.scrollLeft||Xs.body.scrollLeft}function rn(){return Js?Us.bottom:Us.bottom+nn()}function ln(){return an()+Us.height/2}function an(){return Js?Us.top:Us.top+nn()}function hn(){return Us.left+on()}function cn(){const e=Ys&&Ys.classList.contains("e-date-range-wrapper")?Ks?Ks.width:0:Ks&&Us.width>=Ks.width?Ks.width:0;return Us.right+on()-e}function dn(){return hn()+Us.width/2}function pn(e,t=null,i={X:!1,Y:!1},s){if(!i.Y&&!i.X)return{left:0,top:0};const n=e.getBoundingClientRect();if($s=t,Qs=e.ownerDocument,s||(s=en(e,"left","top")),i.X){const e=$s?Cn():Fn(),t=Rn(),i=Dn(),o=t-s.left,r=s.left+n.width-i;n.width>e?s.left=o>0&&r<=0?i-n.width:r>0&&o<=0?t:o>r?i-n.width:t:o>0?s.left+=o:r>0&&(s.left-=r)}if(i.Y){const e=$s?wn():kn(),t=xn(),i=Tn(),o=t-s.top,r=s.top+n.height-i;n.height>e?s.top=o>0&&r<=0?i-n.height:r>0&&o<=0?t:o>r?i-n.height:t:o>0?s.top+=o:r>0&&(s.top-=r)}return s}function un(e,t=null,i,s){const n=en(e,"left","top");i&&(n.left=i),s&&(n.top=s);const o=[];$s=t,Qs=e.ownerDocument;const r=e.getBoundingClientRect(),l=n.left,a=n.left+r.width,h=vn(n.top,n.top+r.height),c=fn(l,a);return h.topSide&&o.push("top"),c.rightSide&&o.push("right"),c.leftSide&&o.push("left"),h.bottomSide&&o.push("bottom"),o}function mn(e,t,i,s,n,o,r=null,l={X:!0,Y:!0},a){if(!(t&&e&&n&&o&&(l.X||l.Y)))return;const h={TL:null,TR:null,BL:null,BR:null},c={TL:null,TR:null,BL:null,BR:null};let d;if("none"===window.getComputedStyle(e).display){const t=e.style.visibility;e.style.visibility="hidden",e.style.display="block",d=e.getBoundingClientRect(),e.style.removeProperty("display"),e.style.visibility=t}else d=e.getBoundingClientRect();const p={posX:n,posY:o,offsetX:i,offsetY:s,position:{left:0,top:0}};$s=r,Qs=t.ownerDocument,function(e,t,i,s,n){i.position=en(e,i.posX,i.posY,s,n),t.TL=en(e,"left","top",s,n),t.TR=en(e,"right","top",s,n),t.BR=en(e,"left","bottom",s,n),t.BL=en(e,"right","bottom",s,n)}(t,h,p,a,d),gn(c,p,d),l.X&&bn(t,c,h,p,d,!0),l.Y&&h.TL.top>-1&&yn(t,c,h,p,d,!0),function(e,t,i){let s=0,n=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){const t=en(e.offsetParent,"left","top",!1,i);s=t.left,n=t.top}e.style.top=t.position.top+t.offsetY-n+"px",e.style.left=t.position.left+t.offsetX-s+"px"}(e,p,d)}function gn(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function fn(e,t){let i=!1,s=!1;return e-In()<Rn()&&(i=!0),t>Dn()&&(s=!0),{leftSide:i,rightSide:s}}function bn(e,t,i,s,n,o){const r=fn(t.TL.left,t.TR.left);i.TL.left-In()<=Rn()&&(r.leftSide=!1),i.TR.left>Dn()&&(r.rightSide=!1),(r.leftSide&&!r.rightSide||!r.leftSide&&r.rightSide)&&(s.posX="right"===s.posX?"left":"right",s.offsetX=s.offsetX+n.width,s.offsetX=-1*s.offsetX,s.position=en(e,s.posX,s.posY,!1),gn(t,s,n),o&&bn(e,t,i,s,n,!1))}function yn(e,t,i,s,n,o){const r=vn(t.TL.top,t.BL.top);i.TL.top-Mn()<=xn()&&(r.topSide=!1),i.BL.top>=Tn()&&e.getBoundingClientRect().bottom<window.innerHeight&&(r.bottomSide=!1),(r.topSide&&!r.bottomSide||!r.topSide&&r.bottomSide)&&(s.posY="top"===s.posY?"bottom":"top",s.offsetY=s.offsetY+n.height,s.offsetY=-1*s.offsetY,s.position=en(e,s.posX,s.posY,!1,n),gn(t,s,n),o&&yn(e,t,i,s,n,!1))}function vn(e,t){let i=!1,s=!1;return e-Mn()<xn()&&(i=!0),t>Tn()&&(s=!0),{topSide:i,bottomSide:s}}function Cn(){return $s.getBoundingClientRect().width}function wn(){return $s.getBoundingClientRect().height}function Sn(){return $s.getBoundingClientRect().left}function En(){return $s.getBoundingClientRect().top}function xn(){return $s?En():0}function Rn(){return $s?Sn():0}function Dn(){return $s?In()+Sn()+Cn():In()+Fn()}function Tn(){return $s?Mn()+En()+wn():Mn()+kn()}function Mn(){return Qs.documentElement.scrollTop||Qs.body.scrollTop}function In(){return Qs.documentElement.scrollLeft||Qs.body.scrollLeft}function kn(){return window.innerHeight}function Fn(){const e=window.innerWidth;let t=document.documentElement.getBoundingClientRect();return e-(e-(qe(document.documentElement)?0:t.width))}var An=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let On=(()=>{class e extends Ai{}return An([gi("left")],e.prototype,"X",void 0),An([gi("top")],e.prototype,"Y",void 0),e})();const Ln="e-popup",Pn="e-rtl",zn="e-popup-open",Bn="e-popup-close";let Hn=(()=>{let e=class extends Bi{constructor(e,t){super(t,e)}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"width":ei(this.element,{width:Ke(e.width)});break;case"height":ei(this.element,{height:Ke(e.height)});break;case"zIndex":ei(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":let i=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+i).toString()+"px";break;case"offsetY":let s=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+s).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}getModuleName(){return"popup"}resolveCollision(){this.checkCollision()}getPersistData(){return this.addOnPersist([])}destroy(){this.element.classList.remove(Ln,Pn,zn,Bn),this.unwireEvents(),super.destroy()}render(){this.element.classList.add(Ln);const e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=Ke(this.width)),"auto"!==this.height&&(e.height=Ke(this.height)),ei(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()}wireEvents(){zt.isDevice&&Bt.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()}wireScrollEvents(){if(this.getRelateToElement())for(const e of this.getScrollableParent(this.getRelateToElement()))Bt.add(e,"scroll",this.scrollRefresh,this)}unwireEvents(){zt.isDevice&&Bt.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()}unwireScrollEvents(){if(this.getRelateToElement())for(const e of this.getScrollableParent(this.getRelateToElement()))Bt.remove(e,"scroll",this.scrollRefresh)}getRelateToElement(){const e=""===this.relateTo||qe(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo}scrollRefresh(e){if("reposition"===this.actionOnScroll?qe(this.element)||this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){const t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}}isElementOnViewport(e,t){const i=this.getScrollableParent(e);for(let s=0;s<i.length;s++)if(!this.isElementVisible(e,i[s]))return!1;return!0}isElementVisible(e,t){const i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(qe(this.checkGetBoundingClientRect(t))){const t=window,s={top:t.scrollY,left:t.scrollX,right:t.scrollX+t.outerWidth,bottom:t.scrollY+t.outerHeight},n=en(e),o={top:n.top,left:n.left,right:n.left+i.width,bottom:n.top+i.height},r={top:s.bottom-o.top,left:s.right-o.left,bottom:o.bottom-s.top,right:o.right-s.left};return r.top>0&&r.left>0&&r.right>0&&r.bottom>0}{const e=t.getBoundingClientRect();return!(i.bottom<e.top||i.bottom>e.bottom||i.right>e.right||i.left<e.left)}}preRender(){}setEnableRtl(){this.reposition(),this.enableRtl?this.element.classList.add(Pn):this.element.classList.remove(Pn)}setContent(){qe(this.content)||(this.element.innerHTML="","string"==typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))}orientationOnChange(){setTimeout(()=>{this.refreshPosition()},200)}refreshPosition(e,t){qe(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()}reposition(){let e,t;const i=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){let s;const n=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(s=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=n,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=s)}else if(i){const t=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=t}else e={left:0,top:0};qe(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")}checkGetBoundingClientRect(e){let t;try{return t=e.getBoundingClientRect(),t}catch(i){return null}}getAnchorPosition(e,t,i,s,n){const o=this.checkGetBoundingClientRect(t),r=this.checkGetBoundingClientRect(e);if(qe(o)||qe(r))return null;const l=e;let a={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?a=en(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==l.tagName&&(t=t.parentElement),a=Zs(l,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?a.left+=window.innerWidth/2-o.width/2:a.left+="container"===this.targetType?r.width/2-o.width/2:r.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?a.left+=window.innerWidth-o.width:a.left+="container"===this.targetType?r.width-o.width:r.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?a.top+=window.innerHeight/2-o.height/2:a.top+="container"===this.targetType?r.height/2-o.height/2:r.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?a.top+=window.innerHeight-o.height:a.top+="container"===this.targetType?r.height-o.height:r.height}return a.left+=s,a.top+=n,a}callFlip(e){const t=this.getRelateToElement();mn(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)}callFit(e){if(0!==un(this.element,this.viewPortElement).length)if(qe(this.viewPortElement)){const t=pn(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{const t=this.checkGetBoundingClientRect(this.element),i=this.checkGetBoundingClientRect(this.viewPortElement);if(qe(t)||qe(i))return null;e&&!0===e.Y&&(i.top>t.top?this.element.style.top="0px":i.bottom<t.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(t.bottom-i.bottom)+"px")),e&&!0===e.X&&(i.right<t.right?this.element.style.left=parseInt(this.element.style.left,10)-(t.right-i.right)+"px":i.left>t.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(i.left-t.left)+"px"))}}checkCollision(){const e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))}show(e,t){if(this.wireEvents(),1e3===this.zIndex||!qe(t)){const e=qe(t)?this.element:t;this.zIndex=Nn(e),ei(this.element,{zIndex:this.zIndex})}e=qe(e)||"object"!=typeof e?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(qt([this.element],Bn),Vt([this.element],zn),this.checkCollision(),qt([this.element],zn),Vt([this.element],Bn)),qe(e)?(qt([this.element],Bn),Vt([this.element],zn),this.trigger("open")):(e.begin=()=>{this.isDestroyed||(qt([this.element],Bn),Vt([this.element],zn))},e.end=()=>{this.isDestroyed||this.trigger("open")},new xi(e).animate(this.element))}hide(e){e=qe(e)||"object"!=typeof e?this.hideAnimation:e,qe(e)?(qt([this.element],zn),Vt([this.element],Bn),this.trigger("close")):(e.end=()=>{this.isDestroyed||(qt([this.element],zn),Vt([this.element],Bn),this.trigger("close"))},new xi(e).animate(this.element)),this.unwireEvents()}getScrollableParent(e){return this.checkFixedParent(e),function(e,t){const i=getComputedStyle(e),s=[],n=/(auto|scroll)/;let o=e.parentElement;for(;o&&"HTML"!==o.tagName;){const e=getComputedStyle(o);"absolute"===i.position&&"static"===e.position||!n.test(e.overflow+e.overflowY+e.overflowX)||s.push(o),o=o.parentElement}return t||s.push(document),s}(e,this.fixedParent)}checkFixedParent(e){let t=e.parentElement;for(;t&&"HTML"!==t.tagName;){const e=getComputedStyle(t);"fixed"===e.position&&!qe(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top)?Ke(window.scrollY-parseInt(this.element.style.top)):Ke(parseInt(this.element.style.top)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,!qe(this.element)&&qe(this.element.offsetParent)&&"fixed"===e.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}}};return An([gi("auto")],e.prototype,"height",void 0),An([gi("auto")],e.prototype,"width",void 0),An([gi(null)],e.prototype,"content",void 0),An([gi("container")],e.prototype,"targetType",void 0),An([gi(null)],e.prototype,"viewPortElement",void 0),An([gi({X:"none",Y:"none"})],e.prototype,"collision",void 0),An([gi("")],e.prototype,"relateTo",void 0),An([fi({},On)],e.prototype,"position",void 0),An([gi(0)],e.prototype,"offsetX",void 0),An([gi(0)],e.prototype,"offsetY",void 0),An([gi(1e3)],e.prototype,"zIndex",void 0),An([gi(!1)],e.prototype,"enableRtl",void 0),An([gi("reposition")],e.prototype,"actionOnScroll",void 0),An([gi(null)],e.prototype,"showAnimation",void 0),An([gi(null)],e.prototype,"hideAnimation",void 0),An([yi()],e.prototype,"open",void 0),An([yi()],e.prototype,"close",void 0),An([yi()],e.prototype,"targetExitViewport",void 0),e=An([vi],e),e})();function Nn(e){let t=e.parentElement;const i=[];for(;t&&"BODY"!==t.tagName;){const e=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==e&&"static"!==s&&i.push(e),t=t.parentElement}const s=[];for(let l=0;l<document.body.children.length;l++)if(!e.isEqualNode(document.body.children[l])){const e=document.defaultView.getComputedStyle(document.body.children[l],null).getPropertyValue("z-index"),t=document.defaultView.getComputedStyle(document.body.children[l],null).getPropertyValue("position");"auto"!==e&&"static"!==t&&s.push(e)}s.push("999");const n=[];if(!qe(e.parentElement)&&"BODY"!==e.parentElement.tagName){const t=[].slice.call(e.parentElement.children);for(let i=0;i<t.length;i++)if(!e.isEqualNode(t[i])){const e=document.defaultView.getComputedStyle(t[i],null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(t[i],null).getPropertyValue("position");"auto"!==e&&"static"!==s&&n.push(e)}}const o=i.concat(s,n),r=Math.max.apply(Math,o)+1;return r>2147483647?2147483647:r}const Vn=["north-west","north","north-east","west","east","south-west","south","south-east"],qn="e-focused-handle",jn=["e-restrict-left"],Wn="e-resize-viewport",Gn=["north","west","east","south"];let _n,Un,Kn,Yn,Xn,Qn,$n,Jn,Zn,eo=0,to=0,io=0,so=0,no=0,oo=0,ro=null,lo=null,ao=null,ho=!0,co=0,po=!0;function uo(e){vo();const t=Nt("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+e),"south"===e&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),"north"===e&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),"east"===e&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),"west"===e&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),_n.appendChild(t)}function mo(e){let t;return qe(e)||(t="string"==typeof e?document.querySelector(e):e),t}function go(e){qe(e)&&(e=this);const t=_n.querySelectorAll(".e-resize-handle");for(let s=0;s<t.length;s++)Un=t[s],Bt.add(Un,"mousedown",bo,e),Bt.add(Un,"msie"===zt.info.name?"pointerdown":"touchstart",Co,e);const i=_n.querySelectorAll(".e-dialog-border-resize");if(!qe(i))for(let s=0;s<i.length;s++)Un=i[s],Bt.add(Un,"mousedown",bo,e),Bt.add(Un,"msie"===zt.info.name?"pointerdown":"touchstart",Co,e)}function fo(e){return e.indexOf("mouse")>-1?"mouse":"touch"}function bo(e){if(e.preventDefault(),_n=e.target.parentElement,vo(),no=e.pageX,oo=e.pageY,e.target.classList.add(qn),!qe(ro)&&(Zn=this,!0===ro(e,Zn)))return;const t=qe($n)?document:$n;Bt.add(t,"mousemove",wo,this),Bt.add(document,"mouseup",yo,this);for(let i=0;i<jn.length;i++)ho=!_n.classList.contains(jn[i])}function yo(e){const t="msie"===zt.info.name?"pointermove":"touchmove",i="msie"===zt.info.name?"pointerup":"touchend",s=qe($n)?document:$n,n="msie"===zt.info.name?"pointerdown":"touchstart";Bt.remove(s,"mousemove",wo),Bt.remove(s,t,wo),Bt.remove(s,n,wo),qe(document.body.querySelector(".e-focused-handle"))||document.body.querySelector(".e-focused-handle").classList.remove(qn),qe(ao)||(Zn=this,ao(e,Zn)),Bt.remove(document,"mouseup",yo),Bt.remove(document,i,yo)}function vo(){eo=parseFloat(getComputedStyle(_n,null).getPropertyValue("width").replace("px","")),to=parseFloat(getComputedStyle(_n,null).getPropertyValue("height").replace("px","")),io=_n.getBoundingClientRect().left,so=_n.getBoundingClientRect().top}function Co(e){_n=e.target.parentElement,vo();const t=e.touches?e.changedTouches[0]:e;if(no=t.pageX,oo=t.pageY,!qe(ro)&&(Zn=this,!0===ro(e,Zn)))return;const i="msie"===zt.info.name?"pointermove":"touchmove",s="msie"===zt.info.name?"pointerup":"touchend",n=qe($n)?document:$n;Bt.add(n,i,wo,this),Bt.add(document,s,yo)}function wo(e){if(e.target.classList.contains("e-resize-handle")&&e.target.classList.contains(qn)?Un=e.target:qe(document.body.querySelector(".e-focused-handle"))||(Un=document.body.querySelector(".e-focused-handle")),!qe(Un)){let t="";for(let e=0;e<Vn.length;e++)Un.classList.contains("e-"+Vn[e])&&(t=Vn[e]);switch(qe(lo)||(Zn=this,lo(e,Zn)),t){case"south":Eo(e);break;case"north":xo(e);break;case"west":Ro(e);break;case"east":Do(e);break;case"south-east":Eo(e),Do(e);break;case"south-west":Eo(e),Ro(e);break;case"north-east":xo(e),Do(e);break;case"north-west":xo(e),Ro(e)}}}function So(e){return e.getBoundingClientRect()}function Eo(e){const t=document.documentElement.clientHeight;let i=!1;const s=(e.touches?e.changedTouches[0]:e).pageY,n=So(_n);let o;qe($n)||(o=So($n)),qe($n)?qe($n)&&(t-s>=0||n.top<0)&&(i=!0):i=!0;let r=to+(s-oo);r=r>Kn?r:Kn;let l=0;qe($n)||(l=o.top);const a=qe($n)?0:$n.offsetHeight-$n.clientHeight;let h=n.top-l-a/2;if(h=h<0?0:h,n.top>0&&h+r>Yn){if(i=!1,_n.classList.contains(Wn))return;return void(_n.style.height=Yn-parseInt(h.toString(),10)+"px")}let c=0;if(i){n.top<0&&t+(n.height+n.top)>0&&(c=n.top,r+c<=30&&(r=n.height-(n.height+n.top)+30)),r+n.top>=Yn&&(_n.style.height=n.height+(t-(n.height+n.top))+"px");const e=qe($n)?c:h;r>=Kn&&r+e<=Yn&&(_n.style.height=r+"px")}}function xo(e){let t,i=!1;const s="mouse"===fo(e.type)?e.pageY:e.touches[0].pageY,n=So(_n);qe($n)||(t=So($n)),(!qe($n)&&n.top-t.top>0||qe($n)&&s>0)&&(i=!0);const o=to-(s-oo);if(i&&o>=Kn&&o<=Yn){let e=0;qe($n)||(e=t.top);let i=so-e+(s-oo);i=i>0?i:1,_n.style.height=o+"px",_n.style.top=i+"px"}}function Ro(e){const t=document.documentElement.clientWidth;let i,s=!1;qe($n)||(i=So($n));const n="mouse"===fo(e.type)?e.pageX:e.touches[0].pageX,o=So(_n),r=qe($n)?0:$n.offsetWidth-$n.clientWidth;let l=qe($n)?0:i.left,a=qe($n)?0:i.width;qe(Jn)&&(qe($n)?Jn=t:(Jn=o.left-l-r/2+o.width,Jn+=a-r-Jn)),(!qe($n)&&Math.floor(o.left-i.left+o.width+(i.right-o.right))-r<=Qn||qe($n)&&n>=0)&&(s=!0);let h=eo-(n-no);if(ho&&(h=h>Jn?Jn:h),s&&h>=Xn&&h<=Qn){let e=0;qe($n)||(e=i.left);let t=io-e+(n-no);t=t>0?t:1,h!==co&&po&&(_n.style.width=h+"px"),ho&&(_n.style.left=t+"px",po=1!==t)}co=h}function Do(e){const t=document.documentElement.clientWidth;let i,s=!1;qe($n)||(i=So($n));const n=(e.touches?e.changedTouches[0]:e).pageX,o=So(_n);(!qe($n)&&(o.left-i.left+o.width<=Qn||o.right-i.left>=o.width)||qe($n)&&t-n>0)&&(s=!0);const r=eo+(n-no);let l=0;if(qe($n)||(l=i.left),o.left-l+r>Qn){if(s=!1,_n.classList.contains(Wn))return;_n.style.width=Qn-(o.left-l)+"px"}s&&r>=Xn&&r<=Qn&&(_n.style.width=r+"px")}function To(){const e=_n.querySelectorAll(".e-resize-handle");for(let i=0;i<e.length;i++)Kt(e[i]);const t=_n.querySelectorAll(".e-dialog-border-resize");if(!qe(t))for(let i=0;i<t.length;i++)Kt(t[i])}var Mo=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let Io=(()=>{class e extends Ai{}return Mo([gi(!0)],e.prototype,"isFlat",void 0),Mo([gi()],e.prototype,"buttonModel",void 0),Mo([gi("Button")],e.prototype,"type",void 0),Mo([yi()],e.prototype,"click",void 0),e})(),ko=(()=>{class e extends Ai{}return Mo([gi("Fade")],e.prototype,"effect",void 0),Mo([gi(400)],e.prototype,"duration",void 0),Mo([gi(0)],e.prototype,"delay",void 0),e})();const Fo="e-dialog",Ao="e-rtl",Oo="e-dlg-header-content",Lo="e-dlg-header",Po="e-footer-content",zo="e-dlg-modal",Bo="e-icon-dlg-close",Ho="e-dlg-target",No="e-scroll-disabled",Vo="e-device",qo="e-dlg-fullscreen",jo="e-popup-open",Wo="Information",Go="e-scroll-disabled",_o="e-alert-dialog",Uo="e-confirm-dialog",Ko="e-dlg-resizable",Yo="e-restrict-left",Xo="e-resize-viewport",Qo="user action";let $o=(()=>{let e=class extends Bi{constructor(e,t){super(e,t),this.dlgClosedBy=Qo}render(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=Ke(this.minHeight)),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()}preRender(){if(this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=e=>{this.dlgClosedBy="close icon",this.hide(e)},this.dlgOverlayClickEventHandler=e=>{this.dlgClosedBy="overlayClick",e.preventFocus=!1,this.trigger("overlayClick",e,e=>{e.preventFocus||this.focusContent(),this.dlgClosedBy=Qo})},this.l10n=new Qi("dialog",{close:"Close"},this.locale),this.checkPositionData(),qe(this.target)){const e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=e}}isNumberValue(e){return/^[-+]?\d*\.?\d+$/.test(e)}checkPositionData(){if(!qe(this.position)){if(!qe(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){const e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=e}if(!qe(this.position.Y)&&"number"!=typeof this.position.Y&&this.isNumberValue(this.position.Y)){const e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=e}}}getEle(e,t){let i;for(let s=0;s<e.length;s++)if(e[s].classList.contains(t)){i=e[s];break}return i}getMinHeight(){let e="0px",t="0px";qe(this.element.querySelector("."+Oo))||(e=getComputedStyle(this.headerContent).height);const i=this.getEle(this.element.children,Po);qe(i)||(t=getComputedStyle(i).height);const s=parseInt(e.slice(0,e.indexOf("p")),10),n=parseInt(t.slice(0,t.indexOf("p")),10);var o;return o=s+30+(isNaN(n)?0:n),Kn=o,s+30+n}onResizeStart(e,t){return t.trigger("resizeStart",e),e.cancel}onResizing(e,t){t.trigger("resizing",e)}onResizeComplete(e,t){t.trigger("resizeStop",e)}setResize(){if(this.enableResize){if(this.isBlazorServerRender()&&!qe(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add(Ko);const e=getComputedStyle(this.element).minHeight,t=getComputedStyle(this.element).minWidth;let i="";for(let s=0;s<this.resizeHandles.length;s++){if("All"===this.resizeHandles[s]){i="south north east west north-east north-west south-east south-west";break}{let e="";switch(this.resizeHandles[s].toString()){case"SouthEast":e="south-east";break;case"SouthWest":e="south-west";break;case"NorthEast":e="north-east";break;case"NorthWest":e="north-west";break;default:e=this.resizeHandles[s].toString()}i+=e.toLocaleLowerCase()+" "}}this.enableRtl&&"south-east"===i.trim()?i="south-west":this.enableRtl&&"south-west"===i.trim()&&(i="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(Yo):this.isModal&&this.target===document.body&&this.element.classList.add(Xo),function(e){ro=e.resizeBegin,lo=e.resizing,ao=e.resizeComplete,_n=mo(e.element),$n=mo(e.boundary);const t=e.direction.split(" ");for(let i=0;i<t.length;i++)if(Gn.indexOf(t[i])>=0&&t[i])uo(t[i]);else if(""!==t[i].trim()){const e=Nt("div",{className:"e-icons e-resize-handle e-"+t[i]});_n.appendChild(e)}Kn=e.minHeight,Xn=e.minWidth,Qn=e.maxWidth,Yn=e.maxHeight,e.proxy&&e.proxy.element&&e.proxy.element.classList.contains("e-dialog")?go(e.proxy):go()}({element:this.element,direction:i,minHeight:parseInt(e.slice(0,t.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(t.slice(0,t.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else To(),this.unWireWindowResizeEvent(),this.element.classList.remove(this.isModal?Yo:Xo),this.element.classList.remove(Ko)}getFocusElement(e){const t=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:t[t.length-1]}}keyDown(e){if(9===e.keyCode&&this.isModal){let t;qe(this.btnObj)||(t=this.btnObj[this.btnObj.length-1]),qe(this.btnObj)&&!qe(this.ftrTemplateContent)&&(t=this.getFocusElement(this.ftrTemplateContent)),qe(this.btnObj)&&qe(this.ftrTemplateContent)&&!qe(this.contentEle)&&(t=this.getFocusElement(this.contentEle)),qe(t)||document.activeElement!==t.element||e.shiftKey||(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),qe(t)||t.element.focus())}const t=document.activeElement,i=["input","textarea"].indexOf(t.tagName.toLowerCase())>-1;let s=!1;if(i||(s=t.hasAttribute("contenteditable")&&"true"===t.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape&&(this.dlgClosedBy="escape",this.hide(e)),13===e.keyCode&&!e.ctrlKey&&"textarea"!==t.tagName.toLowerCase()&&i&&!qe(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===t.tagName.toLowerCase()||s)&&!qe(this.primaryButtonEle)){let t;this.buttons.some((e,i)=>{t=i;let s=e.buttonModel;return!qe(s)&&!0===s.isPrimary})&&"function"==typeof this.buttons[t].click&&setTimeout(()=>{this.buttons[t].click.call(this,e)})}}initialize(){qe(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||Vt([this.element],Fo),zt.isDevice&&Vt([this.element],Vo),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()}initRender(){if(this.initialRender=!0,this.isBlazorServerRender()||Xt(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&qe(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&qe(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""===this.header||qe(this.header)||this.setHeader(),this.showCloseIcon&&this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||qe(this.footerTemplate)?qe(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&(qe(this.buttons[0].buttonModel)||""!==this.footerTemplate||this.setButton()),this.allowDragging&&!qe(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(Xt(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&qe(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(let e=0,t=this.dlgContainer.children;e<t.length;e++)t[e].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=t[e])}if(!0!==this.element.classList.contains(_o)&&!0!==this.element.classList.contains(Uo)&&!qe(this.element.parentElement)){const e=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),e.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}qe(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new Hn(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:e=>{const t={container:this.isModal?this.dlgContainer:this.element,element:this.element,target:this.target,preventFocus:!1};this.enableResize&&this.resetResizeIcon(),this.trigger("open",t,e=>{e.preventFocus||this.focusContent()})},close:e=>{this.isModal&&Vt([this.dlgOverlay],"e-fade"),this.unBindEvent(this.element),this.isModal&&(this.dlgContainer.style.display="none"),this.trigger("close",this.closeArgs);const t=document.activeElement;qe(t)||qe(t.blur)||t.blur(),qe(this.storeActiveElement)||qe(this.storeActiveElement.focus)||this.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(Vt([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1}resetResizeIcon(){const e=this.getMinHeight();if(this.targetEle.offsetHeight<e){const t=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));qe(t)||(t.style.bottom="-"+e.toString()+"px")}}setOverlayZindex(e){let t;t=qe(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()}positionChange(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()}setPopupPosition(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})}setAllowDragging(){this.dragObj=new Wi(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:e=>{this.trigger("dragStart",e,e=>{})},dragStop:e=>{this.isModal&&(qe(this.position)||this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y),this.element.style.position="relative"),this.trigger("dragStop",e),this.element.classList.remove(Yo)},drag:e=>{this.trigger("drag",e)}}),qe(this.targetEle)||(this.dragObj.dragArea=this.targetEle)}setButton(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(let e=0;e<this.buttons.length;e++){const t=qe(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),i=this.createElement("button",{attrs:{type:t}});this.buttonContent.push(i.outerHTML)}this.setFooterTemplate()}let e;for(let t=0,i=this.element.children;t<i.length;t++)i[t].classList.contains(Po)&&(e=i[t].querySelectorAll("button"));for(let t=0;t<this.buttons.length;t++)this.isBlazorServerRender()||(this.btnObj[t]=new _s.a(this.buttons[t].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector(".e-footer-content")),!qe(this.ftrTemplateContent)&&e.length>0&&("function"==typeof this.buttons[t].click&&Bt.add(e[t],"click",this.buttons[t].click,this),"object"==typeof this.buttons[t].click&&Bt.add(e[t],"click",this.buttonClickHandler.bind(this,t),this)),this.isBlazorServerRender()||qe(this.ftrTemplateContent)||(this.btnObj[t].appendTo(this.ftrTemplateContent.children[t]),this.buttons[t].isFlat&&this.btnObj[t].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])}buttonClickHandler(e){this.trigger("buttons["+e+"].click",{})}setContent(){Xt(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(qe(this.content)||""===this.content)&&this.initialRender||("string"!=typeof this.content?this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content"):this.contentEle.innerHTML=this.sanitizeHelper(this.content)),qe(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(this.isBlazorServerRender()||!zt.isIE||""!==this.element.style.width||qe(this.width)||(this.element.style.width=Ke(this.width)),this.setMaxHeight())}setTemplate(e,t,i){let s,n,o;n=t.classList.contains(Lo)?this.element.id+"header":t.classList.contains(Po)?this.element.id+"footerTemplate":this.element.id+"content",qe(e.outerHTML)?"string"!=typeof e?(s=Ds(e),o=e):t.innerHTML=this.sanitizeHelper(e):t.appendChild(e);const r=[];if(!qe(s)){const e=!0;for(const t of s({},this,i,n,e))r.push(t);_t([].slice.call(r),t)}}sanitizeHelper(e){if(this.enableHtmlSanitizer){const t=As.beforeSanitize();Ve(t,t,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",t),t.cancel&&!qe(t.helper)?e=t.helper(e):t.cancel||(e=As.serializeValue(t,e))}return e}setMaxHeight(){if(!this.allowMaxHeight)return;const e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!qe(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,zt.isIE&&"auto"===this.height&&!qe(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}setEnableRTL(){this.isBlazorServerRender()||(this.enableRtl?Vt([this.element],Ao):qt([this.element],Ao)),qe(this.element.querySelector(".e-resize-handle"))||(To(),this.setResize())}setTargetContent(){if(qe(this.content)||""===this.content){const e=""!==this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"");(this.element.children.length>0||e)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(e=>{8!==e.nodeType&&this.innerContentElement.appendChild(e)}))}}setHeader(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:Lo}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),Xt(this.element,{"aria-labelledby":this.element.id}),this.element.insertBefore(this.headerContent,this.element.children[0])}setFooterTemplate(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:Po}),""===this.footerTemplate||qe(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)}createHeaderContent(){qe(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:Oo}))}renderCloseIcon(){this.closeIcon=this.createElement("button",{className:"e-dlg-closeicon-btn",attrs:{type:"button"}}),this.closeIconBtnObj=new _s.a({cssClass:"e-flat",iconCss:Bo+" e-icons"}),this.closeIconTitle(),qe(this.headerContent)?(this.createHeaderContent(),Gt([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):Gt([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon)}closeIconTitle(){this.l10n.setLocale(this.locale);const e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)}setCSSClass(e){this.cssClass&&Vt([this.element],this.cssClass.split(" ")),e&&qt([this.element],e.split(" "))}setIsModal(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.element.classList.remove(jo),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),Vt([this.element],zo),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)}getValidFocusNode(e){let t;for(let i=0;i<e.length;i++){if(t=e[i],(t.clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;t=null}return t}focusableElements(e){if(!qe(e)){const t=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(t)}return null}getAutoFocusNode(e){let t=e.querySelector(".e-dlg-closeicon-btn");const i=e.querySelectorAll("[autofocus]");let s=this.getValidFocusNode(i);if(qe(s)){if(s=this.focusableElements(this.contentEle),!qe(s))return s;if(!qe(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=s;return t}disableElement(e,t){const i=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(i)for(;e;e=e.parentNode)if(e instanceof Element&&i.call(e,t))return e;return null}focusContent(){const e=this.getAutoFocusNode(this.element),t=qe(e)?this.element:e,i=zt.userAgent;(i.indexOf("MSIE ")>0||i.indexOf("Trident/")>0)&&this.element.focus(),t.focus(),this.bindEvent(this.element)}bindEvent(e){Bt.add(e,"keydown",this.keyDown,this)}unBindEvent(e){Bt.remove(e,"keydown",this.keyDown)}updateSanitizeContent(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))}isBlazorServerRender(){return!1}getModuleName(){return"dialog"}onPropertyChanged(e,t){if(this.element.classList.contains(Fo))for(const i of Object.keys(e))switch(i){case"content":qe(this.content)||""===this.content?qe(this.contentEle)||(Kt(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),qe(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?this.isBlazorServerRender()&&!qe(this.element.querySelector(".e-dlg-content"))||this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"==typeof this.content?(this.clearTemplate(["content"]),Kt(this.contentEle),this.contentEle=null,this.setContent()):"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||qe(this.header)?this.headerEle&&(Kt(this.headerEle),this.headerEle=null):this.isBlazorServerRender()&&!qe(this.element.querySelector(".e-dlg-header-content"))||this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||qe(this.footerTemplate)){if(!this.ftrTemplateContent)return;Kt(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.isBlazorServerRender()&&!qe(this.element.querySelector(".e-footer-content"))||this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(Bo).length>0?this.showCloseIcon||""!==this.header&&!qe(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():Kt(this.closeIcon):(Kt(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":ei(this.element,{height:Ke(e.height)});break;case"width":ei(this.element,{width:Ke(e.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(t.cssClass);break;case"buttons":{const e=this.buttons.length;qe(this.ftrTemplateContent)||this.isBlazorServerRender()||(Kt(this.ftrTemplateContent),this.ftrTemplateContent=null);for(let t=0;t<e;t++)qe(this.buttons[t].buttonModel)||(this.footerTemplate="",this.setButton());break}case"allowDragging":this.allowDragging&&!qe(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){const e=qe(t.position.X)?this.position.X:t.position.X,i=qe(t.position.Y)?this.position.Y:t.position.Y;this.dlgContainer.classList.contains("e-dlg-"+e+"-"+i)&&this.dlgContainer.classList.remove("e-dlg-"+e+"-"+i)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize()}}setTarget(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()}updateIsModal(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)qe(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",qe(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(qt([this.element],zo),qt([document.body],[Ho,No]),Kt(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&Bt.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}setzIndex(e,t){const i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.zIndex=Nn(e),this.isProtectedOnChange=i,t&&(this.popupObj.zIndex=this.zIndex)}windowResizeHandler(){Qn=this.targetEle.clientWidth,Yn=this.targetEle.clientHeight,this.setMaxHeight()}getPersistData(){return this.addOnPersist([])}destroy(){if(this.isDestroyed)return;const e=[Ao,zo,Ko,Yo,qo,Vo],t=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(qt([this.targetEle],[Ho,No]),!qe(this.element)&&this.element.classList.contains(qo)&&qt([document.body],[Ho,No]),this.isModal&&qt([qe(this.targetEle)?document.body:this.targetEle],No),this.unWireEvents(),!qe(this.btnObj))for(let i=0;i<this.btnObj.length;i++)this.btnObj[i].destroy();if(qe(this.dragObj)||this.dragObj.destroy(),!qe(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),qt([this.element],e),qe(this.cssClass)||""===this.cssClass||qt([this.element],this.cssClass.split(" ")),qe(this.refElement)||qe(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),Kt(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(Kt(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),Kt(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!qe(this.element.children))for(let i=0;i<=this.element.children.length;i++)i-=i,Kt(this.element.children[i]);for(let i=0;i<t.length;i++)this.element.removeAttribute(t[i]);this.isBlazorServerRender()?this.isDestroyed=!0:super.destroy(),this.isReact&&this.clearTemplate()}wireWindowResizeEvent(){window.addEventListener("resize",this.windowResizeHandler.bind(this))}unWireWindowResizeEvent(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))}wireEvents(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&Bt.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&Bt.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}unWireEvents(){if(this.showCloseIcon&&Bt.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&Bt.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!qe(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(let e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&Bt.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)}refreshPosition(){this.popupObj.refreshPosition()}show(e){if(this.element.classList.contains(Fo)){if(!this.element.classList.contains(jo)||!qe(e)){qe(e)||this.fullScreen(e);const t={cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",t,e=>{if(!e.cancel){this.element.style.maxHeight!==t.maxHeight&&(this.allowMaxHeight=!1,this.element.style.maxHeight=t.maxHeight),this.storeActiveElement=document.activeElement,this.element.tabIndex=-1,this.isModal&&!qe(this.dlgOverlay)&&(this.dlgOverlay.style.display="block",this.dlgContainer.style.display="flex",qt([this.dlgOverlay],"e-fade"),qe(this.targetEle)?Vt([document.body],[Ho,No]):(this.dlgContainer.style.position=this.targetEle===document.body?"fixed":"absolute",this.dlgOverlay.style.position="absolute",this.element.style.position="relative",Vt([this.targetEle],[Ho,No])));const e={name:this.animationSettings.effect+"In",duration:this.animationSettings.duration,delay:this.animationSettings.delay},i=this.isModal?this.element.parentElement:this.element;this.calculatezIndex&&(this.setzIndex(i,!0),ei(this.element,{zIndex:this.zIndex}),this.isModal&&this.setOverlayZindex(this.zIndex)),"None"===this.animationSettings.effect?this.popupObj.show():this.popupObj.show(e),this.dialogOpen=!0;const s=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!0,this.preventVisibility=!0,this.isProtectedOnChange=s}})}this.isReact&&this.renderReactTemplates()}}hide(e){if(this.element.classList.contains(Fo)&&this.preventVisibility){const t={cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e,closedBy:this.dlgClosedBy};this.closeArgs=t,this.trigger("beforeClose",t,e=>{if(!e.cancel){this.isModal&&(qe(this.targetEle)||qt([this.targetEle],[Ho,No])),document.body.classList.contains(Ho)&&document.body.classList.contains(No)&&qt([document.body],[Ho,No]);const e={name:this.animationSettings.effect+"Out",duration:this.animationSettings.duration,delay:this.animationSettings.delay};"None"===this.animationSettings.effect?this.popupObj.hide():this.popupObj.hide(e),this.dialogOpen=!1;const t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!1,this.preventVisibility=!1,this.isProtectedOnChange=t}this.dlgClosedBy=Qo})}}fullScreen(e){if(e){Vt([this.element],qo);const e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=qe(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=e,Vt([document.body],[Ho,No]),this.allowDragging&&!qe(this.dragObj)&&this.dragObj.destroy()}else qt([this.element],qo),qt([document.body],[Ho,No]),this.allowDragging&&!qe(this.headerContent)&&this.setAllowDragging();return e}getButtons(e){return qe(e)?this.btnObj:this.btnObj[e]}};return Mo([gi("")],e.prototype,"content",void 0),Mo([gi(!0)],e.prototype,"enableHtmlSanitizer",void 0),Mo([gi(!1)],e.prototype,"showCloseIcon",void 0),Mo([gi(!1)],e.prototype,"isModal",void 0),Mo([gi("")],e.prototype,"header",void 0),Mo([gi(!0)],e.prototype,"visible",void 0),Mo([gi(!1)],e.prototype,"enableResize",void 0),Mo([gi(["South-East"])],e.prototype,"resizeHandles",void 0),Mo([gi("auto")],e.prototype,"height",void 0),Mo([gi("")],e.prototype,"minHeight",void 0),Mo([gi("100%")],e.prototype,"width",void 0),Mo([gi("")],e.prototype,"cssClass",void 0),Mo([gi(1e3)],e.prototype,"zIndex",void 0),Mo([gi(null)],e.prototype,"target",void 0),Mo([gi("")],e.prototype,"footerTemplate",void 0),Mo([gi(!1)],e.prototype,"allowDragging",void 0),Mo([bi([{}],Io)],e.prototype,"buttons",void 0),Mo([gi(!0)],e.prototype,"closeOnEscape",void 0),Mo([fi({},ko)],e.prototype,"animationSettings",void 0),Mo([fi({X:"center",Y:"center"},On)],e.prototype,"position",void 0),Mo([yi()],e.prototype,"created",void 0),Mo([yi()],e.prototype,"open",void 0),Mo([yi()],e.prototype,"beforeSanitizeHtml",void 0),Mo([yi()],e.prototype,"beforeOpen",void 0),Mo([yi()],e.prototype,"close",void 0),Mo([yi()],e.prototype,"beforeClose",void 0),Mo([yi()],e.prototype,"dragStart",void 0),Mo([yi()],e.prototype,"dragStop",void 0),Mo([yi()],e.prototype,"drag",void 0),Mo([yi()],e.prototype,"overlayClick",void 0),Mo([yi()],e.prototype,"resizeStart",void 0),Mo([yi()],e.prototype,"resizing",void 0),Mo([yi()],e.prototype,"resizeStop",void 0),Mo([yi()],e.prototype,"destroyed",void 0),e=Mo([vi],e),e})();var Jo;!function(e){function t(e,t){const i=new $o(e);return i.appendTo(t),i}function i(e,t){return e.header=qe(t.title)?Wo:t.title,e.content=qe(t.content)?"":t.content,e.isModal=!!qe(t.isModal)||t.isModal,e.showCloseIcon=!qe(t.showCloseIcon)&&t.showCloseIcon,e.allowDragging=!qe(t.isDraggable)&&t.isDraggable,e.closeOnEscape=!qe(t.closeOnEscape)&&t.closeOnEscape,e.position=qe(t.position)?{X:"center",Y:"top"}:t.position,e.animationSettings=qe(t.animationSettings)?{effect:"Fade",duration:400,delay:0}:t.animationSettings,e.cssClass=qe(t.cssClass)?"":t.cssClass,e.zIndex=qe(t.zIndex)?1e3:t.zIndex,e.open=qe(t.open)?null:t.open,e}function s(e,t,i){const s=i;return qe(t.text)||(s.buttonModel.content=t.text),qe(t.icon)||(s.buttonModel.iconCss=t.icon),qe(t.cssClass)||(s.buttonModel.cssClass=t.cssClass),qe(t.click)||(s.click=t.click),s}e.alert=function(e){const n=Nt("div",{className:_o});let o;return document.body.appendChild(n),o=t("string"==typeof e?{content:e,position:{X:"center",Y:"top"},isModal:!0,header:Wo,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function(e){let t={buttons:[]};return t=i(t,e),t=function(e,t){const i=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return qe(t.okButton)?e.buttons=i:e.buttons[0]=s(0,t.okButton,i[0]),e}(t,e),t}(e),n),o.close=()=>{e&&e.close&&e.close.apply(o),o.destroy(),o.element.classList.contains("e-dlg-modal")?(o.element.parentElement.remove(),o.target.classList.remove(Go)):o.element.remove()},o},e.confirm=function(e){const n=Nt("div",{className:Uo});let o;return document.body.appendChild(n),o=t("string"==typeof e?{position:{X:"center",Y:"top"},content:e,isModal:!0,header:Wo,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function(e){let t={buttons:[]};return t=i(t,e),t=function(e,t){const i={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},n={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return e.buttons[0]=qe(t.okButton)?i:s(0,t.okButton,i),e.buttons[1]=qe(t.cancelButton)?n:s(0,t.cancelButton,n),e}(t,e),t}(e),n),o.close=()=>{e&&e.close&&e.close.apply(o),o.destroy(),o.element.classList.contains("e-dlg-modal")?(o.element.parentElement.remove(),o.target.classList.remove(Go)):o.element.remove()},o}}(Jo||(Jo={}));var Zo=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const er="e-tooltip",tr="e-rtl",ir="e-tip-content",sr="e-arrow-tip",nr="e-arrow-tip-inner",or="e-tip-bottom",rr="e-tip-top",lr="e-tip-left",ar="e-tip-right",hr="e-popup-open",cr="e-popup-close";let dr=(()=>{class e extends Ai{}return Zo([gi({effect:"FadeIn",duration:150,delay:0})],e.prototype,"open",void 0),Zo([gi({effect:"FadeOut",duration:150,delay:0})],e.prototype,"close",void 0),e})(),pr=(()=>{let e=class extends Bi{constructor(e,t){super(e,t),this.mouseMoveEvent=null,this.mouseMoveTarget=null}initialize(){this.formatPosition(),Vt([this.element],er)}formatPosition(){0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?[this.tooltipPositionY,this.tooltipPositionX]=this.position.split(/(?=[A-Z])/):[this.tooltipPositionX,this.tooltipPositionY]=this.position.split(/(?=[A-Z])/)}renderArrow(){this.setTipClass(this.position);const e=this.createElement("div",{className:sr+" "+this.tipClass});e.appendChild(this.createElement("div",{className:"e-arrow-tip-outer "+this.tipClass})),e.appendChild(this.createElement("div",{className:nr+" "+this.tipClass})),this.tooltipEle.appendChild(e)}setTipClass(e){this.tipClass=0===e.indexOf("Right")?lr:0===e.indexOf("Bottom")?rr:0===e.indexOf("Left")?ar:or}renderPopup(e){const t=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new Hn(this.tooltipEle,{height:this.height,width:this.width,position:{X:t.left,Y:t.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})}getTooltipPosition(e){this.tooltipEle.style.display="block";const t=en(e,this.tooltipPositionX,this.tooltipPositionY),i=this.calculateTooltipOffset(this.position),s=this.collisionFlipFit(e,t.left+i.left,t.top+i.top);return this.tooltipEle.style.display="",s}windowResize(){this.reposition(this.findTarget())}reposition(e){if(this.popupObj&&e){const t=this.getTooltipPosition(e);this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind()}}openPopupHandler(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)}closePopupHandler(){this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)}calculateTooltipOffset(e){const t={top:0,left:0},i=this.tooltipEle.offsetWidth,s=this.tooltipEle.offsetHeight,n=Qt("."+sr,this.tooltipEle),o=n?n.offsetWidth:0,r=n?n.offsetHeight:0;let l=this.showTipPointer?0:8;const a=r/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),h=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(l+=2),e){case"RightTop":t.left+=o+l,t.top-=s-a;break;case"RightCenter":t.left+=o+l,t.top-=s/2;break;case"RightBottom":t.left+=o+l,t.top-=a;break;case"BottomRight":t.top+=r+l,t.left-=h;break;case"BottomCenter":t.top+=r+l,t.left-=i/2;break;case"BottomLeft":t.top+=r+l,t.left-=i-h;break;case"LeftBottom":t.left-=o+i+l,t.top-=a;break;case"LeftCenter":t.left-=o+i+l,t.top-=s/2;break;case"LeftTop":t.left-=o+i+l,t.top-=s-a;break;case"TopLeft":t.top-=s+r+l,t.left-=i-h;break;case"TopRight":t.top-=s+r+l,t.left-=h;break;default:t.top-=s+r+l,t.left-=i/2}return t.left+=this.offsetX,t.top+=this.offsetY,t}updateTipPosition(e){const t=$t(".e-arrow-tip,.e-arrow-tip-outer,."+nr,this.tooltipEle);qt(t,[or,rr,lr,ar]),this.setTipClass(e),Vt(t,this.tipClass)}adjustArrow(e,t,i,s){if(!1===this.showTipPointer)return;let n,o;this.updateTipPosition(t),this.tooltipEle.style.display="block";const r=this.tooltipEle.clientWidth,l=this.tooltipEle.clientHeight,a=Qt("."+sr,this.tooltipEle),h=Qt("."+nr,this.tooltipEle),c=a.offsetWidth,d=a.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===or||this.tipClass===rr){if(this.tipClass===or?(o="99.9%",h.style.top="-"+(d-2)+"px"):(o=-(d-1)+"px",h.style.top="-"+(d-6)+"px"),e){const t="Center"!==i||r>e.offsetWidth||this.mouseTrail;n=t&&"Left"===i||!t&&"End"===this.tipPointerPosition?r-c-2+"px":t&&"Right"===i||!t&&"Start"===this.tipPointerPosition?"2px":r/2-c/2+"px"}}else{this.tipClass===ar?(n="99.9%",h.style.left="-"+(c-2)+"px"):(n=-(c-1)+"px",h.style.left=c-2-c+"px");const t="Center"!==s||l>e.offsetHeight||this.mouseTrail;o=t&&"Top"===s||!t&&"End"===this.tipPointerPosition?l-d-2+"px":t&&"Bottom"===s||!t&&"Start"===this.tipPointerPosition?"2px":l/2-d/2+"px"}a.style.top=o,a.style.left=n}renderContent(e){const t=Qt("."+ir,this.tooltipEle);if(this.cssClass&&Vt([this.tooltipEle],this.cssClass.split(" ")),e&&!qe(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),qe(this.content))e&&!qe(e.getAttribute("data-content"))&&(t.innerHTML=e.getAttribute("data-content"));else if(t.innerHTML="",this.content instanceof HTMLElement)t.appendChild(this.content);else if("string"==typeof this.content)this.enableHtmlSanitizer&&this.setProperties({content:As.sanitize(this.content)},!0),t[this.enableHtmlParse?"innerHTML":"textContent"]=this.content;else{const e=Ds(this.content)({},this,"content",this.element.id+"content",void 0,void 0,t);e&&_t(e,t),this.renderReactTemplates()}}renderCloseIcon(){if(!this.isSticky)return;const e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),Bt.add(e,zt.touchStartEvent,this.onStickyClose,this)}addDescribedBy(e,t){const i=(e.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),Xt(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})}removeDescribedBy(e){const t=e.getAttribute("data-tooltip-id"),i=(e.getAttribute("aria-describedby")||"").split(/\s+/),s=i.indexOf(t);-1!==s&&i.splice(s,1),e.removeAttribute("data-tooltip-id");const n=i.join(" ").trim();n?e.setAttribute("aria-describedby",n):e.removeAttribute("aria-describedby")}tapHoldHandler(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)}touchEndHandler(e){this.isSticky||(this.autoCloseTimer=setTimeout(()=>{this.close()},1500))}targetClick(e){let t;t=this.target?Zt(e.target,this.target):this.element,qe(t)||(null===t.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,t))}targetHover(e){let t;if(t=this.target?Zt(e.target,this.target):this.element,qe(t)||null!==t.getAttribute("data-tooltip-id")&&0===this.closeDelay)return;const i=[].slice.call($t('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));for(const s of i)this.restoreElement(s);this.showTooltip(t,this.animation.open,e)}mouseMoveBeforeOpen(e){this.mouseMoveEvent=e}mouseMoveBeforeRemove(){this.mouseMoveTarget&&Bt.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)}showTooltip(e,t,i){clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,Bt.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:this.tooltipEle,isInteracted:!qe(i)},this.trigger("beforeRender",this.tooltipEventArgs,(s=>{this.beforeRenderCallback(s,e,i,t)}).bind(this))}beforeRenderCallback(e,t,i,s){e.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,qe(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?We(this.element.getAttribute("id")):We("tooltip"),this.tooltipEle=this.createElement("div",{className:"e-tooltip-wrap e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+Ke(this.width)+";height:"+Ke(this.height)+";position:absolute;"}),this.tooltipBeforeRender(t,this),this.tooltipAfterRender(t,i,s,this)):t&&(this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),xi.stop(this.tooltipEle),this.reposition(t),this.tooltipAfterRender(t,i,s,this)))}tooltipBeforeRender(e,t){e&&(zt.isDevice&&Vt([t.tooltipEle],"e-bigger"),"auto"!==t.width&&(t.tooltipEle.style.maxWidth=Ke(t.width)),t.tooltipEle.appendChild(t.createElement("div",{className:ir})),document.body.appendChild(t.tooltipEle),qt([t.tooltipEle],"e-hidden"),t.addDescribedBy(e,t.ctrlId+"_content"),t.renderContent(e),Vt([t.tooltipEle],hr),t.showTipPointer&&t.renderArrow(),t.renderCloseIcon(),t.renderPopup(e),t.adjustArrow(e,t.position,t.tooltipPositionX,t.tooltipPositionY),xi.stop(t.tooltipEle),t.reposition(e))}tooltipAfterRender(e,t,i,s){if(e){qt([s.tooltipEle],hr),Vt([s.tooltipEle],cr),s.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:e,event:t||null,element:s.tooltipEle,isInteracted:!qe(t)},s.needTemplateReposition()&&!s.mouseTrail&&(s.tooltipEle.style.display="none");const n=n=>{s.beforeOpenCallback(n,e,i,t)};s.trigger("beforeOpen",s.tooltipEventArgs,n.bind(s))}}beforeOpenCallback(e,t,i,s){if(e.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(t);else{let e={name:i.effect,duration:i.duration,delay:i.delay,timingFunction:"easeOut"};"None"===i.effect&&(e=void 0),this.openDelay>0?this.showTimer=setTimeout(()=>{this.mouseTrail&&Bt.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this),this.popupObj&&(this.popupObj.show(e,t),this.mouseMoveEvent&&this.mouseTrail&&this.onMouseMove(this.mouseMoveEvent))},this.openDelay):this.popupObj&&this.popupObj.show(e,t)}s&&this.wireMouseEvents(s,t)}needTemplateReposition(){return!qe(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef}checkCollision(e,t,i){const s={left:t,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},n=un(this.tooltipEle,this.checkCollideTarget(),t,i);return n.length>0&&(s.horizontal=n.indexOf("left")>=0?"Right":n.indexOf("right")>=0?"Left":this.tooltipPositionX,s.vertical=n.indexOf("top")>=0?"Bottom":n.indexOf("bottom")>=0?"Top":this.tooltipPositionY),s}collisionFlipFit(e,t,i){const s=this.checkCollision(e,t,i);let n=s.position;if(this.tooltipPositionY!==s.vertical&&(n=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?s.vertical+this.tooltipPositionX:this.tooltipPositionX+s.vertical),this.tooltipPositionX!==s.horizontal&&(0===n.indexOf("Left")&&(s.vertical="LeftTop"===n||"LeftCenter"===n?"Top":"Bottom",n=s.vertical+"Left"),0===n.indexOf("Right")&&(s.vertical="RightTop"===n||"RightCenter"===n?"Top":"Bottom",n=s.vertical+"Right"),s.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:n},this.trigger("beforeCollision",this.tooltipEventArgs),s.position!==n){const t=en(e,s.horizontal,s.vertical);this.adjustArrow(e,n,s.horizontal,s.vertical);const i=this.calculateTooltipOffset(n);i.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(n.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,i.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(n.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,s.position=n,s.left=t.left+i.left,s.top=t.top+i.top}else this.adjustArrow(e,n,s.horizontal,s.vertical);const o={left:s.left,top:s.top},r=pn(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},o).left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===n.indexOf("Bottom")||0===n.indexOf("Top"))){const e=Qt("."+sr,this.tooltipEle);let t=parseInt(e.style.left,10)-(r-s.left);t<0?t=0:t+e.offsetWidth>this.tooltipEle.clientWidth&&(t=this.tooltipEle.clientWidth-e.offsetWidth),e.style.left=t.toString()+"px"}return this.tooltipEle.style.display="",o.left=r,o}checkCollideTarget(){return!this.windowCollision&&this.target?this.element:null}hideTooltip(e,t,i){this.closeDelay>0?(clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.hideTimer=setTimeout(()=>{this.closeDelay&&this.tooltipEle&&this.isTooltipOpen||this.tooltipHide(e,t,i)},this.closeDelay)):this.tooltipHide(e,t,i)}tooltipHide(e,t,i){let s;s=t?this.target?i||t.target:this.element:Qt('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:s,event:t||null,element:this.tooltipEle,isInteracted:!qe(t)},this.trigger("beforeClose",this.tooltipEventArgs,t=>{t.cancel?this.isHidden=!1:(this.mouseMoveBeforeRemove(),this.popupHide(e,s))})}popupHide(e,t){t&&this.restoreElement(t),this.isHidden=!0;let i={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(i=void 0),this.popupObj&&this.popupObj.hide(i)}restoreElement(e){this.unwireMouseEvents(e),qe(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)}clear(){this.tooltipEle&&(qt([this.tooltipEle],cr),Vt([this.tooltipEle],hr)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&Yt(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)}tooltipHover(e){this.tooltipEle&&(this.isTooltipOpen=!0)}tooltipMouseOut(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())}onMouseOut(e){const t=e.relatedTarget;if(t&&!this.mouseTrail){const i=Zt(t,".e-tooltip-wrap.e-lib.e-popup");i?Bt.add(i,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()}tooltipElementMouseOut(e){this.hideTooltip(this.animation.close,e,this.findTarget()),Bt.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()}onStickyClose(e){this.close()}onMouseMove(e){let t=0,i=0;e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):(t=e.pageX,i=e.pageY),xi.stop(this.tooltipEle),qt([this.tooltipEle],cr),Vt([this.tooltipEle],hr),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);const s=this.calculateTooltipOffset(this.position),n=this.checkCollision(e.target,t+s.left+this.offsetX,i+s.top+this.offsetY);if(this.tooltipPositionX!==n.horizontal||this.tooltipPositionY!==n.vertical){const s=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?n.vertical+n.horizontal:n.horizontal+n.vertical;n.position=s,this.adjustArrow(e.target,n.position,n.horizontal,n.vertical);const o=this.calculateTooltipOffset(n.position);n.left=t+o.left-this.offsetX,n.top=i+o.top-this.offsetY}this.tooltipEle.style.left=n.left+"px",this.tooltipEle.style.top=n.top+"px"}keyDown(e){this.tooltipEle&&27===e.keyCode&&this.close()}touchEnd(e){this.tooltipEle&&null===Zt(e.target,"."+er)&&!this.isSticky&&this.close()}scrollHandler(e){this.tooltipEle&&(Zt(e.target,".e-tooltip-wrap.e-lib.e-popup")||this.close())}render(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()}preRender(){this.tipClass=or,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0}wireEvents(e){const t=this.getTriggerList(e);for(const i of t){if("Custom"===i)return;"Focus"===i&&this.wireFocusEvents(),"Click"===i&&Bt.add(this.element,zt.touchStartEvent,this.targetClick,this),"Hover"===i&&(zt.isDevice?(this.touchModule=new es(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),Bt.add(this.element,zt.touchEndEvent,this.touchEndHandler,this)):Bt.add(this.element,"mouseover",this.targetHover,this))}Bt.add(document,"touchend",this.touchEnd,this),Bt.add(document,"scroll wheel",this.scrollHandler,this),Bt.add(window,"resize",this.windowResize,this),Bt.add(document,"keydown",this.keyDown,this)}getTriggerList(e){return"Auto"===e&&(e=zt.isDevice?"Hover":"Hover Focus"),e.split(" ")}wireFocusEvents(){if(qe(this.target))Bt.add(this.element,"focus",this.targetHover,this);else{const e=[].slice.call($t(this.target,this.element));for(const t of e)Bt.add(t,"focus",this.targetHover,this)}}wireMouseEvents(e,t){this.tooltipEle&&(this.isSticky||("focus"===e.type&&Bt.add(t,"blur",this.onMouseOut,this),"mouseover"===e.type&&Bt.add(t,"mouseleave",this.onMouseOut,this),this.closeDelay&&(Bt.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),Bt.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&Bt.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))}unwireEvents(e){const t=this.getTriggerList(e);for(const i of t){if("Custom"===i)return;"Focus"===i&&this.unwireFocusEvents(),"Click"===i&&Bt.remove(this.element,zt.touchStartEvent,this.targetClick),"Hover"===i&&(zt.isDevice?(this.touchModule&&this.touchModule.destroy(),Bt.remove(this.element,zt.touchEndEvent,this.touchEndHandler)):Bt.remove(this.element,"mouseover",this.targetHover))}Bt.remove(document,"touchend",this.touchEnd),Bt.remove(document,"scroll wheel",this.scrollHandler),Bt.remove(window,"resize",this.windowResize),Bt.remove(document,"keydown",this.keyDown)}unwireFocusEvents(){if(qe(this.target))Bt.remove(this.element,"focus",this.targetHover);else{const e=[].slice.call($t(this.target,this.element));for(const t of e)Bt.remove(t,"focus",this.targetHover)}}unwireMouseEvents(e){if(!this.isSticky){const t=this.getTriggerList(this.opensOn);for(const i of t)"Focus"===i&&Bt.remove(e,"blur",this.onMouseOut),"Hover"!==i||zt.isDevice||Bt.remove(e,"mouseleave",this.onMouseOut);this.closeDelay&&(Bt.remove(e,"mouseenter",this.tooltipHover),Bt.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&Bt.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)}findTarget(){return Qt('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)}getModuleName(){return"tooltip"}getPersistData(){return this.addOnPersist([])}onPropertyChanged(e,t){const i=this.findTarget();for(const s of Object.keys(e))switch(s){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=Ke(e.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=Ke(e.height),this.reposition(i));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(t.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){const e=Qt("."+nr,this.tooltipEle);e.style.top=e.style.left=null,this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){const i=e.offsetX-t.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+i).toString()+"px"}break;case"offsetY":if(this.tooltipEle){const i=e.offsetY-t.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+i).toString()+"px"}break;case"cssClass":this.tooltipEle&&(t.cssClass&&qt([this.tooltipEle],t.cssClass.split(" ")),e.cssClass&&Vt([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?Vt([this.tooltipEle],tr):qt([this.tooltipEle],tr))}}open(e,t){qe(t)&&(t=this.animation.open),qe(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,t)}close(e){e||(e=this.animation.close),this.hideTooltip(e)}refresh(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)}destroy(){super.destroy(),this.tooltipEle&&Yt(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),qt([this.element],er),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null}};return Zo([gi("auto")],e.prototype,"width",void 0),Zo([gi("auto")],e.prototype,"height",void 0),Zo([gi()],e.prototype,"content",void 0),Zo([gi()],e.prototype,"target",void 0),Zo([gi("TopCenter")],e.prototype,"position",void 0),Zo([gi(0)],e.prototype,"offsetX",void 0),Zo([gi(0)],e.prototype,"offsetY",void 0),Zo([gi(!0)],e.prototype,"showTipPointer",void 0),Zo([gi(!0)],e.prototype,"enableHtmlParse",void 0),Zo([gi(!1)],e.prototype,"windowCollision",void 0),Zo([gi("Auto")],e.prototype,"tipPointerPosition",void 0),Zo([gi("Auto")],e.prototype,"opensOn",void 0),Zo([gi(!1)],e.prototype,"mouseTrail",void 0),Zo([gi(!1)],e.prototype,"isSticky",void 0),Zo([fi({},dr)],e.prototype,"animation",void 0),Zo([gi(0)],e.prototype,"openDelay",void 0),Zo([gi(0)],e.prototype,"closeDelay",void 0),Zo([gi()],e.prototype,"cssClass",void 0),Zo([gi(!1)],e.prototype,"enableHtmlSanitizer",void 0),Zo([yi()],e.prototype,"beforeRender",void 0),Zo([yi()],e.prototype,"beforeOpen",void 0),Zo([yi()],e.prototype,"afterOpen",void 0),Zo([yi()],e.prototype,"beforeClose",void 0),Zo([yi()],e.prototype,"afterClose",void 0),Zo([yi()],e.prototype,"beforeCollision",void 0),Zo([yi()],e.prototype,"created",void 0),Zo([yi()],e.prototype,"destroyed",void 0),e=Zo([vi],e),e})();const ur={},mr="e-spin-show",gr="e-spin-hide",fr="e-spin-material",br="e-spin-fabric",yr="e-spin-tailwind",vr="e-spin-bootstrap4",Cr="e-spin-bootstrap5",wr="e-spin-high-contrast",Sr="e-spinner-pane",Er="e-path-circle",xr="e-spin-template";function Rr(e,t){if(!e.target)return;let i;const s=qe(t)?Nt:t;let n=function(e,t){const i=t("div",{}),s=t("div",{});return i.classList.add(Sr),s.classList.add("e-spinner-inner"),e.appendChild(i),i.appendChild(s),{wrap:i,inner_wrap:s}}(e.target,s);if(qe(e.cssClass)||n.wrap.classList.add(e.cssClass),qe(e.template)&&qe(null)){const t=qe(e.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(n.wrap):e.type;i=function(e,t){let i;switch(t){case"Material":case"Fabric":i=30;break;case"Tailwind":case"Tailwind-dark":i=30;break;case"Bootstrap4":case"Bootstrap5":i=36;break;default:i=30}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(qe(e.width)?void 0:e.width,t),function(e,t,i,s){const n=t.querySelector(".e-spinner-inner"),o=n.querySelector("svg");switch(qe(o)||n.removeChild(o),e){case"Material":!function(e,t,i){const s=Tr();ur[s]={timeOut:0,type:"Material",radius:t},Ir(e,s,0,fr),Fr(t,e,"Material",fr)}(n,i);break;case"Fabric":!function(e,t,i){const s=Tr();ur[s]={timeOut:0,type:"Fabric",radius:t},Mr(e,s,br),Pr(t,e,br)}(n,i);break;case"Bootstrap":!function(e,t,i){const s=Tr();ur[s]={timeOut:0,type:"Bootstrap",radius:t},function(e,t,i){const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",t),s.setAttribute("class","e-spin-bootstrap"),s.setAttribute("viewBox","0 0 64 64"),e.insertBefore(s,e.firstChild);for(let n=0;n<=7;n++){const e=document.createElementNS("http://www.w3.org/2000/svg","circle");e.setAttribute("class","e-path-circle_"+n),e.setAttribute("r","2"),e.setAttribute("transform","translate(32,32)"),s.appendChild(e)}}(e,s),function(e,t){const i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";let s=90;for(let n=0;n<=7;n++){const e=zr(0,0,24,s),t=i.querySelector(".e-path-circle_"+n);t.setAttribute("cx",e.x+""),t.setAttribute("cy",e.y+""),s=s>=360?0:s,s+=45}}(e,t)}(n,i);break;case"HighContrast":!function(e,t,i){const s=Tr();ur[s]={timeOut:0,type:"HighContrast",radius:t},Mr(e,s,wr),Pr(t,e,wr)}(n,i);break;case"Bootstrap4":!function(e,t,i){const s=Tr();ur[s]={timeOut:0,type:"Bootstrap4",radius:t},Ir(e,s,0,vr),Fr(t,e,"Bootstrap4",vr)}(n,i);break;case"Bootstrap5":!function(e,t,i){const s=Tr();ur[s]={timeOut:0,type:"Bootstrap5",radius:t},Ir(e,s,0,Cr),Fr(t,e,"Bootstrap5",Cr)}(n,i);break;case"Tailwind":case"Tailwind-dark":!function(e,t,i){const s=Tr();ur[s]={timeOut:0,type:"Tailwind",radius:t},Mr(e,s,yr),Pr(t,e,yr)}(n,i)}}(t,n.wrap,i),qe(e.label)||function(e,t,i){const s=i("div",{});s.classList.add("e-spin-label"),s.innerHTML=t,e.appendChild(s)}(n.inner_wrap,e.label,s)}else{const t=qe(e.template)?null:e.template;n.wrap.classList.add(xr),function(e,t,i){qe(null)||e.classList.add(null),e.querySelector(".e-spinner-inner").innerHTML=t}(n.wrap,t)}n.wrap.classList.add(gr),n=null}function Dr(e,t){const i=[],s=e,n=t;let o=!1,r=1;return function e(t){i.push(t),(t!==n||1===r)&&(t<=s&&t>1&&!o?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),o=!0):t<8&&o?8===(t=parseFloat((t+.2).toFixed(2)))&&(o=!1):t<=8&&!o&&(t=parseFloat((t-.2).toFixed(2))),++r,e(t))}(s),i}function Tr(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function Mr(e,t,i,s){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class",i);const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class",Er);const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class","e-path-arc"),e.insertBefore(n,e.firstChild),n.appendChild(o),n.appendChild(r)}function Ir(e,t,i,s){const n=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",s),n.setAttribute("id",t),o.setAttribute("class",Er),e.insertBefore(n,e.firstChild),n.appendChild(o)}function kr(e){!function(e,t,i,s,n,o,r){const l=++r.globalInfo[r.uniqueID].previousId,a=(new Date).getTime(),h=parseFloat(2*r.globalInfo[r.uniqueID].radius+""),c=Ar(h),d=-90*(r.globalInfo[r.uniqueID].count||0);!function e(t){const n=Math.max(0,Math.min((new Date).getTime()-a,s));(function(e,t){if(!qe(t.querySelector("svg.e-spin-material"))&&!qe(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){const i=t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");i.setAttribute("stroke-dashoffset",Or(h,c,e,75)+""),i.setAttribute("transform","rotate("+d+" "+h/2+" "+h/2+")")}})(i(n,1,148,s),t.container),l===t.globalInfo[t.uniqueID].previousId&&n<s?ur[t.uniqueID].timeOut=setTimeout(e.bind(null,t),1):kr(t)}(r)}(0,0,Lr,1333,0,0,e),e.globalInfo[e.uniqueID].count=++e.globalInfo[e.uniqueID].count%4}function Fr(e,t,i,s){const n=2*e,o=t.querySelector("svg."+s),r=o.querySelector("path.e-path-circle"),l=Ar(n),a=n/2+"px";o.setAttribute("viewBox","0 0 "+n+" "+n),o.style.width=o.style.height=n+"px",o.style.transformOrigin=a+" "+a+" "+a,r.setAttribute("d",function(e,t){const i=e/2,s=t/2;return"M"+i+","+s+"A"+(i-s)+","+(i-s)+" 0 1 1 "+s+","+i}(n,l)),"Material"===i&&(r.setAttribute("stroke-width",l+""),r.setAttribute("stroke-dasharray",(n-l)*Math.PI*.75+""),r.setAttribute("stroke-dashoffset",Or(n,l,1,75)+""))}function Ar(e){return.1*e}function Or(e,t,i,s){return(e-t)*Math.PI*(3*s/100-i/100)}function Lr(e,t,i,s){const n=(e/=s)*e,o=n*e;return t+i*(6*o*n+-15*n*n+10*o)}function Pr(e,t,i){const s=e,n=e,o=2*e,r=t.querySelector("."+i),l=r.querySelector(".e-path-circle"),a=r.querySelector(".e-path-arc"),h=o/2+"px";l.setAttribute("d",function(e,t,i){return["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(s,n,e)),a.setAttribute("d",function(e,t,i,s,n){const o=zr(e,t,i,45),r=zr(e,t,i,315);return["M",o.x,o.y,"A",i,i,0,0,0,r.x,r.y].join(" ")}(s,n,e)),r.setAttribute("viewBox","0 0 "+o+" "+o),r.style.transformOrigin=h+" "+h+" "+h,r.style.width=r.style.height=o+"px"}function zr(e,t,i,s){const n=(s-90)*Math.PI/180;return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}}function Br(e){Hr(e,!1),e=null}function Hr(e,t){let i;if(e&&(i=e.classList.contains(Sr)?e:e.querySelector("."+Sr)),e&&i){const s=i.querySelector(".e-spinner-inner");let n;if(n=t?!i.classList.contains(xr)&&!i.classList.contains(gr):!i.classList.contains(xr)&&!i.classList.contains(mr),n){const e=i.querySelector("svg");if(qe(e))return;const n=e.getAttribute("id");switch(ur[n].isAnimate=!t,ur[n].type){case"Material":t?clearTimeout(ur[n].timeOut):function(e,t,i){const s={};ur[t].timeOut=0,s[t]=function(e,t,i,s){return{radius:t,count:0,previousId:0}}(0,i),kr({uniqueID:t,container:e,globalInfo:s,timeOutVar:0})}(s,n,ur[n].radius);break;case"Bootstrap":t?clearTimeout(ur[n].timeOut):function(e){const t=e.querySelector("svg.e-spin-bootstrap").getAttribute("id");for(let s=1;s<=8;s++)i(e.getElementsByClassName("e-path-circle_"+(8===s?0:s))[0],s,0,Dr(s,s),t);function i(e,t,i,s,n){let o=0;!function t(i){ur[n].isAnimate&&(++o,e.setAttribute("r",i+""),o>=s.length&&(o=0),ur[n].timeOut=setTimeout(t.bind(null,s[o]),18))}(t)}}(s)}}t?ti(i,[gr],[mr]):ti(i,[mr],[gr]),e=null}}function Nr(e){Hr(e,!0),e=null}i("8DMo");const Vr="e-rtl",qr="e-disabled",jr="e-input",Wr="e-input-group",Gr="e-float-input",_r="e-float-text",Ur="e-clear-icon",Kr="e-clear-icon-hide",Yr="e-label-top",Xr="e-label-bottom",Qr="e-no-float-label",$r="e-float-custom-tag";var Jr;!function(e){let t,i=!0;function s(e){n(e.floatLabelType,e.element),e.element.addEventListener("focus",function(){const e=p(this);(e.classList.contains("e-input-group")||e.classList.contains("e-outline")||e.classList.contains("e-filled"))&&e.classList.add("e-input-focus")}),e.element.addEventListener("blur",function(){const e=p(this);(e.classList.contains("e-input-group")||e.classList.contains("e-outline")||e.classList.contains("e-filled"))&&e.classList.remove("e-input-focus")}),e.element.addEventListener("input",()=>{n(t,e.element)})}function n(e,t){const i=t.value;""!==i&&!qe(i)&&t.parentElement?t.parentElement.classList.add("e-valid-input"):"Always"!==e&&t.parentElement&&t.parentElement.classList.remove("e-valid-input")}function o(){const e=p(this).getElementsByClassName("e-float-text")[0];qe(e)||(Vt([e],Yr),e.classList.contains(Xr)&&qt([e],Xr))}function r(){const e=p(this);if(e.getElementsByTagName("textarea")[0]?""===e.getElementsByTagName("textarea")[0].value:""===e.getElementsByTagName("input")[0].value){const t=e.getElementsByClassName("e-float-text")[0];qe(t)||(t.classList.contains(Yr)&&qt([t],Yr),Vt([t],Xr))}}function l(e){e.addEventListener("focus",o),e.addEventListener("blur",r)}function a(e,t,i){const s=qe(i)?Nt:i;"Auto"===e.floatLabelType&&l(e.element),qe(t.container)?(t.container=g(e,Gr,$r,"div",s),e.element.parentNode&&e.element.parentNode.insertBefore(t.container,e.element)):(qe(e.customTag)||t.container.classList.add($r),t.container.classList.add(Gr));const n=s("span",{className:"e-float-line"}),o=s("label",{className:_r});if(qe(e.element.id)||""===e.element.id||(o.id="label_"+e.element.id.replace(/ /g,"_"),Xt(e.element,{"aria-labelledby":o.id})),qe(e.element.placeholder)||""===e.element.placeholder||(o.innerText=f(e.element.placeholder),e.element.removeAttribute("placeholder")),qe(e.properties)||qe(e.properties.placeholder)||""===e.properties.placeholder||(o.innerText=f(e.properties.placeholder)),o.innerText||t.container.classList.add(Qr),t.container.classList.contains("e-float-icon-left")){const i=t.container.querySelector(".e-input-in-wrap");i.appendChild(e.element),i.appendChild(n),i.appendChild(o)}else t.container.appendChild(e.element),t.container.appendChild(n),t.container.appendChild(o);d(e.element.value,o),"Always"===e.floatLabelType&&(o.classList.contains(Xr)&&qt([o],Xr),Vt([o],Yr)),"Auto"===e.floatLabelType&&(e.element.addEventListener("input",t=>{d(e.element.value,o)}),e.element.addEventListener("blur",t=>{d(e.element.value,o)})),qe(e.element.getAttribute("id"))||o.setAttribute("for",e.element.getAttribute("id"))}function h(e,t){"Always"===e&&t.classList.contains("e-outline")&&t.classList.add("e-valid-input")}function c(e,t){e?qt([t],Kr):Vt([t],Kr)}function d(e,t){e?(Vt([t],Yr),t.classList.contains(Xr)&&qt([t],Xr)):(t.classList.contains(Yr)&&qt([t],Yr),Vt([t],Xr))}function p(e){let t=qe(e.parentNode)?e:e.parentNode;return t&&t.classList.contains("e-input-in-wrap")&&(t=t.parentNode),t}function u(e,t,s){(null==i||i)&&t.addEventListener("click",i=>{e.classList.contains(qr)||e.readOnly||(i.preventDefault(),e!==document.activeElement&&e.focus(),e.value="",Vt([t],Kr))}),e.addEventListener("input",i=>{c(e.value,t)}),e.addEventListener("focus",i=>{c(e.value,t)}),e.addEventListener("blur",e=>{setTimeout(()=>{Vt([t],Kr)},200)})}function m(e,t){if(p(e).classList.contains(Gr)&&"Auto"===t){const t=p(e).getElementsByClassName("e-float-text")[0];d(e.value,t)}}function g(e,t,i,s,n){const o=qe(n)?Nt:n;let r;return qe(e.customTag)?r=o(s,{className:t}):(r=o(e.customTag,{className:t}),r.classList.add(i)),r.classList.add("e-control-wrapper"),r}function f(e){let t="";if(!qe(e)&&""!==e){const i=document.createElement("span");i.innerHTML='<input  placeholder="'+e+'"/>',t=i.children[0].placeholder}return t}function b(e,t,i){qe(i)||""===i||qt(t,i.split(" ")),qe(e)||""===e||Vt(t,e.split(" "))}function y(e,t){e=f(e);const i=p(t);i.classList.contains(Gr)?qe(e)||""===e?(i.classList.add(Qr),i.getElementsByClassName(_r)[0].textContent=""):(i.getElementsByClassName(_r)[0].textContent=e,i.classList.remove(Qr),t.removeAttribute("placeholder")):qe(e)||""===e?(t.removeAttribute("placeholder"),t.removeAttribute("aria-placeholder")):Xt(t,{placeholder:e,"aria-placeholder":e})}function v(e,t,i){e?Xt(t,{readonly:""}):t.removeAttribute("readonly"),qe(i)||m(t,i)}function C(e,t){e?Vt(t,Vr):qt(t,Vr)}function w(e,t,i,s){const n={disabled:"disabled","aria-disabled":"true"},o=!qe(s);e?(t.classList.remove(qr),E(n,t),o&&qt([s],qr)):(t.classList.add(qr),x(n,t),o&&Vt([s],qr)),qe(i)||m(t,i)}function S(e,t,i,s,n){const o=qe(n)?Nt:n;e?i.clearButton=function(e,t,i,s){const n=(qe(s)?Nt:s)("span",{className:Ur}),o=t.container;return qe(i)?(t.container.classList.contains(Gr)?t.container.querySelector(".e-float-text"):e).insertAdjacentElement("afterend",n):o.appendChild(n),!qe(o)&&o.classList.contains(Gr)&&Vt([o],Wr),Vt([n],Kr),u(e,n),n.setAttribute("aria-label","close"),n}(t,i,s,o):(Yt(i.clearButton),i.clearButton=null)}function E(e,t){for(const i of Object.keys(e)){const e=p(t);"disabled"===i&&t.classList.remove(qr),"disabled"===i&&e.classList.contains(Wr)&&e.classList.remove(qr),"placeholder"===i&&e.classList.contains(Gr)?e.getElementsByClassName(_r)[0].textContent="":t.removeAttribute(i)}}function x(e,t){for(const i of Object.keys(e)){const s=p(t);"disabled"===i&&t.classList.add(qr),"disabled"===i&&s.classList.contains(Wr)&&s.classList.add(qr),"placeholder"===i&&s.classList.contains(Gr)?s.getElementsByClassName(_r)[0].textContent=e[i]:t.setAttribute(i,e[i])}}function R(e,t,i){const s=[];s.push(i);const n=qe(i)?t.querySelectorAll(".e-input-group-icon"):s;if(e&&n.length>0)for(let o=0;o<n.length;o++)n[o].addEventListener("mousedown",D,!1),n[o].addEventListener("mouseup",T,!1);else if(n.length>0)for(let o=0;o<n.length;o++)n[o].removeEventListener("mousedown",D,this),n[o].removeEventListener("mouseup",T,this)}function D(){let e=this.parentElement;for(;!e.classList.contains("e-input-group");)e=e.parentElement;var t;(t=e).classList.contains("e-disabled")||t.querySelector("input").readOnly||this.classList.add("e-input-btn-ripple")}function T(){const e=this;setTimeout(()=>{e.classList.remove("e-input-btn-ripple")},500)}function M(e,t){const i=t("span",{className:e});return i.classList.add("e-input-group-icon"),i}function I(e,t,i,s){const n=qe(s)?Nt:s,o=M(e,n);t.classList.add("e-float-icon-left");let r=t.querySelector(".e-input-in-wrap");if(qe(r)){r=n("span",{className:"e-input-in-wrap"}),i.parentNode.insertBefore(r,i);const e=t.querySelectorAll(i.tagName+" ~ *");r.appendChild(i);for(let t=0;t<e.length;t++)r.appendChild(e[t])}return r.parentNode.insertBefore(o,r),t.classList.contains(Wr)||t.classList.add(Wr),R(!0,t,o),o}function k(e,t,i){const s=M(e,qe(i)?Nt:i);return t.classList.contains(Wr)||t.classList.add(Wr),(t.classList.contains("e-float-icon-left")?t.querySelector(".e-input-in-wrap"):t).appendChild(s),R(!0,t,s),s}function F(e,t){"hidden"===t.type?e.classList.add("e-hidden"):e.classList.contains("e-hidden")&&e.classList.remove("e-hidden")}e.createInput=function(e,n){const o=qe(n)?Nt:n;let r={container:null,buttons:[],clearButton:null};if(t=e.floatLabelType,i=e.bindClearAction,qe(e.floatLabelType)||"Never"===e.floatLabelType?(r.container=g(e,Wr,"e-input-custom-tag","span",o),e.element.parentNode.insertBefore(r.container,e.element),Vt([e.element],jr),r.container.appendChild(e.element)):a(e,r,o),s(e),qe(e.properties)||qe(e.properties.showClearButton)||!e.properties.showClearButton||"TEXTAREA"===e.element.tagName||(S(e.properties.showClearButton,e.element,r,!0,o),r.clearButton.setAttribute("role","button"),r.container.classList.contains(Gr)&&Vt([r.container],Wr)),!qe(e.buttons)&&"TEXTAREA"!==e.element.tagName)for(let t=0;t<e.buttons.length;t++)r.buttons.push(k(e.buttons[t],r.container,o));return qe(e.element)||"TEXTAREA"!==e.element.tagName||Vt([r.container],"e-multi-line-input"),F(r.container,e.element),r=function(e,t){if(!qe(e.properties))for(const i of Object.keys(e.properties))switch(i){case"cssClass":b(e.properties.cssClass,[t.container]),h(e.floatLabelType,t.container);break;case"enabled":w(e.properties.enabled,e.element,e.floatLabelType,t.container);break;case"enableRtl":C(e.properties.enableRtl,[t.container]);break;case"placeholder":y(e.properties.placeholder,e.element);break;case"readonly":v(e.properties.readonly,e.element)}return t}(e,r),r},e.bindInitialEvent=s,e.wireFloatingEvents=l,e.wireClearBtnEvents=u,e.setValue=function(e,t,i,s){if(t.value=e,qe(i)||"Auto"!==i||m(t,i),!qe(s)&&s){const e=p(t);if(!qe(e)){const i=e.getElementsByClassName(Ur)[0];qe(i)||(t.value&&e.classList.contains("e-input-focus")?qt([i],Kr):Vt([i],Kr))}}n(i,t)},e.setCssClass=b,e.setWidth=function(e,t){"number"==typeof e?t.style.width=Ke(e):"string"==typeof e&&(t.style.width=e.match(/px|%|em/)?e:Ke(e))},e.setPlaceholder=y,e.setReadonly=v,e.setEnableRtl=C,e.setEnabled=w,e.setClearButton=S,e.removeAttributes=E,e.addAttributes=x,e.removeFloating=function(e){const t=e.container;if(!qe(t)&&t.classList.contains(Gr)){const e=t.querySelector("textarea")?t.querySelector("textarea"):t.querySelector("input"),s=t.querySelector(".e-float-text").textContent,n=null!==t.querySelector(".e-clear-icon");Kt(t.querySelector(".e-float-line")),Kt(t.querySelector(".e-float-text")),ti(t,[Wr],[Gr]),(i=e).removeEventListener("focus",o),i.removeEventListener("blur",r),Xt(e,{placeholder:s}),e.classList.add(jr),n||"INPUT"!==e.tagName||e.removeAttribute("required")}var i},e.addFloating=function(e,i,s,n){const o=qe(n)?Nt:n,r=Zt(e,".e-input-group");if(t=i,"Never"!==i){let t=r.tagName;t="DIV"!==t&&"SPAN"!==t?t:null;const n={element:e,floatLabelType:i,customTag:t,properties:{placeholder:s}};let l=r.querySelector(".e-clear-icon");const h={container:r};e.classList.remove(jr),a(n,h,o);const c=r.classList.contains("e-float-icon-left");if(qe(l)&&(l=c?r.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):r.querySelector(".e-input-group-icon")),qe(l))c&&(l=r.querySelector(".e-input-group-icon")),qe(l)&&r.classList.remove(Wr);else{const t=r.querySelector(".e-float-line"),i=r.querySelector(".e-float-text"),s=c?r.querySelector(".e-input-in-wrap"):r;s.insertBefore(e,l),s.insertBefore(t,l),s.insertBefore(i,l)}}h(i,e.parentElement)},e.setRipple=function(e,t){for(let i=0;i<t.length;i++)R(e,t[i].container)},e.addIcon=function(e,t,i,s,n){const o="string"==typeof t?t.split(","):t;if("append"===e.toLowerCase())for(const r of o)k(r,i,n);else for(const r of o)I(r,i,s,n)},e.prependSpan=I,e.appendSpan=k,e.validateInputType=F}(Jr||(Jr={}));var Zr=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const el="e-input-group-icon",tl="e-spin-up",il="e-error",sl="increment",nl="decrement",ol=new RegExp("^(-)?(\\d*)$"),rl="e-input-focus",ll=["title","style","class"];let al=(()=>{let e=class extends Bi{constructor(e,t){super(e,t),this.isVue=!1,this.preventChange=!1,this.isAngular=!1,this.isDynamicChange=!1,this.numericOptions=e}preRender(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;const e=Pe("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),qt([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=Zt(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;const t=this.createElement("input");let i=0;for(;i<this.element.attributes.length;i++)"id"!==this.element.attributes[i].nodeName&&(t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML);this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(t),this.element=t,ze("ej2_instances",e,this.element)}Xt(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off","aria-live":"assertive"}),this.l10n=new Qi("numerictextbox",{incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null===this.placeholder&&this.updatePlaceholder()}render(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null===this.value||isNaN(this.value)||this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete())}checkAttributes(e){const t=e?qe(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];for(const i of t)if(!qe(this.element.getAttribute(i)))switch(i){case"disabled":if(qe(this.numericOptions)||void 0===this.numericOptions.enabled||e){const t="disabled"!==this.element.getAttribute(i)&&""!==this.element.getAttribute(i)&&"true"!==this.element.getAttribute(i);this.setProperties({enabled:t},!e)}break;case"readonly":if(qe(this.numericOptions)||void 0===this.numericOptions.readonly||e){const t="readonly"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i);this.setProperties({readonly:t},!e)}break;case"placeholder":(qe(this.numericOptions)||void 0===this.numericOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(qe(this.numericOptions)||void 0===this.numericOptions.value||e){const t=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(i));this.setProperties(ze(i,t,{}),!e)}break;case"min":if(qe(this.numericOptions)||void 0===this.numericOptions.min||e){const t=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(i));null===t||isNaN(t)||this.setProperties(ze(i,t,{}),!e)}break;case"max":if(qe(this.numericOptions)||void 0===this.numericOptions.max||e){const t=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(i));null===t||isNaN(t)||this.setProperties(ze(i,t,{}),!e)}break;case"step":if(qe(this.numericOptions)||void 0===this.numericOptions.step||e){const t=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(i));null===t||isNaN(t)||this.setProperties(ze(i,t,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(i);break;case"name":this.inputName=this.element.getAttribute(i);break;default:{const e=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(i));(null!==e&&!isNaN(e)||"value"===i)&&this.setProperties(ze(i,e,{}),!0)}}}updatePlaceholder(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)}initCultureFunc(){this.instance=new St(this.locale)}initCultureInfo(){this.cultureInfo.format=this.format,null!==Pe("currency",this)&&(ze("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))}createWrapper(){let e=this.cssClass;qe(this.cssClass)||""===this.cssClass||(e=this.getNumericValidClassList(this.cssClass));const t=Jr.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=t,this.container=t.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&Xt(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),Xt(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&Xt(this.container,{style:this.inputStyle})}updateDataAttribute(e){let t={};if(e)t=this.htmlAttributes;else for(let i=0;i<this.element.attributes.length;i++)t[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name);for(const i of Object.keys(t))0===i.indexOf("data")&&this.hiddenInput.setAttribute(i,t[i])}updateHTMLAttrToElement(){if(!qe(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))ll.indexOf(e)<0&&this.element.setAttribute(e,this.htmlAttributes[e])}updateCssClass(e,t){Jr.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(t))}getNumericValidClassList(e){let t=e;return qe(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t}updateHTMLAttrToWrapper(){if(!qe(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if(ll.indexOf(e)>-1)if("class"===e){const t=this.getNumericValidClassList(this.htmlAttributes[e]);""!==t&&Vt([this.container],t.split(" "))}else if("style"===e){let t=this.container.getAttribute(e);t=qe(t)?this.htmlAttributes[e]:t+this.htmlAttributes[e],this.container.setAttribute(e,t)}else this.container.setAttribute(e,this.htmlAttributes[e])}setElementWidth(e){qe(e)||("number"==typeof e?this.container.style.width=Ke(e):"string"==typeof e&&(this.container.style.width=e.match(/px|%|em/)?e:Ke(e)))}spinBtnCreation(){this.spinDown=Jr.appendSpan(el+" e-spin-down",this.container,this.createElement),Xt(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),this.spinUp=Jr.appendSpan(el+" "+tl,this.container,this.createElement),Xt(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()}validateMinMax(){("number"!=typeof this.min||isNaN(this.min))&&this.setProperties({min:-Number.MAX_VALUE},!0),("number"!=typeof this.max||isNaN(this.max))&&this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),Xt(this.element,{"aria-valuemin":this.min.toString(),"aria-valuemax":this.max.toString()})}formattedValue(e,t){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(t)}validateStep(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)}action(e,t){this.isInteract=!0;const i=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(i,this.step,e)),this.raiseChangeEvent(t)}checkErrorClass(){this.isValidState?qt([this.container],il):Vt([this.container],il),Xt(this.element,{"aria-invalid":this.isValidState?"false":"true"})}bindClearEvent(){this.showClearButton&&Bt.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)}resetHandler(e){e.preventDefault(),this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")&&!this.inputWrapper.container.classList.contains("e-static-clear")||this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)}clear(e){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",Zt(this.element,"form")){const e=this.element.nextElementSibling,t=document.createEvent("KeyboardEvent");t.initEvent("keyup",!1,!0),e.dispatchEvent(t)}}resetFormHandler(){this.updateValue("EJS-NUMERICTEXTBOX"===this.element.tagName?null:this.inputEleValue)}setSpinButton(){qe(this.spinDown)||Xt(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),qe(this.spinUp)||Xt(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})}wireEvents(){Bt.add(this.element,"focus",this.focusHandler,this),Bt.add(this.element,"blur",this.focusOutHandler,this),Bt.add(this.element,"keydown",this.keyDownHandler,this),Bt.add(this.element,"keyup",this.keyUpHandler,this),Bt.add(this.element,"input",this.inputHandler,this),Bt.add(this.element,"keypress",this.keyPressHandler,this),Bt.add(this.element,"change",this.changeHandler,this),Bt.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&Bt.add(this.formEle,"reset",this.resetFormHandler,this))}wireSpinBtnEvents(){Bt.add(this.spinUp,zt.touchStartEvent,this.mouseDownOnSpinner,this),Bt.add(this.spinDown,zt.touchStartEvent,this.mouseDownOnSpinner,this),Bt.add(this.spinUp,zt.touchEndEvent,this.mouseUpOnSpinner,this),Bt.add(this.spinDown,zt.touchEndEvent,this.mouseUpOnSpinner,this),Bt.add(this.spinUp,zt.touchMoveEvent,this.touchMoveOnSpinner,this),Bt.add(this.spinDown,zt.touchMoveEvent,this.touchMoveOnSpinner,this)}unwireEvents(){Bt.remove(this.element,"focus",this.focusHandler),Bt.remove(this.element,"blur",this.focusOutHandler),Bt.remove(this.element,"keyup",this.keyUpHandler),Bt.remove(this.element,"input",this.inputHandler),Bt.remove(this.element,"keydown",this.keyDownHandler),Bt.remove(this.element,"keypress",this.keyPressHandler),Bt.remove(this.element,"change",this.changeHandler),Bt.remove(this.element,"paste",this.pasteHandler),this.formEle&&Bt.remove(this.formEle,"reset",this.resetFormHandler)}unwireSpinBtnEvents(){Bt.remove(this.spinUp,zt.touchStartEvent,this.mouseDownOnSpinner),Bt.remove(this.spinDown,zt.touchStartEvent,this.mouseDownOnSpinner),Bt.remove(this.spinUp,zt.touchEndEvent,this.mouseUpOnSpinner),Bt.remove(this.spinDown,zt.touchEndEvent,this.mouseUpOnSpinner),Bt.remove(this.spinUp,zt.touchMoveEvent,this.touchMoveOnSpinner),Bt.remove(this.spinDown,zt.touchMoveEvent,this.touchMoveOnSpinner)}changeHandler(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);const t=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(t,e)}raiseChangeEvent(e){if(this.prevValue!==this.value){const t={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),Ne(t,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",t)}}pasteHandler(){if(!this.enabled||this.readonly)return;const e=this.element.value;setTimeout(()=>{this.numericRegex().test(this.element.value)||this.setElementValue(e)})}preventHandler(){const e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(()=>{if(this.element.selectionStart>0){const t=this.element.selectionStart,i=this.element.selectionStart-1,s=0,n=this.element.value.split(""),o=Pe("decimal",Et(this.locale)).charCodeAt(0);" "===this.element.value[i]&&this.element.selectionStart>0&&!e?(qe(this.prevVal)?this.element.value=this.element.value.trim():0!==i?this.element.value=this.prevVal:0===i&&(this.element.value=this.element.value.trim()),this.element.setSelectionRange(i,i)):isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&45!==this.element.value[this.element.selectionStart-1].charCodeAt(0)?(n.indexOf(this.element.value[this.element.selectionStart-1])!==n.lastIndexOf(this.element.value[this.element.selectionStart-1])&&this.element.value[this.element.selectionStart-1].charCodeAt(0)===o||this.element.value[this.element.selectionStart-1].charCodeAt(0)!==o)&&(this.element.value=this.element.value.substring(0,i)+this.element.value.substring(t,this.element.value.length),this.element.setSelectionRange(i,i),isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&this.element.selectionStart>0&&this.element.value.length&&this.preventHandler()):isNaN(parseFloat(this.element.value[this.element.selectionStart-2]))&&this.element.selectionStart>1&&45!==this.element.value[this.element.selectionStart-2].charCodeAt(0)&&(n.indexOf(this.element.value[this.element.selectionStart-2])!==n.lastIndexOf(this.element.value[this.element.selectionStart-2])&&this.element.value[this.element.selectionStart-2].charCodeAt(0)===o||this.element.value[this.element.selectionStart-2].charCodeAt(0)!==o)&&(this.element.setSelectionRange(i,i),this.nextEle=this.element.value[this.element.selectionStart],this.cursorPosChanged=!0,this.preventHandler()),!0===this.cursorPosChanged&&this.element.value[this.element.selectionStart]===this.nextEle&&isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&(this.element.setSelectionRange(this.element.selectionStart+1,this.element.selectionStart+1),this.cursorPosChanged=!1,this.nextEle=null),""===this.element.value.trim()&&this.element.setSelectionRange(s,s),this.element.selectionStart>0&&45===this.element.value[this.element.selectionStart-1].charCodeAt(0)&&this.element.selectionStart>1&&(this.element.value=qe(this.prevVal)?this.element.value:this.prevVal,this.element.setSelectionRange(this.element.selectionStart,this.element.selectionStart)),this.prevVal=this.element.value}})}keyUpHandler(){if(!this.enabled||this.readonly)return;(!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform))&&zt.isDevice&&this.preventHandler();let e=this.instance.getNumberParser({format:"n"})(this.element.value);if(e=null===e||isNaN(e)?null:e,this.hiddenInput.value=e||0===e?e.toString():null,Zt(this.element,"form")){const e=this.element.nextElementSibling,t=document.createEvent("KeyboardEvent");t.initEvent("keyup",!1,!0),e.dispatchEvent(t)}}inputHandler(e){const t=this;if(!this.enabled||this.readonly)return;const i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||i)&&zt.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==Pe("decimal",Et(this.locale))&&this.element.value!==Pe("minusSign",Et(this.locale))){let e=this.instance.getNumberParser({format:"n"})(this.element.value);e=isNaN(e)?null:e,t.localChange({value:e}),this.preventChange=!0}if(this.isVue){const t=this.instance.getNumberParser({format:"n"})(this.element.value),i=this.instance.getNumberParser({format:"n"})(this.elementPrevValue),s={event:e,value:null===t||isNaN(t)?null:t,previousValue:null===i||isNaN(i)?null:i};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",s)}}keyDownHandler(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action(sl,e);break;case 40:e.preventDefault(),this.action(nl,e)}}performAction(e,t,i){(null===e||isNaN(e))&&(e=0);let s=i===sl?e+t:e-t;return s=this.correctRounding(e,t,s),this.strictMode?this.trimValue(s):s}correctRounding(e,t,i){const s=new RegExp("[,.](.*)"),n=s.test(e.toString()),o=s.test(t.toString());if(n||o){const r=n?s.exec(e.toString())[0].length:0,l=o?s.exec(t.toString())[0].length:0,a=Math.max(r,l);return this.roundValue(i,a)}return i}roundValue(e,t){t=t||0;const i=Math.pow(10,t);return Math.round(e*=i)/i}updateValue(e,t){t&&(this.isInteract=!0),null===e||isNaN(e)||this.decimals&&(e=this.roundNumber(e,this.decimals)),this.changeValue(null===e||isNaN(e)?null:this.strictMode?this.trimValue(e):e),this.isDynamicChange||this.raiseChangeEvent(t)}updateCurrency(e,t){ze(e,t,this.cultureInfo),this.updateValue(this.value)}changeValue(e){if(e||0===e){const t=this.getNumberOfDecimals(e);this.setProperties({value:this.roundNumber(e,t)},!0)}else this.setProperties({value:e=null},!0);this.modifyText(),this.strictMode||this.validateState()}modifyText(){if(this.value||0===this.value){const e=this.formatNumber(),t=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(t),Xt(this.element,{"aria-valuenow":e}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null}setElementValue(e,t){Jr.setValue(e,t||this.element,this.floatLabelType,this.showClearButton)}validateState(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()}getNumberOfDecimals(e){let t;const i=new RegExp("[eE][-+]?([0-9]+)");let s=e.toString();if(i.test(s)){const t=i.exec(s);qe(t)||(s=e.toFixed(Math.min(parseInt(t[1],10),20)))}const n=s.split(".")[1];return t=n&&n.length?n.length:0,null!==this.decimals&&(t=t<this.decimals?t:this.decimals),t}formatNumber(){const e=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)}trimValue(e){return e>this.max?this.max:e<this.min?this.min:e}roundNumber(e,t){let i=e;const s=t||0,n=i.toString().split("e");i=Math.round(Number(n[0]+"e"+(n[1]?Number(n[1])+s:s)));const o=i.toString().split("e");return i=Number(o[0]+"e"+(o[1]?Number(o[1])-s:-s)),Number(i.toFixed(s))}cancelEvent(e){return e.preventDefault(),!1}keyPressHandler(e){if(!this.enabled||this.readonly)return!0;if(!zt.isDevice&&"11.0"===zt.info.version&&13===e.keyCode){const t=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(t,e),!0}if(0===e.which||e.metaKey||e.ctrlKey||8===e.keyCode||13===e.keyCode)return!0;const t=String.fromCharCode(e.which);let i=this.element.value;return i=i.substring(0,this.element.selectionStart)+t+i.substring(this.element.selectionEnd),!!this.numericRegex().test(i)||(e.preventDefault(),e.stopPropagation(),!1)}numericRegex(){let e=Pe("decimal",Et(this.locale)),t="*";return"."===e&&(e="\\"+e),0===this.decimals&&this.validateDecimalOnType?ol:(this.decimals&&this.validateDecimalOnType&&(t="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+e+"\\d"+t+")?)|("+e+"\\d"+t+")))?$"))}mouseWheel(e){let t;e.preventDefault(),e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t>0?this.action(sl,e):t<0&&this.action(nl,e),this.cancelEvent(e)}focusHandler(e){if(this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,qt([this.container],il),this.prevValue=this.value,this.value||0===this.value){const e=this.formatNumber();this.setElementValue(e),this.isPrevFocused||(zt.isDevice||"11.0"!==zt.info.version?setTimeout(()=>{this.element.setSelectionRange(0,e.length)},zt.isDevice&&zt.isIos?600:0):this.element.setSelectionRange(0,e.length))}zt.isDevice||Bt.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}}focusOutHandler(e){if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(e.preventDefault(),zt.isDevice){const e=this.element.value;this.element.focus(),this.isPrevFocused=!1;const t=this.element;setTimeout(()=>{this.setElementValue(e,t)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);const e=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(e),zt.isDevice||Bt.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(Zt(this.element,"form")){const e=this.element.nextElementSibling,t=document.createEvent("FocusEvent");t.initEvent("focusout",!1,!0),e.dispatchEvent(t)}}}mouseDownOnSpinner(e){if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),!this.getElementData(e))return;this.getElementData(e);const t=e.currentTarget,i=t.classList.contains(tl)?sl:nl;Bt.add(t,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(()=>{this.isCalled=!0,this.action(i,e)},150),Bt.add(document,"mouseup",this.mouseUpClick,this)}touchMoveOnSpinner(e){let t;if("touchmove"===e.type){let i=e.touches;t=i.length&&document.elementFromPoint(i[0].pageX,i[0].pageY)}else t=document.elementFromPoint(e.clientX,e.clientY);t.classList.contains(el)||clearInterval(this.timeOut)}mouseUpOnSpinner(e){if(this.isPrevFocused&&(this.element.focus(),zt.isDevice||(this.isPrevFocused=!1)),zt.isDevice||e.preventDefault(),!this.getElementData(e))return;const t=e.currentTarget,i=t.classList.contains(tl)?sl:nl;if(Bt.remove(t,"mouseleave",this.mouseUpClick),this.isCalled||this.action(i,e),this.isCalled=!1,Bt.remove(document,"mouseup",this.mouseUpClick),Zt(this.element,"form")){const e=this.element.nextElementSibling,t=document.createEvent("KeyboardEvent");t.initEvent("keyup",!1,!0),e.dispatchEvent(t)}}getElementData(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.enabled||this.readonly||(clearInterval(this.timeOut),0))}floatLabelTypeUpdate(){Jr.removeFloating(this.inputWrapper);const e=this.hiddenInput;this.hiddenInput.remove(),Jr.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])}mouseUpClick(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,Bt.remove(this.spinUp,"mouseleave",this.mouseUpClick),Bt.remove(this.spinDown,"mouseleave",this.mouseUpClick)}increment(e=this.step){this.isInteract=!1,this.changeValue(this.performAction(this.value,e,sl)),this.raiseChangeEvent()}decrement(e=this.step){this.isInteract=!1,this.changeValue(this.performAction(this.value,e,nl)),this.raiseChangeEvent()}destroy(){this.unwireEvents(),Kt(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),Kt(this.spinUp),Kt(this.spinDown));const e=["aria-labelledby","role","autocomplete","aria-readonly","autocorrect","aria-disabled","aria-placeholder","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-live","aria-valuenow","aria-invalid"];for(let t=0;t<e.length;t++)this.element.removeAttribute(e[t]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),Kt(this.container),super.destroy()}getText(){return this.element.value}focusIn(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),Vt([this.container],[rl]))}focusOut(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),qt([this.container],[rl]))}getPersistData(){return this.addOnPersist(["value"])}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"width":this.setElementWidth(e.width);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":Jr.setEnabled(e.enabled,this.element);break;case"enableRtl":Jr.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":Jr.setReadonly(e.readonly,this.element),this.readonly?Xt(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),Jr.validateInputType(this.container,this.element);break;case"placeholder":Jr.setPlaceholder(e.placeholder,this.element);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(e.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":ze(i,Pe(i,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),Jr.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":{const t=Pe(i,e);this.setProperties({currencyCode:t},!0),this.updateCurrency(i,t)}break;case"currencyCode":{const t=Pe(i,e);this.setProperties({currency:t},!0),this.updateCurrency("currency",t)}break;case"format":ze(i,Pe(i,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}updateClearButton(e){Jr.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()}updateSpinButton(e){e.showSpinButton?this.spinBtnCreation():(Kt(this.spinUp),Kt(this.spinDown))}getModuleName(){return"numerictextbox"}};return Zr([gi("")],e.prototype,"cssClass",void 0),Zr([gi(null)],e.prototype,"value",void 0),Zr([gi(-Number.MAX_VALUE)],e.prototype,"min",void 0),Zr([gi(Number.MAX_VALUE)],e.prototype,"max",void 0),Zr([gi(1)],e.prototype,"step",void 0),Zr([gi(null)],e.prototype,"width",void 0),Zr([gi(null)],e.prototype,"placeholder",void 0),Zr([gi({})],e.prototype,"htmlAttributes",void 0),Zr([gi(!0)],e.prototype,"showSpinButton",void 0),Zr([gi(!1)],e.prototype,"readonly",void 0),Zr([gi(!0)],e.prototype,"enabled",void 0),Zr([gi(!1)],e.prototype,"showClearButton",void 0),Zr([gi(!1)],e.prototype,"enablePersistence",void 0),Zr([gi("n2")],e.prototype,"format",void 0),Zr([gi(null)],e.prototype,"decimals",void 0),Zr([gi(null)],e.prototype,"currency",void 0),Zr([gi(null)],e.prototype,"currencyCode",void 0),Zr([gi(!0)],e.prototype,"strictMode",void 0),Zr([gi(!1)],e.prototype,"validateDecimalOnType",void 0),Zr([gi("Never")],e.prototype,"floatLabelType",void 0),Zr([yi()],e.prototype,"created",void 0),Zr([yi()],e.prototype,"destroyed",void 0),Zr([yi()],e.prototype,"change",void 0),Zr([yi()],e.prototype,"focus",void 0),Zr([yi()],e.prototype,"blur",void 0),e=Zr([vi],e),e})();var hl,cl=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const dl={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")};var pl=function(e){return e[e.Message=0]="Message",e[e.Label=1]="Label",e}({});let ul=(()=>{let e=hl=class extends ni{constructor(e,t){super(t,e),this.validated=[],this.errorRules=[],this.allowSubmit=!1,this.required="required",this.infoElement=null,this.inputElement=null,this.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",this.localyMessage={},this.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},void 0===this.rules&&(this.rules={}),this.l10n=new Qi("formValidator",this.defaultMessages,this.locale),this.locale&&this.localeFunc(),bt.on("notifyExternalChange",this.afterLocalization,this),e="string"==typeof e?Qt(e,document):e,null!=this.element&&(this.element.setAttribute("novalidate",""),this.inputElements=$t(this.selectQuery,this.element),this.createHTML5Rules(),this.wireEvents())}addRules(e,t){e&&(this.rules.hasOwnProperty(e)?Ve(this.rules[e],t,{}):this.rules[e]=t)}removeRules(e,t){if(e||t)if(this.rules[e]&&!t)delete this.rules[e];else{if(qe(this.rules[e]&&t))return;for(let i=0;i<t.length;i++)delete this.rules[e][t[i]]}else this.rules={}}validate(e){const t=Object.keys(this.rules);if(e&&t.length)return this.validateRules(e),-1!==t.indexOf(e)&&0===this.errorRules.filter(t=>t.name===e).length;this.errorRules=[];for(const i of t)this.validateRules(i);return 0===this.errorRules.length}reset(){this.element.reset(),this.clearForm()}getInputElement(e){return this.inputElement=Qt('[name="'+e+'"]',this.element),this.inputElement}destroy(){this.reset(),this.unwireEvents(),this.rules={};const e=$t("."+this.errorClass+", ."+this.validClass,this.element);for(const t of e)Kt(t);super.destroy(),bt.off("notifyExternalChange",this.afterLocalization)}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"locale":this.localeFunc()}}localeFunc(){for(const e of Object.keys(this.defaultMessages)){this.l10n.setLocale(this.locale);const t=this.l10n.getConstant(e);this.localyMessage[e]=t}}getModuleName(){return"formValidator"}afterLocalization(e){this.locale=e.locale,this.localeFunc()}refresh(){this.unwireEvents(),this.inputElements=$t(this.selectQuery,this.element),this.wireEvents()}clearForm(){this.errorRules=[],this.validated=[];const e=$t(this.selectQuery,this.element);for(const t of e){const e=t;e.removeAttribute("aria-invalid"),e.classList.remove(this.errorClass),e.name.length>0&&(this.getInputElement(e.name),this.getErrorElement(e.name),this.hideMessage(e.name)),e.classList.remove(this.validClass)}}createHTML5Rules(){const e=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],t=["hidden","email","url","date","number","tel"];for(const i of this.inputElements){const s={};for(let n of e)if(null!==i.getAttribute(n))switch(n){case"required":this.defRule(i,s,n,i.required);break;case"data-validation":n=i.getAttribute(n),this.defRule(i,s,n,!0);break;case"type":-1!==t.indexOf(i.type)&&this.defRule(i,s,i.type,!0);break;case"rangeLength":case"range":this.defRule(i,s,n,JSON.parse(i.getAttribute(n)));break;case"equalTo":{const e=i.getAttribute(n);this.defRule(i,s,n,e)}break;default:"true"===i.getAttribute("data-val")?this.annotationRule(i,s,n,i.getAttribute(n)):this.defRule(i,s,n,i.getAttribute(n))}0!==Object.keys(s).length&&this.addRules(i.name,s)}}annotationRule(e,t,i,s){const n=i.split("-"),o=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],r=n[n.length-1],l=n[n.length-2];if(-1!==o.indexOf(r))switch(r){case"required":this.defRule(e,t,"required",s);break;case"creditcard":this.defRule(e,t,"creditcard",s);break;case"phone":this.defRule(e,t,"tel",s)}else if(-1!==o.indexOf(l))switch(l){case"maxlength":this.defRule(e,t,"maxLength",s);break;case"minlength":this.defRule(e,t,"minLength",s);break;case"range":{const i=e.getAttribute("data-val-range-min"),s=e.getAttribute("data-val-range-max");this.defRule(e,t,"range",[i,s])}break;case"equalto":{const s=e.getAttribute(i).split(".");this.defRule(e,t,"equalTo",s[s.length-1])}break;case"regex":this.defRule(e,t,"regex",s)}}defRule(e,t,i,s){const n=e.getAttribute("data-"+i+"-message"),o=e.getAttribute("data-val-"+i);let r;this.rules[e.name]&&"validateHidden"!==i&&"hidden"!==i&&(this.getInputElement(e.name),r=this.getErrorMessage(this.rules[e.name][i],i)),n?s=[s,n]:o?s=[s,o]:r&&(s=[s,r]),t[i]=s}wireEvents(){for(const e of this.inputElements)hl.isCheckable(e)?Bt.add(e,"click",this.clickHandler,this):"SELECT"===e.tagName?Bt.add(e,"change",this.changeHandler,this):(Bt.add(e,"focusout",this.focusOutHandler,this),Bt.add(e,"keyup",this.keyUpHandler,this));Bt.add(this.element,"submit",this.submitHandler,this),Bt.add(this.element,"reset",this.resetHandler,this)}unwireEvents(){for(const e of this.inputElements)Bt.clearEvents(e);Bt.remove(this.element,"submit",this.submitHandler),Bt.remove(this.element,"reset",this.resetHandler)}focusOutHandler(e){this.trigger("focusout",e);const t=e.target;this.rules[t.name]&&(this.rules[t.name][this.required]||t.value.length>0?this.validate(t.name):-1===this.validated.indexOf(t.name)&&this.validated.push(t.name))}keyUpHandler(e){this.trigger("keyup",e);const t=e.target;(9!==e.which||this.rules[t.name]&&(!this.rules[t.name]||this.rules[t.name][this.required]))&&-1!==this.validated.indexOf(t.name)&&this.rules[t.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(e.which)&&this.validate(t.name)}clickHandler(e){this.trigger("click",e);const t=e.target;"submit"!==t.type?this.validate(t.name):null!==t.getAttribute("formnovalidate")&&(this.allowSubmit=!0)}changeHandler(e){this.trigger("change",e),this.validate(e.target.name)}submitHandler(e){this.trigger("submit",e),this.allowSubmit||this.validate()?this.allowSubmit=!1:e.preventDefault()}resetHandler(){this.clearForm()}validateRules(e){if(!this.rules[e])return;const t=Object.keys(this.rules[e]);let i=!1,s=!1;const n=t.indexOf("validateHidden"),o=t.indexOf("hidden");if(this.getInputElement(e),-1!==o&&(i=!0),-1!==n&&(s=!0),!i||i&&s){-1!==n&&t.splice(n,1),-1!==o&&t.splice(o-1,1),this.getErrorElement(e);for(const i of t){const t=this.getErrorMessage(this.rules[e][i],i),s={name:e,message:t},n={inputName:e,element:this.inputElement,message:t};if(!this.isValid(e,i)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(e),this.errorRules.push(s),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info"),this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.infoElement?this.showMessage(s):this.createErrorElement(e,s.message,this.inputElement),n.errorElement=this.infoElement,n.status="failure",this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.optionalValidationStatus(e,n),this.trigger("validationComplete",n),"required"===i&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(e),n.status="success",this.trigger("validationComplete",n)}}}optionalValidationStatus(e,t){this.rules[e][this.required]||this.inputElement.value.length||qe(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),t.status="",this.hideMessage(e))}isValid(e,t){const i=this.rules[e][t],s=this.rules[e][t],n={value:this.inputElement.value,param:i instanceof Array&&"string"==typeof i[1]?i[0]:i,element:this.inputElement,formElement:this.element};return this.trigger("validationBegin",n),!n.param&&"required"===t||(s&&"function"==typeof s[0]?s[0].call(this,{element:this.inputElement,value:this.inputElement.value}):hl.isCheckable(this.inputElement)?"required"!==t||$t('input[name="'+e+'"]:checked',this.element).length>0:hl.checkValidator[t](n))}getErrorMessage(e,t){let i=this.inputElement.getAttribute("data-"+t+"-message")?this.inputElement.getAttribute("data-"+t+"-message"):e instanceof Array&&"string"==typeof e[1]?e[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[t]:this.defaultMessages[t];const s=i.match(/{(\d)}/g);if(!qe(s))for(let n=0;n<s.length;n++)i=i.replace(s[n],e instanceof Array?e[n]:e);return i}createErrorElement(e,t,i){let s=Nt(this.errorElement,{className:this.errorClass,innerHTML:t,attrs:{for:e}});this.errorOption===pl.Message&&(s.classList.remove(this.errorClass),s.classList.add("e-message"),s=Nt(this.errorContainer,{className:this.errorClass,innerHTML:s.outerHTML})),s.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+i.id+'"]')?this.element.querySelector('[data-valmsg-for="'+i.id+'"]').appendChild(s):!0===i.hasAttribute("data-msg-containerid")?Qt("#"+i.getAttribute("data-msg-containerid"),this.element).appendChild(s):null!=this.customPlacement?this.customPlacement.call(this,this.inputElement,s):this.inputElement.parentNode.insertBefore(s,this.inputElement.nextSibling),s.style.display="block",this.getErrorElement(e),this.validated.push(e),this.checkRequired(e)}getErrorElement(e){return this.infoElement=Qt(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=Qt(this.errorElement+"."+this.errorClass+'[for="'+e+'"]',this.element)),this.infoElement}removeErrorRules(e){for(let t=0;t<this.errorRules.length;t++)this.errorRules[t].name===e&&this.errorRules.splice(t,1)}showMessage(e){this.infoElement.style.display="block",this.infoElement.innerHTML=e.message,this.checkRequired(e.name)}hideMessage(e){this.infoElement&&(this.infoElement.style.display="none",this.removeErrorRules(e),this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass),this.inputElement.setAttribute("aria-invalid","false"))}checkRequired(e){this.rules[e][this.required]||this.inputElement.value.length||qe(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(e))}static isCheckable(e){const t=e.getAttribute("type");return t&&("checkbox"===t||"radio"===t||"submit"===t)}};return e.checkValidator={required:e=>isNaN(Date.parse(e.value))?e.value.toString().length>0:!isNaN(new Date(e.value).getTime()),email:e=>dl.EMAIL.test(e.value),url:e=>dl.URL.test(e.value),dateIso:e=>dl.DATE_ISO.test(e.value),tel:e=>dl.PHONE.test(e.value),creditcard:e=>dl.CREDITCARD.test(e.value),number:e=>!isNaN(Number(e.value))&&-1===e.value.indexOf(" "),digits:e=>dl.DIGITS.test(e.value),maxLength:e=>e.value.length<=e.param,minLength:e=>e.value.length>=e.param,rangeLength:e=>{const t=e.param;return e.value.length>=t[0]&&e.value.length<=t[1]},range:e=>{const t=e.param;return!isNaN(Number(e.value))&&Number(e.value)>=t[0]&&Number(e.value)<=t[1]},date:e=>!isNaN(new Date(e.value).getTime()),max:e=>isNaN(Number(e.value))?new Date(e.value).getTime()<=new Date(JSON.parse(JSON.stringify(e.param))).getTime():+e.value<=e.param,min:e=>{if(isNaN(Number(e.value))){if(-1!==e.value.indexOf(",")){const t=e.value.replace(/,/g,"");return parseFloat(t)>=e.param}return new Date(e.value).getTime()>=new Date(JSON.parse(JSON.stringify(e.param))).getTime()}return+e.value>=e.param},regex:e=>new RegExp(e.param).test(e.value),equalTo:e=>{const t=e.formElement.querySelector("#"+e.param);return e.param=t.value,e.param===e.value}},cl([gi("")],e.prototype,"locale",void 0),cl([gi("e-hidden")],e.prototype,"ignore",void 0),cl([gi()],e.prototype,"rules",void 0),cl([gi("e-error")],e.prototype,"errorClass",void 0),cl([gi("e-valid")],e.prototype,"validClass",void 0),cl([gi("label")],e.prototype,"errorElement",void 0),cl([gi("div")],e.prototype,"errorContainer",void 0),cl([gi(pl.Label)],e.prototype,"errorOption",void 0),cl([yi()],e.prototype,"focusout",void 0),cl([yi()],e.prototype,"keyup",void 0),cl([yi()],e.prototype,"click",void 0),cl([yi()],e.prototype,"change",void 0),cl([yi()],e.prototype,"submit",void 0),cl([yi()],e.prototype,"validationBegin",void 0),cl([yi()],e.prototype,"validationComplete",void 0),cl([yi()],e.prototype,"customPlacement",void 0),e=hl=cl([vi],e),e})();var ml=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const gl="e-input-focus",fl=["title","style","class"];let bl=(()=>{let e=class extends Bi{constructor(e,t){super(e,t),this.previousValue=null,this.isAngular=!1,this.isHiddenInput=!1,this.isForm=!1,this.inputPreviousValue=null,this.isVue=!1,this.textboxOptions=e}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"floatLabelType":Jr.removeFloating(this.textboxWrapper),Jr.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":Jr.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":Jr.setWidth(e.width,this.textboxWrapper.container);break;case"value":{const e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=e,Jr.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(qe(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&qe(this.preventChange))&&this.raiseChangeEvent()}break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkAttributes(!0),Jr.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":Jr.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),Jr.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":"TEXTAREA"!==this.respectiveElement.tagName&&(Jr.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent());break;case"enableRtl":Jr.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":Jr.setPlaceholder(this.placeholder,this.respectiveElement);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"locale":this.globalize=new St(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),Jr.setPlaceholder(this.placeholder,this.respectiveElement)}}getModuleName(){return"textbox"}isBlank(e){return!e||/^\s*$/.test(e)}preRender(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=Zt(this.element,"form"),qe(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){const e=Pe("ej2_instances",this.element),t=this.createElement(this.multiline?"textarea":"input");let i=0;for(;i<this.element.attributes.length;i++){const e=this.element.attributes[i].nodeName;"id"!==e&&(t.setAttribute(e,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML,"name"===e&&this.element.removeAttribute("name"))}this.element.appendChild(t),this.element=t,ze("ej2_instances",e,this.element)}if(this.updateHTMLAttrToElement(),this.checkAttributes(!1),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),this.element.setAttribute("role","textbox"),this.globalize=new St(this.locale),this.l10n=new Qi("textbox",{placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",We("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",We("textarea"));const e=["placeholder","disabled","value","readonly","type","autocomplete"];for(let t=0;t<this.element.attributes.length;t++){const i=this.element.attributes[t].nodeName;this.element.hasAttribute(i)&&fl.indexOf(i)<0&&"id"!==i&&"type"!==i&&"e-mappinguid"!==i&&(this.textarea.setAttribute(i,this.element.attributes[t].nodeValue),e.indexOf(i)<0&&(this.element.removeAttribute(i),t--))}}}checkAttributes(e){const t=e?qe(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"];for(const i of t)if(!qe(this.element.getAttribute(i)))switch(i){case"disabled":if(qe(this.textboxOptions)||void 0===this.textboxOptions.enabled||e){const t="disabled"!==this.element.getAttribute(i)&&""!==this.element.getAttribute(i)&&"true"!==this.element.getAttribute(i);this.setProperties({enabled:t},!e)}break;case"readonly":if(qe(this.textboxOptions)||void 0===this.textboxOptions.readonly||e){const t="readonly"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i);this.setProperties({readonly:t},!e)}break;case"placeholder":(qe(this.textboxOptions)||void 0===this.textboxOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"autocomplete":(qe(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||e)&&this.setProperties({autocomplete:"off"===this.element.autocomplete?"off":"on"},!e);break;case"value":(qe(this.textboxOptions)||void 0===this.textboxOptions.value||e)&&this.setProperties({value:this.element.value},!e);break;case"type":(qe(this.textboxOptions)||void 0===this.textboxOptions.type||e)&&this.setProperties({type:this.element.type},!e)}}render(){let e=this.cssClass;qe(this.cssClass)||""===this.cssClass||(e=this.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=Jr.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:e,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),qe(this.value)||(Jr.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),qe(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:qe(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,Jr.setWidth(this.width,this.textboxWrapper.container),this.renderComplete()}updateHTMLAttrToWrapper(){if(!qe(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if(fl.indexOf(e)>-1)if("class"===e){const t=this.getInputValidClassList(this.htmlAttributes[e]);""!==t&&Vt([this.textboxWrapper.container],t.split(" "))}else if("style"===e){let t=this.textboxWrapper.container.getAttribute(e);t=qe(t)?this.htmlAttributes[e]:t+this.htmlAttributes[e],this.textboxWrapper.container.setAttribute(e,t)}else this.textboxWrapper.container.setAttribute(e,this.htmlAttributes[e])}updateHTMLAttrToElement(){if(!qe(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))fl.indexOf(e)<0&&this.element.setAttribute(e,this.htmlAttributes[e])}updateCssClass(e,t){Jr.setCssClass(this.getInputValidClassList(e),[this.textboxWrapper.container],this.getInputValidClassList(t))}getInputValidClassList(e){let t=e;return qe(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t}setInitialValue(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)}wireEvents(){Bt.add(this.respectiveElement,"focus",this.focusHandler,this),Bt.add(this.respectiveElement,"blur",this.focusOutHandler,this),Bt.add(this.respectiveElement,"input",this.inputHandler,this),Bt.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&Bt.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!qe(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&Bt.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)}animationHandler(){this.textboxWrapper.container.classList.add("e-valid-input");const e=this.textboxWrapper.container.querySelector(".e-float-text");qe(e)||(e.classList.add("e-label-top"),e.classList.contains("e-label-bottom")&&e.classList.remove("e-label-bottom"))}resetValue(e){const t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=e,this.isProtectedOnChange=t}resetForm(){if(this.resetValue(this.isAngular?"":this.initialValue),!qe(this.textboxWrapper)){const e=this.textboxWrapper.container.querySelector(".e-float-text");qe(e)||(qe(this.initialValue)||""===this.initialValue?(e.classList.add("e-label-bottom"),e.classList.remove("e-label-top")):""!==this.initialValue&&(e.classList.add("e-label-top"),e.classList.remove("e-label-bottom")))}}focusHandler(e){this.trigger("focus",{container:this.textboxWrapper.container,event:e,value:this.value})}focusOutHandler(e){null===this.previousValue&&null===this.value&&""===this.respectiveElement.value||this.previousValue===this.respectiveElement.value||this.raiseChangeEvent(e,!0),this.trigger("blur",{container:this.textboxWrapper.container,event:e,value:this.value})}inputHandler(e){const t={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(this.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",t),e.stopPropagation()}changeHandler(e){this.setProperties({value:this.respectiveElement.value},!0),this.raiseChangeEvent(e,!0),e.stopPropagation()}raiseChangeEvent(e,t){const i={event:e,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:t||!1,isInteracted:t||!1};this.preventChange=!1,this.trigger("change",i),this.previousValue=this.value}bindClearEvent(){this.showClearButton&&"TEXTAREA"!==this.respectiveElement.tagName&&(this.enabled?Bt.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):Bt.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))}resetInputHandler(e){e.preventDefault(),(!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.textboxWrapper.container.classList.contains("e-static-clear"))&&(Jr.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0),this.trigger("input",{event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container}),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(e,!0))}unWireEvents(){Bt.remove(this.respectiveElement,"focus",this.focusHandler),Bt.remove(this.respectiveElement,"blur",this.focusOutHandler),Bt.remove(this.respectiveElement,"input",this.inputHandler),Bt.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&Bt.remove(this.formElement,"reset",this.resetForm),!qe(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&Bt.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)}destroy(){this.unWireEvents(),"INPUT"===this.element.tagName&&this.multiline&&(Kt(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-placeholder","aria-disabled","aria-readonly","aria-labelledby"]),qe(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),Kt(this.textboxWrapper.container)),this.textboxWrapper=null,super.destroy()}addIcon(e,t){Jr.addIcon(e,t,this.textboxWrapper.container,this.respectiveElement,this.createElement)}getPersistData(){return this.addOnPersist(["value"])}addAttributes(e){for(const t of Object.keys(e))"disabled"===t?(this.setProperties({enabled:!1},!0),Jr.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===t?(this.setProperties({readonly:!0},!0),Jr.setReadonly(this.readonly,this.respectiveElement)):"class"===t?this.respectiveElement.classList.add(e[t]):"placeholder"===t?(this.setProperties({placeholder:e[t]},!0),Jr.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.setAttribute(t,e[t])}removeAttributes(e){for(const t of e)"disabled"===t?(this.setProperties({enabled:!0},!0),Jr.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===t?(this.setProperties({readonly:!1},!0),Jr.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===t?(this.setProperties({placeholder:null},!0),Jr.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(t)}focusIn(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&Vt([this.textboxWrapper.container],[gl]))}focusOut(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&qt([this.textboxWrapper.container],[gl]))}};return ml([gi("text")],e.prototype,"type",void 0),ml([gi(!1)],e.prototype,"readonly",void 0),ml([gi(null)],e.prototype,"value",void 0),ml([gi("Never")],e.prototype,"floatLabelType",void 0),ml([gi("")],e.prototype,"cssClass",void 0),ml([gi(null)],e.prototype,"placeholder",void 0),ml([gi("on")],e.prototype,"autocomplete",void 0),ml([gi({})],e.prototype,"htmlAttributes",void 0),ml([gi(!1)],e.prototype,"multiline",void 0),ml([gi(!0)],e.prototype,"enabled",void 0),ml([gi(!1)],e.prototype,"showClearButton",void 0),ml([gi(!1)],e.prototype,"enablePersistence",void 0),ml([gi(null)],e.prototype,"width",void 0),ml([yi()],e.prototype,"created",void 0),ml([yi()],e.prototype,"destroyed",void 0),ml([yi()],e.prototype,"change",void 0),ml([yi()],e.prototype,"blur",void 0),ml([yi()],e.prototype,"focus",void 0),ml([yi()],e.prototype,"input",void 0),e=ml([vi],e),e})();var yl=i("YYdA"),vl=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const Cl="e-rtl",wl="e-overlay",Sl="e-nav-right-arrow",El="e-nav-left-arrow",xl="e-scroll-nav",Rl="e-scroll-device",Dl="e-scroll-overlay",Tl="e-scroll-right-overlay",Ml="e-scroll-left-overlay";let Il=(()=>{let e=class extends Bi{constructor(e,t){super(e,t)}preRender(){this.browser=zt.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=zt.isDevice,this.customStep=!0;const e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=We("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(Cl)}render(){this.touchModule=new es(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),Bt.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(Rl),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()}setScrollState(){qe(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0}initialize(){const e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");const i=this.element,s=[].slice.call(i.children);for(const n of s)e.appendChild(n);t.appendChild(e),i.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e}getPersistData(){return this.addOnPersist(["scrollStep"])}getModuleName(){return"hScroll"}destroy(){const e=this.element;e.style.display="",e.classList.remove("e-hscroll"),e.classList.remove(Rl);const t=$t(".e-"+e.id+"_nav."+xl,e),i=$t("."+Dl,e);[].slice.call(i).forEach(e=>{Kt(e)});for(const s of[].slice.call(this.scrollItems.children))e.appendChild(s);this.uniqueId&&this.element.removeAttribute("id"),Kt(this.scrollEle),t.length>0&&(Kt(t[0]),qe(t[1])||Kt(t[1])),Bt.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,super.destroy()}disable(e){const t=$t(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add(wl):this.element.classList.remove(wl),[].slice.call(t).forEach(t=>{t.setAttribute("tabindex",e?"-1":"0")})}createOverlay(e){const t=e.id.concat("_nav"),i=this.createElement("div",{className:Dl+" "+Tl}),s="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),n=this.createElement("div",{id:t.concat("_right"),className:s}),o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});n.appendChild(o);const r=this.createElement("div",{className:Dl+" "+Ml});this.ieCheck&&n.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(n),e.insertBefore(r,e.firstChild),this.eventBinding([n])}createNavIcon(e){const t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),s=this.createElement("div",{id:t.concat("_right"),className:i});s.setAttribute("aria-disabled","false");const n=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),r=this.createElement("div",{id:t.concat("_left"),className:o+" "+wl});r.setAttribute("aria-disabled","true");const l=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});r.appendChild(l),s.appendChild(n),e.appendChild(s),e.insertBefore(r,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),r.classList.add("e-ie-align")),this.eventBinding([s,r])}onKeyPress(e){if("Enter"===e.key){const t=()=>{this.keyTimeout=!0,this.eleScrolling(10,e.target,!0)};this.keyTimer=window.setTimeout(()=>{t()},100)}}onKeyUp(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))}eventBinding(e){[].slice.call(e).forEach(e=>{new es(e,{tapHold:this.tabHoldHandler.bind(this),tapHoldThreshold:500}),e.addEventListener("keydown",this.onKeyPress.bind(this)),e.addEventListener("keyup",this.onKeyUp.bind(this)),e.addEventListener("mouseup",this.repeatScroll.bind(this)),e.addEventListener("touchend",this.repeatScroll.bind(this)),e.addEventListener("contextmenu",e=>{e.preventDefault()}),Bt.add(e,"click",this.clickEventHandler,this)})}repeatScroll(){clearInterval(this.timeout)}tabHoldHandler(e){let t=e.originalEvent.target;t=this.contains(t,xl)?t.firstElementChild:t;const i=()=>{this.eleScrolling(10,t,!0)};this.timeout=window.setInterval(()=>{i()},50)}contains(e,t){return e.classList.contains(t)}eleScrolling(e,t,i){const s=this.element;let n=t.classList;n.contains(xl)&&(n=t.querySelector(".e-nav-arrow").classList),this.contains(s,Cl)&&this.browserCheck&&(e=-e),!this.contains(s,Cl)||this.browserCheck||this.ieCheck?n.contains(Sl)?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i):n.contains(El)?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i)}clickEventHandler(e){this.eleScrolling(this.scrollStep,e.target,!1)}swipeHandler(e){const t=this.scrollEle;let i;i=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;let s=.5;const n=()=>{const o=Math.sin(s);o<=0?window.cancelAnimationFrame(o):("Left"===e.swipeDirection?t.scrollLeft+=i*o:"Right"===e.swipeDirection&&(t.scrollLeft-=i*o),s-=.5,window.requestAnimationFrame(n))};n()}scrollUpdating(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e}frameScrollRequest(e,t,i){if(i)return void this.scrollUpdating(e,t);this.customStep||[].slice.call($t("."+Dl,this.element)).forEach(t=>{e-=t.offsetWidth});const s=()=>{let i,n;this.contains(this.element,Cl)&&this.browserCheck?(i=-e,n=-10):(i=e,n=10),i<10?window.cancelAnimationFrame(n):(this.scrollUpdating(n,t),e-=n,window.requestAnimationFrame(s))};s()}touchHandler(e){const t=this.scrollEle;let i=e.distanceX;this.ieCheck&&this.contains(this.element,Cl)&&(i=-i),"Left"===e.scrollDirection?t.scrollLeft=t.scrollLeft+i:"Right"===e.scrollDirection&&(t.scrollLeft=t.scrollLeft-i)}arrowDisabling(e,t){if(this.isDevice){const i=(qe(e)?t:e).querySelector(".e-nav-arrow");qe(e)?ti(i,[Sl],[El]):ti(i,[El],[Sl])}else e.classList.add(wl),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove(wl),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()}scrollHandler(e){const t=e.target,i=t.offsetWidth,s=this.element.querySelector(".e-scroll-left-nav"),n=this.element.querySelector(".e-scroll-right-nav");let o=this.element.querySelector("."+Ml),r=this.element.querySelector("."+Tl),l=t.scrollLeft;if(l<=0&&(l=-l),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(o=this.element.querySelector("."+Tl),r=this.element.querySelector("."+Ml)),o.style.width=l<40?l+"px":"40px",r.style.width=t.scrollWidth-Math.ceil(i+l)<40?t.scrollWidth-Math.ceil(i+l)+"px":"40px"),0===l)this.arrowDisabling(s,n);else if(Math.ceil(i+l+.1)>=t.scrollWidth)this.arrowDisabling(n,s);else{const e=this.element.querySelector(".e-scroll-nav.e-overlay");e&&(e.classList.remove(wl),e.setAttribute("aria-disabled","false"),e.setAttribute("tabindex","0"))}}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(Cl):this.element.classList.remove(Cl)}}};return vl([gi(null)],e.prototype,"scrollStep",void 0),e=vl([vi],e),e})();var kl=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const Fl="e-rtl",Al="e-overlay",Ol="e-nav-up-arrow",Ll="e-nav-down-arrow",Pl="e-scroll-nav",zl="e-scroll-device",Bl="e-scroll-overlay",Hl="e-scroll-up-overlay",Nl="e-scroll-down-overlay";let Vl=(()=>{let e=class extends Bi{constructor(e,t){super(e,t)}preRender(){this.browser=zt.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=zt.isDevice,this.customStep=!0;const e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=We("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(Fl)}render(){this.touchModule=new es(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),Bt.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(zl),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),Bt.add(this.element,"wheel",this.wheelEventHandler,this)}setScrollState(){qe(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0}initialize(){const e=Nt("div",{className:"e-vscroll-content"}),t=Nt("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");const i=this.element,s=[].slice.call(i.children);for(const n of s)e.appendChild(n);t.appendChild(e),i.appendChild(t),t.style.overflowY="hidden",this.scrollEle=t,this.scrollItems=e}getPersistData(){return this.addOnPersist(["scrollStep"])}getModuleName(){return"vScroll"}destroy(){const e=this.element;e.style.display="",qt([this.element],["e-vscroll",zl]);const t=$t(".e-"+e.id+"_nav."+Pl,e),i=$t("."+Bl,e);[].slice.call(i).forEach(e=>{Kt(e)});for(const s of[].slice.call(this.scrollItems.children))e.appendChild(s);this.uniqueId&&this.element.removeAttribute("id"),Kt(this.scrollEle),t.length>0&&(Kt(t[0]),qe(t[1])||Kt(t[1])),Bt.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,super.destroy()}disable(e){const t=$t(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add(Al):this.element.classList.remove(Al),[].slice.call(t).forEach(t=>{t.setAttribute("tabindex",e?"-1":"0")})}createOverlayElement(e){const t=e.id.concat("_nav"),i=Nt("div",{className:Bl+" "+Nl}),s="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),n=Nt("div",{id:t.concat("down"),className:s}),o=Nt("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});n.appendChild(o);const r=Nt("div",{className:Bl+" "+Hl});this.ieCheck&&n.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(n),e.insertBefore(r,e.firstChild),this.eventBinding([n])}createNavIcon(e){const t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),s=Nt("div",{id:t.concat("_down"),className:i});s.setAttribute("aria-disabled","false");const n=Nt("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),r=Nt("div",{id:t.concat("_up"),className:o+" "+Al});r.setAttribute("aria-disabled","true");const l=Nt("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});r.appendChild(l),s.appendChild(n),s.setAttribute("tabindex","0"),e.appendChild(s),e.insertBefore(r,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),r.classList.add("e-ie-align")),this.eventBinding([s,r])}onKeyPress(e){if("Enter"===e.key){const t=()=>{this.keyTimeout=!0,this.eleScrolling(10,e.target,!0)};this.keyTimer=window.setTimeout(()=>{t()},100)}}onKeyUp(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))}eventBinding(e){[].slice.call(e).forEach(e=>{new es(e,{tapHold:this.tabHoldHandler.bind(this),tapHoldThreshold:500}),e.addEventListener("keydown",this.onKeyPress.bind(this)),e.addEventListener("keyup",this.onKeyUp.bind(this)),e.addEventListener("mouseup",this.repeatScroll.bind(this)),e.addEventListener("touchend",this.repeatScroll.bind(this)),e.addEventListener("contextmenu",e=>{e.preventDefault()}),Bt.add(e,"click",this.clickEventHandler,this)})}repeatScroll(){clearInterval(this.timeout)}tabHoldHandler(e){let t=e.originalEvent.target;t=this.contains(t,Pl)?t.firstElementChild:t;const i=()=>{this.eleScrolling(10,t,!0)};this.timeout=window.setInterval(()=>{i()},50)}contains(e,t){return e.classList.contains(t)}eleScrolling(e,t,i){let s=t.classList;s.contains(Pl)&&(s=t.querySelector(".e-nav-arrow").classList),s.contains(Ll)?this.frameScrollRequest(e,"add",i):s.contains(Ol)&&this.frameScrollRequest(e,"",i)}clickEventHandler(e){this.eleScrolling(this.scrollStep,e.target,!1)}wheelEventHandler(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)}swipeHandler(e){const t=this.scrollEle;let i;i=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;let s=.5;const n=()=>{const o=Math.sin(s);o<=0?window.cancelAnimationFrame(o):("Up"===e.swipeDirection?t.scrollTop+=i*o:"Down"===e.swipeDirection&&(t.scrollTop-=i*o),s-=.02,window.requestAnimationFrame(n))};n()}scrollUpdating(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e}frameScrollRequest(e,t,i){if(i)return void this.scrollUpdating(e,t);this.customStep||[].slice.call($t("."+Bl,this.element)).forEach(t=>{e-=t.offsetHeight});const s=()=>{e<10?window.cancelAnimationFrame(10):(this.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(s))};s()}touchHandler(e){const t=this.scrollEle,i=e.distanceY;"Up"===e.scrollDirection?t.scrollTop=t.scrollTop+i:"Down"===e.scrollDirection&&(t.scrollTop=t.scrollTop-i)}arrowDisabling(e,t){if(this.isDevice){const i=(qe(e)?t:e).querySelector(".e-nav-arrow");qe(e)?ti(i,[Ll],[Ol]):ti(i,[Ol],[Ll])}else e.classList.add(Al),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove(Al),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()}scrollEventHandler(e){const t=e.target,i=t.offsetHeight,s=this.element.querySelector(".e-scroll-up-nav"),n=this.element.querySelector(".e-scroll-down-nav"),o=this.element.querySelector("."+Hl),r=this.element.querySelector("."+Nl);let l=t.scrollTop;if(l<=0&&(l=-l),this.isDevice&&(o.style.height=l<40?l+"px":"40px",r.style.height=t.scrollHeight-Math.ceil(i+l)<40?t.scrollHeight-Math.ceil(i+l)+"px":"40px"),0===l)this.arrowDisabling(s,n);else if(Math.ceil(i+l+.1)>=t.scrollHeight)this.arrowDisabling(n,s);else{const e=this.element.querySelector(".e-scroll-nav.e-overlay");e&&(e.classList.remove(Al),e.setAttribute("aria-disabled","false"),e.setAttribute("tabindex","0"))}}onPropertyChanged(e,t){for(const i of Object.keys(e))switch(i){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(Fl):this.element.classList.remove(Fl)}}};return kl([gi(null)],e.prototype,"scrollStep",void 0),e=kl([vi],e),e})();var ql=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const jl="e-vertical",Wl="e-toolbar-items",Gl="e-toolbar-item",_l="e-rtl",Ul="e-separator",Kl="e-popup-up-icon",Yl="e-popup-down-icon",Xl="e-popup-open",Ql="e-template",$l="e-overlay",Jl="e-toolbar-text",Zl="e-popup-text",ea="e-overflow-show",ta="e-overflow-hide",ia="e-hor-nav",sa="e-toolbar-center",na="e-tbar-pos",oa="e-toolbar-pop",ra="e-toolbar-popup",la="e-nav-active",aa="e-ignore",ha="e-popup-alone",ca="e-hidden",da="e-toolbar-multirow",pa="e-multirow-pos",ua="e-multirow-separator",ma="e-extended-separator",ga="e-extended-toolbar",fa="e-tbar-extended";let ba=(()=>{class e extends Ai{}return ql([gi("")],e.prototype,"id",void 0),ql([gi("")],e.prototype,"text",void 0),ql([gi("auto")],e.prototype,"width",void 0),ql([gi("")],e.prototype,"cssClass",void 0),ql([gi(!1)],e.prototype,"showAlwaysInPopup",void 0),ql([gi(!1)],e.prototype,"disabled",void 0),ql([gi("")],e.prototype,"prefixIcon",void 0),ql([gi("")],e.prototype,"suffixIcon",void 0),ql([gi(!0)],e.prototype,"visible",void 0),ql([gi("None")],e.prototype,"overflow",void 0),ql([gi("")],e.prototype,"template",void 0),ql([gi("Button")],e.prototype,"type",void 0),ql([gi("Both")],e.prototype,"showTextOn",void 0),ql([gi(null)],e.prototype,"htmlAttributes",void 0),ql([gi("")],e.prototype,"tooltipText",void 0),ql([gi("Left")],e.prototype,"align",void 0),ql([yi()],e.prototype,"click",void 0),e})(),ya=(()=>{let e=class extends Bi{constructor(e,t){super(e,t),this.resizeContext=this.resize.bind(this),this.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"}}destroy(){this.isReact&&this.clearTemplate();const e=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(e).forEach(e=>{qe(e)||qe(e.ej2_instances)||qe(e.ej2_instances[0])||e.ej2_instances[0].isDestroyed||e.ej2_instances[0].destroy()}),super.destroy(),this.unwireEvents(),this.tempId.forEach(e=>{qe(this.element.querySelector(e))||(document.body.appendChild(this.element.querySelector(e)).style.display="none")});this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&this.element.appendChild(this.ctrlTem),this.clearProperty(),this.popObj=null,this.tbarAlign=null,this.remove(this.element,"e-toolpop"),this.cssClass&&qt([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","aria-haspopup","role"].forEach(e=>this.element.removeAttribute(e))}preRender(){const e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(jl),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,_l)}wireEvents(){Bt.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.allowKeyboard&&this.wireKeyboardEvent()}wireKeyboardEvent(){this.keyModule=new Xi(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),Bt.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")}unwireKeyboardEvent(){this.keyModule&&(Bt.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)}docKeyDown(e){if("INPUT"===e.target.tagName)return;const t=!qe(this.popObj)&&Wt(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}unwireEvents(){Bt.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),Bt.remove(document,"scroll",this.docEvent),Bt.remove(document,"click",this.docEvent)}clearProperty(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}}docEvent(e){const t=Zt(e.target,".e-popup");this.popObj&&Wt(this.popObj.element)&&!t&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})}destroyScroll(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,na),this.scrollModule.destroy(),this.scrollModule=null)}destroyItems(){this.element&&[].slice.call(this.element.querySelectorAll("."+Gl)).forEach(e=>{Kt(e)});const e=this.element.querySelector("."+Wl);this.tbarAlign&&([].slice.call(e.children).forEach(e=>{Kt(e)}),this.tbarAlign=!1,this.remove(e,na)),this.clearProperty()}destroyMode(){this.scrollModule&&(this.remove(this.scrollModule.element,_l),this.destroyScroll()),this.remove(this.element,fa),this.remove(this.element,ga);const e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,da),this.popObj&&this.popupRefresh(this.popObj.element,!0)}add(e,t){e.classList.add(t)}remove(e,t){e.classList.remove(t)}elementFocus(e){const t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()}clstElement(e,t){let i;return i=e&&this.popObj&&Wt(this.popObj.element)?this.popObj.element.querySelector("."+Gl):this.element===t||e?this.element.querySelector(".e-toolbar-item:not(.e-overlay ):not(.e-separator ):not(.e-hidden )"):Zt(t,"."+Gl),i}keyHandling(e,t,i,s,n){const o=this.popObj,r=this.element,l={name:"FadeOut",duration:100},a="moveUp"===t.action?"previous":"next";let h,c;switch(t.action){case"moveRight":if(this.isVertical)return;r===i?this.elementFocus(e):s||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;s||this.eleFocus(e,"previous");break;case"home":case"end":if(e){const i=Zt(e,".e-popup");i?Wt(this.popObj.element)&&(c=[].slice.call(i.children),h="home"===t.action?c[0]:c[c.length-1]):(c=this.element.querySelectorAll("."+Wl+" ."+Gl),h="home"===t.action?c[0]:c[c.length-1]),h&&this.elementFocus(h)}break;case"moveUp":case"moveDown":if(this.isVertical)this.eleFocus(e,"moveUp"===t.action?"previous":"next");else if(o&&Zt(i,".e-popup")){const t=o.element,i=t.firstElementChild;if("previous"===a&&i===e||"next"===a&&t.lastElementChild===e)return;this.eleFocus(e,a)}else"moveDown"===t.action&&o&&Wt(o.element)&&this.elementFocus(e);break;case"tab":if(!n&&!s){const t=e.firstElementChild;r===i&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(t),t.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":o&&"Extended"!==this.overflowMode&&o.hide(l);break;case"popupOpen":if(!s)return;o&&!Wt(o.element)?(o.element.style.top=r.offsetHeight+"px",o.show({name:"FadeIn",duration:100})):o.hide(l)}}keyActionHandler(e){const t=e.target;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||this.element.classList.contains($l))return;e.preventDefault();const i=t.classList.contains(ia),s=t.classList.contains("e-scroll-nav"),n=this.clstElement(i,t);(n||s)&&this.keyHandling(n,e,t,i,s)}disable(e){const t=this.element;e?t.classList.add($l):t.classList.remove($l),t.setAttribute("tabindex",e?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",e?"-1":"0"),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(Wt(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))}eleContains(e){return e.classList.contains(Ul)||e.classList.contains($l)||e.getAttribute("disabled")||e.classList.contains(ca)||!Wt(e)}eleFocus(e,t){const i=Object(e)[t+"ElementSibling"];if(i){if(this.eleContains(i))return void this.eleFocus(i,t);this.elementFocus(i)}else if(this.tbarAlign){let i=Object(e.parentElement)[t+"ElementSibling"];if(qe(i)||0!==i.children.length||(i=Object(i)[t+"ElementSibling"]),!qe(i)&&i.children.length>0)if("next"===t){const e=i.querySelector("."+Gl);this.eleContains(e)?this.eleFocus(e,t):(e.firstElementChild.focus(),this.activeEleSwitch(e))}else{const e=i.lastElementChild;this.eleContains(e)?this.eleFocus(e,t):this.elementFocus(e)}}}clickHandler(e){const t=e.target,i=this.element,s=!qe(Zt(t,".e-toolbar-pop"));let n,o=t.classList,r=Zt(t,".e-hor-nav");r||(r=t),i.children[0].classList.contains("e-hscroll")||i.children[0].classList.contains("e-vscroll")||!o.contains(ia)||(o=t.querySelector(".e-icons").classList),(o.contains(Kl)||o.contains(Yl))&&this.popupClickHandler(i,r,_l);const l=Zt(e.target,"."+Gl);if((qe(l)||l.classList.contains($l))&&!r.classList.contains(ia))return;l&&(n=this.items[this.tbarEle.indexOf(l)]);const a={originalEvent:e,item:n};n&&!qe(n.click)&&this.trigger("items["+this.tbarEle.indexOf(l)+"].click",a),a.cancel||this.trigger("clicked",a,e=>{!qe(this.popObj)&&s&&!e.cancel&&"Popup"===this.overflowMode&&e.item&&"Input"!==e.item.type&&this.popObj.hide({name:"FadeOut",duration:100})})}popupClickHandler(e,t,i){const s=this.popObj;Wt(s.element)?(t.classList.remove(la),s.hide({name:"FadeOut",duration:100})):(e.classList.contains(i)&&(s.enableRtl=!0,s.position={X:"left",Y:"top"}),0!==s.offsetX||e.classList.contains(i)||(s.enableRtl=!1,s.position={X:"right",Y:"top"}),s.dataBind(),s.refreshPosition(),s.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(s.element.style.minHeight="0px"),t.classList.add(la),s.show({name:"FadeIn",duration:100}))}render(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()}initialize(){const e=Ke(this.width),t=Ke(this.height);"msie"===zt.info.name&&"auto"===this.height&&"MultiRow"!==this.overflowMode||ei(this.element,{height:t}),ei(this.element,{width:e}),Xt(this.element,{role:"toolbar","aria-disabled":"false","aria-haspopup":"false","aria-orientation":this.isVertical?"vertical":"horizontal"}),this.cssClass&&Vt([this.element],this.cssClass.split(" "))}renderControl(){const e=this.element;this.trgtEle=e.children.length>0?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()}renderLayout(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()}itemsAlign(e,t){let i,s;this.tbarEle||(this.tbarEle=[]);for(let n=0;n<e.length;n++)i=this.renderSubComponent(e[n],n),-1===this.tbarEle.indexOf(i)&&this.tbarEle.push(i),this.tbarAlign||this.tbarItemAlign(e[n],t,n),s=t.querySelector(".e-toolbar-"+e[n].align.toLowerCase()),s?(e[n].showAlwaysInPopup&&"Show"!==e[n].overflow||this.tbarAlgEle[(e[n].align+"s").toLowerCase()].push(i),s.appendChild(i)):t.appendChild(i);this.isReact&&(this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates())}changeOrientation(){const e=this.element;this.isVertical?(e.classList.remove(jl),this.isVertical=!1,"auto"!==this.height&&"100%"!==this.height||(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add(jl),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),ei(this.element,{height:Ke(this.height),width:Ke(this.width)})),this.destroyMode(),this.refreshOverflow()}initScroll(e,t){!this.scrollModule&&this.checkOverflow(e,t[0])&&(this.tbarAlign&&this.element.querySelector("."+Wl+" ."+sa).removeAttribute("style"),this.scrollModule=this.isVertical?new Vl({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]):new Il({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]),this.remove(this.scrollModule.element,na),ei(this.element,{overflow:"hidden"}))}itemWidthCal(e){let t,i=0;return[].slice.call($t("."+Gl,e)).forEach(e=>{Wt(e)&&(t=window.getComputedStyle(e),i+=this.isVertical?e.offsetHeight:e.offsetWidth,i+=parseFloat(this.isVertical?t.marginTop:t.marginRight),i+=parseFloat(this.isVertical?t.marginBottom:t.marginLeft))}),i}getScrollCntEle(e){return e.querySelector(this.isVertical?".e-vscroll-content":".e-hscroll-content")}checkOverflow(e,t){if(qe(e)||qe(t)||!Wt(e))return!1;const i=this.isVertical?e.offsetHeight:e.offsetWidth;let s=this.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||i===s)&&(s=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));const n=e.querySelector(".e-hor-nav"),o=e.querySelector(".e-scroll-nav");let r=0;return n?r=this.isVertical?n.offsetHeight:n.offsetWidth:o&&(r=this.isVertical?2*o.offsetHeight:2*o.offsetWidth),s>i-r}refreshOverflow(){this.resize()}toolbarAlign(e){this.tbarAlign&&(this.add(e,na),this.itemPositioning())}renderOverflowMode(){const e=this.element,t=e.querySelector("."+Wl),i=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===zt.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":qe(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(Wl)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,t)||i)&&this.setOverflowAttributes(e),this.toolbarAlign(t);break;case"MultiRow":this.add(t,da),this.checkOverflow(e,t)&&this.tbarAlign&&(this.removePositioning(),this.add(t,pa)),"hidden"===e.style.overflow&&(e.style.overflow=""),"msie"!==zt.info.name&&"auto"===e.style.height||(e.style.height="auto");break;case"Extended":this.add(this.element,ga),(this.checkOverflow(e,t)||i)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(t)}}setOverflowAttributes(e){this.createPopupEle(e,[].slice.call($t("."+Wl+" ."+Gl,e))),this.element.querySelector(".e-hor-nav").setAttribute("tabIndex","0"),this.element.querySelector(".e-hor-nav").setAttribute("role","list")}separator(){const e=this.element,t=[].slice.call(e.querySelectorAll(".e-separator")),i=e.querySelector(".e-multirow-separator"),s=e.querySelector(".e-extended-separator"),n="MultiRow"===this.overflowMode?i:s;null!==n&&("MultiRow"===this.overflowMode?n.classList.remove(ua):"Extended"===this.overflowMode&&n.classList.remove(ma));for(let o=0;o<=t.length-1;o++)t[o].offsetLeft<30&&0!==t[o].offsetLeft&&("MultiRow"===this.overflowMode?t[o].classList.add(ua):"Extended"===this.overflowMode&&t[o].classList.add(ma))}createPopupEle(e,t){let i=e.querySelector(".e-hor-nav");const s=this.isVertical;i||this.createPopupIcon(e),i=e.querySelector(".e-hor-nav");const n=(s?e.offsetHeight:e.offsetWidth)-(s?i.offsetHeight:i.offsetWidth);this.element.classList.remove("e-rtl"),ei(this.element,{direction:"initial"}),this.checkPriority(e,t,n,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()}pushingPoppedEle(e,t,i,s,n){const o=e.element,r=[].slice.call($t("."+ra,o.querySelector("."+Wl)));let l=$t(".e-overflow-show",i),a=0,h=0;r.forEach((o,r)=>{l=$t(".e-overflow-show",i),o.classList.contains(ea)&&l.length>0?e.tbResize&&l.length>r?(i.insertBefore(o,l[r]),++h):(i.insertBefore(o,i.children[l.length]),++h):o.classList.contains(ea)||e.tbResize&&o.classList.contains(ta)&&i.children.length>0&&0===l.length?(i.insertBefore(o,i.firstChild),++h):o.classList.contains(ta)?t.push(o):e.tbResize?(i.insertBefore(o,i.childNodes[a+h]),++a):i.appendChild(o),o.classList.contains(Ul)?ei(o,{display:"",height:n+"px"}):ei(o,{display:"",height:s+"px"})}),t.forEach(e=>{i.appendChild(e)});const c=$t("."+Gl,o.querySelector("."+Wl));for(let d=c.length-1;d>=0;d--){const e=c[d];if(!e.classList.contains(Ul)||"Extended"===this.overflowMode)break;ei(e,{display:"none"})}}createPopup(){const e=this.element;let t,i;"Extended"===this.overflowMode&&(i=e.querySelector(".e-separator:not(."+ra+")"),t="auto"===e.style.height||""===e.style.height?null:i.offsetHeight);const s=e.querySelector(".e-toolbar-item:not(.e-separator):not(."+ra+")"),n="auto"===e.style.height||""===e.style.height?null:s&&s.offsetHeight;let o;if(Qt("#"+e.id+"_popup."+oa,e))o=Qt("#"+e.id+"_popup."+oa,e);else{const t=this.createElement("div",{id:e.id+"_popup",className:"e-toolbar-pop e-toolbar-extended"}),i=this.createElement("div",{id:e.id+"_popup",className:oa});o="Extended"===this.overflowMode?t:i}this.pushingPoppedEle(this,[],o,n,t),this.popupInit(e,o)}getElementOffsetY(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight}popupInit(e,t){if(this.popObj){const e=this.popObj.element;ei(e,{maxHeight:"",display:"block"}),ei(e,{maxHeight:e.offsetHeight+"px",display:""})}else{e.appendChild(t),ei(this.element,{overflow:""});const i=window.getComputedStyle(this.element),s=new Hn(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(s.appendTo(t),"Extended"===this.overflowMode&&(s.width=parseFloat(i.width)+2*parseFloat(i.borderRightWidth),s.offsetX=0),Bt.add(document,"scroll",this.docEvent.bind(this)),Bt.add(document,"click ",this.docEvent.bind(this)),s.element.style.maxHeight=s.element.offsetHeight+"px",this.isVertical&&(s.element.style.visibility="hidden"),this.isExtendedOpen){const e=this.element.querySelector(".e-hor-nav");e.classList.add(la),ti(e.firstElementChild,[Kl],[Yl]),this.element.querySelector(".e-toolbar-extended").classList.add(Xl)}else s.hide();this.popObj=s,this.element.setAttribute("aria-haspopup","true")}}tbarPopupHandler(e){"Extended"===this.overflowMode&&(e?this.add(this.element,fa):this.remove(this.element,fa))}popupOpen(e){const t=this.popObj;this.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());const i=this.popObj.element,s=this.popObj.element.parentElement,n=s.querySelector(".e-hor-nav");ei(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px","Extended"===this.overflowMode&&(t.element.style.minHeight="");const o=i.offsetTop+i.offsetHeight+en(s).top,r=n.firstElementChild;n.classList.add(la),ti(r,[Kl],[Yl]),this.tbarPopupHandler(!0);const l=qe(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+l<o&&this.element.offsetTop<i.offsetHeight){let e=i.offsetHeight-(o-window.innerHeight-l+5);t.height=e+"px";for(let t=0;t<=i.childElementCount;t++){const s=i.children[t];if(s.offsetTop+s.offsetHeight>e){e=s.offsetTop;break}}ei(t.element,{maxHeight:e+"px"})}else if(this.isVertical){const e=this.element.getBoundingClientRect();ei(t.element,{maxHeight:e.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(t){const e=i.getBoundingClientRect();e.right>document.documentElement.clientWidth&&e.width>s.getBoundingClientRect().width&&(t.collision={Y:"none"},t.dataBind()),t.refreshPosition()}}popupClose(e){const t=this.element.querySelector(".e-hor-nav"),i=t.firstElementChild;t.classList.remove(la),ti(i,[Yl],[Kl]),this.tbarPopupHandler(!1)}checkPriority(e,t,i,s){const n=this.popupPriCount>0,o=i;let r,l,a=0,h=0,c=0;const d=(e,t)=>{let i=!1;return t.forEach(t=>{e.classList.contains(t)&&(i=!0)}),i};for(let p=t.length-1;p>=0;p--){let e;const o=window.getComputedStyle(t[p]);this.isVertical?(e=parseFloat(o.marginTop),e+=parseFloat(o.marginBottom)):(e=parseFloat(o.marginRight),e+=parseFloat(o.marginLeft));const u=t[p]===this.tbarEle[0];u&&(this.tbarEleMrgn=e),r=this.isVertical?t[p].offsetHeight:t[p].offsetWidth;const m=u?r+e:r;if(d(t[p],[ha])&&n&&(t[p].classList.add(ra),ei(t[p],this.isVertical?{display:"none",minHeight:m+"px"}:{display:"none",minWidth:m+"px"}),c++),l=this.isVertical?t[p].offsetTop+t[p].offsetHeight+e>i:t[p].offsetLeft+t[p].offsetWidth+e>i,l){if(t[p].classList.contains(Ul)){if("Extended"===this.overflowMode)h===c&&d(t[p],[Ul,aa])&&(t[p].classList.add(ra),c++),h++;else if("Popup"===this.overflowMode){if(a>0&&h===c){const e=t[p+h+(a-1)];d(e,[Ul,aa])&&ei(e,{display:"none"})}a++,h=0,c=0}}else h++;t[p].classList.contains(ea)&&s||d(t[p],[Ul,aa])?i-=(this.isVertical?t[p].offsetHeight:t[p].offsetWidth)+e:(t[p].classList.add(ra),ei(t[p],this.isVertical?{display:"none",minHeight:m+"px"}:{display:"none",minWidth:m+"px"}),c++)}}if(s){const t=$t("."+Gl+":not(."+ra+")",this.element);this.checkPriority(e,t,o,!1)}}createPopupIcon(e){const t=e.id.concat("_nav");let i="e-"+e.id.concat("_nav e-hor-nav");i="Extended"===this.overflowMode?i+" e-expended-nav":i;const s=this.createElement("div",{id:t,className:i});"msie"!==zt.info.name&&"edge"!==zt.info.name||s.classList.add("e-ie-align");const n=this.createElement("div",{className:Yl+" e-icons"});s.appendChild(n),s.setAttribute("tabindex","0"),s.setAttribute("role","list"),e.appendChild(s)}tbarPriRef(e,t,i,s,n,o,r,l){const a=l,h=$t(".e-toolbar-popup:not(.e-overflow-show)",this.popObj.element).length,c=(e,t)=>e.classList.contains(t);if(0===$t(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){const l=e.children[t-(t-i)-1],h=!qe(l)&&c(l,aa);if(!qe(l)&&c(l,Ul)&&!Wt(l)||h){const h="none";l.style.display="inherit";const c=l.offsetWidth+2*parseFloat(window.getComputedStyle(l).marginRight),d=l.previousElementSibling;o+c<r||n?(e.insertBefore(s,e.children[t+a-(t-i)]),qe(d)||(d.style.display="")):d.classList.contains(Ul)&&(d.style.display=h),l.style.display=""}else e.insertBefore(s,e.children[t+a-(t-i)])}else e.insertBefore(s,e.children[t+a-h])}popupRefresh(e,t){const i=this.element,s=this.isVertical,n=i.querySelector("."+Wl);let o,r=i.querySelector(".e-hor-nav");if(qe(r))return;n.removeAttribute("style"),e.style.display="block",o=s?i.offsetHeight-(r.offsetHeight+n.offsetHeight):i.offsetWidth-(r.offsetWidth+n.offsetWidth);let l=0;[].slice.call(e.children).forEach(e=>{l+=this.popupEleWidth(e),ei(e,{position:""})}),o+(s?r.offsetHeight:r.offsetWidth)>l&&0===this.popupPriCount&&(t=!0),this.popupEleRefresh(o,e,t),e.style.display="",0===e.children.length&&r&&this.popObj&&(Kt(r),r=null,this.popObj.destroy(),Kt(this.popObj.element),this.popObj=null,i.setAttribute("aria-haspopup","false"))}ignoreEleFetch(e,t){const i=[].slice.call(t.querySelectorAll(".e-ignore")),s=[];let n=0;return i.length>0?(i.forEach(e=>{s.push([].slice.call(t.children).indexOf(e))}),s.forEach(t=>{t<=e&&n++}),n):0}checkPopupRefresh(e,t){t.style.display="block";const i=this.popupEleWidth(t.firstElementChild);t.firstElementChild.style.removeProperty("Position");const s=e.offsetWidth-e.querySelector(".e-hor-nav").offsetWidth,n=e.querySelector("."+Wl).offsetWidth;return t.style.removeProperty("display"),s>i+n}popupEleWidth(e){e.style.position="absolute";let t=this.isVertical?e.offsetHeight:e.offsetWidth;const i=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains(Zl)){const s=e.children[0];!qe(i)&&e.classList.contains(Zl)?i.style.display="none":!qe(i)&&e.classList.contains(Jl)&&(i.style.display="block"),s.style.minWidth="0%",t=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),s.style.minWidth="",s.style.minHeight="",qe(i)||(i.style.display="")}return t}popupEleRefresh(e,t,i){const s=this.popupPriCount>0;let n,o,r=this.tbarEle,l=this.element.querySelector("."+Wl),a=0;for(const h of[].slice.call(t.children)){if(h.classList.contains(ha)&&s&&!i)continue;let t=this.popupEleWidth(h);if(h===this.tbarEle[0]&&(t+=this.tbarEleMrgn),h.style.position="",!(t<e||i))break;{if(ei(h,{minWidth:"",height:"",minHeight:""}),h.classList.contains(ta)||h.classList.remove(ra),o=this.tbarEle.indexOf(h),this.tbarAlign){const e=this.items[o].align;o=this.tbarAlgEle[(e+"s").toLowerCase()].indexOf(h),r=this.tbarAlgEle[(e+"s").toLowerCase()],l=this.element.querySelector("."+Wl+" .e-toolbar-"+e.toLowerCase())}let s=0;"Extended"!==this.overflowMode&&r.slice(0,o).forEach(t=>{(t.classList.contains(ea)||t.classList.contains(Ul))&&(t.classList.contains(Ul)&&(t.style.display="",e-=t.offsetWidth),s++)}),a=this.ignoreEleFetch(o,l),h.classList.contains(ea)?(this.tbarPriRef(l,o,s,h,i,t,e,a),e-=h.offsetWidth):0===o?(l.insertBefore(h,l.firstChild),e-=h.offsetWidth):(n=$t(".e-overflow-show",this.popObj.element).length,l.insertBefore(h,l.children[o+a-n]),e-=h.offsetWidth),h.style.height=""}}this.checkOverflow(this.element,this.element.getElementsByClassName(Wl)[0])&&!i&&this.renderOverflowMode()}removePositioning(){const e=this.element.querySelector("."+Wl);if(qe(e)||!e.classList.contains(na))return;this.remove(e,na);const t=[].slice.call(e.childNodes);t[1].removeAttribute("style"),t[2].removeAttribute("style")}refreshPositioning(){const e=this.element.querySelector("."+Wl);this.add(e,na),this.itemPositioning()}itemPositioning(){const e=this.element.querySelector("."+Wl);let t;if(qe(e)||!e.classList.contains(na))return;const i=this.element.querySelector(".e-hor-nav");let s;s=[].slice.call(this.scrollModule?e.querySelector("."+(this.isVertical?"e-vscroll-content":"e-hscroll-content")).children:e.childNodes),t=this.isVertical?s[0].offsetHeight+s[2].offsetHeight:s[0].offsetWidth+s[2].offsetWidth;let n=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(i){n-=this.isVertical?i.offsetHeight:i.offsetWidth;const e=(this.isVertical?i.offsetHeight:i.offsetWidth)+"px";s[2].removeAttribute("style"),this.isVertical?this.enableRtl?s[2].style.top=e:s[2].style.bottom=e:this.enableRtl?s[2].style.left=e:s[2].style.right=e}if(n<=t)return;const o=(n-t-(this.isVertical?s[1].offsetHeight:s[1].offsetWidth))/2;s[1].removeAttribute("style");const r=(this.isVertical?s[0].offsetHeight:s[0].offsetWidth)+o+"px";this.isVertical?this.enableRtl?s[1].style.marginBottom=r:s[1].style.marginTop=r:this.enableRtl?s[1].style.marginRight=r:s[1].style.marginLeft=r}tbarItemAlign(e,t,i){if(e.showAlwaysInPopup&&"Show"!==e.overflow)return;const s=[];if(s.push(this.createElement("div",{className:"e-toolbar-left"})),s.push(this.createElement("div",{className:sa})),s.push(this.createElement("div",{className:"e-toolbar-right"})),0===i&&"Left"!==e.align)s.forEach(e=>{t.appendChild(e)}),this.tbarAlign=!0,this.add(t,na);else if("Left"!==e.align){const e=s[0];[].slice.call(t.childNodes).forEach(t=>{this.tbarAlgEle.lefts.push(t),e.appendChild(t)}),t.appendChild(e),t.appendChild(s[1]),t.appendChild(s[2]),this.tbarAlign=!0,this.add(t,na)}}ctrlTemplate(){this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,Wl),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(e=>{"DIV"===e.tagName&&(this.tbarEle.push(e),e.setAttribute("aria-disabled","false"),this.add(e,Gl))})}renderItems(){const e=this.element,t=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(e&&t.length>0){let i;e&&e.children.length>0&&(i=e.querySelector("."+Wl)),i||(i=this.createElement("div",{className:Wl})),this.itemsAlign(t,i),e.appendChild(i)}}setAttr(e,t){const i=Object.keys(e);let s;for(let n=0;n<i.length;n++)s=i[n],"class"===s?this.add(t,e[s]):t.setAttribute(s,e[s])}enableItems(e,t){const i=e,s=i.length;let n;qe(t)&&(t=!0);const o=(e,t)=>{e?(t.classList.remove($l),t.setAttribute("aria-disabled","false")):(t.classList.add($l),t.setAttribute("aria-disabled","true"))};if(!qe(s)&&s>=1){for(let e=0,r=[].slice.call(i);e<s;e++){const s=r[e];if("number"==typeof s){if(n=this.getElementByIndex(s),qe(n))return;i[e]=n}else n=s;o(t,n)}t?qt(i,$l):Vt(i,$l)}else{if("number"==typeof i){if(n=this.getElementByIndex(i),qe(n))return}else n=e;o(t,n)}}getElementByIndex(e){return this.tbarEle[e]?this.tbarEle[e]:null}addItems(e,t){let i;this.extendedOpen();const s=this.element.querySelector("."+Wl);if(qe(s))return void this.itemsRerender(e);let n,o="Left";qe(t)&&(t=0),e.forEach(e=>{qe(e.align)||"Left"===e.align||"Left"!==o||(o=e.align)});for(const r of e)if(qe(r.type)&&(r.type="Button"),i=$t("."+Gl,this.element),r.align=o,n=this.renderSubComponent(r,t),this.tbarEle.length>=t&&i.length>=0){qe(this.scrollModule)&&this.destroyMode();const e="L"===r.align[0]?0:"C"===r.align[0]?1:2;let l;this.tbarAlign||"Left"===o?this.tbarAlign?(l=Zt(i[0],"."+Wl).children[e],l.insertBefore(n,l.children[t]),this.tbarAlgEle[(r.align+"s").toLowerCase()].splice(t,0,n),this.refreshPositioning()):0===i.length?(i=$t("."+Wl,this.element),i[0].appendChild(n)):i[0].parentNode.insertBefore(n,i[t]):(this.tbarItemAlign(r,s,1),this.tbarAlign=!0,l=Zt(i[0],"."+Wl).children[e],l.appendChild(n),this.tbarAlgEle[(r.align+"s").toLowerCase()].push(n),this.refreshPositioning()),this.items.splice(t,0,r),this.tbarEle.splice(t,0,n),t++,this.offsetWid=s.offsetWidth}s.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}removeItems(e){const t=e;let i,s=[].slice.call($t("."+Gl,this.element));if("number"==typeof t)i=parseInt(e.toString(),10),this.removeItemByIndex(i,s);else if(t&&t.length>1)for(const n of[].slice.call(t))i=this.tbarEle.indexOf(n),this.removeItemByIndex(i,s),s=$t("."+Gl,this.element);else i=s.indexOf(t&&t.length&&1===t.length?t[0]:e),this.removeItemByIndex(i,s);this.resize()}removeItemByIndex(e,t){if(this.tbarEle[e]&&t[e]){const i=this.tbarEle.indexOf(t[e]);if(this.tbarAlign){const e=this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].indexOf(this.tbarEle[i]);this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].splice(e,1)}this.isReact&&this.clearTemplate();const s=t[e].querySelector(".e-control.e-btn");qe(s)||qe(s.ej2_instances[0])||s.ej2_instances[0].isDestroyed||s.ej2_instances[0].destroy(),Kt(t[e]),this.items.splice(i,1),this.tbarEle.splice(i,1)}}templateRender(e,t,i,s){const n=e;let o;if("object"==typeof e&&(o="function"==typeof n.appendTo),"string"!=typeof e&&o){if("Input"===i.type){const e=this.createElement("input");e.id=i.id?i.id:We("tbr-ipt"),t.appendChild(e),n.appendTo(e)}}else{let i,n,o=e;o="string"==typeof e?e.trim():e;try{if("object"!=typeof e||qe(e.tagName)){if(document.querySelectorAll(o).length){const e=document.querySelector(o),i=e.outerHTML.trim();t.appendChild(e),e.style.display="",qe(i)||this.tempId.push(o)}}else t.appendChild(e)}catch(r){i=Ds(o)}qe(i)||(n=i({},this,"template",this.element.id+s+"_template",this.isStringTemplate)),!qe(n)&&n.length>0&&[].slice.call(n).forEach(e=>{qe(e.tagName)||(e.style.display=""),t.appendChild(e)})}this.add(t,Ql),this.tbarEle.push(t)}buttonRendering(e,t){const i=this.createElement("button",{className:"e-tbar-btn"});i.setAttribute("type","button");const s=e.text;let n,o;i.id=e.id?e.id:We("e-tbr-btn");const r=this.createElement("span",{className:"e-tbar-btn-text"});s?(r.innerHTML=this.enableHtmlSanitizer?As.sanitize(s):s,i.appendChild(r),i.classList.add("e-tbtn-txt")):this.add(t,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(n=e.prefixIcon+" e-icons",o="Left"):(n=e.suffixIcon+" e-icons",o="Right"));const l=new _s.a({iconCss:n,iconPosition:o});return l.createElement=this.createElement,l.appendTo(i),e.width&&ei(i,{width:Ke(e.width)}),i}renderSubComponent(e,t){let i;const s=this.createElement("div",{className:Gl});s.setAttribute("aria-disabled","false");const n=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?As.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,s),e.tooltipText&&s.setAttribute("title",n.textContent),e.cssClass&&(s.className=s.className+" "+e.cssClass),e.template)this.templateRender(e.template,s,e,t);else switch(e.type){case"Button":i=this.buttonRendering(e,s),i.setAttribute("tabindex","-1"),i.setAttribute("aria-label",e.text||e.tooltipText),s.appendChild(i),s.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(s,Ul)}if(e.showTextOn){const t=e.showTextOn;"Toolbar"===t?(this.add(s,Jl),this.add(s,"e-tbtn-align")):"Overflow"===t&&this.add(s,Zl)}if(e.overflow){const t=e.overflow;"Show"===t?this.add(s,ea):"Hide"===t&&(s.classList.contains(Ul)||this.add(s,ta))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!s.classList.contains(Ul)&&(this.add(s,ha),this.popupPriCount++),e.disabled&&this.add(s,$l),!1===e.visible&&this.add(s,ca),s}itemClick(e){this.activeEleSwitch(e.currentTarget)}activeEleSwitch(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()}activeEleRemove(e){qe(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=e,qe(this.trgtEle)&&!e.parentElement.classList.contains(Ql)?e.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")}getPersistData(){return this.addOnPersist([])}getModuleName(){return"toolbar"}itemsRerender(e){this.items=this.tbarItemsCol,this.isReact&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}resize(){const e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();const t=this.checkOverflow(e,e.getElementsByClassName(Wl)[0]);if(!t){this.destroyScroll();const t=e.querySelector("."+Wl);qe(t)||(this.remove(t,pa),this.tbarAlign&&this.add(t,na))}if(!t||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||t)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){const e=window.getComputedStyle(this.element);this.popObj.width=parseFloat(e.width)+2*parseFloat(e.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector(".e-hscroll-bar")&&(this.scrollStep=this.element.querySelector(".e-hscroll-bar").offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}}extendedOpen(){const e=this.element.querySelector(".e-toolbar-extended");"Extended"===this.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains(Xl))}onPropertyChanged(e,t){const i=this.element,s=i.offsetWidth;this.extendedOpen();for(const n of Object.keys(e))switch(n){case"items":if(e.items instanceof Array&&t.items instanceof Array)this.itemsRerender(e.items);else{const t=Object.keys(e.items);for(let s=0;s<t.length;s++){const t=parseInt(Object.keys(e.items)[s],10),n=Object.keys(e.items[t])[0],o=Object(e.items[t])[n];if("function"!=typeof o){if(this.tbarAlign||"align"===n){this.refresh(),this.trigger("created");break}const e="overflow"===n&&0!==this.popupPriCount;("showAlwaysInPopup"===n&&!o||this.items[t].showAlwaysInPopup&&e)&&--this.popupPriCount,qe(this.scrollModule)&&this.destroyMode();const s=[].slice.call($t("."+Wl+" ."+Gl,i));this.isReact&&this.clearTemplate(),Kt(s[t]),this.tbarEle.splice(t,1),this.addItems([this.items[t]],t),this.items.splice(t,1),this.items[t].template&&this.tbarEle.splice(this.items.length,1)}}}break;case"width":ei(i,{width:Ke(e.width)}),this.renderOverflowMode(),this.popObj&&s<i.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":ei(this.element,{height:Ke(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(i,_l),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(i,_l):this.remove(i,_l),qe(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,_l):this.remove(this.scrollModule.element,_l)),qe(this.popObj)||(e.enableRtl?this.add(this.popObj.element,_l):this.remove(this.popObj.element,_l)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":t.cssClass&&qt([this.element],t.cssClass.split(" ")),e.cssClass&&Vt([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent()}}hideItem(e,t){const i="object"==typeof e;let s,n,o=e;const r=[].slice.call($t("."+Gl,this.element));if(i?n=e:this.tbarEle[o]&&(n=[].slice.call($t("."+Gl,this.element))[o]),n){if(t?n.classList.add(ca):n.classList.remove(ca),t&&qe(this.element.getAttribute("tabindex"))&&!n.classList.contains(Ul)){if(qe(n.firstElementChild.getAttribute("tabindex"))){n.firstElementChild.setAttribute("tabindex","-1");const e=[].slice.call($t("."+Gl,this.element));i&&(o=e.indexOf(n));let t=e[++o];for(;t;){if(!this.eleContains(t)){t.firstElementChild.removeAttribute("tabindex");break}t=e[++o]}}}else if(qe(this.element.getAttribute("tabindex"))&&!n.classList.contains(Ul)){s=0;let e=!1,t=!1,i=r[s];for(;i;)if(i.classList.contains(Ul))i=r[++s];else if(qe(i.firstElementChild.getAttribute("tabindex")))i.firstElementChild.setAttribute("tabindex","-1"),e=!0;else{if(e&&t)break;this.eleContains(i)||(i.firstElementChild.removeAttribute("tabindex"),t=!0),i=r[++s]}}this.refreshOverflow()}}};return ql([bi([],ba)],e.prototype,"items",void 0),ql([gi("auto")],e.prototype,"width",void 0),ql([gi("auto")],e.prototype,"height",void 0),ql([gi("")],e.prototype,"cssClass",void 0),ql([gi("Scrollable")],e.prototype,"overflowMode",void 0),ql([gi()],e.prototype,"scrollStep",void 0),ql([gi(!0)],e.prototype,"enableCollision",void 0),ql([gi(!0)],e.prototype,"enableHtmlSanitizer",void 0),ql([gi(!0)],e.prototype,"allowKeyboard",void 0),ql([yi()],e.prototype,"clicked",void 0),ql([yi()],e.prototype,"created",void 0),ql([yi()],e.prototype,"destroyed",void 0),ql([yi()],e.prototype,"beforeCreate",void 0),e=ql([vi],e),e})(),va="",Ca="",wa=[],Sa="";var Ea=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let xa=(()=>{class e extends Ai{}return Ea([gi()],e.prototype,"text",void 0),Ea([gi()],e.prototype,"value",void 0),Ea([gi()],e.prototype,"iconCss",void 0),Ea([gi()],e.prototype,"groupBy",void 0),Ea([gi()],e.prototype,"htmlAttributes",void 0),e})();const Ra="e-dropdownbase",Da="e-rtl",Ta="e-active",Ma="e-hover",Ia="e-nodata",ka="e-item-focus",Fa="e-list-item",Aa="e-list-group-item";let Oa=(()=>{let e=class extends Bi{constructor(e,t){super(e,t),this.preventChange=!1,this.isAngular=!1,this.isPreventChange=!1,this.isDynamicDataChange=!1}getPropObject(e,t,i){const s=new Object,n=new Object;s[e]=t[e],n[e]=i[e];const o=new Object;return o.newProperty=s,o.oldProperty=n,o}getValueByText(e,t,i){let s=null;return qe(this.listData)||(s=this.checkValueCase(e,!!t,i)),s}checkValueCase(e,t,i,s){let n=null;s&&(n=e);const o=this.listData,r=this.fields,l=this.typeOfData(o).typeof;if("string"===l||"number"===l||"boolean"===l)for(const a of o)qe(a)||(i?n=this.checkingAccent(String(a),e,t):t?this.checkIgnoreCase(String(a),e)&&(n=this.getItemValue(String(a),e,t)):this.checkNonIgnoreCase(String(a),e)&&(n=this.getItemValue(String(a),e,t,s)));else if(t)o.filter(t=>{!qe(Pe(r.value,t))&&this.checkIgnoreCase(Pe(r.text,t).toString(),e)&&(n=Pe(r.value,t))});else if(s){let e=null;e=n,o.filter(t=>{const i=Pe(r.value,t);qe(i)||qe(n)||i.toString()!==e.toString()||(n=Pe(r.text,t))})}else o.filter(t=>{this.checkNonIgnoreCase(Pe(r.text,t),e)&&(n=Pe(r.value,t))});return n}checkingAccent(e,t,i){const s=Gs.b.ignoreDiacritics(String(e)),n=Gs.b.ignoreDiacritics(t.toString());let o=null;return i?this.checkIgnoreCase(s,n)&&(o=this.getItemValue(String(e),t,i)):this.checkNonIgnoreCase(String(e),t)&&(o=this.getItemValue(String(e),t,i)),o}checkIgnoreCase(e,t){return String(e).toLowerCase()===t.toString().toLowerCase()}checkNonIgnoreCase(e,t){return String(e)===t.toString()}getItemValue(e,t,i,s){let n=null;const o=this.typeOfData(this.listData).typeof;return n=s?e.toString():i?"string"===o?String(e):this.getFormattedValue(String(e)):"string"===o?t:this.getFormattedValue(t),n}templateCompiler(e){let t=!1;if(e)try{t=!!$t(e,document).length}catch(i){t=!1}return t}l10nUpdate(e){const t="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){const i=e?this.actionFailureTemplate:this.noRecordsTemplate;let s;const n=e?this.actionFailureTemplateId:this.noRecordsTemplateId;t.innerHTML="",s=Ds(this.templateCompiler(i)?Qt(i,document).innerHTML.trim():i);const o=s({},this,e?"actionFailureTemplate":"noRecordsTemplate",n,this.isStringTemplate,null,t);if(o&&o.length>0)for(let e=0;e<o.length;e++)t.appendChild(o[e]);this.renderReactTemplates()}else{const i={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},s=new Qi(this.getLocaleName(),{},this.locale);this.l10n=""!==s.getConstant("actionFailureTemplate")?s:new Qi("listbox"===this.getModuleName()?"listbox":"dropdowns",i,this.locale);const n=this.l10n.getConstant(e?"actionFailureTemplate":"noRecordsTemplate");if("listbox"===this.getModuleName()){const e=this.createElement("li");e.textContent=n,t.appendChild(e),e.classList.add("e-list-nrt")}else t.innerHTML=n}}getLocaleName(){return"drop-down-base"}getTextByValue(e){return this.checkValueCase(e,!1,!1,!0)}getFormattedValue(e){if(this.listData&&this.listData.length){const t=this.typeOfData(this.listData);if("number"==typeof Pe(this.fields.value?this.fields.value:"value",t.item)||"number"===t.typeof)return parseFloat(e);if("boolean"==typeof Pe(this.fields.value?this.fields.value:"value",t.item)||"boolean"===t.typeof)return"true"===e||""+e=="true"}return e}setEnableRtl(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?Vt(this.enableRtlElements,Da):qt(this.enableRtlElements,Da)}initialize(){if(this.bindEvent=!0,this.actionFailureTemplateId=`${this.element.id}ActionFailureTemplate`,"UL"===this.element.tagName){const e=yl.a.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(e,this.fields)}else"SELECT"===this.element.tagName?(this.dataSource instanceof Array?this.dataSource.length>0:!qe(this.dataSource))?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect():this.setListData(this.dataSource,this.fields,this.query)}getPersistData(){return this.addOnPersist([])}setEnabled(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")}updateDataAttribute(e){const t=["class","style","id","type"],i={};for(let s=0;s<this.element.attributes.length;s++)-1!==t.indexOf(this.element.attributes[s].name)||"dropdownlist"===this.getModuleName()&&"readonly"===this.element.attributes[s].name||(i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));Ve(i,e,i),this.setProperties({htmlAttributes:i},!0)}renderItemsBySelect(){const e=this.element,t={value:"value",text:"text"},i=[],s=e.querySelectorAll("select>optgroup"),n=e.querySelectorAll("select>option");if(this.getJSONfromOption(i,n,t),s.length){for(let e=0;e<s.length;e++){const n=s[e],o={};o[t.text]=n.label,o.isHeader=!0;const r=n.querySelectorAll("option");i.push(o),this.getJSONfromOption(i,r,t)}e.querySelectorAll("select>option")}this.updateFields(t.text,t.value,this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss),this.resetList(i,t)}updateFields(e,t,i,s,n){const o={fields:{text:e,value:t,groupBy:qe(i)?this.fields&&this.fields.groupBy:i,htmlAttributes:qe(s)?this.fields&&this.fields.htmlAttributes:s,iconCss:qe(n)?this.fields&&this.fields.iconCss:n}};this.setProperties(o,!0)}getJSONfromOption(e,t,i){for(const s of t){const t={};t[i.text]=s.innerText,t[i.value]=qe(s.getAttribute(i.value))?s.innerText:s.getAttribute(i.value),e.push(t)}}preRender(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=`${this.element.id}ItemTemplate`,this.valueTemplateId=`${this.element.id}ValueTemplate`,this.groupTemplateId=`${this.element.id}GroupTemplate`,this.headerTemplateId=`${this.element.id}HeaderTemplate`,this.footerTemplateId=`${this.element.id}FooterTemplate`,this.noRecordsTemplateId=`${this.element.id}NoRecordsTemplate`}setListData(e,t,i){let s;t=t||this.fields,this.isActive=!0;const n={cancel:!1,data:e,query:i};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionBegin",n,i=>{if(!i.cancel)if(this.showSpinner(),e instanceof Gs.a){if(this.isRequested=!0,this.isDataFetched)return void this.emptyDataRequest(t);i.data.executeQuery(this.getQuery(i.query)).then(e=>{this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionComplete",e,e=>{if(!e.cancel){const i=e.result;0===i.length&&(this.isDataFetched=!0),s=this.renderItems(i,t),this.onActionComplete(s,i,e),this.groupTemplate&&this.renderGroupTemplate(s),this.isRequested=!1,this.bindChildItems(i,s,t,e)}})}).catch(e=>{this.isRequested=!1,this.onActionFailure(e),this.hideSpinner()})}else{const e=new Gs.a(i.data),n={cancel:!1,result:this.getQuery(i.query).executeLocal(e)};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionComplete",n,e=>{e.cancel||(s=this.renderItems(e.result,t),this.onActionComplete(s,e.result),this.groupTemplate&&this.renderGroupTemplate(s),this.bindChildItems(e.result,s,t))})}})}bindChildItems(e,t,i,s){e.length>=100&&"autocomplete"===this.getModuleName()?setTimeout(()=>{_t(this.remainingItems(this.sortedData,i),t),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.updateListValues(),this.raiseDataBound(e,s)},0):this.raiseDataBound(e,s)}updateListValues(){}findListElement(e,t,i,s){let n=null;if(e){const o=[].slice.call(e.querySelectorAll(t));for(let e=0;e<o.length;e++)if(o[e].getAttribute(i)===s+""){n=o[e];break}}return n}raiseDataBound(e,t){this.hideSpinner(),this.trigger("dataBound",{items:e,e:t})}remainingItems(e,t){const i=new Gs.a(e).executeLocal((new Gs.e).skip(100));if(this.itemTemplate){const e=this.templateListItem(i,t);return[].slice.call(e.childNodes)}const s=this.typeOfData(i).typeof;return"string"===s||"number"===s||"boolean"===s?yl.a.createListItemFromArray(this.createElement,i,!0,this.listOption(i,t),this):yl.a.createListItemFromJson(this.createElement,i,this.listOption(i,t),1,!0,this)}emptyDataRequest(e){const t=[];this.onActionComplete(this.renderItems(t,e),t),this.isRequested=!1,this.hideSpinner()}showSpinner(){}hideSpinner(){}onActionFailure(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),Vt([this.list],Ia)}onActionComplete(e,t,i){this.listData=t,this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.list.innerHTML="",this.fixedHeaderElement=qe(this.fixedHeaderElement)?this.fixedHeaderElement:null,this.list.appendChild(e),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,t,this.bindEvent)}postRender(e,t,i){const s=e.querySelector(".e-list-item"),n=e.querySelector(".e-active");s&&!n&&s.classList.add(ka),t.length<=0?(this.l10nUpdate(),Vt([e],Ia)):e.classList.remove(Ia)}getQuery(e){return e||(this.query?this.query:new Gs.e)}renderGroupTemplate(e){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector(".e-list-group-item")){const t=this.dataSource,i={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},s=e.querySelectorAll(".e-list-group-item");if(this.templateCompiler(this.groupTemplate)){const e=Qt(this.groupTemplate,document).innerHTML.trim();yl.a.renderGroupTemplate(e,t,this.fields.properties,s,i,this)}else yl.a.renderGroupTemplate(this.groupTemplate,t,this.fields.properties,s,i,this);this.renderReactTemplates()}}createListItems(e,t){e&&t.groupBy||this.element.querySelector("optgroup")?(t.groupBy&&("None"!==this.sortOrder&&(e=this.getSortedDataSource(e)),e=yl.a.groupDataSource(e,t.properties,this.sortOrder)),Vt([this.list],"e-dd-group")):e=this.getSortedDataSource(e);const i=this.listOption(e,t),s=e.length>100?new Gs.a(e).executeLocal((new Gs.e).take(100)):e;return this.sortedData=e,yl.a.createList(this.createElement,"autocomplete"===this.getModuleName()?s:e,i,!0,this)}listOption(e,t){const i=!qe(t.iconCss),s=qe(t.properties)?t:t.properties;return Ve({},null!==t.text||null!==t.value?{fields:s,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},t,!0)}setFloatingHeader(e){qe(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(Aa)||(this.fixedHeaderElement.style.display="none"),Gt([this.fixedHeaderElement],this.list),this.setFixedHeader()),qe(this.fixedHeaderElement)||"0"!==this.fixedHeaderElement.style.zIndex||this.setFixedHeader(),this.scrollStop(e)}scrollStop(e){let t=qe(e)?this.list:e.target,i=parseInt(getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),10);const s=Math.round(t.scrollTop/i),n=this.list.querySelectorAll("li:not(.e-hide-listitem)");for(let o=s;o>-1;o--){if(!qe(n[o])&&n[o].classList.contains(Aa)){this.fixedHeaderElement.innerHTML=n[o].innerHTML,this.fixedHeaderElement.style.top=t.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}}getValidLi(){return this.liCollections[0]}renderItems(e,t){let i;if(this.itemTemplate&&e){let s=e;s&&t.groupBy?("None"!==this.sortOrder&&(s=this.getSortedDataSource(s)),s=yl.a.groupDataSource(s,t.properties,this.sortOrder)):s=this.getSortedDataSource(s),this.sortedData=s;const n=s.length>100?new Gs.a(s).executeLocal((new Gs.e).take(100)):s;i=this.templateListItem("autocomplete"===this.getModuleName()?n:s,t)}else i=this.createListItems(e,t);return i}templateListItem(e,t){const i=this.listOption(e,t);if(i.templateID=this.itemTemplateId,i.isStringTemplate=this.isStringTemplate,this.templateCompiler(this.itemTemplate)){const s=Qt(this.itemTemplate,document).innerHTML.trim();return yl.a.renderContentTemplate(this.createElement,s,e,t.properties,i,this)}return yl.a.renderContentTemplate(this.createElement,this.itemTemplate,e,t.properties,i,this)}typeOfData(e){for(let t=0;!qe(e)&&t<e.length;t++)if(!qe(e[t])&&!qe("string"==typeof e[t]||"number"==typeof e[t]||"boolean"==typeof e[t]?e[t]:Pe(this.fields.value?this.fields.value:"value",e[t])))return{typeof:typeof e[t],item:e[t]};return{typeof:null,item:null}}setFixedHeader(){this.list.parentElement.style.display="block";let e=0;this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(e))&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10));const t=this.getValidLi().offsetWidth-e;this.fixedHeaderElement.style.width=t.toString()+"px",ei(this.fixedHeaderElement,{zIndex:10});const i=this.ulElement.querySelector(".e-list-group-item:not(.e-hide-listitem)");this.fixedHeaderElement.innerHTML=i.innerHTML}getSortedDataSource(e){if(e&&"None"!==this.sortOrder){let t=this.fields.text?this.fields.text:"text";"string"!==this.typeOfData(e).typeof&&"number"!==this.typeOfData(e).typeof&&"boolean"!==this.typeOfData(e).typeof||(t=""),e=yl.a.getDataSource(e,yl.a.addSorting(this.sortOrder,t))}return e}getIndexByValue(e){let t;const i=this.getItems();for(let s=0;s<i.length;s++)if(!qe(e)&&i[s].getAttribute("data-value")===e.toString()){t=s;break}return t}dispatchEvent(e,t){const i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)}setFields(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):this.fields.value||this.fields.text||this.updateFields("text","text")}resetList(e,t,i){this.list&&(("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)&&!(e instanceof Array?e.length>0:!qe(e))&&this.selectData&&this.selectData.length>0&&(e=this.selectData),this.setListData(e,t,i))}updateSelectElementData(e){e&&qe(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)}updateSelection(){}renderList(){this.render()}updateDataSource(e){this.resetList(this.dataSource)}setUpdateInitial(e,t){this.isDataFetched=!1;const i={};for(let s=0;e.length>s;s++)t[e[s]]&&"fields"===e[s]?(this.setFields(),i[e[s]]=t[e[s]]):t[e[s]]&&(i[e[s]]=t[e[s]]);Object.keys(i).length>0&&(-1===Object.keys(i).indexOf("dataSource")&&(i.dataSource=this.dataSource),this.updateDataSource(i))}onPropertyChanged(e,t){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e),this.setUpdateInitial(["sortOrder","itemTemplate"],e);for(const i of Object.keys(e))switch(i){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){const e=this.ulElement.querySelector(".e-list-group-item");this.fixedHeaderElement.innerHTML=e.innerHTML}break;case"locale":this.list&&!qe(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex()}}render(e){this.list=this.createElement("div",{className:"e-content",attrs:{tabindex:"0"}}),this.list.classList.add(Ra),this.setFields(),this.rippleFun=Ri(this.list,{duration:300,selector:".e-list-item"});const t=this.element.querySelector("select>optgroup");if(!this.fields.groupBy&&qe(t)||this.isGroupChecking||Bt.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),qt([this.element],Ra),this.element.style.display="none";const e=this.createElement("div");this.element.parentElement.insertBefore(e,this.element),e.appendChild(this.element),e.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),e||this.initialize()}getModuleName(){return"dropdownbase"}getItems(){return this.ulElement.querySelectorAll(".e-list-item")}addItem(e,t){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&qe(t)){let i=[].slice.call(this.listData);i.push(e),i=this.getSortedDataSource(i),this.fields.groupBy?(i=yl.a.groupDataSource(i,this.fields.properties,this.sortOrder),t=i.indexOf(e)):t=i.indexOf(e)}const i=this.getItems().length,s=this.list.querySelector(".e-active");let n;e=e instanceof Array?e:[e],n=qe(t)||t<0||t>i-1?i:t;const o=this.fields;e&&o.groupBy&&(e=yl.a.groupDataSource(e,o.properties));const r=[];for(let l=0;l<e.length;l++){const i=e[l],s=i.isHeader,a=this.createElement("li",{className:s?Aa:Fa,id:"option-add-"+l}),h=i instanceof Object?Pe(o.text,i):i;if(s&&(a.innerText=h),this.itemTemplate&&!s){const e=Ds(this.itemTemplate)(i,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,a);e&&_t(e,a)}else s||a.appendChild(document.createTextNode(h));a.setAttribute("data-value",i instanceof Object?Pe(o.value,i):i),a.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:a}),r.push(a),this.listData.push(i),"None"===this.sortOrder&&qe(t)&&0===n&&(n=null),this.updateActionCompleteData(a,i,n),this.trigger("beforeItemRender",{element:a,item:i})}if(0===i&&qe(this.list.querySelector("ul")))this.list.innerHTML="",this.list.classList.remove(Ia),this.list.appendChild(this.ulElement),this.liCollections=r,_t(r,this.ulElement),this.updateAddItemList(this.list,i);else{"listbox"===this.getModuleName()&&0===i&&(this.ulElement.innerHTML="");const s=[];for(let i=0;i<e.length;i++){const e=this.ulElement.querySelectorAll(".e-list-group-item");for(let t=0;t<e.length;t++)s[t]=e[t].innerText;if(s.indexOf(r[i].innerText)>-1&&o.groupBy){for(let n=0;n<e.length;n++)if(s[n]===r[i].innerText){this.ulElement.insertBefore(r[i+1],"None"===this.sortOrder?e[n+1]:this.ulElement.childNodes[t]),i+=1;break}}else this.liCollections[n]?this.liCollections[n].parentNode.insertBefore(r[i],this.liCollections[n]):this.ulElement.appendChild(r[i]);const l=[].slice.call(this.liCollections);l.splice(n,0,r[i]),this.liCollections=l,n+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}(s||0===t)&&this.updateSelection()}validationAttribute(e,t){const i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");const s=["required","aria-required","form"];for(let n=0;n<s.length;n++){if(!e.getAttribute(s[n]))continue;const i=e.getAttribute(s[n]);t.setAttribute(s[n],i),e.removeAttribute(s[n])}}setZIndex(){}updateActionCompleteData(e,t,i){}updateAddItemList(e,t){}updateDataList(){}getDataByValue(e){if(!qe(this.listData)){const t=this.typeOfData(this.listData).typeof;if("string"===t||"number"===t||"boolean"===t){for(const i of this.listData)if(!qe(i)&&i===e)return i}else for(const i of this.listData)if(!qe(i)&&Pe(this.fields.value?this.fields.value:"value",i)===e)return i}return null}destroy(){document.body.contains(this.list)&&(Bt.remove(this.list,"scroll",this.setFloatingHeader),qe(this.rippleFun)||this.rippleFun(),Kt(this.list)),super.destroy()}};return Ea([fi({text:null,value:null,iconCss:null,groupBy:null},xa)],e.prototype,"fields",void 0),Ea([gi(!1)],e.prototype,"enablePersistence",void 0),Ea([gi(null)],e.prototype,"itemTemplate",void 0),Ea([gi(null)],e.prototype,"groupTemplate",void 0),Ea([gi("No records found")],e.prototype,"noRecordsTemplate",void 0),Ea([gi("Request failed")],e.prototype,"actionFailureTemplate",void 0),Ea([gi("None")],e.prototype,"sortOrder",void 0),Ea([gi(!0)],e.prototype,"enabled",void 0),Ea([gi([])],e.prototype,"dataSource",void 0),Ea([gi(null)],e.prototype,"query",void 0),Ea([gi("StartsWith")],e.prototype,"filterType",void 0),Ea([gi(!0)],e.prototype,"ignoreCase",void 0),Ea([gi(1e3)],e.prototype,"zIndex",void 0),Ea([gi(!1)],e.prototype,"ignoreAccent",void 0),Ea([gi()],e.prototype,"locale",void 0),Ea([yi()],e.prototype,"actionBegin",void 0),Ea([yi()],e.prototype,"actionComplete",void 0),Ea([yi()],e.prototype,"actionFailure",void 0),Ea([yi()],e.prototype,"select",void 0),Ea([yi()],e.prototype,"dataBound",void 0),Ea([yi()],e.prototype,"created",void 0),Ea([yi()],e.prototype,"destroyed",void 0),e=Ea([vi],e),e})();var La=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const Pa={root:"e-dropdownlist",hover:Ma,selected:Ta,rtl:Da,li:Fa,disable:"e-disabled",base:Ra,focus:ka,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},za={container:null,buttons:[]};let Ba=(()=>{let e=class extends Oa{constructor(e,t){super(e,t),this.isListSearched=!1,this.preventChange=!1,this.isAngular=!1}preRender(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),super.preRender(),this.activeIndex=this.index,this.queryString=""}initializeData(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}}setZIndex(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})}renderList(e){super.render(e),this.unWireListEvents(),this.wireListEvents()}floatLabelChange(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){const e=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?ti(e,["e-label-top"],["e-label-bottom"]):ti(e,["e-label-bottom"],["e-label-top"])}}resetHandler(e){e.preventDefault(),this.clearAll(e)}resetFocusElement(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!qe(this.ulElement)){const e=this.ulElement.querySelector("."+Pa.li);e&&e.classList.add(Pa.focus)}}clearAll(e,t){!qe(t)&&(qe(t)||!qe(t.dataSource)&&(t.dataSource instanceof Gs.a||0!==t.dataSource.length))||(this.isActive=!0,this.resetSelection(t));const i=this.getItemData();this.previousValue!==i.value&&this.onChangeEvent(e)}resetSelection(e){this.list&&(qe(e)||!qe(e.dataSource)&&(e.dataSource instanceof Gs.a||0!==e.dataSource.length)?(!this.allowFiltering||"autocomplete"===this.getModuleName()||qe(this.actionCompleteData.ulElement)||qe(this.actionCompleteData.list)||this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()):(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource))),this.hiddenElement.innerHTML="",this.inputElement.value="",this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(Kt(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()}setHTMLAttributes(){if(Object.keys(this.htmlAttributes).length)for(const e of Object.keys(this.htmlAttributes))if("class"===e){const t=this.htmlAttributes[e].replace(/\s+/g," ").trim();""!==t&&Vt([this.inputWrapper.container],t.split(" "))}else if("disabled"===e&&"disabled"===this.htmlAttributes[e])this.enabled=!1,this.setEnable();else if("readonly"!==e||qe(this.htmlAttributes[e]))if("style"===e)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[e]);else{const t=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],i=["name","required"];"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||t.push("tabindex"),i.indexOf(e)>-1||0===e.indexOf("data")?this.hiddenElement.setAttribute(e,this.htmlAttributes[e]):t.indexOf(e)>-1?"placeholder"===e?Jr.setPlaceholder(this.htmlAttributes[e],this.inputElement):this.inputElement.setAttribute(e,this.htmlAttributes[e]):this.inputWrapper.container.setAttribute(e,this.htmlAttributes[e])}else this.readonly=!0,this.dataBind();"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.inputWrapper.container.removeAttribute("tabindex")}getAriaAttributes(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-live":"polite","aria-labelledby":this.hiddenElement.id}}setEnableRtl(){Jr.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())}setEnable(){Jr.setEnabled(this.enabled,this.inputElement),this.enabled?(qt([this.inputWrapper.container],Pa.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),Vt([this.inputWrapper.container],Pa.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)}getPersistData(){return this.addOnPersist(["value"])}getLocaleName(){return"drop-down-list"}preventTabIndex(e){"dropdownlist"===this.getModuleName()&&(e.tabIndex=-1)}targetElement(){return this.inputWrapper.container}getNgDirective(){return"EJS-DROPDOWNLIST"}getElementByText(e){return this.getElementByValue(this.getValueByText(e))}getElementByValue(e){let t;const i=this.getItems();for(const s of i)if(this.getFormattedValue(s.getAttribute("data-value"))===e){t=s;break}return t}initValue(){this.renderList(),this.dataSource instanceof Gs.a?this.initRemoteRender=!0:this.updateValues()}updateValues(){if(qe(this.value))if(this.text&&qe(this.value)){const e=this.getElementByText(this.text);if(qe(e))return void this.setProperties({text:null});this.setSelection(e,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),Jr.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}onBlurHandler(e){if(!this.enabled)return;const t=e.relatedTarget,i=e.target,s=this.isPreventBlur;this.isPreventBlur=!1,!s||this.isDocumentClick||!this.isPopupOpen||qe(i)&&(this.isFilterLayout()||!qe(t))?this.isDocumentClick||!qe(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(Pa.mobileFilter)?this.beforePopupOpen||(this.isDocumentClick=!1):(("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&t!==this.inputElement&&(document.activeElement!==t||document.activeElement===t&&i.classList.contains(Pa.inputFocus))||qe(t)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&i!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(t)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(e),this.isTabKey=!1),!this.isRequested||this.isPopupOpen||this.isPreventBlur||(this.isActive=!1,this.beforePopupOpen=!1)):"dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus()}focusOutAction(e){this.isInteracted=!1,this.focusOut(e),this.onFocusOut()}onFocusOut(){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&Vt([this.inputWrapper.clearButton],Pa.clearIconHide),this.trigger("blur"))}onFocus(e){this.isInteracted||(this.isInteracted=!0,this.trigger("focus",{isInteracted:!!e,event:e})),this.updateIconState()}resetValueHandler(e){const t=Zt(this.inputElement,"form");if(t&&e.target===t){const e=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=e}}wireEvent(){Bt.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),Bt.add(this.inputWrapper.container,"focus",this.focusIn,this),Bt.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()}bindCommonEvent(){Bt.add(this.targetElement(),"blur",this.onBlurHandler,this);const e=Zt(this.inputElement,"form");e&&Bt.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new Xi(this.targetElement(),zt.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()}bindClearEvent(){this.showClearButton&&Bt.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)}unBindCommonEvent(){this.targetElement()&&Bt.remove(this.targetElement(),"blur",this.onBlurHandler);const e=this.inputElement&&Zt(this.inputElement,"form");e&&Bt.remove(e,"reset",this.resetValueHandler),zt.isDevice||this.keyboardModule.destroy(),this.showClearButton&&Bt.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)}updateIconState(){this.showClearButton&&(""===this.inputElement.value||this.readonly?Vt([this.inputWrapper.clearButton],Pa.clearIconHide):qt([this.inputWrapper.clearButton],Pa.clearIconHide))}wireListEvents(){Bt.add(this.list,"click",this.onMouseClick,this),Bt.add(this.list,"mouseover",this.onMouseOver,this),Bt.add(this.list,"mouseout",this.onMouseLeave,this)}onSearch(e){32!==e.charCode&&13!==e.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=e,this.onServerIncrementalSearch(e))}onServerIncrementalSearch(e){this.isRequested||qe(this.list)||qe(this.list.querySelector("li"))||!this.enabled||this.readonly||this.incrementalSearch(e)}onMouseClick(e){const t=Zt(e.target,".e-list-item");this.isValidLI(t)&&(this.setSelection(t,e),zt.isDevice&&this.isFilterLayout()?history.back():this.closePopup(100))}onMouseOver(e){const t=Zt(e.target,".e-list-item");this.setHover(t)}setHover(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains(Ma)&&(this.removeHover(),Vt([e],Ma))}onMouseLeave(){this.removeHover()}removeHover(){if(this.list){const e=this.list.querySelectorAll(".e-hover");e&&e.length&&qt(e,Ma)}}isValidLI(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")}incrementalSearch(e){if(this.liCollections.length>0){const t=function(e,t,i,s,n){let o;if(va+=String.fromCharCode(e),setTimeout(()=>{va=""},1e3),va=va.toLowerCase(),Sa===n&&Ca===va){for(let e=0;e<wa.length;e++)if(wa[e].classList.contains("e-active")){o=e;break}return o+=1,wa[o]?wa[o]:wa[0]}{const e=t,s=va.length;let r,l,a=i=i?i+1:0;wa=[];do{a===e.length&&(a=-1),o=-1===a?0:a,l=e[o],r=l.innerText.toLowerCase(),r.substr(0,s)===va&&wa.push(e[o]),a++}while(a!==i);return Ca=va,Sa=n,wa[0]}}(e.charCode,this.liCollections,this.activeIndex,0,this.element.id);qe(t)||(this.setSelection(t,e),this.setScrollPosition())}}hideSpinner(){qe(this.spinnerElement)||(Nr(this.spinnerElement),qt([this.spinnerElement],Pa.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)}showSpinner(){qe(this.spinnerElement)&&(this.spinnerElement=zt.isDevice&&!qe(this.filterInputObj)&&this.filterInputObj.buttons[1]||!qe(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],Vt([this.spinnerElement],Pa.disableIcon),Rr({target:this.spinnerElement,width:zt.isDevice?"16px":"14px"},this.createElement),Br(this.spinnerElement))}keyActionHandler(e){if(!this.enabled)return;const t="pageUp"===e.action||"pageDown"===e.action,i="dropdownlist"!==this.getModuleName()&&("home"===e.action||"end"===e.action);this.isEscapeKey="escape"===e.action,this.isTabKey=!this.isPopupOpen&&"tab"===e.action;const s="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action;if((!(this.isEditTextBox()||t||i)||this.isPopupOpen)&&!this.readonly){const t="tab"===e.action||"close"===e.action;if(void 0!==this.list||this.isRequested||t||"escape"===e.action||(this.searchKeyEvent=e,this.renderList()),qe(this.list)||!qe(this.liCollections)&&s&&0===this.liCollections.length||this.isRequested)return;switch((t&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===e.action)&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,this.isTyped=!s&&"escape"!==e.action&&this.isTyped,e.action){case"down":case"up":this.updateUpDownAction(e);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":case"end":this.updateHomeEndAction(e);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup();break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(e),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"tab":this.selectCurrentValueOnTab(e);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}}}updateUpDownAction(e){const t=this.list.querySelector("."+Pa.focus);if(this.isSelectFocusItem(t))this.setSelection(t,e);else{let t="down"===e.action?this.activeIndex+1:this.activeIndex-1,i=0;"autocomplete"===this.getModuleName()&&(i="down"===e.action&&qe(this.activeIndex)?0:this.liCollections.length-1,t=t<0?this.liCollections.length-1:t===this.liCollections.length?0:t);const s=qe(this.activeIndex)?this.liCollections[i]:this.liCollections[t];qe(s)||this.setSelection(s,e)}e.preventDefault()}updateHomeEndAction(e){if("dropdownlist"===this.getModuleName()){let t=0;if(t="home"===e.action?0:this.getItems().length-1,e.preventDefault(),this.activeIndex===t)return;this.setSelection(this.liCollections[t],e)}}selectCurrentValueOnTab(e){"autocomplete"===this.getModuleName()?this.selectCurrentItem(e):this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}mobileKeyActionHandler(e){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0!==this.list||this.isRequested||(this.searchKeyEvent=e,this.renderList()),qe(this.list)||!qe(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===e.action&&this.selectCurrentItem(e)}}selectCurrentItem(e){if(this.isPopupOpen){const t=this.list.querySelector("."+Pa.focus);t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(),this.focusDropDown(e)}else this.showPopup()}isSelectFocusItem(e){return!qe(e)}getPageCount(){const e=this.list.classList.contains(Ia)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))}pageUpSelection(e,t){this.setSelection(e>=0?this.liCollections[e+1]:this.liCollections[0],t)}pageDownSelection(e,t){const i=this.getItems();this.setSelection(e<=i.length?this.liCollections[e-1]:this.liCollections[i.length-1],t)}unWireEvent(){Bt.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),Bt.remove(this.inputWrapper.container,"keypress",this.onSearch),Bt.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()}unWireListEvents(){Bt.remove(this.list,"click",this.onMouseClick),Bt.remove(this.list,"mouseover",this.onMouseOver),Bt.remove(this.list,"mouseout",this.onMouseLeave)}checkSelector(e){return'[id="'+e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'}onDocumentClick(e){const t=e.target;if(!qe(this.popupObj)&&Zt(t,this.checkSelector(this.popupObj.element.id))||this.inputWrapper.container.contains(e.target))t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()&&!this.allowFiltering&&zt.isDevice&&t===this.inputWrapper.buttons[0]||(this.isPreventBlur=(zt.isIE||"edge"===zt.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault());else if(this.inputWrapper.container.classList.contains(Pa.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;const t=this.isRequested;this.isInteracted=!1,this.hidePopup(e),t||(this.onFocusOut(),this.inputWrapper.container.classList.remove(Pa.inputFocus))}}activeStateChange(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(Pa.inputFocus))}focusDropDown(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)}dropDownClick(e){if(3===e.which||2===e.button)return;if(this.targetElement().classList.contains(Pa.disable)||this.inputWrapper.clearButton===e.target)return;const t=e.target;if(t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()||e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen?(this.hidePopup(),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup());const t=this,i=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(()=>{t.cloneElements(),t.isSecondClick=!0},i)}}cloneElements(){if(this.list){let e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}}updateSelectedItem(e,t,i,s){this.removeSelection(),e.classList.add(Ta),this.removeHover();const n=this.getFormattedValue(e.getAttribute("data-value")),o=this.getDataByValue(n);if(this.initial||i||qe(t))this.selectEventCallback(e,t,i,o,n),s&&this.setSelectOptions(e,t);else{const r=this.detachChanges(o);this.isSelected=!0,this.trigger("select",{e:t,item:e,itemData:r,isInteracted:!!t,cancel:!1},r=>{r.cancel?e.classList.remove(Ta):(this.selectEventCallback(e,t,i,o,n),s&&this.setSelectOptions(e,t))})}}selectEventCallback(e,t,i,s,n){this.previousItemData=qe(this.itemData)?null:this.itemData,this.item=e,this.itemData=s;const o=this.list.querySelector(".e-item-focus");o&&qt([o],ka),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(n)}activeItem(e){this.isValidLI(e)&&!e.classList.contains(Ta)&&(this.removeSelection(),e.classList.add(Ta),this.removeHover(),e.setAttribute("aria-selected","true"))}setValue(e){const t=this.getItemData();Jr.setValue(null===t.value?null:t.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&null!==this.itemData?this.setValueTemplate():qe(this.valueTempElement)||this.inputElement.previousSibling!==this.valueTempElement||(Kt(this.valueTempElement),this.inputElement.style.display="block");let i=Pa.clearIcon,s=this.isFiltering()&&this.filterInput&&"combobox"===this.getModuleName()&&this.filterInput.parentElement.querySelector("."+i);return this.isFiltering()&&s&&s.style.removeProperty("visibility"),this.previousValue===t.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)}setSelection(e,t){this.isValidLI(e)&&(!e.classList.contains(Ta)||this.isPopupOpen&&this.isSelected&&e.classList.contains(Ta))?this.updateSelectedItem(e,t,!1,!0):this.setSelectOptions(e,t)}setSelectOptions(e,t){this.list&&this.removeHover(),this.previousSelectedLI=qe(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,this.setValue(t)||(this.isPopupOpen&&(Xt(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),this.isFilterLayout()&&this.filterInput&&Xt(this.filterInput,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})),(!this.isPopupOpen&&!qe(e)||this.isPopupOpen&&!qe(t)&&("keydown"!==t.type||"keydown"===t.type&&"enter"===t.action))&&(this.isSelectCustom=!1,this.onChangeEvent(t)),!this.isPopupOpen||qe(this.selectedLI)||null===this.itemData||t&&"click"===t.type||this.setScrollPosition(t),"mozilla"!==zt.info.name&&(Xt(this.inputElement,{"aria-label":this.inputElement.value}),Xt(this.targetElement(),{"aria-describedby":this.inputElement.id}),this.targetElement().removeAttribute("aria-live")))}dropdownCompiler(e){let t=!1;if(e)try{t=!!document.querySelectorAll(e).length}catch(i){t=!1}return t}setValueTemplate(){let e;this.isReact&&this.clearTemplate(["valueTemplate"]),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:Pa.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.valueTempElement.innerHTML="",e=Ds(this.dropdownCompiler(this.valueTemplate)?document.querySelector(this.valueTemplate).innerHTML.trim():this.valueTemplate);const t=e(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);if(t&&t.length>0)for(let i=0;i<t.length;i++)this.valueTempElement.appendChild(t[i]);this.renderReactTemplates()}removeSelection(){if(this.list){const e=this.list.querySelectorAll(".e-active");e.length&&(qt(e,Ta),e[0].removeAttribute("aria-selected"))}}getItemData(){const e=this.fields;let t,i,s=null;return s=this.itemData,qe(s)||(t=Pe(e.value,s),i=Pe(e.text,s)),{value:qe(s)||je(t)?s:t,text:qe(s)||je(t)?s:i}}onChangeEvent(e){const t=this.getItemData();this.setProperties({index:this.isSelectCustom?null:this.activeIndex,text:t.text,value:t.value},!0),this.detachChangeEvent(e)}detachChanges(e){let t;return t="string"==typeof e||"boolean"==typeof e||"number"==typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e,t}detachChangeEvent(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=qe(this.text)?"":this.text,!this.initial){const t=this.detachChanges(this.itemData);let i;i="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();const s={e:e,item:this.item,itemData:t,previousItem:this.previousSelectedLI,previousItemData:i,isInteracted:!!e,value:this.value,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",s)}!qe(this.value)&&""!==this.value||"Always"===this.floatLabelType||qt([this.inputWrapper.container],"e-valid-input")}setHiddenValue(){if(qe(this.value))this.hiddenElement.innerHTML="";else if(this.hiddenElement.querySelector("option")){const e=this.hiddenElement.querySelector("option");e.textContent=this.text,e.setAttribute("value",this.value.toString())}else this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",this.hiddenElement.querySelector("option").setAttribute("value",this.value.toString())}onFilterUp(e){if(e.ctrlKey&&86===e.keyCode||!this.isValidKey&&40!==e.keyCode&&38!==e.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,e.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(e)),this.preventAltUp=!1,e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0||""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"dropdownlist"!==this.getModuleName()&&(this.preventAutoFill=!0,this.searchLists(e),"autocomplete"===this.getModuleName()&&this.hidePopup())),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}}onFilterDown(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}}removeFillSelection(){if(this.isInteracted){const e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}}getQuery(e){let t;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){t=e?e.clone():this.query?this.query.clone():new Gs.e;const i=""===this.typedString?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;t.where((this.dataSource instanceof Gs.a||"string"!==s)&&"number"!==s&&this.fields.text?this.fields.text:"",i,this.typedString,this.ignoreCase,this.ignoreAccent)}else t=e?e.clone():this.query?this.query.clone():new Gs.e;return t}getSelectionPoints(){const e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}}searchLists(e){if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+Pa.clearIcon)&&(this.filterInput.parentElement.querySelector("."+Pa.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"),this.isDataFetched=!1,this.isFiltering()){const t={preventDefaultAction:!1,text:this.filterInput.value,updateData:(e,i,s)=>{t.cancel||(this.isCustomFilter=!0,this.filteringAction(e,i,s))},baseEventArgs:e,cancel:!1};this.trigger("filtering",t,e=>{e.cancel||this.isCustomFilter||e.preventDefaultAction||this.filteringAction(this.dataSource,null,this.fields)})}}filter(e,t,i){this.isCustomFilter=!0,this.filteringAction(e,t,i)}filteringAction(e,t,i){qe(this.filterInput)||(this.beforePopupOpen=!(!this.isPopupOpen&&"combobox"===this.getModuleName()&&""===this.filterInput.value),""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,t=""===this.filterInput.value.trim()?null:t,this.resetList(e,i,t)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,qe(this.actionCompleteData.ulElement)||qe(this.actionCompleteData.list)||this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,qe(this.itemData)||"dropdownlist"!==this.getModuleName()||(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0),this.renderReactTemplates())}setSearchBox(e){if(this.isFiltering()){const t=e.querySelector("."+Pa.filterParent)?e.querySelector("."+Pa.filterParent):this.createElement("span",{className:Pa.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:Pa.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);let i=!1;return zt.isDevice&&(i=!0),this.filterInputObj=Jr.createInput({element:this.filterInput,buttons:i?[Pa.backIcon,Pa.filterBarClearIcon]:[Pa.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),qe(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?Vt([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&Vt([this.filterInputObj.container],"e-filled")),_t([this.filterInputObj.container],t),Gt([t],e),Xt(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":this.selectedLI?this.selectedLI.id:null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+Pa.clearIcon),!zt.isDevice&&this.clearIconElement&&(Bt.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),this.searchKeyModule=new Xi(this.filterInput,zt.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),Bt.add(this.filterInput,"input",this.onInput,this),Bt.add(this.filterInput,"keyup",this.onFilterUp,this),Bt.add(this.filterInput,"keydown",this.onFilterDown,this),Bt.add(this.filterInput,"blur",this.onBlurHandler,this),Bt.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return za}onInput(e){this.isValidKey=!0,zt.isDevice&&"mozilla"===zt.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(e))}pasteHandler(e){setTimeout(()=>{this.typedString=this.filterInput.value,this.searchLists(e)})}onActionFailure(e){super.onActionFailure(e),this.beforePopupOpen&&this.renderPopup()}onActionComplete(e,t,i,s){if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){const s=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(super.onActionComplete(e,t,i),this.updateSelectElementData(this.allowFiltering),this.isRequested&&!qe(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!qe(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,qe(e)||Xt(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender&&(this.initial=!0,this.activeIndex=this.index,this.updateValues(),this.initRemoteRender=!1,this.initial=!1,this.value&&this.dataSource instanceof Gs.a)){const e=qe(this.fields.value)?this.fields.text:this.fields.value;t.some(t=>t[e]===this.value)||this.dataSource.executeQuery(this.getQuery(this.query).where(new Gs.d(e,"equal",this.value))).then(e=>{e.result.length>0&&(this.addItem(e.result,t.length),this.updateValues())})}"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||qe(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof Gs.a||!qe(this.dataSource)&&!qe(this.dataSource.length)&&0!==this.dataSource.length))&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(()=>{this.updateActionCompleteDataValues(e,t)},0):this.updateActionCompleteDataValues(e,t)),this.addNewItem(t,s),qe(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup()}}updateActionCompleteDataValues(e,t){this.actionCompleteData={ulElement:e.cloneNode(!0),list:t,isUpdated:!0},qe(this.actionData.ulElement)&&qe(this.actionData.list)&&(this.actionData=this.actionCompleteData)}addNewItem(e,t){if(!qe(this.itemData)&&!qe(t)){const t=this.getItemData().value;e.some(e=>("string"==typeof e||"number"==typeof e)&&e===t||Pe(this.fields.value,e)===t)||this.addItem(this.itemData)}}updateActionCompleteData(e,t,i){"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(()=>{this.actionCompleteDataUpdate(e,t,i)},0):this.actionCompleteDataUpdate(e,t,i))}actionCompleteDataUpdate(e,t,i){null!=i?this.actionCompleteData.ulElement.insertBefore(e.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[i]):this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(t)<0&&this.actionCompleteData.list.push(t)}focusIndexItem(){const e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);const t=this.findListElement(this.list,"li","data-value",e);this.selectedLI=t,this.activeItem(t),this.removeFocus()}updateSelection(){const e=this.list.querySelector(".e-active");e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector(".e-list-item").classList.add(Pa.focus))}removeFocus(){const e=this.list.querySelectorAll("."+Pa.focus);e&&e.length&&qt(e,Pa.focus)}renderPopup(){this.popupObj&&document.body.contains(this.popupObj.element)?this.refreshPopup():this.trigger("beforeOpen",{cancel:!1},e=>{if(e.cancel)this.beforePopupOpen=!1;else{const e=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup "+(null!=this.cssClass?this.cssClass:"")}),t=this.setSearchBox(e);if(this.listHeight=Ke(this.popupHeight),this.headerTemplate&&this.setHeaderTemplate(e),_t([this.list],e),this.footerTemplate&&this.setFooterTemplate(e),document.body.appendChild(e),e.style.visibility="hidden","auto"!==this.popupHeight){if(this.searchBoxHeight=0,qe(t.container)||(this.searchBoxHeight=t.container.parentElement.getBoundingClientRect().height,this.listHeight=(parseInt(this.listHeight,10)-this.searchBoxHeight).toString()+"px"),this.headerTemplate){this.header=this.header?this.header:e.querySelector(".e-ddl-header");const t=Math.round(this.header.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(t+this.searchBoxHeight)).toString()+"px"}if(this.footerTemplate){this.footer=this.footer?this.footer:e.querySelector(".e-ddl-footer");const t=Math.round(this.footer.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(t+this.searchBoxHeight)).toString()+"px"}this.list.style.maxHeight=(parseInt(this.listHeight,10)-2).toString()+"px",e.style.maxHeight=Ke(this.popupHeight)}else e.style.height="auto";let i,s=0;if(!qe(this.selectedLI)&&!qe(this.activeIndex)&&this.activeIndex>=0?this.setScrollPosition():this.list.scrollTop=0,zt.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){s=this.getOffsetValue(e);const t=this.isEmptyList()?this.list:this.liCollections[0];i=-(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))}this.getFocusElement(),this.createPopup(e,s,i),this.checkCollision(e),zt.isDevice&&(this.popupObj.element.classList.add(Pa.device),("dropdownlist"===this.getModuleName()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&(this.popupObj.collision={X:"fit",Y:"fit"}),this.isFilterLayout()&&(this.popupObj.element.classList.add(Pa.mobileFilter),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),Xt(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),Vt([document.body,this.popupObj.element],Pa.popupFullScreen),this.setSearchBoxPosition(),this.backIconElement=t.container.querySelector(".e-back-icon"),this.clearIconElement=t.container.querySelector("."+Pa.clearIcon),Bt.add(this.backIconElement,"click",this.clickOnBackIcon,this),Bt.add(this.clearIconElement,"click",this.clearText,this))),e.style.visibility="visible",Vt([e],"e-popup-close");const n=this.popupObj.getScrollableParent(this.inputWrapper.container);for(const r of n)Bt.add(r,"scroll",this.scrollHandler,this);zt.isDevice&&this.isFilterLayout()&&Bt.add(this.list,"scroll",this.listScroll,this),qe(this.list)||(this.unWireListEvents(),this.wireListEvents()),Xt(this.targetElement(),{"aria-expanded":"true"}),Vt([this.isFiltering()?this.filterInput.parentElement:this.inputWrapper.container],[Pa.inputFocus]);const o={name:"FadeIn",duration:100};this.beforePopupOpen=!0,this.trigger("open",{popup:this.popupObj,cancel:!1,animation:o},e=>{e.cancel?(this.beforePopupOpen=!1,this.destroyPopup()):(Vt([this.inputWrapper.container],[Pa.iconAnimation]),this.renderReactTemplates(),this.popupObj.show(new xi(e.animation),1e3===this.zIndex?this.element:null))})}})}checkCollision(e){(!zt.isDevice||zt.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&(un(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision())}getOffsetValue(e){const t=getComputedStyle(e),i=parseInt(t.borderTopWidth,10),s=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+s)}createPopup(e,t,i){this.popupObj=new Hn(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:t,enableRtl:this.enableRtl,offsetX:i,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:()=>{this.isDocumentClick||this.focusDropDown(),this.isReact&&this.clearTemplate(["headerTemplate","footerTemplate"]),this.getModuleName(),this.isNotSearchList=!1,this.isDocumentClick=!1,this.destroyPopup(),this.isFiltering()&&this.actionCompleteData.list&&this.actionCompleteData.list[0]&&(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0))},open:()=>{Bt.add(document,"mousedown",this.onDocumentClick,this),this.isPopupOpen=!0;const e=this.actionCompleteData&&this.actionCompleteData.ulElement&&this.actionCompleteData.ulElement.querySelector("li"),t=this.list.querySelector("ul li");this.isFiltering()&&this.itemTemplate&&this.element.tagName===this.getNgDirective()&&e&&t&&e.textContent!==t.textContent&&"EJS-COMBOBOX"!==this.element.tagName&&this.cloneElements(),this.isFilterLayout()&&(qt([this.inputWrapper.container],[Pa.inputFocus]),this.isFilterFocus=!0,this.filterInput.focus(),this.inputWrapper.clearButton&&Vt([this.inputWrapper.clearButton],Pa.clearIconHide)),this.activeStateChange()},targetExitViewport:()=>{zt.isDevice||this.hidePopup()}})}isEmptyList(){return!qe(this.liCollections)&&0===this.liCollections.length}getFocusElement(){}isFilterLayout(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering}scrollHandler(){zt.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()}setSearchBoxPosition(){const e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";const t=this.filterInput.parentElement.querySelector("."+Pa.clearIcon);Kt(this.filterInput),t.parentElement.insertBefore(this.filterInput,t)}setPopupPosition(e){let t;const i=e,s=this.list.querySelector("."+Pa.focus)||this.selectedLI,n=this.isEmptyList()?this.list:this.liCollections[0],o=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],r=n.getBoundingClientRect().height,l=this.list.offsetHeight/2,a=qe(s)?n.offsetTop:s.offsetTop;if(o.offsetTop-l<a&&!qe(this.liCollections)&&this.liCollections.length>0&&!qe(s)){const e=this.list.offsetHeight/r,n=parseInt(getComputedStyle(this.list).paddingBottom,10);t=(e-(this.liCollections.length-this.activeIndex))*r-i+n,this.list.scrollTop=s.offsetTop}else a>l?(t=l-r/2,this.list.scrollTop=a-l+r/2):t=a;return t=t+r+i-(r-this.inputWrapper.container.offsetHeight)/2,-t}setWidth(){let e=Ke(this.popupWidth);if(e.indexOf("%")>-1&&(e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px"),zt.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){const t=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return e}scrollBottom(e){if(!qe(this.selectedLI)){const t=this.list.offsetHeight,i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;let s=this.list.scrollTop+i-t;s=e?s+2*parseInt(getComputedStyle(this.list).paddingTop,10):s;let n=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;n=this.fields.groupBy&&!qe(this.fixedHeaderElement)?n-this.fixedHeaderElement.offsetHeight:n,0===this.activeIndex?this.list.scrollTop=0:(i>t||!(n>0&&this.list.offsetHeight>n))&&(this.list.scrollTop=s)}}scrollTop(){if(!qe(this.selectedLI)){let e=this.selectedLI.offsetTop-this.list.scrollTop;e=this.fields.groupBy&&!qe(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;const t=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:t>0&&this.list.offsetHeight>t||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!qe(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}}isEditTextBox(){return!1}isFiltering(){return this.allowFiltering}isPopupButton(){return!0}setScrollPosition(e){if(qe(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}}clearText(){this.filterInput.value=this.typedString="",this.searchLists(null)}listScroll(){this.filterInput.blur()}setEleWidth(e){qe(e)||("number"==typeof e?this.inputWrapper.container.style.width=Ke(e):"string"==typeof e&&(this.inputWrapper.container.style.width=e.match(/px|%|em/)?e:Ke(e)))}closePopup(e){if(this.isTyped=!1,!(this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen))return;Bt.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;const t=this.popupObj.getScrollableParent(this.inputWrapper.container);for(const i of t)Bt.remove(i,"scroll",this.scrollHandler);zt.isDevice&&this.isFilterLayout()&&(qt([document.body,this.popupObj.element],Pa.popupFullScreen),Bt.remove(this.list,"scroll",this.listScroll)),this.isFilterLayout()&&(zt.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&Bt.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(Bt.remove(this.backIconElement,"click",this.clickOnBackIcon),Bt.remove(this.clearIconElement,"click",this.clearText)),Bt.remove(this.filterInput,"input",this.onInput),Bt.remove(this.filterInput,"keyup",this.onFilterUp),Bt.remove(this.filterInput,"keydown",this.onFilterDown),Bt.remove(this.filterInput,"blur",this.onBlurHandler),Bt.remove(this.filterInput,"paste",this.pasteHandler),this.filterInput=null),Xt(this.targetElement(),{"aria-expanded":"false","aria-activedescendant":null}),this.inputWrapper.container.classList.remove(Pa.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1,this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:e||0}},e=>{if(!qe(this.popupObj)&&!qe(this.popupObj.element.querySelector(".e-fixed-head"))){const e=this.popupObj.element.querySelector(".e-fixed-head");e.parentNode.removeChild(e),this.fixedHeaderElement=null}e.cancel||("autocomplete"===this.getModuleName()&&this.rippleFun(),this.isPopupOpen?this.popupObj.hide(new xi(e.animation)):this.destroyPopup())})}destroyPopup(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),Kt(this.popupObj.element)}clickOnBackIcon(){this.hidePopup(),this.focusIn()}render(){"INPUT"===this.element.tagName?(this.inputElement=this.element,qe(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","textbox"),qe(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text")):(this.inputElement=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));let e=this.cssClass;qe(this.cssClass)||""===this.cssClass||(e=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=Jr.createInput({element:this.inputElement,buttons:this.isPopupButton()?[Pa.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:Pa.hiddenElement}}),Gt([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=Ke(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");const t=this.element.getAttribute("id")?this.element.getAttribute("id"):We("ej2_dropdownlist");if(this.element.id=t,this.hiddenElement.id=t+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),Xt(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){const e=this.element;this.value=e.options[e.selectedIndex].value,this.text=qe(this.value)?null:e.options[e.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=e=>{e.stopImmediatePropagation()},this.inputElement.onchange=e=>{e.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),qe(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.renderComplete()}setFooterTemplate(e){let t;this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),Vt([this.footer],Pa.footer)),t=Ds(this.dropdownCompiler(this.footerTemplate)?Qt(this.footerTemplate,document).innerHTML.trim():this.footerTemplate);const i=t({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(i&&i.length>0)for(let s=0;s<i.length;s++)this.footer.appendChild(i[s]);_t([this.footer],e)}setHeaderTemplate(e){let t;this.header?this.header.innerHTML="":(this.header=this.createElement("div"),Vt([this.header],Pa.header)),t=Ds(this.dropdownCompiler(this.headerTemplate)?Qt(this.headerTemplate,document).innerHTML.trim():this.headerTemplate);const i=t({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(i&&i.length)for(let n=0;n<i.length;n++)this.header.appendChild(i[n]);const s=e.querySelector("div.e-content");e.insertBefore(this.header,s)}setOldText(e){this.text=e}setOldValue(e){this.value=e}refreshPopup(){qe(this.popupObj)||!document.body.contains(this.popupObj.element)||(!this.allowFiltering||zt.isDevice&&this.isFilterLayout())&&"autocomplete"!==this.getModuleName()||(qt([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())}checkData(e){!e.dataSource||qe(Object.keys(e.dataSource))||!this.itemTemplate||!this.allowFiltering||this.isListSearched&&e.dataSource instanceof Gs.a||(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;const t=-1!==Object.keys(e).indexOf("value")&&qe(e.value),i=-1!==Object.keys(e).indexOf("text")&&qe(e.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(t||i)&&(this.itemData=null),this.allowFiltering&&e.dataSource&&!qe(Object.keys(e.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&e.query&&!qe(Object.keys(e.query))&&(this.actionCompleteData="combobox"===this.getModuleName()?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)}updateDataSource(e){""===this.inputElement.value&&(qe(e)||!qe(e.dataSource)&&(e.dataSource instanceof Gs.a||0!==e.dataSource.length))||this.clearAll(null,e),this.fields.groupBy&&e.fields&&!this.isGroupChecking&&(Bt.remove(this.list,"scroll",this.setFloatingHeader),Bt.add(this.list,"scroll",this.setFloatingHeader,this)),(qe(e)||!qe(e.dataSource)&&(e.dataSource instanceof Gs.a||0!==e.dataSource.length)||e.dataSource!==[])&&(this.typedString="",this.resetList(this.dataSource)),this.isCustomFilter||this.isFilterFocus||document.activeElement===this.filterInput||this.checkCustomValue()}checkCustomValue(){this.itemData=this.getDataByValue(this.value);const e=this.getItemData();this.setProperties({value:e.value,text:e.text})}updateInputFields(){"dropdownlist"===this.getModuleName()&&Jr.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}onPropertyChanged(e,t){"dropdownlist"===this.getModuleName()&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(const i of Object.keys(e))switch(i){case"query":case"dataSource":break;case"htmlAttributes":this.setHTMLAttributes();break;case"width":this.setEleWidth(e.width);break;case"placeholder":Jr.setPlaceholder(e.placeholder,this.inputElement);break;case"filterBarPlaceholder":this.filterInput&&Jr.setPlaceholder(e.filterBarPlaceholder,this.filterInput);break;case"readonly":"dropdownlist"!==this.getModuleName()&&Jr.setReadonly(e.readonly,this.inputElement),this.setReadOnly();break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnable();break;case"text":if(null===e.text){this.clearAll();break}if(this.list||(this.dataSource instanceof Gs.a&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){const i=this.getElementByText(e.text);this.checkValidLi(i)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.text,t.text,"text"):this.setOldText(t.text)),this.updateInputFields()}break;case"value":if(null===e.value){this.clearAll();break}if(this.notify("beforeValueChange",{newProp:e}),this.list||(this.dataSource instanceof Gs.a&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){const i=this.getElementByValue(e.value);this.checkValidLi(i)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.value,t.value,"value"):this.setOldValue(t.value)),this.updateInputFields(),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange}break;case"index":if(null===e.index){this.clearAll();break}this.list||(this.dataSource instanceof Gs.a&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender&&this.liCollections&&(this.checkValidLi(this.liCollections[e.index])||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.index,t.index,"index"):this.index=t.index),this.updateInputFields());break;case"footerTemplate":this.popupObj&&this.setFooterTemplate(this.popupObj.element);break;case"headerTemplate":this.popupObj&&this.setHeaderTemplate(this.popupObj.element);break;case"valueTemplate":qe(this.itemData)||null==this.valueTemplate||this.setValueTemplate();break;case"allowFiltering":this.allowFiltering&&(this.actionCompleteData={ulElement:this.ulElement,list:this.listData,isUpdated:!0},this.actionData=this.actionCompleteData,this.updateSelectElementData(this.allowFiltering));break;case"floatLabelType":Jr.removeFloating(this.inputWrapper),Jr.addFloating(this.inputElement,e.floatLabelType,this.placeholder,this.createElement);break;case"showClearButton":Jr.setClearButton(e.showClearButton,this.inputElement,this.inputWrapper,null,this.createElement),this.bindClearEvent();break;default:{const s=this.getPropObject(i,e,t);super.onPropertyChanged(s.newProperty,s.oldProperty)}}}checkValidLi(e){return!!this.isValidLI(e)&&(this.setSelection(e,null),!0)}setSelectionData(e,t,i){let s;this.updateListValues=()=>{"text"===i?(s=this.getElementByText(e),this.checkValidLi(s)||this.setOldText(t)):"value"===i?(s=this.getElementByValue(e),this.checkValidLi(s)||this.setOldValue(t)):"index"===i&&(s=this.liCollections[e],this.checkValidLi(s)||(this.index=t))}}setReadOnly(){this.readonly?Vt([this.inputWrapper.container],["e-readonly"]):qt([this.inputWrapper.container],["e-readonly"])}setCssClass(e,t){qe(t)||(t=t.replace(/\s+/g," ").trim()),qe(e)||(e=e.replace(/\s+/g," ").trim()),Jr.setCssClass(e,[this.inputWrapper.container],t),this.popupObj&&Jr.setCssClass(e,[this.popupObj.element],t)}getModuleName(){return"dropdownlist"}showPopup(){this.enabled&&(this.isFiltering()&&this.dataSource instanceof Gs.a&&this.actionData.list!=this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen?this.refreshPopup():(this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(qe(this.list)||!je(this.list)&&(this.list.classList.contains(Ia)||this.list.querySelectorAll(".e-list-item").length<=0))&&this.renderList(),this.invokeRenderPopup()))}invokeRenderPopup(){if(zt.isDevice&&this.isFilterLayout()){const e=this;window.onpopstate=()=>{e.hidePopup()},history.pushState({},"")}qe(this.list.children[0])&&!this.list.classList.contains(Ia)||this.renderPopup(),Xt(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}renderHightSearch(){}hidePopup(e){if(this.isEscapeKey&&"dropdownlist"===this.getModuleName())if(Jr.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,qe(this.index))this.resetSelection();else{const e=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||e,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup();const t=this.getItemData(),i=!qe(this.selectedLI);this.inputElement&&""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||i&&this.inputElement.value!==t.text)&&(this.isSelectCustom=!1,this.clearAll(e))}focusIn(e){if(!this.enabled)return;if(this.targetElement().classList.contains(Pa.disable))return;let t=!1;this.preventFocus&&zt.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,t=!0),t||this.targetElement().focus(),Vt([this.inputWrapper.container],[Pa.inputFocus]),this.onFocus(e)}focusOut(e){this.enabled&&(this.isTyped=!0,this.hidePopup(e),this.targetElement()&&this.targetElement().blur(),qt([this.inputWrapper.container],[Pa.inputFocus]))}destroy(){if(this.isActive=!1,Sa===this.element.id&&(Sa="",Ca="",va="",wa=[]),this.isReact&&this.clearTemplate(),this.hidePopup(),this.unWireEvent(),this.list&&this.unWireListEvents(),!this.element||this.element.classList.contains("e-"+this.getModuleName())){if(this.inputElement){const e=["readonly","aria-disabled","aria-placeholder","placeholder","aria-owns","aria-labelledby","aria-haspopup","aria-expanded","aria-activedescendant","autocomplete","aria-readonly","autocorrect","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"];for(let t=0;t<e.length;t++)this.inputElement.removeAttribute(e[t]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),Jr.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),Kt(this.inputWrapper.container),super.destroy()}}getItems(){return this.list||(this.dataSource instanceof Gs.a&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?super.getItems():[]}getDataByValue(e){return super.getDataByValue(e)}clear(){this.value=null}};return La([gi(null)],e.prototype,"cssClass",void 0),La([gi("100%")],e.prototype,"width",void 0),La([gi("300px")],e.prototype,"popupHeight",void 0),La([gi("100%")],e.prototype,"popupWidth",void 0),La([gi(null)],e.prototype,"placeholder",void 0),La([gi(null)],e.prototype,"filterBarPlaceholder",void 0),La([gi({})],e.prototype,"htmlAttributes",void 0),La([gi(null)],e.prototype,"query",void 0),La([gi(null)],e.prototype,"valueTemplate",void 0),La([gi(null)],e.prototype,"headerTemplate",void 0),La([gi(null)],e.prototype,"footerTemplate",void 0),La([gi(!1)],e.prototype,"allowFiltering",void 0),La([gi(!1)],e.prototype,"readonly",void 0),La([gi(null)],e.prototype,"text",void 0),La([gi(null)],e.prototype,"value",void 0),La([gi(null)],e.prototype,"index",void 0),La([gi("Never")],e.prototype,"floatLabelType",void 0),La([gi(!1)],e.prototype,"showClearButton",void 0),La([yi()],e.prototype,"filtering",void 0),La([yi()],e.prototype,"change",void 0),La([yi()],e.prototype,"beforeOpen",void 0),La([yi()],e.prototype,"open",void 0),La([yi()],e.prototype,"close",void 0),La([yi()],e.prototype,"blur",void 0),La([yi()],e.prototype,"focus",void 0),e=La([vi],e),e})();Pa.root="e-combobox",Pa.root="e-autocomplete",Pa.icon="e-input-group-icon e-ddl-icon e-search-icon";var Ha=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const Na="e-other-month",Va="e-calendar",qa="e-device",ja="e-rtl",Wa="e-year",Ga="e-month",_a="e-decade",Ua="e-disabled",Ka="e-overlay",Ya="e-week-number",Xa="e-selected",Qa="e-focused-date",$a="e-month-hide",Ja="e-today",Za="e-cell",eh="e-zoomin",th="e-calendar-day-header-lg",ih=864e5;let sh=(()=>{let e=class extends Bi{constructor(e,t){super(e,t),this.effect="",this.isPopupClicked=!1,this.isDateSelected=!0,this.isTodayClicked=!1,this.preventChange=!1,this.isAngular=!1}render(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),"Islamic"===this.calendarMode&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new St(this.locale),(qe(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date((new Date).setHours(0,0,0,0)),"calendar"===this.getModuleName()?(this.element.classList.add(Va),this.enableRtl&&this.element.classList.add(ja),zt.isDevice&&this.element.classList.add(qa),Xt(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(Va),this.enableRtl&&this.calendarElement.classList.add(ja),zt.isDevice&&this.calendarElement.classList.add(qa),Xt(this.calendarElement,{role:"calendar"})),this.createHeader(),this.createContent(),this.wireEvents()}rangeValidation(e,t){qe(e)&&this.setProperties({min:new Date(1900,0,1)},!0),qe(t)&&this.setProperties({max:new Date(2099,11,31)},!0)}getDefaultKeyConfig(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs}validateDate(e){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date((new Date).setHours(0,0,0,0)),!qe(e)&&this.min<=this.max&&e>=this.min&&e<=this.max&&(this.currentDate=new Date(this.checkValue(e)))}setOverlayIndex(e,t,i,s){if(s&&!qe(t)&&!qe(i)&&!qe(e)){const s=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(s-1).toString(),e.style.zIndex=s.toString()}}minMaxUpdate(e){+this.min<=+this.max?qt([this.element],Ka):(this.setProperties({min:this.min},!0),Vt([this.element],Ka)),this.min=qe(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=qe(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&e&&+e<=+this.max&&+e>=+this.min?this.currentDate=new Date(this.checkValue(e)):+this.min<=+this.max&&!e&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))}createHeader(){this.headerElement=this.createElement("div",{className:"e-header"});const e=this.createElement("div",{className:"e-icon-container"});this.previousIcon=this.createElement("button",{className:"e-prev",attrs:{type:"button"}}),Ri(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),Xt(this.previousIcon,{"aria-disabled":"false","aria-label":"previous month"}),this.nextIcon=this.createElement("button",{className:"e-next",attrs:{type:"button"}}),Ri(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),Xt(this.nextIcon,{"aria-disabled":"false","aria-label":"next month"}),this.headerTitleElement=this.createElement("div",{className:"e-day e-title"}),Xt(this.headerTitleElement,{"aria-atomic":"true","aria-live":"assertive","aria-label":"title"}),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:"e-date-icon-prev e-icons"})),this.nextIcon.appendChild(this.createElement("span",{className:"e-date-icon-next  e-icons"})),e.appendChild(this.previousIcon),e.appendChild(this.nextIcon),this.headerElement.appendChild(e),"calendar"===this.getModuleName()?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()}createContent(){this.contentElement=this.createElement("div",{className:"e-content"}),this.table=this.createElement("table",{attrs:{tabIndex:"0",role:"grid","aria-activedescendant":""}}),"calendar"===this.getModuleName()?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter()}getCultureValues(){const e=[];let t;const i="days.stand-alone."+this.dayHeaderFormat.toLowerCase();t="en"===this.locale||"en-US"===this.locale?Pe(i,xt()):this.getCultureObjects(yt,""+this.locale);for(const s of Object.keys(t))e.push(Pe(s,t));return e}toCapitalize(e){return!qe(e)&&e.length?e[0].toUpperCase()+e.slice(1):e}createContentHeader(){"calendar"===this.getModuleName()?qe(this.element.querySelectorAll(".e-content .e-week-header")[0])||Kt(this.element.querySelectorAll(".e-content .e-week-header")[0]):qe(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||Kt(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);let e="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:"e-week-header"}),this.weekNumber&&(e+='<th class="e-week-number"></th>',"calendar"===this.getModuleName()?Vt([this.element],""+Ya):Vt([this.calendarElement],""+Ya));const t=this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek);for(let i=0;i<=6;i++)e+='<th  class="">'+this.toCapitalize(t[i])+"</th>";e="<tr>"+e+"</tr>",this.tableHeadElement.innerHTML=e,this.table.appendChild(this.tableHeadElement)}createContentBody(){switch("calendar"===this.getModuleName()?qe(this.element.querySelectorAll(".e-content tbody")[0])||Kt(this.element.querySelectorAll(".e-content tbody")[0]):qe(this.calendarElement.querySelectorAll(".e-content tbody")[0])||Kt(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}}updateFooter(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today"))}createContentFooter(){if(this.showTodayButton){const e=new Date(+this.min),t=new Date(+this.max),i={today:"Today"};this.globalize=new St(this.locale),this.l10=new Qi(this.getModuleName(),i,this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),Ri(this.todayElement),this.updateFooter(),Vt([this.todayElement],["e-btn",Ja,"e-flat","e-primary","e-css"]),+new Date(e.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(t.setHours(0,0,0,0))&&!this.todayDisabled||Vt([this.todayElement],Ua),this.footer=this.createElement("div",{className:"e-footer-container"}),this.footer.appendChild(this.todayElement),"calendar"===this.getModuleName()&&this.element.appendChild(this.footer),"datepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),"datetimepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains(Ua)||Bt.add(this.todayElement,"click",this.todayButtonClick,this)}}wireEvents(e,t,i,s){Bt.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=Ve(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModule="calendar"===this.getModuleName()?new Xi(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):new Xi(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})}dateWireEvents(e,t,i,s){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=Ve(this.defaultKeyConfigs,i),this.serverModuleName=s}todayButtonClick(e,t,i){this.showTodayButton&&(this.effect=this.currentView()===this.depth?"":"e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(t)),i):this.navigateTo("Month",new Date(this.checkValue(t)),i))}resetCalendar(){this.calendarElement&&Kt(this.calendarElement),this.tableBodyElement&&Kt(this.tableBodyElement),this.table&&Kt(this.table),this.tableHeadElement&&Kt(this.tableHeadElement),this.nextIcon&&Kt(this.nextIcon),this.previousIcon&&Kt(this.previousIcon),this.footer&&Kt(this.footer),this.todayElement=null,this.renderDayCellArgs=null,this.calendarElement=this.tableBodyElement=this.footer=this.tableHeadElement=this.nextIcon=this.previousIcon=this.table=null}keyActionHandle(e,t,i){const s=this.tableBodyElement.querySelector("tr td.e-focused-date");let n;n=i?qe(s)||+t!==parseInt(s.getAttribute("id").split("_")[0],10)?this.tableBodyElement.querySelector("tr td.e-selected"):s:this.tableBodyElement.querySelector("tr td.e-selected");let o=this.getViewNumber(this.currentView());const r=this.getViewNumber(this.depth),l=o===r&&this.getViewNumber(this.start)>=r;switch(this.effect="",e.action){case"moveLeft":this.keyboardNavigate(-1,o,e,this.max,this.min),e.preventDefault();break;case"moveRight":this.keyboardNavigate(1,o,e,this.max,this.min),e.preventDefault();break;case"moveUp":this.keyboardNavigate(0===o?-7:-4,o,e,this.max,this.min),e.preventDefault();break;case"moveDown":this.keyboardNavigate(0===o?7:4,o,e,this.max,this.min),e.preventDefault();break;case"select":if(e.target===this.todayElement)this.todayButtonClick(e,t);else{const i=qe(s)?n:s;if(!qe(i)&&!i.classList.contains(Ua))if(l){const t=new Date(parseInt(""+i.id,0));this.selectDate(e,t,i)}else this.contentClick(null,--o,i,t)}break;case"controlUp":this.title(),e.preventDefault();break;case"controlDown":qe(s)&&(qe(n)||l)||this.contentClick(null,--o,s||n,t),e.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),Kt(this.tableBodyElement),0===o?this.renderMonths(e):1===o?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,o),Kt(this.tableBodyElement),0===o?this.renderMonths(e):1===o?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),e.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),e.preventDefault()}"calendar"===this.getModuleName()&&this.table.focus()}keyboardNavigate(e,t,i,s,n){const o=new Date(this.checkValue(this.currentDate));switch(t){case 2:this.addYears(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(Kt(this.tableBodyElement),this.renderDecades(i)):this.currentDate=o;break;case 1:this.addMonths(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(Kt(this.tableBodyElement),this.renderYears(i)):this.currentDate=o;break;case 0:this.addDay(this.currentDate,e,i,s,n),this.isMinMaxRange(this.currentDate)?(Kt(this.tableBodyElement),this.renderMonths(i)):this.currentDate=o}}preRender(e){this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=e=>{this.triggerNavigate(e)}}minMaxDate(e){const t=new Date(new Date(+e).setHours(0,0,0,0)),i=new Date(new Date(+this.min).setHours(0,0,0,0)),s=new Date(new Date(+this.max).setHours(0,0,0,0));return+t!=+i&&+t!=+s||(+e<+this.min&&(e=new Date(+this.min)),+e>+this.max&&(e=new Date(+this.max))),e}renderMonths(e,t,i){const s=this.weekNumber?8:7;let n;n="Gregorian"===this.calendarMode?this.renderDays(this.currentDate,t,null,null,i):this.islamicModule.islamicRenderDays(this.currentDate,t),this.createContentHeader(),"Gregorian"===this.calendarMode?this.renderTemplate(n,s,Ga,e,t):this.islamicModule.islamicRenderTemplate(n,s,Ga,e,t)}renderDays(e,t,i,s,n){const o=[],r=n?new Date(+e):this.getDate(new Date,this.timezone);let l,a=new Date(this.checkValue(e));const h=a.getMonth();this.titleUpdate(e,"days");const c=a;for(a=new Date(c.getFullYear(),c.getMonth(),0,c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds());a.getDay()!==this.firstDayOfWeek;)this.setStartDate(a,-864e5);for(let d=0;d<42;++d){const n=this.createElement("td",{className:Za}),c=this.createElement("span");if(d%7==0&&this.weekNumber){const e="FirstDay"===this.weekRule?6:"FirstFourDayWeek"===this.weekRule?3:0,t=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e);c.textContent=""+this.getWeek(t),n.appendChild(c),Vt([n],""+Ya),o.push(n)}l=new Date(+a),a=this.minMaxDate(a);const p={type:"dateTime",skeleton:"full"},u=this.globalize.parseDate(this.globalize.formatDate(a,p),p),m=this.dayCell(a),g=this.globalize.formatDate(a,{type:"date",skeleton:"full"}),f=this.createElement("span");f.textContent=this.globalize.formatDate(a,{format:"d",type:"date",skeleton:"yMd"});const b=this.min>a||this.max<a;b?(Vt([m],Ua),Vt([m],Ka)):f.setAttribute("title",""+g),h!==a.getMonth()&&Vt([m],Na),0!==a.getDay()&&6!==a.getDay()||Vt([m],"e-weekend"),m.appendChild(f),this.renderDayCellArgs={date:a,isDisabled:!1,element:m,isOutOfRange:b};const y=this.renderDayCellArgs;if(this.renderDayCellEvent(y),y.isDisabled){const e=new Date(this.checkValue(t)),n=new Date(this.checkValue(y.date));if(i){if(!qe(s)&&s.length>0)for(let t=0;t<s.length;t++)+new Date(this.globalize.formatDate(y.date,{type:"date",skeleton:"yMd"}))==+new Date(this.globalize.formatDate(s[t],{type:"date",skeleton:"yMd"}))&&(s.splice(t,1),t=-1)}else e&&+e==+n&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!m.classList.contains(Xa)&&(Vt([m],Ua),Vt([m],Ka),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));const v=m.classList.contains(Na),C=m.classList.contains(Ua);if(C||Bt.add(m,"click",this.clickHandler,this),!i||qe(s)||C)!C&&this.getDateVal(a,t)&&Vt([m],Xa);else{for(let i=0;i<s.length;i++){const n={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};this.globalize.formatDate(a,n)===this.globalize.formatDate(s[i],n)&&this.getDateVal(a,s[i])||this.getDateVal(a,t)?Vt([m],Xa):this.updateFocus(v,C,a,m,e)}s.length<=0&&this.updateFocus(v,C,a,m,e)}this.updateFocus(v,C,a,m,e),u.getFullYear()===r.getFullYear()&&u.getMonth()===r.getMonth()&&u.getDate()===r.getDate()&&Vt([m],Ja),o.push(this.renderDayCellArgs.element),a=new Date(+l),this.addDay(a,1,null,this.max,this.min)}return o}updateFocus(e,t,i,s,n){n.getDate()!==i.getDate()||e||t?(n>=this.max&&parseInt(s.id,0)===+this.max&&!e&&!t&&Vt([s],Qa),n<=this.min&&parseInt(s.id,0)===+this.min&&!e&&!t&&Vt([s],Qa)):Vt([s],Qa)}renderYears(e,t){this.removeTableHeadElement();const i=[],s=qe(t),n=new Date(this.checkValue(this.currentDate)),o=n.getMonth(),r=n.getFullYear(),l=n,a=l.getFullYear(),h=new Date(this.checkValue(this.min)).getFullYear(),c=new Date(this.checkValue(this.min)).getMonth(),d=new Date(this.checkValue(this.max)).getFullYear(),p=new Date(this.checkValue(this.max)).getMonth();l.setMonth(0),this.titleUpdate(this.currentDate,"months"),l.setDate(1);for(let u=0;u<12;++u){const e=this.dayCell(l),n=this.createElement("span"),m=t&&t.getMonth()===l.getMonth(),g=t&&t.getFullYear()===r&&m;n.textContent=this.toCapitalize(this.globalize.formatDate(l,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(a<h||u<c&&a===h)||this.max&&(a>d||u>p&&a>=d)?Vt([e],Ua):!s&&g?Vt([e],Xa):l.getMonth()===o&&this.currentDate.getMonth()===o&&Vt([e],Qa),l.setDate(1),l.setMonth(l.getMonth()+1),e.classList.contains(Ua)||Bt.add(e,"click",this.clickHandler,this),e.appendChild(n),i.push(e)}this.renderTemplate(i,4,Wa,e,t)}renderDecades(e,t){this.removeTableHeadElement();const i=[],s=new Date(this.checkValue(this.currentDate));s.setMonth(0),s.setDate(1);const n=s.getFullYear(),o=new Date(s.setFullYear(n-n%10)),r=new Date(s.setFullYear(n-n%10+9)),l=o.getFullYear(),a=r.getFullYear(),h=this.globalize.formatDate(o,{format:null,type:"dateTime",skeleton:"y"}),c=this.globalize.formatDate(r,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=h+" - "+c;const d=new Date(n-n%10-1,0,1).getFullYear();for(let p=0;p<12;++p){const e=d+p;s.setFullYear(e);const n=this.dayCell(s);Xt(n,{role:"gridcell"});const o=this.createElement("span");o.textContent=this.globalize.formatDate(s,{format:null,type:"dateTime",skeleton:"y"}),e<l||e>a?(Vt([n],"e-other-year"),qe(t)||s.getFullYear()!==t.getFullYear()||Vt([n],Xa),(e<new Date(this.checkValue(this.min)).getFullYear()||e>new Date(this.checkValue(this.max)).getFullYear())&&Vt([n],Ua)):e<new Date(this.checkValue(this.min)).getFullYear()||e>new Date(this.checkValue(this.max)).getFullYear()?Vt([n],Ua):qe(t)||s.getFullYear()!==t.getFullYear()?s.getFullYear()!==this.currentDate.getFullYear()||n.classList.contains(Ua)||Vt([n],Qa):Vt([n],Xa),n.classList.contains(Ua)||Bt.add(n,"click",this.clickHandler,this),n.appendChild(o),i.push(n)}this.renderTemplate(i,4,"e-decade",e,t)}dayCell(e){const t={skeleton:"full",type:"dateTime",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},i=this.globalize.parseDate(this.globalize.formatDate(e,t),t).valueOf(),s={className:Za,attrs:{id:""+We(""+i),"aria-selected":"false",role:"gridcell"}};return this.createElement("td",s)}firstDay(e){const t="Decade"!==this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+Na):this.tableBodyElement.querySelectorAll("td:not(.e-other-year");if(t.length)for(let i=0;i<t.length;i++)if(!t[i].classList.contains(Ua)){e=new Date(parseInt(t[i].id,0));break}return e}lastDay(e,t){const i=new Date(e.getFullYear(),e.getMonth()+1,0);if(2!==t){const t=Math.abs(i.getTimezoneOffset()-this.firstDay(e).getTimezoneOffset());return t&&i.setHours(this.firstDay(e).getHours()+t/60),this.findLastDay(i)}return this.findLastDay(this.firstDay(i))}checkDateValue(e){return!qe(e)&&e instanceof Date&&!isNaN(+e)?e:null}findLastDay(e){const t="Decade"===this.currentView()?this.tableBodyElement.querySelectorAll("td:not(.e-other-year"):this.tableBodyElement.querySelectorAll("td:not(."+Na);if(t.length)for(let i=t.length-1;i>=0;i--)if(!t[i].classList.contains(Ua)){e=new Date(parseInt(t[i].id,0));break}return e}removeTableHeadElement(){"calendar"===this.getModuleName()?qe(this.element.querySelectorAll(".e-content table thead")[0])||Kt(this.tableHeadElement):qe(this.calendarElement.querySelectorAll(".e-content table thead")[0])||Kt(this.tableHeadElement)}renderTemplate(e,t,i,s,n){const o=this.getViewNumber(this.currentView());let r;this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),qt([this.contentElement,this.headerElement],[Ga,_a,Wa]),Vt([this.contentElement,this.headerElement],[i]);let l=t,a=0;for(let h=0;h<e.length/t;++h){for(r=this.createElement("tr",{attrs:{role:"row"}}),a=0+a;a<l;a++)e[a].classList.contains("e-week-number")||qe(e[a].children[0])||(Vt([e[a].children[0]],["e-day"]),Ri(e[a].children[0],{duration:600,isCenterRipple:!0})),r.appendChild(e[a]),this.weekNumber&&7===a&&e[7].classList.contains(Na)&&Vt([r],$a),!this.weekNumber&&6===a&&e[6].classList.contains(Na)&&Vt([r],$a),this.weekNumber?41===a&&e[41].classList.contains(Na)&&Vt([r],$a):35===a&&e[35].classList.contains(Na)&&Vt([r],$a);l+=t,a+=0,this.tableBodyElement.appendChild(r)}this.table.querySelector("tbody").className=this.effect,"Gregorian"===this.calendarMode?this.iconHandler():this.islamicModule.islamicIconHandler(),(o!==this.getViewNumber(this.currentView())||0===o&&o!==this.getViewNumber(this.currentView()))&&this.navigateHandler(s),this.setAriaActiveDescendant()}clickHandler(e,t){this.clickEventEmitter(e);const i=e.currentTarget,s=this.getViewNumber(this.currentView());i.classList.contains(Na)?this.contentClick(e,0,null,t):s===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)||2===s?this.contentClick(e,1,null,t):i.classList.contains(Na)||0!==s?this.contentClick(e,0,i,t):this.selectDate(e,this.getIdValue(e,null),null),"calendar"===this.getModuleName()&&this.table.focus()}clickEventEmitter(e){e.preventDefault()}contentClick(e,t,i,s){const n=this.getViewNumber(this.currentView()),o=this.getIdValue(e,i);switch(t){case 0:n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(Kt(this.tableBodyElement),this.currentDate=o,this.effect=eh,this.renderMonths(e)):("Gregorian"===this.calendarMode?(this.currentDate.setMonth(o.getMonth()),o.getMonth()>0&&this.currentDate.getMonth()!==o.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(o.getFullYear())):this.currentDate=o,this.effect=eh,Kt(this.tableBodyElement),this.renderMonths(e));break;case 1:if(n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(e,o,null);else{if("Gregorian"===this.calendarMode)this.currentDate.setFullYear(o.getFullYear());else{const e=this.islamicModule.getIslamicDate(o);this.currentDate=this.islamicModule.toGregorian(e.year,e.month,1)}this.effect=eh,Kt(this.tableBodyElement),this.renderYears(e)}}}switchView(e,t,i,s){switch(e){case 0:Kt(this.tableBodyElement),this.renderMonths(t,null,s),i&&!qe(this.tableBodyElement.querySelectorAll("."+Qa)[0])&&this.tableBodyElement.querySelectorAll("."+Qa)[0].classList.remove(Qa);break;case 1:Kt(this.tableBodyElement),this.renderYears(t);break;case 2:Kt(this.tableBodyElement),this.renderDecades(t)}}getModuleName(){return"calendar"}requiredModules(){const e=[];return this&&e.push({args:[this],member:"islamic"}),e}getPersistData(){return this.addOnPersist(["value"])}onPropertyChanged(e,t,i,s){this.effect="";for(const n of Object.keys(e))switch(n){case"enableRtl":e.enableRtl?"calendar"===this.getModuleName()?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):"calendar"===this.getModuleName()?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),this.setProperties("min"===n?{min:this.checkDateValue(new Date(this.checkValue(e.min)))}:{max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.setProperties({start:this.currentView()},!0),this.tableBodyElement&&Kt(this.tableBodyElement),this.minMaxUpdate(),i&&this.validateValues(i,s),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(Kt(this.todayElement),Kt(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(qt([this.todayElement],Ua),Kt(this.todayElement),Kt(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":case"weekRule":this.checkView(),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody());break;case"locale":this.globalize=new St(this.locale),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody()),this.l10.setLocale(this.locale),this.updateFooter();break;case"showTodayButton":e.showTodayButton?this.createContentFooter():qe(this.todayElement)||qe(this.footer)||(Kt(this.todayElement),Kt(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:e.showTodayButton},!0)}}validateValues(e,t){if(e&&!qe(t)&&t.length>0){const e=this.copyValues(t);for(let t=0;t<e.length;t++){const i="Gregorian"===this.calendarMode?"gregorian":"islamic";let s;s=this.globalize.formatDate(e[t],"Gregorian"===this.calendarMode?{type:"date",skeleton:"yMd"}:{type:"dateTime",skeleton:"full",calendar:"islamic"});const n=this.globalize.formatDate(this.min,{type:"date",skeleton:"yMd",calendar:i}),o=this.globalize.formatDate(this.max,{type:"date",skeleton:"yMd",calendar:i});(+new Date(s)<+new Date(n)||+new Date(s)>+new Date(o))&&(e.splice(t,1),t=-1)}this.setProperties({values:e},!0)}}setValueUpdate(){qe(this.tableBodyElement)||(Kt(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())}copyValues(e){const t=[];if(!qe(e)&&e.length>0)for(let i=0;i<e.length;i++)t.push(new Date(+e[i]));return t}titleUpdate(e,t){const i=new St(this.locale);let s,n;const o="Gregorian"===this.calendarMode?"gregorian":"islamic";switch("Gregorian"===this.calendarMode?(s=i.formatDate(e,{type:"dateTime",skeleton:"yMMMM",calendar:o}),n=i.formatDate(e,{format:null,type:"dateTime",skeleton:"y",calendar:o})):(s=i.formatDate(e,{type:"dateTime",format:"MMMM y",calendar:o}),n=i.formatDate(e,{type:"dateTime",format:"y",calendar:o})),t){case"days":this.headerTitleElement.textContent=this.toCapitalize(s);break;case"months":this.headerTitleElement.textContent=n}}setActiveDescendant(){let e;const t=this.tableBodyElement.querySelector("tr td.e-focused-date"),i=this.tableBodyElement.querySelector("tr td.e-selected"),s="Gregorian"===this.calendarMode?"gregorian":"islamic";let n;const o=this.currentView();return n=this.globalize.formatDate(this.currentDate,"Month"===o?{type:"date",skeleton:"full",calendar:s}:"Year"===o?"islamic"!==s?{type:"date",skeleton:"yMMMM",calendar:s}:{type:"date",skeleton:"GyMMM",calendar:s}:{format:null,type:"date",skeleton:"y",calendar:s}),(i||t)&&(qe(i)||i.setAttribute("aria-selected","true"),(t||i).setAttribute("aria-label",n),e=(t||i).getAttribute("id")),e}iconHandler(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}}destroy(){("calendar"===this.getModuleName()&&this.element||this.calendarElement&&this.element)&&qt([this.element],[Va]),"calendar"===this.getModuleName()&&this.element&&(Bt.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&Bt.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),qe(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element&&(this.element.innerHTML=""),super.destroy()}title(e){let t=this.getViewNumber(this.currentView());this.effect=eh,this.switchView(++t,e)}getViewNumber(e){return"Month"===e?0:"Year"===e?1:2}navigateTitle(e){e.preventDefault(),this.title(e),"calendar"===this.getModuleName()&&this.table.focus()}previous(){this.effect="";const e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(e)}}navigatePrevious(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()}next(){this.effect="";const e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(e)}}navigateNext(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()}navigateTo(e,t,i){+t>=+this.min&&+t<=+this.max&&(this.currentDate=t),+t<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+t>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(e)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(e))&&(e=this.depth),this.switchView(this.getViewNumber(e),null,null,i)}currentView(){return this.contentElement.classList.contains(Wa)?"Year":this.contentElement.classList.contains(_a)?"Decade":"Month"}getDateVal(e,t){return!qe(t)&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}getCultureObjects(e,t){const i=".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),s=".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase();return Pe("Gregorian"===this.calendarMode?"main."+this.locale+i:"main."+this.locale+s,e)}getWeek(e){const t=new Date(this.checkValue(e)).valueOf(),i=new Date(e.getFullYear(),0,1).valueOf();return Math.ceil((t-i+ih)/ih/7)}setStartDate(e,t){const i=e.getTimezoneOffset(),s=new Date(e.getTime()+t),n=s.getTimezoneOffset()-i;e.setTime(s.getTime()+6e4*n)}addMonths(e,t){if("Gregorian"===this.calendarMode){const i=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{const i=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(i.year,i.month+t,1)}}addYears(e,t){if("Gregorian"===this.calendarMode){const i=e.getDate();e.setDate(1),e.setFullYear(e.getFullYear()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{const i=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(i.year+t,i.month,1)}}getIdValue(e,t){let i;i=e?e.currentTarget:t;const s={type:"dateTime",skeleton:"full",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},n=this.globalize.formatDate(new Date(parseInt(""+i.getAttribute("id"),0)),s),o=this.globalize.parseDate(n,s),r=o.valueOf()-o.valueOf()%1e3;return new Date(r)}adjustLongHeaderSize(){qt([this.element],th),"Wide"===this.dayHeaderFormat&&Vt(["calendar"===this.getModuleName()?this.element:this.calendarElement],th)}selectDate(e,t,i,s,n){const o=i||e.currentTarget;if(this.isDateSelected=!1,"Decade"===this.currentView())this.setDateDecade(this.currentDate,t.getFullYear());else if("Year"===this.currentView())this.setDateYear(this.currentDate,t);else{if(s&&!this.checkPresentDate(t,n)){const e=this.copyValues(n);!qe(n)&&e.length>0?(e.push(new Date(this.checkValue(t))),this.setProperties({values:e},!0),this.setProperties({value:n[n.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(t))]},!0)}else this.setProperties({value:new Date(this.checkValue(t))},!0);this.currentDate=new Date(this.checkValue(t))}let r=Zt(o,".e-calendar");if(qe(r)&&(r=this.tableBodyElement),s||qe(r.querySelector(".e-selected"))||qt([r.querySelector(".e-selected")],Xa),s||qe(r.querySelector("."+Qa))||qt([r.querySelector("."+Qa)],Qa),s){const e=this.copyValues(n),i=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td"));for(let t=0;t<i.length;t++){const e=r.querySelectorAll("td."+Qa)[0],s=r.querySelectorAll("td.e-selected")[0];i[t]===e&&qt([i[t]],Qa),i[t]!==s||this.checkPresentDate(new Date(parseInt(s.getAttribute("id").split("_")[0],10)),n)||qt([i[t]],Xa)}if(o.classList.contains(Xa)){qt([o],Xa);for(let i=0;i<e.length;i++){const s={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};if(this.globalize.formatDate(t,s)===this.globalize.formatDate(e[i],s)){const t=e.indexOf(e[i]);e.splice(t,1),Vt([o],Qa)}}this.setProperties({values:e},!0)}else Vt([o],Xa)}else Vt([o],Xa);this.isDateSelected=!0}checkPresentDate(e,t){let i=!1;if(!qe(t))for(let s=0;s<t.length;s++){const n="Gregorian"===this.calendarMode?"gregorian":"islamic";this.globalize.formatDate(e,{format:null,type:"date",skeleton:"short",calendar:n})===this.globalize.formatDate(t[s],{format:null,type:"date",skeleton:"short",calendar:n})&&(i=!0)}return i}setAriaActiveDescendant(){Xt(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})}previousIconHandler(e){e?(Bt.remove(this.previousIcon,"click",this.navigatePreviousHandler),Vt([this.previousIcon],"e-disabled"),Vt([this.previousIcon],""+Ka),this.previousIcon.setAttribute("aria-disabled","true")):(Bt.add(this.previousIcon,"click",this.navigatePreviousHandler),qt([this.previousIcon],"e-disabled"),qt([this.previousIcon],""+Ka),this.previousIcon.setAttribute("aria-disabled","false"))}renderDayCellEvent(e){Ve(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)}navigatedEvent(e){Ve(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)}triggerNavigate(e){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(e)}nextIconHandler(e){e?(Bt.remove(this.nextIcon,"click",this.navigateNextHandler),Vt([this.nextIcon],Ua),Vt([this.nextIcon],Ka),this.nextIcon.setAttribute("aria-disabled","true")):(Bt.add(this.nextIcon,"click",this.navigateNextHandler),qt([this.nextIcon],Ua),qt([this.nextIcon],Ka),this.nextIcon.setAttribute("aria-disabled","false"))}compare(e,t,i){let s,n,o=t.getFullYear();return s=o,n=0,i&&(o-=o%i,s=o-o%i+i-1),e.getFullYear()>s?n=1:e.getFullYear()<o&&(n=-1),n}isMinMaxRange(e){return+e>=+this.min&&+e<=+this.max}isMonthYearRange(e){if("Gregorian"===this.calendarMode)return e.getMonth()>=this.min.getMonth()&&e.getFullYear()>=this.min.getFullYear()&&e.getMonth()<=this.max.getMonth()&&e.getFullYear()<=this.max.getFullYear();{const t=this.islamicModule.getIslamicDate(e);return t.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&t.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&t.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&t.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year}}compareYear(e,t){return this.compare(e,t,0)}compareDecade(e,t){return this.compare(e,t,10)}shiftArray(e,t){return e.slice(t).concat(e.slice(0,t))}addDay(e,t,i,s,n){let o=t;const r=new Date(+e);if(!qe(this.tableBodyElement)&&!qe(i)){for(;this.findNextTD(new Date(+e),o,s,n);)o+=t;const i=new Date(r.setDate(r.getDate()+o));o=+i>+s||+i<+n?o===t?t-t:t:o}e.setDate(e.getDate()+o)}findNextTD(e,t,i,s){const n=new Date(e.setDate(e.getDate()+t));let o=[],r=!1;if((!qe(n)&&n.getMonth())===(!qe(this.currentDate)&&this.currentDate.getMonth())){let e;e="Gregorian"===this.calendarMode?this.renderDays(n):this.islamicModule.islamicRenderDays(this.currentDate,n),o=e.filter(e=>e.classList.contains(Ua))}else o=this.tableBodyElement.querySelectorAll("td.e-disabled");if(+n<=+i&&+n>=+s&&o.length)for(let l=0;l<o.length&&(r=+n==+new Date(parseInt(o[l].id,0)),!r);l++);return r}getMaxDays(e){let t;const i=new Date(this.checkValue(e));t=28;const s=i.getMonth();for(;i.getMonth()===s;)++t,i.setDate(t);return t-1}setDateDecade(e,t){e.setFullYear(t),this.setProperties({value:new Date(this.checkValue(e))},!0)}setDateYear(e,t){e.setFullYear(t.getFullYear(),t.getMonth(),e.getDate()),t.getMonth()!==e.getMonth()&&(e.setDate(0),this.currentDate=new Date(this.checkValue(t))),this.setProperties({value:new Date(this.checkValue(e))},!0)}compareMonth(e,t){let i;return i=e.getFullYear()>t.getFullYear()?1:e.getFullYear()<t.getFullYear()?-1:e.getMonth()===t.getMonth()?0:e.getMonth()>t.getMonth()?1:-1,i}checkValue(e){return e instanceof Date?e.toUTCString():""+e}checkView(){"Decade"!==this.start&&"Year"!==this.start&&this.setProperties({start:"Month"},!0),"Decade"!==this.depth&&"Year"!==this.depth&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)}getDate(e,t){return t&&(e=new Date(e.toLocaleString("en-US",{timeZone:t}))),e}};return Ha([gi(new Date(1900,0,1))],e.prototype,"min",void 0),Ha([gi(!0)],e.prototype,"enabled",void 0),Ha([gi(null)],e.prototype,"cssClass",void 0),Ha([gi(new Date(2099,11,31))],e.prototype,"max",void 0),Ha([gi(null)],e.prototype,"firstDayOfWeek",void 0),Ha([gi("Gregorian")],e.prototype,"calendarMode",void 0),Ha([gi("Month")],e.prototype,"start",void 0),Ha([gi("Month")],e.prototype,"depth",void 0),Ha([gi(!1)],e.prototype,"weekNumber",void 0),Ha([gi("FirstDay")],e.prototype,"weekRule",void 0),Ha([gi(!0)],e.prototype,"showTodayButton",void 0),Ha([gi("Short")],e.prototype,"dayHeaderFormat",void 0),Ha([gi(!1)],e.prototype,"enablePersistence",void 0),Ha([gi(null)],e.prototype,"keyConfigs",void 0),Ha([gi(null)],e.prototype,"serverTimezoneOffset",void 0),Ha([yi()],e.prototype,"created",void 0),Ha([yi()],e.prototype,"destroyed",void 0),Ha([yi()],e.prototype,"navigated",void 0),Ha([yi()],e.prototype,"renderDayCell",void 0),e=Ha([vi],e),e})(),nh=(()=>{let e=class extends sh{constructor(e,t){super(e,t)}render(){if("Islamic"===this.calendarMode&&void 0===this.islamicModule&&Ue("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&"object"==typeof this.values&&!qe(this.values)&&this.values.length>0){const e=[],t=[];for(let i=0;i<this.values.length;i++)-1===e.indexOf(+this.values[i])&&(e.push(+this.values[i]),t.push(this.values[i]));this.setProperties({values:t},!0);for(let i=0;i<this.values.length;i++)if(!this.checkDateValue(this.values[i]))if("string"==typeof this.values[i]&&this.checkDateValue(new Date(this.checkValue(this.values[i])))){const e=new Date(this.checkValue(this.values[i]));this.values.splice(i,1),this.values.splice(i,0,e)}else this.values.splice(i,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),"calendar"===this.getModuleName()&&(this.setEnable(this.enabled),this.setClass(this.cssClass)),super.render(),"calendar"===this.getModuleName()){const e=Zt(this.element,"form");e&&Bt.add(e,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()}setEnable(e){e?qt([this.element],Ua):Vt([this.element],Ua)}setClass(e,t){qe(t)||(t=t.replace(/\s+/g," ").trim()),qe(e)||(e=e.replace(/\s+/g," ").trim()),qe(t)||""===t||qt([this.element],t.split(" ")),qe(e)||Vt([this.element],e.split(" "))}isDayLightSaving(){const e=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(t,e)}setTimeZone(e){if(!qe(this.serverTimezoneOffset)&&this.value){let t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*60*1e3)}}formResetHandler(){this.setProperties({value:null},!0)}validateDate(){"string"==typeof this.value&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),super.validateDate(this.value),!qe(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)}minMaxUpdate(){"calendar"===this.getModuleName()&&(!qe(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!qe(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),"calendar"===this.getModuleName()||qe(this.value)?super.minMaxUpdate(this.value):!qe(this.value)&&this.value<this.min&&this.min<=this.max?super.minMaxUpdate(this.min):!qe(this.value)&&this.value>this.max&&this.min<=this.max&&super.minMaxUpdate(this.max)}generateTodayVal(e){let t=new Date;return qe(this.timezone)||(t=super.getDate(t,this.timezone)),e&&qe(this.timezone)?(t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds()),t.setMilliseconds(e.getMilliseconds())):t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),t}todayButtonClick(e){if(this.showTodayButton){const t=this.generateTodayVal(this.value);if(this.setProperties({value:t},!0),this.isTodayClicked=!0,this.todayButtonEvent=e,this.isMultiSelection){const e=this.copyValues(this.values);super.checkPresentDate(t,this.values)||(e.push(t),this.setProperties({values:e}))}super.todayButtonClick(e,new Date(+this.value))}}keyActionHandle(e){super.keyActionHandle(e,this.value,this.isMultiSelection)}preRender(){this.changeHandler=e=>{this.triggerChange(e)},this.checkView(),super.preRender(this.value)}createContent(){this.previousDate=this.value,this.previousDateTime=this.value,super.createContent()}minMaxDate(e){return super.minMaxDate(e)}renderMonths(e,t,i){super.renderMonths(e,this.value,i)}renderDays(e,t,i,s,n){const o=super.renderDays(e,this.value,this.isMultiSelection,this.values,n);return this.isMultiSelection&&super.validateValues(this.isMultiSelection,this.values),o}renderYears(e){"Gregorian"===this.calendarMode?super.renderYears(e,this.value):this.islamicModule.islamicRenderYears(e,this.value)}renderDecades(e){"Gregorian"===this.calendarMode?super.renderDecades(e,this.value):this.islamicModule.islamicRenderDecade(e,this.value)}renderTemplate(e,t,i,s){"Gregorian"===this.calendarMode?super.renderTemplate(e,t,i,s,this.value):this.islamicModule.islamicRenderTemplate(e,t,i,s,this.value),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}clickHandler(e){const t=e.currentTarget;if(this.isPopupClicked=!0,t.classList.contains(Na))if(this.isMultiSelection){const t=this.copyValues(this.values);t.push(this.getIdValue(e,null)),this.setProperties({values:t},!0),this.setProperties({value:this.values[this.values.length-1]},!0)}else this.setProperties({value:this.getIdValue(e,null)},!0);const i=this.currentView();super.clickHandler(e,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!qe(this.tableBodyElement.querySelectorAll("."+Qa)[0])&&"Year"===i&&this.tableBodyElement.querySelectorAll("."+Qa)[0].classList.remove(Qa)}switchView(e,t,i,s){super.switchView(e,t,this.isMultiSelection,s)}getModuleName(){return super.getModuleName(),"calendar"}getPersistData(){return super.getPersistData(),this.addOnPersist(["value","values"])}onPropertyChanged(e,t){this.effect="",this.rangeValidation(this.min,this.max);for(const i of Object.keys(e))switch(i){case"value":this.isDateSelected&&("string"==typeof e.value?this.setProperties({value:new Date(this.checkValue(e.value))},!0):e.value=new Date(this.checkValue(e.value)),isNaN(+this.value)&&this.setProperties({value:t.value},!0),this.update());break;case"values":if(this.isDateSelected){if("string"==typeof e.values||"number"==typeof e.values)this.setProperties({values:null},!0);else{const t=this.copyValues(this.values);for(let e=0;e<t.length;e++){const i=t[e];this.checkDateValue(i)&&!super.checkPresentDate(i,t)&&t.push(i)}this.setProperties({values:t},!0),this.values.length>0&&this.setProperties({value:e.values[e.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:e.isMultiSelection},!0),this.update());break;case"enabled":this.setEnable(this.enabled);break;case"cssClass":"calendar"===this.getModuleName()&&this.setClass(e.cssClass,t.cssClass);break;default:super.onPropertyChanged(e,t,this.isMultiSelection,this.values)}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange}destroy(){if(super.destroy(),"calendar"===this.getModuleName()){const e=Zt(this.element,"form");e&&Bt.remove(e,"reset",this.formResetHandler.bind(this))}}navigateTo(e,t,i){this.minMaxUpdate(),super.navigateTo(e,t,i)}currentView(){return super.currentView()}addDate(e){if("string"!=typeof e&&"number"!=typeof e){let t=this.copyValues(this.values);if("object"==typeof e&&e.length>0){const i=e;for(let e=0;e<i.length;e++)this.checkDateValue(i[e])&&!super.checkPresentDate(i[e],t)&&(!qe(t)&&t.length>0?t.push(i[e]):t=[new Date(+i[e])])}else this.checkDateValue(e)&&!super.checkPresentDate(e,t)&&(!qe(t)&&t.length>0?t.push(e):t=[new Date(+e)]);this.setProperties({values:t},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,t),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}}removeDate(e){if("string"!=typeof e&&"number"!=typeof e&&!qe(this.values)&&this.values.length>0){const t=this.copyValues(this.values);if("object"==typeof e&&e.length>0){const i=e;for(let e=0;e<i.length;e++)for(let s=0;s<t.length;s++)+t[s]==+i[e]&&t.splice(s,1)}else for(let i=0;i<t.length;i++)+t[i]==+e&&t.splice(i,1);this.setProperties({values:t},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}}setTodayDate(e){const t=new Date(+e);this.setProperties({value:t},!0),super.todayButtonClick(null,t,!0)}update(){this.validateDate(),this.minMaxUpdate(),super.setValueUpdate()}selectDate(e,t,i){super.selectDate(e,t,i,this.isMultiSelection,this.values),this.isMultiSelection&&!qe(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(e)}changeEvent(e){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))}triggerChange(e){!qe(this.todayButtonEvent)&&this.isTodayClicked&&(e=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=e||null,this.changedArgs.isInteracted=!qe(e),qe(this.value)||this.setProperties({value:this.value},!0),this.isMultiSelection||+this.value===Number.NaN||+this.value==+this.previousDate&&(null!=this.previousDate||isNaN(+this.value))?qe(this.values)||this.previousValues===this.values.length||(this.changeEvent(e),this.previousValues=this.values.length):this.changeEvent(e)}};return Ha([gi(null)],e.prototype,"value",void 0),Ha([gi(null)],e.prototype,"values",void 0),Ha([gi(!1)],e.prototype,"isMultiSelection",void 0),Ha([yi()],e.prototype,"change",void 0),e=Ha([vi],e),e})();var oh=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const rh="e-datepicker",lh="e-popup-wrapper",ah="e-input-focus",hh="e-error",ch="e-active",dh="e-date-overflow",ph="e-selected",uh="e-non-edit",mh=["title","class","style"];let gh=(()=>{let e=class extends nh{constructor(e,t){super(e,t),this.previousElementValue="",this.isDateIconClicked=!1,this.isAltKeyPressed=!1,this.isInteracted=!0,this.invalidValueString=null,this.checkPreviousValue=null,this.maskedDateValue="",this.isAngular=!1,this.preventChange=!1,this.isIconClicked=!1,this.isDynamicValueChanged=!1,this.moduleName=this.getModuleName(),this.datepickerOptions=e}render(){this.initialize(),this.bindEvents(),this.renderComplete(),this.setTimeZone(this.serverTimezoneOffset)}setTimeZone(e){if(!qe(this.serverTimezoneOffset)&&this.value){let t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*60*1e3),this.updateInput()}}isDayLightSaving(){const e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,t)}setAllowEdit(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):Xt(this.inputElement,{readonly:""}),this.updateIconState()}updateIconState(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&qt([this.inputWrapper.container],[uh]):""===this.inputElement.value?qt([this.inputWrapper.container],[uh]):Vt([this.inputWrapper.container],[uh])}initialize(){this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.checkInvalidValue(this.value),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.updateInput(),!this.enableMask||this.value||!this.maskedDateValue||"Always"!=this.floatLabelType&&this.floatLabelType&&this.placeholder||this.updateInputValue(this.maskedDateValue),this.previousElementValue=this.inputElement.value,this.previousDate=qe(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value}createInput(){const e={"aria-live":"assertive","aria-atomic":"true","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"};if("datepicker"===this.getModuleName()){const e={placeholder:this.placeholder};this.globalize=new St(this.locale),this.l10n=new Qi("datepicker",e,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}let t=this.cssClass;qe(this.cssClass)||""===this.cssClass||(t=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=Jr.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,bindClearAction:!this.enableMask,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:t,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-date-icon e-icons"]},this.createElement),this.setWidth(this.width),this.inputElement.setAttribute("name",""!==this.inputElement.name?""+this.inputElement.getAttribute("name"):""+this.element.id),Xt(this.inputElement,e),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),Jr.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),Vt([this.inputWrapper.container],"e-date-wrapper")}updateInput(e=!1){let t;if(!this.value||this.isCalendar()||e||this.disabledDates(),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(super.validateDate(),this.minMaxUpdates(),super.minMaxUpdate()),!qe(this.value)){const e=this.value;let i;const s=qe(this.formatString)?this.dateTimeFormat:this.formatString;if("datetimepicker"===this.getModuleName()?i=this.globalize.formatDate(this.value,"Gregorian"===this.calendarMode?{format:s,type:"dateTime",skeleton:"yMd"}:{format:s,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(t="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},i=this.globalize.formatDate(this.value,t)),+e<=+this.max&&+e>=+this.min)this.updateInputValue(i);else{const t=+e>=+this.max||!+this.value||!+this.value||+e<=+this.min;!this.strictMode&&t&&this.updateInputValue(i)}}qe(this.value)&&this.strictMode&&(this.enableMask?(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})):this.updateInputValue("")),!this.strictMode&&qe(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()}minMaxUpdates(){!qe(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!qe(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})}checkStringValue(e){let t=null,i=null,s=null;if("datetimepicker"===this.getModuleName()){const e=new St(this.locale);"Gregorian"===this.calendarMode?(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},s={format:e.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},s={format:e.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else i="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return t=this.checkDateValue(this.globalize.parseDate(e,i)),qe(t)&&"datetimepicker"===this.getModuleName()&&(t=this.checkDateValue(this.globalize.parseDate(e,s))),t}checkInvalidValue(e){if(!(e instanceof Date||qe(e))){let t=null,i=e;"number"==typeof e&&(i=e.toString());let s=null,n=null;if("datetimepicker"===this.getModuleName()){const e=new St(this.locale);"Gregorian"===this.calendarMode?(s={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},n={format:e.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(s={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},n={format:e.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else s="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};let o=!1;if("string"!=typeof i)i=null,o=!0;else if("string"==typeof i&&(i=i.trim()),t=this.checkStringValue(i),!t){let e=null,s=null;e=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,s=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!e.test(i)&&!s.test(i)||/^[a-zA-Z0-9- ]*$/.test(i)||isNaN(+new Date(this.checkValue(i)))?o=!0:t=new Date(i)}o?(this.strictMode||(this.invalidValueString=i),this.setProperties({value:null},!0)):this.setProperties({value:t},!0)}}bindInputEvent(){qe(this.formatString)&&!this.enableMask||(this.enableMask||-1===this.formatString.indexOf("y")?Bt.add(this.inputElement,"input",this.inputHandler,this):Bt.remove(this.inputElement,"input",this.inputHandler))}bindEvents(){Bt.add(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler,this),Bt.add(this.inputElement,"mouseup",this.mouseUpHandler,this),Bt.add(this.inputElement,"focus",this.inputFocusHandler,this),Bt.add(this.inputElement,"blur",this.inputBlurHandler,this),this.enableMask&&Bt.add(this.inputElement,"keydown",this.keydownHandler,this),this.bindInputEvent(),Bt.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&Bt.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&Bt.add(this.formElement,"reset",this.resetFormHandler,this),this.defaultKeyConfigs=Ve(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new Xi(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})}keydownHandler(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Delete":!this.enableMask||this.popupObj||this.readonly||("Delete"!==e.code&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:e}))}}unBindEvents(){Bt.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler),Bt.remove(this.inputElement,"mouseup",this.mouseUpHandler),Bt.remove(this.inputElement,"focus",this.inputFocusHandler),Bt.remove(this.inputElement,"blur",this.inputBlurHandler),Bt.remove(this.inputElement,"change",this.inputChangeHandler),this.enableMask&&Bt.remove(this.inputElement,"keydown",this.keydownHandler),this.showClearButton&&this.inputWrapper.clearButton&&Bt.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&Bt.remove(this.formElement,"reset",this.resetFormHandler)}resetFormHandler(){if(this.enabled&&!this.inputElement.disabled){let e=this.inputElement.getAttribute("value");"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(e="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(e),this.errorClass())}}restoreValue(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=qe(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})}inputChangeHandler(e){this.enabled&&e.stopPropagation()}bindClearEvent(){this.showClearButton&&this.inputWrapper.clearButton&&Bt.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)}resetHandler(e){this.enabled&&(e.preventDefault(),this.clear(e))}mouseUpHandler(e){this.enableMask&&(e.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"}))}clear(e){this.setProperties({value:null},!0),this.enableMask||this.updateInputValue(""),this.trigger("cleared",{event:e}),this.invalidValueString="",this.updateInput(),this.popupUpdate(),this.changeEvent(e),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"})}preventEventBubbling(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")}updateInputValue(e){Jr.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)}dateIconHandler(e){this.enabled&&(this.isIconClicked=!0,zt.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),e.preventDefault(),this.readonly||(this.isCalendar()?this.hide(e):(this.isDateIconClicked=!0,this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus(),this.inputElement.focus(),Vt([this.inputWrapper.container],[ah]),Vt(this.inputWrapper.buttons,ch))),this.isIconClicked=!1)}updateHtmlAttributeToWrapper(){if(!qe(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))if(!qe(this.htmlAttributes[e])&&mh.indexOf(e)>-1)if("class"===e){const t=this.htmlAttributes[e].replace(/\s+/g," ").trim();""!==t&&Vt([this.inputWrapper.container],t.split(" "))}else if("style"===e){let t=this.inputWrapper.container.getAttribute(e);qe(t)?t=this.htmlAttributes[e]:";"===t.charAt(t.length-1)?t+=this.htmlAttributes[e]:t=t+";"+this.htmlAttributes[e],this.inputWrapper.container.setAttribute(e,t)}else this.inputWrapper.container.setAttribute(e,this.htmlAttributes[e])}updateHtmlAttributeToElement(){if(!qe(this.htmlAttributes))for(const e of Object.keys(this.htmlAttributes))mh.indexOf(e)<0&&this.inputElement.setAttribute(e,this.htmlAttributes[e])}updateCssClass(e,t){qe(t)||(t=t.replace(/\s+/g," ").trim()),qe(e)||(e=e.replace(/\s+/g," ").trim()),Jr.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&Jr.setCssClass(e,[this.popupWrapper],t)}calendarKeyActionHandle(e){switch(e.action){case"escape":this.isCalendar()?this.hide(e):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value==+this.currentDate||this.isCalendar()||this.inputWrapper.container.children[this.index].focus():this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus();break;case"tab":this.hide(e)}}inputFocusHandler(){if(!this.enabled)return;this.enableMask&&!this.inputElement.value&&this.placeholder&&(!this.maskedDateValue||this.value||"Auto"!=this.floatLabelType&&"Never"!=this.floatLabelType&&!this.placeholder||(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length));const e={model:this};this.isDateIconClicked=!1,this.trigger("focus",e),this.updateIconState(),this.openOnFocus&&!this.isIconClicked&&this.show()}inputHandler(){this.isPopupClicked=!1,this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})}inputBlurHandler(e){this.enabled&&(this.strictModeUpdate(),""===this.inputElement.value&&qe(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.enableMask&&this.maskedDateValue&&this.placeholder&&"Always"!==this.floatLabelType&&(this.inputElement.value!=this.maskedDateValue||this.value||"Auto"!=this.floatLabelType&&"Never"!=this.floatLabelType&&!this.placeholder||this.updateInputValue("")),this.errorClass(),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),"datepicker"===this.getModuleName()&&this.trigger("blur",{model:this}),this.isCalendar()&&(this.defaultKeyConfigs=Ve(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new Xi(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1)}documentHandler(e){!qe(this.popupObj)&&(this.inputWrapper.container.contains(e.target)||this.popupObj.element&&this.popupObj.element.contains(e.target))&&"touchstart"!==e.type&&e.preventDefault();const t=e.target;Zt(t,".e-datepicker.e-popup-wrapper")||Zt(t,".e-input-group")===this.inputWrapper.container||t.classList.contains("e-day")?Zt(t,".e-datepicker.e-popup-wrapper")&&(t.classList.contains("e-day")&&!qe(e.target.parentElement)&&e.target.parentElement.classList.contains("e-selected")&&Zt(t,".e-content")&&Zt(t,".e-content").classList.contains("e-"+this.depth.toLowerCase())||Zt(t,".e-footer-container")&&t.classList.contains("e-today")&&t.classList.contains("e-btn")&&+new Date(+this.value)==+super.generateTodayVal(this.value))&&this.hide(e):(this.hide(e),this.focusOut())}inputKeyActionHandle(e){const t=this.currentView();switch(e.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(e),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.strictModeUpdate(),this.updateInput(),this.changeTrigger(e),"datepicker"===this.getModuleName()&&this.show(null,e);break;case"escape":this.hide(e);break;case"enter":this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),this.isCalendar()||document.activeElement!==this.inputElement||this.hide(e),this.isCalendar()&&(e.preventDefault(),e.stopPropagation());break;case"tab":case"shiftTab":let i=this.inputElement.selectionStart,s=this.inputElement.selectionEnd;if(this.enableMask&&!this.popupObj&&!this.readonly){let t=this.inputElement.value.length;(0==i&&s==t||s!==t&&"tab"==e.action||0!==i&&"shiftTab"==e.action)&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:e}),i=this.inputElement.selectionStart,s=this.inputElement.selectionEnd}this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),this.enableMask&&(this.inputElement.selectionStart=i,this.inputElement.selectionEnd=s),this.hide(e);break;default:this.defaultAction(e),"select"===e.action&&t===this.depth&&this.hide(e)}}defaultAction(e){this.previousDate=!qe(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(super.keyActionHandle(e),this.isCalendar()&&Xt(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))}popupUpdate(){if((qe(this.value)&&!qe(this.previousDate)||+this.value!=+this.previousDate)&&(this.popupObj&&this.popupObj.element.querySelectorAll(".e-selected").length>0&&qt(this.popupObj.element.querySelectorAll(".e-selected"),[ph]),!qe(this.value)&&+this.value>=+this.min&&+this.value<=+this.max)){const e=new Date(this.checkValue(this.value));super.navigateTo("Month",e)}}strictModeUpdate(){let e,t,i,s;e="datetimepicker"===this.getModuleName()?qe(this.formatString)?this.dateTimeFormat:this.formatString:qe(this.formatString)?this.formatString:this.formatString.replace("dd","d"),qe(e)||e.split("M").length-1<3&&(e=e.replace("MM","M")),"datetimepicker"===this.getModuleName()?i="Gregorian"===this.calendarMode?{format:qe(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:qe(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:(t="Gregorian"===this.calendarMode?{format:e,type:"dateTime",skeleton:"yMd"}:{format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},i=t),"string"==typeof this.inputElement.value&&(this.inputElement.value=this.inputElement.value.trim()),"datetimepicker"===this.getModuleName()?this.checkDateValue(this.globalize.parseDate(this.inputElement.value,i))?s=this.globalize.parseDate(this.inputElement.value,i):(t="Gregorian"===this.calendarMode?{type:"dateTime",skeleton:"yMd"}:{type:"dateTime",skeleton:"yMd",calendar:"islamic"},s=this.globalize.parseDate(this.inputElement.value,t)):(s=this.globalize.parseDate(this.inputElement.value,i),s=!qe(s)&&isNaN(+s)?null:s,!qe(this.formatString)&&""!==this.inputElement.value&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&-1===this.formatString.indexOf("y")&&s.setFullYear(this.value.getFullYear())),"datepicker"===this.getModuleName()&&this.value&&!isNaN(+this.value)&&s&&s.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&s?(this.updateInputValue(this.globalize.formatDate(s,i)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:s},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:s},!0),this.strictMode&&!s&&""===this.inputElement.value&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),qe(this.value)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)))}createCalendar(){this.popupWrapper=this.createElement("div",{className:"e-datepicker "+lh}),qe(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),zt.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className="e-datepicker e-date-modal",document.body.className+=" "+dh,this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new Hn(this.popupWrapper,{content:this.calendarElement,relateTo:zt.isDevice?document.body:this.inputWrapper.container,position:zt.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:zt.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:()=>{"datetimepicker"!==this.getModuleName()&&document.activeElement!==this.inputElement&&(this.defaultKeyConfigs=Ve(this.defaultKeyConfigs,this.keyConfigs),this.calendarElement.children[1].firstElementChild.focus(),this.calendarKeyboardModules=new Xi(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}),this.calendarKeyboardModules=new Xi(this.inputWrapper.container.children[this.index],{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}))},close:()=>{this.isDateIconClicked&&this.inputWrapper.container.children[this.index].focus(),this.value&&this.disabledDates(),this.popupObj&&this.popupObj.destroy(),this.resetCalendar(),Kt(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.preventArgs=null,this.calendarKeyboardModules=null,this.setAriaAttributes()},targetExitViewport:()=>{zt.isDevice||this.hide()}}),this.popupObj.element.className+=" "+this.cssClass,this.setAriaAttributes()}setAriaDisabled(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)}modelHeader(){let e;const t=this.createElement("div",{className:"e-model-header"}),i=this.createElement("h1",{className:"e-model-year"}),s=this.createElement("div"),n=this.createElement("span",{className:"e-model-day"}),o=this.createElement("span",{className:"e-model-month"});e="Gregorian"===this.calendarMode?{format:"y",skeleton:"dateTime"}:{format:"y",skeleton:"dateTime",calendar:"islamic"},i.textContent=""+this.globalize.formatDate(this.value||new Date,e),e="Gregorian"===this.calendarMode?{format:"E",skeleton:"dateTime"}:{format:"E",skeleton:"dateTime",calendar:"islamic"},n.textContent=this.globalize.formatDate(this.value||new Date,e)+", ",e="Gregorian"===this.calendarMode?{format:"MMM d",skeleton:"dateTime"}:{format:"MMM d",skeleton:"dateTime",calendar:"islamic"},o.textContent=""+this.globalize.formatDate(this.value||new Date,e),t.appendChild(i),s.appendChild(n),s.appendChild(o),t.appendChild(s),this.calendarElement.insertBefore(t,this.calendarElement.firstElementChild)}changeTrigger(e){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.isDynamicValueChanged&&this.isCalendar()&&this.popupUpdate(),this.changedArgs.value=this.value,this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!qe(e),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0)}navigatedEvent(){this.trigger("navigated",this.navigatedArgs)}changeEvent(e){(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.selectCalendar(e),this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.isDynamicValueChanged||this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.isDynamicValueChanged||this.hide(e),this.previousElementValue=this.inputElement.value,this.errorClass())}requiredModules(){const e=[];return this&&e.push({args:[this],member:"islamic"}),this.enableMask&&e.push({args:[this],member:"MaskedDateTime"}),e}selectCalendar(e){let t,i,s;i="datetimepicker"===this.getModuleName()&&qe(this.formatString)?this.dateTimeFormat:this.formatString,this.value&&("datetimepicker"===this.getModuleName()?(s="Gregorian"===this.calendarMode?{format:i,type:"dateTime",skeleton:"yMd"}:{format:i,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,s)):(s="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,s)),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})),qe(t)||(this.updateInputValue(t),this.enableMask&&this.notify("setMaskSelection",{module:"MaskedDateTime"}))}isCalendar(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+lh))}setWidth(e){this.inputWrapper.container.style.width="number"==typeof e?Ke(this.width):"string"==typeof e?e.match(/px|%|em/)?this.width:Ke(this.width):"100%"}show(e,t){if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){let e,i=!0;qe(this.value)||+this.value>=+this.min&&+this.value<=+this.max?e=this.value||null:(e=new Date(this.checkValue(this.value)),this.setProperties({value:null},!0)),this.isCalendar()||(super.render(),this.setProperties({value:e||null},!0),this.previousDate=e,this.createCalendar()),zt.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:()=>{i=!1},popup:this.popupObj,event:t||null,cancel:!1,appendTo:zt.isDevice?this.mobilePopupWrapper:document.body},this.trigger("open",this.preventArgs,e=>{this.preventArgs=e,i&&!this.preventArgs.cancel?(Vt(this.inputWrapper.buttons,ch),this.preventArgs.appendTo.appendChild(this.popupWrapper),this.popupObj.refreshPosition(this.inputElement),this.popupObj.show(new xi({name:"FadeIn",duration:zt.isDevice?0:300}),1e3===this.zIndex?this.element:null),super.setOverlayIndex(this.mobilePopupWrapper,this.popupObj.element,this.modal,zt.isDevice),this.setAriaAttributes()):(this.popupObj.destroy(),this.popupWrapper=this.popupObj=null),qe(this.inputElement)||""!==this.inputElement.value||!qe(this.tableBodyElement)&&this.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(Vt([this.tableBodyElement.querySelector("td.e-selected")],"e-focused-date"),qt(this.tableBodyElement.querySelectorAll("td.e-selected"),ph)),Bt.add(document,"mousedown touchstart",this.documentHandler,this)})}}hide(e){if(qe(this.popupWrapper))zt.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{let t=!0;this.preventArgs={preventDefault:()=>{t=!1},popup:this.popupObj,event:e||null,cancel:!1},qt(this.inputWrapper.buttons,ch),qt([document.body],dh);const i=this.preventArgs;this.isCalendar()?this.trigger("close",i,e=>{this.closeEventCallback(t,e)}):this.closeEventCallback(t,i)}}closeEventCallback(e,t){this.preventArgs=t,this.isCalendar()&&e&&!this.preventArgs.cancel&&(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy(),qt(this.inputWrapper.buttons,ch)),this.setAriaAttributes(),zt.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),zt.isDevice&&(qe(this.mobilePopupWrapper)||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null)),Bt.remove(document,"mousedown touchstart",this.documentHandler),zt.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()}focusIn(e){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),Vt([this.inputWrapper.container],[ah]))}focusOut(){document.activeElement===this.inputElement&&(qt([this.inputWrapper.container],[ah]),this.inputElement.blur())}currentView(){let e;return this.calendarElement&&(e=super.currentView()),e}navigateTo(e,t){this.calendarElement&&super.navigateTo(e,t)}destroy(){this.unBindEvents(),super.destroy(),this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&super.destroy(),this.inputElement&&(Jr.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-disabled":"true","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},this.inputElement),qe(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),Bt.remove(this.inputElement,"blur",this.inputBlurHandler),Bt.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&Kt(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.keyboardModule.destroy()),null===this.ngTag&&(this.inputElement&&(this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),qt([this.inputElement],["e-input"])),qt([this.element],[rh]),Kt(this.inputWrapper.container)),this.formElement&&Bt.remove(this.formElement,"reset",this.resetFormHandler)}ensureInputAttribute(){const e=[];for(let t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(let t=0;t<e.length;t++)qe(this.inputElementCopy.getAttribute(e[t]))?("value"===e[t].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[t])):("value"===e[t].toLowerCase()&&(this.inputElement.value=this.inputElementCopy.getAttribute(e[t])),this.inputElement.setAttribute(e[t],this.inputElementCopy.getAttribute(e[t])))}preRender(){this.inputElementCopy=this.element.cloneNode(!0),qt([this.inputElementCopy],[rh,"e-control","e-lib"]),this.inputElement=this.element,this.formElement=Zt(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.ngTag=null,"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?null!==this.ngTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):"datetimepicker"===this.getModuleName()?(this.element.id=We("ej2-datetimepicker"),null!==this.ngTag&&Xt(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=We("ej2-datepicker"),null!==this.ngTag&&Xt(this.inputElement,{id:this.element.id+"_input"})),null!==this.ngTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),super.preRender()}getDefaultKeyConfig(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs}validationAttribute(e,t){const i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");const s=["required","aria-required","form"];for(let n=0;n<s.length;n++){if(qe(e.getAttribute(s[n])))continue;const i=e.getAttribute(s[n]);t.setAttribute(s[n],i),e.removeAttribute(s[n])}}checkFormat(){const e=new St(this.locale);if(this.format)if("string"==typeof this.format)this.formatString=this.format;else if(""===this.format.skeleton||qe(this.format.skeleton))this.formatString="datetimepicker"===this.getModuleName()?this.dateTimeFormat:null;else{const t=this.format.skeleton;this.formatString="datetimepicker"===this.getModuleName()?e.getDatePattern({skeleton:t,type:"dateTime"}):e.getDatePattern({skeleton:t,type:"date"})}else this.formatString=null}checkHtmlAttributes(e){this.globalize=new St(this.locale),this.checkFormat(),this.checkView();const t=e?qe(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"];let i;i="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:qe(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:qe(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(const s of t)if(!qe(this.inputElement.getAttribute(s)))switch(s){case"disabled":if(qe(this.datepickerOptions)||void 0===this.datepickerOptions.enabled||e){const t="disabled"!==this.inputElement.getAttribute(s)&&""!==this.inputElement.getAttribute(s)&&"true"!==this.inputElement.getAttribute(s);this.setProperties({enabled:t},!e)}break;case"readonly":if(qe(this.datepickerOptions)||void 0===this.datepickerOptions.readonly||e){const t="readonly"===this.inputElement.getAttribute(s)||""===this.inputElement.getAttribute(s)||"true"===this.inputElement.getAttribute(s);this.setProperties({readonly:t},!e)}break;case"placeholder":(qe(this.datepickerOptions)||void 0===this.datepickerOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(s)},!e);break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(s));break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(s));break;case"value":if(qe(this.datepickerOptions)||void 0===this.datepickerOptions.value||e){const t=this.inputElement.getAttribute(s);this.setProperties(ze(s,this.globalize.parseDate(t,i),{}),!e)}break;case"min":if(+this.min==+new Date(1900,0,1)||e){const t=this.inputElement.getAttribute(s);this.setProperties(ze(s,this.globalize.parseDate(t),{}),!e)}break;case"max":if(+this.max==+new Date(2099,11,31)||e){const t=this.inputElement.getAttribute(s);this.setProperties(ze(s,this.globalize.parseDate(t),{}),!e)}break;case"type":"text"!==this.inputElement.getAttribute(s)&&this.inputElement.setAttribute("type","text")}}getModuleName(){return"datepicker"}disabledDates(){let e,t;const i=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value)),s=this.previousDate;this.minMaxUpdates(),super.render(),this.previousDate=s;const n='*[id^="/id"]'.replace("/id",""+(i&&+i));let o;this.strictMode||("string"==typeof this.value||"object"==typeof this.value&&+this.value!=+i)&&this.setProperties({value:i},!0),qe(this.calendarElement.querySelectorAll(n)[0])||this.calendarElement.querySelectorAll(n)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date((new Date).setHours(0,0,0,0)))),"datetimepicker"===this.getModuleName()?(t=this.globalize.formatDate(i,"Gregorian"===this.calendarMode?{format:qe(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:qe(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),o=t):(e="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},o=this.globalize.formatDate(i,e)),this.popupObj||(this.updateInputValue(o),this.enableMask&&(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})))}setAriaAttributes(){this.isCalendar()?(Jr.addAttributes({"aria-expanded":"true"},this.inputElement),Xt(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(Jr.addAttributes({"aria-expanded":"false"},this.inputElement),Xt(this.inputElement,{"aria-activedescendant":"null"}))}errorClass(){const e='*[id^="/id"]'.replace("/id",""+ +this.value),t=this.calendarElement&&this.calendarElement.querySelectorAll(e)[0]&&this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled");!qe(this.value)&&!(+new Date(+this.value).setMilliseconds(0)>=+this.min&&+new Date(+this.value).setMilliseconds(0)<=+this.max)||!this.strictMode&&""!==this.inputElement.value&&this.inputElement.value!==this.maskedDateValue&&qe(this.value)||t?(Vt([this.inputWrapper.container],hh),Xt(this.inputElement,{"aria-invalid":"true"})):(qt([this.inputWrapper.container],hh),Xt(this.inputElement,{"aria-invalid":"false"}))}onPropertyChanged(e,t){for(const i of Object.keys(e)){switch(i){case"value":this.isDynamicValueChanged=!0,this.isInteracted=!1,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,this.previousElementValue=this.inputElement.value,qe(this.value)&&(this.updateInputValue(""),this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.updateInput(!0),+this.previousDate!=+this.value&&this.changeTrigger(null),this.isInteracted=!0,this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"format":this.checkFormat(),this.bindInputEvent(),this.updateInput(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||this.updateInputValue(this.maskedDateValue));break;case"allowEdit":this.setAllowEdit();break;case"placeholder":Jr.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":Jr.setReadonly(this.readonly,this.inputElement);break;case"enabled":Jr.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new St(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),Jr.setPlaceholder(this.placeholder,this.inputElement),this.updateInput(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"enableRtl":Jr.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&super.onPropertyChanged(e,t);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"showClearButton":Jr.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,Jr.removeFloating(this.inputWrapper),Jr.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue),this.bindInputEvent()):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break;default:this.calendarElement&&this.isCalendar()&&super.onPropertyChanged(e,t)}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}}};return oh([gi(null)],e.prototype,"width",void 0),oh([gi(null)],e.prototype,"value",void 0),oh([gi(null)],e.prototype,"cssClass",void 0),oh([gi(!1)],e.prototype,"strictMode",void 0),oh([gi(null)],e.prototype,"format",void 0),oh([gi(!0)],e.prototype,"enabled",void 0),oh([gi({})],e.prototype,"htmlAttributes",void 0),oh([gi(null)],e.prototype,"values",void 0),oh([gi(!1)],e.prototype,"isMultiSelection",void 0),oh([gi(!0)],e.prototype,"showClearButton",void 0),oh([gi(!0)],e.prototype,"allowEdit",void 0),oh([gi(null)],e.prototype,"keyConfigs",void 0),oh([gi(!1)],e.prototype,"enablePersistence",void 0),oh([gi(1e3)],e.prototype,"zIndex",void 0),oh([gi(!1)],e.prototype,"readonly",void 0),oh([gi(null)],e.prototype,"placeholder",void 0),oh([gi("Never")],e.prototype,"floatLabelType",void 0),oh([gi(null)],e.prototype,"serverTimezoneOffset",void 0),oh([gi(!1)],e.prototype,"openOnFocus",void 0),oh([gi(!1)],e.prototype,"enableMask",void 0),oh([gi({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],e.prototype,"maskPlaceholder",void 0),oh([yi()],e.prototype,"open",void 0),oh([yi()],e.prototype,"cleared",void 0),oh([yi()],e.prototype,"close",void 0),oh([yi()],e.prototype,"blur",void 0),oh([yi()],e.prototype,"focus",void 0),oh([yi()],e.prototype,"created",void 0),oh([yi()],e.prototype,"destroyed",void 0),e=oh([vi],e),e})();var fh;(new Date).getDate(),(new Date).getMonth(),(new Date).getFullYear(),(fh||(fh={})).createListItems=function(e,t,i,s,n,o){let r;const l=6e4*o,a=[],h=[];r=+t.setMilliseconds(0);const c=+i.setMilliseconds(0);for(;c>=r;)h.push(r),a.push(s.formatDate(new Date(r),{format:n,type:"time"})),r+=l;return{collection:h,list:yl.a.createList(e,a,null,!0)}};var bh=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};const yh=(new Date).getDate(),vh=(new Date).getMonth(),Ch=(new Date).getFullYear(),wh=(new Date).getHours(),Sh=(new Date).getMinutes(),Eh=(new Date).getSeconds(),xh=(new Date).getMilliseconds(),Rh="e-datetimepicker",Dh="e-datetimepopup-wrapper",Th="e-popup",Mh="e-input-focus",Ih="250px",kh="e-icon-anim",Fh="e-disabled",Ah="e-error",Oh="e-active",Lh="e-hover",Ph="e-list-item",zh="e-time-overflow";let Bh=(()=>{let e=class extends gh{constructor(e,t){super(e,t),this.valueWithMinutes=null,this.scrollInvoked=!1,this.moduleName=this.getModuleName(),this.dateTimeOptions=e}focusHandler(){this.enabled&&Vt([this.inputWrapper.container],Mh)}focusIn(){super.focusIn()}focusOut(){document.activeElement===this.inputElement&&(this.inputElement.blur(),qt([this.inputWrapper.container],[Mh]))}blurHandler(e){if(!this.enabled)return;if(this.isTimePopupOpen()&&this.isPreventBlur)return void this.inputElement.focus();qt([this.inputWrapper.container],Mh);const t={model:this};this.isTimePopupOpen()&&this.hide(e),this.trigger("blur",t)}destroy(){this.popupObject&&this.popupObject.element.classList.contains(Th)&&(this.popupObject.destroy(),Kt(this.dateTimeWrapper),this.dateTimeWrapper=void 0,this.liCollections=this.timeCollections=[],qe(this.rippleFn)||this.rippleFn()),this.inputElement&&(Jr.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-invalid":"false","aria-haspopup":"true","aria-activedescendant":"null",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off"},this.inputElement),this.inputElement.removeAttribute("aria-placeholder")),this.isCalendar()&&(this.popupWrapper&&Kt(this.popupWrapper),this.popupObject=this.popupWrapper=null,this.keyboardHandler.destroy()),this.unBindInputEvents(),super.destroy()}render(){this.timekeyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.valueWithMinutes=null,this.previousDateTime=null,this.isPreventBlur=!1,this.cloneElement=this.element.cloneNode(!0),this.dateTimeFormat=this.cldrDateTimeFormat(),this.initValue=this.value,super.updateHtmlAttributeToElement(),this.checkAttributes(!1),this.l10n=new Qi("datetimepicker",{placeholder:this.placeholder},this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),super.render(),this.createInputElement(),super.updateHtmlAttributeToWrapper(),this.bindInputEvents(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.setValue(),!this.enableMask||this.value||!this.maskedDateValue||"Always"!=this.floatLabelType&&this.floatLabelType&&this.placeholder||Jr.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(this.scrollTo)))},!0),this.previousDateTime=this.value&&new Date(+this.value),"EJS-DATETIMEPICKER"===this.element.tagName&&(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.enabled||(this.inputElement.tabIndex=-1)),this.renderComplete()}setValue(){if(this.initValue=this.validateMinMaxRange(this.value),!this.strictMode&&this.isDateObject(this.initValue)){const e=this.validateMinMaxRange(this.initValue);Jr.setValue(this.getFormattedValue(e),this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e},!0)}else qe(this.value)&&(this.initValue=null,this.setProperties({value:null},!0));this.valueWithMinutes=this.value,super.updateInput()}validateMinMaxRange(e){let t=e;return this.isDateObject(e)?t=this.validateValue(e):+this.min>+this.max&&this.disablePopupButton(!0),this.checkValidState(t),t}checkValidState(e){this.isValidState=!0,this.strictMode||(+e>+this.max||+e<+this.min)&&(this.isValidState=!1),this.checkErrorState()}checkErrorState(){this.isValidState?qt([this.inputWrapper.container],Ah):Vt([this.inputWrapper.container],Ah),Xt(this.inputElement,{"aria-invalid":this.isValidState?"false":"true"})}validateValue(e){let t=e;return this.strictMode?+this.min>+this.max?(this.disablePopupButton(!0),t=this.max):+e<+this.min?t=this.min:+e>+this.max&&(t=this.max):+this.min>+this.max&&(this.disablePopupButton(!0),t=e),t}disablePopupButton(e){e?(Vt([this.inputWrapper.buttons[0],this.timeIcon],Fh),this.hide()):qt([this.inputWrapper.buttons[0],this.timeIcon],Fh)}getFormattedValue(e){let t;return qe(e)?null:(t="Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd"}:{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd",calendar:"islamic"},this.globalize.formatDate(e,t))}isDateObject(e){return!qe(e)&&!isNaN(+e)}createInputElement(){qt([this.inputElement],"e-datepicker"),qt([this.inputWrapper.container],"e-date-wrapper"),Vt([this.inputWrapper.container],"e-datetime-wrapper"),Vt([this.inputElement],Rh),this.renderTimeIcon()}renderTimeIcon(){this.timeIcon=Jr.appendSpan("e-input-group-icon e-time-icon e-icons",this.inputWrapper.container)}bindInputEvents(){Bt.add(this.timeIcon,"mousedown",this.timeHandler,this),Bt.add(this.inputWrapper.buttons[0],"mousedown",this.dateHandler,this),Bt.add(this.inputElement,"blur",this.blurHandler,this),Bt.add(this.inputElement,"focus",this.focusHandler,this),this.defaultKeyConfigs=Ve(this.defaultKeyConfigs,this.keyConfigs),this.keyboardHandler=new Xi(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyAction.bind(this),keyConfigs:this.defaultKeyConfigs})}unBindInputEvents(){Bt.remove(this.timeIcon,"mousedown touchstart",this.timeHandler),Bt.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateHandler),this.inputElement&&(Bt.remove(this.inputElement,"blur",this.blurHandler),Bt.remove(this.inputElement,"focus",this.focusHandler)),this.keyboardHandler&&this.keyboardHandler.destroy()}cldrTimeFormat(){let e;return e=this.isNullOrEmpty(this.timeFormat)?"en"===this.locale||"en-US"===this.locale?Pe("timeFormats.short",xt()):this.getCultureTimeObject(yt,""+this.locale):this.timeFormat,e}cldrDateTimeFormat(){let e;const t=new St(this.locale).getDatePattern({skeleton:"yMd"});return e=this.isNullOrEmpty(this.formatString)?t+" "+this.getCldrFormat("time"):this.formatString,e}getCldrFormat(e){let t;return t="en"===this.locale||"en-US"===this.locale?Pe("timeFormats.short",xt()):this.getCultureTimeObject(yt,""+this.locale),t}isNullOrEmpty(e){return!!(qe(e)||"string"==typeof e&&""===e.trim())}getCultureTimeObject(e,t){return Pe("Gregorian"===this.calendarMode?"main."+this.locale+".dates.calendars.gregorian.timeFormats.short":"main."+this.locale+".dates.calendars.islamic.timeFormats.short",e)}timeHandler(e){this.enabled&&(this.isIconClicked=!0,zt.isDevice&&this.inputElement.setAttribute("readonly",""),e.currentTarget===this.timeIcon&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isDatePopupOpen()&&super.hide(e),this.isTimePopupOpen()?this.closePopup(e):(this.inputElement.focus(),this.popupCreation("time",e),Vt([this.inputWrapper.container],[Mh]))),this.isIconClicked=!1)}dateHandler(e){this.enabled&&(e.currentTarget===this.inputWrapper.buttons[0]&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isTimePopupOpen()&&this.closePopup(e),qe(this.popupWrapper)||this.popupCreation("date",e)))}show(e,t){this.enabled&&this.readonly||!this.enabled||("time"!==e||this.dateTimeWrapper?this.popupObj||(this.isTimePopupOpen()&&this.hide(t),super.show(),this.popupCreation("date",t)):(this.isDatePopupOpen()&&this.hide(t),this.popupCreation("time",t)))}toggle(e){this.isDatePopupOpen()?(super.hide(e),this.show("time",null)):this.isTimePopupOpen()?(this.hide(e),super.show(null,e),this.popupCreation("date",null)):this.show(null,e)}listCreation(){let e;e=this.globalize.parseDate(this.inputElement.value,"Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"datetime"}:{format:this.cldrDateTimeFormat(),type:"datetime",calendar:"islamic"});const t=qe(this.value)?""!==this.inputElement.value?e:new Date:this.value;this.valueWithMinutes=t,this.listWrapper=Nt("div",{className:"e-content",attrs:{tabindex:"0"}});const i=this.startTime(t),s=this.endTime(t),n=fh.createListItems(this.createElement,i,s,this.globalize,this.cldrTimeFormat(),this.step);this.timeCollections=n.collection,this.listTag=n.list,Xt(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),_t([n.list],this.listWrapper),this.wireTimeListEvents(),this.rippleFn=Ri(this.listWrapper,{duration:300,selector:".e-list-item"}),this.liCollections=this.listWrapper.querySelectorAll(".e-list-item")}popupCreation(e,t){zt.isDevice&&this.element.setAttribute("readonly","readonly"),"date"===e?!this.readonly&&this.popupWrapper&&(Vt([this.popupWrapper],Dh),Xt(this.popupWrapper,{id:this.element.id+"_datepopup"})):this.readonly||(this.dateTimeWrapper=Nt("div",{className:Rh+" "+Th,attrs:{id:this.element.id+"_timepopup",style:"visibility:hidden ; display:block"}}),qe(this.cssClass)||(this.dateTimeWrapper.className+=" "+this.cssClass),!qe(this.step)&&this.step>0&&(this.listCreation(),_t([this.listWrapper],this.dateTimeWrapper)),document.body.appendChild(this.dateTimeWrapper),this.addTimeSelection(),this.renderPopup(),this.setTimeScrollPosition(),this.openPopup(t),this.popupObject.refreshPosition(this.inputElement))}openPopup(e){this.preventArgs={cancel:!1,popup:this.popupObject,event:e||null},this.trigger("open",this.preventArgs,e=>{this.preventArgs=e,this.preventArgs.cancel||this.readonly||(this.popupObject.show(new xi({name:"FadeIn",duration:100}),1e3===this.zIndex?this.element:null),Vt([this.inputWrapper.container],[kh]),Xt(this.inputElement,{"aria-expanded":"true"}),Bt.add(document,"mousedown touchstart",this.documentClickHandler,this))})}documentClickHandler(e){const t=e.target;!qe(this.popupObject)&&(this.inputWrapper.container.contains(t)||this.popupObject.element&&this.popupObject.element.contains(t))&&"touchstart"!==e.type&&e.preventDefault(),Zt(t,'[id="'+(this.popupObject&&this.popupObject.element.id+'"]'))||t===this.inputElement||t===this.timeIcon||t===this.inputWrapper.container?t!==this.inputElement&&(zt.isDevice||(this.isPreventBlur=document.activeElement===this.inputElement&&(zt.isIE||"edge"===zt.info.name)&&t===this.popupObject.element)):this.isTimePopupOpen()&&(this.hide(e),this.focusOut())}isTimePopupOpen(){return!(!this.dateTimeWrapper||!this.dateTimeWrapper.classList.contains(""+Rh))}isDatePopupOpen(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+Dh))}renderPopup(){this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),zt.isDevice&&(this.timeModal=Nt("div"),this.timeModal.className=Rh+" e-time-modal",document.body.className+=" "+zh,this.timeModal.style.display="block",document.body.appendChild(this.timeModal)),this.popupObject=new Hn(this.dateTimeWrapper,{width:this.setPopupWidth(),zIndex:this.zIndex,targetType:"container",collision:zt.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},relateTo:zt.isDevice?document.body:this.inputWrapper.container,position:zt.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},enableRtl:this.enableRtl,offsetY:4,open:()=>{this.dateTimeWrapper.style.visibility="visible",Vt([this.timeIcon],Oh),zt.isDevice||(this.timekeyConfigure=Ve(this.timekeyConfigure,this.keyConfigs),this.inputEvent=new Xi(this.inputWrapper.container,{keyAction:this.timeKeyActionHandle.bind(this),keyConfigs:this.timekeyConfigure,eventName:"keydown"}))},close:()=>{qt([this.timeIcon],Oh),this.unWireTimeListEvents(),this.inputElement.setAttribute("aria-activedescendant","null"),Yt(this.popupObject.element),this.popupObject.destroy(),this.dateTimeWrapper.innerHTML="",this.listWrapper=this.dateTimeWrapper=void 0,this.inputEvent&&this.inputEvent.destroy()},targetExitViewport:()=>{zt.isDevice||this.hide()}}),this.popupObject.element.style.maxHeight=Ih}setDimension(e){return"number"==typeof e?Ke(e):"string"==typeof e?e:"100%"}setPopupWidth(){let e=this.setDimension(this.width);return e.indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px"),e}wireTimeListEvents(){Bt.add(this.listWrapper,"click",this.onMouseClick,this),zt.isDevice||(Bt.add(this.listWrapper,"mouseover",this.onMouseOver,this),Bt.add(this.listWrapper,"mouseout",this.onMouseLeave,this))}unWireTimeListEvents(){this.listWrapper&&(Bt.remove(this.listWrapper,"click",this.onMouseClick),Bt.remove(document,"mousedown touchstart",this.documentClickHandler),zt.isDevice||(Bt.add(this.listWrapper,"mouseover",this.onMouseOver,this),Bt.add(this.listWrapper,"mouseout",this.onMouseLeave,this)))}onMouseOver(e){const t=Zt(e.target,".e-list-item");this.setTimeHover(t,Lh)}onMouseLeave(){this.removeTimeHover(Lh)}setTimeHover(e,t){this.enabled&&this.isValidLI(e)&&!e.classList.contains(t)&&(this.removeTimeHover(t),Vt([e],t))}getPopupHeight(){const e=parseInt(Ih,10),t=this.dateTimeWrapper.getBoundingClientRect().height;return t>e?e:t}changeEvent(e){(this.value&&this.value.valueOf())!==(this.previousDateTime&&+this.previousDateTime.valueOf())&&(super.changeEvent(e),this.valueWithMinutes=this.value,this.setInputValue("date"),this.previousDateTime=this.value&&new Date(+this.value))}updateValue(e){this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs={value:this.value,event:e||null,isInteracted:!qe(e),element:this.element},this.addTimeSelection(),this.trigger("change",this.changedArgs),this.previousDateTime=this.value)}setTimeScrollPosition(){const e=this.selectedElement;qe(e)?this.dateTimeWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)}findScrollTop(e){const t=this.getPopupHeight(),i=e.nextElementSibling,s=i?i.offsetTop:e.offsetTop,n=e.getBoundingClientRect().height;this.dateTimeWrapper.scrollTop=s+e.offsetTop>t?i?s-(t/2+n/2):s:0}setScrollTo(){let e;const t=this.dateTimeWrapper.querySelectorAll(".e-list-item");if(t.length>=0){this.scrollInvoked=!0;const i=this.timeCollections[0],s=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();e=t[Math.round((s-i)/(6e4*this.step))]}else this.dateTimeWrapper.scrollTop=0;qe(e)?this.dateTimeWrapper.scrollTop=0:this.findScrollTop(e)}setInputValue(e){if("date"===e)this.inputElement.value=this.previousElementValue=this.getFormattedValue(this.getFullDateTime()),this.setProperties({value:this.getFullDateTime()},!0);else{const e=this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));Jr.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.previousElementValue=this.inputElement.value,this.setProperties({value:new Date(this.timeCollections[this.activeIndex])},!0),this.enableMask&&this.createMask()}this.updateIconState()}getFullDateTime(){let e=null;return e=this.isDateObject(this.valueWithMinutes)?this.combineDateTime(this.valueWithMinutes):this.previousDate,this.validateMinMaxRange(e)}createMask(){this.notify("createMask",{module:"MaskedDateTime"})}combineDateTime(e){if(this.isDateObject(e)){const t=this.previousDate.getDate(),i=this.previousDate.getMonth(),s=this.previousDate.getFullYear(),n=e.getHours(),o=e.getMinutes(),r=e.getSeconds();return new Date(s,i,t,n,o,r)}return this.previousDate}onMouseClick(e){const t=this.selectedElement=Zt(e.target,".e-list-item");t&&t.classList.contains(Ph)&&(this.timeValue=t.getAttribute("data-value"),this.hide(e)),this.setSelection(t,e)}setSelection(e,t){if(this.isValidLI(e)&&!e.classList.contains(Oh)){this.selectedElement=e;const i=Array.prototype.slice.call(this.liCollections).indexOf(e);this.activeIndex=i,this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),Vt([this.selectedElement],Oh),this.selectedElement.setAttribute("aria-selected","true"),this.updateValue(t)}}setTimeActiveClass(){const e=qe(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;if(!qe(e)){const t=e.querySelectorAll(".e-list-item");if(t.length)for(let e=0;e<t.length;e++)if(this.timeCollections[e]===+this.valueWithMinutes){t[e].setAttribute("aria-selected","true"),this.selectedElement=t[e],this.activeIndex=e,this.setTimeActiveDescendant();break}}}setTimeActiveDescendant(){qe(this.selectedElement)?Xt(this.inputElement,{"aria-activedescendant":"null"}):Xt(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")})}addTimeSelection(){this.selectedElement=null,this.removeTimeSelection(),this.setTimeActiveClass(),qe(this.selectedElement)||(Vt([this.selectedElement],Oh),this.selectedElement.setAttribute("aria-selected","true"))}removeTimeSelection(){if(this.removeTimeHover(Lh),!qe(this.dateTimeWrapper)){const e=this.dateTimeWrapper.querySelectorAll(".e-active");e.length&&(qt(e,Oh),e[0].removeAttribute("aria-selected"))}}removeTimeHover(e){const t=this.getTimeHoverItem(e);t&&t.length&&qt(t,e)}getTimeHoverItem(e){const t=qe(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;let i;return qe(t)||(i=t.querySelectorAll("."+e)),i}isValidLI(e){return e&&e.classList.contains(Ph)&&!e.classList.contains(Fh)}calculateStartEnd(e,t,i){const s=e.getDate(),n=e.getMonth(),o=e.getFullYear(),r=e.getHours(),l=e.getMinutes(),a=e.getSeconds(),h=e.getMilliseconds();return t?"starttime"===i?new Date(o,n,s,0,0,0):new Date(o,n,s,23,59,59):new Date(o,n,s,r,l,a,h)}startTime(e){let t,i;const s=this.min,n=null===e?new Date:e;return+n.getDate()==+s.getDate()&&+n.getMonth()==+s.getMonth()&&+n.getFullYear()==+s.getFullYear()||+new Date(n.getFullYear(),n.getMonth(),n.getDate())<=+new Date(s.getFullYear(),s.getMonth(),s.getDate())?(i=!1,t=this.min):+n<+this.max&&+n>+this.min?(i=!0,t=n):+n>=+this.max&&(i=!0,t=this.max),this.calculateStartEnd(t,i,"starttime")}endTime(e){let t,i;const s=this.max,n=null===e?new Date:e;return+n.getDate()==+s.getDate()&&+n.getMonth()==+s.getMonth()&&+n.getFullYear()==+s.getFullYear()||+new Date(n.getUTCFullYear(),n.getMonth(),n.getDate())>=+new Date(s.getFullYear(),s.getMonth(),s.getDate())?(i=!1,t=this.max):+n<+this.max&&+n>+this.min?(i=!0,t=n):+n<=+this.min&&(i=!0,t=this.min),this.calculateStartEnd(t,i,"endtime")}hide(e){if(this.popupObj||this.dateTimeWrapper){this.preventArgs={cancel:!1,popup:this.popupObj||this.popupObject,event:e||null};const t=this.preventArgs;qe(this.popupObj)?this.trigger("close",t,t=>{this.dateTimeCloseEventCallback(e,t)}):this.dateTimeCloseEventCallback(e,t)}else zt.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()}dateTimeCloseEventCallback(e,t){this.preventArgs=t,this.preventArgs.cancel||(this.isDatePopupOpen()?super.hide(e):this.isTimePopupOpen()&&(this.closePopup(e),qt([document.body],zh),zt.isDevice&&this.timeModal&&(this.timeModal.style.display="none",this.timeModal.outerHTML="",this.timeModal=null),this.setTimeActiveDescendant())),zt.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()}closePopup(e){this.isTimePopupOpen()&&this.popupObject&&(this.popupObject.hide(new xi({name:"FadeOut",duration:100,delay:0})),this.inputWrapper.container.classList.remove(kh),Xt(this.inputElement,{"aria-expanded":"false"}),Bt.remove(document,"mousedown touchstart",this.documentClickHandler))}preRender(){this.checkFormat(),this.dateTimeFormat=this.cldrDateTimeFormat(),super.preRender(),qt([this.inputElementCopy],[Rh])}getProperty(e,t){this.setProperties("min"===t?{min:this.validateValue(e.min)}:{max:this.validateValue(e.max)},!0)}checkAttributes(e){const t=e?qe(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["style","name","step","disabled","readonly","value","min","max","placeholder","type"];let i;for(const s of t)if(!qe(this.inputElement.getAttribute(s)))switch(s){case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(s));break;case"step":this.step=parseInt(this.inputElement.getAttribute(s),10);break;case"readonly":if(qe(this.dateTimeOptions)||void 0===this.dateTimeOptions.readonly||e){const t="disabled"===this.inputElement.getAttribute(s)||""===this.inputElement.getAttribute(s)||"true"===this.inputElement.getAttribute(s);this.setProperties({readonly:t},!e)}break;case"placeholder":(qe(this.dateTimeOptions)||void 0===this.dateTimeOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(s)},!e);break;case"min":(qe(this.dateTimeOptions)||void 0===this.dateTimeOptions.min||e)&&(i=new Date(this.inputElement.getAttribute(s)),this.isNullOrEmpty(i)||isNaN(+i)||this.setProperties({min:i},!e));break;case"disabled":if(qe(this.dateTimeOptions)||void 0===this.dateTimeOptions.enabled||e){const t="disabled"!==this.inputElement.getAttribute(s)&&"true"!==this.inputElement.getAttribute(s)&&""!==this.inputElement.getAttribute(s);this.setProperties({enabled:t},!e)}break;case"value":(qe(this.dateTimeOptions)||void 0===this.dateTimeOptions.value||e)&&(i=new Date(this.inputElement.getAttribute(s)),this.isNullOrEmpty(i)||isNaN(+i)||this.setProperties({value:i},!e));break;case"max":(qe(this.dateTimeOptions)||void 0===this.dateTimeOptions.max||e)&&(i=new Date(this.inputElement.getAttribute(s)),this.isNullOrEmpty(i)||isNaN(+i)||this.setProperties({max:i},!e))}}requiredModules(){const e=[];return this&&e.push({args:[this],member:"islamic"}),this.enableMask&&e.push(this.maskedDateModule()),e}maskedDateModule(){return{args:[this],member:"MaskedDateTime"}}getTimeActiveElement(){return qe(this.dateTimeWrapper)?null:this.dateTimeWrapper.querySelectorAll(".e-active")}createDateObj(e){return e instanceof Date?e:null}getDateObject(e){if(!this.isNullOrEmpty(e)){const t=this.createDateObj(e),i=this.valueWithMinutes,s=!qe(i);if(this.checkDateValue(t)){const e=s?i.getDate():yh,n=s?i.getMonth():vh,o=s?i.getFullYear():Ch,r=s?i.getHours():wh,l=s?i.getMinutes():Sh,a=s?i.getSeconds():Eh,h=s?i.getMilliseconds():xh;return this.scrollInvoked?(this.scrollInvoked=!1,new Date(o,n,e,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())):new Date(o,n,e,r,l,a,h)}}return null}findNextTimeElement(e){const t=this.inputElement.value,i=qe(this.valueWithMinutes)?this.createDateObj(t):this.getDateObject(this.valueWithMinutes);let s=null;const n=this.liCollections.length;if(!qe(this.activeIndex)||!qe(this.checkDateValue(i))){if("home"===e.action)s=+this.createDateObj(new Date(this.timeCollections[0])),this.activeIndex=0;else if("end"===e.action)s=+this.createDateObj(new Date(this.timeCollections[this.timeCollections.length-1])),this.activeIndex=this.timeCollections.length-1;else if("down"===e.action){for(let e=0;e<n;e++)if(+i<this.timeCollections[e]){s=+this.createDateObj(new Date(this.timeCollections[e])),this.activeIndex=e;break}}else for(let e=n-1;e>=0;e--)if(+i>this.timeCollections[e]){s=+this.createDateObj(new Date(this.timeCollections[e])),this.activeIndex=e;break}this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(qe(s)?null:new Date(s))}}setTimeValue(e,t){let i,s;const n=this.validateMinMaxRange(t),o=this.createDateObj(n);return this.getFormattedValue(o)!==(qe(this.value)?null:this.getFormattedValue(this.value))?(this.valueWithMinutes=qe(o)?null:o,s=new Date(+this.valueWithMinutes)):(this.strictMode&&(e=o),this.valueWithMinutes=this.checkDateValue(e),s=new Date(+this.valueWithMinutes)),i=this.globalize.formatDate(s,"Gregorian"===this.calendarMode?{format:qe(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd"}:{format:qe(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),!this.strictMode&&qe(s),Jr.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),s}timeElementValue(e){if(!qe(this.checkDateValue(e))&&!this.isNullOrEmpty(e)){const t=e instanceof Date?e:this.getDateObject(e);return this.setTimeValue(t,e)}return null}timeKeyHandler(e){if(qe(this.step)||this.step<=0)return;const t=this.timeCollections.length;if(qe(this.getTimeActiveElement())||0===this.getTimeActiveElement().length)this.liCollections.length>0&&(qe(this.value)&&qe(this.activeIndex)?(this.activeIndex=0,this.selectedElement=this.liCollections[0],this.timeElementValue(new Date(this.timeCollections[0]))):this.findNextTimeElement(e));else{let i;if(e.keyCode>=37&&e.keyCode<=40){let s=40===e.keyCode||39===e.keyCode?++this.activeIndex:--this.activeIndex;this.activeIndex=s=this.activeIndex===t?0:this.activeIndex,this.activeIndex=s=this.activeIndex<0?t-1:this.activeIndex,i=qe(this.timeCollections[s])?this.timeCollections[0]:this.timeCollections[s]}else"home"===e.action?(this.activeIndex=0,i=this.timeCollections[0]):"end"===e.action&&(this.activeIndex=t-1,i=this.timeCollections[t-1]);this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(new Date(i))}this.isNavigate=!0,this.setTimeHover(this.selectedElement,"e-navigation"),this.setTimeActiveDescendant(),!this.isTimePopupOpen()||null===this.selectedElement||e&&"click"===e.type||this.setTimeScrollPosition()}timeKeyActionHandle(e){if(this.enabled)switch("right"!==e.action&&"left"!==e.action&&"tab"!==e.action&&e.preventDefault(),e.action){case"up":case"down":case"home":case"end":this.timeKeyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs.value=this.value,this.addTimeSelection(),this.previousDateTime=this.value)):this.updateValue(e),this.hide(e),Vt([this.inputWrapper.container],Mh),this.isNavigate=!1,e.stopPropagation();break;case"escape":this.hide(e);break;default:this.isNavigate=!1}}inputKeyAction(e){switch(e.action){case"altDownArrow":this.strictModeUpdate(),this.updateInput(),this.toggle(e)}}onPropertyChanged(e,t){for(const i of Object.keys(e)){switch(i){case"value":this.isDynamicValueChanged=!0,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,e.value=this.validateValue(e.value),Jr.setValue(this.getFormattedValue(e.value),this.inputElement,this.floatLabelType,this.showClearButton),this.valueWithMinutes=e.value,this.setProperties({value:e.value},!0),this.popupObj&&this.popupUpdate(),this.previousDateTime=new Date(this.inputElement.value),this.updateInput(),this.changeTrigger(null),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.value&&this.notify("createMask",{module:"MaskedDateTime"});break;case"min":case"max":this.getProperty(e,i),this.updateInput();break;case"enableRtl":Jr.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"cssClass":qe(t.cssClass)||(t.cssClass=t.cssClass.replace(/\s+/g," ").trim()),qe(e.cssClass)||(e.cssClass=e.cssClass.replace(/\s+/g," ").trim()),Jr.setCssClass(e.cssClass,[this.inputWrapper.container],t.cssClass),this.dateTimeWrapper&&Jr.setCssClass(e.cssClass,[this.dateTimeWrapper],t.cssClass);break;case"locale":this.globalize=new St(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),Jr.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement),this.dateTimeFormat=this.cldrDateTimeFormat(),super.updateInput();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"format":this.setProperties({format:e.format},!0),this.checkFormat(),this.dateTimeFormat=this.formatString,this.setValue(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||Jr.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;case"placeholder":Jr.setPlaceholder(e.placeholder,this.inputElement),this.inputElement.setAttribute("aria-placeholder",e.placeholder);break;case"enabled":Jr.setEnabled(this.enabled,this.inputElement),this.enabled||(this.inputElement.tabIndex=-1);break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width);break;case"readonly":Jr.setReadonly(this.readonly,this.inputElement);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,Jr.removeFloating(this.inputWrapper),Jr.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;case"scrollTo":this.checkDateValue(new Date(this.checkValue(e.scrollTo)))?(this.dateTimeWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(e.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),Jr.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton)):this.inputElement.value===this.maskedDateValue&&(this.maskedDateValue="",Jr.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;default:super.onPropertyChanged(e,t)}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}}getModuleName(){return"datetimepicker"}restoreValue(){this.previousDateTime=this.previousDate,this.currentDate=this.value?this.value:new Date,this.valueWithMinutes=this.value,this.previousDate=this.value,this.previousElementValue=this.previousElementValue=qe(this.inputValueCopy)?"":this.getFormattedValue(this.inputValueCopy)}};return bh([gi(null)],e.prototype,"timeFormat",void 0),bh([gi(30)],e.prototype,"step",void 0),bh([gi(null)],e.prototype,"scrollTo",void 0),bh([gi(1e3)],e.prototype,"zIndex",void 0),bh([gi(null)],e.prototype,"value",void 0),bh([gi(null)],e.prototype,"keyConfigs",void 0),bh([gi({})],e.prototype,"htmlAttributes",void 0),bh([gi(!1)],e.prototype,"enablePersistence",void 0),bh([gi(!0)],e.prototype,"allowEdit",void 0),bh([gi(!1)],e.prototype,"isMultiSelection",void 0),bh([gi(null)],e.prototype,"values",void 0),bh([gi(!0)],e.prototype,"showClearButton",void 0),bh([gi(null)],e.prototype,"placeholder",void 0),bh([gi(!1)],e.prototype,"strictMode",void 0),bh([gi(null)],e.prototype,"serverTimezoneOffset",void 0),bh([gi(new Date(1900,0,1))],e.prototype,"min",void 0),bh([gi(new Date(2099,11,31))],e.prototype,"max",void 0),bh([gi(null)],e.prototype,"firstDayOfWeek",void 0),bh([gi("Gregorian")],e.prototype,"calendarMode",void 0),bh([gi("Month")],e.prototype,"start",void 0),bh([gi("Month")],e.prototype,"depth",void 0),bh([gi(!1)],e.prototype,"weekNumber",void 0),bh([gi(!0)],e.prototype,"showTodayButton",void 0),bh([gi("Short")],e.prototype,"dayHeaderFormat",void 0),bh([gi(!1)],e.prototype,"openOnFocus",void 0),bh([gi(!1)],e.prototype,"enableMask",void 0),bh([gi({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],e.prototype,"maskPlaceholder",void 0),bh([yi()],e.prototype,"open",void 0),bh([yi()],e.prototype,"close",void 0),bh([yi()],e.prototype,"cleared",void 0),bh([yi()],e.prototype,"blur",void 0),bh([yi()],e.prototype,"focus",void 0),bh([yi()],e.prototype,"created",void 0),bh([yi()],e.prototype,"destroyed",void 0),e=bh([vi],e),e})();i("UBVb"),i("GKtw");class Hh{constructor(e){this.intl=new St,qe(e)||(this.intl.culture=e)}getFormatFunction(e){return e.type?this.intl.getDateFormat(e):this.intl.getNumberFormat(e)}getParserFunction(e){return e.type?this.intl.getDateParser(e):this.intl.getNumberParser(e)}fromView(e,t,i){return"date"!==i&&"datetime"!==i&&"number"!==i||qe(t)?e:t(e)}toView(e,t){let i=e;return qe(t)||qe(e)||(i=t(e)),i}setCulture(e){qe(e)||function(e){vt=e,bt.notify("notifyExternalChange",{locale:vt})}(e)}}class Nh{constructor(e,t){this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=()=>this.editTemplateFn,this.getFilterTemplate=()=>this.filterTemplateFn,Ne(this,e),this.parent=t,"none"===this.type?this.type=null:this.type&&(this.type="string"==typeof this.type?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),qe(this.uid)&&(this.uid=Lu("grid-column"));const i=new Hh;if(e.format&&(e.format.skeleton||e.format.format&&"string"==typeof e.format.format)&&(this.setFormatter(i.getFormatFunction(Ve({},e.format))),this.setParser(i.getParserFunction(e.format))),this.toJSON=()=>{const e={},t=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],i=Object.keys(this);for(let s=0;s<i.length;s++)if("columns"===i[s]){e[i[s]]=[];for(let t=0;t<this[i[s]].length;t++)e[i[s]].push(this[i[s]][t].toJSON())}else t.indexOf(i[s])<0&&(e[i[s]]=this[i[s]]);return e},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some(e=>e.allowResizing))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=Ru(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=Ru(this.headerTemplate)),!qe(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=Ru(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=Ru(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=Ru(this.filterTemplate)),this.isForeignColumn()&&(qe(this.editType)||"dropdownedit"===this.editType||"defaultedit"===this.editType)&&(this.editType="dropdownedit",this.edit.params=Ve({dataSource:this.dataSource,query:new Gs.e,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){let e=this.sortComparer;this.sortComparer=function(t,i,s,n){if("string"==typeof e&&(e=em(e,window)),"Descending"===this.sortDirection){const e=t;t=i,i=e;const o=s;s=n,n=o}return e(t,i,s,n)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=(e,t)=>(e=em(this.foreignKeyValue,Qu(this,{},e)[0]),t=em(this.foreignKeyValue,Qu(this,{},t)[0]),"Descending"===this.sortDirection?Gs.b.fnDescending(e,t):Gs.b.fnAscending(e,t)))}getSortDirection(){return this.sortDirection}setSortDirection(e){this.sortDirection=e}getFreezeTableName(){return this.freezeTable}setProperties(e){const t=Object.keys(e);for(let i=0;i<t.length;i++)this[t[i]]=e[t[i]],this.parent&&this.parent.isReact&&"template"===t[i]&&this.parent.refreshReactColumnTemplateByUid(this.uid)}isForeignColumn(){return!(!this.dataSource||!this.foreignKeyValue)}getFormatter(){return this.formatFn}setFormatter(e){this.formatFn=e}getParser(){return this.parserFn}setParser(e){this.parserFn=e}getColumnTemplate(){return this.templateFn}getHeaderTemplate(){return this.headerTemplateFn}getFilterItemTemplate(){return this.fltrTemplateFn}getDomSetter(){return this.disableHtmlEncode?"textContent":"innerHTML"}}const Vh="load",qh="rowDataBound",jh="queryCellInfo",Wh="headerCellInfo",Gh="actionBegin",_h="actionComplete",Uh="actionFailure",Kh="dataBound",Yh="rowSelecting",Xh="rowSelected",Qh="rowDeselecting",$h="rowDeselected",Jh="cellSelecting",Zh="cellSelected",ec="cellDeselecting",tc="cellDeselected",ic="columnSelecting",sc="columnSelected",nc="beforePrint",oc="printComplete",rc="batchAdd",lc="batchCancel",ac="batchDelete",hc="beforeDataBound",cc="beforeOpenAdaptiveDialog",dc="filterchoicerequest",pc="initial-load",uc="initial-end",mc="data-ready",gc="content-ready",fc="ui-update",bc="on-empty",yc="inbound-model-changed",vc="model-changed",Cc="colgroup-refresh",wc="header-refreshed",Sc="searching-complete",Ec="group-aggregates",xc="refresh-footer-rendered",Rc="beforecellfocused",Dc="cellfocused",Tc="key-pressed",Mc="click",Ic="destroy",kc="column-visible-changed",Fc="scroll",Ac="column-width-changed",Oc="column-position-changed",Lc="rows-added",Pc="rows-removed",zc="datasource-modified",Bc="dblclick",Hc="toolbar-refresh",Nc="bulk-save",Vc="auto-col",qc="tooltip-destroy",jc="update-data",Wc="prevent-batch",Gc="dialog-destroy",_c="crud-Action",Uc="add-delete-Action",Kc="destroy-form",Yc="double-tap",Xc="freezerender",Qc="getForeignKeyData",$c="generateQuery",Jc="showEmptyGrid",Zc="foreignKeyData",ed="dataStateChange",td="dataSourceChanged",id="beforeFragAppend",sd="frozenHeight",nd="textWrapRefresh",od="recordAdded",rd="cancel-Begin",ld="editNextValCell",ad="hierarchyprint",hd="partial-refresh",cd="columns-prepared",dd="cbox-filter-complete",pd="filter-Prevent",ud="restore-Focus",md="detail-indentcell-info",gd="virtual-scroll-edit-success",fd="get-virtual-data",bd="infinite-scroll-handler",yd="infinite-edit-handler",vd="group-collapse",Cd="refreshResizeHandlers",wd="before-refresh-on-data-change",Sd="filter-dialog-close",Ed="refresh-cutsom-filter-ok-button",xd="set-fullscreen-dialog",Rd="row-mode-change",Dd="enter-key-handler",Td="close-edit",Md="create-virtual-validation-form",Id="refresh-infinite-persist-selection";var kd=function(e){return e[e.Data=0]="Data",e[e.Header=1]="Header",e[e.Summary=2]="Summary",e[e.GroupSummary=3]="GroupSummary",e[e.CaptionSummary=4]="CaptionSummary",e[e.Filter=5]="Filter",e[e.Indent=6]="Indent",e[e.GroupCaption=7]="GroupCaption",e[e.GroupCaptionEmpty=8]="GroupCaptionEmpty",e[e.Expand=9]="Expand",e[e.HeaderIndent=10]="HeaderIndent",e[e.StackedHeader=11]="StackedHeader",e[e.DetailHeader=12]="DetailHeader",e[e.DetailExpand=13]="DetailExpand",e[e.CommandColumn=14]="CommandColumn",e[e.DetailFooterIntent=15]="DetailFooterIntent",e[e.RowDragIcon=16]="RowDragIcon",e[e.RowDragHIcon=17]="RowDragHIcon",e}({}),Fd=function(e){return e[e.Header=0]="Header",e[e.Content=1]="Content",e[e.Summary=2]="Summary",e}({}),Ad=function(e){return e[e.isEdit=0]="isEdit",e[e.isAdd=1]="isAdd",e[e.isSort=2]="isSort",e[e.isFilter=3]="isFilter",e}({}),Od=function(e){return e[e.isInitial=0]="isInitial",e[e.isSearch=1]="isSearch",e}({});class Ld{constructor(e,t){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=e,this.serviceLocator=t,this.initDataManager(),this.parent.isDestroyed||"foreignKey"===this.getModuleName()||(this.parent.on(Lc,this.addRows,this),this.parent.on("row-position-changed",this.reorderRows,this),this.parent.on(Pc,this.removeRows,this),this.parent.on(zc,this.initDataManager,this),this.parent.on(Ic,this.destroy,this),this.parent.on(jc,this.crudActions,this),this.parent.on(Uc,this.getData,this),this.parent.on(Vc,this.refreshFilteredCols,this),this.parent.on(cd,this.refreshFilteredCols,this))}reorderRows(e){this.dataManager.dataSource.json.splice(e.toIndex,0,this.dataManager.dataSource.json.splice(e.fromIndex,1)[0])}getModuleName(){return"data"}initDataManager(){const e=this.parent;this.dataManager=e.dataSource instanceof Gs.a?e.dataSource:qe(e.dataSource)?new Gs.a:new Gs.a(e.dataSource),!e.isAngular||e.query instanceof Gs.e?(this.isQueryInvokedFromData=!0,e.query=e.query instanceof Gs.e?e.query:new Gs.e):e.setProperties({query:new Gs.e},!0)}generateQuery(e){const t=this.parent.getQuery().clone();if("ExcludeHidden"===this.parent.columnQueryMode)t.select(this.parent.getColumns().filter(e=>!(!0!==e.isPrimaryKey&&!1===e.visible||void 0===e.field)).map(e=>e.field));else if("Schema"===this.parent.columnQueryMode){const e=[],i=this.parent.columns;for(let t=0;t<i.length;t++)e.push(i[t].field);t.select(e)}return this.filterQuery(t),this.searchQuery(t),this.aggregateQuery(t),this.sortQuery(t),Zu(this.parent)?this.virtualGroupPageQuery(t):this.pageQuery(t,e),this.groupQuery(t),t}aggregateQuery(e){const t=this.parent.aggregates;for(let i=0;i<t.length;i++){const s=t[i];for(let t=0;t<s.columns.length;t++){const i=s.columns[t],n=i.type instanceof Array?i.type:[i.type];for(let t=0;t<n.length;t++)e.aggregate(n[t].toLowerCase(),i.field)}}return e}virtualGroupPageQuery(e){if(e.queries.length)for(let t=0;t<e.queries.length;t++)"onPage"===e.queries[t].fn&&e.queries.splice(t,1);return e}pageQuery(e,t){const i=this.parent,s={query:e,skipPage:!1};if(i.notify("set-virtual-page-query",s),s.skipPage)return e;if((i.allowPaging||i.enableVirtualization||i.enableInfiniteScrolling)&&!0!==t){if(i.pageSettings.currentPage=Math.max(1,i.pageSettings.currentPage),i.pageSettings.pageCount<=0&&(i.pageSettings.pageCount=8),i.pageSettings.pageSize<=0&&(i.pageSettings.pageSize=12),e.queries.length)for(let t=0;t<e.queries.length;t++)"onPage"===e.queries[t].fn&&e.queries.splice(t,1);!qe(i.infiniteScrollModule)&&i.enableInfiniteScrolling?this.parent.notify("infinite-page-query",e):e.page(i.pageSettings.currentPage,i.pageSettings.pageSize)}return e}groupQuery(e){const t=this.parent;if(t.allowGrouping&&t.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&e.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});const i=t.groupSettings.columns;for(let t=0,s=i.length;t<s;t++){const s=this.getColumnByField(i[t]);s||this.parent.log("initial_action",{moduleName:"group",columnName:i[t]});const n=s.format;s.enableGroupByFormat?e.group(i[t],this.formatGroupColumn.bind(this),n):e.group(i[t],null)}}return e}sortQuery(e){const t=this.parent;if((t.allowSorting||t.allowGrouping)&&t.sortSettings.columns.length){const i=t.sortSettings.columns,s=[];for(let n=i.length-1;n>-1;n--){const o=this.getColumnByField(i[n].field);if(!o)return this.parent.log("initial_action",{moduleName:"sort",columnName:i[n].field}),e;o.setSortDirection(i[n].direction);let r=i[n].direction;o.sortComparer&&(this.parent.log("grid_sort_comparer"),r=this.isRemote()?i[n].direction:o.sortComparer.bind(o)),-1===t.groupSettings.columns.indexOf(i[n].field)?o.isForeignColumn()||o.sortComparer?e.sortByForeignKey(o.field,r,void 0,i[n].direction.toLowerCase()):e.sortBy(o.field,r):s.push({direction:r,field:o.field})}for(let t=0,n=s.length;t<n;t++)if("string"==typeof s[t].direction)e.sortBy(s[t].field,s[t].direction);else{const i=this.getColumnByField(s[t].field);e.sortByForeignKey(s[t].field,s[t].direction,void 0,i.getSortDirection().toLowerCase())}}return e}searchQuery(e,t,i){const s=this.parent.searchSettings;let n=s.fields.length?s.fields:this.getSearchColumnFieldNames(),o=[],r=!1;if(this.parent.searchSettings.key.length){r=this.parent.getForeignKeyColumns().some(e=>n.indexOf(e.field)>-1);const l=i?t.dataSource.adaptor:this.dataManager.adaptor;if(r||l.getModuleName&&"ODataV4Adaptor"===l.getModuleName()){n=i?[t.foreignKeyValue]:n;for(let e=0;e<n.length;e++){const r=i?t:this.getColumnByField(n[e]);r.isForeignColumn()&&!i?o=this.fGeneratePredicate(r,o):o.push(new Gs.d(n[e],s.operator,s.key,s.ignoreCase,s.ignoreAccent))}const r=Gs.d.or(o);r.key=s.key,e.where(r)}else e.search(s.key,n,s.operator,s.ignoreCase,s.ignoreAccent)}return e}filterQuery(e,t,i){const s=this.parent;let n=[];const o=[],r=this.parent.getForeignKeyColumns();let l;if(s.allowFiltering&&s.filterSettings.columns.length){const a=t||s.filterSettings.columns,h={};for(const e of s.getColumns())h[e.field]=e.filter.type?e.filter.type:s.filterSettings.type;const c=[],d=[];for(const e of a){const t=s.getColumnByField(e.field);qe(e.type)&&t&&("date"===t.type||"datetime"===t.type)&&(e.type=s.getColumnByField(e.field).type),e.isForeignKey?c.push(e):d.push(e)}if(d.length){for(let t=0,i=d.length;t<i;t++)d[t].uid=d[t].uid||this.parent.grabColumnByFieldFromAllCols(d[t].field).uid;const e=xm.getPredicate(d);for(const t of Object.keys(e))n.push(e[t])}if(c.length)for(const e of c){e.uid=e.uid||this.parent.grabColumnByFieldFromAllCols(e.field).uid;const t=this.parent.grabColumnByUidFromAllCols(e.uid);if(t||this.parent.log("initial_action",{moduleName:"filter",columnName:e.field}),t.isForeignColumn()&&$u(e.field,r)&&!i)o.push(e),t.columnData.length||(l=!0),n=this.fGeneratePredicate(t,n);else{const e=xm.getPredicate(a);for(const t of Object.keys(e))n.push(e[t])}}n.length&&!l?e.where(Gs.d.and(n)):this.parent.notify(Jc,{})}return e}fGeneratePredicate(e,t){const i={};return e&&(this.parent.notify($c,{predicate:i,column:e}),i.predicate.predicates.length&&t.push(i.predicate)),t}getData(e={requestType:""},t){const i=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource)return this.eventPromise(e,t,i).promise;{let s;switch(e.requestType){case"delete":if(t=t||this.generateQuery(),1===Object.keys(e.data).length)s=this.dataManager.remove(i,e.data[0],t.fromTable,t);else{const n={addedRecords:[],deletedRecords:[],changedRecords:[]};n.deletedRecords=e.data,s=this.dataManager.saveChanges(n,i,t.fromTable,t.requiresCount())}break;case"save":t=t||this.generateQuery(),e.index=qe(e.index)?0:e.index,s=this.dataManager.insert(e.data,t.fromTable,t,e.index)}return e.promise=s,!s||Array.isArray(s)||s.hasOwnProperty("deletedRecords")?this.insert(t,e):s.then(()=>this.insert(t,e))}}insert(e,t){return"save"===t.requestType&&this.parent.notify(od,t),this.executeQuery(e)}executeQuery(e){if(this.dataManager.ready){const t=new Gs.c;return this.dataManager.ready.then(()=>{this.dataManager.executeQuery(e).then(e=>{t.resolve(e)})}).catch(e=>{t.reject(e)}),t.promise}return this.dataManager.executeQuery(e)}formatGroupColumn(e,t){const i=this.serviceLocator,s=this.getColumnByField(t),n=e;return s.type||(s.type=n.getDay?n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0||n.getMilliseconds()>0?"datetime":"date":typeof e),qe(s.getFormatter())&&Gu(i,s),Hh.prototype.toView(e,s.getFormatter())}crudActions(e){const t=this.generateQuery();let i=null;const s="promise",n=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());switch(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(e,t,n),e.requestType){case"save":i=this.dataManager.update(n,e.data,t.fromTable,t,e.previousData)}e[s]=i||e[s],this.parent.notify(_c,e)}saveChanges(e,t,i,s=this.generateQuery()){if(s.requiresCount(),"result"in this.parent.dataSource){const i=new Gs.c,n={requestType:"batchsave",changes:e,key:t,query:s,endEdit:i.resolve};return this.setState({isPending:!0,resolver:i.resolve}),this.parent.trigger(td,n),i.promise}return this.dataManager.saveChanges(e,t,s.fromTable,s,i)}getKey(e){if(e&&e.length)return e[0]}isRemote(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url&&""!==this.dataManager.dataSource.url}addRows(e){for(let t=e.records.length;t>0;t--)this.dataManager.dataSource.json.splice(e.toIndex,0,e.records[t-1])}removeRows(e){this.dataManager.dataSource.json=this.dataManager.dataSource.json.filter(t=>-1===e.records.indexOf(t))}getColumnByField(e){let t;return this.parent.columnModel.some(i=>(t=i,i.field===e))&&t}destroy(){this.parent.isDestroyed||(this.parent.off(Lc,this.addRows),this.parent.off(Pc,this.removeRows),this.parent.off(zc,this.initDataManager),this.parent.off(Ic,this.destroy),this.parent.off(jc,this.crudActions),this.parent.off(Uc,this.getData),this.parent.off(Vc,this.refreshFilteredCols),this.parent.off(cd,this.refreshFilteredCols))}getState(){return this.dataState}setState(e){return this.dataState=e}getForeignKeyDataState(){return this.foreignKeyDataState}setForeignKeyDataState(e){this.foreignKeyDataState=e}getStateEventArgument(e){const t=new Gs.f,i=new Gs.a({url:"",adaptor:new Gs.f}),s=t.processQuery(i,e);return Ve(JSON.parse(s.data),s.pvtData)}eventPromise(e,t,i){const s=e,n=this.getStateEventArgument(t),o=new Gs.c,r=new Gs.c;if(void 0!==e.requestType&&!1!==this.dataState.isDataChanged)if(n.action=e,"save"===e.requestType||"delete"===e.requestType){const t=e;t.key=i,t.promise=r.promise,t.state=n,this.setState({isPending:!0,resolver:r.resolve}),s.endEdit=r.resolve,s.cancelEdit=r.reject,this.parent.trigger(td,t),r.promise.then(()=>{this.setState({isPending:!0,resolver:o.resolve,group:n.group,aggregates:n.aggregates}),"save"===t.requestType&&this.parent.notify(od,t),this.parent.trigger(ed,n)}).catch(()=>{})}else this.setState({isPending:!0,resolver:o.resolve,group:n.group,aggregates:n.aggregates}),this.parent.trigger(ed,n);else this.setState({}),o.resolve(this.parent.dataSource);return o}getSearchColumnFieldNames(){const e=[],t=this.parent.getColumns();for(const i of t)i.allowSearching&&!qe(i.field)&&e.push(i.field);return e}refreshFilteredCols(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&function(e,t){for(let i=0;i<t.length;i++)t[i].uid=t[i].isForeignKey?$u(t[i].field,e.getForeignKeyColumns()).uid:e.enableColumnVirtualization?Sm(e,t[i].field).uid:e.getColumnByField(t[i].field).uid}(this.parent,this.parent.filterSettings.columns)}}class Pd{constructor(e,t){Ne(this,e),this.parent=t}clone(){const e=new Pd({});return Ne(e,this),e.cells=this.cells.map(e=>e.clone()),e}setRowValue(e){if(!this.parent)return;const t=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(t,e)}setCellValue(e,t){if(this.parent&&this.data[e].toString()!==t.toString()){const i=this.parent.getPrimaryKeyFieldNames()[0];this.parent.setCellValue(this.data[i],e,t),this.makechanges(i,this.data)}}makechanges(e,t){this.parent&&this.parent.getDataModule().dataManager.update(e,t)}}class zd{constructor(e){this.isSpanned=!1,this.isRowSpanned=!1,Ne(this,e)}clone(){const e=new zd({});return Ne(e,this),e}}class Bd{constructor(e,t){this.serviceLocator=e,this.parent=t}render(e,t,i,s){const n=this.serviceLocator.getService("cellRendererFactory").getCellRenderer(t.cells[i].cellType||kd.Data);let o=t.cells[i].cellSpan?t.cells[i].cellSpan:e.colSpan+i<=t.cells.length?e.colSpan:t.cells.length-i;const r=e.rowSpan;let l,a=0;if(t.index>0){const e=this.parent.groupSettings.columns.length>0&&!this.parent.getRowsObject()[t.index-1].isDataRow?this.parent.getRowsObject()[t.index].cells:this.parent.getRowsObject()[t.index-1].cells,s=t.cells[i],n="uid";l=e.filter(e=>e.column.uid===s.column[n])[0]}const h=l&&l.colSpanRange>1&&l.rowSpanRange>1?l.colSpanRange:o;for(let c=i+1;c<i+h&&c<t.cells.length;c++)!1===t.cells[c].visible?a++:t.cells[c].isSpanned=!0;if(a>0){for(let e=i+o;e<i+o+a&&e<t.cells.length;e++)t.cells[e].isSpanned=!0;i+o+a>=t.cells.length&&(o-=i+o+a-t.cells.length)}return t.cells[i].cellSpan&&(t.data[e.column.field]=t.cells[i].spanText,s=n.render(t.cells[i],t.data,{index:qe(t.index)?"":t.index.toString()})),o>1&&Xt(s,{colSpan:o.toString(),"aria-colSpan":o.toString()}),r>1&&(Xt(s,{rowspan:r.toString(),"aria-rowspan":r.toString()}),t.cells[i].isRowSpanned=!0,t.cells[i].rowSpanRange=Number(r),o>1&&(t.cells[i].colSpanRange=Number(o))),t.index>0&&l.rowSpanRange>1&&(t.cells[i].isSpanned=!0,t.cells[i].rowSpanRange=Number(l.rowSpanRange-1),t.cells[i].colSpanRange=l.rowSpanRange>0?l.colSpanRange:1),!this.parent.enableColumnVirtualization||t.cells[i].cellSpan||this.containsKey(e.column.field,e.data[e.column.field])||this.backupMergeCells(e.column.field,e.data[e.column.field],e.colSpan),s}backupMergeCells(e,t,i){this.setMergeCells(this.generteKey(e,t),i)}generteKey(e,t){return e+"__"+t.toString()}splitKey(e){return e.split("__")}containsKey(e,t){return this.getMergeCells().hasOwnProperty(this.generteKey(e,t))}getMergeCells(){return this.parent.mergeCells}setMergeCells(e,t){this.parent.mergeCells[e]=t}updateVirtualCells(e){const t=this.getMergeCells();for(const i of Object.keys(t)){const s=t[i],n=this.splitKey(i),o=this.getIndexFromAllColumns(n[0]),r=this.parent.getColumnIndexesInView(),l=s-(r[0]-o);if(o<r[0]&&l>1)for(const t of e)if(t.data[n[0]].toString()===n[1].toString()){t.cells[0].cellSpan=l,t.cells[0].spanText=n[1];break}}return e}getIndexFromAllColumns(e){return Eu(this.parent.getVisibleColumns(),(t,i)=>{if(t.field===e)return i})[0]}}const Hd="e-rowcell",Nd="e-gridcontent",Vd="e-gridfooter",qd="e-headercontent",jd="e-movablecontent",Wd="e-movableheader",Gd="e-frozencontent",_d="e-frozenheader",Ud="e-content",Kd="e-table",Yd="e-row",Xd="e-gridchkbox",Qd="e-editedrow",$d="e-addedrow",Jd="Left-Right",Zd="frozen-right",ep="frozen-left",tp="aria-colindex",ip="aria-rowindex",sp="tbody",np="colgroup",op="open",rp="change",lp="created",ap="beforeOpen";class hp{constructor(e,t,i){this.isSpan=!1,this.cellType=t,this.serviceLocator=e,this.parent=i,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}render(e,t,i,s,n){return this.refreshRow(e,t,i,s,n)}refresh(e,t,i,s,n){i&&(e.data=im({},e.changes),this.refreshMergeCells(e));const o=this.parent.element.querySelector("[data-uid="+e.uid+"]"),r=this.refreshRow(e,t,s,n,null,i),l=[].slice.call(r.cells);o.innerHTML="";for(const a of l)o.appendChild(a)}refreshRow(e,t,i,s,n,o){const r=qe(n)?this.element.cloneNode():n,l={data:e.data},a={data:e.data},h=this.parent.getColumns().filter(e=>"checkbox"===e.type&&e.field)[0];let c=!1;h&&(c=em(h.field,l.data));const d=this.parent.getSelectedRowIndexes();e.isDataRow&&(e.isSelected=d.indexOf(e.index)>-1||c),e.isDataRow&&this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0,-1===d.indexOf(e.index)&&d.push(e.index)),this.buildAttributeFromRow(r,e),Xt(r,Ve({},i,{})),Du(r,e.attributes);const p=this.serviceLocator.getService("cellRendererFactory");for(let u=0,m=e.cells.length;u<m;u++){const t=e.cells[u];t.isSelected=e.isSelected,t.isColumnSelected=t.column.isSelected;const i=p.getCellRenderer(e.cells[u].cellType||kd.Data),s={index:qe(e.index)?"":e.index.toString()};e.isExpand&&e.cells[u].cellType===kd.DetailExpand&&(s.class=this.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");let n=i.render(e.cells[u],e.data,s,e.isExpand,o);if(e.cells[u].cellType!==kd.Filter){if(e.cells[u].cellType===kd.Data||e.cells[u].cellType===kd.CommandColumn){this.parent.trigger(jh,Ve(a,{cell:n,column:t.column,colSpan:1,rowSpan:1,foreignKeyData:e.cells[u].foreignKeyData,requestType:this.parent.requestTypeAction}));let i=!1;if(e.index>0&&this.isSpan){const t=this.parent.groupSettings.columns.length>0&&!this.parent.getRowsObject()[e.index-1].isDataRow?this.parent.getRowsObject()[e.index].cells:this.parent.getRowsObject()[e.index-1].cells,s="uid",n=t.filter(t=>t.column.uid===e.cells[u].column[s])[0];i=n.isRowSpanned?n.isRowSpanned:n.rowSpanRange>1}(a.colSpan>1||e.cells[u].cellSpan>1||a.rowSpan>1||i)&&(this.isSpan=!0,n=new Bd(this.serviceLocator,this.parent).render(a,e,u,n))}e.cells[u].isSpanned||r.appendChild(n)}}if(e.isDataRow&&(this.parent.trigger(qh,Ve(l,{row:r,rowHeight:this.parent.rowHeight})),this.parent.childGrid||this.parent.isRowDragable()||this.parent.detailTemplate)){const e=r.querySelectorAll(".e-rowcell:not(.e-hide)")[0];e&&e.classList.add("e-detailrowvisible")}if(this.parent.enableVirtualization&&(l.rowHeight=this.parent.rowHeight),l.rowHeight?r.style.height=l.rowHeight+"px":this.parent.rowHeight&&(r.querySelector(".e-headercell")||r.querySelector(".e-groupcaption"))&&(r.style.height=this.parent.rowHeight+"px"),e.cssClass&&r.classList.add(e.cssClass),e.lazyLoadCssClass&&r.classList.add(e.lazyLoadCssClass),(!this.parent.enableColumnVirtualization||0===this.parent.frozenColumns)&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(let u=0;u<this.parent.aggregates.length;u++)if(this.parent.aggregates[u].properties.columns[0].footerTemplate){const e=[].slice.call(r.getElementsByClassName("e-summarycell"));e.length&&(Vt([e[e.length-1]],["e-lastsummarycell"]),Vt([e[0]],["e-firstsummarycell"]))}return r}refreshMergeCells(e){for(const t of e.cells)t.isSpanned=!1;return e}buildAttributeFromRow(e,t){const i={},s=[];t.isDataRow&&s.push(Yd),t.isAltRow&&s.push("e-altrow"),qe(t.index)||(i["aria-rowindex"]=t.index),t.rowSpan&&(i.rowSpan=t.rowSpan),t.uid&&(i["data-uid"]=t.uid),t.isSelected&&(i["aria-selected"]=!0),!1===t.visible&&s.push("e-hide"),i.class=s,Du(e,i)}}class cp{constructor(e){this.parent=e}generateRows(e,t){const i=[];let s=this.parent.enableVirtualization&&t?t.startIndex:0;s=this.parent.enableInfiniteScrolling&&t?this.getInfiniteIndex(t):s;for(let n=0,o=Object.keys(e).length;n<o;n++,s++)i[n]=this.generateRow(e[n],s);return i}ensureColumns(){const e=[];if(this.parent.detailTemplate||this.parent.childGrid){const t={};this.parent.notify(md,t),e.push(this.generateCell(t,null,kd.DetailExpand))}return this.parent.isRowDragable()&&e.push(this.generateCell({},null,kd.RowDragIcon)),e}generateRow(e,t,i,s,n,o,r){const l={foreignKeyData:{}};l.uid=Lu("grid-row"),l.data=e,l.index=t,l.indent=s,l.tIndex=o,l.isDataRow=!0,l.parentGid=n,l.parentUid=r,this.parent.isPrinting&&("All"===this.parent.hierarchyPrintMode?l.isExpand=!0:"Expanded"===this.parent.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[t]&&(l.isExpand=this.parent.expandedRows[t].isExpand)),l.cssClass=i,l.isAltRow=!!this.parent.enableAltRow&&t%2!=0,l.isAltRow=!!this.parent.enableAltRow&&t%2!=0,l.isSelected=this.parent.getSelectedRowIndexes().indexOf(t)>-1,this.refreshForeignKeyRow(l);const a=this.ensureColumns(),h=new Pd(l,this.parent);return h.cells="Right"===this.parent.getFrozenMode()?this.generateCells(l).concat(a):a.concat(this.generateCells(l)),h}refreshForeignKeyRow(e){const t=this.parent.getForeignKeyColumns();for(let i=0;i<t.length;i++)ze(t[i].field,Qu(t[i],e.data),e.foreignKeyData)}generateCells(e){const t=this.parent.getColumns(),i=[];for(let s=0;s<t.length;s++)i.push(this.generateCell(t[s],e.uid,qe(t[s].commands)?void 0:kd.CommandColumn,null,s,e.foreignKeyData));return i}generateCell(e,t,i,s,n,o){const r={visible:e.visible,isDataCell:!qe(e.field||e.template),isTemplate:!qe(e.template),rowID:t,column:e,cellType:qe(i)?kd.Data:i,colSpan:s,commands:e.commands,isForeignKey:e.isForeignColumn&&e.isForeignColumn(),foreignKeyData:e.isForeignColumn&&e.isForeignColumn()&&Pe(e.field,o)};return(r.isDataCell||"checkbox"===r.column.type||r.commands)&&(r.index=n),new zd(r)}refreshRows(e){for(let t=0;t<e.length;t++)this.refreshForeignKeyRow(e[t]),e[t].cells=this.generateCells(e[t]);return e}getInfiniteIndex(e){return"infiniteScroll"===e.requestType||"delete"===e.requestType||"add"===e.action?e.startIndex:0}}class dp{constructor(e){this.parent=e}getData(){const e=[],t=this.parent.aggregates.slice();for(let i=0;i<t.length;i++){const s=t[i].columns.filter(e=>!(e.footerTemplate||e.groupFooterTemplate||e.groupCaptionTemplate)||this.columnSelector(e));s.length&&e.push({columns:s})}return e}columnSelector(e){return void 0!==e.footerTemplate}getColumns(e,t){const i=[];if(this.parent.allowGrouping)for(let s=0;s<this.parent.groupSettings.columns.length;s++)i.push(new Nh({}));return!this.parent.detailTemplate&&qe(this.parent.childGrid)||i.push(new Nh({})),this.parent.isRowDragable()&&!e&&i.push(new Nh({})),i.push(...this.parent.getColumns()),t=t&&!e?t+this.parent.getIndentCount():t,qe(e)?i:i.slice(e,t)}generateRows(e,t,i,s,n){if(0===e.length&&(void 0===t||!t.count))return[];const o=this.buildSummaryData(e,t),r=[],l=this.getData();for(let a=0;a<l.length;a++)r.push(this.getGeneratedRow(l[a],o[a],t?t.level:void 0,i,s,t?t.parentUid:void 0,n));return r}getGeneratedRow(e,t,i,s,n,o,r){const l=[];let a=this.getIndentByLevel();const h=!qe(this.parent.childGrid),c=s?0:this.parent.getIndentCount();this.parent.isRowDragable()&&!s&&(a=["e-indentcelltop"]);const d=r||this.getColumns(s,n);for(let u=0;u<d.length;u++)l.push(this.getGeneratedCell(d[u],e,u>=c?this.getCellType():u<this.parent.groupSettings.columns.length?kd.Indent:kd.DetailFooterIntent,a[u],h));const p=new Pd({data:t,attributes:{class:"e-summaryrow"}});return p.cells=l,p.uid=Lu("grid-row"),p.parentUid=o,p.visible=l.some(e=>e.isDataCell&&e.visible),p}getGeneratedCell(e,t,i,s,n){const o=t.columns.filter(t=>t.columnName===e.field)[0],r={style:{textAlign:e.textAlign},"e-mappinguid":e.uid,index:e.index};s&&(r.class=s),qe(s)&&n&&(r.class="e-detailindentcelltop");const l={visible:e.visible,isDataCell:!qe(o),isTemplate:o&&!qe(o.footerTemplate||o.groupFooterTemplate||o.groupCaptionTemplate),column:o||{},attributes:r,cellType:i};return l.column.headerText=e.headerText,new zd(l)}buildSummaryData(e,t){const i=[],s=this.getData();let n={};for(let o=0;o<s.length;o++){n={};const r=s[o].columns;for(let i=0;i<r.length;i++)n=this.setTemplate(r[i],t&&t.aggregates?t:e,n);i.push(n)}return i}getIndentByLevel(){return this.parent.groupSettings.columns.map(()=>"e-indentcelltop")}setTemplate(e,t,i){let s=e.type;const n={},o=e.getFormatter()||(e=>e),r=t;s instanceof Array||(s=[e.type]);for(let l=0;l<s.length;l++){const n=e.field+" - "+s[l].toLowerCase(),a=e.columnName,h="Custom"!==s[l]&&r.aggregates&&n in r.aggregates?r.aggregates[n]:zu(s[l],r.aggregates?r:t,e,this.parent);i[a]=i[a]||{},i[a][n]=h,i[a][s[l]]=qe(h)?" ":o(h),r.field&&(i[a].field=r.field,i[a].key=r.key)}return n.format=e.getFormatter(),e.setTemplate(n),i}getCellType(){return kd.Summary}}class pp extends dp{columnSelector(e){return void 0!==e.groupFooterTemplate}getIndentByLevel(e=this.parent.groupSettings.columns.length){return this.parent.groupSettings.columns.map((t,i)=>i<=e-1?"":"e-indentcelltop")}getCellType(){return kd.GroupSummary}}class up extends dp{columnSelector(e){return void 0!==e.groupCaptionTemplate}getData(){return[super.getData().reduce((e,t)=>(e.columns=[...e.columns,...t.columns],e),{columns:[]})]}isEmpty(){return 0===(this.getData()[0].columns||[]).length}getCellType(){return kd.CaptionSummary}}class mp extends cp{constructor(e){super(e),this.rows=[],this.index=0,this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.parent=e,this.summaryModelGen=new pp(e),this.captionModelGen=new up(e)}generateRows(e,t){if(0===this.parent.groupSettings.columns.length)return super.generateRows(e,t);this.isInfiniteScroll="infiniteScroll"===t.requestType,this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?t.startIndex:0;for(let i=0,s=e.length;i<s;i++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,e[i],e.level,i,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows}getGroupedRecords(e,t,i,s,n,o,r){const l=i;if(qe(t.items))if(qe(t.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(t,e,s,this.rows.length,r));else for(let a=0,h=t.length;a<h;a++)this.getGroupedRecords(e,t[a],t.level,s,e,this.rows.length,r);else{let i;const a=this.generateCaptionRow(t,e,s,n,o,r);if(this.isInfiniteScroll&&(i=this.getPreCaption(e,a.data.key)),i?a.uid=i.uid:this.rows=this.rows.concat(a),t.items&&t.items.length&&this.getGroupedRecords(e+1,t.items,t.items.level,s,e+1,this.rows.length,a.uid),this.parent.aggregates.length&&this.isRenderAggregate(a)){const e=this.rows.length;this.rows.push(...this.summaryModelGen.generateRows(t,{level:l,parentUid:a.uid}));for(let t=e-1;t>=0;t--)if(this.rows[t].isCaptionRow)this.rows[t].aggregatesCount=this.rows.length-e;else if(!this.rows[t].isCaptionRow&&!this.rows[t].isDataRow)break}i&&this.setInfiniteRowVisibility(i)}}isRenderAggregate(e){return this.parent.enableInfiniteScrolling?!!this.renderInfiniteAgg&&(this.getPreCaption(e.indent,e.data.key),this.renderInfiniteAgg=e.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!this.parent.enableInfiniteScrolling}getPreCaption(e,t){const i=[...this.parent.getRowsObject(),...this.rows];let s;this.infiniteChildCount=0;let n=i.length;for(;n--&&(i[n].isCaptionRow&&i[n].indent===e&&i[n].data.key===t&&(s=i[n]),!(i[n].indent===e||i[n].indent<e));)i[n].indent===e+1&&this.infiniteChildCount++;return s}getCaptionRowCells(e,t,i){const s=[];let n=[],o=this.parent.getColumnByField(e);const r=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(o=this.parent.columns.filter(t=>t.field===e)[0]);const l=this.parent.groupSettings.columns.length,a=this.parent;if(!this.parent.enableColumnVirtualization||-1!==r.indexOf(t)){for(let e=0;e<t;e++)s.push(this.generateIndentCell());s.push(this.generateCell({},null,kd.Expand))}if(t=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+l+(a.detailTemplate||a.childGrid?1:0)-t+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){const e=this.captionModelGen.generateRows(i)[0];Ve(i,e.data);let s=0;e.cells.some((e,t)=>(s=t,e.visible&&e.isDataCell)),n=e.cells.slice(s).filter(e=>e.visible),e.visible&&n[0].column.field===this.parent.getVisibleColumns()[0].field&&(n=n.slice(1)),1===this.parent.getVisibleColumns().length&&(n=[]),t-=n.length}const h=this.parent.enableColumnVirtualization?this.parent.getColumns():[o];let c=!0;for(let d=0;d<h.length;d++){const e=c&&-1!==r.indexOf(t);e&&(c=!1);const i=!this.parent.enableColumnVirtualization||e?kd.GroupCaption:kd.GroupCaptionEmpty;t=this.parent.enableColumnVirtualization&&i===kd.GroupCaption?t+l:t,a.isRowDragable()&&t++,s.push(this.generateCell(o,null,i,t))}return s.push(...n),s}generateCaptionRow(e,t,i,s,n,o){const r={},l=this.parent.getColumnByField(e.field);r.data=Ve({},e),l&&(r.data.field=e.field),r.isDataRow=!1,r.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),r.parentGid=i,r.childGid=s,r.tIndex=n,r.isCaptionRow=!0,r.parentUid=o,r.gSummary=qe(e.items.records)?e.items.length:e.items.records.length,r.uid=Lu("grid-row");const a=new Pd(r);return a.indent=t,this.getForeignKeyData(a),a.cells=this.getCaptionRowCells(e.field,t,a.data),a}getForeignKeyData(e){const t=e.data,i=this.parent.getColumnByField(t.field);i&&i.isForeignColumn&&i.isForeignColumn()&&ze("foreignKey",qe(t.key)?"":i.valueAccessor(i.foreignKeyValue,Qu(i,{},t.key)[0],i),e.data)}generateDataRows(e,t,i,s,n){const o=[],r=this.parent.getColumnIndexesInView();for(let l=0,a=e.length;l<a;l++,s++){o[l]=this.generateRow(e[l],this.index,l?void 0:"e-firstchildrow",t,i,s,n);for(let e=0;e<t;e++)this.parent.enableColumnVirtualization&&-1===r.indexOf(t)||o[l].cells.unshift(this.generateIndentCell());this.index++}return o}generateIndentCell(){return this.generateCell({},null,kd.Indent)}refreshRows(e){const t=this.parent.getColumnIndexesInView();for(let i=0;i<e.length;i++)if(e[i].isDataRow){e[i].cells=this.generateCells(e[i]);for(let s=0;s<e[i].indent;s++)this.parent.enableColumnVirtualization&&-1===t.indexOf(e[i].indent)||e[i].cells.unshift(this.generateIndentCell())}else{const t=this.generateCaptionRow(e[i].data,e[i].indent);e[i].cells=t.cells}return e}setInfiniteRowVisibility(e){if(!e.isExpand||!1===e.visible)for(const t of this.rows)t.parentUid===e.uid&&(t.visible=!1,t.isCaptionRow&&this.setInfiniteRowVisibility(t))}ensureRowVisibility(){for(let e=0;e<this.rows.length;e++){const t=this.rows[e];if(t.isCaptionRow)for(let i=e+1;i<this.rows.length;i++)t.uid===this.rows[i].parentUid&&(this.rows[i].visible=t.isExpand)}}}class gp{constructor(e,t){this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.viewColIndexes=[],this.drop=e=>{this.parent.notify("columnDrop",{target:e.target,droppedElement:e.droppedElement}),Yt(e.droppedElement)},this.infiniteCache={},this.isRemove=!1,this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.rafCallback=e=>{const t=e;return()=>{if(this.parent.isFrozenGrid()&&this.parent.enableVirtualization){const t=e.tableName;if(this.isLoaded=this.parent.getFrozenMode()===Jd?"frozen-right"===t:"movable"===t,this.parent.enableColumnVirtualization&&"virtualscroll"===e.requestType&&this.isLoaded){const e=[].slice.call(this.parent.getMovableVirtualHeader().getElementsByClassName(Yd)),t=[].slice.call(this.parent.getFrozenVirtualHeader().getElementsByClassName(Yd));this.isLoaded=e.length===t.length}}if(this.ariaService.setBusy(this.getPanel().querySelector(".e-content"),!1),this.parent.isDestroyed)return;let i=this.rows.slice(0);if(this.parent.enableInfiniteScrolling){i=this.parent.getRowsObject();const e=t.prevPage;if(this.parent.infiniteScrollSettings.enableCache&&e){const e=this.parent.infiniteScrollSettings.maxBlocks;i=[];const t=parseInt(this.rowElements[0].getAttribute("aria-rowindex"),10)+1;for(let s=0,n=Math.ceil(t/this.parent.pageSettings.pageSize);s<e;s++,n++)this.infiniteCache[n]&&(i=[...i,...this.infiniteCache[n]])}}if(this.parent.isFrozenGrid()&&(i=e.isFrozen?this.freezeRows:e.renderFrozenRightContent?this.parent.getFrozenRightRowsObject():this.movableRows),this.parent.notify(gc,{rows:i,args:t}),this.isLoaded&&(this.parent.isManualRefresh=!1,this.parent.trigger(Kh,{},()=>{this.parent.allowTextWrap&&this.parent.notify(Xc,{case:"textwrap"})})),t){const i=(t.requestType||"").toLowerCase()+"-complete";this.parent.notify(i,t),"batchsave"===e.requestType&&(e.cancel=!1,this.parent.trigger(_h,e))}this.isLoaded&&this.parent.hideSpinner()}},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.parent.enableDeepCompare=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),this.parent.isDestroyed||(this.parent.enableColumnVirtualization||this.parent.enableVirtualization||this.parent.groupSettings.enableLazyLoading||this.parent.on(kc,this.setVisible,this),this.parent.on(Cc,this.colGroupRefresh,this),this.parent.on(fc,this.enableAfterRender,this),this.parent.on("refresh-infinite-mode-blocks",this.refreshContentRows,this),this.parent.on(Rc,this.beforeCellFocused,this),this.parent.on(Ic,this.droppableDestroy,this))}beforeCellFocused(e){this.pressedKey=!e.byKey||"upArrow"!==e.keyArgs.action&&"downArrow"!==e.keyArgs.action?void 0:e.keyArgs.action}renderPanel(){const e=this.parent;let t=this.parent.element.querySelector("."+Nd);if(t)return this.ariaService.setOptions(this.parent.element.querySelector(".e-content"),{busy:!1}),void this.setPanel(t);t=this.parent.createElement("div",{className:Nd});const i=this.parent.createElement("div",{className:Ud});this.ariaService.setOptions(i,{busy:!1}),t.appendChild(i),this.setPanel(t),e.element.appendChild(t)}renderTable(){const e=this.getPanel(),t=e.querySelector(".e-virtualtable"),i=e.querySelector(".e-virtualtrack");!this.parent.enableVirtualization||qe(t)||qe(i)||(Yt(t),Yt(i)),e.appendChild(this.createContentTable("_content_table")),this.setTable(e.querySelector(".e-table")),this.ariaService.setOptions(this.getTable(),{multiselectable:"Multiple"===this.parent.selectionSettings.type}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdrcont")}createContentTable(e){const t=this.getPanel().firstElementChild;this.getTable()&&Yt(this.getTable());const i=t.querySelector(".e-table")?t.querySelector(".e-table"):this.parent.createElement("table",{className:Kd,attrs:{cellspacing:"0.25px",role:"grid",id:this.parent.element.id+e}});return this.setColGroup(this.parent.getHeaderTable().querySelector(np).cloneNode(!0)),i.appendChild(this.getColGroup()),i.appendChild(this.parent.createElement(sp)),t.appendChild(i),t}refreshContentRows(e={}){const t=this.parent;if(0===t.currentViewData.length)return;const i=this.currentMovableRows||t.currentViewData,s=this.parent.contentModule,n=t.isReact&&!qe(t.rowTemplate);let o=n?t.createElement(sp):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=Ve([],i));const r=n?t.createElement(sp):document.createDocumentFragment(),l=t.getColumns();let a,h;const c=t.getFrozenColumns(),d=this.parent.isFrozenGrid();let p;const u=new hp(this.serviceLocator,null,this.parent),m=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;t.notify("destroy-child-grid",{}),this.rowElements=[],this.rows=[];const g=this.getPanel().querySelector("."+Gd),f=this.getPanel().querySelector("."+jd),b=this.getPanel().querySelector(".e-content");let y,v,C;Zu(t)&&["sorting","filtering","searching","grouping","ungrouping","reorder"].some(t=>e.requestType===t)&&this.emptyVcRows(),this.parent.enableVirtualization&&this.parent.isFrozenGrid()?(this.parent.enableColumnVirtualization&&"virtualscroll"===e.requestType&&"X"===e.virtualInfo.sentinelInfo.axis&&(C=this.parent.contentModule.generateRows(i,e),e.renderMovableContent=!0),C=this.parent.contentModule.generateRows(i,e)):(C=this.checkCache(C,e),this.isAddRows||this.useGroupCache||(C=this.generator.generateRows(i,e))),this.setGroupCache(C,e),this.parent.notify("set-infinite-cache",{isInfiniteScroll:m,modelData:C,args:e});const w=C[0].cells[0].index;d&&(v=s.setTbody(C,e),y=s.getTbody(v));const S=this.parent.getFrozenMode()===Jd&&v===Zd;if("infiniteScroll"!==e.requestType&&this.parent.registeredTemplate&&this.parent.registeredTemplate.template&&!e.isFrozen&&!S){const e=[];for(let t=0;t<this.parent.registeredTemplate.template.length;t++)for(let i=0;i<this.parent.registeredTemplate.template[t].rootNodes.length;i++)qe(this.parent.registeredTemplate.template[t].rootNodes[i].parentNode)&&e.push(this.parent.registeredTemplate.template[t]);this.parent.destroyTemplate(["template"],e)}!this.parent.isReact&&!this.parent.isVue||"infiniteScroll"===e.requestType||e.isFrozen||Em(this.parent,[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"]),this.parent.enableColumnVirtualization&&new Bd(this.serviceLocator,this.parent).updateVirtualCells(C),d||(this.tbody=this.getTable().querySelector(sp));let E=0,x=!0;if(Zu(t)&&t.vcRows.length){const i="top",s=qe(e.virtualInfo.offsets)?qe(e.scrollTop)?0:e.scrollTop[i]:e.virtualInfo.offsets.top;if(0!==s){const i=t.vGroupOffsets,n=t.pageSettings.pageSize/2,o=Object.keys(i).map(e=>i[e]);for(let t=0;t<o.length;t++)if(s<o[t]){if(qe(e.virtualInfo)||"up"!==e.virtualInfo.direction){E=t*n,(this.parent.contentModule.isEndBlock(t)||this.parent.contentModule.isEndBlock(t+1))&&(e.virtualInfo.blockIndexes=[t,t+1]);break}E=t>0?(t-1)*n:t*n;break}Math.round(s+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!e.rowObject&&(x=!1)}}const R=t.frozenRows&&!t.isFrozenGrid()&&this.parent.enableVirtualization&&"reorder"===e.requestType;if(t.frozenRows&&"virtualscroll"===e.requestType&&"X"===e.virtualInfo.sentinelInfo.axis||R){const t=e.virtualInfo.blockIndexes,s=e.virtualInfo.page;e.virtualInfo.blockIndexes=[1,2],R&&(e.virtualInfo.page=1);const n=this.vgenerator.generateRows(R?this.initialPageRecords:i,e);n.splice(this.parent.frozenRows);for(let e=0;e<this.parent.frozenRows;e++)n[e].cells.splice(0,this.parent.getFrozenColumns()),a=u.render(n[e],l),r.appendChild(a);e.virtualInfo.blockIndexes=t,e.virtualInfo.page=s,R&&1===e.virtualInfo.page&&C.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(r,C,u,e,i,l);for(let D=E,T=C.length;D<T;D++)if(this.rows.push(C[D]),!this.parent.groupSettings.enableLazyLoading||this.useGroupCache||!this.parent.groupSettings.columns.length||(this.setRowsInLazyGroup(C[D],D),!qe(C[D].indent))){if(this.setInfiniteVisibleRows(e,C[D],v),Zu(t)&&e.virtualInfo&&e.virtualInfo.blockIndexes&&this.rowElements.length>=e.virtualInfo.blockIndexes.length*this.parent.contentModule.getBlockSize()&&x){this.parent.currentViewData.records=this.rows.map(e=>e.data);break}if(t.rowTemplate){const e=t.element.id+"rowTemplate";let s;if(t.isReact){const s=t.frozenRows&&D<t.frozenRows,n=Ve({index:D},i[D]);t.getRowTemplate()(n,t,"rowTemplate",e,null,null,s?r:o),t.renderTemplates()}else s=t.getRowTemplate()(Ve({index:D},i[D]),t,"rowTemplate",e);if(t.isReact||"TBODY"!==s[0].tagName)t.frozenRows&&D<t.frozenRows?a=t.isReact?r.lastElementChild:Pu(r,s):(t.isReact||(a=Pu(o,s)),p=t.isReact?o.lastElementChild:a.lastElementChild);else{for(let e=0;e<s.length;e++){const t="tr"===s[e].nodeName.toLowerCase();(t||s[e].querySelectorAll&&s[e].querySelectorAll("tr").length)&&(a=t?s[e]:s[e].querySelector("tr"))}t.frozenRows&&D<t.frozenRows?r.appendChild(a):o.appendChild(a)}this.parent.trigger(qh,{data:C[D].data,row:p||a})}else{a=u.render(C[D],l);const i=this.ensureFrozenHeaderRender(e);t.frozenRows&&D<t.frozenRows&&!m&&"virtualscroll"!==e.requestType&&i&&this.ensureVirtualFrozenHeaderRender(e)?r.appendChild(a):o.appendChild(a),C[D].isExpand&&t.notify("expandchildgrid",a.cells[t.groupSettings.columns.length])}C[D].isDataRow&&this.rowElements.push(a),this.ariaService.setOptions(this.getTable(),{colcount:t.getColumns().length.toString()})}if(d&&s.splitRows(v),t.frozenRows&&"virtualscroll"!==e.requestType&&!m&&this.ensureVirtualFrozenHeaderRender(e)||"virtualscroll"===e.requestType&&e.virtualInfo.sentinelInfo&&"X"===e.virtualInfo.sentinelInfo.axis)if(h=d?s.getFrozenHeader(v):t.getHeaderTable().querySelector(sp),n){const e=h.parentElement;Yt(h),e.appendChild(r)}else h.innerHTML="",h.appendChild(r);!t.enableVirtualization&&t.frozenRows&&0===w&&b.offsetHeight===Number(t.height)&&(b.style.height=b.offsetHeight-h.offsetHeight+"px"),e.rows=this.rows.slice(0),d&&s.setIsFrozen(e,v),this.index=w,Su(()=>{this.parent.notify(id,e);const i=this.parent.enableVirtualization&&this.parent.isFrozenGrid();if(this.parent.enableVirtualization||m||(this.parent.isFrozenGrid()?(Yt(s.getTbody(v)),y=this.parent.createElement(sp)):(this.tbody.innerHTML="",Yt(this.tbody),this.tbody=this.parent.createElement(sp))),!d||i||this.parent.enableInfiniteScrolling)if(i){if(e.renderFrozenRightContent){const i=t.getContent().querySelector(".e-frozen-right-content").querySelector(sp);this.appendContent(i,o,e)}else e.renderMovableContent?(this.appendContent(f.querySelector(sp),o,e),e.renderMovableContent=!1):this.appendContent(g.querySelector(sp),o,e);this.parent.getFrozenColumns()||s.renderNextFrozentPart(e,v)}else!qe(this.parent.infiniteScrollModule)&&this.parent.enableInfiniteScrolling?(this.isAddRows=!1,this.parent.notify("remove-infinite-rows",{args:e}),this.parent.notify("append-infinite-content",{tbody:y||this.tbody,frag:o,args:e,rows:this.rows,rowElements:this.rowElements,visibleRows:this.visibleRows,tableName:v}),!c&&d&&((t.getFrozenMode()===Jd||v!==ep&&v!==Zd)&&(t.getFrozenMode()!==Jd||v!==ep&&"movable"!==v)||this.refreshContentRows(Ve({},e)))):(this.useGroupCache=!1,this.appendContent(this.tbody,o,e));else this.appendContent(y,o,e,v);c&&s.renderNextFrozentPart(e,v),o=null},this.rafCallback(Ve({},e)))}emptyVcRows(){this.parent.vcRows=[],this.parent.vRows=[]}appendContent(e,t,i,s){this.parent.isReact&&!qe(this.parent.rowTemplate)?this.getTable().appendChild(t):(e.appendChild(t),this.getTable().appendChild(e))}setRowsInLazyGroup(e,t){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.contentModule.maintainRows(e,t)}setGroupCache(e,t){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify("group-cache",{args:t,data:e})}ensureFrozenHeaderRender(e){return!(this.parent.enableVirtualization&&("reorder"===e.requestType||"refresh"===e.requestType)||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&"delete"===this.parent.infiniteScrollModule.requestType&&1!==this.parent.pageSettings.currentPage)}ensureVirtualFrozenHeaderRender(e){return!(this.parent.enableVirtualization&&"delete"===e.requestType)}checkCache(e,t){if(this.parent.infiniteScrollSettings.enableCache&&"infiniteScroll"===t.requestType){const i=t.isFrozen?1:0,s=this.parent.isFrozenGrid();if(this.isAddRows=!qe(this.infiniteCache[this.parent.pageSettings.currentPage]),s&&!qe(this.infiniteCache[this.parent.pageSettings.currentPage])&&(this.isAddRows=0!==this.infiniteCache[this.parent.pageSettings.currentPage][i].length),this.isAddRows){const t=s?this.infiniteCache[this.parent.pageSettings.currentPage][i]:this.infiniteCache[this.parent.pageSettings.currentPage];e=1===this.parent.pageSettings.currentPage?t.slice(this.parent.frozenRows):t}return e}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&("paging"===t.requestType||"columnstate"===t.requestType||"reorder"===t.requestType)&&this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]?(this.useGroupCache=!0,this.parent.contentModule.initialGroupRows("reorder"===t.requestType)):null}setInfiniteVisibleRows(e,t,i){const s=this.parent.isFrozenGrid();this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&(s?i===ep||"Right"===this.parent.getFrozenMode()&&i===Zd?this.visibleFrozenRows.push(t):"movable"===i?this.visibleRows.push(t):this.rightFreezeRows.push(t):this.parent.infiniteScrollSettings.enableCache||this.visibleRows.push(t))}getCurrentBlockInfiniteRecords(e){let t=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];const i=this.parent.isFrozenGrid(),s=this.parent.getRows();let n=parseInt(s[this.parent.frozenRows].getAttribute(ip),10);const o=Math.ceil((n+1)/this.parent.pageSettings.pageSize);n=parseInt(s[s.length-1].getAttribute(ip),10);const r=Math.ceil(n/this.parent.pageSettings.pageSize);if(i){const i=e?0:1;for(let e=o;e<=r;e++)t=t.length?t.concat(this.infiniteCache[e][i]):this.infiniteCache[e][i];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(t=this.infiniteCache[1][i].slice(0,this.parent.frozenRows).concat(t))}else{for(let e=o;e<=r;e++)t=t.length?t.concat(this.infiniteCache[e]):this.infiniteCache[e];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(t=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(t))}}return t}getReorderedVFRows(e){return this.parent.contentModule.getReorderedFrozenRows(e)}getReorderedRows(e){return this.parent.contentModule.getReorderedFrozenRows(e)}virtualFrozenHdrRefresh(e,t,i,s,n,o){if(this.parent.frozenRows&&this.parent.enableVirtualization&&("reorder"===s.requestType||"refresh"===s.requestType)){let r,l=[];this.parent.isFrozenGrid()?(this.currentMovableRows=n,l=this.getReorderedVFRows(s)):l=this.getReorderedRows(s);for(let t=0;t<l.length;t++)r=i.render(l[t],o),e.appendChild(r);1===s.virtualInfo.page&&t.splice(0,this.parent.frozenRows),s.renderMovableContent&&(this.parent.currentViewData=this.currentMovableRows,this.currentMovableRows=null)}}getInfiniteRows(){let e=[];const t=this.parent.isFrozenGrid();if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache){const i=Object.keys(this.infiniteCache);for(let s=0;s<i.length;s++)e=t?[...e,...this.infiniteCache[i[s]][0]]:[...e,...this.infiniteCache[i[s]]]}else e=t?this.visibleFrozenRows:this.visibleRows;return e}getInfiniteMovableRows(){const e=this.getCurrentBlockInfiniteRecords();return this.parent.enableInfiniteScrolling?e.length?e:this.visibleRows:[]}getPanel(){return this.contentPanel}setPanel(e){this.contentPanel=e}getTable(){return this.contentTable}setTable(e){this.contentTable=e}getRows(){const e=this.getInfiniteRows();return e.length?e:this.parent.getFrozenColumns()?this.freezeRows:this.rows}getMovableRows(){const e=this.getInfiniteMovableRows();return e.length?e:this.movableRows}getRowElements(){return this.parent.getFrozenColumns()?this.freezeRowElements:this.rowElements}getMovableRowElements(){return this.rowElements}setRowElements(e){this.rowElements=e}getColGroup(){return this.colgroup}setColGroup(e){return qe(e)||(e.id="content-"+e.id),this.colgroup=e}setVisible(e){const t=this.parent,i=this.parent.isFrozenGrid(),s=t.getFrozenColumns();let n,o=[];if(i){const e=this.freezeRows,i=this.movableRows,s=e.length;let n,r=[];t.getFrozenMode()===Jd&&(r=t.getFrozenRightRowsObject());for(let t,l=0;l<s;l++){n=i[l].cells.length;const s=r.length?r[l].cells.length:0;t=e[l].clone();for(let e=0;e<n;e++)t.cells.push(i[l].cells[e]);for(let e=0;e<s;e++)t.cells.push(r[l].cells[e]);o.push(t)}}else o=this.getRows();o.some(e=>(e.isDataRow&&(n=e),e.isDataRow));let r=!0;!t.groupSettings.columns.length&&n&&(r=!1);let l=t.getDataRows(),a=this.infiniteRowVisibility()||this.rows.filter(e=>!e.isDetailRow);for(let h=0,c=e.length;h<c;h++){const o=e[h];let c=this.parent.getNormalizedColumnIndex(o.uid),d=this.parent.getColumnIndexByUid(o.uid);const p=!0===o.visible?"":"none";if(-1!==c&&n&&c<n.cells.length)if(i)if("movable"!==o.getFreezeTableName())o.getFreezeTableName()===Zd?(d=c-=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount(),ei(this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(np).childNodes[c],{display:p}),a=t.getFrozenRightRowsObject(),l=t.getFrozenRightDataRows()):(ei(this.getColGroup().childNodes[c],{display:p}),a=this.infiniteRowVisibility(!0)||this.freezeRows,l=t.getDataRows());else{const e=t.getContent().querySelector("."+jd).querySelector(np);d=c=c-s-this.parent.getFrozenLeftColumnsCount(),ei(e.childNodes[c],{display:p}),l=t.getMovableDataRows(),a=this.infiniteRowVisibility()||this.movableRows}else ei(this.getColGroup().childNodes[c],{display:p});r||this.setDisplayNone(l,d,p,a),!this.parent.invokedFromMedia&&o.hideAtMedia&&this.parent.updateMediaColumns(o),this.parent.invokedFromMedia=!1}r?this.refreshContentRows({requestType:"refresh"}):this.parent.getFrozenColumns()?(this.parent.notify(hd,{rows:this.freezeRows,args:{isFrozen:!0,rows:this.freezeRows}}),this.parent.notify(hd,{rows:this.movableRows,args:{isFrozen:!1,rows:this.movableRows}})):this.parent.notify(hd,{rows:a,args:{}})}setDisplayNone(e,t,i,s){(function(e,t,i,s,n,o){const r=Object.keys(e);for(let l=0;l<r.length;l++){const a=e[r[l]].querySelectorAll("td.e-rowcell")[t];if(e[r[l]].querySelectorAll("td.e-rowcell").length&&a)if(ei(e[r[l]].querySelectorAll("td.e-rowcell")[t],{display:i}),e[r[l]].querySelectorAll("td.e-rowcell")[t].classList.contains("e-hide")&&qt([e[r[l]].querySelectorAll("td.e-rowcell")[t]],["e-hide"]),o&&n.isRowDragable()){const e=n.getFrozenColumns()?t:t+1;s[r[l]].cells[e].visible=""===i}else s[r[l]].cells[t].visible=""===i}})(e,t,i,s,this.parent,this.parent.isRowDragable()),this.parent.notify("infinite-show-hide",{visible:i,index:t,isFreeze:this.isInfiniteFreeze})}infiniteRowVisibility(e){let t;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=e,t=this.parent.infiniteScrollSettings.enableCache?e?this.getCurrentBlockInfiniteRecords(!0):this.getCurrentBlockInfiniteRecords():e?this.visibleFrozenRows:this.visibleRows),t}colGroupRefresh(){if(this.getColGroup()){let e;e=this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()?this.parent.getMovableVirtualHeader().querySelector(np).cloneNode(!0):this.getHeaderColGroup(),this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e)}}getHeaderColGroup(){return this.parent.element.querySelector(".e-gridheader").querySelector(np).cloneNode(!0)}initializeContentDrop(){this.droppable=new _i(this.parent.element,{accept:".e-dragclone",drop:this.drop})}droppableDestroy(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()}canSkip(e,t,i){return qe(t)||qe(e.visible)||t.cells[i].visible===e.visible}getModelGenerator(){return this.generator=this.parent.allowGrouping?new mp(this.parent):new cp(this.parent)}renderEmpty(e){this.getTable().appendChild(e),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(sp).innerHTML="")}setSelection(e,t,i){this.parent.notify("set-freeze-selection",{uid:e,set:t,clearAll:i});const s=this.parent.isFrozenGrid();if(s&&this.parent.enableVirtualization)return;if(s){const s=this.getMovableRows().filter(t=>i||e===t.uid);for(let e=0;e<s.length;e++)s[e].isSelected=t}const n=this.getRows().filter(t=>i||e===t.uid);for(let o=0;o<n.length;o++){n[o].isSelected=t;const e=n[o].cells;for(let i=0;i<e.length;i++)e[i].isSelected=t}}getRowByIndex(e){return e=this.getInfiniteRowIndex(e),this.parent.getDataRows()[e]}getInfiniteRowIndex(e){if(this.parent.infiniteScrollSettings.enableCache){const t=this.parent.frozenRows,i=t>e?0:t,s=parseInt(this.parent.getRows()[i].getAttribute(ip),10);e=t>e?e:e-s+t}return e}getVirtualRowIndex(e){return e}getMovableRowByIndex(e){return e=this.getInfiniteRowIndex(e),this.parent.getMovableDataRows()[e]}enableAfterRender(e){"group"===e.module&&e.enable&&(this.generator=this.getModelGenerator())}setRowObjects(e){this.rows=e}immutableModeRendering(e={}){const t=this.parent;t.hideSpinner();const i=t.getPrimaryKeyFieldNames()[0],s={},n={},o=[],r={},l=t.getRowsObject().slice(),a=this.getBatchEditedRecords(i,l),h={},c=0!==Object.keys(a).length;if(t.getContent().querySelector(".e-emptyrow")||"reorder"===e.requestType||this.parent.groupSettings.columns.length)this.refreshContentRows(e);else{if(0===t.currentViewData.length)return;const d={},p=t.createElement(sp),u=t.currentViewData,m=[].slice.call(this.getTable().querySelector(sp).children);if(this.prevCurrentView.length){const e=this.prevCurrentView.length,t=u.length;if(e===t)for(let o=0;o<t;o++)"Batch"===this.parent.editSettings.mode&&m[o].classList.contains("e-insertedrow")?(m.splice(o,1),--o):(n[u[o][i]]=s[this.prevCurrentView[o][i]]=o,h[o]=u[o][i],d[l[o].uid]=m[o],r[o]=this.prevCurrentView[o][i]);else{for(let e=0;e<t;e++)n[u[e][i]]=e,h[e]=u[e][i];for(let t=0;t<e;t++)"Batch"===this.parent.editSettings.mode&&m[t].classList.contains("e-insertedrow")?(m.splice(t,1),--t):(d[l[t].uid]=m[t],s[this.prevCurrentView[t][i]]=t,r[t]=this.prevCurrentView[t][i])}}for(let e=0;e<u.length;e++){const n=s[u[e][i]];if(qe(n)){const i=new hp(this.serviceLocator,null,t),s=this.generator.generateRows([u[e]]);o.push(s[0]);const n=i.render(s[0],t.getColumns());p.appendChild(n),this.refreshImmutableContent(e,n,o[e])}else{let t=!1;this.parent.enableDeepCompare&&(t=this.objectEqualityChecker(this.prevCurrentView[n],u[e]));const i=d[l[n].uid];if(o.push(l[n]),this.rowElements[n]&&this.rowElements[n].getAttribute("data-uid")===o[e].uid&&(c&&qe(a[h[e]])||!c&&(t||this.prevCurrentView[n]===u[e]))){n!==e&&this.refreshImmutableContent(e,i,o[e]),p.appendChild(i);continue}(c&&!qe(a[h[e]])||!this.parent.enableDeepCompare&&u[e]!==this.prevCurrentView[n]||this.parent.enableDeepCompare&&!t)&&l[n].setRowValue(u[e]),p.appendChild(i),this.refreshImmutableContent(e,i,o[e])}}if(this.rows=o,this.rowElements=[].slice.call(p.children),Yt(this.getTable().querySelector(sp)),this.getTable().appendChild(p),this.parent.trigger(Kh,{},()=>{this.parent.allowTextWrap&&this.parent.notify(Xc,{case:"textwrap"})}),e){const t=(e.requestType||"").toLowerCase()+"-complete";this.parent.notify(t,e)}}}objectEqualityChecker(e,t){const i=Object.keys(e);let s=!0;for(let n=0;n<i.length;n++)if(!(e[i[n]]===t[i[n]]||e[i[n]]instanceof Date&&t[i[n]]instanceof Date&&e[i[n]].getTime()===t[i[n]].getTime())){s=!1;break}return s}getBatchEditedRecords(e,t){const i={},s=this.parent.getBatchChanges();let n=[],o=[];Object.keys(s).length&&(n=s.changedRecords,o=s.addedRecords);const r={cancel:!1};this.parent.notify("immutable-batch-cancel",{rows:t,args:r}),o.length&&("Bottom"===this.parent.editSettings.newRowPosition?t.splice(t.length-1,o.length):r.cancel||t.splice(0,o.length));for(let l=0;l<n.length;l++)i[n[l][e]]=l;return i}refreshImmutableContent(e,t,i){i.isAltRow=!!this.parent.enableAltRow&&e%2!=0,i.isAltRow?t.classList.add("e-altrow"):t.classList.remove("e-altrow"),i.index=e,i.edit=void 0,i.isDirty=!1,t.setAttribute(ip,e.toString()),this.updateCellIndex(t,e)}updateCellIndex(e,t){for(let i=0;i<e.cells.length;i++)e.cells[i].setAttribute("index",t.toString())}}class fp{constructor(e,t){this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=e=>{const t=this.parent,i=this.draggable.currentStateTarget,s=ku(i,"e-headercell");if(!t.allowReordering&&!t.allowGrouping||!qe(s)&&s.getElementsByClassName("e-checkselectall").length>0)return!1;const n=this.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),o=i.classList.contains("e-headercell")?i:s;if(!o||!t.allowReordering&&o.classList.contains("e-stackedheadercell"))return!1;const r=o.offsetHeight,l=o.querySelector(".e-headercelldiv")||o.querySelector(".e-stackedheadercelldiv");let a;if(l){if(a=o.querySelector(".e-stackedheadercelldiv")?t.getStackedHeaderColumnByHeaderText(l.innerText.trim(),t.columns):t.getColumnByUid(l.getAttribute("e-mappinguid")),this.column=a,this.column.lockColumn)return!1;n.setAttribute("e-mappinguid",this.column.uid)}if(a&&!qe(a.headerTemplate))if(qe(a.headerTemplate))n.innerHTML=a.headerTemplate;else{const e=t.getColumnIndexByField(a.field);Pu(n,a.getHeaderTemplate()(Ve({index:e},a),t,"headerTemplate"))}else n.innerHTML=l?a.headerText:o.firstElementChild.innerHTML;return n.style.width=o.offsetWidth+"px",n.style.height=o.offsetHeight+"px",n.style.lineHeight=(r-6).toString()+"px",t.element.appendChild(n),n},this.dragStart=e=>{const t=this.parent;t.element.querySelector(".e-gridpopup").style.display="none",t.notify("columnDragStart",{target:this.draggable.currentStateTarget,column:this.column,event:e.event})},this.drag=e=>{const t=this.parent,i=e.target;if(i){const s=Zt(i,".e-grid"),n=this.parent.element.querySelector(".e-cloneproperties");if(!(s&&s.getAttribute("id")===t.element.getAttribute("id")||(ti(n,["e-notallowedcur"],["e-defaultcur"]),t.allowReordering&&(t.element.querySelector(".e-reorderuparrow").style.display="none",t.element.querySelector(".e-reorderdownarrow").style.display="none"),t.groupSettings.allowReordering)))return;t.notify("columnDrag",{target:e.target,column:this.column,event:e.event})}},this.dragStop=e=>{const t=this.parent;let i;t.element.querySelector(".e-gridpopup").style.display="none",(!ku(e.target,"e-headercell")&&!ku(e.target,"e-groupdroparea")||!t.allowReordering&&ku(e.target,"e-headercell")||!e.helper.getAttribute("e-mappinguid")&&ku(e.target,"e-groupdroparea"))&&(Yt(e.helper),i=!0),t.notify("column-drag-stop",{target:e.target,event:e.event,column:this.column,cancel:i})},this.drop=e=>{const t=this.parent,i=e.droppedElement.getAttribute("e-mappinguid"),s=Zt(e.target,".e-grid");Yt(e.droppedElement),s&&s.getAttribute("id")!==t.element.getAttribute("id")||!t.allowReordering&&!t.allowGrouping||t.notify("header-drop",{target:e.target,uid:i,droppedElement:e.droppedElement})},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),this.parent.isDestroyed||(this.parent.enableColumnVirtualization||this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenRightColumnsCount()||this.parent.on(kc,this.setVisible,this),this.parent.on(Oc,this.colPosRefresh,this),this.parent.on(uc,this.renderCustomToolbar,this),"Vertical"===this.parent.rowRenderingMode&&this.parent.on(fc,this.updateCustomResponsiveToolbar,this))}renderPanel(){let e=this.parent.element.querySelector(".e-gridheader");const t=null!=e;e=t?e:this.parent.createElement("div",{className:"e-gridheader"});const i=t?e.querySelector("."+qd):this.parent.createElement("div",{className:qd});this.toggleStackClass(e),e.appendChild(i),this.setPanel(e),t||this.parent.element.appendChild(e)}renderTable(){const e=this.getPanel();e.appendChild(this.createHeaderTable()),this.setTable(e.querySelector(".e-table")),this.parent.getFrozenColumns()||this.parent.getFrozenRightColumnsCount()||this.parent.getFrozenLeftColumnsCount()||(this.initializeHeaderDrag(),this.initializeHeaderDrop()),this.parent.notify(wc,{rows:this.rows,args:{isFrozen:this.parent.isFrozenGrid()}})}getPanel(){return this.headerPanel}setPanel(e){this.headerPanel=e}getTable(){return this.headerTable}setTable(e){this.headerTable=e}getColGroup(){return this.colgroup}setColGroup(e){return this.colgroup=e}getRows(){return this.getTable().tHead.rows}createHeaderTable(){const e=this.createTable(),t=this.getPanel().querySelector("."+qd);return t.appendChild(e),t}createHeader(e=null,t){const i=this.parent,s=i.isFrozenGrid();this.getTable()&&!s&&Yt(this.getTable());const n=this.parent.createElement("table",{className:Kd,attrs:{cellspacing:"0.25px",role:"grid"}}),o=t||(i.getFrozenLeftCount()?"frozen-left":"frozen-right"),r=this.createHeaderContent(o),l=r.thead,a=this.parent.createElement(sp,{className:this.parent.frozenRows?"":"e-hide"});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});const h=this.parent.createElement(np),c=this.parent.createElement("tr");let d;const p=this.rows=r.rows;for(let u=0,m=p.length;u<m;u++)for(let e=0,t=p[u].cells.length;e<t;e++)d=this.parent.createElement("td"),c.appendChild(d);return(i.allowFiltering||i.allowSorting||i.allowGrouping)&&n.classList.add("e-sortfilter"),this.updateColGroup(h),a.appendChild(c),n.appendChild(this.setColGroup(h)),n.appendChild(l),n.appendChild(a),n.appendChild(this.caption),this.ariaService.setOptions(n,{colcount:i.getColumns().length.toString()}),n}createTable(e=null){return this.createHeader(e)}createHeaderContent(e){const t=this.parent;let i=1;const s=t.getFrozenMode(),n=t.getColumns(),o=this.parent.createElement("thead"),r=this.parent.createElement("tr",{className:"e-columnheader"}),l=new hp(this.serviceLocator,kd.Header,t);l.element=r;let a,h=[];this.colDepth=function(e){let t=0;for(let i=0;i<e.length;i++){const s=nm(e[i],0);t<s&&(t=s)}return t+1}(t.columns);for(let d=0,p=this.colDepth;d<p;d++)h[d]=this.generateRow(d),h[d].cells=[];"Right"!==s&&(h=this.ensureColumns(h)),h=this.getHeaderCells(h,e),"Right"===s&&(i=0,h=this.ensureColumns(h));const c=this.parent.getFrozenColumns();if(this.parent.isRowDragable()&&this.parent.isFrozenGrid()&&h[0].cells[i]){const e=h[0].cells[i].column.getFreezeTableName();"movable"===e||s===Jd&&e===Zd?"Right"===s?h[0].cells.pop():h[0].cells.shift():c||e!==ep?"Right"===s&&e===Zd&&(h[0].cells[h[0].cells.length-1].column.freeze="Right"):h[0].cells[0].column.freeze=e===ep?"Left":"Right"}for(let d=0,p=this.colDepth;d<p;d++)a=l.render(h[d],n),this.parent.rowHeight&&a.querySelector(".e-headercell")&&(a.style.height=this.parent.rowHeight+"px"),o.appendChild(a);return{thead:o,rows:h}}updateColGroup(e){let t,i=this.parent.getColumns();const s=this.parent.getColumnIndexesInView();if(this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()&&(i=Ve([],this.parent.getColumns()),i.splice(0,this.parent.getFrozenColumns())),e.id=this.parent.element.id+np,this.parent.allowGrouping)for(let n=0,o=this.parent.groupSettings.columns.length;n<o;n++)this.parent.enableColumnVirtualization&&-1===s.indexOf(n)||(t=this.parent.createElement("col",{className:"e-group-intent"}),e.appendChild(t));(this.parent.detailTemplate||this.parent.childGrid)&&(t=this.parent.createElement("col",{className:"e-detail-intent"}),e.appendChild(t)),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(t=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(t));for(let n=0,o=i.length;n<o;n++)t=this.parent.createElement("col"),!1===i[n].visible&&ei(t,{display:"none"}),e.appendChild(t);return this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&(t=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(t)),e}ensureColumns(e){const t=this.parent,i=this.parent.getColumnIndexesInView();for(let s=0,n=e.length;s<n;s++){if(t.allowGrouping)for(let n=0,o=t.groupSettings.columns.length;n<o;n++)this.parent.enableColumnVirtualization&&-1===i.indexOf(n)||e[s].cells.push(this.generateCell({},kd.HeaderIndent));if(t.detailTemplate||t.childGrid){const t={};this.parent.notify(md,t),e[s].cells.push(this.generateCell(t,kd.DetailHeader))}t.isRowDragable()&&e[s].cells.push(this.generateCell({},kd.RowDragHIcon))}return e}getHeaderCells(e,t){const i=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),s=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(let n=0;n<s.length;n++)this.lockColsRendered=!1,e=this.appendCells(s[n],e,0,0===n,!1,n===s.length-1,i,t);for(let n=0,o=s.length;n<o;n++)this.notfrzIdx=0,this.lockColsRendered=!0,e=this.appendCells(s[n],e,0,0===n,!1,n===o-1,i,t);return e}appendCells(e,t,i,s,n,o,r,l){const a=o?"e-lastcell":"",h=this.parent.isFrozenGrid(),c=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered,d=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered,p=this.parent.getContent().querySelector(".e-movablescrollbar");let u;if(h&&p&&this.parent.enableColumnVirtualization&&(u=p.scrollLeft),e.columns){this.isFirstCol=!1;const n=this.getCellCnt(e,0);if(n){const s=this.getStackedLockColsCount(e,0),o=0===this.parent.lockcolPositionCount||!this.lockColsRendered&&0!==s||this.lockColsRendered&&n-s!=0,r=h&&this.ensureStackedFrozen(e.columns,l,!1);(!h&&o||r)&&t[i].cells.push(new zd({cellType:kd.StackedHeader,column:e,colSpan:this.getColSpan(n,s,e.columns,l,h)}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(let a=0;a<e.columns.length;a++)t=this.appendCells(e.columns[a],t,i+1,s,0===a,a===e.columns.length-1&&o,r,l);if(this.lockColsRendered)for(let a=0,h=e.columns.length;a<h;a++){const n=this.isFirstCol=e.columns[a].visible&&!this.isFirstCol&&1!==h;t=this.appendCells(e.columns[a],t,i+1,s,n,a===h-1&&o,r,l)}}else(u&&u>0&&this.parent.contentModule.isXaxis()&&0!==this.parent.inViewIndexes[0]&&"movable"===e.getFreezeTableName()||!h&&c||h&&e.getFreezeTableName()===l&&d)&&t[i].cells.push(this.generateCell(e,kd.Header,this.colDepth-i,(s?"":n?"e-firstcell":"")+a,i,this.parent.getColumnIndexByUid(e.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;return t}ensureStackedFrozen(e,t,i){const s=e.length;for(let n=0;n<s;n++)if(e[n].columns)i=this.ensureStackedFrozen(e[n].columns,t,i);else if(e[n].getFreezeTableName()===t){i=!0;break}return i}getStackedLockColsCount(e,t){if(e.columns)for(let i=0;i<e.columns.length;i++)t=this.getStackedLockColsCount(e.columns[i],t);else e.lockColumn&&t++;return t}getColSpan(e,t,i,s,n){return n?e=this.getFrozenColSpan(i,s,0):this.parent.lockcolPositionCount&&(e=this.lockColsRendered?e-t:t),e}getFrozenColSpan(e,t,i){const s=e.length;for(let n=0;n<s;n++)e[n].columns?i=this.getFrozenColSpan(e[n].columns,t,i):e[n].getFreezeTableName()===t&&e[n].visible&&i++;return i}generateRow(e){return new Pd({})}generateCell(e,t,i,s,n,o){const r={visible:e.visible,isDataCell:!1,isTemplate:!qe(e.headerTemplate),rowID:"",column:e,cellType:t,rowSpan:i,className:s,index:n,colIndex:o};return(!r.rowSpan||r.rowSpan<2)&&delete r.rowSpan,new zd(r)}setVisible(e){const t=this.parent;let i,s;const n=t.getFrozenColumns();for(let o=0,r=e.length;o<r;o++){const r=e[o];if(s=t.getNormalizedColumnIndex(r.uid),i=r.visible?"":"none",n){const e=this.parent.isRowDragable()?n+1:n;ei(s<e?this.getColGroup().children[s]:t.getHeaderContent().querySelector("."+Wd).querySelector(np).children[s-e],{display:i})}else ei(this.getColGroup().children[s],{display:i})}this.refreshUI()}colPosRefresh(){this.refreshUI()}refreshUI(){const e=this.parent.isFrozenGrid(),t=this.parent.enableColumnVirtualization&&e,i=this.getPanel();this.toggleStackClass(i);let s=this.freezeReorder?this.headerPanel.querySelector("."+Wd).querySelector(".e-table"):this.getTable(),n=this.parent.isFrozenGrid()?this.parent.getFrozenLeftCount()?"frozen-left":"frozen-right":void 0;if(t&&(s=this.parent.contentModule.getVirtualFreezeHeader(),n=this.parent.contentModule.isXaxis()?"movable":n),s){Yt(s),s.removeChild(s.firstChild),s.removeChild(s.childNodes[0]);const o=this.parent.createElement(np),r=this.createHeaderContent(n);this.rows=r.rows,s.insertBefore(r.thead,s.firstChild),this.updateColGroup(o),s.insertBefore(this.setColGroup(o),s.firstChild),t||this.setTable(s),this.appendContent(s),this.parent.notify(Cc,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),(!e||this.parent.enableColumnVirtualization&&e)&&this.initializeHeaderDrag();const l=[].slice.call(i.querySelectorAll("tr.e-columnheader"));for(const e of l){const t=[].slice.call(e.getElementsByClassName("e-grouptopleftcell"));t.length&&t[t.length-1].classList.add("e-lastgrouptopleftcell")}e||this.parent.notify(wc,{rows:this.rows,args:{isFrozen:e}}),this.parent.enableColumnVirtualization&&ku(s,Wd)&&this.parent.notify(wc,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&"Header"===this.parent.textWrapSettings.wrapMode&&Wu(l,!0)}}toggleStackClass(e){this.parent.columns.some(e=>!qe(e.columns))?e.classList.add("e-stackedheader"):e.classList.remove("e-stackedheader")}appendContent(e){this.getPanel().querySelector("."+qd).appendChild(e)}getCellCnt(e,t){if(e.columns)for(let i=0,s=e.columns.length;i<s;i++)t=this.getCellCnt(e.columns[i],t);else e.visible&&t++;return t}initializeHeaderDrag(){(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)&&(this.draggable=new Wi(this.parent.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}))}initializeHeaderDrop(){new _i(this.parent.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})}renderCustomToolbar(){const e=this.parent;if("Vertical"===e.rowRenderingMode&&!e.toolbar&&(e.allowSorting||e.allowFiltering&&"FilterBar"!==e.filterSettings.type)){const t=e.createElement("div",{className:"e-res-toolbar e-toolbar"}),i=e.createElement("div",{className:"e-toolbar-items"}),s=e.createElement("div",{className:"e-toolbar-left"}),n=this.parent.allowFiltering&&this.parent.allowSorting?2:1;for(let o=0;o<n;o++){const t=e.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),i=1===n?this.parent.allowSorting?"sort":"filter":1===o?"sort":"filter",r=e.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),l=e.createElement("span",{className:"e-btn-icon e-res"+i+"-icon e-icons"});r.appendChild(l),new _s.a({}).appendTo(r),r.onclick=e=>{e.target.classList.contains("e-ressort-btn")||e.target.classList.contains("e-ressort-icon")?this.parent.showResponsiveCustomSort():this.parent.showResponsiveCustomFilter()},t.appendChild(r),s.appendChild(t)}i.appendChild(s),t.appendChild(i),e.element.insertBefore(t,this.parent.element.querySelector(".e-gridheader"))}else e.enableAdaptiveUI&&!e.toolbar&&e.getContent().classList.add("e-responsive-header")}updateCustomResponsiveToolbar(e){const t=this.parent.element.querySelector(".e-responsive-toolbar");"toolbar"===e.module&&(t?Yt(t):this.renderCustomToolbar())}}class bp{constructor(e,t){this.localizer=t.getService("localization"),this.formatter=t.getService("valueFormatter"),this.parent=e,this.element=this.parent.createElement("TD",{className:Hd,attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox"}})}getGui(){return""}format(e,t,i){return qe(e.format)||("number"===e.type&&isNaN(parseInt(t,10))&&(t=null),t=this.formatter.toView(t,e.getFormatter())),qe(t)?"":t.toString()}evaluate(e,t,i,s,n,o){let r;if(t.column.template){const o=this.parent.isReact&&"string"!=typeof t.column.template,l=["index"],a=im({},i,{[Zc]:n,column:t.column}),h=this.parent.element.id+t.column.uid,c="isStringTemplate";if(o){const i={index:s[l[0]]};t.column.getColumnTemplate()(Ve(i,a),this.parent,"columnTemplate",h,this.parent[c],null,e),this.parent.renderTemplates()}else r=t.column.getColumnTemplate()(Ve({index:s[l[0]]},a),this.parent,"template",h,this.parent[c]);return o||Pu(e,r),this.parent.notify("template-result",{template:r}),r=null,e.setAttribute("aria-label",e.innerText+" is template cell column header "+t.column.headerText),!1}return!0}invokeFormatter(e,t,i){var s;return qe(e.formatter)||(t=(s=e.formatter).prototype&&"getValue"in s.prototype?(new(0,e.formatter)).getValue(e,i):"function"==typeof e.formatter?e.formatter(e,i):e.formatter.getValue(e,i)),t}render(e,t,i,s,n){return this.refreshCell(e,t,i,n)}refreshTD(e,t,i,s){const n="Batch"===this.parent.editSettings.mode&&e.classList.contains("e-editedbatchcell");if(this.parent.isReact){e.innerHTML="";const o=e.cellIndex,r=e.parentElement;Yt(e);const l=this.refreshCell(t,i,s,n);this.cloneAttributes(l,e),r.cells.length!==o-1?r.insertBefore(l,r.cells[o]):r.appendChild(l)}else{const o=this.refreshCell(t,i,s,n);e.innerHTML="",e.setAttribute("aria-label",o.getAttribute("aria-label"));const r=[].slice.call(o.childNodes);for(const t of r)e.appendChild(t)}}cloneAttributes(e,t){const i=t.attributes;let s,n=i.length;for(;n--;)s=i[n],e.setAttribute(s.name,s.value)}refreshCell(e,t,i,s){const n=this.element.cloneNode(),o=e.column;let r;e.isForeignKey&&(r=e.foreignKeyData[0]||{[o.foreignKeyValue]:o.format?null:""});let l=this.getGui(),a=e.isForeignKey?this.getValue(o.foreignKeyValue,r,o):this.getValue(o.field,t,o);if("date"!==o.type&&"datetime"!==o.type||qe(a)||(a=new Date(a)),a=this.format(o,a,t),l=a.toString(),"boolean"===o.type&&!o.displayAsCheckBox){const e="true"!==a&&"false"!==a?null:"true"===a?"True":"False";l=e?this.localizer.getConstant(e):l}const h=this.invokeFormatter(o,a,t);if(l=qe(o.formatter)?l:qe(h)?"":h.toString(),n.setAttribute("aria-label",l+" column header "+e.column.headerText),this.evaluate(n,e,t,i,r,s)&&"checkbox"!==o.type)this.appendHtml(n,l,o.getDomSetter?o.getDomSetter():"innerHTML");else if("checkbox"===o.type){n.classList.add(Xd),n.setAttribute("aria-label","checkbox"),a=!!this.parent.selectionSettings.persistSelection&&"true"===a;const e=Object(_s.e)(this.parent.createElement,!1,{checked:a,label:" "});e.insertBefore(this.rowChkBox.cloneNode(),e.firstChild),n.appendChild(e)}if("Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0),this.setAttributes(n,e,i),"boolean"===o.type&&o.displayAsCheckBox){const t=isNaN(parseInt(a.toString(),10))?"true"===a:parseInt(a.toString(),10)>0,i=Object(_s.e)(this.parent.createElement,!1,{checked:t,label:" "});n.innerHTML="",i.classList.add("e-checkbox-disabled"),n.appendChild(i),n.setAttribute("aria-label",t+" column header "+e.column.headerText)}return n}appendHtml(e,t,i="innerHTML"){return e[i]=t,e}setAttributes(e,t,i){const s=t.column;this.buildAttributeFromCell(e,t,"checkbox"===s.type),Du(e,i),Du(e,t.attributes),s.customAttributes&&Du(e,s.customAttributes),"Vertical"===this.parent.rowRenderingMode&&Du(e,{"data-cell":s.headerText}),s.textAlign&&(e.style.textAlign=s.textAlign),"Clip"===s.clipMode||!s.clipMode&&"Clip"===this.parent.clipMode?e.classList.add("e-gridclip"):("EllipsisWithTooltip"===s.clipMode||!s.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==s.type&&e.classList.add("e-ellipsistooltip")}buildAttributeFromCell(e,t,i){const s={},n=tp,o=[];t.colSpan&&(s.colSpan=t.colSpan),t.rowSpan&&(s.rowSpan=t.rowSpan),t.isTemplate&&o.push("e-templatecell"),t.isSelected&&(o.push("e-selectionbackground","e-active"),i&&e.querySelector(".e-frame").classList.add("e-check")),t.isColumnSelected&&o.push("e-columnselection"),t.cellType===kd.Header?s[n]=t.colIndex:qe(t.index)||(s[n]=t.index),t.visible||o.push("e-hide"),s.class=o,Du(e,s)}getValue(e,t,i){return i.valueAccessor(e,t,i)}}class yp{setOptions(e,t){const i=Object.keys(t);for(let s=0;s<i.length;s++)vp(e,Cp[i[s]],t[i[s]])}setExpand(e,t){vp(e,Cp.expand,t)}setSort(e,t){vp(e,Cp.sort,t,"boolean"==typeof t)}setBusy(e,t){vp(e,Cp.busy,t),vp(e,Cp.invalid,null,!0)}setGrabbed(e,t,i){vp(e,Cp.grabbed,t,i)}setDropTarget(e,t){vp(e,Cp.dropeffect,"copy",!t)}}function vp(e,t,i,s){s&&e?e.removeAttribute(t):e&&e.setAttribute(t,i)}const Cp={expand:"aria-expanded",role:"role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"};class wp extends bp{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-headercell",attrs:{role:"columnheader",tabindex:"-1"}}),this.ariaService=new yp,this.hTxtEle=this.parent.createElement("span",{className:"e-headertext"}),this.sortEle=this.parent.createElement("div",{className:"e-sortfilterdiv e-icons"}),this.gui=this.parent.createElement("div"),this.chkAllBox=this.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox"}})}getGui(){return this.gui.cloneNode()}render(e,t,i){const s=this.element.cloneNode(),n=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,s,n)}refresh(e,t){this.clean(t);const i=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,t,i)}clean(e){e.innerHTML=""}prepareHeader(e,t,i){const s=e.column,n={},o=this.getGui();let r,l;if(Xt(o,{"e-mappinguid":s.uid,class:"e-headercelldiv"}),qe(s.headerValueAccessor)||(r=this.getValue(s.headerText,s)),"checkbox"!==s.type){let e=s.headerText;qe(r)||(e=r);const t=this.hTxtEle.cloneNode();t[s.getDomSetter()]=e,o.appendChild(t)}else{s.editType="booleanedit";const e=Object(_s.e)(this.parent.createElement,!1,{checked:!1,label:" "});e.insertBefore(this.chkAllBox.cloneNode(),e.firstChild),o.appendChild(e),o.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(t,e),this.appendHtml(t,o),t.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&s.allowFiltering&&!qe(s.field)&&(!this.parent.showColumnMenu||!s.showColumnMenu)){Xt(i,{"e-mappinguid":"e-flmenu-"+s.uid}),t.classList.add("e-fltr-icon");const e=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==e.length){const t=this.parent.getForeignKeyColumns();for(let n=0;n<this.parent.columns.length;n++)for(let o=0;o<this.parent.filterSettings.columns.length;o++)if(this.parent.filterSettings.columns[o].field===s.field||t.length&&s.foreignKeyValue===this.parent.filterSettings.columns[o].field){i.classList.add("e-filtered"),e.push(s.field);break}}t.appendChild(i.cloneNode())}e.className&&t.classList.add(e.className),s.customAttributes&&Du(t,s.customAttributes),s.allowSorting&&(n.sort="none"),s.allowGrouping&&(n.grabbed=!1),t=this.extendPrepareHeader(s,t);const a=this.parent,h=a.getColumnIndexByField(s.field);if(!qe(s.headerTemplate)){const e=a.element.id+s.uid+"headerTemplate",i="isStringTemplate",n=s;if(this.parent.isReact&&"string"!=typeof s.headerTemplate){const o={index:h};t.firstElementChild.innerHTML="",s.getHeaderTemplate()(Ve(o,n),a,"headerTemplate",e,this.parent[i],null,t.firstElementChild),this.parent.renderTemplates()}else l=s.getHeaderTemplate()(Ve({index:h},n),a,"headerTemplate",e,this.parent[i]),t.firstElementChild.innerHTML="",Pu(t.firstElementChild,l)}if(this.ariaService.setOptions(t,n),!qe(s.headerTextAlign)||!qe(s.textAlign)){const e=s.headerTextAlign||s.textAlign;o.style.textAlign=e,"Right"===e||"Left"===e?t.classList.add("Right"===e?"e-rightalign":"e-leftalign"):"Center"===e&&t.classList.add("e-centeralign")}return"Clip"===s.clipMode||!s.clipMode&&"Clip"===this.parent.clipMode?t.classList.add("e-gridclip"):("EllipsisWithTooltip"===s.clipMode||!s.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==s.type&&t.classList.add("e-ellipsistooltip"),t.setAttribute("aria-rowspan",(qe(e.rowSpan)?1:e.rowSpan).toString()),t.setAttribute("aria-colspan","1"),this.parent.trigger(Wh,{cell:e,node:t}),t}getValue(e,t){return t.headerValueAccessor(e,t)}extendPrepareHeader(e,t){if(this.parent.showColumnMenu&&e.showColumnMenu&&!qe(e.field)){const i=this.parent.createElement("div",{className:"e-icons e-columnmenu"}),s=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==s.length)for(let t=0;t<this.parent.columns.length;t++)for(let n=0;n<this.parent.filterSettings.columns.length;n++)if(this.parent.filterSettings.columns[n].field===e.field){i.classList.add("e-filtered"),s.push(e.field);break}t.classList.add("e-fltr-icon"),t.appendChild(i)}if(this.parent.allowResizing){const i=this.parent.createElement("div");i.className=e.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",t.appendChild(i)}return t}appendHtml(e,t){return e.appendChild(t),e}}class Sp extends bp{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{role:"columnheader",tabindex:"-1"}})}render(e,t,i){const s=this.element.cloneNode(),n=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":e.column.uid}}),o=e.column;if(s.appendChild(n),qe(o.headerTemplate)?this.appendHtml(n,o.headerText,o.getDomSetter()):Pu(n,o.getHeaderTemplate()(o,this.parent,"headerTemplate")),e.column.toolTip&&s.setAttribute("title",e.column.toolTip),"Clip"===o.clipMode||!o.clipMode&&"Clip"===this.parent.clipMode?s.classList.add("e-gridclip"):("EllipsisWithTooltip"===o.clipMode||!o.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&s.classList.add("e-ellipsistooltip"),qe(e.column.textAlign)||(n.style.textAlign=e.column.textAlign),e.column.customAttributes&&Du(s,e.column.customAttributes),s.setAttribute("colspan",e.colSpan.toString()),s.setAttribute("aria-colspan",e.colSpan.toString()),s.setAttribute("aria-rowspan","1"),this.parent.allowResizing){const t=this.parent.createElement("div");t.className=e.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",s.appendChild(t)}return this.parent.trigger(Wh,{cell:e,node:s}),s}}class Ep extends bp{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-indentcell"})}render(e,t){const i=this.element.cloneNode();return Du(i,e.attributes),i}}class xp extends bp{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:this.parent.element.id+"captioncell",role:"gridcell",tabindex:"-1"}})}render(e,t){const i=this.element.cloneNode(),s=this.parent;let n,o;t.headerText=e.column.headerText,e.isForeignKey&&(o=this.format(e.column,e.column.valueAccessor("foreignKey",t,e.column)));const r=e.isForeignKey?o:e.column.enableGroupByFormat?t.key:this.format(e.column,e.column.valueAccessor("key",t,e.column));if(qe(s.groupSettings.captionTemplate))i.innerHTML=s.groupSettings.enableLazyLoading?e.column.headerText+": "+r:e.column.headerText+": "+r+" - "+t.count+" "+this.localizer.getConstant(t.count<2?"Item":"Items");else{const e=this.parent.isReact&&"string"!=typeof s.groupSettings.captionTemplate;if(e){const e=s.element.id+"captionTemplate";Ru(s.groupSettings.captionTemplate)(t,this.parent,"captionTemplate",e,null,null,i),this.parent.renderTemplates()}else n=this.parent.isVue?Ru(s.groupSettings.captionTemplate)(t,this.parent):Ru(s.groupSettings.captionTemplate)(t);e||Pu(i,n)}return i.setAttribute("colspan",e.colSpan.toString()),i.setAttribute("aria-label",i.innerHTML+" is groupcaption cell"),i.setAttribute("title",i.innerHTML),i}}class Rp extends bp{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-groupcaption"})}render(e,t){const i=this.element.cloneNode();return i.innerHTML="&nbsp;",i.setAttribute("colspan",e.colSpan.toString()),i}}class Dp extends Ep{render(e,t,i,s){const n=this.element.cloneNode();return n.className=s?"e-recordplusexpand":"e-recordpluscollapse",n.setAttribute("ej-mappingname",t.field),n.setAttribute("ej-mappingvalue",t.key),n.setAttribute("aria-expanded",s?"true":"false"),n.setAttribute("tabindex","-1"),n.appendChild(this.parent.createElement("div",{className:s?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow"})),n}}class Tp extends bp{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-grouptopleftcell"})}render(e,t){const i=this.element.cloneNode();return i.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),i}}class Mp extends bp{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-detailheadercell"})}render(e,t){const i=this.element.cloneNode();return i.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),i}}class Ip extends bp{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",role:"gridcell",tabindex:"-1"}})}render(e,t,i){const s=this.element.cloneNode();return i&&!qe(i.class)?(s.className="",s.className=i.class,s.appendChild(this.parent.createElement("div",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow"}))):s.appendChild(this.parent.createElement("div",{className:"e-icons e-dtdiagonalright e-icon-grightarrow"})),s}}class kp extends bp{constructor(){super(...arguments),this.element=this.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{role:"gridcell",tabindex:"-1"}})}render(e,t){const i=this.element.cloneNode();return i.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon"})),e.isSelected&&(i.classList.add("e-selectionbackground"),i.classList.add("e-active")),i}}class Fp extends bp{constructor(){super(...arguments),this.element=this.parent.createElement("TH",{className:"e-rowdragheader"})}render(e,t){const i=this.element.cloneNode();return i.appendChild(Nt("div",{className:"e-emptycell"})),i}}class Ap{constructor(e,t){this.emptyGrid=!1,this.counter=0,this.parent=e,this.locator=t,this.data=new Ld(e,t),this.l10n=t.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}render(){const e=this.parent;this.headerRenderer=this.renderer.getRenderer(Fd.Header),this.contentRenderer=this.renderer.getRenderer(Fd.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),e.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),"auto"!==this.parent.height&&this.parent.scrollModule.setPadding(),this.refreshDataManager()}refresh(e={requestType:"refresh"}){const t=this.parent;t.notify(`${e.requestType}-begin`,e),t.trigger(Gh,e,(e={requestType:"refresh"})=>{if(e.cancel)t.notify(rd,e);else{if("delete"===e.requestType&&t.allowPaging){const i=e.data.length,s=t.pageSettings.totalRecordsCount-i;t.getCurrentViewRecords().length-i||!s||(t.pageSettings.currentPage-1)*t.pageSettings.pageSize!==s||(t.prevPageMoving=!0,t.setProperties({pageSettings:{totalRecordsCount:s,currentPage:Math.ceil(s/t.pageSettings.pageSize)}},!0),t.pagerModule.pagerObj.totalRecordsCount=s)}"reorder"===e.requestType&&this.parent.dataSource&&"result"in this.parent.dataSource||("paging"===e.requestType||"columnstate"===e.requestType||"reorder"===e.requestType)&&this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]?this.contentRenderer.refreshContentRows(e):this.refreshDataManager(e)}})}resetTemplates(){const e=this.parent,t=e.getColumns();if(e.detailTemplate){const t=e.element.id+"detailTemplate";Rs[t]=[],Ts(t)}e.groupSettings.captionTemplate&&Ts(e.element.id+"captionTemplate"),e.rowTemplate&&Ts(e.element.id+"rowTemplate"),e.toolbarTemplate&&Ts(e.element.id+"toolbarTemplate"),e.pageSettings.template&&Ts(e.element.id+"_template");for(let i=0;i<t.length;i++)t[i].template&&(Rs[e.element.id+t[i].uid]=[],Ts(e.element.id+t[i].uid)),t[i].headerTemplate&&Ts(e.element.id+t[i].uid+"headerTemplate"),t[i].filterTemplate&&Ts(e.element.id+t[i].uid+"filterTemplate");for(let i=0;i<e.aggregates.length;i++)for(let t=0;t<e.aggregates[i].columns.length;t++)e.aggregates[i].columns[t].footerTemplate&&Ts(e.element.id+e.aggregates[i].columns[t].guid+"footerTemplate"),e.aggregates[i].columns[t].groupFooterTemplate&&Ts(e.element.id+e.aggregates[i].columns[t].guid+"groupFooterTemplate"),e.aggregates[i].columns[t].groupCaptionTemplate&&Ts(e.element.id+e.aggregates[i].columns[t].guid+"groupCaptionTemplate")}refreshComplete(e){this.parent.trigger(_h,e)}refreshDataManager(e={}){let t;"virtualscroll"===e.requestType||e.isCaptionCollapse||this.parent.showSpinner(),this.parent.notify("reset-infinite-blocks",e),this.emptyGrid=!1;const i=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector(".e-content"),!0),i){const i=new Gs.c;t=this.getFData(i,e)}if(t=t?t.then(t=>{const i=this.data.generateQuery().requiresCount();if(this.emptyGrid){const e=new Gs.c;return e.resolve({result:[],count:0}),e.promise}return this.data.getData(e,i)}):this.data.getData(e,this.data.generateQuery().requiresCount()),this.parent.getForeignKeyColumns().length&&(!i||this.parent.searchSettings.key.length)){const i=new Gs.c;t=t.then(s=>(this.parent.notify(Qc,{dataManager:t,result:s,promise:i,action:e}),i.promise))}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(t=t.then(e=>this.validateGroupRecords(e))),t.then(t=>this.dataManagerSuccess(t,e)).catch(t=>this.dataManagerFailure(t,e))}getFData(e,t){return this.parent.notify(Qc,{isComplex:!0,promise:e,action:t}),e.promise}isNeedForeignAction(){const e=this.parent;return!!(e.allowFiltering&&e.filterSettings.columns.length||e.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())}foreignKey(e){return e.some(e=>{let t=!1;return t=this.parent.filterSettings.columns.some(t=>e.uid===t.uid),!(!t&&!this.parent.searchSettings.key.length)})}sendBulkRequest(e){e.requestType="batchsave";const t=this.data.saveChanges(e.changes,this.parent.getPrimaryKeyFieldNames()[0],e.original),i=this.data.generateQuery().requiresCount();this.data.dataManager.dataSource.offline?this.refreshDataManager({requestType:"batchsave"}):t.then(t=>{this.data.getData(e,i).then(t=>this.dmSuccess(t,e)).catch(t=>this.dmFailure(t,e))}).catch(t=>this.dmFailure(t,e))}dmSuccess(e,t){this.dataManagerSuccess(e,t)}dmFailure(e,t){this.dataManagerFailure(e,t)}renderEmptyRow(){this.emptyRow(!0)}emptyRow(e){const t=this.parent;let i=this.contentRenderer.getTable().querySelector(sp);qe(i)||Yt(i),i=this.parent.createElement(sp);let s=0;(t.detailTemplate||t.childGrid)&&++s;const n=this.parent.createElement("tr",{className:"e-emptyrow"});n.appendChild(this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(t.getVisibleColumns().length+s+t.groupSettings.columns.length).toString()}})),i.appendChild(n),this.contentRenderer.renderEmpty(i),e&&(this.parent.trigger(Kh,{}),this.parent.notify(bc,{rows:[new Pd({isDataRow:!0,cells:[new zd({isDataCell:!0,visible:!0})]})]}))}dynamicColumnChange(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])}updateColumnType(e){const t=this.parent.getColumns();let i;const s="customFormat",n=e&&e.items?e.items[0]:e,o=this.locator.getService("valueFormatter");for(let r=0,l=t.length;r<l;r++){i=em(t[r].field||"",n),qe(t[r][s])||(t[r].format=t[r][s]),qe(t[r].validationRules)||qe(t[r].validationRules.equalTo)||(t[r].validationRules.equalTo[0]=this.parent.element.id+t[r].validationRules.equalTo[0]),t[r].isForeignColumn()&&t[r].columnData&&(i=em(t[r].foreignKeyValue||"",t[r].columnData[0])),qe(i)?t[r].type=t[r].type||null:(this.isColTypeDef=!0,t[r].type||(t[r].type=i.getDay?i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0?"datetime":"date":typeof i));const e=new Hh;t[r].format&&(t[r].format.skeleton||t[r].format.format&&"string"==typeof t[r].format.format)&&(t[r].setFormatter(e.getFormatFunction(Ve({},t[r].format))),t[r].setParser(e.getParserFunction(t[r].format))),"string"==typeof t[r].format?Gu(this.locator,t[r]):t[r].format||"number"!==t[r].type||t[r].setParser(o.getParserFunction({format:"n2"}))}}dataManagerSuccess(e,t){const i=this.parent;this.contentRenderer=this.renderer.getRenderer(Fd.Content),this.headerRenderer=this.renderer.getRenderer(Fd.Header),e.actionArgs=t;const s=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&("delete"===t.requestType||"save"===t.requestType&&"add"===this.parent.infiniteScrollModule.requestType);i.trigger(hc,e,n=>{if(n.cancel)return;n.result=qe(n.result)?[]:n.result;const o=Object.keys(n.result).length;if(!this.parent.isDestroyed)if(i.getColumns().length||o||i.columns.length&&i.columns[0]instanceof Nh)if(!this.isInfiniteEnd(t)||o){if(this.parent.isEdit=!1,this.parent.notify("edit-reset",{}),this.parent.notify(qc,{}),this.contentRenderer.prevCurrentView=this.parent.currentViewData.slice(),i.currentViewData=n.result,i.notify("refresh-infinite-current-view-data",{args:t,data:n.result}),!o&&n.count&&i.allowPaging&&t&&"delete"!==t.requestType)return!this.parent.groupSettings.enableLazyLoading||"grouping"!==t.requestType&&"ungrouping"!==t.requestType||this.parent.notify("grouping-complete",t),i.prevPageMoving=!0,i.pageSettings.totalRecordsCount=n.count,"paging"!==t.requestType&&(i.pageSettings.currentPage=Math.ceil(n.count/i.pageSettings.pageSize)),void i.dataBind();if((i.getColumns().length||!o)&&this.isLayoutRendered||Zu(i)||this.updatesOnInitialRender(n),!this.isColTypeDef&&i.getCurrentViewRecords()&&this.updateColumnType(this.data.dataManager.dataSource.offline&&i.dataSource&&i.dataSource.length?i.dataSource[0]:i.getCurrentViewRecords()[0]),this.parent.isInitialLoad||!this.parent.groupSettings.disablePageWiseAggregates||this.parent.groupSettings.columns.length||(n.result=this.parent.dataSource instanceof Array?this.parent.dataSource:this.parent.currentViewData),!this.parent.isReact&&!this.parent.isVue||qe(t)||"infiniteScroll"===t.requestType||t.isFrozen||Em(this.parent,["footerTemplate"]),this.parent.notify(mc,Ve({count:n.count,result:n.result,aggregates:n.aggregates},t)),(i.groupSettings.columns.length||t&&"ungrouping"===t.requestType)&&t&&"filtering"!==t.requestType&&this.headerRenderer.refreshUI(),o)Zu(i)&&(t.scrollTop={top:this.contentRenderer.content.scrollTop}),s?this.parent.notify(yd,{e:t,result:e.result,count:e.count,agg:e.aggregates}):this.parent.enableImmutableMode?this.contentRenderer.immutableModeRendering(t):this.contentRenderer.refreshContentRows(t);else{if(t&&t.isCaptionCollapse)return;if(!i.getColumns().length)return i.element.innerHTML="",void alert(this.l10n.getConstant("EmptyDataSourceError"));if(this.contentRenderer.setRowElements([]),this.contentRenderer.setRowObjects([]),this.ariaService.setBusy(this.parent.getContent().querySelector(".e-content"),!1),this.renderEmptyRow(),t){const e=(t.requestType||"").toLowerCase()+"-complete";this.parent.notify(e,t),"batchsave"===t.requestType&&(t.cancel=!1,t.rows=[],t.isFrozen=0!==this.parent.getFrozenColumns()&&!t.isFrozen,this.parent.trigger(_h,t))}this.parent.hideSpinner()}this.parent.notify(Hc,{}),this.setRowCount(this.parent.getCurrentViewRecords().length),this.parent.getDataModule().isQueryInvokedFromData=!1}else this.parent.notify(yd,{e:t,result:e.result,count:e.count,agg:e.aggregates});else i.hideSpinner()})}dataManagerFailure(e,t){this.ariaService.setOptions(this.parent.getContent().querySelector(".e-content"),{busy:!1,invalid:!0}),this.setRowCount(1),this.parent.trigger(Uh,{error:e}),this.parent.hideSpinner(),"save"!==t.requestType&&"delete"!==t.requestType&&"bulk-save"!==t.name&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.log("actionfailure",{error:e}))}setRowCount(e){this.ariaService.setOptions(this.parent.getHeaderTable(),{rowcount:e?e.toString():"1"})}isInfiniteEnd(e){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&"delete"===e.requestType}updatesOnInitialRender(e){this.isLayoutRendered=!0,this.parent.columns.length<1&&this.buildColumns(e.result[0]),Mu(this.parent.columns,null,this.parent),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(Vc,{})}iterateComplexColumns(e,t,i){const s=Object.keys(e);for(let n=0;n<s.length;n++)("object"!=typeof e[s[n]]||!e[s[n]]||e[s[n]]instanceof Date?[]:Object.keys(e[s[n]])).length?this.iterateComplexColumns(e[s[n]],t+(s[n]+"."),i):(i[this.counter]=t+s[n],this.counter++)}buildColumns(e){const t=[],i={};this.iterateComplexColumns(e,"",i);const s=Object.keys(i).filter(e=>"BlazId"!==i[e]).map(e=>i[e]);for(let n=0,o=s.length;n<o;n++)t[n]={field:s[n]},this.parent.enableColumnVirtualization&&(t[n].width=qe(t[n].width)?200:t[n].width);this.parent.setProperties({columns:t},!0)}instantiateRenderer(){this.renderer.addRenderer(Fd.Header,new fp(this.parent,this.locator)),this.renderer.addRenderer(Fd.Content,new gp(this.parent,this.locator));const e=this.locator.getService("cellRendererFactory");e.addCellRenderer(kd.Header,new wp(this.parent,this.locator)),e.addCellRenderer(kd.Data,new bp(this.parent,this.locator)),e.addCellRenderer(kd.StackedHeader,new Sp(this.parent,this.locator)),e.addCellRenderer(kd.Indent,new Ep(this.parent,this.locator)),e.addCellRenderer(kd.GroupCaption,new xp(this.parent,this.locator)),e.addCellRenderer(kd.GroupCaptionEmpty,new Rp(this.parent,this.locator)),e.addCellRenderer(kd.Expand,new Dp(this.parent,this.locator)),e.addCellRenderer(kd.HeaderIndent,new Tp(this.parent,this.locator)),e.addCellRenderer(kd.StackedHeader,new Sp(this.parent,this.locator)),e.addCellRenderer(kd.DetailHeader,new Mp(this.parent,this.locator)),e.addCellRenderer(kd.RowDragHIcon,new Fp(this.parent,this.locator)),e.addCellRenderer(kd.DetailExpand,new Ip(this.parent,this.locator)),e.addCellRenderer(kd.DetailFooterIntent,new Ep(this.parent,this.locator)),e.addCellRenderer(kd.RowDragIcon,new kp(this.parent,this.locator))}addEventListener(){this.parent.isDestroyed||(this.parent.on(pc,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(vc,this.refresh,this),this.parent.on("refresh-complete",this.refreshComplete,this),this.parent.on(Nc,this.sendBulkRequest,this),this.parent.on(Jc,()=>{this.emptyGrid=!0},this),this.parent.on(Vc,this.dynamicColumnChange,this))}validateGroupRecords(e){const t=e.result.length-1;if(t<0)return Promise.resolve(e);const i=e.result[0],s=e.result[t],n=[],o=e=>{const t=[i,s];for(let i=0;i<t.length;i++)n.push(new Gs.d("field","==",t[i].field).and(this.getPredicate("key","equal",t[i].key)));e.where(Gs.d.or(n))},r=new Gs.e;o(r);const l=new Gs.a(e.result).executeLocal(r),a=this.data.generateQuery(!0),h=[];if(this.data.isRemote()){const e=[i,s];for(let t=0;t<e.length;t++)h.push(this.getPredicate(e[t].field,"equal",e[t].key));a.where(Gs.d.or(h))}else o(a);const c=new Gs.c;return this.data.getData({},a).then(t=>{this.updateGroupInfo(l,t.result),c.resolve(e)}).catch(e=>c.reject(e)),c.promise}getPredicate(e,t,i){return i instanceof Date?Ju({field:e,operator:t,value:i}):new Gs.d(e,t,i)}updateGroupInfo(e,t){const i=new Gs.a(t),s=e;for(let n=0;n<s.length;n++){const e=i.executeLocal((new Gs.e).where(new Gs.d("field","==",s[n].field).and(this.getPredicate("key","equal",s[n].key))))[0];s[n].count=e.count;const t=s[n].items,o=e.items;t.GroupGuid&&(s[n].items=this.updateGroupInfo(s[n].items,e.items));const r=this.parent.aggregates;for(let i=0;i<r.length;i++){const l=r[i];for(let i=0;i<l.columns.length;i++){const r=l.columns[i].type instanceof Array?l.columns[i].type:[l.columns[i].type];for(let a=0;a<r.length;a++){const h=l.columns[i].field+" - "+r[a].toLowerCase(),c=t.level?o.records:e.items,d=this.parent;if("Custom"===r[a]){const r=t.level?o:e;let a=l.columns[i].customAggregate;"string"==typeof a&&(a=Pe(a,window)),s[n].aggregates[h]=a?a.call(d,r,l.columns[i]):""}else s[n].aggregates[h]=Gs.b.aggregates[r[a].toLowerCase()](c,l.columns[i].field)}}}}return e}}class Op{constructor(){this.cellRenderMap={}}addCellRenderer(e,t){e="string"==typeof e?e:He(kd,e),qe(this.cellRenderMap[e])&&(this.cellRenderMap[e]=t)}getCellRenderer(e){if(e="string"==typeof e?e:He(kd,e),qe(this.cellRenderMap[e]))throw`The cellRenderer ${e} is not found`;return this.cellRenderMap[e]}}class Lp{constructor(e,t){this.sortedCols=[],this.sortPredicate=[],this.isCustomDialog=!1,this.parent=e,this.serviceLocator=t,this.addEventListener()}addEventListener(){this.evtHandlers=[{event:Sd,handler:this.closeCustomDialog},{event:Ed,handler:this.refreshCustomFilterOkBtn},{event:"render-responsive-cmenu",handler:this.renderResponsiveContextMenu},{event:"filter-cmenu-select",handler:this.renderCustomFilterDiv},{event:"custom-filter-close",handler:this.customExFilterClose},{event:"refresh-cutsom-filter-clear-button",handler:this.refreshCustomFilterClearBtn}],Cm(this.parent,this.evtHandlers,!0,this),this.onActionCompleteFn=this.editComplate.bind(this),this.parent.addEventListener(_h,this.onActionCompleteFn)}customExFilterClose(){this.isCustomDlgRender=!1}renderCustomFilterDiv(){const e=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),t=e.querySelector(".e-dlg-custom-header"),i=e.querySelector(".e-dlg-closeicon-btn");this.isCustomDlgRender=!0,this.parent.filterModule.filterModule.closeDialog(),this.saveBtn.element.style.display="",this.refreshCustomFilterOkBtn({disabled:!1}),this.backBtn.element.style.display="none",i.style.display="",t.innerHTML=this.parent.localeObj.getConstant("CustomFilter");const s=this.customResponsiveDlg.element.querySelector(".e-dlg-content");this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"}),s.appendChild(this.customExcelFilterParent)}renderResponsiveContextMenu(e){if(this.action===Ad.isFilter){const t=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),i=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),s=i.querySelector(".e-dlg-closeicon-btn"),n=i.querySelector(".e-dlg-custom-header");if(e.isOpen){t.firstChild.style.display="none",t.appendChild(e.target),s.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",n.innerHTML=e.header;const i=this.parent.createElement("button"),o=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"});i.appendChild(o),this.backBtn=new _s.a({cssClass:"e-res-back-btn"}),this.backBtn.appendTo(i),n.parentElement.insertBefore(i,n)}else this.backBtn&&!this.isCustomDlgRender&&(t.firstChild.style.display="",Yt(this.backBtn.element),s.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),n.innerHTML=this.getHeaderTitle({action:Ad.isFilter},e.col))}}refreshCustomFilterClearBtn(e){this.filterClearBtn&&(this.isFiltered=e.isFiltered,this.filterClearBtn.element.style.display=e.isFiltered?"":"none")}refreshCustomFilterOkBtn(e){this.saveBtn&&(this.saveBtn.disabled=e.disabled)}renderResponsiveContent(e){const t=this.parent;if(e)return this.filterParent=this.parent.createElement("div",{className:"e-mainfilterdiv e-default-filter",id:e.uid+"-main-filter"}),this.filterParent;{const e=t.getColumns();this.customColumnDiv=t.createElement("div",{className:"columndiv",styles:"width: 100%"});const i=t.createElement("div",{className:"e-ressortbutton-parent"}),s=[],n=this.action===Ad.isSort,o=this.action===Ad.isFilter;if(o)for(let r=0;r<t.filterSettings.columns.length;r++)s.push(t.filterSettings.columns[r].field);for(let r=0;r<e.length;r++){if(!e[r].visible||!e[r].allowSorting&&n||!e[r].allowFiltering&&o)continue;const l=t.createElement("div",{className:"e-responsivecoldiv"});l.setAttribute("data-e-mappingname",e[r].field),l.setAttribute("data-e-mappinguid",e[r].uid);const a=t.createElement("span",{innerHTML:e[r].headerText,className:"e-res-header-text"});if(l.appendChild(a),this.customColumnDiv.appendChild(l),n){const s=this.getSortedFieldsAndDirections("field").indexOf(e[r].field),n=t.createElement("button",{id:t.element.id+e[r].field+"sortbutton"}),o=i.cloneNode();o.appendChild(n),l.appendChild(o),new _s.a({cssClass:"e-ressortbutton"}).appendTo(n),n.innerHTML=s>-1?this.parent.sortSettings.columns[s].direction:"None",n.onclick=e=>{this.sortButtonClickHandler(e.target)}}if(o&&s.indexOf(e[r].field)>-1){const i=t.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),s=t.createElement("span",{className:"e-icons e-res-icon e-filterset"});s.setAttribute("colType",e[r].type),i.appendChild(s),l.appendChild(i)}}return Bt.add(this.customColumnDiv,"click",this.customFilterColumnClickHandler,this),this.customColumnDiv}}getSortedFieldsAndDirections(e){const t=[];for(let i=0;i<this.parent.sortSettings.columns.length;i++)t.push(this.parent.sortSettings.columns[i][e]);return t}sortButtonClickHandler(e){if(e){const t=ku(e,"e-responsivecoldiv").getAttribute("data-e-mappingname");this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(e));const i=e.textContent,s="None"===i?"Ascending":"Ascending"===i?"Descending":"None";e.innerHTML=s,this.setSortedCols(t,s)}}resetSortButtons(e){const t=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton"));for(let i=0;i<t.length;i++)t[i]!==e&&(t[i].innerHTML="None")}setSortedCols(e,t){const i=this.getCurrentSortedFields().indexOf(e);this.parent.allowMultiSorting&&i>-1&&(this.sortedCols.splice(i,1),this.sortPredicate.splice(i,1)),this.isSortApplied=!0,"None"!==t&&(this.sortedCols.push(e),this.sortPredicate.push({field:e,direction:t}))}getCurrentSortedFields(){const e=[];for(let t=0;t<this.sortedCols.length;t++)e.push(this.sortedCols[t]);return e}customFilterColumnClickHandler(e){if(this.action!==Ad.isFilter)return;const t=this.parent,i=e.target;if("FilterBar"!==t.filterSettings.type)if(i.classList.contains("e-responsivecoldiv")||i.parentElement.classList.contains("e-responsivecoldiv")){let e=i.getAttribute("data-e-mappingname");if(e||(e=i.parentElement.getAttribute("data-e-mappingname")),e){const i=t.getColumnByField(e);this.isRowResponsive=!0,this.showResponsiveDialog(i)}}else if(i.classList.contains("e-filterset")||i.parentElement.classList.contains("e-filtersetdiv")){const e=ku(i,"e-responsivecoldiv");if(e){const s=e.getAttribute("data-e-mappingname"),n=t.getColumnByField(s);("Menu"===n.filter.type||!n.filter.type&&"Menu"===t.filterSettings.type)&&(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(n),this.removeCustomDlgFilterEle(i)}}}showResponsiveDialog(e){if(this.isCustomDialog&&this.action===Ad.isFilter&&!this.isRowResponsive)this.renderCustomFilterDialog();else{if(this.filteredCol=e,this.renderResponsiveDialog(e),this.parent.enableAdaptiveUI&&e&&(this.parent.filterModule.setFilterModel(e),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(e,void 0))),this.action===Ad.isSort){const e={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(cc,e),e.cancel)return}this.customResponsiveDlg.show(!0),this.customResponsiveDlg.element.style.maxHeight="100%",this.setTopToChildDialog(this.customResponsiveDlg.element)}}setTopToChildDialog(e){const t=e.querySelector(".e-dialog");if(t){const i=e.querySelector(".e-dlg-header-content").getBoundingClientRect().height;t.style.top=i+"px"}}renderCustomFilterDialog(e){const t=this.parent;if(this.action===Ad.isFilter&&"FilterBar"===t.filterSettings.type)return;const i=this.parent.createElement("div",{id:t.element.id+"customfilter",className:"e-customfilterdiv e-responsive-dialog"});this.parent.element.appendChild(i),this.customFilterDlg=this.getDialogOptions(e,!0);const s={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"};this.parent.trigger(cc,s),s.cancel||(this.customFilterDlg.appendTo(i),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%")}getDialogOptions(e,t,i){const s=new $o({isModal:!0,showCloseIcon:!0,closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget?this.parent.adaptiveDlgTarget:document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(e),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"}});return s.isStringTemplate=!0,t?(s.header=this.renderResponsiveHeader(e,void 0,!0),s.cssClass="e-customfilter"):(s.header=this.renderResponsiveHeader(e),s.cssClass="Vertical"===this.parent.rowRenderingMode&&this.action===Ad.isFilter?"e-res"+i+" e-row-responsive-filter":"e-res"+i),s}renderResponsiveDialog(e){const t=this.parent;if(this.action===Ad.isFilter&&"FilterBar"===t.filterSettings.type)return;const i=this.action===Ad.isFilter?"filter":"sort",s=this.parent.createElement("div",{id:t.element.id+"responsive"+i,className:"e-res"+i+"div e-responsive-dialog"});this.parent.element.appendChild(s),this.customResponsiveDlg=this.getDialogOptions(e,!1,i),this.customResponsiveDlg.appendTo(s)}dialogCreated(){ym(this.parent)}dialogOpen(){if(this.action===Ad.isSort&&this.parent.allowMultiSorting)for(let e=0;e<this.parent.sortSettings.columns.length;e++)this.sortedCols.push(this.parent.sortSettings.columns[e].field),this.sortPredicate.push({field:this.parent.sortSettings.columns[e].field,direction:this.parent.sortSettings.columns[e].direction})}beforeDialogClose(e){this.isDialogClose=e.element&&!e.element.querySelector(".e-xl-customfilterdiv")&&e.element.classList.contains("e-resfilterdiv"),this.action===Ad.isFilter?e.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):e.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter():this.action===Ad.isSort&&this.closeCustomDialog(),this.parent.off(Dd,this.keyHandler)}sortColumn(){if(this.isSortApplied){this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(let e=0;e<this.sortPredicate.length;e++)this.parent.sortColumn(this.sortPredicate[e].field,this.sortPredicate[e].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting(),this.closeCustomDialog()}else this.closeCustomDialog()}getHeaderTitle(e,t){const i=this.parent;let s;return this.action===Ad.isEdit?s=i.localeObj.getConstant("EditFormTitle")+e.primaryKeyValue[0]:this.action===Ad.isAdd?s=i.localeObj.getConstant("AddFormTitle"):this.action===Ad.isFilter?s=t?t.headerText||t.field:i.localeObj.getConstant("FilterButton"):this.action===Ad.isSort&&(s=i.localeObj.getConstant("Sort")),s}getDialogName(e){let t;return e===Ad.isAdd||e===Ad.isEdit?t="dialogEdit_wrapper_title":e===Ad.isFilter&&(t="responsive_filter_dialog_wrapper"),t}getButtonText(e){let t;return e===Ad.isAdd||e===Ad.isEdit?t="Save":e!==Ad.isFilter&&this.action!==Ad.isSort||(t="OKButton"),t}renderResponsiveHeader(e,t,i){const s=this.parent;s.on(Dd,this.keyHandler,this);const n=s.element.id+this.getDialogName(this.action),o=s.createElement("div",{className:"e-res-custom-element"}),r=s.createElement("div",{className:"e-dlg-custom-header",id:n});r.innerHTML=this.getHeaderTitle(t,e),o.appendChild(r);const l=s.createElement("button");i||(this.saveBtn=new _s.a({cssClass:"e-primary e-flat e-res-apply-btn"}),l.innerHTML=s.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(l),l.onclick=e=>{this.dialogHdrBtnClickHandler()});const a=this.action===Ad.isSort,h=this.action===Ad.isFilter;if(h||a){const e=a?"sort":"filter",t=s.createElement("button");if(this.filterClearBtn=new _s.a({cssClass:"e-primary e-flat e-res-"+e+"-clear-btn"}),h){const e=s.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"});t.appendChild(e)}else t.innerHTML=s.localeObj.getConstant("Clear");o.appendChild(t),this.filterClearBtn.appendTo(t),t.onclick=e=>{ku(e.target,"e-customfilter")?(this.parent.filterModule.clearFiltering(),this.removeCustomDlgFilterEle()):h?this.filterClear():(this.resetSortButtons(),this.sortedCols=[],this.sortPredicate=[],this.isSortApplied=!0)},o.appendChild(t)}return i||o.appendChild(l),o}filterClear(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol),this.parent.filterModule.filterModule.closeResponsiveDialog()}dialogHdrBtnClickHandler(){this.action===Ad.isEdit||this.action===Ad.isAdd?this.parent.endEdit():this.action===Ad.isFilter?this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}):this.action===Ad.isSort&&this.sortColumn()}closeCustomDialog(){this.isCustomDlgRender?Yt(this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv")):(this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog())}destroyCustomFilterDialog(){if(!this.customResponsiveDlg)return;const e=document.getElementById(this.customResponsiveDlg.element.id);this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&e&&(this.customResponsiveDlg.destroy(),Yt(e)),this.closeCustomFilter(),this.action===Ad.isSort&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)}closeCustomFilter(){if(!this.isDialogClose&&this.customFilterDlg){const e=document.getElementById(this.customFilterDlg.element.id);this.customFilterDlg&&!this.customFilterDlg.isDestroyed&&e&&(this.customFilterDlg.destroy(),Yt(e))}this.isCustomDialog=!1,this.isDialogClose=!1}removeCustomDlgFilterEle(e){if(e)e.parentElement.classList.contains("e-filtersetdiv")?Yt(e.parentElement):Yt(e);else{const t=this.customColumnDiv.children;for(let i=0;i<t.length;i++)(e=t[i].querySelector(".e-filtersetdiv"))&&(Yt(e),i--)}}keyHandler(e){13===e.keyCode&&(this.action===Ad.isFilter&&e.target.classList.contains("e-searchinput")||this.action===Ad.isEdit||this.action===Ad.isAdd)&&this.dialogHdrBtnClickHandler()}editComplate(e){"save"!==e.requestType&&"cancel"!==e.requestType||this.parent.off(Dd,this.keyHandler)}removeEventListener(){this.customColumnDiv&&Bt.remove(this.customColumnDiv,"click",this.customFilterColumnClickHandler),Cm(this.parent,this.evtHandlers,!0,this),this.parent.removeEventListener(_h,this.onActionCompleteFn)}}class Pp{constructor(){this.services={}}register(e,t){qe(this.services[e])&&(this.services[e]=t)}getService(e){if(qe(this.services[e]))throw`The service ${e} is not registered`;return this.services[e]}registerAdaptiveService(e,t,i){t?(e.responsiveDialogRenderer=new Lp(e.parent,e.serviceLocator),e.responsiveDialogRenderer.action=i):e.responsiveDialogRenderer&&(e.responsiveDialogRenderer.removeEventListener(),e.responsiveDialogRenderer=void 0)}}class zp{constructor(){this.rendererMap={}}addRenderer(e,t){const i=He(Fd,e);qe(this.rendererMap[i])&&(this.rendererMap[i]=t)}getRenderer(e){const t=He(Fd,e);if(qe(this.rendererMap[t]))throw`The renderer ${t} is not found`;return this.rendererMap[t]}}class Bp{constructor(e){this.parent=e}setWidthToColumns(){let e=0;const t=this.parent.getColumnIndexesInView();let i=!0,s=0;if(this.parent.allowGrouping)for(let o=this.parent.groupSettings.columns.length;e<o;e++)this.parent.enableColumnVirtualization&&-1===t.indexOf(e)?i=!1:this.setColumnWidth(new Nh({width:"30px"}),e);(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new Nh({width:"30px"}),e),e++),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(this.setColumnWidth(new Nh({width:"30px"}),e),e++);const n=this.parent.getColumns();for(let o=0;o<n.length;o++)this.setColumnWidth(n[o],i&&this.parent.enableColumnVirtualization?void 0:o+e);this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&this.setColumnWidth(new Nh({width:"30px"}),n.length),s=this.getTableWidth(this.parent.getColumns()),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(s)}setMinwidthBycalculation(e){let t=0;const i=this.parent.getColumns().filter(e=>qe(e.width)||"auto"===e.width);if(i.length){t=qe(this.parent.width)||"auto"===this.parent.width||"string"!=typeof this.parent.width||-1!==this.parent.width.indexOf("%")?this.parent.element.getBoundingClientRect().width-e:("string"==typeof this.parent.width?parseInt(this.parent.width,10):this.parent.width)-e;let s=0;for(const e of i)s+=qe(e.minWidth)?0:"string"==typeof e.minWidth?parseInt(e.minWidth,10):e.minWidth;for(let n=0;n<i.length;n++){0===e&&this.parent.allowResizing&&this.isWidthUndefined()&&n!==i.length-1&&this.setUndefinedColumnWidth(i);const o=this.parent.getColumnIndexByField(i[n].field)+this.parent.getIndentCount();0!==e&&t<s?this.setWidth(i[n].minWidth,o):0!==e&&t>s&&this.setWidth("",o,!0)}}}setUndefinedColumnWidth(e){for(let t=0;t<e.length;t++)t!==e.length-1&&(e[t].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[t].field)))}setColumnWidth(e,t,i){if(this.parent.getColumns().length<1)return;const s=qe(t)?this.parent.getNormalizedColumnIndex(e.uid):t,n=this.getWidth(e),o=this.getTableWidth(this.parent.getColumns());null!==n&&(this.setWidth(n,s),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(o),(this.parent.allowResizing&&"resize"===i||this.parent.getFrozenColumns()&&this.parent.allowResizing)&&this.setWidthToTable(),this.parent.notify(Ac,{index:s,width:n,column:e,module:i}))}setWidth(e,t,i){this.parent.groupSettings.columns.length>t&&lm(this.parent)&&(e=(30/this.parent.element.offsetWidth*100).toFixed(1)+"%");const s=this.parent.getHeaderTable(),n=this.parent.getContentTable(),o=Ke(e);let r,l=this.parent.getFrozenColumns();const a=this.parent.isRowDragable();l=l&&a?l+1:l;const h=this.parent.getHeaderContent().querySelector("."+Wd),c=this.parent.getContent().querySelector("."+jd),d=this.parent.getFrozenLeftColumnsCount(),p=this.parent.getFrozenRightColumnsCount(),u=this.parent.getMovableColumnsCount(),m=0!==d||0!==p;if(l&&t>=l){if(!h||!h.querySelector(np))return;r=h.querySelector(np).children[t-l]}else if(this.parent.enableColumnVirtualization&&l&&this.parent.contentModule.isXaxis()&&h.scrollLeft>0){const e=h.querySelector(np);r=e.children[e.children.length-1-t]}else if(m){let e;if(d&&!p)e=(t=a?t-1:t)<d?s:h;else if(!d&&p)e=t>=u?s:h;else if(d&&p){t=a?t-1:t;const i=this.parent.getFrozenRightHeader();e=t<d?s:t<d+u?h:i}if(r=this.getColumnLevelFrozenColgroup(t,d,u,e),!r)return}else r=s.querySelector(np).children[t];let g;if(r&&!i?r.style.width=o:r&&i&&(r.style.width=""),l&&t>=l)g=this.parent.getContent().querySelector("."+jd).querySelector(np).children[t-l];else if(this.parent.enableColumnVirtualization&&l&&this.parent.contentModule.isXaxis()&&c.scrollLeft>0){const e=this.parent.getContent().querySelector("."+jd).querySelector(np);g=e.children[e.children.length-1-t]}else if(m){let e;if(d&&!p&&(e=t<d?n:c),!d&&p&&(e=t>=u?n:c),d&&p){const i=this.parent.getContent().querySelector(".e-frozen-right-content");e=t<d?n:t<d+u?c:i}g=this.getColumnLevelFrozenColgroup(t,d,u,e)}else g=n.querySelector(np).children[t];if(g&&!i?g.style.width=o:g&&i&&(g.style.width=""),!this.parent.enableColumnVirtualization){const e=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),i=[];for(let t=0;t<e.length;t++)if(ku(e[t],"e-grid").id===this.parent.element.id)for(let s=0;s<e[t].querySelector("colgroup").children.length;s++)i.push(e[t].querySelector("colgroup").children[s]);e.length&&i.length&&(i[t].style.width=o)}this.parent.isFrozenGrid()&&this.refreshFrozenScrollbar()}getColumnLevelFrozenColgroup(e,t,i,s){if(!s||!s.querySelector(np))return null;const n=this.parent.getColumns(),o=this.parent.isRowDragable(),r=this.parent.getFrozenMode();let l;const a=[].slice.call(s.querySelector(np).children);return l="Right"===r&&o&&e===i+this.parent.getFrozenRightColumnsCount()?a[a.length-1]:o&&-1===e?a[0]:"Left"===n[e].freeze?a[o?e+1:e]:"Right"===n[e].freeze?a[e-(t+i)]:a[e-t],l}refreshFrozenScrollbar(){const e={cancel:!1};if(this.parent.notify("prevent-frozen-scroll-refresh",e),e.cancel)return;const t=Nu(),i=this.parent.element.querySelector(".e-frozenscrollbar"),s=this.parent.element.querySelector(".e-movablescrollbar"),n=this.parent.getContent().querySelector("."+Gd),o=this.parent.getContent().querySelector("."+jd);let r=n.firstElementChild.getBoundingClientRect().width,l=o.firstElementChild.getBoundingClientRect().width;if("Right"===this.parent.getFrozenMode()&&(r+=t),i.style.width=r+"px",this.parent.getFrozenMode()===Jd){const e=this.parent.element.querySelector(".e-frozen-right-scrollbar");let i=this.parent.getContent().querySelector(".e-frozen-right-content").firstElementChild.getBoundingClientRect().width;"auto"!==this.parent.height&&(i+=t),e.style.width=i+"px"}else{if(this.parent.enableColumnVirtualization){const e=this.parent.getMovableVirtualContent().querySelector(".e-virtualtrack");e&&(l=e.scrollWidth)}"Right"!==this.parent.getFrozenMode()&&"auto"!==this.parent.height&&(l+=t)}s.firstElementChild.style.width=l+"px"}getSiblingsHeight(e){return this.getHeightFromDirection(e,"previous")+this.getHeightFromDirection(e,"next")}getHeightFromDirection(e,t){let i=e[t+"ElementSibling"],s=0;const n=["e-gridheader",Vd,"e-groupdroparea","e-gridpager","e-toolbar"];for(;i;)n.some(e=>i.classList.contains(e))&&(s+=i.offsetHeight),i=i[t+"ElementSibling"];return s}isWidthUndefined(){const e=this.parent.getColumns().filter(e=>qe(e.width)&&qe(e.minWidth)).length;return this.parent.getColumns().length===e}getWidth(e){if(qe(e.width)&&this.parent.allowResizing&&qe(e.minWidth)&&!this.isWidthUndefined()&&(e.width=200),this.parent.isFrozenGrid()&&qe(e.width)&&(e.getFreezeTableName()===ep||e.getFreezeTableName()===Zd)&&(e.width=200),!e.width)return null;const t=parseInt(e.width.toString(),10);return e.minWidth&&t<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&t>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width}getTableWidth(e){let t=0;for(const i of e){let e=this.getWidth(i);"auto"===i.width&&(e=0),!1!==i.visible&&null!==e&&(t+=parseInt(e.toString(),10))}return t}calcMovableOrFreezeColWidth(e){const t=this.parent.getColumns().slice(),i=this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenColumns(),s=this.parent.getMovableColumnsCount(),n=this.parent.getFrozenRightColumnsCount();return"movable"===e?(n&&t.splice(i+s,t.length),i&&t.splice(0,i)):"freeze-left"===e?t.splice(i,t.length):"freeze-right"===e&&t.splice(0,i+s),Ke(this.getTableWidth(t))}setWidthToFrozenRightTable(){let e=this.calcMovableOrFreezeColWidth("freeze-right");e=this.isAutoResize()?"100%":e;const t=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(".e-table"),i=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(".e-table");t.style.width=e,i.style.width=e}setWidthToFrozenLeftTable(){let e=this.calcMovableOrFreezeColWidth("freeze-left");e=this.isAutoResize()?"100%":e,this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e}setWidthToMovableTable(){let e="";const t=this.parent.getColumns().filter(e=>qe(e.width)).length>=1,i=this.parent.getColumns().filter(e=>"auto"===e.width).length>=1;"number"!=typeof this.parent.width||t||i?t||i||(e=this.calcMovableOrFreezeColWidth("movable")):e=Ke(this.parent.width-parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0],10)-5),e=this.isAutoResize()?"100%":e,this.parent.getHeaderContent().querySelector("."+Wd).firstElementChild&&(this.parent.getHeaderContent().querySelector("."+Wd).firstElementChild.style.width=e),this.parent.getContent().querySelector("."+jd).firstElementChild.style.width=e}setWidthToFrozenEditTable(){let e=this.calcMovableOrFreezeColWidth("freeze");e=this.isAutoResize()?"100%":e,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=e}setWidthToMovableEditTable(){let e=this.calcMovableOrFreezeColWidth("movable");e=this.isAutoResize()?"100%":e,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=e}setWidthToTable(){let e=Ke(this.getTableWidth(this.parent.getColumns()));this.parent.isFrozenGrid()?((this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount())&&this.setWidthToFrozenLeftTable(),this.setWidthToMovableTable(),this.parent.getFrozenRightColumnsCount()&&this.setWidthToFrozenRightTable()):((this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new Nh({width:"30px"})),e=this.isAutoResize()?"100%":e,this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e);const t=this.parent.element.querySelector(".e-table.e-inline-edit");t&&this.parent.getFrozenColumns()?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):t&&(t.style.width=e)}isAutoResize(){return this.parent.allowResizing&&"Auto"===this.parent.resizeSettings.mode}}class Hp{constructor(e){this.currentInfo={},this.oneTime=!0,this.swap={},this.isInfiniteScroll=!1,this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.parent=e,this.rowModelGen=new cp(this.parent),this.addEventListener()}focusCheck(e){const t=e.target;this.focusByClick=!0,this.skipFocus=t.classList.contains("e-grid")}onFocus(e){if(this.parent.isDestroyed||zt.isDevice||this.parent.enableVirtualization)return;this.setActive(!this.parent.enableHeaderFocus&&0===this.parent.frozenRows,this.parent.isFrozenGrid()),this.parent.enableHeaderFocus||this.parent.getCurrentViewRecords().length||"Batch"===this.parent.editSettings.mode&&("Batch"!==this.parent.editSettings.mode||this.parent.editModule.getBatchChanges().addedRecords.length)||this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new Pd({isDataRow:!0})]}),this.getContent().selector,!1);const t=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(t[0],t[1]),this.skipFocus&&(this.focus(e),this.skipFocus=!1)}passiveFocus(e){this.parent.isDestroyed||e.target&&e.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,Vt([this.currentInfo.element],["e-focused","e-focus"]))}onBlur(e){(!this.parent.isEdit&&(!e||e.relatedTarget&&!Zt(e.relatedTarget,".e-grid"))||qe(e.relatedTarget)&&0===parseInt(e.target.getAttribute("aria-colindex"),10)&&0===parseInt(e.target.getAttribute("index"),10))&&(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.parent.element.tabIndex=0)}onClick(e,t){if(ku(e.target,"e-filterbarcell")&&(ku(e.target,"e-multiselect")||e.target.classList.contains("e-input-group-icon")))return;let i=!qe(Zt(e.target,"."+Nd));const s=!qe(Zt(e.target,".e-gridheader"));i=i&&s?!i:i;let n=!qe(Zt(e.target,"."+Gd))||!qe(Zt(e.target,"."+_d)),o=!1;if(this.parent.getFrozenMode()===Jd&&(o=!qe(Zt(e.target,".e-frozen-right-content"))||!qe(Zt(e.target,".e-frozen-right-header")),n=n&&!o),!i&&qe(Zt(e.target,".e-gridheader"))||e.target.classList.contains(Ud)||!qe(Zt(e.target,".e-unboundcell")))return;if(this.setActive(i,n,o),!i&&qe(Zt(e.target,".e-gridheader")))return void this.clearOutline();const r={cancel:!1,byKey:!1,byClick:!qe(e.target),clickArgs:e};if(this.parent.notify(Rc,r),!r.cancel&&!Zt(e.target,".e-inline-edit")&&(this.setActive(i,n,o),this.getContent())){if(!1===this.getContent().onClick(e,t))return;this.focus()}}onKeyPress(e){if(this.skipOn(e))return;this.activeKey=e.action;const t={cancel:!1,byKey:!0,byClick:!1,keyArgs:e};if(this.parent.notify(Rc,t),t.cancel)return;const i=this.getContent().matrix.current;this.currentInfo.outline=!0;const s=this.getContent().jump(e.action,i);if(this.swap=s,s.swap&&(this.setActive(!s.toHeader,s.toFrozen,s.toFrozenRight),this.getContent().matrix.current=this.getContent().getNextCurrent(i,s,this.active,e.action),this.prevIndexes={}),this.setActiveByKey(e.action,this.getContent()),!1===(!this.content.lastIdxCell&&this.getContent().onKeyPress(e)))return this.clearIndicator(),void("shiftTab"===e.action&&i.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1));e.preventDefault(),this.focus(e)}skipOn(e){const t=e.target;if(!t)return!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(e.action)>-1)return this.clearIndicator(),!0;const i=Zt(t,"th")&&!Zt(t,"th").tabIndex;!e.target.classList.contains("e-filterbaroperator")||13!==e.keyCode&&27!==e.keyCode||Zt(e.target,".e-filterbarcell").querySelector("input").focus(),i&&null!==Zt(document.activeElement,".e-filterbarcell")&&this.removeFocus();let s=null!==Zt(document.activeElement,".e-filterbarcell");if(this.parent.enableHeaderFocus&&s){const e=this.active.matrix,t=e.current;s=e.matrix[t[0]].lastIndexOf(1)!==t[1]}return"delete"===e.action||"Batch"!==this.parent.editSettings.mode&&(this.parent.isEdit||["insert","f2"].indexOf(e.action)>-1)||s||null!==Zt(document.activeElement,"#"+this.parent.element.id+"_searchbar")&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(e.action)>-1||null===Zt(t,"."+Nd)&&null===Zt(t,".e-gridheader")||"space"===e.action&&!t.classList.contains(Xd)&&null===Zt(t,"."+Xd)&&null===Zt(t,".e-headerchkcelldiv")||null!==Zt(t,".e-filter-popup")}focusVirtualElement(e){if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){const t={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify(fd,t);const i=this.actions.some(e=>e===this.activeKey),s=!!this.parent.contentModule&&this.parent.contentModule.selectedRowIndex>-1;t.isAdd||Object.keys(t.virtualData).length||i||t.isCancel||s?(this.parent.notify("reset-virtual-focus",{isCancel:!1}),t.isCancel=!1,this.parent.contentModule.selectedRowIndex=-1,i&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",e)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()}this.isVirtualScroll=this.isInfiniteScroll=!1}getFocusedElement(){return this.currentInfo.elementToFocus}getContent(){return this.active||this.content}setActive(e,t,i){this.active=e?t?this.fContent:i?this.frContent:this.content:t?this.fHeader:i?this.frHeader:this.header}setFocusedElement(e,t){this.currentInfo.elementToFocus=e,setTimeout(()=>{qe(this.currentInfo.elementToFocus)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling?this.focusVirtualElement(t):this.currentInfo.elementToFocus.focus())},0)}focus(e){this.parent.notify("virtaul-cell-focus",e),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)}removeFocus(e){this.currentInfo.element&&(qt([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1)}addOutline(){const e=this.getContent().getFocusInfo();e.element&&(Vt([e.element],["e-focused"]),Vt([e.elementToFocus],["e-focus"]))}focusHeader(){this.setActive(!1,this.parent.isFrozenGrid()),this.resetFocus()}focusContent(){this.setActive(!0,this.parent.isFrozenGrid()),this.resetFocus()}resetFocus(){const e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.focus()}addFocus(e,t){if(this.currentInfo=e,this.currentInfo.outline=e.outline&&!qe(t),this.isInfiniteScroll&&(this.currentInfo.outline=!0),!e.element)return;const i=e.elementToFocus.classList.contains("e-focus");if(i)return;this.currentInfo.outline&&Vt([e.element],["e-focused"]),Vt([e.elementToFocus],["e-focus"]),e.element.tabIndex=0,i||this.setFocusedElement(e.elementToFocus,t),this.parent.notify(Dc,{element:e.elementToFocus,parent:e.element,indexes:this.getContent().matrix.current,byKey:!qe(t),byClick:qe(t),keyArgs:t,isJump:this.swap.swap,container:this.getContent().getInfo(t),outline:!qe(t),swapInfo:this.swap});const[s,n]=this.getContent().matrix.current;this.prevIndexes={rowIndex:s,cellIndex:n},this.focusedColumnUid=this.parent.getColumnByIndex(n).uid,this.focusByClick=!1}refreshMatrix(e){return t=>{e&&t.args&&t.args.isFrozen&&!this.fContent?this.fContent=new jp(this.parent):e&&!this.frContent&&t.args&&t.args.renderFrozenRightContent?this.frContent=new _p(this.parent):e&&!this.content&&(this.content=new Vp(this.parent)),!e&&t.args&&t.args.isFrozen&&!this.fHeader?this.fHeader=new Wp(this.parent):!e&&t.args&&t.args.renderFrozenRightContent&&!this.frHeader?this.frHeader=new Up(this.parent):e||this.header||(this.header=new qp(this.parent));const i=e?t.args&&t.args.isFrozen?this.fContent:t.args&&t.args.renderFrozenRightContent?this.frContent:this.content:t.args&&t.args.isFrozen?this.fHeader:t.args&&t.args.renderFrozenRightContent?this.frHeader:this.header;let s=e?t.rows.slice(this.parent.frozenRows):t.rows;const n=e?t.rows.slice(0,this.parent.frozenRows):t.rows;this.parent.isCollapseStateEnabled()&&e&&(s=s.filter(e=>!1!==e.visible));const o=!qe(this.parent.rowTemplate),r=i.matrix.generate(n,i.selector,o);if("batchAdd"===t.name&&this.parent.isFrozenGrid()){const e=this.parent.getMovableRowsObject().map(e=>e.clone()),t=s.map(e=>e.clone());if(this.fContent.matrix.generate(t,this.fContent.selector,o),this.content.matrix.generate(e,this.content.selector,o),this.parent.getFrozenMode()===Jd){const e=this.parent.getFrozenRightRowsObject().map(e=>e.clone());this.frContent.matrix.generate(e,this.frContent.selector,o)}}else i.matrix.generate(s,i.selector,o);if(i.generateRows(n,{matrix:r,handlerInstance:t.args&&t.args.isFrozen?this.fHeader:t.args&&t.args.renderFrozenRightContent?this.frHeader:this.header}),!zt.isDevice&&t&&t.args&&(this.focusByClick||"paging"!==t.args.requestType||(this.skipFocus=!1,this.parent.element.focus()),"grouping"===t.args.requestType&&(this.skipFocus=!0)),t&&t.args&&"virtualscroll"===t.args.requestType)if(this.currentInfo.uid){let e;if(t.rows.some((t,i)=>(e=i,t.uid===this.currentInfo.uid))){this.content.matrix.current[0]=e,this.content.matrix.current[1]=this.parent.getColumnIndexByUid(this.focusedColumnUid)||0;const t=this.getContent().getFocusInfo().elementToFocus;if(t){const e=t.getBoundingClientRect(),i=this.parent.element.getBoundingClientRect();e.top>=0&&e.left>=0&&e.right<=Math.min(i.right,window.innerWidth||document.documentElement.clientWidth)&&e.bottom<=Math.min(i.bottom,window.innerHeight||document.documentElement.clientHeight)&&(this.isVirtualScroll=!0,this.focus())}}}else if(t.args.focusElement&&t.args.focusElement.classList.contains("e-filtertext")){const e=this.parent.element.querySelector("#"+t.args.focusElement.id);e&&e.focus()}}}addEventListener(){this.parent.isDestroyed||(Bt.add(this.parent.element,"mousedown",this.focusCheck,this),Bt.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=e=>this.passiveFocus(e),!0),Bt.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:Tc,handler:this.onKeyPress},{event:Mc,handler:this.onClick},{event:gc,handler:this.refMatrix},{event:hd,handler:this.refMatrix},{event:"refresh-Expand-and-Collapse",handler:this.refMatrix},{event:wc,handler:this.refreshMatrix()},{event:Td,handler:this.restoreFocus},{event:ud,handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:rc,handler:this.refMatrix},{event:lc,handler:this.refMatrix},{event:ac,handler:this.refMatrix},{event:"detailDataBound",handler:this.refMatrix},{event:bc,handler:this.refMatrix},{event:Dc,handler:this.internalCellFocus}],Cm(this.parent,this.evtHandlers,!0,this))}filterfocus(){"FilterBar"!==this.parent.filterSettings.type&&this.restoreFocus()}removeEventListener(){this.parent.isDestroyed||(Bt.remove(this.parent.element,"mousedown",this.focusCheck),Bt.remove(this.parent.element,"focus",this.onFocus),Bt.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),Cm(this.parent,this.evtHandlers,!1))}destroy(){this.removeEventListener()}restoreFocus(){this.addFocus(this.getContent().getFocusInfo())}restoreFocusWithAction(e){if(!this.parent.enableInfiniteScrolling){const t=this.getContent().matrix,i=t.current;switch(e.requestType){case"grouping":case"ungrouping":i[1]=!i.length||this.parent.groupSettings.showGroupedColumn||qe(t.matrix[i[0]])?"grouping"===e.requestType?i[1]+1:i[1]-1:t.matrix[i[0]].indexOf(1)}this.getContent().matrix.current=i,this.addFocus(this.getContent().getFocusInfo())}}clearOutline(){this.getContent().matrix.current=this.getContent().matrix.get(0,-1,[0,1],"downArrow",this.getContent().validator()),this.clearIndicator()}clearIndicator(){this.currentInfo.element&&this.currentInfo.elementToFocus&&qt([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])}getPrevIndexes(){const e=this.forget;return this.forget=!1,e||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes}forgetPrevious(){this.forget=!0}setActiveByKey(e,t){if(!this.parent.isFrozenGrid()&&0===this.parent.frozenRows)return;let i;const s={home:()=>({toHeader:!i.isContent,toFrozen:!0}),end:()=>({toHeader:!i.isContent,toFrozen:!1}),ctrlHome:()=>({toHeader:!0,toFrozen:this.parent.isFrozenGrid()}),ctrlEnd:()=>({toHeader:!1,toFrozen:!1})};if(!(e in s))return;i=t.getInfo();const n=s[e]();this.setActive(!n.toHeader,n.toFrozen),this.getContent().matrix.current=t.matrix.current}internalCellFocus(e){if(!(e.byKey&&e.container.isContent&&"enter"===e.keyArgs.action&&(e.parent.classList.contains("e-detailcell")||e.parent.classList.contains("e-unboundcell")||e.parent.classList.contains("e-templatecell"))))return;this.clearIndicator();const t=this.getContent().getFocusable(this.getFocusedElement());this.setFocusedElement(t),this.currentInfo.skipAction=!0}}class Np{constructor(){this.matrix=[],this.current=[]}set(e,t,i){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.columns)),this.matrix[e]=this.matrix[e]||[],this.matrix[e][t]=i?1:0}get(e,t,i,s,n){const o=t;if(e+i[0]<0)return[e,t];e=Math.max(0,Math.min(e+i[0],this.rows));let r=!0;if(qe(this.matrix[e]))return null;if(t=Math.max(0,Math.min(t+i[1],this.matrix[e].length-1)),o+i[1]>this.matrix[e].length-1&&n(e,t,s))return[e,o];const l=this.first(this.matrix[e],t,i,!0,s),a=Pe(`${e}.${t=null===l?o:l}`,this.matrix);if(e!==this.rows||"downArrow"!==s&&"enter"!==s||(i[0]=-1),null===l){for(let e=0;e<this.rows;e++)if(this.matrix[e].some(e=>1===e)){r=!1;break}if(r)return[e=this.current[0],t]}return this.inValid(a)||!n(e,t,s)?this.get(e,o,i,s,n):[e,t]}first(e,t,i,s,n){return(t<0||t===e.length)&&this.inValid(e[t])&&"upArrow"!==n&&"downArrow"!==n||!e.some(e=>1===e)?null:this.inValid(e[t])?this.first(e,-1!==["upArrow","downArrow","shiftUp","shiftDown"].indexOf(n)?s?0:++t:t+i[1],i,!1,n):t}select(e,t){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.matrix[e].length-1)),this.current=[e,t]}generate(e,t,i){this.rows=e.length-1,this.matrix=[];for(let s=0;s<e.length;s++){const n=e[s].cells.filter(e=>!0!==e.isSpanned);this.columns=Math.max(n.length-1,0|this.columns);for(let o=0;o<n.length;o++)this.set(s,o,!1!==e[s].visible&&t(e[s],n[o],i))}return this.matrix}inValid(e){return 0===e||void 0===e}}class Vp{constructor(e){this.matrix=new Np,this.lastIdxCell=!1,this.parent=e,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=e=>({home:[this.matrix.current[0],-1,0,1],end:[this.matrix.current[0],this.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[this.matrix.rows,this.matrix.columns+1,0,-1]}[e]||null)}getTable(){return this.parent.isFrozenGrid()?this.parent.getContent().querySelector(".e-movablecontent .e-table"):this.parent.getContentTable()}onKeyPress(e){let t=this.getCurrentFromAction(e.action,this.keyActions[e.action],e.action in this.keyActions,e);if(t){if((["tab","shiftTab"].indexOf(e.action)>-1&&this.matrix.current||[]).toString()===t.toString()){if(t.toString()===[this.matrix.rows,this.matrix.columns].toString()||t.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===t.toString())return!1;t=this.editNextRow(t[0],t[1],e.action)}this.matrix.select(t[0],t[1])}}editNextRow(e,t,i){const s=this.parent,n=s.editSettings.allowNextRowEdit&&(s.isEdit||s.isLastCellPrimaryKey),o=s.getColumnIndexByField(s.getVisibleColumns()[0].field),r=this.getTable().rows[e].cells[t];return"tab"===i&&n&&(e++,t=o+(this.getTable().rows[e].getElementsByClassName("e-indentcell").length+this.getTable().rows[e].getElementsByClassName("e-detailrowcollapse").length)),"shiftTab"===i&&n&&(e--,t=s.getColumnIndexByField(s.getVisibleColumns()[s.getVisibleColumns().length-1].field)),r.classList.contains(Hd)||r.classList.contains("e-headercell")||r.classList.contains("e-groupcaption")?[e,t]:this.editNextRow(e,t,i)}getCurrentFromAction(e,t=[0,0],i,s){if(!i&&!this.indexesByKey(e)||0===this.matrix.current.length)return null;if(!this.shouldFocusChange(s))return this.matrix.current;const[n,o,r,l]=this.indexesByKey(e)||[...this.matrix.current,...t];return this.matrix.get(n,o,[r,l],e,this.validator())}onClick(e,t){let i=e.target;if(this.target=i,i=i.classList.contains(Hd)?i:Zt(i,"td"),i=i||Zt(e.target,"td.e-detailrowcollapse")||Zt(e.target,"td.e-detailrowexpand"),i=Zt(e.target,"td.e-detailcell")&&qe(Zt(Zt(e.target,".e-grid"),"td.e-detailcell"))?null:i,i=i&&Zt(i,"table").classList.contains(Kd)?i:null,!i)return!1;const[s,n]=[i.parentElement.rowIndex,i.cellIndex],[o,r]=this.matrix.current,l=Pe(`${s}.${n}`,this.matrix.matrix);if(this.matrix.inValid(l)||!t&&o===s&&r===n||!ku(e.target,Hd)&&!ku(e.target,"e-groupcaption"))return!1;this.matrix.select(s,n)}getFocusInfo(){const e={},[t=0,i=0]=this.matrix.current;return this.matrix.current=[t,i],e.element=qe(this.getTable().rows[t])?null:this.getTable().rows[t].cells[i],e.element?(e.elementToFocus=e.element.classList.contains("e-unboundcell")||e.element.classList.contains("e-detailcell")?e.element:this.getFocusable(e.element),e.outline=!0,e.uid=e.element.parentElement.getAttribute("data-uid"),e):e}getFocusable(e){let t='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])';const i=!qe(Zt(e,".e-templatecell"));this.parent.isEdit&&(t='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea');const s=[].slice.call(e.querySelectorAll(t));return s.length?i&&s.length>1?this.target:s[0]:e}selector(e,t,i){const s=[kd.Expand,kd.GroupCaption,kd.CaptionSummary,kd.GroupSummary];return(e.isDataRow&&t.visible&&(t.isDataCell||t.isTemplate)||e.isDataRow&&t.cellType===kd.DetailExpand&&qe(t.visible)||!e.isDataRow&&s.indexOf(t.cellType)>-1||t.column&&"checkbox"===t.column.type||t.cellType===kd.CommandColumn||e.isDataRow&&i)&&!("delete"===e.edit&&e.isDirty)}nextRowFocusValidate(e){const t=e;for(let i=e,s=this.matrix.rows;i<=s;i++){if(-1!==this.matrix.matrix[e].indexOf(1))return e;e+=1}return this.lastIdxCell=!0,t}previousRowFocusValidate(e){const t=e;for(let i=e,s=0;i>=s;i--){if(-1!==this.matrix.matrix[e].indexOf(1))return e;if((e-=1)<0)return this.lastIdxCell=!0,t}return t}jump(e,t){let i=this.parent.getFrozenLeftCount()&&("leftArrow"===e||"shiftTab"===e)&&0===t[1];const s=("rightArrow"===e||"tab"===e)&&t[1]===this.matrix.columns,n=this.parent.getFrozenMode()===Jd&&s;"Right"===this.parent.getFrozenMode()&&(i=s),this.lastIdxCell=!1;const o=0!==this.parent.frozenRows&&"shiftEnter"===e;"tab"!==e||this.parent.isEdit||t[1]!==this.matrix.matrix[t[0]].lastIndexOf(1)||this.matrix.matrix.length-1===t[0]||(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1,i=this.parent.isFrozenGrid()),"shiftTab"!==e||this.parent.isEdit||0===t[0]||this.matrix.matrix[t[0]].indexOf(1)!==t[1]||(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[t[0]].length);let r=!1;const l=document.activeElement.parentElement;return(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&l.classList.contains(Yd)&&(r=parseInt(l.getAttribute(ip),10)>0),{swap:!r&&(("upArrow"===e||o)&&0===t[0]||i||n),toHeader:("upArrow"===e||o)&&0===t[0],toFrozen:i,toFrozenRight:n}}getNextCurrent(e=[],t,i,s){const n=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Jd?("leftArrow"!==s&&"shiftTab"!==s||(n[0]=e[0],n[1]=i.matrix.columns+1),this.parent.getFrozenMode()!==Jd||"rightArrow"!==s&&"tab"!==s||(n[0]=e[0],n[1]=-1)):"rightArrow"!==s&&"tab"!==s||(n[0]=e[0],n[1]=-1),"downArrow"!==s&&"enter"!==s||(n[0]=-1,n[1]=e[1]),n}generateRows(e,t){const{matrix:i,handlerInstance:s}=t,n=s.matrix.matrix.length,o=this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type?n+1:n;s.matrix.matrix=s.matrix.matrix.slice(0,o),s.matrix.rows=o,s.matrix.matrix.push(...i),s.matrix.rows+=i.length}getInfo(e){const t=this.getFocusInfo(),[i,s]=this.matrix.current,n=t.element.classList.contains(Hd),o=n||e&&"enter"!==e.action&&(t.element.classList.contains("e-detailrowcollapse")||t.element.classList.contains("e-detailrowexpand")),[r,l]=[Math.min(parseInt(t.element.parentElement.getAttribute(ip),10),i),Math.min(parseInt(t.element.getAttribute(tp),10),s)];return{isContent:!0,isDataCell:n,indexes:[r,l],isSelectable:o}}validator(){const e=this.getTable();return(t,i,s)=>{if(!qe(e.rows[t])){let n;i=e.querySelector(".e-emptyrow")?0:i,n=e.rows[t].cells[0].classList.contains("e-editcell")?e.rows[t].cells[0].querySelectorAll("td")[i]:e.rows[t].cells[i];const o=0!==n.getBoundingClientRect().width;if("enter"===s||"shiftEnter"===s)return o&&n.classList.contains(Hd);if(("shiftUp"===s||"shiftDown"===s)&&n.classList.contains(Hd))return o;if("shiftUp"!==s&&"shiftDown"!==s)return o}return!1}}shouldFocusChange(e){const[t=-1,i=-1]=this.matrix.current;if(t<0||i<0)return!0;const s=Pe(`${t}.cells.${i}`,this.getTable().rows);return!s||"enter"!==e.action&&"shiftEnter"!==e.action||s.classList.contains(Hd)&&!s.classList.contains("e-unboundcell")&&(!s.classList.contains("e-templatecell")||s.classList.contains("e-editedbatchcell"))&&!s.classList.contains("e-detailcell")}getGridSeletion(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection}}class qp extends Vp{constructor(e){super(e)}getTable(){return this.parent.isFrozenGrid()?this.parent.getHeaderContent().querySelector(".e-movableheader .e-table"):this.parent.getHeaderTable()}onClick(e){let t=e.target;if(this.target=t,t=t.classList.contains("e-headercell")?t:Zt(t,"th"),t||0===this.parent.frozenRows||(t=e.target.classList.contains(Hd)?e.target:Zt(e.target,"td")),e.target.classList.contains("e-columnheader")||e.target.querySelector(".e-stackedheadercell"))return!1;if(!t)return;const[i,s]=[t.parentElement.rowIndex,t.cellIndex],n=Pe(`${i}.${s}`,this.matrix.matrix);if(this.matrix.inValid(n))return!1;this.matrix.select(t.parentElement.rowIndex,t.cellIndex)}getFocusInfo(){const e={},[t=0,i=0]=this.matrix.current;return e.element=this.getTable().rows[t].cells[i],qe(e.element)||(e.elementToFocus=this.getFocusable(e.element),e.outline=!e.element.classList.contains("e-filterbarcell")),e}selector(e,t){return t.visible&&(void 0!==t.column.field||t.isTemplate||!qe(t.column.template))||"checkbox"===t.column.type||t.cellType===kd.StackedHeader}jump(e,t){let i=this.parent.getFrozenLeftCount()&&("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&0===t[1];const s=("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&t[1]===this.matrix.columns,n=this.parent.getFrozenMode()===Jd&&s;"Right"===this.parent.getFrozenMode()&&(i=s);const o=0!==this.parent.frozenRows&&"enter"===e;let r,l,a=i||n;const h=this.parent.focusModule.fHeader&&this.parent.focusModule.fHeader.matrix.matrix,c=h&&!qe(h[t[0]]);return this.parent.enableHeaderFocus&&"tab"===e&&(l=this.matrix.matrix.length-1===t[0],r=t[1]===this.matrix.matrix[t[0]].lastIndexOf(1),r&&(this.matrix.current[0]=l?0:this.matrix.current[0]+1,this.matrix.current[1]=-1),this.parent.isFrozenGrid()&&l&&r&&(i=!0,a=!1)),{swap:("downArrow"===e||o)&&t[0]===this.matrix.matrix.length-1||c&&(i||n)||"tab"===e&&l&&r,toHeader:a,toFrozen:i,toFrozenRight:n}}getNextCurrent(e=[],t,i,s){const n=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Jd?(("leftArrow"===s||"shiftLeft"===s&&this.getGridSeletion()||"shiftTab"===s)&&(n[0]=e[0],n[1]=i.matrix.columns+1),this.parent.getFrozenMode()===Jd&&("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(n[0]=e[0],n[1]=-1)):("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(n[0]=e[0],n[1]=-1),"upArrow"!==s&&"shiftEnter"!==s||(n[0]=this.matrix.matrix.length,n[1]=e[1]),n}generateRows(e){const t=this.matrix.matrix.length;if(this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type){this.matrix.rows=++this.matrix.rows;const i=e[0].cells;for(let e=0;e<i.length;e++)this.matrix.set(t,e,i[e].visible&&!1!==i[e].column.allowFiltering)}}getInfo(e){return Ve(super.getInfo(e),{isContent:!1,isHeader:!0})}validator(){return()=>!0}shouldFocusChange(e){const[t,i]=this.matrix.current;if(t<0||i<0)return!0;const s=Pe(`${t}.cells.${i}`,this.getTable().rows);return!s||"enter"!==e.action&&"altDownArrow"!==e.action||!s.classList.contains("e-headercell")}}class jp extends Vp{getTable(){return this.parent.getContent().querySelector(".e-frozencontent .e-table")}jump(e,t){const i=("upArrow"===e||0!==this.parent.frozenRows&&"shiftEnter"===e)&&0===t[0];return"Right"===this.parent.getFrozenMode()?{swap:i||("shiftTab"===e||"leftArrow"===e)&&0===t[1],toHeader:i,toFrozen:i}:{swap:i||("tab"===e||"rightArrow"===e)&&t[1]===this.matrix.columns,toHeader:i,toFrozen:i}}getNextCurrent(e=[],t,i,s){const n=[];return"Right"===this.parent.getFrozenMode()?"rightArrow"!==s&&"tab"!==s||(n[0]=e[0],n[1]=-1):("tab"===s&&this.parent.enableHeaderFocus&&(n[0]=e[0],n[1]=-1),"leftArrow"!==s&&"shiftTab"!==s||(n[0]=e[0],n[1]=i.matrix.columns+1)),"downArrow"!==s&&"enter"!==s||(n[0]=-1,n[1]=e[1]),n}}class Wp extends qp{jump(e,t){const i=0!==this.parent.frozenRows&&"enter"===e,s=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,n=s&&!qe(s[t[0]]);if("Right"===this.parent.getFrozenMode()){const s=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&0===t[1];return{swap:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1||n&&s,toHeader:s,toFrozen:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1}}return{swap:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1||("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&t[1]===this.matrix.columns&&n,toHeader:("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&t[1]===this.matrix.columns,toFrozen:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1}}getTable(){return this.parent.getHeaderContent().querySelector(".e-frozenheader .e-table")}getNextCurrent(e=[],t,i,s){const n=[];return"Right"===this.parent.getFrozenMode()?("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(n[0]=e[0],n[1]=-1):("leftArrow"===s||"shiftLeft"===s&&this.getGridSeletion()||"shiftTab"===s)&&(n[0]=e[0],n[1]=i.matrix.columns+1),"upArrow"!==s&&"shiftEnter"!==s||(n[0]=this.matrix.matrix.length,n[1]=e[1]),n}}class Gp{constructor(e){this.searchBox=e}searchFocus(e){e.target.parentElement.classList.add("e-input-focus")}searchBlur(e){e.target.parentElement.classList.remove("e-input-focus")}wireEvent(){this.searchBox&&(Bt.add(this.searchBox,"focus",this.searchFocus,this),Bt.add(this.searchBox,"blur",this.searchBlur,this))}unWireEvent(){this.searchBox&&(Bt.remove(this.searchBox,"focus",this.searchFocus),Bt.remove(this.searchBox,"blur",this.searchBlur))}}class _p extends Vp{getTable(){return this.parent.getContent().querySelector(".e-frozen-right-content .e-table")}jump(e,t){const i=("upArrow"===e||0!==this.parent.frozenRows&&"shiftEnter"===e)&&0===t[0];return{swap:i||("shiftTab"===e||"leftArrow"===e)&&0===t[1],toHeader:i,toFrozenRight:i}}getNextCurrent(e=[],t,i,s){const n=[];return"rightArrow"!==s&&"tab"!==s||(n[0]=e[0],n[1]=-1),"downArrow"!==s&&"enter"!==s||(n[0]=-1,n[1]=e[1]),n}}class Up extends qp{jump(e,t){const i=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,s=i&&!qe(i[t[0]]),n=0!==this.parent.frozenRows&&"enter"===e,o=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&0===t[1];return{swap:("downArrow"===e||n)&&t[0]===this.matrix.matrix.length-1||s&&o,toHeader:o,toFrozenRight:("downArrow"===e||n)&&t[0]===this.matrix.matrix.length-1}}getTable(){return this.parent.getHeaderContent().querySelector(".e-frozen-right-header .e-table")}getNextCurrent(e=[],t,i,s){const n=[];return("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(n[0]=e[0],n[1]=0),"upArrow"!==s&&"shiftEnter"!==s||(n[0]=this.matrix.matrix.length,n[1]=e[1]),n}}var Kp=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let Yp=(()=>{class e extends Ai{}return Kp([gi(12)],e.prototype,"pageSize",void 0),Kp([gi(8)],e.prototype,"pageCount",void 0),Kp([gi(1)],e.prototype,"currentPage",void 0),Kp([gi()],e.prototype,"totalRecordsCount",void 0),Kp([gi(!1)],e.prototype,"enableQueryString",void 0),Kp([gi(!1)],e.prototype,"pageSizes",void 0),Kp([gi(null)],e.prototype,"template",void 0),e})();var Xp=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let Qp=(()=>{class e extends Ai{}return Xp([gi("startsWith")],e.prototype,"operator",void 0),Xp([gi(!1)],e.prototype,"ignoreAccent",void 0),e})();class $p{constructor(e,t,i){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.deSelectedData=[],this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.autoFillRLselection=!0,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=e,this.selectionSettings=t,this.factory=i.getService("rendererFactory"),this.focus=i.getService("focus"),this.addEventListener(),this.wireEvents()}initializeSelection(){this.parent.log("selection_key_missing"),this.render()}onActionBegin(e,t){this.parent.trigger(t,this.fDataUpdate(e))}fDataUpdate(e){if(!(this.isMultiSelection||qe(e.cellIndex)&&qe(e.rowIndex))){const t=this.getRowObj(qe(e.rowIndex)?qe(e.cellIndex)?this.currentIndex:e.cellIndex.rowIndex:e.rowIndex);e.foreignKeyData=t.foreignKeyData}return e}onActionComplete(e,t){this.parent.trigger(t,this.fDataUpdate(e)),this.isMultiSelection=!1}getModuleName(){return"selection"}destroy(){const e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector("."+Nd))&&(this.hidePopUp(),this.clearSelection(),this.removeEventListener(),this.unWireEvents(),Bt.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),Bt.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))}isEditing(){return("Normal"===this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.isPersistSelection}getSelectedMovableRow(e){const t=this.parent;return t.isFrozenGrid()&&this.parent.getContent().querySelector("."+jd)?t.getMovableRowByIndex(e):null}getSelectedFrozenRightRow(e){const t=this.parent;return t.isFrozenGrid()&&t.getFrozenMode()===Jd&&t.getFrozenRightContent()?t.getFrozenRightRowByIndex(e):null}getCurrentBatchRecordChanges(){const e=this.parent;if("Batch"===e.editSettings.mode&&e.editModule){let t=xu(this.parent.getCurrentViewRecords());t="Bottom"===e.editSettings.newRowPosition?t.concat(this.parent.editModule.getBatchChanges().addedRecords):this.parent.editModule.getBatchChanges().addedRecords.concat(t);const i=this.parent.editModule.getBatchChanges().deletedRecords,s=this.parent.getPrimaryKeyFieldNames()[0];for(let e=0;e<i.length;e++)for(let n=0;n<t.length;n++)if(i[e][s]===t[n][s]){t.splice(n,1);break}return t}return e.getCurrentViewRecords()}selectRow(e,t){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection)return void this.addRowsToSelection([e]);const i=this.parent,s=i.getRowByIndex(e),n=this.getSelectedMovableRow(e),o=this.getSelectedFrozenRightRow(e);let r;if(i.enableVirtualization&&e>-1){const t={selectedIndex:e,isAvailable:!0};this.parent.notify("select-virtual-Row",t);const n=i.isFrozenGrid()?i.contentModule.getRowObjectByIndex(e):null;if(!s||!i.getRowObjectFromUID(s.getAttribute("data-uid"))&&!n)return void(t.isAvailable&&!i.selectionSettings.persistSelection&&this.parent.getSelectedRecords().length>0&&this.clearRowSelection());r=n||i.getRowObjectFromUID(s.getAttribute("data-uid")).data}else r=this.getRowObj(e).data;if(!this.isRowType()||!s||this.isEditing())return;const l=s.hasAttribute("aria-selected");let a;this.activeTarget(),t=t?!(!this.selectedRowIndexes.length||1!==this.selectedRowIndexes.length||this.isKeyAction&&this.parent.isCheckBoxSelection||e!==this.selectedRowIndexes[0]):t,this.isKeyAction=!1;const h="cancel";t?this.rowSelectingCallBack(a,t,e,r,!1,l,h)(a):(a={data:r,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:s,previousRow:i.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},a=this.addMovableArgs(a,n,o),this.parent.trigger(Yh,this.fDataUpdate(a),this.rowSelectingCallBack(a,t,e,r,!1,l,h)))}rowSelectingCallBack(e,t,i,s,n,o,r){return e=>{qe(e)||!0!==e[r]?(this.index=i,this.toggle=t,this.data=s,this.removed=n,o&&this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode?(this.clearSelectedRow(i),this.selectRowCallBack()):!o&&this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&this.selectRowCallBack(),"ResetOnRowClick"===this.selectionSettings.checkboxMode&&this.clearSelection(),(!this.selectionSettings.persistSelection||"ResetOnRowClick"===this.selectionSettings.checkboxMode||!this.parent.isCheckBoxSelection&&this.selectionSettings.persistSelection)&&(this.selectRowCheck=!0,this.clearRow())):this.disableInteracted()}}selectRowCallBack(){const e=this.parent;let t;const i=this.index,s=this.toggle,n=this.data,o=this.removed,r=e.getRowByIndex(i),l=this.getSelectedMovableRow(i),a=this.getSelectedFrozenRightRow(i);s||o||(this.selectedRowIndexes.indexOf(i)<=-1&&(this.updateRowSelection(r,i),this.selectMovableRow(l,a,i)),this.selectRowIndex(i)),s||(t={data:n,rowIndex:i,row:r,previousRow:e.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked},t=this.addMovableArgs(t,l,a),this.onActionComplete(t,Xh)),this.isInteracted=!1,this.updateRowProps(i)}selectMovableRow(e,t,i){this.parent.isFrozenGrid()&&(this.updateRowSelection(e,i),this.parent.getFrozenMode()===Jd&&t&&this.updateRowSelection(t,i))}addMovableArgs(e,t,i){if(this.parent.isFrozenGrid()){const s={mRow:t,previousMovRow:this.parent.getMovableRows()[this.prevRowIndex]},n="frozenRightRow",o="previousFrozenRightRow";this.parent.getFrozenMode()===Jd&&i&&(s[n]=i,s[o]=this.parent.getFrozenRightDataRows()[this.prevRowIndex]),e=Object.assign({},e,s)}return e}selectRowsByRange(e,t){this.selectRows(this.getCollectionFromIndexes(e,t)),this.selectRowIndex(t)}selectRows(e){const t=this.parent,i=this.isSingleSel()?e[e.length-1]:e[0];this.isMultiSelection=!0;const s=[],n=[],o=this.getSelectedMovableRow(i),r=this.getSelectedFrozenRightRow(i),l=[];if(!this.isRowType()||this.isEditing())return;for(let h=0,c=e.length;h<c;h++){const t=this.parent.getDataRows()[e[h]],i=this.getRowObj(t);i&&(l.push(i.data),s.push(t),n.push(i.foreignKeyData))}this.activeTarget();let a={cancel:!1,rowIndexes:e,row:s,rowIndex:i,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:l,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:n};a=this.addMovableArgs(a,o,r),this.parent.trigger(Yh,this.fDataUpdate(a),l=>{if(!qe(l)&&!0===l.cancel)return void this.disableInteracted();this.clearRow(),this.selectRowIndex(e.slice(-1)[0]);const a=e=>{if(this.updateRowSelection(t.getRowByIndex(e),e),t.isFrozenGrid()){const i=this.parent.getFrozenMode()===Jd?t.getFrozenRightRowByIndex(e):void 0;this.selectMovableRow(t.getMovableRowByIndex(e),i,e)}this.updateRowProps(i)};if(this.isSingleSel())a(i);else for(const t of e)a(t);l={rowIndexes:e,row:s,rowIndex:i,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,data:this.getSelectedRecords(),isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:n},l=this.addMovableArgs(l,o,r),this.isRowSelected&&this.onActionComplete(l,Xh),this.isInteracted=!1})}addRowsToSelection(e){const t=this.parent,i=this.target;this.isMultiSelection=!0;const s=t.getSelectedRowIndexes().concat(e),n=this.isSingleSel()?t.getRowByIndex(e[e.length-1]):t.getRowByIndex(e[0]),o=this.isSingleSel()?this.getSelectedMovableRow(e[e.length-1]):this.getSelectedMovableRow(e[0]),r=this.isSingleSel()?this.getSelectedFrozenRightRow(e[e.length-1]):this.getSelectedFrozenRightRow(e[0]);if((!this.isRowType()||this.isEditing())&&!this.selectionSettings.checkboxOnly)return;let l;const a=this.parent.getColumns().filter(e=>"checkbox"===e.type);for(const h of e){const e=this.getRowObj(h),c=this.selectedRowIndexes.indexOf(h)>-1;if(this.selectRowIndex(h),c&&(a.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect(Qh,[h],[e.data],[n],[e.foreignKeyData],i),this.isCancelDeSelect)return;this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(h),1),this.selectedRecords.splice(this.selectedRecords.indexOf(n),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),n.removeAttribute("aria-selected"),this.addRemoveClassesForRow(n,!1,null,"e-selectionbackground","e-active"),o&&(this.selectedRecords.splice(this.selectedRecords.indexOf(o),1),o.removeAttribute("aria-selected"),this.addRemoveClassesForRow(o,!1,null,"e-selectionbackground","e-active")),r&&(this.selectedRecords.splice(this.selectedRecords.indexOf(r),1),r.removeAttribute("aria-selected"),this.addRemoveClassesForRow(r,!1,null,"e-selectionbackground","e-active")),this.rowDeselect($h,[h],[e.data],[n],[e.foreignKeyData],i,[o],void 0,[r]),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1}else{if(this.activeTarget(),l={cancel:!1,data:e.data,rowIndex:h,row:n,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:e.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:s},l=this.addMovableArgs(l,o,r),this.parent.trigger(Yh,this.fDataUpdate(l)),!qe(l)&&!0===l.cancel)return void this.disableInteracted();this.isSingleSel()&&this.clearRow(),this.updateRowSelection(n,h),this.selectMovableRow(o,r,h)}if(c||(l={data:e.data,rowIndex:h,row:n,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:e.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:s},l=this.addMovableArgs(l,o,r),this.onActionComplete(l,Xh)),this.isInteracted=!1,this.updateRowProps(h),this.isSingleSel())break}}getCollectionFromIndexes(e,t){const i=[];let{i:s,max:n}=e<=t?{i:e,max:t}:{i:t,max:e};for(;s<=n;s++)i.push(s);return e>t&&i.reverse(),i}clearRow(){this.clearRowCheck=!0,this.clearRowSelection()}clearRowCallBack(){this.isCancelDeSelect&&"Check"!==this.parent.checkAllRows||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))}clearSelectedRow(e){if(this.toggle){const t=this.parent.getRowByIndex(e);this.disableUI||(t.removeAttribute("aria-selected"),this.addRemoveClassesForRow(t,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(t,!1),this.updateCheckBoxes(t),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(e),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(e)),1)}}updateRowProps(e){this.prevRowIndex=e,this.isRowSelected=this.selectedRowIndexes.length&&!0}updatePersistCollection(e,t){if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!qe(e)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();const i=this.getRowObj(e),s=i.data?i.data[this.primaryKey]:null;if(null===s)return;i.isSelected=t,t?(this.selectedRowState[s]=t,this.persistSelectedData.some(e=>e[this.primaryKey]===s)||this.persistSelectedData.push(i.data)):this.updatePersistDelete(s)}}updatePersistDelete(e){let t;delete this.selectedRowState[e],this.persistSelectedData.some((i,s)=>(t=s,i[this.primaryKey]===e))&&this.persistSelectedData.splice(t,1)}updateCheckBoxes(e,t,i){if(!qe(e)){const s=e.querySelector(".e-checkselect");qe(s)||(Yu(s.nextElementSibling,t),Uu(s,t),(qe(this.checkedTarget)||!qe(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(i))}}updateRowSelection(e,t){if(!e)return;this.selectedRowIndexes.push(t);const i=this.selectedRowIndexes.length;if(this.parent.isFrozenGrid()&&i>1&&this.selectedRowIndexes[i-2]===this.selectedRowIndexes[i-1]&&this.selectedRowIndexes.pop(),this.selectedRecords.push(e),e.setAttribute("aria-selected","true"),this.updatePersistCollection(e,!0),this.updateCheckBoxes(e,!0),this.addRemoveClassesForRow(e,!0,null,"e-selectionbackground","e-active"),!this.preventFocus){let t=this.focus.getPrevIndexes().cellIndex?e.cells[this.focus.getPrevIndexes().cellIndex]:e.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(this.parent.contextMenuModule&&2===this.mouseButton&&(t=this.parent.contextMenuModule.cell),!t)return;this.focus.onClick({target:t},!0)}}clearSelection(){if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=xu(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!qe(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){const e=this.parent.element.querySelector(".e-gridpopup").querySelector("span");e.classList.contains("e-rowselect")&&e.classList.remove("e-spanclicked"),this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1,this.checkSelectAllClicked=!1}}clearRowSelection(){if(this.isRowSelected){const e=this.parent,t=this.parent.getDataRows(),i=[],s=[],n=[],o=[],r=[],l=[],a=this.target;for(let h=0,c=this.selectedRowIndexes.length;h<c;h++){const t="Batch"===this.parent.editSettings.mode?this.parent.getRows()[this.selectedRowIndexes[h]]:this.parent.getDataRows()[this.selectedRowIndexes[h]],a=this.getRowObj(t);if(a&&(i.push(a.data),s.push(t),r.push(this.selectedRowIndexes[h]),l.push(a.foreignKeyData)),e.isFrozenGrid()){const t=e.getMovableRows();if(t&&t.length&&n.push(t[this.selectedRowIndexes[h]]),e.getFrozenMode()===Jd){const t=e.getFrozenRightRows();t&&t.length&&o.push(t[this.selectedRowIndexes[h]])}}}this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect(Qh,r,i,s,l,a,n,()=>{if(this.isCancelDeSelect&&(this.isRowClicked||this.checkSelectAllClicked||this.isInteracted&&!this.parent.isPersistSelection)){if(this.parent.isPersistSelection)if("Intermediate"===this.getCheckAllStatus(this.parent.element.querySelector(".e-checkselectall")))for(let e=0;e<this.selectedRecords.length;e++)this.updatePersistCollection(this.selectedRecords[e],!0);else this.parent.checkAllRows="Check",this.updatePersistSelectedData(!0);return void(this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1)))}const e=[].slice.call(t.filter(e=>e.hasAttribute("aria-selected")));for(let t=0;t<e.length;t++)this.disableUI||(e[t].removeAttribute("aria-selected"),this.addRemoveClassesForRow(e[t],!1,!0,"e-selectionbackground","e-active")),this.isPrevRowSelection||this.updatePersistCollection(e[t],!1),this.updateCheckBoxes(e[t]);for(let t=0,i=this.selectedRowIndexes.length;t<i;t++){const e=this.getSelectedMovableRow(this.selectedRowIndexes[t]);e&&(this.disableUI||(e.removeAttribute("aria-selected"),this.addRemoveClassesForRow(e,!1,!0,"e-selectionbackground","e-active")),this.updateCheckBoxes(e),this.isPrevRowSelection||this.updatePersistCollection(e,!1));const i=this.getSelectedFrozenRightRow(this.selectedRowIndexes[t]);i&&(this.disableUI||(i.removeAttribute("aria-selected"),this.addRemoveClassesForRow(i,!1,!0,"e-selectionbackground","e-active")),this.updateCheckBoxes(i),this.isPrevRowSelection||this.updatePersistCollection(i,!1))}this.selectedRowIndexes=[],this.selectedRecords=[],this.isRowSelected=!1,this.selectRowIndex(-1),this.isPrevRowSelection=!1,this.rowDeselect($h,r,i,s,l,a,n,void 0,o),this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},o)}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))}rowDeselect(e,t,i,s,n,o,r,l,a){if(this.selectionSettings.persistSelection&&(this.isRowClicked||this.checkSelectAllClicked)||!this.selectionSettings.persistSelection){const o="cancel",h=1===t.length&&1===this.deSelectedData.length,c={rowIndex:t[0],data:this.selectionSettings.persistSelection&&"Uncheck"===this.parent.checkAllRows&&!h&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode?this.deSelectedData:i,foreignKeyData:n,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};"rowDeselected"===e&&delete c.cancel;const d="row",p="target",u="rowIndex",m="rowIndexes",g="data",f="foreignKeyData";c[d]=s,c[p]=this.actualTarget,this.actualTarget&&!qe(Zt(this.actualTarget,"thead"))||t.length>1?(c[u]=t[0],c[m]=t):1===t.length&&(c[g]=c[g][0],c[d]=c[d][0],c[f]=c[f][0],this.isAddRowsToSelection&&(c[m]=t)),this.parent.trigger(e,this.parent.isFrozenGrid()?Object.assign({},c,{mRow:r,frozenRightRow:a}):c,e=>{this.isCancelDeSelect=e[o],this.isCancelDeSelect&&(this.isRowClicked||this.isInteracted||this.checkSelectAllClicked)||(this.updatePersistCollection(s[0],!1),this.updateCheckBoxes(s[0],void 0,t[0]),r&&this.updateCheckBoxes(r[0],void 0,t[0]),a&&this.updateCheckBoxes(a[0],void 0,t[0])),void 0!==l&&l()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&void 0!==l&&l()}getRowObj(e=this.currentIndex){return qe(e)?{}:("number"==typeof e&&(e=this.parent.getRowByIndex(e)),e&&this.parent.getRowObjectFromUID(e.getAttribute("data-uid"))||{})}getSelectedMovableCell(e){const t=this.parent,i=t.getColumnByIndex(e.cellIndex);return t.isFrozenGrid()&&"movable"===i.getFreezeTableName()?t.getMovableCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex)):null}selectCell(e,t){if(!this.isCellType())return;const i=this.parent;let s,n=this.getSelectedMovableCell(e);n||(n=i.getCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex))),this.currentIndex=e.rowIndex;const o=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isCellType()||!n||this.isEditing())return;const r=n.classList.contains("e-cellselectionbackground");(t=t?!je(this.prevCIdxs)&&e.rowIndex===this.prevCIdxs.rowIndex&&e.cellIndex===this.prevCIdxs.cellIndex&&r:t)?this.successCallBack(s,t,e,n,o)(s):(s={data:o,cellIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1},s.currentCell=n,s.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(Jh,this.fDataUpdate(s),this.successCallBack(s,t,e,n,o)),this.cellselected=!0)}successCallBack(e,t,i,s,n){return e=>{if((qe(e)||!0!==e.cancel)&&(t||(e.currentCell=e.currentCell?e.currentCell:s),this.clearCell(),t||this.updateCellSelection(s,i.rowIndex,i.cellIndex),!t)){const e={data:n,cellIndex:i,currentCell:s,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};e.previousRowCellIndex=this.prevECIdxs,this.updateCellProps(i,i),this.onActionComplete(e,Zh)}}}getCellIndex(e,t){return this.parent.getFrozenColumns()&&t>=this.parent.getFrozenColumns()?this.parent.getMovableCellFromIndex(e,t):this.parent.getCellFromIndex(e,t)}selectCellsByRange(e,t){if(!this.isCellType())return;const i=this.parent;let s=this.getSelectedMovableCell(e);const n=i.getFrozenColumns();let o,r;s||(s=i.getCellFromIndex(e.rowIndex,e.cellIndex));const l=e,a=t=t||e;let h;this.currentIndex=e.rowIndex;const c=this.getCurrentBatchRecordChanges()[this.currentIndex];if(this.isSingleSel()||!this.isCellType()||this.isEditing())return;const d={data:c,cellIndex:e,currentCell:s,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};d.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(Jh,this.fDataUpdate(d),d=>{if(!qe(d)&&!0===d.cancel)return;if(this.clearCell(),e.rowIndex>t.rowIndex){const i=e;e=t,t=i}for(let l=e.rowIndex;l<=t.rowIndex;l++){this.selectionSettings.cellSelectionMode.indexOf("Box")<0?(o=l===e.rowIndex?e.cellIndex:0,r=l===t.rowIndex?t.cellIndex:this.getLastColIndex(l)):(o=e.cellIndex,r=t.cellIndex),h=[];for(let e=o<r?o:r,t=o>r?o:r;e<=t;e++)s=n?e<n?i.getCellFromIndex(l,e):i.getMovableCellFromIndex(l,e):i.getCellFromIndex(l,e),s&&(h.push(e),this.updateCellSelection(s),this.addAttribute(s));this.selectedRowCellIndexes.push({rowIndex:l,cellIndexes:h})}const p={data:c,cellIndex:a,currentCell:i.getCellFromIndex(a.rowIndex,a.cellIndex),selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};p.previousRowCellIndex=this.prevECIdxs,this.isDragged||(this.onActionComplete(p,Zh),this.cellselected=!0),this.updateCellProps(l,a)})}selectCells(e){if(!this.isCellType())return;const t=this.parent;let i=this.getSelectedMovableCell(e[0]);const s=t.getFrozenColumns();i||(i=t.getCellFromIndex(e[0].rowIndex,e[0].cellIndexes[0])),this.currentIndex=e[0].rowIndex;const n=this.getCurrentBatchRecordChanges()[this.currentIndex];if(this.isSingleSel()||!this.isCellType()||this.isEditing())return;const o={data:n,cellIndex:e[0].cellIndexes[0],currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};o.previousRowCellIndex=this.prevECIdxs,this.onActionBegin(o,Jh);for(let l=0,a=e.length;l<a;l++)for(let n=0,o=e[l].cellIndexes.length;n<o;n++)i=s?e[l].cellIndexes[n]<s?t.getCellFromIndex(e[l].rowIndex,e[l].cellIndexes[n]):t.getMovableCellFromIndex(e[l].rowIndex,e[l].cellIndexes[n]):t.getCellFromIndex(e[l].rowIndex,e[l].cellIndexes[n]),i&&(this.updateCellSelection(i),this.addAttribute(i),this.addRowCellIndex({rowIndex:e[l].rowIndex,cellIndex:e[l].cellIndexes[n]}));this.updateCellProps({rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]},{rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]});const r={data:n,cellIndex:e[0].cellIndexes[0],currentCell:i,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};r.previousRowCellIndex=this.prevECIdxs,this.onActionComplete(r,Zh)}addCellsToSelection(e){if(!this.isCellType())return;const t=this.parent;let i,s;this.currentIndex=e[0].rowIndex;const n=this.getCurrentBatchRecordChanges()[this.currentIndex],o=t.getFrozenLeftCount(),r=t.getMovableColumnsCount();if(this.isSingleSel()||!this.isCellType()||this.isEditing())return;this.hideAutoFill();const l=t.getColumnByIndex(e[0].cellIndex);let a;hm(this.parent,(t,i)=>{a=i[e[0].rowIndex]},[l.getFreezeTableName()&&l.getFreezeTableName()!==ep?[]:t.getRowsObject(),"movable"===l.getFreezeTableName()?t.getMovableRowsObject():[],l.getFreezeTableName()===Zd?t.getFrozenRightRowsObject():[]]);const h=[];for(const c of e){for(let e=0,t=this.selectedRowCellIndexes.length;e<t;e++)if(this.selectedRowCellIndexes[e].rowIndex===c.rowIndex){s=e;break}i=this.getSelectedMovableCell(c),i||(i=t.getCellFromIndex(c.rowIndex,this.getColIndex(c.rowIndex,c.cellIndex)));const d="movable"===l.getFreezeTableName()?c.cellIndex-o:l.getFreezeTableName()===Zd?c.cellIndex-(o+r):c.cellIndex;h.push(a.cells[d].foreignKeyData);const p={cancel:!1,data:n,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?t.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},u="previousRowCellIndex";p[u]=this.prevECIdxs;let m=s>-1;if(m){const e=this.selectedRowCellIndexes[s].cellIndexes;e.indexOf(c.cellIndex)>-1?(this.cellDeselect(ec,[{rowIndex:c.rowIndex,cellIndexes:[c.cellIndex]}],n,[i],h),e.splice(e.indexOf(c.cellIndex),1),0===e.length&&this.selectedRowCellIndexes.splice(s,1),i.classList.remove("e-cellselectionbackground"),i.removeAttribute("aria-selected"),this.cellDeselect(tc,[{rowIndex:c.rowIndex,cellIndexes:[c.cellIndex]}],n,[i],h)):(m=!1,this.onActionBegin(p,Jh),this.addRowCellIndex({rowIndex:c.rowIndex,cellIndex:c.cellIndex}),this.updateCellSelection(i),this.addAttribute(i))}else{if(this.onActionBegin(p,Jh),!qe(p)&&!0===p.cancel)return;this.updateCellSelection(i,c.rowIndex,c.cellIndex)}if(!m){const t={data:n,cellIndex:e[0],currentCell:i,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes};t[u]=this.prevECIdxs,this.onActionComplete(t,Zh),this.cellselected=!0}this.updateCellProps(c,c)}}getColIndex(e,t){const i=this.parent.isFrozenGrid(),s=this.parent.getColumnByIndex(t),n=pm(this.parent,s,e);if(n)for(let o=0;o<n.length;o++)if(parseInt(n[o].getAttribute(tp),10)===t)return i&&("movable"===s.getFreezeTableName()?o+=this.parent.getFrozenLeftCount():s.getFreezeTableName()===Zd&&(o+=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount())),o;return-1}getLastColIndex(e){const t=this.parent.getFrozenColumns()?this.parent.getMovableDataRows()[e].querySelectorAll("td.e-rowcell"):this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell");return parseInt(t[t.length-1].getAttribute(tp),10)}clearCell(){this.clearCellSelection()}cellDeselect(e,t,i,s,n){s[0]&&s[0].classList.contains(Xd)&&this.updateCheckBoxes(Zt(s[0],"tr"));const o={cells:s,data:i,cellIndexes:t,foreignKeyData:n,cancel:!1};this.parent.trigger(e,o),this.isPreventCellSelect=o.cancel}updateCellSelection(e,t,i){qe(t)||this.addRowCellIndex({rowIndex:t,cellIndex:i}),e.classList.add("e-cellselectionbackground"),e.classList.contains(Xd)&&this.updateCheckBoxes(Zt(e,"tr"),!0),this.addAttribute(e)}addAttribute(e){this.target=e,qe(e)||(e.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:e},!0))}updateCellProps(e,t){this.prevCIdxs=e,this.prevECIdxs=t,this.isCellSelected=this.selectedRowCellIndexes.length&&!0}addRowCellIndex(e){let t,i;for(let s=0,n=this.selectedRowCellIndexes.length;s<n;s++)if(this.selectedRowCellIndexes[s].rowIndex===e.rowIndex){t=!0,i=s;break}t?this.selectedRowCellIndexes[i].cellIndexes.indexOf(e.cellIndex)<0&&this.selectedRowCellIndexes[i].cellIndexes.push(e.cellIndex):this.selectedRowCellIndexes.push({rowIndex:e.rowIndex,cellIndexes:[e.cellIndex]})}clearCellSelection(){if(this.isCellSelected){const e=this.parent,t=this.getSelectedCellsElement(),i=this.selectedRowCellIndexes,s=[],n=[],o=[],r=this.getCurrentBatchRecordChanges(),l=e.isFrozenGrid();this.hideAutoFill();for(let a=0,h=i.length;a<h;a++){s.push(r[i[a].rowIndex]);const t=this.getRowObj(i[a].rowIndex);for(let s=0,r=i[a].cellIndexes.length;s<r;s++)if(l){const t=e.getColumnByIndex(i[a].cellIndexes[s]);n.push(um(this.parent,t,i[a].rowIndex,i[a].cellIndexes[s]))}else t.cells&&o.push(t.cells[i[a].cellIndexes[s]].foreignKeyData),n.push(e.getCellFromIndex(i[a].rowIndex,i[a].cellIndexes[s]))}if(this.cellDeselect(ec,i,s,n,o),!0===this.isPreventCellSelect)return;for(let a=0,h=t.length;a<h;a++)t[a].classList.remove("e-cellselectionbackground"),t[a].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(tc,i,s,n,o)}}getSelectedCellsElement(){const e=this.parent;let t,i=e.getDataRows();e.isFrozenGrid()&&(t=e.getMovableDataRows(),i=e.addMovableRows(i,t),e.getFrozenMode()===Jd&&(i=e.addMovableRows(i,e.getFrozenRightDataRows())));let s=[];for(let n=0,o=i.length;n<o;n++)s=s.concat([].slice.call(i[n].getElementsByClassName("e-cellselectionbackground")));return s}mouseMoveHandler(e){e.preventDefault();const t=this.parent.element.getBoundingClientRect();let i=this.x,s=this.y;const n=Au(e);let o,r=n.x-t.left,l=n.y-t.top,a=Zt(e.target,"tr");if(this.isDragged=!0,this.isCellDrag||(a||(a=Zt(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr")),i>r&&(o=r,r=i,i=o),s>l&&(o=l,l=s,s=o),this.element.style.left=i+"px",this.element.style.top=s+"px",this.element.style.width=r-i+"px",this.element.style.height=l-s+"px"),a&&!e.ctrlKey&&!e.shiftKey){const t=parseInt(a.getAttribute(ip),10);if(this.isCellDrag){const i=ku(e.target,Hd);i&&(this.startAFCell=this.startCell,this.endAFCell=ku(e.target,Hd),this.selectLikeExcel(e,t,parseInt(i.getAttribute(tp),10)))}else this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,t),this.isRowDragSelected=!0}}selectLikeExcel(e,t,i){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(e)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:i}),this.drawBorders())}drawBorders(){"BoxWithBorder"===this.selectionSettings.cellSelectionMode&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders()):this.showHideBorders("none")}isLastCell(e){const t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]===e}isLastRow(e){const t=[].slice.call(Zt(e,sp).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[t.length-1]}isFirstRow(e){const t=[].slice.call(Zt(e,sp).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[0]}isFirstCell(e){return[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===e}setBorders(e,t,i){const s=[].slice.call(e.getElementsByClassName("e-cellselectionbackground")).filter(e=>""===e.style.display);if(s.length){const e=this.parent.isFrozenGrid(),n=s[0],o=s[s.length-1],r=n.getBoundingClientRect(),l=o.getBoundingClientRect(),a=n.offsetParent.getBoundingClientRect(),h=!this.isLastRow(o)||"1"!==i&&"2"!==i&&"5"!==i?0:2,c=this.parent.frozenRows&&("1"===i||"2"===i)&&this.isFirstRow(n)?1.5:0,d=e&&("2"===i||"4"===i)&&this.isFirstCell(n)?1:0,p=("Right"!==this.parent.getFrozenMode()||"1"!==i&&"3"!==i)&&(this.parent.getFrozenMode()!==Jd||"5"!==i&&"6"!==i)||!this.isFirstCell(n)?0:1;this.parent.enableRtl?(t.style.right=a.right-r.right-d+"px",t.style.width=r.right-l.left+d+1+"px"):(t.style.left=r.left-a.left-d-p+"px",t.style.width=l.right-r.left+d-p+1+"px"),t.style.top=r.top-a.top-c+"px",t.style.height=l.top-r.top>0?l.top-a.top+l.height+1-(r.top-a.top)-h+c+"px":l.height+c-h+1+"px",this.selectDirection+=i}else t.style.display="none"}positionBorders(){this.updateStartEndCells(),this.startCell&&this.bdrElement&&this.selectedRowCellIndexes.length&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.contentModule.getMovableContent(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===Jd&&this.setBorders(this.parent.contentModule.getFrozenRightContent(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.headerModule.getMovableHeader(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===Jd&&this.setBorders(this.parent.headerModule.getFrozenRightHeader(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))}applyBothFrozenBorders(e){const t=this.parent.enableRtl;switch(e.length){case 6:this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right;break;case 4:e.includes("1")&&e.includes("2")&&e.includes("3")&&e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom),e.includes("2")&&e.includes("4")&&e.includes("5")&&e.includes("6")&&(this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom);break;case 2:e.includes("1")&&(this.mcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left)),e.includes("2")&&(this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left)),e.includes("3")&&(this.mhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),e.includes("5")&&(this.mcBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left)),e.includes("6")&&(this.mhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border)}}applyBorders(e){const t=this.parent.enableRtl;if(this.parent.getFrozenMode()===Jd)this.applyBothFrozenBorders(e);else switch(e.length){case 4:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 2:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border))}}createBorders(){this.bdrElement||(this.bdrElement=this.parent.getContentTable().parentElement.appendChild(Nt("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr",styles:"width: 2px; border-width: 0;"})),this.parent.isFrozenGrid()&&(this.mcBdrElement=this.parent.contentModule.getMovableContent().appendChild(Nt("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr",styles:"height: 2px; border-width: 0;"})),this.parent.getFrozenMode()===Jd&&(this.frcBdrElement=this.parent.contentModule.getFrozenRightContent().appendChild(Nt("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr",styles:"height: 2px; border-width: 0;"})))),this.parent.frozenRows&&(this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(Nt("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr",styles:"height: 2px;"}))),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement=this.parent.headerModule.getMovableHeader().appendChild(Nt("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr",styles:"height: 2px;"})),this.parent.getFrozenMode()===Jd&&(this.frhBdrElement=this.parent.headerModule.getFrozenRightHeader().appendChild(Nt("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr",styles:"height: 2px;"})))))}showHideBorders(e){this.bdrElement&&(this.bdrElement.style.display=e,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.display=e,this.parent.getFrozenMode()===Jd&&(this.frcBdrElement.style.display=e)),this.parent.frozenRows&&(this.fhBdrElement.style.display=e),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement.style.display=e,this.parent.getFrozenMode()===Jd&&(this.frhBdrElement.style.display=e)))}drawAFBorders(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()}positionAFBorders(){if(!this.startCell||!this.bdrAFLeft)return;const e=this.startAFCell.getBoundingClientRect(),t=this.endAFCell.getBoundingClientRect(),i=t.top-e.top>0?1:0,s=t.top-e.top>=0&&(ku(this.startAFCell,jd)||ku(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,n=(ku(this.startAFCell,jd)||ku(this.startAFCell,Wd))&&this.isFirstCell(this.startAFCell)?1:0,o=this.isLastRow(this.endAFCell)&&(ku(this.endAFCell,jd)||ku(this.endAFCell,"e-frozencontent"))?2:0,r=this.startAFCell.offsetParent.getBoundingClientRect(),l=this.parent.element.getBoundingClientRect();let a=this.startAFCell.offsetParent.parentElement.scrollTop-this.startAFCell.offsetTop,h=this.startAFCell.offsetParent.parentElement.scrollLeft-this.startAFCell.offsetLeft;const c=this.parent.element.clientHeight,d=this.parent.element.clientWidth;a=a>0?Math.floor(a)-1:0,h=h>0?h:0;const p=e.left-l.left;if(this.parent.enableRtl){const i=ku(this.startAFCell,jd)||ku(this.startAFCell,Wd)?e.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-l.left:0;this.bdrAFLeft.style.right=l.right-t.right-2+t.width+"px",this.bdrAFLeft.style.width=d<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px",this.bdrAFRight.style.right=l.right-e.right-n+i-1+"px",this.bdrAFTop.style.left=t.left-l.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-n+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=p-n+h-1+"px",this.bdrAFRight.style.left=t.left-l.left-2+t.width+"px",this.bdrAFRight.style.width=d<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=p+h-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-n+1+"px",d<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){const e=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-d;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-e+"px"}if(this.bdrAFLeft.style.top=e.top-l.top-s+a+"px",this.bdrAFLeft.style.height=t.top-e.top>0?t.top-r.top+t.height+1-(e.top-r.top)+s-o-a+"px":t.height+s-o-a+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-i-1+"px",this.bdrAFBottom.style.width=c<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,c<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){const e=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-c;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-e+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}createAFBorders(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.element.appendChild(Nt("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.element.appendChild(Nt("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.element.appendChild(Nt("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.element.appendChild(Nt("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))}showAFBorders(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")}hideAFBorders(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")}updateValue(e,t,i){const s=this.createBeforeAutoFill(e,t,i);if(!s.cancel){const n=this.parent.getColumnByIndex(t);this.parent.editModule&&i&&this.parent.editModule.updateCell(e,n.field,"number"===n.type?parseInt(s.value,10):s.value)}}createBeforeAutoFill(e,t,i){const s={column:this.parent.getColumnByIndex(t),value:i.innerText};return this.parent.trigger("beforeAutoFill",s),s}getAutoFillCells(e,t){const i=".e-cellselectionbackground";let s=[].slice.call(this.parent.getDataRows()[e].querySelectorAll(i));return this.parent.isFrozenGrid()&&(s=s.concat([].slice.call(this.parent.getMovableDataRows()[e].querySelectorAll(i))),this.parent.getFrozenMode()===Jd&&(s=s.concat([].slice.call(this.parent.getFrozenRightDataRows()[e].querySelectorAll(i))))),s}selectLikeAutoFill(e,t){const i=parseInt(ku(this.startAFCell,Yd).getAttribute(ip),10),s=parseInt(this.startAFCell.getAttribute(tp),10);let n=parseInt(ku(this.endAFCell,Yd).getAttribute(ip),10),o=parseInt(this.endAFCell.getAttribute(tp),10);const r=this.selectedRowCellIndexes.length-1,l=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!ku(e.target,Hd):this.startAFCell=this.parent.getCellFromIndex(i,s),this.endAFCell=this.parent.getCellFromIndex(i+r,s+l),this.drawAFBorders();break;case this.autoFillRLselection&&s+l<o&&o-s-l+1>n-i-r&&o-s-l+1>i-n:if(this.endAFCell=this.parent.getCellFromIndex(i+r,o),n=parseInt(ku(this.endAFCell,Yd).getAttribute(ip),10),o=parseInt(this.endAFCell.getAttribute(tp),10),t){const e=parseInt(this.endCell.getAttribute(tp),10);for(let t=i;t<=n;t++){const i=this.getAutoFillCells(t,s);let n=0;for(let s=e+1;s<=o;s++)n>l&&(n=0),this.updateValue(t,s,i[n]),n++}this.selectCellsByRange({rowIndex:i,cellIndex:this.startCellIndex},{rowIndex:n,cellIndex:o})}else this.drawAFBorders();break;case this.autoFillRLselection&&s>o&&s-o+1>n-i-r&&s-o+1>i-n:if(this.startAFCell=this.parent.getCellFromIndex(i,o),this.endAFCell=this.endCell,t){for(let e=i;e<=i+r;e++){const t=this.getAutoFillCells(e,s);t.reverse();let i=0;for(let s=this.startCellIndex-1;s>=o;s--)i>l&&(i=0),this.updateValue(e,s,t[i]),i++}this.selectCellsByRange({rowIndex:i,cellIndex:o},{rowIndex:i+r,cellIndex:this.startCellIndex+l})}else this.drawAFBorders();break;case i>n:if(this.startAFCell=this.parent.getCellFromIndex(n,s),this.endAFCell=this.endCell,t){const e=parseInt(this.endCell.parentElement.getAttribute(ip),10);let t=e;for(let o=i-1;o>=n;o--){t===this.startIndex-1&&(t=e);const i=this.getAutoFillCells(t,s);let n=0;t--;for(let e=this.startCellIndex;e<=this.startCellIndex+l;e++)this.updateValue(o,e,i[n]),n++}this.selectCellsByRange({rowIndex:n,cellIndex:s+l},{rowIndex:i+r,cellIndex:s})}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(n,s+l),t){const e=parseInt(this.endCell.parentElement.getAttribute(ip),10);let t=this.startIndex;for(let i=e+1;i<=n;i++){t===e+1&&(t=this.startIndex);const n=this.getAutoFillCells(t,s);t++;let o=0;for(let e=this.startCellIndex;e<=this.startCellIndex+l;e++)this.updateValue(i,e,n[o]),o++}this.selectCellsByRange({rowIndex:e-r,cellIndex:s},{rowIndex:n,cellIndex:s+l})}else this.drawAFBorders()}}mouseUpHandler(e){if(document.body.classList.remove("e-disableuserselect"),this.element&&Yt(this.element),this.mUPTarget=this.isDragged&&1===this.selectedRowCellIndexes.length&&1===this.selectedRowCellIndexes[0].cellIndexes.length?ku(e.target,Hd):null,this.isDragged&&!this.isAutoFillSel&&"Cell"===this.selectionSettings.mode&&e.target.classList.contains(Hd)){const t=e.target,i=parseInt(t.parentElement.getAttribute(ip),10),s=parseInt(t.getAttribute(tp),10);this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:i,cellIndex:s})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){const t=ku(e.target,Hd);this.endAFCell=t||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,this.updateStartCellsIndex(),this.selectLikeAutoFill(e,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.isAutoFillSel=!1}Bt.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&Bt.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),Bt.remove(document,"mouseup",this.mouseUpHandler)}hideAutoFill(){this.autofill&&(this.autofill.style.display="none")}updateAutoFillPosition(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){const e=parseInt(this.target.getAttribute(tp),10),t=parseInt(this.target.getAttribute("index"),10),i=this.getAutoFillCells(this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,e).filter(e=>""===e.style.display),s=this.parent.getColumnByIndex(e),n="movable"===s.getFreezeTableName(),o=t<this.parent.frozenRows,r=this.parent.getFrozenMode()===Jd&&s.getFreezeTableName()===Zd;Qt("#"+this.parent.element.id+"_autofill",ku(this.target,Kd))||(Qt("#"+this.parent.element.id+"_autofill",this.parent.element)&&Qt("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=Nt("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",o?n?this.parent.headerModule.getMovableHeader().appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):n?this.parent.contentModule.getMovableContent().appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),r&&(o?this.parent.getFrozenRightHeader().appendChild(this.autofill):this.parent.getFrozenRightContent().appendChild(this.autofill)));const l=i[i.length-1];if(l&&l.offsetParent){const e=l.getBoundingClientRect(),t=l.offsetParent.getBoundingClientRect(),i=this.isLastCell(l)?4:0,s=this.isLastRow(l)?3:0;this.parent.enableRtl?this.autofill.style.right=t.right-e.right+e.width-4-i+"px":this.autofill.style.left=e.left-t.left+e.width-4-i+"px",this.autofill.style.top=e.top-t.top+e.height-5-s+"px"}this.autofill.style.display=""}else this.hideAutoFill()}mouseDownHandler(e){this.mouseButton=e.button;const t=e.target,i=this.parent;let s;const n=ku(t,"e-grid");if(!(n&&n.id!==i.element.id||ku(t,qd)&&!this.parent.frozenRows||ku(t,"e-editedbatchcell")||ku(t,Qd))){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),ku(t,Hd)&&!e.shiftKey&&!e.ctrlKey){if(i.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,s=!0;else if(i.allowRowDragAndDrop&&!i.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||Zt(t,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);s=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),i.getContent().appendChild(this.element)}s&&this.enableDrag(e,!0)}this.updateStartEndCells(),(t.classList.contains("e-autofill")||t.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e))}}updateStartEndCells(){const e=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(ip),10),this.startCellIndex=parseInt(ku(this.startCell,Hd).getAttribute(tp),10))}updateStartCellsIndex(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(ip),10),this.startCellIndex=parseInt(ku(this.startCell,Hd).getAttribute(tp),10))}enableDrag(e,t){const i=this.parent;if(t){const t=Zt(e.target,"tr");this.startDIndex=parseInt(t.getAttribute(ip),10),this.startDCellIndex=parseInt(ku(e.target,Hd).getAttribute(tp),10)}document.body.classList.add("e-disableuserselect");const s=i.element.getBoundingClientRect(),n=Au(e);this.x=n.x-s.left,this.y=n.y-s.top,Bt.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&Bt.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),Bt.add(document,"mouseup",this.mouseUpHandler,this)}clearSelAfterRefresh(e){"virtualscroll"===e.requestType||this.parent.isPersistSelection||this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType||this.clearSelection()}addEventListener(){this.parent.isDestroyed||(this.evtHandlers=[{event:fc,handler:this.enableAfterRender},{event:uc,handler:this.initializeSelection},{event:"rowselected",handler:this.onActionComplete},{event:"cellselected",handler:this.onActionComplete},{event:yc,handler:this.onPropertyChanged},{event:Dc,handler:this.onCellFocused},{event:id,handler:this.clearSelAfterRefresh},{event:Oc,handler:this.columnPositionChanged},{event:gc,handler:this.initialEnd},{event:Pc,handler:this.rowsRemoved},{event:wc,handler:this.refreshHeader},{event:Ic,handler:this.destroy}],Cm(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(Gh,this.actionBeginFunction),this.parent.addEventListener(_h,this.actionCompleteFunction),this.addEventListener_checkbox())}removeEventListener(){this.parent.isDestroyed||(Cm(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(Gh,this.actionBeginFunction),this.parent.removeEventListener(_h,this.actionCompleteFunction),this.removeEventListener_checkbox())}wireEvents(){this.isMacOS=-1!==navigator.userAgent.indexOf("Mac OS"),this.isMacOS&&(Bt.add(this.parent.element,"keydown",this.keyDownHandler,this),Bt.add(this.parent.element,"keyup",this.keyUpHandler,this))}unWireEvents(){this.isMacOS&&(Bt.remove(this.parent.element,"keydown",this.keyDownHandler),Bt.remove(this.parent.element,"keyup",this.keyUpHandler))}columnPositionChanged(){this.parent.isPersistSelection||this.clearSelection()}refreshHeader(){this.setCheckAllState()}rowsRemoved(e){for(let t=0;t<e.records.length;t++)delete this.selectedRowState[e.records[t][this.primaryKey]],--this.totalRecordsCount;this.setCheckAllState()}beforeFragAppend(e){"virtualscroll"===e.requestType||this.parent.isPersistSelection||this.clearSelection()}getCheckAllBox(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")}enableAfterRender(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.initPerisistSelection())}render(e){Bt.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),Bt.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)}onPropertyChanged(e){if(e.module!==this.getModuleName())return;const t=this.parent;qe(e.properties.type)||"Single"!==this.selectionSettings.type||(this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()),qe(e.properties.mode)&&qe(e.properties.cellSelectionMode)||(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection(),this.parent.getColumns().filter(e=>"checkbox"===e.type).length&&(t.isCheckBoxSelection=!("ResetOnRowClick"===this.selectionSettings.checkboxMode)),this.drawBorders()}hidePopUp(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")}initialEnd(e){const t=this.parent.isFrozenGrid(),i=this.parent.getFrozenMode()===Jd;(!t||t&&!i&&!e.args.isFrozen||i&&e.args.renderFrozenRightContent)&&(this.parent.off(gc,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))}checkBoxSelectionChanged(){const e=this.parent;e.off(gc,this.checkBoxSelectionChanged);const t=e.getColumns().filter(e=>"checkbox"===e.type);t.length>0&&(e.isCheckBoxSelection=!0,this.chkField=t[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,qe(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(e.selectionSettings.type="Multiple",e.dataBind()):this.initPerisistSelection()),e.isCheckBoxSelection||this.isPersisted||(this.chkField=null,this.initPerisistSelection())}initPerisistSelection(){const e=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(e.isPersistSelection=!1,this.selectedRowState={})}ensureCheckboxFieldSelection(){const e=this.parent;if(this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!e.enableVirtualization&&this.chkField&&(e.isPersistSelection&&0===Object.keys(this.selectedRowState).length||!e.isPersistSelection)){const e=this.parent.getDataModule(),t=(new Gs.e).where(this.chkField,"equal",!0);t.params||(t.params=this.parent.query.params);const i=e.getData({},t),s=this;this.parent.showSpinner(),i.then(e=>{s.dataSuccess(e.result),s.refreshPersistSelection(),s.parent.hideSpinner()})}}dataSuccess(e){for(let t=0;t<e.length;t++)qe(this.selectedRowState[e[t][this.primaryKey]])&&e[t][this.chkField]&&(this.selectedRowState[e[t][this.primaryKey]]=e[t][this.chkField]);this.persistSelectedData=e}setRowSelection(e){if(!this.parent.getDataModule().isRemote())if(e)if(this.parent.groupSettings.columns.length)for(const t of this.getData().records)this.selectedRowState[t[this.primaryKey]]=!0;else for(const t of this.getData())this.selectedRowState[t[this.primaryKey]]=!0;else this.selectedRowState={}}getData(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))}refreshPersistSelection(){let e=this.parent.getRows();if(this.parent.isCheckBoxSelection&&this.parent.isFrozenGrid()&&(this.parent.getMovableContentTbody().querySelector(".e-checkselect")&&(e=this.parent.getMovableRows()),this.parent.getFrozenMode()===Jd&&this.parent.getFrozenRightContentTbody().querySelector(".e-checkselect")&&(e=this.parent.getFrozenRightRows())),this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),null!==e&&e.length>0&&(this.parent.isPersistSelection||this.chkField)){const t=[];for(let i=0;i<e.length;i++){const s=this.getRowObj(e[i]),n=s&&s.data?s.data[this.primaryKey]:null;if(null===n)return;let o;const r=e[i].querySelector(".e-checkselect");this.selectedRowState[n]||"Check"===this.parent.checkAllRows&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(n)<0||"Uncheck"===this.parent.checkAllRows&&this.chkAllCollec.indexOf(n)>0||"Intermediate"===this.parent.checkAllRows&&!qe(this.chkField)&&s.data[this.chkField]?(t.push(parseInt(e[i].getAttribute(ip),10)),o=!0):(o=!1,this.checkedTarget!==r&&this.parent.isCheckBoxSelection&&Yu(r.nextElementSibling,o)),this.updatePersistCollection(e[i],o)}this.isSingleSel()&&t.length>0?this.selectRow(t[0],!0):this.selectRows(t)}this.parent.isCheckBoxSelection&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()}actionBegin(e){if("save"===e.requestType&&this.parent.isPersistSelection){const e=this.parent.element.querySelector(".e-edit-checkselect");if(!qe(e)){let t=Zt(e,"."+Qd);if(t){"Dialog"===this.parent.editSettings.mode&&(t=this.parent.element.querySelector(".e-dlgeditrow"));const i=this.getRowObj(t);if(!i)return;this.selectedRowState[i.data[this.primaryKey]]=i.isSelected=e.checked}else this.isCheckedOnAdd=e.checked}}}actionComplete(e){if("save"===e.requestType&&this.parent.isPersistSelection){if("add"===e.action&&this.isCheckedOnAdd){const t=this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));this.selectedRowState[t.data[this.primaryKey]]=t.isSelected=this.isCheckedOnAdd}this.refreshPersistSelection()}if("delete"===e.requestType&&this.parent.isPersistSelection){const t=e.data.slice();for(let e=0;e<t.length;e++)qe(t[e][this.primaryKey])||this.updatePersistDelete(t[e][this.primaryKey]);this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}"paging"===e.requestType&&(this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0)}onDataBound(){if(!this.parent.enableVirtualization&&this.parent.isPersistSelection&&(this.selectedRecords.length&&(this.isPrevRowSelection=!0),this.refreshPersistSelection()),this.parent.enableVirtualization&&this.setCheckAllState(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){const e=this.parent.getRowsObject(),t=[];for(let i=0;i<e.length;i++)e[i].isSelected&&t.push(i);t.length&&this.selectRows(t),this.initialRowSelection=!0}}updatePersistSelectedData(e){if(this.parent.isPersistSelection){const t=this.parent.getRows();for(let i=0;i<t.length;i++)this.updatePersistCollection(t[i],e);"Uncheck"===this.parent.checkAllRows?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:[]):"Check"===this.parent.checkAllRows&&(this.setRowSelection(!0),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice())}}checkSelectAllAction(e){const t=this.getRenderer(),i=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),e&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(e),this.selectRowsByRange(t.getVirtualRowIndex(0),t.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(e),this.clearSelection()),this.chkAllCollec=[],!qe(i)){const t=i.querySelector(".e-edit-checkselect");qe(t)||Yu(t.nextElementSibling,e)}}checkSelectAll(e){const t=this.getCheckAllStatus(e);let i="Check"===t;this.isHeaderCheckboxClicked=!0,"Intermediate"===t&&(i=this.getCurrentBatchRecordChanges().some(e=>e[this.primaryKey]in this.selectedRowState)),this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!i),this.target=null,this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState(),this.triggerChkChangeEvent(e,!i)}getCheckAllStatus(e){const t=e?e.nextElementSibling.classList:this.getCheckAllBox().nextElementSibling.classList;let i;return i=t.contains("e-check")?"Check":t.contains("e-uncheck")?"Uncheck":t.contains("e-stop")?"Intermediate":"None",i}checkSelect(e){const t=Zt(this.checkedTarget,"."+Hd),i=this.parent;this.isMultiCtrlRequest=!0;let s=0;if(this.isHeaderCheckboxClicked=!1,Zu(i)){const e=t.parentElement.getAttribute("data-uid");s=i.getRows().map(e=>e.getAttribute("data-uid")).indexOf(e)}else s=parseInt(t.parentElement.getAttribute(ip),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName($d).length>0&&"Top"===this.parent.editSettings.newRowPosition&&++s,this.rowCellSelectionHandler(s,parseInt(t.getAttribute(tp),10)),this.moveIntoUncheckCollection(Zt(t,".e-row")),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(e,e.nextElementSibling.classList.contains("e-check"))}moveIntoUncheckCollection(e){if("Check"===this.parent.checkAllRows||"Uncheck"===this.parent.checkAllRows){const t=this.getRowObj(e),i=t&&t.data?t.data[this.primaryKey]:null;if(!i)return;this.chkAllCollec.indexOf(i)<0?this.chkAllCollec.push(i):this.chkAllCollec.splice(this.chkAllCollec.indexOf(i),1)}}triggerChkChangeEvent(e,t){this.parent.trigger("checkBoxChange",{checked:t,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:e}),this.parent.isEdit||(this.checkedTarget=null)}updateSelectedRowIndex(e){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.getDataModule().isRemote())if("Check"===this.parent.checkAllRows){this.selectedRowIndexes=[];const e=this.getData().length;for(let t=0;t<e;t++)this.selectedRowIndexes.push(t)}else if("Uncheck"===this.parent.checkAllRows)this.selectedRowIndexes=[];else{const t=this.parent.getRowByIndex(e);if(e&&t&&"false"===t.getAttribute("aria-selected")){const t=this.selectedRowIndexes.indexOf(e);this.selectedRowIndexes.splice(t,1)}}}setCheckAllState(e,t){if(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode){let i,s=Object.keys(this.selectedRowState).length;this.parent.isPersistSelection||(s=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length);const n=this.getCheckAllBox();if(n){const o=n.nextElementSibling;qt([o],["e-check","e-stop","e-uncheck"]),Uu(n,!1),n.indeterminate=!1,i||s===this.totalRecordsCount&&this.totalRecordsCount||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!this.parent.getDataModule().isRemote()&&this.getData().length&&s===this.getData().length?(Vt([o],["e-check"]),Uu(n,!0),t&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):!this.selectedRowIndexes.length||0===s&&0===this.getCurrentBatchRecordChanges().length?(Vt([o],["e-uncheck"]),t&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck",0===s&&0===this.getCurrentBatchRecordChanges().length?Vt([o.parentElement],["e-checkbox-disabled"]):qt([o.parentElement],["e-checkbox-disabled"])):(Vt([o],["e-stop"]),this.parent.checkAllRows="Intermediate",n.indeterminate=!0),!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling||this.parent.allowPaging||this.parent.getDataModule().isRemote()||this.updateSelectedRowIndex(e)}}}keyDownHandler(e){(("chrome"===zt.info.name||"safari"===zt.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===zt.info.name&&17===e.keyCode||"mozilla"===zt.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!0)}keyUpHandler(e){(("chrome"===zt.info.name||"safari"===zt.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===zt.info.name&&17===e.keyCode||"mozilla"===zt.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!1)}clickHandler(e){let t=e.target;this.actualTarget=t,this.selectionSettings.persistSelection&&(this.deSelectedData=xu(this.persistSelectedData)),(ku(t,Yd)||ku(t,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&t.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.isMultiShiftRequest=e.shiftKey,this.popUpClickHandler(e);let i,s=!1;this.preventFocus=!0;const n=ku(t,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(n&&n.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&ku(t,Yd)),n&&n.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(i=n.querySelector('input[type="checkbox"]'),s=!0),this.drawBorders(),this.updateAutoFillPosition(),t=ku(t,Hd),(t&&t.parentElement.classList.contains(Yd)&&!this.parent.selectionSettings.checkboxOnly||s)&&!this.isRowDragSelected){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=t,qe(i)){const i=this.parent;let s=0;if(Zu(i)){const e=t.parentElement.getAttribute("data-uid");s=i.getRows().map(e=>e.getAttribute("data-uid")).indexOf(e)}else s=parseInt(t.parentElement.getAttribute(ip),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName($d).length>0&&++s,this.mUPTarget&&this.mUPTarget.isEqualNode(t)||this.rowCellSelectionHandler(s,parseInt(t.getAttribute(tp),10)),this.parent.hoverFrozenRows(e),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(Zt(t,".e-row")),this.setCheckAllState())}else this.checkedTarget=i,i.classList.contains("e-checkselectall")?this.checkSelectAll(i):this.checkSelect(i);this.parent.isCheckBoxSelection||!zt.isDevice||this.isSingleSel()||this.showPopup(e)}else if(e.target.classList.contains("e-headercell")&&!e.target.classList.contains("e-stackedheadercell")){const t=e.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");this.headerSelectionHandler(this.parent.getColumnIndexByUid(t))}this.isMultiCtrlRequest=!1,this.isMultiShiftRequest=!1,qe(Zt(e.target,".e-unboundcell"))&&(this.preventFocus=!1)}popUpClickHandler(e){const t=e.target;Zt(t,".e-headercell")||e.target.classList.contains(Hd)||Zt(t,".e-gridpopup")?t.classList.contains("e-rowselect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"}showPopup(e){this.selectionSettings.enableSimpleMultiRowSelection||function(e,t,i){const s=e.querySelector("span"),n=e.parentElement.getBoundingClientRect(),o=t.target.getBoundingClientRect();s.className=i,e.style.display="";const r=(qe(t.clientY)?t.changedTouches[0].clientY:t.clientY)>e.offsetHeight+10;e.style.top=o.top-n.top+(r?-(e.offsetHeight+10):e.offsetHeight+10)+"px",e.style.left=function(e,t,i,s){const n=e.offsetWidth/2,o=Au(t).x;return o-i.left<n?i.left-s:i.right-o<n?i.right-s-2*n:o-s-n}(e,t,o,n.left)+"px",r?(e.querySelector(".e-downtail").style.display="",e.querySelector(".e-uptail").style.display="none"):(e.querySelector(".e-downtail").style.display="none",e.querySelector(".e-uptail").style.display="")}(this.parent.element.querySelector(".e-gridpopup"),e,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>(this.parent.getFrozenColumns()?2:1)||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))}rowCellSelectionHandler(e,t){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?(this.isDragged||this.selectRow(e,this.selectionSettings.enableToggle),this.selectCell({rowIndex:e,cellIndex:t},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders()):this.isMultiShiftRequest?(this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!Zt(this.target,"."+Hd).classList.contains(Xd)?this.selectRowsByRange(je(this.prevRowIndex)?e:this.prevRowIndex,e):this.addRowsToSelection([e]),this.selectCellsByRange(je(this.prevCIdxs)?{rowIndex:e,cellIndex:t}:this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.updateAutoFillPosition(),this.drawBorders()):(this.addRowsToSelection([e]),this.addCellsToSelection([{rowIndex:e,cellIndex:t}]),this.showHideBorders("none")),this.isDragged=!1}onCellFocused(e){if(this.parent.frozenRows&&e.container.isHeader&&e.byKey)if("upArrow"===e.keyArgs.action)e.isJump=this.parent.allowFiltering?"INPUT"===e.element.tagName:"TH"===e.element.tagName;else if("downArrow"===e.keyArgs.action){const t=Number(e.element.parentElement.getAttribute(ip));e.isJump=0===t}else"ctrlHome"===e.keyArgs.action&&(e.isJump=!0);const t=this.parent.isFrozenGrid()?(e.container.isHeader&&"TD"!==e.element.tagName&&e.isJump&&!this.selectionSettings.allowColumnSelection||(e.container.isContent||"TD"===e.element.tagName)&&!(e.container.isSelectable||"TD"===e.element.tagName))&&!(e.byKey&&"space"===e.keyArgs.action):(e.container.isHeader&&e.isJump||e.container.isContent&&!e.container.isSelectable)&&!(e.byKey&&"space"===e.keyArgs.action)&&!(e.element.classList.contains("e-detailrowexpand")||e.element.classList.contains("e-detailrowcollapse")),i=e.container.isHeader&&"TD"!==e.element.tagName&&!Zt(e.element,"."+Hd)&&!(e.byKey&&"space"===e.keyArgs.action);if(!e.byKey||t)return void(t&&!this.parent.isCheckBoxSelection&&this.clearSelection());let[s,n]=e.container.isContent?e.container.indexes:e.indexes;const o=this.focus.getPrevIndexes();if(this.parent.frozenRows)if(e.container.isHeader&&("TD"===e.element.tagName||Zt(e.element,"."+Hd))){const e=this.parent.getHeaderTable().querySelector("thead").childElementCount;s-=e,o.rowIndex=qe(o.rowIndex)?null:o.rowIndex-e}else s+=this.parent.frozenRows,o.rowIndex=0!==o.rowIndex&&qe(o.rowIndex)?null:o.rowIndex+this.parent.frozenRows;if(this.parent.isFrozenGrid()){const t=Number(e.element.getAttribute(tp)),i=this.parent.getSelectedRowCellIndexes();i.length&&0===o.cellIndex&&(o.cellIndex=i[i.length-1].cellIndexes[0]),o.cellIndex=qe(o.cellIndex)?null:o.cellIndex===n?t:t-1,n=t}if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(s=parseInt(e.element.parentElement.getAttribute("aria-rowindex"),10)),(i||-1===["ctrlPlusA","escape"].indexOf(e.keyArgs.action)&&"space"!==e.keyArgs.action&&s===o.rowIndex&&n===o.cellIndex)&&!this.selectionSettings.allowColumnSelection)return;this.preventFocus=!0;const r=this.getKeyColIndex(e);switch(this.needColumnSelection&&(n=r),e.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=e.element,this.isKeyAction=!0,this.applyDownUpKey(s,n);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(s,n);break;case"shiftDown":case"shiftUp":this.shiftDownKey(s,n);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(s,n);break;case"home":case"end":n="end"===e.keyArgs.action?this.getLastColIndex(s):0,this.applyHomeEndKey(s,n);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(s,n);break;case"escape":this.clearSelection();break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(e.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(s)}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.updateAutoFillPosition()}getKeyColIndex(e){let t,i=null;const s=e.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&ku(e.element,"e-columnheader"))if(this.needColumnSelection=!!e.container.isHeader,s){if("rightArrow"===e.keyArgs.action||"leftArrow"===e.keyArgs.action)return i;t=s.getAttribute("e-mappinguid");const n=this.getstackedColumns(this.parent.getColumnByUid(t).columns),o=this.parent.getColumnIndexByUid(n[n.length-1].uid),r=this.parent.getColumnIndexByUid(n[0].uid);i=this.prevColIndex>=o?r:o}else i=this.parent.getColumnIndexByUid(e.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));return i}ctrlPlusA(){this.isRowType()&&!this.isSingleSel()&&this.selectRowsByRange(0,this.getCurrentBatchRecordChanges().length-1),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})}applySpaceSelection(e){e.classList.contains("e-checkselectall")?(this.checkedTarget=e,this.checkSelectAll(this.checkedTarget)):e.classList.contains("e-checkselect")&&(this.checkedTarget=e,this.checkSelect(this.checkedTarget))}applyDownUpKey(e,t){const i=this.parent;this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&!this.selectionSettings.persistSelection&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&(this.selectRow(e,!0),this.applyUpDown(i.selectedRowIndex)),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(t)}applyUpDown(e){if(e<0)return;this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);const t=parseInt(this.target.getAttribute(tp),10),i=this.parent.getFrozenColumns();if(i)this.target=t>=i?this.contentRenderer.getMovableRowByIndex(e).getElementsByClassName(Hd)[t-i]:this.contentRenderer.getRowByIndex(e).getElementsByClassName(Hd)[t];else{const i=this.contentRenderer.getRowByIndex(e);i&&(this.target=i.getElementsByClassName(Hd)[t])}this.addAttribute(this.target)}applyRightLeftKey(e,t){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(t):this.isCellType()&&(this.selectCell({rowIndex:e,cellIndex:t},!0),this.addAttribute(this.target))}applyHomeEndKey(e,t){this.isCellType()?this.selectCell({rowIndex:e,cellIndex:t},!0):this.addAttribute(this.parent.getCellFromIndex(e,t))}shiftDownKey(e,t){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(je(this.prevRowIndex)?this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,e),this.applyUpDown(e))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1}applyShiftLeftRightKey(e,t){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,t):this.selectCellsByRange(this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1}getstackedColumns(e){const t=[];for(let i=0,s=e.length;i<s;i++)e[i].columns?this.getstackedColumns(e[i].columns):t.push(e[i]);return t}applyCtrlHomeEndKey(e,t){this.isRowType()&&(this.selectRow(e,!0),this.addAttribute(this.parent.getCellFromIndex(e,t))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)}addRemoveClassesForRow(e,t,i,...s){if(e){const i=[].slice.call(e.getElementsByClassName(Hd)),n=e.querySelector(".e-detailrowcollapse")||e.querySelector(".e-detailrowexpand"),o=e.querySelector(".e-rowdragdrop");n&&i.push(n),o&&i.push(o),_u(i,t,...s)}this.getRenderer().setSelection(e?e.getAttribute("data-uid"):null,t,i)}isRowType(){return"Row"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode}isCellType(){return"Cell"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode}isSingleSel(){return"Single"===this.selectionSettings.type}getRenderer(){return qe(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(Fd.Content)),this.contentRenderer}getSelectedRecords(){let e=[];return e=this.selectionSettings.persistSelection?this.persistSelectedData:this.parent.getRowsObject().filter(e=>e.isSelected).map(e=>e.data),e}selectColumn(e){const t=this.parent;if(qe(t.getColumns()[e]))return;const i=t.getColumnByIndex(e),s=t.getColumnHeaderByUid(i.uid),n=s.classList.contains("e-columnselection");if(!t.selectionSettings.allowColumnSelection)return;const o=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(e)>-1;if(this.clearColDependency(),!n||!this.selectionSettings.enableToggle||o){const r={columnIndex:e,headerCell:s,column:i,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(r,ic),r.cancel)return void this.disableInteracted();t.selectionSettings.enableToggle&&e===this.prevColIndex&&n&&!o||this.updateColSelection(s,e),this.onActionComplete({columnIndex:e,headerCell:s,column:i,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex},sc)}this.updateColProps(e)}selectColumnsByRange(e,t){const i=this.parent;if(qe(i.getColumns()[e]))return;const s=[];if("Single"===i.selectionSettings.type||qe(t))s[0]=e;else{const i=e<t;for(let n=e;i?n<=t:n>=t;i?n++:n--)s.push(n)}this.selectColumns(s)}selectColumns(e){const t=this.parent;let i=this.getselectedCols();if("Single"===t.selectionSettings.type&&(e=[e[0]]),!t.selectionSettings.allowColumnSelection)return;this.clearColDependency();const s={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(s,ic),s.cancel)return void this.disableInteracted();for(let o=0,r=e.length;o<r;o++)this.updateColSelection(t.getColumnHeaderByUid(t.getColumnByIndex(e[o]).uid),e[o]);i=this.getselectedCols();const n={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(n,sc),this.updateColProps(e[0])}selectColumnWithExisting(e){const t=this.parent;if(qe(t.getColumns()[e]))return;const i=t.getColumnHeaderByUid(t.getColumnByIndex(e).uid);let s=this.getselectedCols();if("Single"===t.selectionSettings.type&&this.clearColDependency(),t.selectionSettings.allowColumnSelection){if(this.selectedColumnsIndexes.indexOf(e)>-1)this.clearColumnSelection(e);else{const n={columnIndex:e,headerCell:s,columnIndexes:this.selectedColumnsIndexes,column:t.getColumnByIndex(e),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(n,ic),n.cancel)return void this.disableInteracted();this.updateColSelection(i,e),s=this.getselectedCols();const o={columnIndex:e,headerCell:s,column:t.getColumnByIndex(e),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(o,sc)}this.updateColProps(e)}}clearColumnSelection(e){if(this.isColumnSelected){const t=this.parent;if(!qe(e)&&-1===this.selectedColumnsIndexes.indexOf(e))return;const i=qe(e)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:e,s=t.getColumnByIndex(i);let n;const o=t.getColumnByIndex(i);n=s.getFreezeTableName()===Zd?t.getFrozenRightColumnHeaderByIndex(i):"movable"===s.getFreezeTableName()?t.getMovableColumnHeaderByIndex(i):t.getColumnHeaderByUid(o.uid);const r={columnIndex:i,headerCell:n,columnIndexes:this.selectedColumnsIndexes,column:o,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted};if(this.columnDeselect(r,"columnDeselecting"))return void this.disableInteracted();const l=qe(e)?[].slice.call(t.getHeaderContent().getElementsByClassName("e-columnselection")):[n],a=this.getSelectedColumnCells(e);for(let e=0,h=l.length;e<h;e++)_u([l[e]],!1,"e-columnselection");for(let e=0,h=a.length;e<h;e++)_u([a[e]],!1,"e-columnselection");qe(e)?(this.columnDeselect(r,"columnDeselected"),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(e=>e.isSelected=!1)):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(e),1),this.parent.getColumns()[e].isSelected=!1)}}getselectedCols(){const e=this.parent;let t;if(this.selectedColumnsIndexes.length>1){t=[];for(let i=0;i<this.selectedColumnsIndexes.length;i++)t.push(e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[i]).uid))}else t=e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return t}getSelectedColumnCells(e){const t=this.parent,i=!qe(this.parent.rowTemplate);let s,n,o=i?t.getRows():t.getDataRows();t.isFrozenGrid()&&t.getContent().querySelector("."+jd)&&(s=i?t.getMovableRows():t.getMovableDataRows(),o=t.addMovableRows(o,s),t.getFrozenMode()===Jd&&(n=i?t.getFrozenRightRows():t.getFrozenRightDataRows(),o=t.addMovableRows(o,n)));let r=[];const l=qe(e)?".e-columnselection":'[aria-colindex="'+e+'"]';for(let a=0,h=o.length;a<h;a++)r=r.concat([].slice.call(o[a].querySelectorAll(l)));return r}columnDeselect(e,t){return"columnDeselected"===t&&delete e.cancel,this.onActionComplete(e,t),e.cancel}updateColProps(e){this.prevColIndex=e,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0}clearColDependency(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]}updateColSelection(e,t){if(qe(this.parent.getColumns()[t]))return;const i=this.parent.getFrozenLeftCount(),s=this.parent.getMovableColumnsCount(),n=this.parent.getColumnByIndex(t),o=!qe(this.parent.rowTemplate);let r;this.selectedColumnsIndexes.push(t),this.parent.getColumns()[t].isSelected=!0,n.getFreezeTableName()===Zd?(t-=i+s,r=o?this.parent.getFrozenRightRows():this.parent.getFrozenRightDataRows()):"movable"===n.getFreezeTableName()?(t-=i,r=o?this.parent.getMovableRows():this.parent.getMovableDataRows()):(t+=this.parent.getIndentCount(),r=o?this.parent.getRows():this.parent.getDataRows()),_u([e],!0,"e-columnselection");for(let l=0,a=r.length;l<a;l++)r[l].classList.contains(Yd)&&(!r[l].classList.contains(Qd)&&!r[l].classList.contains($d)||"Normal"!==this.parent.editSettings.mode||qe(r[l].querySelector("tr").childNodes[t])?qe(r[l].childNodes[t])||_u([r[l].childNodes[t]],!0,"e-columnselection"):_u([r[l].querySelector("tr").childNodes[t]],!0,"e-columnselection"))}headerSelectionHandler(e){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(e):this.isMultiShiftRequest?this.selectColumnsByRange(je(this.prevColIndex)?e:this.prevColIndex,e):this.selectColumnWithExisting(e)}addEventListener_checkbox(){this.parent.on(mc,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(Kh,this.onDataBoundFunction),this.parent.on(Id,this.onDataBoundFunction),this.parent.on(gc,this.checkBoxSelectionChanged,this),this.parent.on(wd,this.initPerisistSelection,this),this.parent.on(bc,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(_h,this.actionCompleteFunc),this.parent.on(Mc,this.clickHandler,this),this.resizeEndFn=()=>{this.updateAutoFillPosition(),this.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener("resizeStop",this.resizeEndFn)}removeEventListener_checkbox(){this.parent.off(mc,this.dataReady),this.parent.removeEventListener(Kh,this.onDataBoundFunction),this.parent.removeEventListener(_h,this.actionCompleteFunc),this.parent.off(Id,this.onDataBoundFunction),this.parent.off(bc,this.setCheckAllForEmptyGrid),this.parent.off(Mc,this.clickHandler),this.parent.off(wd,this.initPerisistSelection)}setCheckAllForEmptyGrid(){const e=this.getCheckAllBox();e&&(this.parent.isCheckBoxSelection=!0,qt([e.nextElementSibling],["e-check","e-stop","e-uncheck"]))}dataReady(e){this.isHeaderCheckboxClicked=!1,"virtualscroll"===e.requestType||this.parent.isPersistSelection||this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType||(this.disableUI=!this.parent.enableImmutableMode,this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)}actionCompleteHandler(e){"save"===e.requestType&&this.parent.isPersistSelection&&this.refreshPersistSelection()}selectRowIndex(e){this.parent.isSelectedRowIndexUpdating=!0,this.parent.selectedRowIndex=e}disableInteracted(){this.isInteracted=!1}activeTarget(){this.actualTarget=this.isInteracted?this.actualTarget:null}}class Jp{constructor(e){this.parent=e,this.addEventListener()}search(e){const t=this.parent;e=qe(e)?"":e,function(e){const t=Qt("#"+e.element.id+"EditConfirm",e.element);return"Batch"===e.editSettings.mode&&$t(".e-updatedtd",e.element).length&&e.editSettings.showConfirmDialog&&(!t||t.classList.contains("e-popup-close"))}(t)?t.notify(Wc,{instance:this,handler:this.search,arg1:e}):e!==t.searchSettings.key?(t.searchSettings.key=e.toString(),t.dataBind()):this.refreshSearch&&t.refresh()}addEventListener(){this.parent.isDestroyed||(this.parent.on(yc,this.onPropertyChanged,this),this.parent.on(Sc,this.onSearchComplete,this),this.parent.on(Ic,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(_h,this.actionCompleteFunc),this.parent.on(rd,this.cancelBeginEvent,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(yc,this.onPropertyChanged),this.parent.off(Sc,this.onSearchComplete),this.parent.off(Ic,this.destroy),this.parent.removeEventListener(_h,this.actionCompleteFunc),this.parent.off(rd,this.cancelBeginEvent))}destroy(){this.removeEventListener()}onPropertyChanged(e){e.module===this.getModuleName()&&(qe(e.properties.key)?this.parent.notify(vc,{requestType:"searching",type:Gh}):this.parent.notify(vc,{requestType:"searching",type:Gh,searchString:this.parent.searchSettings.key}))}onSearchComplete(e){this.parent.trigger(_h,Ve(e,{searchString:this.parent.searchSettings.key,requestType:"searching",type:_h}))}onActionComplete(e){this.refreshSearch="searching"!==e.requestType}cancelBeginEvent(e){"searching"===e.requestType&&this.parent.setProperties({searchSettings:{key:""}},!0)}getModuleName(){return"search"}}class Zp{constructor(e){this.parent=e}show(e,t){const i=this.getToggleFields(e),s=this.getColumns(i,t);this.parent.notify(qc,{module:"edit"});for(let n=0;n<s.length;n++)s[n].visible=!0;this.setVisible(s)}hide(e,t){const i=this.getToggleFields(e),s=this.getColumns(i,t);this.parent.notify(qc,{module:"edit"});for(let n=0;n<s.length;n++)s[n].visible=!1;this.setVisible(s)}getToggleFields(e){let t=[];return t="string"==typeof e?[e]:e,t}getColumns(e,t){return Eu(e,e=>Eu(this.parent.columnModel,i=>{if(i[t]===e)return i})[0])}setVisible(e,t=[]){this.parent.trigger(Gh,{requestType:"columnstate",cancel:!1,columns:t=t.length>0?t:e},i=>{const s=this.parent.getColumns();if(e=qe(e)?s:e,i.cancel)return this.parent.notify("reset-columns",{showHideArgs:i}),void(e.length>0&&(e[0].visible=!0));Zu(this.parent)&&this.parent.contentModule.emptyVcRows(),this.parent.allowSelection&&this.parent.getSelectedRecords().length&&!this.parent.selectionSettings.persistSelection&&this.parent.clearSelection(),this.parent.enableColumnVirtualization?e.filter(e=>s.some(t=>e.field===t.field)).length&&this.parent.notify(kc,e):this.parent.notify(kc,e),this.parent.trigger(_h,{requestType:"columnstate",columns:t}),"All"!==this.parent.columnQueryMode&&this.parent.refresh()})}}class eu{constructor(e){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.widthService=new Bp(e),this.addEventListener()}getModuleName(){return"scroll"}setWidth(e){this.parent.element.style.width=Ke(this.parent.width),e&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element&&this.parent.toolbarModule.toolbar.refreshOverflow()}setHeight(){let e=0;const t=this.parent.getContent().querySelector(".e-content");let i=this.parent.height;if(this.parent.isFrozenGrid()&&"auto"!==this.parent.height&&this.parent.height.toString().indexOf("%")<0&&(i=parseInt(i,10)-eu.getScrollBarWidth()),!this.parent.enableVirtualization&&this.parent.frozenRows&&"auto"!==this.parent.height){const s=this.parent.getHeaderContent().querySelector(sp);e=s?s.offsetHeight:0,s&&e&&(e-=s.getElementsByClassName($d).length*this.parent.getRowHeight()),t.style.height=Ke(i-e)}else t.style.height=Ke(i);this.ensureOverflow(t),this.parent.isFrozenGrid()&&this.refresh()}setPadding(){const e=this.parent.getHeaderContent(),t=eu.getScrollBarWidth()-this.getThreshold(),i=this.getCssProperties(),s="Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Jd?"0.5px":"1px";e.querySelector("."+qd).style[i.border]=t>0?s:"0px",e.style[i.padding]=t>0?t+"px":"0px"}removePadding(e){const t=this.getCssProperties(e),i=this.parent.getHeaderContent().querySelector("."+qd);i.style[t.border]="",i.parentElement.style[t.padding]="";const s=this.parent.getFooterContent();s&&s.classList.contains("e-footerpadding")&&s.classList.remove("e-footerpadding")}refresh(){if("100%"!==this.parent.height)return;const e=this.parent.getContent();this.parent.element.style.height="100%";const t=this.widthService.getSiblingsHeight(e);e.style.height="calc(100% - "+t+"px)",this.parent.isFrozenGrid()&&(e.firstElementChild.style.height="calc(100% - "+Nu()+"px)")}getThreshold(){return"mozilla"===zt.info.name?.5:1}addEventListener(){this.parent.isDestroyed||(this.parent.on(bc,this.wireEvents,this),this.parent.on(gc,this.wireEvents,this),this.parent.on(fc,this.onPropertyChanged,this),this.parent.on(nd,this.wireEvents,this),this.parent.on(wc,this.setScrollLeft,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(bc,this.wireEvents),this.parent.off(gc,this.wireEvents),this.parent.off(fc,this.onPropertyChanged),this.parent.off(nd,this.wireEvents),this.parent.off(wc,this.setScrollLeft))}setScrollLeft(){this.parent.isFrozenGrid()?this.parent.headerModule.getMovableHeader().scrollLeft=this.previousValues.left:this.parent.getHeaderContent().querySelector("."+qd).scrollLeft=this.previousValues.left}onFrozenContentScroll(){return e=>{null===this.content.querySelector(sp)||this.parent.isPreventScrollEvent||(!qe(this.parent.infiniteScrollModule)&&this.parent.enableInfiniteScrolling&&this.parent.notify(bd,e),this.previousValues.top=e.target.scrollTop)}}onContentScroll(e){const t=e,i=t.classList.contains(qd);return e=>{if(null===this.content.querySelector(sp)||this.parent.isPreventScrollEvent)return;const s=e.target,n=s.scrollLeft;if(!qe(this.parent.infiniteScrollModule)&&this.parent.enableInfiniteScrolling&&this.parent.notify(bd,{target:e.target,isLeft:this.previousValues.left!==n}),this.parent.groupSettings.columns.length&&this.parent.groupSettings.enableLazyLoading){const e=this.previousValues.top<this.parent.getContent().firstElementChild.scrollTop;this.parent.notify("lazy-load-scroll-handler",{scrollDown:e})}this.parent.notify("virtual-scroll-edit",{});const o=s.classList.contains("e-summarycontent");this.previousValues.left!==n?(this.parent.notify("close-filter-dialog",e),t.scrollLeft=n,o&&(this.header.scrollLeft=n),this.previousValues.left=n,this.parent.notify(Fc,{left:n})):this.previousValues.top=i?s.scrollTop:this.previousValues.top}}onCustomScrollbarScroll(e,t){const i=e,s=t;return e=>{if(null===this.content.querySelector(sp))return;const t=e.target.scrollLeft;this.previousValues.left!==t&&(i.scrollLeft=t,s.scrollLeft=t,this.previousValues.left=t,this.parent.notify(Fc,{left:t}))}}onTouchScroll(e){const t=e;return e=>{if("mouse"===e.pointerType)return;const i=this.parent.isFrozenGrid(),s=this.getPointXY(e),n=t.scrollLeft+(this.pageXY.x-s.x),o=i?this.parent.getHeaderContent().querySelector("."+Wd):this.parent.getHeaderContent().querySelector("."+qd),r=i?this.parent.getContent().querySelector("."+jd):this.parent.getContent().querySelector(".e-content");this.previousValues.left===n||n<0||o.scrollWidth-o.clientWidth<n||(e.preventDefault(),o.scrollLeft=n,r.scrollLeft=n,i&&(this.parent.getContent().querySelector(".e-movablescrollbar").scrollLeft=n),this.pageXY.x=s.x,this.previousValues.left=n)}}setPageXY(){return e=>{"mouse"!==e.pointerType&&(this.pageXY=this.getPointXY(e))}}getPointXY(e){const t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t}getScrollbleParent(e){if(null===e)return null;const t=qe(e.tagName)?e.scrollingElement:e,i=document.defaultView.getComputedStyle(t,null).overflowY;return t.scrollHeight>t.clientHeight&&"hidden"!==i&&"visible"!==i||"HTML"===e.tagName||"BODY"===e.tagName?e:this.getScrollbleParent(e.parentNode)}addStickyListener(e){e?(this.parentElement=this.getScrollbleParent(this.parent.element.parentElement),this.parentElement&&Bt.add("HTML"===this.parentElement.tagName||"BODY"===this.parentElement.tagName?document:this.parentElement,"scroll",this.makeStickyHeader,this)):Bt.remove(this.parentElement,"scroll",this.makeStickyHeader)}wireEvents(){if(this.oneTimeReady){const e=this.parent.isFrozenGrid();this.content=this.parent.getContent().querySelector(".e-content"),this.header=this.parent.getHeaderContent().querySelector("."+qd);const t=this.content.querySelector("."+jd),i=this.header.querySelector("."+Wd),s=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.frozenRows&&(Bt.add(e?i:this.header,"touchstart pointerdown",this.setPageXY(),this),Bt.add(e?i:this.header,"touchmove pointermove",this.onTouchScroll(e?t:this.content),this)),this.parent.isFrozenGrid()?(Bt.add(s,"scroll",this.onCustomScrollbarScroll(t,i),this),Bt.add(t,"scroll",this.onCustomScrollbarScroll(s,i),this),Bt.add(i,"scroll",this.onCustomScrollbarScroll(s,t),this),Bt.add(this.content,"scroll",this.onFrozenContentScroll(),this),Bt.add(i,"touchstart pointerdown",this.setPageXY(),this),Bt.add(i,"touchmove pointermove",this.onTouchScroll(t),this),Bt.add(t,"touchstart pointerdown",this.setPageXY(),this),Bt.add(t,"touchmove pointermove",this.onTouchScroll(i),this)):(Bt.add(this.content,"scroll",this.onContentScroll(this.header),this),Bt.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.aggregates.length&&Bt.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}const e=this.parent.getContentTable();let t,i,s;Su(()=>{t=this.header.scrollLeft,i=e.scrollHeight,s=this.parent.getContent().clientHeight},()=>{const n={cancel:!1};this.parent.notify("check-scroll-reset",n),this.parent.enableVirtualization||this.parent.enableInfiniteScrolling||(i<s&&(Vt(e.querySelectorAll("tr:last-child td"),"e-lastrowcell"),this.parent.isFrozenGrid()&&Vt(this.parent.getContent().querySelector("."+jd).querySelectorAll("tr:last-child td"),"e-lastrowcell")),n.cancel||((this.parent.frozenRows>0||this.parent.isFrozenGrid())&&this.header.querySelector("."+Wd)?this.header.querySelector("."+Wd).scrollLeft=this.previousValues.left:this.header.scrollLeft=this.previousValues.left,this.content.scrollLeft=this.previousValues.left,this.content.scrollTop=this.previousValues.top)),this.parent.enableColumnVirtualization||(this.content.scrollLeft=t),this.parent.isFrozenGrid()&&this.header.querySelector("."+Wd)&&(this.header.querySelector("."+Wd).scrollLeft=this.content.querySelector("."+jd).scrollLeft)}),this.parent.isPreventScrollEvent=!1}getCssProperties(e){const t={},i=qe(e)?this.parent.enableRtl:e;return t.border=i?"borderLeftWidth":"borderRightWidth",t.padding=i?"paddingLeft":"paddingRight",t}ensureOverflow(e){e.style.overflowY="auto"===this.parent.height?"auto":"scroll"}onPropertyChanged(e){e.module===this.getModuleName()&&(this.setPadding(),this.oneTimeReady=!0,"auto"===this.parent.height&&this.removePadding(),this.wireEvents(),this.setHeight(),this.setWidth(!qe(e.properties.width)))}makeStickyHeader(){if(this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()){const e=this.parent.getContent().getClientRects()[0];if(e){const t=this.parent.getHeaderContent(),i=this.parent.element.querySelector(".e-toolbar"),s=this.parent.element.querySelector(".e-groupdroparea"),n=t.offsetHeight+(i?i.offsetHeight:0)+(s?s.offsetHeight:0),o=this.parentElement.getClientRects()[0].top,r=e.left;if(e.top-(o<0?0:o)<n&&e.bottom>0){t.classList.add("e-sticky");let n=0;s&&(this.setSticky(s,n,e.width,r,!0),n+=s.getClientRects()[0].height),i&&(this.setSticky(i,n,e.width,r,!0),n+=i.getClientRects()[0].height),this.setSticky(t,n,e.width,r,!0)}else if(t.classList.contains("e-sticky")){this.setSticky(t,null,null,null,!1),i&&this.setSticky(i,null,null,null,!1),s&&this.setSticky(s,null,null,null,!1);const e=this.parent.element.querySelector(".e-ccdlg");e&&e.classList.remove("e-sticky")}this.parent.notify("sticky-scroll-complete",{})}}}setSticky(e,t,i,s,n){n?(e.style.width=i+"px",e.classList.add("e-sticky")):e.classList.remove("e-sticky"),e.style.top=null!=t?t+"px":"",e.style.left=null!==s?parseInt(e.style.left,10)!==s?s+"px":e.style.left:""}destroy(){const e=this.parent.element;if(!e||!e.querySelector(".e-gridheader")&&!e.querySelector("."+Nd))return;this.removeEventListener(),this.removePadding();const t=this.parent.getContent().querySelector(".e-content");qt([this.parent.getHeaderContent().querySelector("."+qd)],qd),qt([t],Ud),t.style.height="",this.parent.element.style.width="",Bt.remove(t,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1)}static getScrollBarWidth(){return Nu()}}var tu=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let iu=(()=>{class e extends Ai{constructor(){super(...arguments),this.templateFn={}}setFormatter(e){this.formatFn=e}getFormatter(){return this.formatFn}setTemplate(e={}){void 0!==this.footerTemplate&&(this.templateFn[He(kd,kd.Summary)]={fn:Ds(this.footerTemplate,e),property:"footerTemplate"}),void 0!==this.groupFooterTemplate&&(this.templateFn[He(kd,kd.GroupSummary)]={fn:Ds(this.groupFooterTemplate,e),property:"groupFooterTemplate"}),void 0!==this.groupCaptionTemplate&&(this.templateFn[He(kd,kd.CaptionSummary)]={fn:Ds(this.groupCaptionTemplate,e),property:"groupCaptionTemplate"})}getTemplate(e){return this.templateFn[He(kd,e)]}setPropertiesSilent(e){this.setProperties(e,!0)}}return tu([gi()],e.prototype,"type",void 0),tu([gi()],e.prototype,"field",void 0),tu([gi()],e.prototype,"columnName",void 0),tu([gi()],e.prototype,"format",void 0),tu([gi()],e.prototype,"footerTemplate",void 0),tu([gi()],e.prototype,"groupFooterTemplate",void 0),tu([gi()],e.prototype,"groupCaptionTemplate",void 0),tu([gi()],e.prototype,"customAggregate",void 0),e})(),su=(()=>{class e extends Ai{}return tu([bi([],iu)],e.prototype,"columns",void 0),e})();class nu{constructor(e){this.copyContent="",this.isSelect=!1,this.parent=e,this.addEventListener()}addEventListener(){this.parent.isDestroyed||(this.parent.on(gc,this.initialEnd,this),this.parent.on(Tc,this.keyDownHandler,this),this.parent.on(Mc,this.clickHandler,this),Bt.add(this.parent.element,"keydown",this.pasteHandler,this))}removeEventListener(){this.parent.isDestroyed||(this.parent.off(Tc,this.keyDownHandler),this.parent.off(gc,this.initialEnd),this.parent.off(Mc,this.clickHandler),Bt.remove(this.parent.element,"keydown",this.pasteHandler))}clickHandler(e){let t=e.target;t=ku(t,"e-rowcell")}pasteHandler(e){const t=this.parent,i=/(Mac)/i.test(navigator.platform);if(67===e.keyCode&&i&&e.metaKey&&!t.isEdit&&this.copy(),86===e.keyCode&&(e.ctrlKey||i&&e.metaKey)&&!t.isEdit){if(!Zt(document.activeElement,"."+Hd)||!t.editSettings.allowEditing||"Batch"!==t.editSettings.mode||"Cell"!==t.selectionSettings.mode||"Flow"===t.selectionSettings.cellSelectionMode)return;this.activeElement=document.activeElement,this.clipBoardTextArea.value="";const e=window.scrollX,i=window.scrollY;this.clipBoardTextArea.focus(),setTimeout(()=>{this.activeElement.focus(),window.scrollTo(e,i),this.paste(this.clipBoardTextArea.value,this.parent.getSelectedRowCellIndexes()[0].rowIndex,this.parent.getSelectedRowCellIndexes()[0].cellIndexes[0])},10)}}paste(e,t,i){const s=this.parent;let n,o,r,l=i,a=t;if(!s.editSettings.allowEditing||"Batch"!==s.editSettings.mode||"Cell"!==s.selectionSettings.mode||"Flow"===s.selectionSettings.cellSelectionMode)return;const h=e.split("\n");let c;const d=s.getDataRows();let p,u;const m=this.parent.isFrozenGrid();m&&(p=s.getMovableDataRows(),s.getFrozenRightColumnsCount()&&(u=s.getFrozenRightDataRows()));for(let f=0;f<h.length;f++){if(c=h[f].split("\t"),l=i,f===h.length-1&&""===h[f]||je(s.getRowByIndex(a))){l++;break}for(let e=0;e<c.length;e++){if(r=s.getCellFromIndex(a,l),m){const e=p[a];r=!!d[a].querySelector('[aria-colindex="'+l+'"]')||e.querySelector('[aria-colindex="'+l+'"]'),u&&!r&&(r=u[a].querySelector('[aria-colindex="'+l+'"]'))}if(!r){l++;break}if(n=s.getColumnByIndex(l),o=n.getParser()?n.getParser()(c[e]):c[e],n.allowEditing&&!n.isPrimaryKey&&!n.template){const e={column:n,data:o,rowIndex:a};this.parent.trigger("beforePaste",e),a=e.rowIndex,e.cancel||s.editModule&&("number"===n.type?this.parent.editModule.updateCell(a,n.field,parseFloat(e.data)):s.editModule.updateCell(a,n.field,e.data))}l++}a++}s.selectionModule.selectCellsByRange({rowIndex:t,cellIndex:i},{rowIndex:a-1,cellIndex:l-1});const g=this.parent.getCellFromIndex(a-1,l-1);g&&ti(g,["e-focus","e-focused"],[])}initialEnd(){this.parent.off(gc,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":"clipboard"}}),this.parent.element.appendChild(this.clipBoardTextArea)}keyDownHandler(e){"ctrlPlusC"===e.action?this.copy():"ctrlShiftPlusH"===e.action&&this.copy(!0)}setCopyData(e){if(""===window.getSelection().toString()){const t=this.parent.isFrozenGrid();let i,s;this.clipBoardTextArea.value=this.copyContent="";const n=this.parent.getRows();if(t&&(i=this.parent.getMovableDataRows(),this.parent.getFrozenMode()===Jd&&(s=this.parent.getFrozenRightRows())),"Cell"!==this.parent.selectionSettings.mode){const o=this.parent.getSelectedRowIndexes().sort((e,t)=>e-t);if(e){const t=[];for(let e=0;e<this.parent.getVisibleColumns().length;e++)t[e]=this.parent.getVisibleColumns()[e].headerText;this.getCopyData(t,!1,"\t",e),this.copyContent+="\n"}for(let r=0;r<o.length;r++){r>0&&(this.copyContent+="\n");const l=[].slice.call(n[o[r]].querySelectorAll(".e-rowcell:not(.e-hide)"));t&&(l.push(...[].slice.call(i[o[r]].querySelectorAll(".e-rowcell:not(.e-hide)"))),s&&l.push(...[].slice.call(s[o[r]].querySelectorAll(".e-rowcell:not(.e-hide)")))),this.getCopyData(l,!1,"\t",e)}}else{const o=this.checkBoxSelection();if(o.status){if(e){const t=[];for(let e=0;e<o.colIndexes.length;e++)t.push(this.parent.getColumnHeaderByIndex(o.colIndexes[e]));this.getCopyData(t,!1,"\t",e),this.copyContent+="\n"}for(let r=0;r<o.rowIndexes.length;r++){r>0&&(this.copyContent+="\n");const l=[].slice.call(n[o.rowIndexes[r]].getElementsByClassName("e-cellselectionbackground"));t&&(l.push(...[].slice.call(i[o.rowIndexes[r]].getElementsByClassName("e-cellselectionbackground"))),s&&l.push(...[].slice.call(s[o.rowIndexes[r]].getElementsByClassName("e-cellselectionbackground")))),this.getCopyData(l,!1,"\t",e)}}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,"\n",e)}const o={data:this.copyContent,cancel:!1};if(this.parent.trigger("beforeCopy",o),o.cancel)return;this.clipBoardTextArea.value=this.copyContent=o.data,zt.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}}getCopyData(e,t,i,s){const n="string"!=typeof e[0];for(let o=0;o<e.length;o++){if(s&&t){const t=parseInt(e[o].getAttribute(tp),10);this.copyContent+=this.parent.getColumns()[t].headerText+"\n"}n?e[o].classList.contains("e-hide")||(this.copyContent+=e[o].innerText):this.copyContent+=e[o],o<e.length-1&&(this.copyContent+=i)}}copy(e){document.queryCommandSupported("copy")&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)}getModuleName(){return"clipboard"}destroy(){this.removeEventListener(),this.clipBoardTextArea&&Yt(this.clipBoardTextArea)}checkBoxSelection(){const e=this.parent;let t={status:!1};if("Cell"===e.selectionSettings.mode){const i=e.getSelectedRowCellIndexes();let s;const n=[];let o;for(o=0;o<i.length&&(i[o].cellIndexes.length&&n.push(i[o].rowIndex),!i[o].cellIndexes.length||(s||(s=JSON.stringify(i[o].cellIndexes.sort())),s===JSON.stringify(i[o].cellIndexes.sort())));o++);n.sort((e,t)=>e-t),o===i.length&&n[n.length-1]-n[0]==n.length-1&&(t={status:!0,rowIndexes:n,colIndexes:i[0].cellIndexes})}return t}}var ou,ru=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};let lu=(()=>{class e extends Ai{}return ru([gi()],e.prototype,"field",void 0),ru([gi()],e.prototype,"direction",void 0),ru([gi(!1)],e.prototype,"isFromGroup",void 0),e})(),au=(()=>{class e extends Ai{}return ru([bi([],lu)],e.prototype,"columns",void 0),ru([gi(!0)],e.prototype,"allowUnsort",void 0),e})(),hu=(()=>{class e extends Ai{}return ru([gi()],e.prototype,"field",void 0),ru([gi()],e.prototype,"operator",void 0),ru([gi()],e.prototype,"value",void 0),ru([gi()],e.prototype,"matchCase",void 0),ru([gi(!1)],e.prototype,"ignoreAccent",void 0),ru([gi()],e.prototype,"predicate",void 0),ru([gi({})],e.prototype,"actualFilterValue",void 0),ru([gi({})],e.prototype,"actualOperator",void 0),ru([gi()],e.prototype,"type",void 0),ru([gi()],e.prototype,"ejpredicate",void 0),ru([gi()],e.prototype,"uid",void 0),ru([gi()],e.prototype,"isForeignKey",void 0),e})(),cu=(()=>{class e extends Ai{}return ru([gi(!1)],e.prototype,"enableCache",void 0),ru([gi(3)],e.prototype,"maxBlocks",void 0),ru([gi(3)],e.prototype,"initialBlocks",void 0),e})(),du=(()=>{class e extends Ai{}return ru([bi([],hu)],e.prototype,"columns",void 0),ru([gi("FilterBar")],e.prototype,"type",void 0),ru([gi()],e.prototype,"mode",void 0),ru([gi(!0)],e.prototype,"showFilterBarStatus",void 0),ru([gi(1500)],e.prototype,"immediateModeDelay",void 0),ru([gi()],e.prototype,"operators",void 0),ru([gi(!1)],e.prototype,"ignoreAccent",void 0),ru([gi(!1)],e.prototype,"enableCaseSensitivity",void 0),ru([gi(!1)],e.prototype,"showFilterBarOperator",void 0),e})(),pu=(()=>{class e extends Ai{}return ru([gi("Row")],e.prototype,"mode",void 0),ru([gi("Flow")],e.prototype,"cellSelectionMode",void 0),ru([gi("Single")],e.prototype,"type",void 0),ru([gi(!1)],e.prototype,"checkboxOnly",void 0),ru([gi(!1)],e.prototype,"persistSelection",void 0),ru([gi("Default")],e.prototype,"checkboxMode",void 0),ru([gi(!1)],e.prototype,"enableSimpleMultiRowSelection",void 0),ru([gi(!0)],e.prototype,"enableToggle",void 0),ru([gi(!1)],e.prototype,"allowColumnSelection",void 0),e})(),uu=(()=>{class e extends Ai{}return ru([gi([])],e.prototype,"fields",void 0),ru([gi("")],e.prototype,"key",void 0),ru([gi("contains")],e.prototype,"operator",void 0),ru([gi(!0)],e.prototype,"ignoreCase",void 0),ru([gi(!1)],e.prototype,"ignoreAccent",void 0),e})(),mu=(()=>{class e extends Ai{}return ru([gi()],e.prototype,"targetID",void 0),e})(),gu=(()=>{class e extends Ai{}return ru([gi("Both")],e.prototype,"wrapMode",void 0),e})(),fu=(()=>{class e extends Ai{}return ru([gi("Normal")],e.prototype,"mode",void 0),e})(),bu=(()=>{class e extends Ai{}return ru([gi(!0)],e.prototype,"showDropArea",void 0),ru([gi(!1)],e.prototype,"allowReordering",void 0),ru([gi(!1)],e.prototype,"showToggleButton",void 0),ru([gi(!1)],e.prototype,"showGroupedColumn",void 0),ru([gi(!0)],e.prototype,"showUngroupButton",void 0),ru([gi(!1)],e.prototype,"disablePageWiseAggregates",void 0),ru([gi([])],e.prototype,"columns",void 0),ru([gi()],e.prototype,"captionTemplate",void 0),ru([gi(!1)],e.prototype,"enableLazyLoading",void 0),e})(),yu=(()=>{class e extends Ai{}return ru([gi(!1)],e.prototype,"allowAdding",void 0),ru([gi(!1)],e.prototype,"allowEditing",void 0),ru([gi(!1)],e.prototype,"allowDeleting",void 0),ru([gi("Normal")],e.prototype,"mode",void 0),ru([gi(!0)],e.prototype,"allowEditOnDblClick",void 0),ru([gi(!0)],e.prototype,"showConfirmDialog",void 0),ru([gi(!1)],e.prototype,"showDeleteConfirmDialog",void 0),ru([gi("")],e.prototype,"template",void 0),ru([gi("")],e.prototype,"headerTemplate",void 0),ru([gi("")],e.prototype,"footerTemplate",void 0),ru([gi("Top")],e.prototype,"newRowPosition",void 0),ru([gi({})],e.prototype,"dialog",void 0),ru([gi(!1)],e.prototype,"allowNextRowEdit",void 0),e})(),vu=(()=>{let e=ou=class extends Bi{constructor(e,t){super(e,t),this.isPreventScrollEvent=!1,this.inViewIndexes=[],this.keyA=!1,this.frozenRightCount=0,this.frozenLeftCount=0,this.tablesCount=1,this.movableCount=0,this.visibleFrozenLeft=0,this.visibleFrozenRight=0,this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.media={},this.isFreezeRefresh=!1,this.tableIndex=0,this.componentRefresh=Bi.prototype.refresh,this.isVirtualAdaptive=!1,this.vRows=[],this.vcRows=[],this.vGroupOffsets={},this.rowUid=0,this.currentViewData=[],this.isManualRefresh=!1,this.enableDeepCompare=!1,this.lockcolPositionCount=0,this.prevPageMoving=!1,this.pageTemplateChange=!1,this.isAutoGen=!1,this.mediaBindInstance={},this.commandDelIndex=void 0,this.asyncTimeOut=50,this.isExportGrid=!1,this.enableLogger=!0,this.needsID=!0,ou.Inject($p),ze("mergePersistData",this.mergePersistGridData,this)}getPersistData(){const e=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],t={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]};for(let o=0;o<e.length;o++){const i=this[e[o]];for(const s of t[e[o]])delete i[s]}const i=this.pageSettings.template,s=Object.assign({template:void 0},this.pageSettings);this.setProperties({pageSettings:s},!0),this.isAngular&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!qe(this.pagerTemplate);const n=this.addOnPersist(e);return s.template=i,this.setProperties({pageSettings:s},!0),n}requiredModules(){this.setFrozenCount(),this.enableInfiniteAggrgate();const e=[];return this.isDestroyed||(this.allowFiltering&&e.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator]}),this.allowExcelExport&&e.push({member:"ExcelExport",args:[this,this.serviceLocator]}),this.allowPdfExport&&e.push({member:"PdfExport",args:[this]}),this.allowSorting&&e.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator]}),this.allowPaging&&e.push({member:"pager",args:[this,this.pageSettings]}),this.allowSelection&&e.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator]}),e.push({member:"resize",args:[this]}),this.allowReordering&&e.push({member:"reorder",args:[this]}),this.allowRowDragAndDrop&&e.push({member:"rowDragAndDrop",args:[this]}),this.allowGrouping&&e.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator]}),this.aggregates.length&&e.push({member:"aggregate",args:[this,this.serviceLocator]}),this.isDetail()&&e.push({member:"detailRow",args:[this,this.serviceLocator]}),(this.toolbar||this.toolbarTemplate)&&e.push({member:"toolbar",args:[this,this.serviceLocator]}),(this.enableVirtualization||this.enableColumnVirtualization)&&e.push({member:"virtualscroll",args:[this,this.serviceLocator]}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&e.push({member:"freeze",args:[this,this.serviceLocator]}),this.isCommandColumn(this.columns)&&e.push({member:"commandColumn",args:[this,this.serviceLocator]}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&e.push({member:"edit",args:[this,this.serviceLocator]}),this.extendRequiredModules(e)),e}extendRequiredModules(e){this.enableInfiniteScrolling&&e.push({member:"infiniteScroll",args:[this,this.serviceLocator]}),this.groupSettings.enableLazyLoading&&e.push({member:"lazyLoadGroup",args:[this,this.serviceLocator]}),this.contextMenuItems&&e.push({member:"contextMenu",args:[this,this.serviceLocator]}),this.showColumnMenu&&e.push({member:"columnMenu",args:[this,this.serviceLocator]}),this.showColumnChooser&&e.push({member:"columnChooser",args:[this,this.serviceLocator]}),this.isForeignKeyEnabled(this.columns)&&e.push({member:"foreignKey",args:[this,this.serviceLocator]}),this.enableLogger&&e.push({member:"logger",args:[this]})}preRender(){this.serviceLocator=new Pp,this.initProperties(),this.initializeServices()}initProperties(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=Bi.prototype.refresh,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",FilterMenuDialogARIA:"Filter menu dialog",ExcelFilterDialogARIA:"Excel filter dialog",DialogEditARIA:"Edit dialog",ColumnChooserDialogARIA:"Column chooser dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}}render(){this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{role:"grid"}),Rr({target:this.element},this.createElement),this.renderModule=new Ap(this,this.serviceLocator),this.searchModule=new Jp(this),this.scrollModule=new eu(this),this.notify(pc,{}),!0!==this.getDataModule().dataManager.dataSource.offline&&void 0!==this.getDataModule().dataManager.dataSource.url||(this.isVirtualAdaptive=!0),this.trigger(Vh),Mu(this.columns,this.enableColumnVirtualization,this),this.enablePersistence&&this.notify(cd,{}),this.getMediaColumns(),Tu(this.columns),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),this.showSpinner(),this.notify(uc,{})}showSpinner(){this.isExportGrid||Br(this.element)}hideSpinner(){this.isExportGrid||Nr(this.element)}updateStackedFilter(){this.allowFiltering&&"FilterBar"===this.filterSettings.type&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")}getMediaColumns(){if(!this.enableColumnVirtualization){const e=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!qe(e))for(let t=0;t<e.length;t++)qe(e[t].hideAtMedia)||!qe(e[t].visible)&&!e[t].visible||this.pushMediaColumn(e[t],t)}}pushMediaColumn(e,t){this.mediaCol.push(e),this.media[e.uid]=window.matchMedia(e.hideAtMedia),this.mediaQueryUpdate(t,this.media[e.uid]),this.mediaBindInstance[t]=this.mediaQueryUpdate.bind(this,t),this.media[e.uid].addListener(this.mediaBindInstance[t])}updateMediaColumns(e){if(!this.enableColumnVirtualization){const t=this.getColumnIndexByUid(e.uid);for(let i=0;i<this.mediaCol.length;i++)if(e.uid===this.mediaCol[i].uid)return void this.mediaCol.splice(i,1);this.pushMediaColumn(e,t)}}mediaQueryUpdate(e,t){const i=this.getColumns()[e];this.mediaCol.some(e=>e.uid===i.uid)&&(i.visible=t.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,i.visible?this.showHider.show(i.headerText,"headerText"):this.showHider.hide(i.headerText,"headerText")))}refreshMediaCol(){this.isInitialLoad=!0;const e=this.element.querySelector("."+Vd);this.aggregates.length&&this.element.scrollHeight>this.height&&e&&Vt([e],["e-footerpadding"]),this.getColumns().filter(e=>"checkbox"===e.type).length&&"ResetOnRowClick"===this.selectionSettings.checkboxMode&&(this.isCheckBoxSelection=!1),"Vertical"===this.rowRenderingMode&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),qt([this.element],"e-gridhover")),this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh()}removeMediaListener(){for(let e=0;e<this.mediaCol.length;e++)this.media[this.mediaCol[e].uid].removeListener(this.mediaBindInstance[this.mediaCol[e].index])}eventInitializer(){}destroy(){const e=this.element;if(!e)return;const t=!(!e.querySelector(".e-gridheader")||!e.querySelector("."+Nd));t&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(Ic,{}),this.destroyDependentModules(),this.destroyTemplate(["template"]),t&&super.destroy(),this.toolTipObj.destroy();const i=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"];for(let s=0;s<i.length;s++)this[i[s]]&&(this[i[s]]=null);this.element.innerHTML="",ti(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"]),this.isFreezeRefresh=!1}destroyDependentModules(){const e=this.element;e&&(e.querySelector(".e-gridheader")||e.querySelector("."+Nd))&&(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())}getModuleName(){return"grid"}enableBoxSelection(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):this.element.classList.remove("e-afenabled")}onPropertyChanged(e,t){let i,s=!1,n=!1,o=!1;if(this.isDestroyed)return;this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();const r=Object.keys(e);r.indexOf("columns")>-1&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),n=!0);for(const l of r)switch(l){case"allowPaging":this.notify(fc,{module:"pager",enable:this.allowPaging}),s=!0;break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(yc,{module:"pager",properties:e.pageSettings});break}this.notify(yc,{module:"pager",properties:e.pageSettings}),(qe(e.pageSettings.currentPage)&&qe(e.pageSettings.pageSize)&&qe(e.pageSettings.totalRecordsCount)||!qe(t.pageSettings)&&e.pageSettings.currentPage!==t.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(s=!0);break;case"allowSorting":this.notify(fc,{module:"sort",enable:this.allowSorting}),s=!0,i=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(fc,{module:"filter",enable:this.allowFiltering}),s=!0,"FilterBar"!==this.filterSettings.type&&this.refreshHeader();break;case"height":case"width":this.notify(fc,{module:"scroll",properties:{width:e.width,height:e.height}});break;case"allowReordering":this.headerModule.refreshUI(),i=!0;break;case"allowRowDragAndDrop":this.notify(fc,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(fc,{module:"selection",enable:this.allowSelection});break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=Ru(this.rowTemplate),s=!0;break;case"detailTemplate":this.detailTemplateFn=Ru(this.detailTemplate),s=!0;break;case"allowGrouping":this.notify(fc,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),s=!0,i=!0;break;case"enableInfiniteScrolling":case"childGrid":s=!0;break;case"toolbar":this.notify(fc,{module:"toolbar"});break;case"groupSettings":this.notify(yc,{module:"group",properties:e.groupSettings,oldProperties:t.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(s=!0),this.notify(fc,{module:"aggregate",properties:e});break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"currencyCode":case"locale":this.log("frozen_rows_columns"),o=!0,n=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(s=!0),this.getDataModule().isQueryInvokedFromData=!1;break;default:this.extendedPropertyChange(l,e,n)}i&&this.updateDefaultCursor(),n?o||this.getFrozenColumns()||this.frozenRows?this.freezeRefresh():this.refresh():s&&(this.notify(vc,{requestType:"refresh"}),s=!1,this.maintainSelection(e.selectedRowIndex))}extendedPropertyChange(e,t,i){switch(e){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=t.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),"auto"!==this.height&&(this.scrollModule.removePadding(!t.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=t.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=t.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=t.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify("rtl-updated",{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?Vt([this.element],"e-grid-min-height"):qt([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(fc,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(fc,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(fc,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.notify(fc,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(yc,{module:"filter",properties:t.filterSettings});break;case"searchSettings":this.notify(yc,{module:"search",properties:t.searchSettings});break;case"sortSettings":this.notify(yc,{module:"sort"});break;case"selectionSettings":this.notify(yc,{module:"selection",properties:t.selectionSettings});break;case"editSettings":this.notify(yc,{module:"edit",properties:t.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(Xc,{case:"textwrap",isModeChg:"textWrapSettings"===e});break;case"dataSource":const s=this.getDataModule().getState();if(Object.getPrototypeOf(t).deepWatch){const e=this.getPrimaryKeyFieldNames()[0];for(let i=0,s=Object.keys(t.dataSource);i<s.length;i++)this.setRowData(Pe(e,this.dataSource[s[i]]),this.dataSource[s[i]])}else if(s.isPending){let e=qe(this.dataSource)?[]:this.dataSource.result;const t=s.group||[];for(let i=0;i<t.length;i++)e=Gs.b.group(e,t[i],s.aggregates||[]);this.dataSource={result:e,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),s.resolver(this.dataSource)}else this.getDataModule().setState({isDataChanged:!1}),this.notify(zc,{}),i||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(wd,{}));this.scrollRefresh();break;case"enableHover":(t.enableHover?Vt:qt)([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(t.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify(xd,{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.notify(Rd,{}),this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(t.enableStickyHeader)}}maintainSelection(e){if(-1!==e){const t=()=>{this.selectRow(e),this.off(gc,t)};this.on(gc,t,this)}}setProperties(e,t){super.setProperties(e,t),e.filterSettings&&this.filterModule&&t&&this.filterModule.refreshFilter()}setTablesCount(){const e=this.getFrozenColumns(),t=this.getFrozenLeftColumnsCount(),i=this.getFrozenRightColumnsCount();!e||t||i?e||!t&&!i||(t&&!i||i&&!t?this.tablesCount=2:t&&i&&(this.tablesCount=3)):this.tablesCount=2}getTablesCount(){return this.tablesCount}updateDefaultCursor(){let e=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)"));const t=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),i=this.getColumns();if(this.enableColumnVirtualization&&this.getFrozenColumns()){const t=this.contentModule.getHeaderCells();e=t.length?t:e}for(let s=0;s<e.length;s++){const t=e[s];(this.allowGrouping||this.allowReordering||this.allowSorting)&&t.classList.add(i[s].allowReordering&&i[s].allowSorting&&i[s].allowGrouping?"e-mousepointer":"e-defaultcursor")}for(let s=0;s<t.length;s++)this.allowReordering&&t[s].classList.add("e-mousepointer")}updateColumnModel(e){for(let t=0,i=e.length;t<i;t++)e[t].columns?this.updateColumnModel(e[t].columns):this.columnModel.push(e[t]);this.updateColumnLevelFrozen(),this.updateFrozenColumns(),this.updateLockableColumns()}updateColumnLevelFrozen(){const e=this.columnModel,t=[],i=[],s=[];if(this.frozenLeftCount||this.frozenRightCount){for(let n=0,o=e.length;n<o;n++){const o=e[n];"Left"===o.freeze?(o.freezeTable=ep,t.push(o)):"Right"===o.freeze?(o.freezeTable=Zd,i.push(o)):(o.freezeTable="movable",s.push(o))}this.columnModel=t.concat(s).concat(i)}}updateFrozenColumns(){if(this.frozenLeftCount||this.frozenRightCount)return;const e=this.columnModel,t=this.frozenColumns,i=this.getFrozenColumns();let s=0;for(let n=0,o=e.length;n<o;n++){const o=e[n];t&&(o.freezeTable=n<t?ep:"movable"),o.isFrozen&&n>=t?(o.freezeTable=ep,e.splice(this.frozenColumns+s,0,e.splice(n,1)[0]),s++):i&&!t&&(o.freezeTable="movable")}}getFrozenLeftCount(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()}isFrozenGrid(){return 0!==this.getFrozenColumns()||0!==this.getFrozenLeftColumnsCount()||0!==this.getFrozenRightColumnsCount()}getFrozenMode(){return this.frozenName}updateLockableColumns(){const e=this.columnModel;let t=0,i=0;const s=this.getFrozenColumns();for(let n=0;n<e.length;n++)e[n].lockColumn&&(n<s?(e.splice(t,0,e.splice(n,1)[0]),t++):(e.splice(s+i,0,e.splice(n,1)[0]),i++))}checkLockColumns(e){for(let t=0;t<e.length;t++)e[t].columns?this.checkLockColumns(e[t].columns):e[t].lockColumn&&this.lockcolPositionCount++}getColumns(e){const t=this.inViewIndexes.map(e=>e-this.groupSettings.columns.length).filter(e=>e>-1),i=t.length;(!this.enableColumnVirtualization||qe(this.columnModel)||0===this.columnModel.length||e)&&(this.columnModel=[],this.updateColumnModel(this.columns));let s=0===i?this.columnModel:this.columnModel.slice(t[0],t[i-1]+1);return this.contentModule&&this.enableColumnVirtualization&&this.isFrozenGrid()&&t.length&&t[0]>0&&(s=this.contentModule.ensureFrozenCols(s)),s}getStackedHeaderColumnByHeaderText(e,t){for(let i=0;i<t.length;i++){const s=t[i];if(s.field===e||s.headerText===e){this.stackedColumn=s;break}s.columns&&this.getStackedHeaderColumnByHeaderText(e,s.columns)}return this.stackedColumn}getColumnIndexesInView(){return this.inViewIndexes}getQuery(){return this.query}getLocaleConstants(){return this.defaultLocale}setColumnIndexesInView(e){this.inViewIndexes=e}getVisibleColumns(){return this.getCurrentVisibleColumns()}getHeaderContent(){return this.headerModule.getPanel()}setGridHeaderContent(e){this.headerModule.setPanel(e)}getContentTable(){return this.contentModule.getTable()}setGridContentTable(e){this.contentModule.setTable(e)}getContent(){return this.contentModule.getPanel()}setGridContent(e){this.contentModule.setPanel(e)}getHeaderTable(){return this.headerModule.getTable()}setGridHeaderTable(e){this.headerModule.setTable(e)}getFooterContent(){return this.footerElement=this.element.getElementsByClassName(Vd)[0],this.footerElement}getFooterContentTable(){return this.footerElement=this.element.getElementsByClassName(Vd)[0],this.footerElement.firstChild.firstChild}getPager(){return this.gridPager}setGridPager(e){this.gridPager=e}getRowByIndex(e){return this.contentModule.getRowByIndex(e)}getMovableRowByIndex(e){return this.contentModule.getMovableRowByIndex(e)}getFrozenRowByIndex(e){return this.getFrozenDataRows()[e]}getRows(){return this.contentModule.getRowElements()}getFrozenRightRowByIndex(e){return this.contentModule.getFrozenRightRowByIndex(e)}getRowInfo(e){const t=e;let i={target:e};if(!qe(e)&&qe(ku(t,"e-detailrowcollapse")&&qe(ku(t,"e-recordplusexpand")))){const s=Zt(t,"."+Hd);if(!s){const e=Zt(t,".e-row");if(!qe(e)&&!e.classList.contains("e-addedrow")){const t=this.getRowObjectFromUID(e.getAttribute("data-uid")),s=parseInt(e.getAttribute(ip),10);i={row:e,rowData:t.data,rowIndex:s}}return i}const n=parseInt(s.getAttribute(tp),10);if(!qe(s)&&!isNaN(n)){const t=Zt(s,".e-row"),o=parseInt(t.getAttribute(ip),10),r=this.getFrozenColumns(),l=this.columnModel[n].getFreezeTableName();let a=this.contentModule.getRows(),h=n+this.getIndentCount();this.isFrozenGrid()&&(l===ep?a=this.contentModule.getRows():"movable"===l?(h=n-r-this.frozenLeftCount,a=this.contentModule.getMovableRows()):l===Zd&&(h=n-(this.frozenLeftCount+this.movableCount),a=this.contentModule.getFrozenRightRows()));const c=a.filter(e=>e.uid===t.getAttribute("data-uid"));let d,p={};Object.keys(c).length&&(p=c[0].data,d=c[0].cells[h].column),i={cell:s,cellIndex:n,row:t,rowIndex:o,rowData:p,column:d,target:e}}}return i}getMovableRows(){return this.contentModule.getMovableRowElements()}getFrozenRightRows(){return this.contentModule.getFrozenRightRowElements()}getDataRows(){return this.getAllDataRows()}getAllDataRows(e){if(qe(this.getContentTable().querySelector(sp)))return[];const t=this.isFrozenGrid()?this.getFrozenLeftContentTbody():this.getContentTable().querySelector(sp);let i=[].slice.call(t.children);if(this.frozenRows){const e=this.isFrozenGrid()?this.getHeaderContent().querySelector("."+_d).querySelector(sp):this.getHeaderTable().querySelector(sp),t=[].slice.call(e.children);i=this.addMovableRows(t,i)}return this.generateDataRows(i,e)}addMovableRows(e,t){for(let i=0,s=t.length;i<s;i++)e.push(t[i]);return e}generateDataRows(e,t){const i=[];for(let s=0,n=e.length;s<n;s++)!e[s].classList.contains(Yd)||e[s].classList.contains("e-hiddenrow")&&!t||(this.isCollapseStateEnabled()?i[parseInt(e[s].getAttribute("aria-rowindex"),10)]=e[s]:i.push(e[s]));return i}getMovableDataRows(){return this.getAllMovableDataRows()}getAllMovableDataRows(e){if(!this.isFrozenGrid())return[];let t=[].slice.call(this.getContent().querySelector("."+jd).querySelector(sp).children);if(this.frozenRows){const e=[].slice.call(this.getHeaderContent().querySelector("."+Wd).querySelector(sp).children);t=this.addMovableRows(e,t)}return this.generateDataRows(t,e)}getFrozenDataRows(){return this.getAllFrozenDataRows()}getAllFrozenDataRows(e){let t=[].slice.call(this.getContent().querySelector("."+Gd).querySelector(sp).children);if(this.frozenRows){const e=[].slice.call(this.getHeaderContent().querySelector("."+_d).querySelector(sp).children);t=this.addMovableRows(e,t)}return this.generateDataRows(t,e)}getFrozenRightDataRows(){return this.getAllFrozenRightDataRows()}getAllFrozenRightDataRows(e){if("Right"!==this.getFrozenMode()&&"Left-Right"!==this.getFrozenMode())return[];let t=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(sp).children);if(this.frozenRows){const e=[].slice.call(this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(sp).children);t=this.addMovableRows(e,t)}return this.generateDataRows(t,e)}setCellValue(e,t,i){const s="Right"===this.getFrozenMode(),n=this.getPrimaryKeyFieldNames()[0],o=new bp(this,this.serviceLocator);let r=this.getColumnIndexByField(t);const l=this.getColumnByField(t),a=("movable"===l.getFreezeTableName()?this.contentModule.getMovableRows():"frozen-right"===l.getFreezeTableName()?this.getFrozenRightRowsObject():this.contentModule.getRows()).filter(t=>Pe(n,t.data)===e)[0];if(!qe(a?this.element.querySelector("[data-uid="+a.uid+"]"):null)){ze(t,i,a.data);let e=this.getFrozenLeftColumnsCount()||this.getFrozenColumns();const n=this.getMovableColumnsCount();this.isRowDragable()&&!s&&e++;const h=e+n,c=this.getCellFromIndex(a.index,r);if(!qe(c)){const n="movable"===l.getFreezeTableName()?e:"frozen-right"===l.getFreezeTableName()?h:0;this.groupSettings.columns.length&&(r+=this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&r++,this.isRowDragable()&&!s&&r++,o.refreshTD(c,a.cells[r-n],a.data,{index:a.index}),this.aggregates.length>0&&(this.notify(xc,{}),this.groupSettings.columns.length>0&&this.notify(Ec,{})),qe(a)||qe(a.changes)||(a.changes[t]=i),this.trigger(jh,{cell:c,column:l,data:a.data})}}}refreshReactColumnTemplateByUid(e){this.isReact&&this.clearTemplate(["columnTemplate"],void 0,()=>{const t=this.getRowsObject(),i=this.getIndentCount(),s=this.getNormalizedColumnIndex(e);for(let e=0;e<t.length;e++)if(t[e].isDataRow&&!qe(t[e].index)){const n=t[e].cells[s],o=new bp(this,this.serviceLocator),r=this.getCellFromIndex(t[e].index,s-i);o.refreshTD(r,n,t[e].data,{index:t[e].index})}})}setRowData(e,t){let i=this.contentModule.getRows();const s=this.getPrimaryKeyFieldNames()[0],n=new hp(this.serviceLocator,null,this);this.groupSettings.columns.length>0&&this.aggregates.length>0&&(i=i.filter(e=>e.isDataRow));const o=i.filter(t=>Pe(s,t.data)===e)[0];!qe(o)&&this.element.querySelectorAll("[data-uid="+o.uid+"]").length&&(o.changes=t,Xu(o,this.getForeignKeyColumns(),o.changes),n.refresh(o,this.getColumns(),!0),this.aggregates.length>0&&(this.notify(xc,{}),this.groupSettings.columns.length>0&&this.notify(Ec,{})))}getCellFromIndex(e,t){return um(this,this.getColumnByIndex(t),e,t)}getMovableCellFromIndex(e,t){if("Left-Right"===this.frozenName&&t>=this.movableCount)return;const i=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableDataRows()[e]&&this.getMovableDataRows()[e].getElementsByClassName(Hd)[t-i]}getFrozenRightCellFromIndex(e,t){const i=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount(),s=this.getFrozenRightDataRows();return s[e]&&s[e].getElementsByClassName(Hd)[t-i]}getColumnHeaderByIndex(e){return this.getHeaderTable().getElementsByClassName("e-headercell")[e]}getMovableColumnHeaderByIndex(e){const t=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableVirtualHeader().getElementsByClassName("e-headercell")[e-t]}getFrozenRightColumnHeaderByIndex(e){const t=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount();return this.getFrozenRightHeader().getElementsByClassName("e-headercell")[e-t]}getFrozenLeftColumnHeaderByIndex(e){return this.getFrozenVirtualHeader().getElementsByClassName("e-headercell")[e]}getRowObjectFromUID(e,t,i){const s=this.contentModule.getRows();let n=this.rowObject(s,e);return this.isFrozenGrid()&&(!n||t||i)?(n=this.rowObject(this.contentModule.getMovableRows(),e),(!n&&"Left-Right"===this.getFrozenMode()||i)&&(n=this.rowObject(this.contentModule.getFrozenRightRows(),e)),n):qe(n)&&this.enableVirtualization&&this.groupSettings.columns.length>0?(n=this.rowObject(this.vRows,e),n):n}rowObject(e,t){for(const i of e)if(i.uid===t)return i;return null}getRowsObject(){return this.contentModule.getRows()}getMovableRowsObject(){let e=[];return this.isFrozenGrid()&&(e=this.contentModule.getMovableRows()),e}getFrozenRightRowsObject(){let e=[];return"Right"!==this.getFrozenMode()&&"Left-Right"!==this.getFrozenMode()||(e=this.contentModule.getFrozenRightRows()),e}getColumnHeaderByField(e){const t=this.getColumnByField(e);return t?this.getColumnHeaderByUid(t.uid):void 0}getColumnHeaderByUid(e){const t=this.getHeaderContent().querySelector("[e-mappinguid="+e+"]");return t?t.parentElement:void 0}getColumnByIndex(e){let t;return this.getColumns().some((i,s)=>(t=i,s===e)),t}getColumnByField(e){return Eu(this.getColumns(),t=>{if(t.field===e)return t})[0]}getColumnIndexByField(e){const t=this.getColumns();for(let i=0;i<t.length;i++)if(t[i].field===e)return i;return-1}getColumnByUid(e){return Eu([...this.getColumns(),...this.getStackedColumns(this.columns)],t=>{if(t.uid===e)return t})[0]}getStackedColumns(e,t=[]){for(const i of e)i.columns&&(t.push(i),this.getStackedColumns(i.columns,t));return t}getColumnIndexByUid(e){const t=Eu(this.getColumns(),(t,i)=>{if(t.uid===e)return i})[0];return qe(t)?-1:t}getUidByColumnField(e){return Eu(this.getColumns(),t=>{if(t.field===e)return t.uid})[0]}getNormalizedColumnIndex(e){return this.getColumnIndexByUid(e)+this.getIndentCount()}getIndentCount(){let e=0;return this.allowGrouping&&(e+=this.groupSettings.columns.length),this.isDetail()&&e++,this.isRowDragable()&&qe(this.rowDropSettings.targetID)&&e++,e}getColumnFieldNames(){const e=[];let t;for(let i=0,s=this.getColumns().length;i<s;i++)t=this.getColumns()[i],t.visible&&e.push(t.field);return e}getRowTemplate(){return this.rowTemplateFn}getDetailTemplate(){return this.detailTemplateFn}getEditTemplate(){return this.editTemplateFn}getEditHeaderTemplate(){return this.editHeaderTemplateFn}getEditFooterTemplate(){return this.editFooterTemplateFn}getPrimaryKeyFieldNames(){const e=[];for(let t=0;t<this.columnModel.length;t++)this.columnModel[t].isPrimaryKey&&e.push(this.columnModel[t].field);return e}refresh(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())}refreshHeader(){this.headerModule.refreshUI()}getSelectedRows(){return this.selectionModule?this.selectionModule.selectedRecords:[]}getSelectedRowIndexes(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]}getSelectedRowCellIndexes(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]}getSelectedRecords(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]}getSelectedColumnsUid(){const e=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(t=>e.push(this.getColumns()[t].uid)),e}getDataModule(){return this.renderModule.data}showColumns(e,t){this.showHider.show(e,t=t||"headerText")}hideColumns(e,t){this.showHider.hide(e,t=t||"headerText")}getFrozenColumns(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)}getFrozenRightColumnsCount(){return this.frozenRightCount}getFrozenLeftColumnsCount(){return this.frozenLeftCount}getMovableColumnsCount(){return this.movableCount}setFrozenCount(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.splitFrozenCount(this.columns),this.frozenColumns&&(this.frozenLeftCount||this.frozenRightCount)&&this.setProperties({frozenColumns:0},!0),this.setTablesCount(),this.frozenLeftCount&&!this.frozenRightCount?this.frozenName="Left":this.frozenRightCount&&!this.frozenLeftCount?this.frozenName="Right":this.frozenLeftCount&&this.frozenRightCount&&(this.frozenName="Left-Right")}getVisibleFrozenLeftCount(){return this.visibleFrozenLeft}getVisibleFrozenRightCount(){return this.visibleFrozenRight}getVisibleMovableCount(){return this.visibleMovable}getFrozenRightColumns(){return this.frozenRightColumns}getFrozenLeftColumns(){return this.frozenLeftColumns}getMovableColumns(){return this.movableColumns}splitFrozenCount(e){for(let t=0;t<e.length;t++)e[t].columns?this.splitFrozenCount(e[t].columns):"Right"===e[t].freeze?(!1!==e[t].visible&&this.visibleFrozenRight++,this.frozenRightColumns.push(e[t]),this.frozenRightCount++):"Left"===e[t].freeze?(!1!==e[t].visible&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(e[t]),this.frozenLeftCount++):(!1!==e[t].visible&&this.visibleMovable++,this.movableColumns.push(e[t]),this.movableCount++)}getVisibleFrozenColumns(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)}getFilterUIInfo(){return this.filterModule?this.filterModule.getFilterUIInfo():{}}getVisibleFrozenColumnsCount(){let e=0;const t=this.columnModel;for(let i=0;i<this.frozenColumns;i++)t[i].visible&&e++;if(this.frozenLeftCount||this.frozenRightCount)for(let i=0;i<t.length;i++)!t[i].visible||"Left"!==t[i].freeze&&"Right"!==t[i].freeze||e++;return e}getVisibleFrozenCount(e,t){if(!this.frozenLeftCount&&!this.frozenRightCount)for(let i=0,s=e.length;i<s;i++)e[i].columns?t=this.getVisibleFrozenCount(e[i].columns,t):e[i].isFrozen&&e[i].visible&&t++;return t}getFrozenCount(e,t,i){for(let s=0,n=e.length;s<n;s++)e[s].columns?t=this.getFrozenCount(e[s].columns,t,i):(e[s].isFrozen&&i>this.frozenColumns-1&&t++,i++);return t}goToPage(e){this.pagerModule&&this.pagerModule.goToPage(e)}updateExternalMessage(e){this.pagerModule&&this.pagerModule.updateExternalMessage(e)}sortColumn(e,t,i){this.sortModule&&this.sortModule.sortColumn(e,t,i)}clearSorting(){this.sortModule&&this.sortModule.clearSorting()}removeSortColumn(e){this.sortModule&&this.sortModule.removeSortColumn(e)}clearGridActions(){this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()}filterByColumn(e,t,i,s,n,o,r,l){this.filterModule&&this.filterModule.filterByColumn(e,t,i,s,n,o,r,l)}clearFiltering(e){this.filterModule&&this.filterModule.clearFiltering(e)}removeFilteredColsByField(e,t){this.filterModule&&this.filterModule.removeFilteredColsByField(e,t)}selectRow(e,t){this.selectionModule&&this.selectionModule.selectRow(e,t)}selectRows(e){this.selectionModule&&this.selectionModule.selectRows(e)}clearSelection(){this.selectionModule&&this.selectionModule.clearSelection()}selectCell(e,t){this.selectionModule&&this.selectionModule.selectCell(e,t)}selectCellsByRange(e,t){this.selectionModule.selectCellsByRange(e,t)}search(e){this.searchModule&&this.searchModule.search(e)}print(){this.printModule&&this.printModule.print()}deleteRecord(e,t){this.editModule&&this.editModule.deleteRecord(e,t)}startEdit(){this.editModule&&this.editModule.startEdit()}endEdit(){this.editModule&&this.editModule.endEdit()}closeEdit(){this.editModule&&this.editModule.closeEdit()}addRecord(e,t){this.editModule&&this.editModule.addRecord(e,t)}deleteRow(e){this.editModule&&this.editModule.deleteRow(e)}editCell(e,t){this.editModule&&this.editModule.editCell(e,t)}saveCell(){this.editModule&&this.editModule.saveCell()}updateCell(e,t,i){this.editModule&&this.editModule.updateCell(e,t,i)}updateRow(e,t){this.editModule&&this.editModule.updateRow(e,t)}getBatchChanges(){return this.editModule?this.editModule.getBatchChanges():{}}enableToolbarItems(e,t){this.toolbarModule&&this.toolbarModule.enableItems(e,t)}copy(e){this.clipboardModule&&this.clipboardModule.copy(e)}recalcIndentWidth(){if(!this.getHeaderTable().querySelector(".e-emptycell"))return;if(!this.groupSettings.columns.length&&!this.isDetail()&&!this.isRowDragable()||this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")||!this.getContentTable())return;let e=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth;const t=[].slice.call(this.getHeaderTable().querySelector(np).childNodes),i=[].slice.call(this.getContentTable().querySelector(np).childNodes),s=e/30;let n="Right"===this.getFrozenMode()?this.frozenRightCount:0;const o=this.element.offsetWidth,r=(e,s)=>{if(lm(this)){const n=(s/o*100).toFixed(1)+"%";t[e].style.width=n,i[e].style.width=n}else t[e].style.width=s+"px",i[e].style.width=s+"px";this.notify(Ac,{index:e,width:s})};for(s>=1&&(e=30/s),e<1&&(e=1),(this.enableColumnVirtualization||this.isAutoGen)&&(e=30);n<this.groupSettings.columns.length;)r(n,e),n++;this.isDetail()&&(r(n,e),n++),this.isRowDragable()&&r(n,e),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}resetIndentWidth(){if(lm(this)&&(this.getHeaderTable().querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth()),("auto"===this.width||"string"==typeof this.width&&-1!==this.width.indexOf("%"))&&this.getColumns().filter(e=>(!e.width||"auto"===e.width)&&e.minWidth).length>0){const e=this.widthService.getTableWidth(this.getColumns());this.widthService.setMinwidthBycalculation(e)}this.isFrozenGrid()&&this.widthService&&this.widthService.refreshFrozenScrollbar(),this.allowTextWrap&&"Content"!==this.textWrapSettings.wrapMode&&this.notify(Cd,{})}isRowDragable(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID}reorderColumns(e,t){this.reorderModule&&this.reorderModule.reorderColumns(e,t)}reorderColumnByIndex(e,t){this.reorderModule&&this.reorderModule.reorderColumnByIndex(e,t)}reorderColumnByTargetIndex(e,t){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(e,t)}reorderRows(e,t){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(e,t)}refreshDataSource(e){this.notify("refreshdataSource",e)}disableRowDD(e){const t=this.getHeaderTable(),i=this.getContentTable(),s=t.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),n=this.getRows(),o=e?"none":"";ei(t.querySelector(np).childNodes[0],{display:o}),ei(i.querySelector(np).childNodes[0],{display:o});for(let r=0;r<this.getRows().length;r++){const t=n[r].firstElementChild;e?Vt([t],"e-hide"):qt([t],["e-hide"])}for(let r=0;r<t.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;r++){const t=s[r];e?Vt([t],"e-hide"):qt([t],["e-hide"])}}autoFitColumns(e){this.resizeModule&&this.resizeModule.autoFitColumns(e)}createColumnchooser(e,t,i){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(e,t,i)}initializeServices(){this.serviceLocator.register("widthService",this.widthService=new Bp(this)),this.serviceLocator.register("cellRendererFactory",new Op),this.serviceLocator.register("rendererFactory",new zp),this.serviceLocator.register("localization",this.localeObj=new Qi(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new Hh(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new Zp(this)),this.serviceLocator.register("ariaService",this.ariaService=new yp),this.serviceLocator.register("focus",this.focusModule=new Hp(this))}processModel(){const e=this.groupSettings.columns,t=this.sortSettings.columns;let i,s;if(this.allowGrouping)for(let n=0,o=e.length;n<o;n++){s=0;for(let o=t.length;s<o;s++)if(t[s].field===e[n]){i=!0;break}if(i?this.allowSorting?this.sortedColumns.push(t[s].field):t[s].direction="Ascending":t.push({field:e[n],direction:"Ascending",isFromGroup:!0}),!this.groupSettings.showGroupedColumn){const t=this.enableColumnVirtualization?this.columns.filter(t=>t.field===e[n])[0]:this.getColumnByField(e[n]);t?t.visible=!1:this.log("initial_action",{moduleName:"group",columnName:e[n]})}}if(!e.length)for(let n=0;n<t.length;n++)this.sortedColumns.push(t[n].field);if(this.rowTemplateFn=Ru(this.rowTemplate),this.detailTemplateFn=Ru(this.detailTemplate),this.editTemplateFn=Ru(this.editSettings.template),this.editHeaderTemplateFn=Ru(this.editSettings.headerTemplate),this.editFooterTemplateFn=Ru(this.editSettings.footerTemplate),!qe(this.parentDetails)){const e=qe(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",e,!0)}this.initForeignColumn()}initForeignColumn(){this.isForeignKeyEnabled(this.getColumns())&&this.notify("initForeignKeyColumn",this.getForeignKeyColumns())}enableVerticalRendering(){"Vertical"===this.rowRenderingMode?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")}gridRender(){this.updateRTL(),"Vertical"===this.rowRenderingMode&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),zt.isDevice&&this.element.classList.add("e-device"),this.rowHeight&&this.element.classList.add("e-grid-min-height"),ti(this.element,["e-responsive","e-default"],[]);const e=this.serviceLocator.getService("rendererFactory");this.headerModule=e.getRenderer(Fd.Header),this.contentModule=e.getRenderer(Fd.Content),this.printModule=new Cu(this,this.scrollModule),this.clipboardModule=new nu(this),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()}dataReady(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),"auto"!==this.height&&this.scrollModule.setPadding()}updateRTL(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}createGridPopUpElement(){const e=this.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),t=this.createElement("div",{className:Ud,attrs:{tabIndex:"-1"}});_t([t,this.createElement("div",{className:"e-uptail e-tail"})],e),t.appendChild(this.createElement("span")),_t([t,this.createElement("div",{className:"e-downtail e-tail"})],e),this.element.appendChild(e)}updateGridLines(){switch(ti(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines")}this.updateResizeLines()}updateResizeLines(){this.allowResizing&&"Vertical"!==this.gridLines&&"Both"!==this.gridLines?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")}applyTextWrap(){if(this.allowTextWrap){const e=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":Wu(this.element,!1),Wu(this.getContent(),!1),Wu(e,!0);break;case"Content":Wu(this.getContent(),!0),Wu(this.element,!1),Wu(e,!1);break;default:Wu(this.element,!0),Wu(this.getContent(),!1),Wu(e,!1)}"Content"!==this.textWrapSettings.wrapMode&&this.notify(Cd,{})}}removeTextWrap(){Wu(this.element,!1),Wu([].slice.call(this.element.getElementsByClassName("e-columnheader")),!1),Wu(this.getContent(),!1),"Content"!==this.textWrapSettings.wrapMode&&this.notify(Cd,{})}createTooltip(){this.toolTipObj=new pr({opensOn:"custom",content:""},this.element)}freezeRefresh(){this.isFreezeRefresh=!0,this.enableVirtualization&&(this.pageSettings.currentPage=1),this.componentRefresh()}getTooltipStatus(e){const t=this.getHeaderTable(),i="e-gridheader",s=this.createTable(t,i,"header"),n=this.createTable(t,i,"content"),o=e.classList.contains("e-headercell")?s:n,r=e.classList.contains("e-headercell")?"th":"tr";o.querySelector(r).className=e.className,o.querySelector(r).innerHTML=e.innerHTML;const l=o.querySelector(r).getBoundingClientRect().width;return document.body.removeChild(s),document.body.removeChild(n),l>e.getBoundingClientRect().width}mouseMoveHandler(e){if(this.isEllipsisTooltip()){const t=ku(e.target,"e-ellipsistooltip");this.prevElement===t&&"mouseout"!==e.type||this.toolTipObj.close();const i=e.target.tagName,s=["A","BUTTON","INPUT"];if(t&&"mouseout"!==e.type&&(!zt.isDevice||-1===s.indexOf(i))){if(t.getAttribute("aria-describedby"))return;this.getTooltipStatus(t)&&(this.toolTipObj.content=t.getElementsByClassName("e-headertext").length?t.getElementsByClassName("e-headertext")[0].innerText:t.innerText,this.prevElement=t,this.toolTipObj.open(t))}}this.hoverFrozenRows(e)}hoverFrozenRows(e){if(this.isFrozenGrid()){const t=ku(e.target,Yd);if([].slice.call(this.element.getElementsByClassName("e-frozenhover")).length&&"mouseout"===e.type){const e=[].slice.call(this.element.getElementsByClassName("e-frozenhover"));for(let t=0;t<e.length;t++)e[t].classList.remove("e-frozenhover")}else if(t){const e=[].slice.call(this.element.querySelectorAll('tr[aria-rowindex="'+t.getAttribute(ip)+'"]'));e.splice(e.indexOf(t),1);for(let i=0;i<e.length;i++)"true"!==t.getAttribute("aria-selected")&&e[i]?e[i].classList.add("e-frozenhover"):e[i]&&e[i].classList.remove("e-frozenhover")}}}isEllipsisTooltip(){const e=this.getColumns();if("EllipsisWithTooltip"===this.clipMode)return!0;for(let t=0;t<e.length;t++)if("EllipsisWithTooltip"===e[t].clipMode)return!0;return!1}scrollHandler(){this.isEllipsisTooltip()&&this.toolTipObj.close()}createTable(e,t,i){const s=this.createElement("div");s.className=this.element.className,s.style.cssText="display: inline-block;visibility:hidden;position:absolute";const n=this.createElement("div");n.className=t;const o=this.createElement("table");o.className=e.className,o.style.cssText="table-layout: auto;width: auto";const r="header"===i?"th":"td",l=this.createElement("tr"),a=this.createElement(r);return l.appendChild(a),o.appendChild(l),n.appendChild(o),s.appendChild(n),document.body.appendChild(s),s}onKeyPressed(e){"tab"!==e.action&&"shiftTab"!==e.action||this.toolTipObj.close()}wireEvents(){Bt.add(this.element,"click",this.mouseClickHandler,this),Bt.add(this.element,"touchend",this.mouseClickHandler,this),Bt.add(this.element,"focusout",this.focusOutHandler,this),Bt.add(this.element,"dblclick",this.dblClickHandler,this),Bt.add(this.element,"keydown",this.keyPressHandler,this),Bt.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=-1===this.element.tabIndex?0:this.element.tabIndex),this.keyboardModule=new Xi(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),Bt.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),Bt.add(this.element,"mousemove",this.mouseMoveHandler,this),Bt.add(this.element,"mouseout",this.mouseMoveHandler,this),Bt.add(this.getContent(),"touchstart",this.tapEvent,this),Bt.add(document.body,"keydown",this.keyDownHandler,this)}unwireEvents(){Bt.remove(this.element,"click",this.mouseClickHandler),Bt.remove(this.element,"touchend",this.mouseClickHandler),Bt.remove(this.element,"focusout",this.focusOutHandler),Bt.remove(this.element,"dblclick",this.dblClickHandler),Bt.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),Bt.remove(this.element,"mousemove",this.mouseMoveHandler),Bt.remove(this.element,"mouseout",this.mouseMoveHandler),Bt.remove(this.element,"keydown",this.keyPressHandler),Bt.remove(this.getContent(),"touchstart",this.tapEvent),Bt.remove(document.body,"keydown",this.keyDownHandler),Bt.remove(window,"resize",this.resetIndentWidth)}addListener(){this.isDestroyed||(this.on(mc,this.dataReady,this),this.on(gc,this.recalcIndentWidth,this),this.on(wc,this.recalcIndentWidth,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(Kh,this.dataBoundFunction),this.on(Tc,this.onKeyPressed,this))}removeListener(){this.isDestroyed||(this.off(mc,this.dataReady),this.off(gc,this.recalcIndentWidth),this.off(wc,this.recalcIndentWidth),this.removeEventListener(Kh,this.dataBoundFunction),this.off(Tc,this.onKeyPressed))}getCurrentViewRecords(){return Zu(this)?qe(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData}mouseClickHandler(e){if(this.isChildGrid(e)||ku(e.target,"e-gridpopup")&&e.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(e))return;if((!this.allowRowDragAndDrop&&(ku(e.target,Nd)||"TD"===e.target.tagName)||!this.allowGrouping&&!this.allowReordering&&ku(e.target,"e-gridheader"))&&e.touches)return;ku(e.target,"e-gridheader")&&this.allowRowDragAndDrop&&!ku(e.target,"e-filterbarcell")&&e.preventDefault();const t=this.getRowInfo(e.target);t.cancel=!1;let i=!1;const s=Zt(e.target,"tr");if(s&&s.getAttribute("data-uid")){const e=this.getRowObjectFromUID(s.getAttribute("data-uid"));i=!!e&&e.isDataRow}i&&this.trigger("recordClick",t),this.notify(Mc,e)}checkEdit(e){const t=ku(e.target,Yd),i="Batch"!==this.editSettings.mode&&this.isEdit&&t&&(t.classList.contains(Qd)||t.classList.contains($d));return!ku(e.target,"e-unboundcelldiv")&&(i||ku(e.target,Hd)&&ku(e.target,Hd).classList.contains("e-editedbatchcell"))}dblClickHandler(e){const t=ku(e.target,"e-grid");if(qe(t)||t.id!==this.element.id||Zt(e.target,".e-unboundcelldiv"))return;let i=!1;const s=Zt(e.target,"tr");if(s&&s.getAttribute("data-uid")){const e=this.getRowObjectFromUID(s.getAttribute("data-uid"));i=!!e&&e.isDataRow}const n=this.getRowInfo(e.target);n.target=e.target,i&&this.trigger("recordDoubleClick",n),this.notify(Bc,e)}focusOutHandler(e){if(this.isChildGrid(e))return;ku(e.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");const t=this.element.querySelector(".e-cancel:not(.e-hide)");t&&t.classList.add("e-hide");const i=e.relatedTarget,s=i?i.getAttribute("aria-owns"):null;i&&(ku(i,"e-grid")||(!qe(s)&&s)===e.target.getAttribute("aria-owns"))||this.keyPress||!this.isEdit||zt.isDevice||("Batch"!==this.editSettings.mode||(ku(i,"e-ddl")||ku(i,"e-ddt"))&&ku(i,"e-input-group")||(this.editModule.saveCell(),this.notify(ld,{})),"Normal"===this.editSettings.mode&&this.editModule.editFormValidate()),this.keyPress=!1}isChildGrid(e){const t=ku(e.target,"e-grid");return!(!t||t.id===this.element.id)}mergePersistGridData(e){const t=this.getLocalData();if(!qe(t)&&""!==t||!qe(e)){const i=qe(e)?JSON.parse(t):e;this.enableVirtualization&&(i.pageSettings.currentPage=1);const s=Object.keys(i);this.isProtectedOnChange=!0;for(const e of s)"object"!=typeof this[e]||qe(this[e])?this[e]=i[e]:Array.isArray(this[e])&&"columns"===e?(Tu(this[e]),this.mergeColumns(i[e],this[e]),this[e]=i[e]):Ve(this[e],i[e]);this.isProtectedOnChange=!1}}mergeColumns(e,t){const i=e;for(let s=0;s<i.length;s++){const e=t.filter(e=>e.index===i[s].index)[0];qe(e)||(e.columns&&e.columns.length?(this.mergeColumns(i[s].columns,e.columns),i[s]=Ve(e,i[s],{},!0)):i[s]=Ve(e,i[s],{},!0))}}isDetail(){return!qe(this.detailTemplate)||!qe(this.childGrid)}isCommandColumn(e){return e.some(e=>e.columns?this.isCommandColumn(e.columns):!(!e.commands&&!e.commandsTemplate))}isForeignKeyEnabled(e){return e.some(e=>e.columns?this.isForeignKeyEnabled(e.columns):!(!e.dataSource||!e.foreignKeyValue))}keyPressHandler(e){const t=Ve(e,{cancel:!1});this.trigger("keyPressed",t),!0===t.cancel&&e.stopImmediatePropagation()}keyDownHandler(e){e.altKey&&(74===e.keyCode&&(this.keyA?(this.notify(vd,{target:e.target,collapse:!1}),this.keyA=!1):(this.focusModule.focusHeader(),this.focusModule.addOutline())),87===e.keyCode&&(this.focusModule.focusContent(),this.focusModule.addOutline()),65===e.keyCode&&(this.keyA=!0),72===e.keyCode&&this.keyA&&(this.notify(vd,{target:e.target,collapse:!0}),this.keyA=!1)),13===e.keyCode&&this.notify(Dd,e)}keyActionHandler(e){this.isChildGrid(e)||this.isEdit&&"escape"!==e.action&&"enter"!==e.action&&"shiftEnter"!==e.action&&"tab"!==e.action&&"shiftTab"!==e.action||(this.keyPress=!0,this.allowKeyboard&&("ctrlPlusP"===e.action&&(e.preventDefault(),this.print()),this.notify(Tc,e)))}setInjectedModules(e){this.injectedModules=e}updateColumnObject(){Mu(this.columns,this.enableColumnVirtualization,this),Tu(this.columns),this.initForeignColumn(),this.notify(Vc,{})}getForeignKeyColumns(){return this.getColumns().filter(e=>e.isForeignColumn())}getRowHeight(){return this.rowHeight?this.rowHeight:function(e){if(void 0!==Bu)return Bu;const t=Nt("table",{className:Kd,styles:"visibility: hidden"});t.innerHTML='<tr><td class="e-rowcell">A<td></tr>',e.appendChild(t);const i=t.querySelector("td").getBoundingClientRect();return e.removeChild(t),Bu=Math.ceil(i.height),Bu}(this.element)}refreshColumns(){this.setFrozenCount();const e=this.getContent().querySelector(".e-frozen-left-content"),t=this.getContent().querySelector(".e-frozen-right-content"),i=!this.frozenRightCount&&!this.frozenLeftCount;if(0===this.getFrozenColumns()&&(!e&&this.frozenLeftCount||!t&&this.frozenRightCount||e&&!this.frozenLeftCount||t&&!this.frozenRightCount))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(i&&(1===this.getFrozenColumns()&&!e||0===this.getFrozenColumns()&&e))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(this.isPreventScrollEvent=!0,this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()){const e=this.contentModule.getMovableContent().querySelector(".e-table");Yt(e.querySelector(np));const t=this.getHeaderContent().querySelector("."+Wd).querySelector(np).cloneNode(!0);if(e.insertBefore(t,e.querySelector(sp)),"Left-Right"===this.getFrozenMode()){const e=this.contentModule.getFrozenRightContent().querySelector(".e-table");Yt(e.querySelector(np));const t=this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(np).cloneNode(!0);e.insertBefore(t,e.querySelector(sp))}}if(this.isFrozenGrid()){const e=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.headerModule.getMovableHeader().scrollLeft=e,this.contentModule.getMovableContent().scrollLeft=e}}excelExport(e,t,i,s){return this.excelExportModule?this.excelExportModule.Map(this,e,t,i,!1,s):null}csvExport(e,t,i,s){return this.excelExportModule?this.excelExportModule.Map(this,e,t,i,!0,s):null}pdfExport(e,t,i,s){return this.pdfExportModule?this.pdfExportModule.Map(this,e,t,i,s):null}groupColumn(e){this.groupModule&&this.groupModule.groupColumn(e)}groupExpandAll(){this.groupModule&&this.groupModule.expandAll()}groupCollapseAll(){this.groupModule&&this.groupModule.collapseAll()}clearGrouping(){this.groupModule&&this.groupModule.clearGrouping()}ungroupColumn(e){this.groupModule&&this.groupModule.ungroupColumn(e)}openColumnChooser(e,t){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(e,t)}scrollRefresh(){const e=()=>{this.scrollModule.refresh(),this.off(gc,e)};this.on(gc,e,this)}detailCollapseAll(){this.detailRowModule&&this.detailRowModule.collapseAll()}detailExpandAll(){this.detailRowModule&&this.detailRowModule.expandAll()}clearCellSelection(){this.selectionModule&&this.selectionModule.clearCellSelection()}clearRowSelection(){this.selectionModule&&this.selectionModule.clearRowSelection()}selectCells(e){this.selectionModule&&this.selectionModule.selectCells(e)}selectRowsByRange(e,t){this.selectionModule&&this.selectionModule.selectRowsByRange(e,t)}isContextMenuOpen(){return this.contextMenuModule&&this.contextMenuModule.isOpen}ensureModuleInjected(e){return this.getInjectedModules().indexOf(e)>=0}destroyTemplate(e,t){this.clearTemplate(e,t)}log(e,t){this.loggerModule&&this.loggerModule.log(e,t)}applyBiggerTheme(e){this.element.classList.contains("e-bigger")&&e.classList.add("e-bigger")}getPreviousRowData(){return this.getRowsObject()[this.getRows().length-1].data}hideScroll(){const e=this.getContent().querySelector(".e-content"),t=this.getContent().querySelector(".e-scrollbar");if(e.scrollHeight<=e.clientHeight&&(this.scrollModule.removePadding(),e.style.overflowY="auto"),this.isFrozenGrid()&&t){const e=this.getContent().querySelector(".e-movablescrollbar"),i=this.getContent().querySelector(".e-movablechild");t.style.display="flex",e.offsetWidth>=i.offsetWidth&&(t.style.display="none",this.notify(sd,0))}}getRowIndexByPrimaryKey(e){const t=this.getPrimaryKeyFieldNames()[0];e="object"==typeof e?e[t]:e;const i=this.getRowsObject();for(let s=0;s<i.length;s++){if(i[s].isDetailRow||i[s].isCaptionRow)continue;let n=i[s].data[t];if(t.split(".").length>1&&(n=vm(t,i[s].data)),n===e)return i[s].index}return-1}grabColumnByFieldFromAllCols(e){let t;this.columnModel=[],this.updateColumnModel(this.columns);const i=this.columnModel;for(let s=0;s<i.length;s++)e===i[s].field&&(t=i[s]);return t}grabColumnByUidFromAllCols(e){let t;this.columnModel=[],this.updateColumnModel(this.columns);const i=this.columnModel;for(let s=0;s<i.length;s++)e===i[s].uid&&(t=i[s]);return t}getFilteredRecords(){if(this.allowFiltering&&this.filterSettings.columns.length){const e=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof Gs.a?this.renderModule.data.getData(this.dataSource,e):this.dataSource instanceof Gs.a?this.dataSource.executeLocal(e):new Gs.a(this.dataSource,e).executeLocal(e)}return[]}getUserAgent(){const e=zt.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)}tapEvent(e){this.getUserAgent()&&(om.timer?(clearTimeout(om.timer),om.timer=null,this.dblClickHandler(e),this.notify(Yc,e)):om.timer=setTimeout(()=>{om.timer=null},300))}getRowUid(e){return`${e}${this.rowUid++}`}getMovableVirtualContent(){return this.getContent().querySelector("."+jd)}getFrozenVirtualContent(){return this.getContent().querySelector("."+Gd)}getMovableVirtualHeader(){return this.getHeaderContent().querySelector("."+Wd)}getFrozenVirtualHeader(){return this.getHeaderContent().querySelector("."+_d)}getRowElementByUID(e){let t,i=[];if(this.isFrozenGrid()){const e=[].slice.call(this.getFrozenVirtualContent().querySelector(sp).children),t=[].slice.call(this.getMovableVirtualContent().querySelector(sp).children);let s=[];if(3===this.tablesCount&&(s=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(sp).children)),this.frozenRows){if(i=[].slice.call(this.getFrozenVirtualHeader().querySelector(sp).children),i=i.concat([].slice.call(this.getMovableVirtualHeader().querySelector(sp).children)),3===this.tablesCount){const e=this.getHeaderContent().querySelector(".e-frozen-right-header");i=i.concat([].slice.call(e.querySelector(sp).children)).concat(s)}i=i.concat(e).concat(t)}else i=e.concat(t).concat(s)}else{const e=[].slice.call(this.getContent().querySelector(sp).children);this.frozenRows?(i=[].slice.call(this.getHeaderContent().querySelector(sp).children),i=i.concat(e)):i=e}for(const s of i)if(s.getAttribute("data-uid")===e){t=s;break}return t}getHiddenColumns(){const e=[];for(const t of this.columnModel)!1===t.visible&&e.push(t);return e}calculatePageSizeByParentHeight(e){if(this.allowPaging&&(this.allowTextWrap&&"Header"===this.textWrapSettings.wrapMode||!this.allowTextWrap)){let t=0;if(-1!==e.indexOf("%")&&(e=parseInt(e,10)/100*this.element.clientHeight),e>this.getNoncontentHeight()+this.getRowHeight()){let i=0;i=e-this.getNoncontentHeight(),t=i/this.getRowHeight()}if(t>0)return Math.floor(t)}return 0}getNoncontentHeight(){let e=0;if(qe(this.getHeaderContent().clientHeight)||(e+=this.getHeaderContent().clientHeight),this.toolbar&&!qe(this.element.querySelector(".e-toolbar").clientHeight)&&(e+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!qe(this.element.querySelector(".e-gridpager").clientHeight)&&(e+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!qe(this.element.querySelector(".e-columnheader").clientHeight)&&(e+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!qe(this.element.querySelector(".e-groupdroparea").clientHeight)&&(e+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!qe(this.element.querySelector(".e-summaryrow").clientHeight))for(let t=0;t<this.element.getElementsByClassName("e-summaryrow").length;t++)e+=this.element.getElementsByClassName("e-summaryrow")[t].clientHeight;return e}getSummaryValues(e,t){return Gs.b.aggregates[e.type.toLowerCase()](t,e.field)}serverExcelExport(e){this.isExcel=!0,this.exportGrid(e)}serverPdfExport(e){this.isExcel=!1,this.exportGrid(e)}serverCsvExport(e){this.isExcel=!0,this.exportGrid(e)}exportGrid(e){const t=this.getDataModule().generateQuery(!0),i=(new Gs.f).processQuery(new Gs.a({url:""}),t),s=JSON.parse(i.data),n=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"]));n.filterSettings.columns=s.where,n.searchSettings.fields=s.search&&s.search[0].fields||[],n.sortSettings.columns=s.sorted,n.columns=this.setHeaderText(n.columns,["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"]);const o=this.createElement("form",{id:"ExportForm",styles:"display:none;"}),r=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});r.value=JSON.stringify(n),o.method="POST",o.action=e,o.appendChild(r),document.body.appendChild(o),o.submit(),o.remove()}setHeaderText(e,t){for(let i=0;i<e.length;i++){const s=this.getColumnByUid(e[i].uid);e[i].headerText=s.headerText,qe(s.template)||(e[i].template="true"),e[i].format&&(e[i].format=bm(this.getFormat(e[i].format),e[i].type,this.isExcel)),e[i].columns&&this.setHeaderText(e[i].columns,t);const n=Object.keys(e[i]);for(let o=0;o<n.length;o++)t.indexOf(n[o])<0&&delete e[i][n[o]]}return e}getFormat(e){return"object"==typeof e?qe(e.format)?e.skeleton:e.format:e}isCollapseStateEnabled(){return!1===this.isExpanded}updateRowValue(e,t){const i={requestType:"save",data:t};this.showSpinner(),this.notify(jc,i),this.refresh()}setForeignKeyData(){this.dataBind();const e=this.getDataModule().getForeignKeyDataState();e.isPending?(this.getDataModule().setForeignKeyDataState({}),e.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())}resetFilterDlgPosition(e){const t=this.getColumnHeaderByField(e);if(t){const e=t.querySelector(".e-filtermenudiv"),i=this.element.querySelector(".e-filter-popup");if(e&&i){const t=this.element.getBoundingClientRect(),s=e.getBoundingClientRect();i&&(i.style.left=(s.right-t.left).toString()+"px")}}}renderTemplates(){this.notify("reactTemplateRender",this.portals),this.renderReactTemplates()}batchUpdate(e){this.processRowChanges(e)}batchAsyncUpdate(e){this.processBulkRowChanges(e)}processBulkRowChanges(e){if(this.dataToBeUpdated){const t=["addedRecords","changedRecords","deletedRecords"],i=this.getPrimaryKeyFieldNames()[0];for(let s=0;s<t.length;s++)e[t[s]]&&am(this,e,t[s],i)}else this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},e),setTimeout(()=>{this.processRowChanges(this.dataToBeUpdated),this.dataToBeUpdated=null},this.asyncTimeOut)}processRowChanges(e){const t=this.getPrimaryKeyFieldNames()[0];e=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},e);const i=this.getDataModule().saveChanges(e,t,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?i.then(()=>{this.setNewData()}):this.setNewData()}setNewData(){const e=JSON.parse(JSON.stringify(this.getCurrentViewRecords()));this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount()).then(t=>{this.bulkRefresh(t.result,e,t.count)})}deleteRowElement(e){const t=this.getRowElementByUID(e.uid),i=parseInt(t.getAttribute(ip),10);Yt(t),this.getFrozenColumns()&&Yt(this.getMovableRows()[i])}bulkRefresh(e,t,i){const s=this.getRowsObject(),n=this.getPrimaryKeyFieldNames()[0];for(let r=0;r<s.length;r++)e.filter(e=>e[n]===s[r].data[n]).length||(this.deleteRowElement(s[r]),s.splice(r,1),r--);for(let r=0;r<e.length;r++){let i;t.filter(t=>{t[n]===e[r][n]&&(t!==e[r]&&this.setRowData(e[r][n],e[r]),i=!0)}),i||this.renderRowElement(e[r],r)}this.currentViewData=e;const o=[].slice.call(this.getContentTable().getElementsByClassName(Yd));(function(e,t,i,s){let n=0;for(let o=0;o<t.length;o++)if(t[o].isDataRow){t[o].index=n,t[o].isAltRow=!!e.enableAltRow&&n%2!=0,i[o].setAttribute(ip,n.toString()),t[o].isAltRow?i[o].classList.add("e-altrow"):i[o].classList.remove("e-altrow");for(let e=0;e<i[o].cells.length;e++)i[o].cells[e].setAttribute("index",n.toString());n++}t.length||e.renderModule.emptyRow(!0)})(this,this.getRowsObject(),o),function(e){if(e.isFrozenGrid()){e.contentModule.rowElements=[].slice.call(e.element.querySelectorAll(".e-movableheader .e-row, .e-movablecontent .e-row"));const t=e.getFrozenMode()===Jd?".e-frozen-left-header .e-row, .e-frozen-left-content .e-row":".e-frozenheader .e-row, .e-frozencontent .e-row";e.contentModule.freezeRowElements=[].slice.call(e.element.querySelectorAll(t)),e.getFrozenMode()===Jd&&(e.contentModule.frozenRightRowElements=[].slice.call(e.element.querySelectorAll(".e-frozen-right-header .e-row, .e-frozen-right-content .e-row")))}else e.contentModule.rowElements=[].slice.call(e.element.querySelectorAll(".e-row:not(.e-addedrow)"))}(this),this.allowPaging&&this.notify(yc,{module:"pager",properties:{totalRecordsCount:i}})}renderRowElement(e,t){const i=new hp(this.serviceLocator,null,this),s=new cp(this).generateRows([e]),n=i.render(s[0],this.getColumns());let o,r;this.addRowObject(s[0],t);let l=this.getContentTable().querySelector(sp);if(l.querySelector(".e-emptyrow")){const e=l.querySelector(".e-emptyrow");if(e.parentNode.removeChild(e),this.getFrozenColumns()){const e=this.getContent().querySelector("."+jd).querySelector(sp);e.firstElementChild.parentNode.removeChild(e.firstElementChild)}}this.getFrozenColumns()&&(o=function(e,t,i){t=t&&i&&i.isRowDragable()?t+1:t;const s=e.cloneNode(!0);for(let n=0;n<t;n++)s.removeChild(s.children[0]);for(let n=t,o=e.childElementCount;n<o;n++)e.removeChild(e.children[e.childElementCount-1]);return s}(n,this.getFrozenColumns(),this),r=this.frozenRows&&t<this.frozenRows?this.getHeaderContent().querySelector("."+Wd).querySelector(sp):this.getContent().querySelector("."+jd).querySelector(sp),r.appendChild(o),"auto"===this.height&&this.notify(sd,{})),l=this.frozenRows&&t<this.frozenRows?this.getHeaderContent().querySelector(sp):this.getContent().querySelector(sp),l=this.getContent().querySelector(sp),l.appendChild(n)}addRowObject(e,t){const i=this.getFrozenColumns();if(i){const s=this.getMovableRowsObject(),n=e.clone();n.cells=n.cells.slice(i),e.cells=e.cells.slice(0,i),s.splice(t,1,n)}this.getRowsObject().splice(t,1,e)}updateVisibleExpandCollapseRows(){const e=this.getRowsObject();for(let t=0,i=e.length;t<i;t++)e[t].visible=!e[t].isDataRow||"none"!==this.getRowElementByUID(e[t].uid).style.display}getHeight(e){return Number.isInteger(e)||-1===e.indexOf("%")?Number.isInteger(e)||"auto"===this.height?this.height:parseInt(e,10):parseInt(e,10)/100*this.element.clientHeight}getFrozenRightContent(){return this.getContent().querySelector(".e-frozen-right-content")}getFrozenRightHeader(){return this.getHeaderContent().querySelector(".e-frozen-right-header")}getMovableHeaderTbody(){return this.getMovableVirtualHeader().querySelector(sp)}getMovableContentTbody(){return this.getMovableVirtualContent().querySelector(sp)}getFrozenHeaderTbody(){return this.getFrozenVirtualHeader().querySelector(sp)}getFrozenLeftContentTbody(){return this.getFrozenVirtualContent().querySelector(sp)}getFrozenRightHeaderTbody(){return this.getFrozenRightHeader().querySelector(sp)}getFrozenRightContentTbody(){let e;return this.getFrozenRightContent()&&(e=this.getFrozenRightContent().querySelector(sp)),e}showResponsiveCustomFilter(e){this.filterModule&&this.filterModule.showCustomFilter(e||"Vertical"===this.rowRenderingMode)}showResponsiveCustomSort(e){this.sortModule&&this.sortModule.showCustomSort(e||"Vertical"===this.rowRenderingMode)}showAdaptiveFilterDialog(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)}showAdaptiveSortDialog(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)}getCurrentVisibleColumns(e){const t=[],i=e?this.getColumns():this.columnModel;for(const s of i)s.visible&&t.push(s);return t}enableInfiniteAggrgate(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)}};return ru([gi()],e.prototype,"parentDetails",void 0),ru([gi([])],e.prototype,"columns",void 0),ru([gi(!0)],e.prototype,"enableAltRow",void 0),ru([gi(!0)],e.prototype,"enableHover",void 0),ru([gi(!1)],e.prototype,"enableAutoFill",void 0),ru([gi(!0)],e.prototype,"allowKeyboard",void 0),ru([gi(!1)],e.prototype,"enableStickyHeader",void 0),ru([gi(!1)],e.prototype,"allowTextWrap",void 0),ru([fi({},gu)],e.prototype,"textWrapSettings",void 0),ru([fi({},fu)],e.prototype,"resizeSettings",void 0),ru([gi(!1)],e.prototype,"allowPaging",void 0),ru([fi({},Yp)],e.prototype,"pageSettings",void 0),ru([gi(!1)],e.prototype,"enableVirtualization",void 0),ru([gi(!1)],e.prototype,"enableColumnVirtualization",void 0),ru([gi(!1)],e.prototype,"enableInfiniteScrolling",void 0),ru([fi({},uu)],e.prototype,"searchSettings",void 0),ru([gi(!1)],e.prototype,"allowSorting",void 0),ru([gi("Ellipsis")],e.prototype,"clipMode",void 0),ru([gi(!0)],e.prototype,"allowMultiSorting",void 0),ru([gi(!1)],e.prototype,"allowExcelExport",void 0),ru([gi(!1)],e.prototype,"allowPdfExport",void 0),ru([fi({},au)],e.prototype,"sortSettings",void 0),ru([fi({},cu)],e.prototype,"infiniteScrollSettings",void 0),ru([gi(!0)],e.prototype,"allowSelection",void 0),ru([gi(-1)],e.prototype,"selectedRowIndex",void 0),ru([fi({},pu)],e.prototype,"selectionSettings",void 0),ru([gi(!1)],e.prototype,"allowFiltering",void 0),ru([gi("Horizontal")],e.prototype,"rowRenderingMode",void 0),ru([gi(!1)],e.prototype,"enableAdaptiveUI",void 0),ru([gi(!1)],e.prototype,"allowReordering",void 0),ru([gi(!1)],e.prototype,"allowResizing",void 0),ru([gi(!1)],e.prototype,"allowRowDragAndDrop",void 0),ru([fi({},mu)],e.prototype,"rowDropSettings",void 0),ru([fi({},du)],e.prototype,"filterSettings",void 0),ru([gi(!1)],e.prototype,"allowGrouping",void 0),ru([gi(!1)],e.prototype,"enableImmutableMode",void 0),ru([gi(!1)],e.prototype,"showColumnMenu",void 0),ru([fi({},bu)],e.prototype,"groupSettings",void 0),ru([fi({},yu)],e.prototype,"editSettings",void 0),ru([bi([],su)],e.prototype,"aggregates",void 0),ru([gi(!1)],e.prototype,"showColumnChooser",void 0),ru([fi({},Qp)],e.prototype,"columnChooserSettings",void 0),ru([gi(!1)],e.prototype,"enableHeaderFocus",void 0),ru([gi("auto")],e.prototype,"height",void 0),ru([gi("auto")],e.prototype,"width",void 0),ru([gi("Default")],e.prototype,"gridLines",void 0),ru([gi()],e.prototype,"rowTemplate",void 0),ru([gi()],e.prototype,"detailTemplate",void 0),ru([gi()],e.prototype,"childGrid",void 0),ru([gi()],e.prototype,"queryString",void 0),ru([gi("AllPages")],e.prototype,"printMode",void 0),ru([gi("Expanded")],e.prototype,"hierarchyPrintMode",void 0),ru([gi([])],e.prototype,"dataSource",void 0),ru([gi(null)],e.prototype,"rowHeight",void 0),ru([gi()],e.prototype,"query",void 0),ru([gi("USD")],e.prototype,"currencyCode",void 0),ru([gi()],e.prototype,"toolbar",void 0),ru([gi()],e.prototype,"contextMenuItems",void 0),ru([gi()],e.prototype,"columnMenuItems",void 0),ru([gi()],e.prototype,"toolbarTemplate",void 0),ru([gi()],e.prototype,"pagerTemplate",void 0),ru([gi(0)],e.prototype,"frozenRows",void 0),ru([gi(0)],e.prototype,"frozenColumns",void 0),ru([gi("All")],e.prototype,"columnQueryMode",void 0),ru([gi({})],e.prototype,"currentAction",void 0),ru([gi("19.3.53")],e.prototype,"ej2StatePersistenceVersion",void 0),ru([yi()],e.prototype,"created",void 0),ru([yi()],e.prototype,"destroyed",void 0),ru([yi()],e.prototype,"load",void 0),ru([yi()],e.prototype,"rowDataBound",void 0),ru([yi()],e.prototype,"queryCellInfo",void 0),ru([yi()],e.prototype,"headerCellInfo",void 0),ru([yi()],e.prototype,"actionBegin",void 0),ru([yi()],e.prototype,"actionComplete",void 0),ru([yi()],e.prototype,"actionFailure",void 0),ru([yi()],e.prototype,"dataBound",void 0),ru([yi()],e.prototype,"recordDoubleClick",void 0),ru([yi()],e.prototype,"recordClick",void 0),ru([yi()],e.prototype,"rowSelecting",void 0),ru([yi()],e.prototype,"rowSelected",void 0),ru([yi()],e.prototype,"rowDeselecting",void 0),ru([yi()],e.prototype,"rowDeselected",void 0),ru([yi()],e.prototype,"cellSelecting",void 0),ru([yi()],e.prototype,"cellSelected",void 0),ru([yi()],e.prototype,"cellDeselecting",void 0),ru([yi()],e.prototype,"cellDeselected",void 0),ru([yi()],e.prototype,"columnSelecting",void 0),ru([yi()],e.prototype,"columnSelected",void 0),ru([yi()],e.prototype,"columnDeselecting",void 0),ru([yi()],e.prototype,"columnDeselected",void 0),ru([yi()],e.prototype,"columnDragStart",void 0),ru([yi()],e.prototype,"columnDrag",void 0),ru([yi()],e.prototype,"columnDrop",void 0),ru([yi()],e.prototype,"printComplete",void 0),ru([yi()],e.prototype,"beforePrint",void 0),ru([yi()],e.prototype,"pdfQueryCellInfo",void 0),ru([yi()],e.prototype,"pdfHeaderQueryCellInfo",void 0),ru([yi()],e.prototype,"pdfAggregateQueryCellInfo",void 0),ru([yi()],e.prototype,"excelAggregateQueryCellInfo",void 0),ru([yi()],e.prototype,"exportDetailDataBound",void 0),ru([yi()],e.prototype,"excelQueryCellInfo",void 0),ru([yi()],e.prototype,"excelHeaderQueryCellInfo",void 0),ru([yi()],e.prototype,"beforeExcelExport",void 0),ru([yi()],e.prototype,"excelExportComplete",void 0),ru([yi()],e.prototype,"beforePdfExport",void 0),ru([yi()],e.prototype,"pdfExportComplete",void 0),ru([yi()],e.prototype,"rowDragStartHelper",void 0),ru([yi()],e.prototype,"detailDataBound",void 0),ru([yi()],e.prototype,"rowDragStart",void 0),ru([yi()],e.prototype,"rowDrag",void 0),ru([yi()],e.prototype,"rowDrop",void 0),ru([yi()],e.prototype,"toolbarClick",void 0),ru([yi()],e.prototype,"beforeOpenColumnChooser",void 0),ru([yi()],e.prototype,"beforeOpenAdaptiveDialog",void 0),ru([yi()],e.prototype,"batchAdd",void 0),ru([yi()],e.prototype,"batchDelete",void 0),ru([yi()],e.prototype,"batchCancel",void 0),ru([yi()],e.prototype,"beforeBatchAdd",void 0),ru([yi()],e.prototype,"beforeBatchDelete",void 0),ru([yi()],e.prototype,"beforeBatchSave",void 0),ru([yi()],e.prototype,"beginEdit",void 0),ru([yi()],e.prototype,"commandClick",void 0),ru([yi()],e.prototype,"cellEdit",void 0),ru([yi()],e.prototype,"cellSave",void 0),ru([yi()],e.prototype,"cellSaved",void 0),ru([yi()],e.prototype,"resizeStart",void 0),ru([yi()],e.prototype,"resizing",void 0),ru([yi()],e.prototype,"resizeStop",void 0),ru([yi()],e.prototype,"keyPressed",void 0),ru([yi()],e.prototype,"beforeDataBound",void 0),ru([yi()],e.prototype,"contextMenuOpen",void 0),ru([yi()],e.prototype,"contextMenuClick",void 0),ru([yi()],e.prototype,"columnMenuOpen",void 0),ru([yi()],e.prototype,"columnMenuClick",void 0),ru([yi()],e.prototype,"checkBoxChange",void 0),ru([yi()],e.prototype,"beforeCopy",void 0),ru([yi()],e.prototype,"beforePaste",void 0),ru([yi()],e.prototype,"beforeAutoFill",void 0),ru([yi()],e.prototype,"columnDataStateChange",void 0),ru([yi()],e.prototype,"dataStateChange",void 0),ru([yi()],e.prototype,"dataSourceChanged",void 0),ru([yi()],e.prototype,"exportGroupCaption",void 0),ru([yi()],e.prototype,"lazyLoadGroupExpand",void 0),ru([yi()],e.prototype,"lazyLoadGroupCollapse",void 0),e=ou=ru([vi],e),e})(),Cu=(()=>{class e{constructor(e,t){this.isAsyncPrint=!1,this.defered=new Gs.c,this.parent=e,this.parent.isDestroyed||(this.parent.on(gc,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(Gh,this.actionBeginFunction),this.parent.on(bc,this.onEmpty.bind(this)),this.parent.on(ad,this.hierarchyPrint,this),this.scrollModule=t)}isContentReady(){return!this.isPrintGrid()||"None"!==this.parent.hierarchyPrintMode&&this.parent.childGrid?()=>{this.defered.promise.then(()=>{this.contentReady()}),this.isPrintGrid()&&this.hierarchyPrint()}:this.contentReady}hierarchyPrint(){this.removeColGroup(this.parent);const e=window.printGridObj;e&&!e.element.querySelector("[aria-busy=true")&&e.printModule.defered.resolve()}print(){this.renderPrintGrid()}onEmpty(){this.isPrintGrid()&&this.contentReady()}actionBegin(){this.isPrintGrid()&&(this.isAsyncPrint=!0)}renderPrintGrid(){const e=this.parent,t=Nt("div",{id:this.parent.element.id+"_print",className:e.element.className+" e-print-grid"});t.classList.remove("e-gridhover"),document.body.appendChild(t);const i=new vu(tm(e,e.hierarchyPrintMode));if(e.isFrozenGrid()&&!e.getFrozenColumns())for(let o=0;o<i.columns.length;o++)i.columns[o]=Ve({},i.columns[o]),i.columns[o].freeze=void 0;this.parent.isAngular&&(i.viewContainerRef=this.parent.viewContainerRef),i.load=()=>{},i.query=e.getQuery().clone(),window.printGridObj=i,i.isPrinting=!0;const s=i.getInjectedModules(),n=e.getInjectedModules();s&&s.length===n.length||i.setInjectedModules(n),e.notify("printGrid-Init",{element:t,printgrid:i}),this.parent.log("exporting_begin",this.getModuleName()),i.registeredTemplate=this.parent.registeredTemplate,i.appendTo(t),i.trigger=e.trigger}contentReady(){if(this.isPrintGrid()){const e=this.parent;if(this.isAsyncPrint)return void this.printGrid();const t={requestType:"print",element:e.element,selectedRows:e.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:e.hierarchyPrintMode};if(this.isAsyncPrint||e.trigger(nc,t),t.cancel)return void Kt(e.element);this.isAsyncPrint||this.printGrid()}}printGrid(){const e=this.parent;if("auto"!==e.height){const t=this.scrollModule.getCssProperties(),i=e.element.querySelector(".e-content"),s=e.element.querySelector(".e-gridheader");i.style.height="auto",i.style.overflowY="auto",s.style[t.padding]="",s.firstElementChild.style[t.border]=""}e.allowGrouping&&(e.groupSettings.columns.length?this.removeColGroup(e):e.element.querySelector(".e-groupdroparea").style.display="none");for(const i of[].slice.call(e.element.getElementsByClassName(Ud)))i.style.overflowX="hidden";const t=[].slice.call(e.element.getElementsByClassName("e-spin-show"));for(const i of[].slice.call(t))ti(i,["e-spin-hide"],["e-spin-show"]);this.printGridElement(e),e.isPrinting=!1,delete window.printGridObj,e.trigger(oc,{element:e.element}),e.destroy(),this.parent.log("exporting_complete",this.getModuleName())}printGridElement(e){ti(e.element,["e-print-grid-layout"],["e-print-grid"]),e.isPrinting&&Kt(e.element),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=function(e,t){const i=document.createElement("div"),s=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),n=[].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style"));if(n.length)for(let l=0,a=n.length;l<a;l++)s.push(n[l]);let o="";qe(t)&&(t=window.open("","print","height=452,width=1024,tabbar=no")),i.appendChild(e.cloneNode(!0));for(let l=0,a=s.length;l<a;l++)o+=s[l].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+o+"</head><body>"+i.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();const r=setInterval(()=>{t.ready&&(t.print(),t.close(),clearInterval(r))},500);return t}(e.element,this.printWind)}removeColGroup(e){const t=e.groupSettings.columns.length,i=e.element,s="#"+e.element.id;if(!t)return;const n=$t(`${s}captioncell.e-groupcaption`,i),o=n[t-1].getAttribute("colspan");for(let a=0;a<n.length;a++)n[a].setAttribute("colspan",o);const r=$t(`colgroup${s}colGroup`,i),l=$t(".e-content colgroup",i);this.hideColGroup(r,t),this.hideColGroup(l,t)}hideColGroup(e,t){for(let i=0;i<e.length;i++)for(let s=0;s<t;s++)e[i].children[s].style.display="none"}isPrintGrid(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting}destroy(){this.parent.isDestroyed||(this.parent.off(gc,this.contentReady.bind(this)),this.parent.removeEventListener(Gh,this.actionBeginFunction),this.parent.off(bc,this.onEmpty.bind(this)),this.parent.off(ad,this.hierarchyPrint))}getModuleName(){return"print"}}return e.printGridProp=["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound",nc,oc,Vh],e})();function wu(e,t,i){return qe(e)||""===e?"":Gs.b.getObject(e,t)}function Su(e,t){requestAnimationFrame(()=>{try{t(null,e())}catch(i){t(i)}})}function Eu(e,t){const i=[];for(let s=0,n=e.length;s<n;s++){const n=t(e[s],s);qe(n)||i.push(n)}return i}function xu(e){const t=[];for(let i=0;i<e.length;i++)t.push(Ve({},Iu(e[i]),{},!0));return t}function Ru(e){if(e)try{if(document.querySelectorAll(e).length)return Ds(document.querySelector(e).innerHTML.trim())}catch(t){return Ds(e)}}function Du(e,t){const i={},s=["style","class"];Ve(i,t,{}),"style"in i&&(ei(e,i[s[0]]),delete i[s[0]]),"class"in i&&(Vt([e],i[s[1]]),delete i[s[1]]),Xt(e,i)}function Tu(e,t=0){for(let i=0,s=e.length;i<s;i++)e[i].columns?(e[i].index=qe(e[i].index)?t:e[i].index,t++,t=Tu(e[i].columns,t)):(e[i].index=qe(e[i].index)?t:e[i].index,t++);return t}function Mu(e,t,i){for(let s=0,n=e.length;s<n;s++){let n;"string"==typeof e[s]?n=new Nh({field:e[s]},i):e[s]instanceof Nh&&!e[s].columns?n=e[s]:e[s].columns?(e[s].columns=Mu(e[s].columns,null,i),n=new Nh(e[s],i)):n=new Nh(e[s],i),n.type&&"checkbox"===n.type.toLowerCase()&&(n.allowReordering=!1),n.headerText=qe(n.headerText)?n.foreignKeyValue||n.field||"":n.headerText,n.foreignKeyField=n.foreignKeyField||n.field,n.valueAccessor=("string"==typeof n.valueAccessor?Pe(n.valueAccessor,window):n.valueAccessor)||wu,n.width=t&&qe(n.width)?200:n.width,qe(n.visible)&&(n.visible=!0),e[s]=n}return e}function Iu(e){return e instanceof Ai?Pe("properties",e):e}function ku(e,t,i){let s=e;for(;s&&!(i?s.id===t:s.classList.contains(t));)s=s.parentElement;return s}function Fu(e){const t=[];for(let i=0,s=e.length;i<s;i++)e[i].hasOwnProperty("properties")?t.push(e[i].properties):t.push(e[i]);return t}function Au(e){const t={};return t.x=qe(e.clientX)?e.changedTouches[0].clientX:e.clientX,t.y=qe(e.clientY)?e.changedTouches[0].clientY:e.clientY,t}let Ou=0;function Lu(e){return e+Ou++}function Pu(e,t){for(let i=0,s=t.length;i<s;i++)e.appendChild(s===t.length?t[i]:t[0]);return e}function zu(e,t,i,s){if("Custom"===e){let e=i.customAggregate;return"string"==typeof e&&(e=Pe(e,window)),e?e.call(s,t,i):""}return i.field in t||t instanceof Array?Gs.b.aggregates[e.toLowerCase()](t,i.field):null}let Bu,Hu=null;function Nu(){if(null!==Hu)return Hu;const e=document.createElement("div");let t=0;return e.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth|0,document.body.removeChild(e),Hu=t}function Vu(e=""){return e.replace(/\./g,"___")}function qu(e=""){return e.replace(/___/g,".")}function ju(e,t,i){const s=ku(i,Yd),n=!s||s&&!s.classList.contains("e-insertedrow");return"beginEdit"===t&&n?!(e.isIdentity||e.isPrimaryKey||!e.allowEditing):!("add"===t&&e.isIdentity||n&&!e.allowEditing&&!e.isIdentity&&!e.isPrimaryKey)}function Wu(e,t){const i="e-wrap";e=e instanceof Array?e:[e];for(let s=0;s<e.length;s++)t?e[s].classList.add(i):e[s].classList.remove(i)}function Gu(e,t){const i=e.getService("valueFormatter");let s;switch("date"!==t.type&&"datetime"!==t.type||(s={type:t.type,skeleton:t.format},"string"==typeof t.format&&"yMd"!==t.format&&(s.format=t.format)),t.type){case"date":case"datetime":t.setFormatter(i.getFormatFunction(s)),t.setParser(i.getParserFunction(s));break;case"number":t.setFormatter(i.getFormatFunction({format:t.format})),t.setParser(i.getParserFunction({format:t.format}))}}function _u(e,t,...i){for(let s=0,n=e.length;s<n;s++)t?(ti(e[s],[...i],[]),e[s].setAttribute("aria-selected","true")):(ti(e[s],[],[...i]),e[s].removeAttribute("aria-selected"))}function Uu(e,t){e.checked=t}function Ku(e,t,i){const s=Nt("div",{className:i});return s.appendChild(t),s.setAttribute("uid",e),s}function Yu(e,t){qt([e],["e-check","e-stop","e-uncheck"]),e.classList.add(t?"e-check":"e-uncheck")}function Xu(e,t,i){for(let n=0;n<t.length;n++)ze(t[n].field,Qu(t[n],i),e.foreignKeyData);const s=e.cells;for(let n=0;n<s.length;n++)s[n].isForeignKey&&ze("foreignKeyData",Pe(s[n].column.field,e.foreignKeyData),s[n])}function Qu(e,t,i,s){const n=e.foreignKeyField;let o=qe(i)?wu(e.field,t):i;o=qe(o)?"":o;const r=new Gs.e,l=s||(e.dataSource instanceof Gs.a&&e.dataSource.dataSource.json.length?e.dataSource.dataSource.json:e.columnData);return o.getDay?r.where(Ju({field:n,operator:"equal",value:o,matchCase:!1})):r.where(n,"==",o,!1),new Gs.a(l).executeLocal(r)}function $u(e,t){let i;return t.some(t=>(i=t,t.foreignKeyValue===e))&&i}function Ju(e,t){let i,s,n;const o=Ve({},Iu(e)),r=Ve({},Iu(e));if(qe(e.value))return i=new Gs.d(o.field,o.operator,o.value,!1),i;const l=new Date(e.value);if("equal"===e.operator||"notequal"===e.operator){"datetime"===t?(s=new Date(l.setSeconds(l.getSeconds()-1)),n=new Date(l.setSeconds(l.getSeconds()+2)),e.value=new Date(l.setSeconds(n.getSeconds()-1))):(s=new Date(l.setHours(0)-1),n=new Date(l.setHours(24))),o.value=s,r.value=n,"equal"===e.operator?(o.operator="greaterthan",r.operator="lessthan"):"notequal"===e.operator&&(o.operator="lessthanorequal",r.operator="greaterthanorequal");const a=new Gs.d(o.field,o.operator,o.value,!1),h=new Gs.d(r.field,r.operator,r.value,!1);i="equal"===e.operator?a.and(h):a.or(h)}else"date"!==t||"lessthanorequal"!==e.operator&&"greaterthan"!==e.operator||(o.value=new Date(l.setHours(24)-1)),"string"==typeof o.value&&(o.value=new Date(o.value)),i=new Gs.d(o.field,o.operator,o.value,!1);return e.setProperties?e.setProperties({ejpredicate:i},!0):e.ejpredicate=i,i}function Zu(e){return e.enableVirtualization&&e.groupSettings.columns.length>0&&e.isVirtualAdaptive}function em(e="",t){if(e){let i=t;const s=e.split(".");for(let e=0;e<s.length&&!qe(i);e++)i=i[s[e]];return i}}function tm(e,t="Expanded"){const i={};if(!e)return i;const s=e.isFrozenGrid()&&!e.getFrozenColumns();for(const n of Cu.printGridProp)i[n]="columns"===n?Fu(s?e.getColumns():e[n]):"allowPaging"===n?"CurrentPage"===e.printMode:Iu(e[n]);return i.enableHover=!1,e.childGrid&&"None"!==t&&(i.expandedRows=function(e,t){const i=e.getRowsObject(),s={};for(const n of i)if(n.isExpand&&!n.isDetailRow){const i=e.allowPaging&&"AllPages"===e.printMode?n.index+e.pageSettings.currentPage*e.pageSettings.pageSize-e.pageSettings.pageSize:n.index;s[i]={},s[i].isExpand=!0,s[i].gridModel=tm(n.childGrid,t),s[i].gridModel.query=e.childGrid.query}return s}(e,t)),i}function im(e,t,i,s){const n=e||{};let o=arguments.length;s&&(o-=1);for(let r=1;r<o;r++){if(!arguments[r])continue;const e=arguments[r],t=Object.keys(Object.getPrototypeOf(e)).length?Object.keys(e).concat(sm(e)):Object.keys(e);for(let i=0;i<t.length;i++){const o=n[t[i]],r=e[t[i]];let l;s&&(Be(r)||Array.isArray(r))?Be(r)?(l=o||{},n[t[i]]=Ve({},l,r,s)):(l=o||[],n[t[i]]=Ve([],l,r,s)):n[t[i]]=r}}return n}function sm(e){let t=[];for(;Object.getPrototypeOf(e)&&Object.keys(Object.getPrototypeOf(e)).length;)t=t.concat(Object.keys(Object.getPrototypeOf(e))),e=Object.getPrototypeOf(e);return t}function nm(e,t){let i=t;const s=[];if(e.columns){t++;for(let i=0;i<e.columns.length;i++)s[i]=nm(e.columns[i],t);for(let e=0;e<s.length;e++)i<s[e]&&(i=s[e]);t=i}return t}var om;function rm(e,t){if(e&&t){const i=Zt(e,".e-row").getBoundingClientRect().height,s=Zt(t,".e-row").getBoundingClientRect().height;i>s?t.style.height=i+"px":e.style.height=s+"px"}}function lm(e){const t=e.getVisibleColumns();let i=0,s=0;for(let n=0;n<t.length;n++)je(t[n].width)?s++:-1!==t[n].width.toString().indexOf("%")&&i++;return("auto"===e.width||"string"==typeof e.width&&-1!==e.width.indexOf("%"))&&!e.groupSettings.showGroupedColumn&&e.groupSettings.columns.length&&i&&!s}function am(e,t,i,s){const n=e.dataToBeUpdated[i].concat(t[i]).reduce((e,t)=>(e[t[s]]=void 0===e[t[s]]?t:Object.assign(e[t[s]],t),e),{});e.dataToBeUpdated[i]=Object.keys(n).map(e=>n[e])}function hm(e,t,i,s,n){(i[0].length||s)&&(n?t(ep,i[0],n[0]):t(ep,i[0])),e.isFrozenGrid()&&(i[1].length||s)&&(n?t("movable",i[1],n[1]):t("movable",i[1])),e.getFrozenMode()!==Jd&&"Right"!==e.getFrozenMode()||!i[2].length&&!s||(n?t(Zd,i[2],n[2]):t(Zd,i[2]))}function cm(e){return["Right"!==e.getFrozenMode()?e.getRowsObject():[],e.getMovableRowsObject(),e.getFrozenRightRowsObject()]}function dm(e,t,i){const s=e.children.length;let n=0;for(let o=0;o<s;o++,n++)o>=t&&o<i||(e.removeChild(e.children[n]),n--)}function pm(e,t,i){return"movable"===t.getFreezeTableName()?[].slice.call(e.getMovableDataRows()[i].getElementsByClassName(Hd)):t.getFreezeTableName()===Zd?[].slice.call(e.getFrozenRightDataRows()[i].getElementsByClassName(Hd)):[].slice.call(e.getDataRows()[i].getElementsByClassName(Hd))}function um(e,t,i,s){const n=e.getFrozenLeftCount(),o=e.getMovableColumnsCount();return s="movable"===t.getFreezeTableName()?s-n:t.getFreezeTableName()===Zd?s-(n+o):s,pm(e,t,i)[s]}function mm(e,t,i,s,n,o,r){r||e.getFreezeTableName()===ep||!t&&e.getFreezeTableName()===Zd||1===o?i[Vu(e.field)]=e.validationRules:"movable"!==e.getFreezeTableName()&&e.getFreezeTableName()?e.getFreezeTableName()===Zd&&(n[Vu(e.field)]=e.validationRules):s[Vu(e.field)]=e.validationRules}function gm(e){let t;return e.isFrozenGrid()&&(t=e.frozenRows&&"Top"===e.editSettings.newRowPosition?e.getMovableHeaderTbody():e.getMovableContentTbody()),t}function fm(e){let t;return e.getFrozenMode()===Jd&&(t=e.frozenRows&&"Top"===e.editSettings.newRowPosition?e.getFrozenRightHeaderTbody():e.getFrozenRightContentTbody()),t}function bm(e,t,i){let s;const n=new St;if("number"===t)try{s=n.getNumberPattern({format:e,currency:this.currency,useGrouping:!0},!0)}catch(o){s=e}else if("date"===t||"time"===t||"datetime"===t)try{if(s=n.getDatePattern({skeleton:e,type:t},i),qe(s))throw"error"}catch(o){try{s=n.getDatePattern({format:e,type:t},i)}catch(o){s=e}}else s=e;if("number"!==t){const e={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};s=s.replace(/G|H|c|'| a|yy|y|EEEE|E/g,t=>e[t])}return s}function ym(e){if(e.enableAdaptiveUI){const e=document.getElementsByClassName("e-responsive-dialog");for(let t=0;t<e.length;t++)e[t].classList.add("e-bigger")}}function vm(e,t){let i;const s=e.split(".").length,n=e.split(".");let o=t;for(let r=0;r<s;r++)i=o[n[r]],o=i;return i}function Cm(e,t,i,s){for(const n of t)i?e.on(n.event,n.handler,s):e.off(n.event,n.handler)}function wm(e,t,i,s){const n=Vu(t.field);return s=Object.assign(s,{id:e.element.id+n,name:n,"e-mappinguid":t.uid}),e.createElement("input",{className:i,attrs:s})}function Sm(e,t){let i;e.columnModel||e.getColumns();for(const s of e.columnModel)if(s.field===t){i=s;break}return i}function Em(e,t){e.destroyTemplate(t),e.isReact&&e.renderTemplates()}!function(e){e.timer=null}(om||(om={}));class xm{constructor(e){this.existingPredicate={},this.foreignKeyQuery=new Gs.e,this.filterState=!0,this.values={},this.renderEmpty=!1,this.parent=e,this.id=this.parent.element.id,this.valueFormatter=new Hh(this.parent.locale),this.cBoxTrue=Object(_s.e)(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=Object(_s.e)(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&Vt([this.cBoxTrue,this.cBoxFalse],["e-rtl"])}destroy(){this.closeDialog()}wireEvents(){Bt.add(this.dlg,"click",this.clickHandler,this),Bt.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=Ge(this.searchBoxKeyUp,200);const e=this.dialogObj.element.querySelector(".e-searchinput");e&&Bt.add(e,"keyup",this.searchHandler,this)}unWireEvents(){Bt.remove(this.dlg,"click",this.clickHandler),Bt.remove(this.dlg,"keyup",this.keyupHandler);const e=this.dialogObj.element.querySelector(".e-searchinput");e&&Bt.remove(e,"keyup",this.searchHandler)}foreignKeyFilter(e,t,i){const s={},n=[],o=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(o.where(i)).then(i=>{this.options.column.columnData=i.result,this.parent.notify($c,{predicate:s,column:this.options.column}),e.ejpredicate=s.predicate.predicates;const o=s.predicate.predicates;for(let e=0;e<o.length;e++)n.push({field:o[e].field,predicate:"or",matchCase:o[e].ignoreCase,ignoreAccent:o[e].ignoreAccent,operator:o[e].operator,value:o[e].value,type:this.options.type});e.filterCollection=n.length?n:t.filter(e=>e.field=this.options.field),this.options.handler(e)})}foreignFilter(e,t){const i=new Gs.d(this.options.column.foreignKeyValue,this.options.isRemote?"string"===this.options.column.type?"contains":"equal":this.options.column.type?"contains":"equal",t,!0,this.options.ignoreAccent);this.foreignKeyFilter(e,[e.filterCollection],i)}searchBoxClick(e){e.target.classList.contains("e-searchclear")&&(this.sInput.value="",this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())}searchBoxKeyUp(e){this.refreshCheckboxes(),this.updateSearchIcon()}updateSearchIcon(){this.sInput.value.length?ti(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]):ti(this.sIcon,["e-search-icon"],["e-chkcancel-icon"])}getLocalizedLabel(e){return this.localeObj.getConstant(e)}updateDataSource(){const e=this.options.dataSource;if(!(e instanceof Gs.a))for(let t=0;t<e.length;t++)if("object"!=typeof e){const i={};i[this.options.field]=e[t],e[t]=i}}updateModel(e){this.options=e,this.existingPredicate=e.actualPredicate||{},this.options.dataSource=e.dataSource,this.options.dataManager=e.dataManager?e.dataManager:e.dataSource,this.updateDataSource(),this.options.type=e.type,this.options.format=e.format||"",this.options.ignoreAccent=e.ignoreAccent||!1,this.options.filteredColumns=e.filteredColumns||this.parent.filterSettings.columns,this.options.query=e.query||new Gs.e,this.options.allowCaseSensitive=e.allowCaseSensitive||!1,this.options.uid=e.column.uid,this.values={},this.localeObj=e.localeObj,this.isFiltered=e.filteredColumns.length}getAndSetChkElem(e){if(this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{uid:this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),!e.hideSearchbox){this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox);const e={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search")}};Jr.createInput(e,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)}return this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox}showDialog(e){const t={requestType:"filterbeforeopen",columnName:this.options.field,columnType:this.options.type,cancel:!1};t.filterModel=this,this.parent.notify("cbox-filter-begin",t),t.cancel||(this.dialogObj=new $o({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!qe(ku(e.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this)}),this.dialogObj.isStringTemplate=!0,this.renderResponsiveFilter(e),this.dlg.setAttribute("aria-label",this.getLocalizedLabel("ExcelFilterDialogARIA")),e.isResponsiveFilter?document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv").appendChild(this.dlg):this.parent.element.appendChild(this.dlg),this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=e.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show(),this.dialogObj.element.querySelector(".e-dlg-content").appendChild(this.sBox),this.wireEvents(),Rr({target:this.spinner},this.parent.createElement),Br(this.spinner),this.getAllData())}renderResponsiveFilter(e){e.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")}dialogCreated(e){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":zt.isDevice?this.dialogObj.position={X:"center",Y:"center"}:function(e,t){const i=t.element.style.display;t.element.style.display="block";const s=t.width,n=Zs(e,t.element);t.element.style.display=i,t.element.style.top=n.top+e.getBoundingClientRect().height-5+"px";const o=n.left-s+e.clientWidth;t.element.style.left=o<1?s+o-16+"px":o+-4+"px"}(this.options.target,this.dialogObj),this.parent.notify("filterDialogCreated",e)}openDialog(e){this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e)}closeDialog(){if(this.dialogObj&&!this.dialogObj.isDestroyed){this.isBlanks=!1;const e=this.options.columns.filter(e=>e.getFilterItemTemplate()),t=this.parent.registeredTemplate;e.length&&!qe(t)&&t.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&void 0!==this.parent.destroyTemplate&&Em(this.parent,["filterItemTemplate"]),this.parent.notify("filter-menu-close",{field:this.options.field}),this.dialogObj.destroy(),this.unWireEvents(),Yt(this.dlg),this.dlg=null,this.parent.notify(Sd,{})}}clearFilter(e){const t={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(pd,t),t.cancel||this.options.handler({action:"clear-filter",field:e?e.field:this.options.field})}btnClick(e){if(this.filterState){if("input"===e.target.tagName.toLowerCase()&&e.target.classList.contains("e-searchinput")){let t=e.target.value;"boolean"===this.options.column.type&&(""!==t&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(t.toLowerCase())?t=!0:""!==t&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(t.toLowerCase())&&(t=!1)),"date"!==this.options.type&&"datetime"!==this.options.type||(t=this.valueFormatter.fromView(t,this.options.parserFn,this.options.type));const i={action:"filtering",filterCollection:{field:this.options.field,operator:this.options.isRemote?"string"===this.options.column.type?"contains":"equal":"date"===this.options.column.type||"datetime"===this.options.column.type||"boolean"===this.options.column.type?"equal":"contains",value:t,matchCase:!1,type:this.options.column.type,ignoreAccent:this.options.ignoreAccent},field:this.options.field};null!=t&&""!==t?this.isBlanks&&t&&"string"==typeof t&&this.getLocalizedLabel("Blanks").toLowerCase().indexOf(t.toLowerCase())>=0?this.fltrBtnHandler():this.isForeignColumn(this.options.column)?this.foreignFilter(i,t):this.options.handler(i):this.closeDialog()}else if(13===e.keyCode)this.fltrBtnHandler();else{const t=e.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===t?this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===t&&this.clearFilter()}this.closeDialog()}else"input"!==e.target.tagName.toLowerCase()&&(this.clearFilter(),this.closeDialog())}fltrBtnHandler(){let e=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall)"));const t=e;let i="equal";const s=this.dialogObj.element.querySelector(".e-dropdownlist");let n;s&&(this.options.operator=i=s.ej2_instances[0].value),this.isMenuNotEqual="notequal"===this.options.operator,this.options.hideSearchbox||(n=this.searchBox.querySelector(".e-searchinput"));const o={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:i,type:this.options.type,matchCase:this.options.allowCaseSensitive,ignoreAccent:this.options.ignoreAccent},r=this.itemsCnt!==e.length&&this.itemsCnt-e.length<e.length;let l,a,h,c;r&&n&&""===n.value&&(i=this.isMenuNotEqual?"equal":"notequal",e=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),o.predicate=this.isMenuNotEqual?"or":"and",o.operator=i);let d=[];if(e.length!==this.itemsCnt||n&&n.value&&""!==n.value){for(let t=0;t<e.length;t++){l=this.values[ku(e[t],"e-ftrchk").getAttribute("uid")],c=Ve({},{value:l},o),l&&!l.toString().length&&(c.operator=r?"notequal":"equal"),""===l||qe(l)?d=d.concat(xm.generateNullValuePredicates(o)):d.push(c);const i={instance:this,handler:this.fltrBtnHandler,arg1:c.field,arg2:c.predicate,arg3:c.operator,arg4:c.matchCase,arg5:c.ignoreAccent,arg6:c.value,cancel:!1};if(this.parent.notify(pd,i),i.cancel)return}"date"!==this.options.type&&"datetime"!==this.options.type||(h=t.length-1,a=this.values[ku(t[h],"e-ftrchk").getAttribute("uid")],qe(a)&&r&&d.push({field:o.field,matchCase:o.matchCase,operator:"equal",predicate:"and",value:null})),this.initiateFilter(d)}else this.clearFilter()}static generateNullValuePredicates(e){const t=[];return"string"===e.type&&t.push({field:e.field,ignoreAccent:e.ignoreAccent,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:""}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:null}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:void 0}),t}initiateFilter(e){const t=e[0];let i;if(!qe(t)){i=t.ejpredicate?t.ejpredicate:new Gs.d(t.field,t.operator,t.value,!t.matchCase,t.ignoreAccent);for(let t=1;t<e.length;t++)i=void 0!==e[t].ejpredicate?i[e[t].predicate](e[t].ejpredicate):i[e[t].predicate](e[t].field,e[t].operator,e[t].value,!e[t].matchCase,e[t].ignoreAccent);const s={action:"filtering",filterCollection:e,field:this.options.field,ejpredicate:Gs.d.or(i)};this.options.handler(s)}}isForeignColumn(e){return!!e.isForeignColumn&&e.isForeignColumn()}refreshCheckboxes(){const e=this.sInput.value,t=this.options.column,i=this.isForeignColumn(t)?this.foreignKeyQuery.clone():this.options.query.clone(),s=this.options.query.clone(),n=i.queries.filter(e=>e&&"onWhere"===e.fn)[0];i.queries=[],s.queries=[];let o="string"!==this.options.type&&parseFloat(e)?parseFloat(e):e,r=this.options.isRemote?"string"===this.options.type?"contains":"equal":this.options.type?"contains":"equal";const l=!0,a=this.options.ignoreAccent,h=this.isForeignColumn(t)?t.foreignKeyValue:t.field;o=""===o||void 0===o?void 0:o;let c=[];const d={field:h,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:l,ignoreAccent:a};let p;const u=this.options.dataManager.adaptor.getModuleName;"boolean"===this.options.type&&(void 0!==o&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(o.toLowerCase())?o="true":void 0!==o&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(o.toLowerCase())&&(o="false"),void 0!==o&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(o.toLowerCase())&&u?(u(),o=!0):void 0!==o&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(o.toLowerCase())&&u&&(u(),o=!1),r="equal"),"date"!==this.options.type&&"datetime"!==this.options.type||(o=this.valueFormatter.fromView(e,this.options.parserFn,this.options.type)),this.addDistinct(i),this.parent.trigger(Gh,{requestType:"filtersearchbegin",filterModel:this,columnName:h,column:t,operator:r,matchCase:l,ignoreAccent:a,filterChoiceCount:null,query:i,value:o},u=>{if(u.operator=u.operator,p=new Gs.d(h,u.operator,o,u.matchCase,u.ignoreAccent),"date"===this.options.type||"datetime"===this.options.type){r="equal";const e={field:h,operator:r,value:o,matchCase:l,ignoreAccent:a};qe(o)||(p=Ju(e,this.options.type))}if(e&&"string"==typeof e&&this.isBlanks&&this.getLocalizedLabel("Blanks").toLowerCase().indexOf(e.toLowerCase())>=0){c=c.concat(xm.generateNullValuePredicates(d));const e=xm.generatePredicate(c);e.predicates.push(p),i.where(e)}else e.length?(p=qe(n)?p:p.and(n.e),i.where(p)):qe(n)||i.where(n.e);u.filterChoiceCount=qe(u.filterChoiceCount)?1e3:u.filterChoiceCount;const m={};Br(this.spinner),this.renderEmpty=!1,this.isForeignColumn(t)&&e.length?("result"in t.dataSource?new Gs.a(t.dataSource.result):t.dataSource).executeQuery(i).then(e=>{const i=this.options.column.columnData;this.options.column.columnData=e.result,this.parent.notify($c,{predicate:m,column:t}),m.predicate.predicates.length?s.where(m.predicate):this.renderEmpty=!0,this.options.column.columnData=i,s.take(u.filterChoiceCount),this.search(u,s)}):(i.take(u.filterChoiceCount),this.search(u,i))})}search(e,t){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(e,t):this.processSearch(t)}getPredicateFromCols(e){const t=xm.getPredicate(e),i=[],s={},n=void 0!==this.parent.getForeignKeyColumns,o=n?this.parent.getForeignKeyColumns():[];for(const r of Object.keys(t)){let e;n&&this.parent.getColumnByField(r).isForeignColumn()&&(e=$u(r,o)),e?(this.parent.notify($c,{predicate:s,column:e}),s.predicate.predicates.length&&i.push(Gs.d.or(s.predicate.predicates))):i.push(t[r])}return i.length&&Gs.d.and(i)}getQuery(){return this.parent.getQuery?this.parent.getQuery().clone():new Gs.e}getAllData(){const e=this.getQuery();e.requiresCount(),this.addDistinct(e);const t={requestType:dc,query:e,filterChoiceCount:null};t.filterModel=this,this.parent.trigger(Gh,t,t=>{t.filterChoiceCount=qe(t.filterChoiceCount)?1e3:t.filterChoiceCount,e.take(t.filterChoiceCount),this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(t,e):this.processDataOperation(e,!0)})}addDistinct(e){let t=Gs.b.distinct(this.options.filteredColumns,"field");return t.indexOf(this.options.column.field)<=-1&&(t=t.concat(this.options.column.field)),e.distinct(t),e}filterEvent(e,t){const i=function(e,t){const i=function(e){const t=new Gs.f,i=new Gs.a({url:"",adaptor:new Gs.f}),s=t.processQuery(i,e);return JSON.parse(s.data)}(t),s=new Gs.c;return i.dataSource=s.resolve,i.action=e,{state:i,deffered:s}}(e,t);this.parent.trigger(ed,i.state),i.deffered.promise.then(e=>{this.dataSuccess(e)})}processDataOperation(e,t){this.options.dataSource=this.options.dataSource instanceof Gs.a?this.options.dataSource:new Gs.a(this.options.dataSource);const i=[],s=[];if(this.isForeignColumn(this.options.column)&&t){const t="result"in this.options.column.dataSource?new Gs.a(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=e.params,i.push(t.executeQuery(this.foreignKeyQuery)),s.push(e=>this.foreignKeyData=e)}i.push(this.options.dataSource.executeQuery(e)),s.push(this.dataSuccess.bind(this));let n=0;Promise.all(i).then(e=>{for(let t=0;t<e.length;t++)s[n++](e[t].result)})}dataSuccess(e){this.fullData=e;const t={dataSource:this.fullData,executeQuery:!0,field:this.options.field};if(this.parent.notify("beforeCheckboxRenderer",t),t.executeQuery){const e=new Gs.e;if(this.parent.searchSettings&&this.parent.searchSettings.key.length){const t=this.parent.searchSettings,i=t.fields.length?t.fields:this.options.columns.map(e=>e.field);e.search(t.key,i,t.operator,t.ignoreCase,t.ignoreAccent)}if(this.options.filteredColumns.length){const t=[];for(let e=0;e<this.options.filteredColumns.length;e++){const i=this.options.filteredColumns[e];this.options.uid?(i.uid=i.uid||this.parent.getColumnByField(i.field).uid,i.uid!==this.options.uid&&t.push(this.options.filteredColumns[e])):i.field!==this.options.field&&t.push(this.options.filteredColumns[e])}const i=this.getPredicateFromCols(t);i&&e.where(i)}const i=new Gs.a(t.dataSource).executeLocal(e);this.filteredData=xm.getDistinct(i,this.options.field,this.options.column,this.foreignKeyData).records||[]}this.processDataSource(null,!0,t.executeQuery?this.filteredData:t.dataSource,t),this.sInput&&this.sInput.focus();const i={requestType:"filterafteropen",columnName:this.options.field,columnType:this.options.type};i.filterModel=this,this.parent.notify(dd,i)}processDataSource(e,t,i,s){Br(this.spinner),this.updateResult(),this.createFilterItems(i,t,s)}processSearch(e){this.processDataOperation(e)}updateResult(){this.result={};const e=this.getPredicateFromCols(this.options.filteredColumns),t=new Gs.e;e&&t.where(e),this.parent.notify("before-checkbox-renderer-query",{query:t});const i=new Gs.a(this.fullData).executeLocal(t);for(const s of i)this.result[em(this.options.field,s)]=!0}clickHandler(e){const t=e.target,i=ku(t,"e-checkbox-wrapper");if(ku(t,"e-searchbox")&&this.searchBoxClick(e),i){const e=i.querySelector(".e-selectall");e?this.updateAllCBoxes(!e.classList.contains("e-check")):function(e){const t=e.querySelector(".e-frame"),i=t.previousSibling;t.classList.contains("e-check")?(i.checked=!1,ti(t,["e-uncheck"],["e-check"])):(i.checked=!0,ti(t,["e-check"],["e-uncheck"]))}(i.parentElement),this.updateIndeterminatenBtn(),i.querySelector(".e-chk-hidden").focus()}this.setFocus(ku(i,"e-ftrchk"))}keyupHandler(e){this.setFocus(ku(e.target,"e-ftrchk"))}setFocus(e){const t=this.dlg.querySelector(".e-chkfocus");t&&t.classList.remove("e-chkfocus"),e&&e.classList.add("e-chkfocus")}updateAllCBoxes(e){const t=[].slice.call(this.cBox.getElementsByClassName("e-frame"));for(const i of t)Yu(i,e),Uu(i.previousSibling,e)}dialogOpen(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())}createCheckbox(e,t,i){const s=t?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);Uu(s.querySelector("input"),t);const n=s.querySelector(".e-label"),o=im({},i,{column:this.options.column,parent:this.parent});return n.innerHTML=!qe(e)&&e.toString().length?e:this.getLocalizedLabel("Blanks"),n.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),"boolean"==typeof e&&(n.innerHTML=this.getLocalizedLabel(!0===e?"FilterTrue":"FilterFalse")),Vt([n],["e-checkboxfiltertext"]),this.options.template&&i[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&(n.innerHTML="",this.parent.isReact&&this.options.column.filter&&"string"!=typeof this.options.column.filter.itemTemplate?(this.options.template(o,this.parent,"filterItemTemplate",null,null,null,n),this.parent.renderTemplates()):Pu(n,this.options.template(o,this.parent,"filterItemTemplate"))),s}updateIndeterminatenBtn(){const e=this.cBox.children.length-1;let t=[],i=!1;const s=this.cBox.querySelector(".e-selectall"),n=this.cBox.querySelectorAll(".e-check:not(.e-selectall)").length;let o;this.options.isResponsiveFilter||(o=this.dialogObj.btnObj[0],o.disabled=!1);const r=s.previousSibling;Uu(r,!1),r.indeterminate=!1,e===n?(t=["e-check"],Uu(r,!0)):n?(t=["e-stop"],r.indeterminate=!0):(t=["e-uncheck"],i=!0,o&&(o.disabled=!0)),o&&(this.filterState=!o.disabled,o.dataBind()),qt([s],["e-check","e-stop","e-uncheck"]),Vt([s],t),this.parent.notify(Ed,{disabled:i})}createFilterItems(e,t,i){const s=this.parent.createElement("div");let n,o=!1;this.options.isResponsiveFilter||(n=this.dialogObj.btnObj[0]);let r=-1,l="ejValue";i.executeQuery||(l=i.field);for(let h=0;h<e.length;h++){const t=Pe(l,e[h]);(""===t||qe(t))&&(r+=1)}if(this.itemsCnt=-1!==r?e.length-r:e.length,e.length&&!this.renderEmpty){const t=this.getLocalizedLabel("SelectAll"),i=this.cBox.querySelector(".e-checkfltrnmdiv");i&&i.classList.remove("e-checkfltrnmdiv");const r=this.createCheckbox(t,!1,{[this.options.field]:t}),a=Ku(Lu("cbox"),r,"e-ftrchk");a.querySelector(".e-frame").classList.add("e-selectall"),s.appendChild(a);let h=new Gs.d("field","equal",this.options.field);this.options.foreignKeyValue&&(h=h.or("field","equal",this.options.foreignKeyValue));const c=new Gs.a(this.options.filteredColumns).executeLocal((new Gs.e).where(h)).length;let d;for(let n=0;n<e.length;n++){const t=Lu("cbox");this.values[t]=Pe(l,e[n]);let i=Pe(this.options.field,e[n]);this.options.formatFn&&(i=this.valueFormatter.toView(i,this.options.formatFn));const o={value:i,column:this.options.column,data:e[n]};if(this.parent.notify("filter-cbox-value",o),i=o.value,""===i||qe(i)){if(d)continue;d=!0}const r=this.createCheckbox(i,this.getCheckedState(c,this.values[t]),Pe("dataObj",e[n]));s.appendChild(Ku(t,r,"e-ftrchk"))}this.cBox.innerHTML="",Pu(this.cBox,[].slice.call(s.children)),this.updateIndeterminatenBtn(),n&&(n.disabled=!1),o=!1}else s.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),Pu(this.cBox.children[0],[].slice.call(s.children)),n&&(n.disabled=!0),o=!0;n&&(this.filterState=!n.disabled,n.dataBind());const a={requestType:dc,dataSource:this.renderEmpty?[]:e};a.filterModel=this,this.parent.notify(dd,a),this.parent.notify(Ed,{disabled:o}),Nr(this.spinner)}getCheckedState(e,t){if(this.isFiltered&&e){const e=this.result[t];return"notequal"===this.options.operator?!e:e}return!0}static getDistinct(e,t,i,s){let n=e.length;const o=[];let r;const l={},a=!(!i||!i.isForeignColumn)&&i.isForeignColumn();for(;n--;)if(r=e[n],r=em(t,r),!(r in l)){const h={};if(h.ejValue=r,l[r]=!0,a){const t=Qu(i,{},r,s)[0];ze(Zc,t,e[n]),r=Pe(i.foreignKeyValue,t)}ze(t,qe(r)?null:r,h),ze("dataObj",e[n],h),o.push(h)}return Gs.b.group(Gs.b.sort(o,t,Gs.b.fnAscending),"ejValue")}static getPredicate(e){const t=Gs.b.distinct(e,"field",!0)||[];let i=[];const s={};for(let n=0;n<t.length;n++)i=new Gs.a(e).executeLocal((new Gs.e).where("field","equal",t[n].field)),0!==i.length&&(s[t[n].field]=xm.generatePredicate(i));return s}static generatePredicate(e){const t=e?e.length:0;let i;const s=xm.updateDateFilter(e[0]);s.ignoreAccent=!qe(s.ignoreAccent)&&s.ignoreAccent,i="date"===s.type||"datetime"===s.type?Ju(s,s.type):s.ejpredicate?s.ejpredicate:new Gs.d(s.field,s.operator,s.value,!xm.getCaseValue(s),s.ignoreAccent);for(let n=1;n<t;n++)e[n]=xm.updateDateFilter(e[n]),t>2&&n>1&&"or"===e[n].predicate?i.predicates.push("date"===e[n].type||"datetime"===e[n].type?Ju(e[n],e[n].type):new Gs.d(e[n].field,e[n].operator,e[n].value,!xm.getCaseValue(e[n]),e[n].ignoreAccent)):i="date"===e[n].type||"datetime"===e[n].type?"and"===e[n].predicate&&"equal"===e[n].operator?i.or(Ju(e[n],e[n].type),e[n].type,e[n].ignoreAccent):i[e[n].predicate](Ju(e[n],e[n].type),e[n].type,e[n].ignoreAccent):e[n].ejpredicate?i[e[n].predicate](e[n].ejpredicate):i[e[n].predicate](e[n].field,e[n].operator,e[n].value,!xm.getCaseValue(e[n]),e[n].ignoreAccent);return i||null}static getCaseValue(e){return qe(e.matchCase)?!("string"===e.type||qe(e.type)&&"string"==typeof e.value):e.matchCase}static updateDateFilter(e){return("date"===e.type||"datetime"===e.type||e.value instanceof Date)&&(e.type=e.type||"date"),e}}class Rm{constructor(e){this.parent=e}addNew(e,t){let i;this.isEdit=!1;const s=gm(this.parent),n=fm(this.parent),o=this.parent.isFrozenGrid(),r=o&&this.parent.enableColumnVirtualization&&t.isScroll;if(i=this.parent.frozenRows&&"Top"===this.parent.editSettings.newRowPosition?r?this.parent.getMovableHeaderTbody():this.parent.getHeaderTable().querySelector(sp):r?this.parent.getMovableContentTbody():this.parent.getContentTable().querySelector(sp),t.row=this.parent.createElement("tr",{className:"e-row e-addedrow"}),i.querySelector(".e-emptyrow")){const e=i.querySelector(".e-emptyrow");if(e.parentNode.removeChild(e),o&&!r){const e=this.parent.getContent().querySelector("."+jd).querySelector(sp);if(e.firstElementChild.parentNode.removeChild(e.firstElementChild),this.parent.getFrozenMode()===Jd){const e=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(sp);e.firstElementChild.parentNode.removeChild(e.firstElementChild)}}}if("Top"===this.parent.editSettings.newRowPosition?i.insertBefore(t.row,i.firstChild):i.appendChild(t.row),t.row.appendChild(this.getEditElement(e,!1,void 0,t,!0)),this.parent.editModule.checkLastRow(t.row,t),o&&!r){const e=this.renderMovableform(t.row,t);if("Top"===this.parent.editSettings.newRowPosition?s.insertBefore(e,s.firstChild):s.appendChild(e),t.row.querySelector(".e-normaledit").setAttribute("colspan",this.parent.getVisibleFrozenColumns()+""),e.setAttribute("colspan",""+(this.parent.getVisibleColumns().length-this.parent.getVisibleFrozenColumns())),n){const e=this.renderFrozenRightForm(t.row,t);"Top"===this.parent.editSettings.newRowPosition?n.insertBefore(e,n.firstChild):n.appendChild(e);const i=this.parent.getVisibleFrozenColumns()-this.parent.getFrozenRightColumnsCount();t.row.querySelector(".e-normaledit").setAttribute("colspan",i+""),e.querySelector(".e-normaledit").setAttribute("colspan",""+this.parent.getFrozenRightColumnsCount())}"auto"===this.parent.height&&this.parent.notify(sd,{})}}renderFrozenRightForm(e,t){const i=e.cloneNode(!0),s=t.frozenRightForm=i.querySelector("form");return this.parent.editSettings.template?(s.innerHTML="",this.appendChildren(s,t.rowData,!1),i):(this.renderRightFrozen(e,i),i.querySelector(np).innerHTML=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(np).innerHTML,i)}renderMovableform(e,t){const i=e.cloneNode(!0),s=t.movableForm=i.querySelector("form");return this.parent.editSettings.template?(s.innerHTML="",this.appendChildren(s,t.rowData,!1),i):(this.renderMovable(e,i),i.querySelector(np).innerHTML=this.parent.getHeaderContent().querySelector("."+Wd).querySelector(np).innerHTML,i)}updateFreezeEdit(e,t){return t=t.concat([].slice.call(this.getFreezeRow(e).querySelectorAll("td.e-rowcell"))),this.parent.getFrozenMode()===Jd&&(t=t.concat([].slice.call(this.getFreezeRightRow(e).querySelectorAll("td.e-rowcell")))),t}getFreezeRightRow(e){const t=parseInt(e.getAttribute(ip),10),i=this.parent.getFrozenLeftContentTbody(),s=this.parent.getFrozenHeaderTbody(),n=this.parent.getFrozenRightHeaderTbody(),o=this.parent.getFrozenRightContentTbody();return i.contains(e)||s.contains(e)?this.parent.getFrozenRightRowByIndex(t):o.contains(e)||n.contains(e)?this.parent.getRowByIndex(t):e}getFreezeRow(e){if(this.parent.isFrozenGrid()){const t=parseInt(e.getAttribute(ip),10),i=this.parent.getFrozenLeftContentTbody(),s=this.parent.getMovableContentTbody(),n=this.parent.getFrozenHeaderTbody(),o=this.parent.getMovableHeaderTbody();if(i.contains(e)||n.contains(e))return this.parent.getMovableRowByIndex(t);if(s.contains(e)||o.contains(e))return this.parent.getRowByIndex(t)}return e}update(e,t){this.isEdit=!0;const i=t.isCustomFormValidation,s=t.isScroll;s||!Zt(t.row,"."+jd)&&!Zt(t.row,"."+Wd)||(t.row=this.getFreezeRow(t.row)),(Zt(t.row,".e-frozen-right-content")||Zt(t.row,".e-frozen-right-header"))&&(t.row=this.getFreezeRightRow(t.row));const n=this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&s;let o=[].slice.call(t.row.querySelectorAll("td.e-rowcell"));t.row.innerHTML="",n||i||(o=this.updateFreezeEdit(t.row,o)),t.row.appendChild(this.getEditElement(e,!0,o,t,!0)),t.row.classList.add(Qd),this.parent.editModule.checkLastRow(t.row,t),n||i||this.refreshFreezeEdit(t.row,t)}refreshFreezeEdit(e,t){const i=e.firstChild;let s,n;this.parent.getVisibleFrozenColumns()&&this.parent.editSettings.template&&(i.querySelector(np).innerHTML=this.parent.getHeaderContent().querySelector("."+_d).querySelector(np).innerHTML);const o=parseInt(e.getAttribute(ip),10);if(this.parent.isFrozenGrid()){o<this.parent.frozenRows?(n=this.parent.getHeaderContent(),s="."+_d):(n=this.parent.getContent(),s="."+Gd);const r=i.cloneNode(!0),l=i.cloneNode(!0),a=t.movableForm=r.querySelector("form");let h,c;this.parent.editSettings.template&&this.refreshEditForm(a,t.rowData),n.querySelector(s).contains(e)?(h=this.parent.getMovableRowByIndex(o),this.updateFrozenCont(h,i,r),this.parent.getFrozenMode()===Jd&&(t.frozenRightForm=l.querySelector("form"),this.refreshEditForm(t.frozenRightForm,t.rowData),c=this.parent.getFrozenRightRowByIndex(o),this.updateFrozenRightCont(c,i,l))):(h=this.parent.getRowByIndex(o),this.updateFrozenCont(h,r,i),this.parent.getFrozenMode()===Jd&&(t.frozenRightForm=l.querySelector("form"),this.refreshEditForm(t.frozenRightForm,t.rowData),c=this.parent.getFrozenRightRowByIndex(o),this.updateFrozenRightCont(c,l,i))),h.appendChild(r),h.classList.add(Qd),this.parent.getFrozenMode()===Jd&&(c.appendChild(l),c.classList.add(Qd),rm(t.frozenRightForm.querySelector("td:not(.e-hide)"),t.form.querySelector("td:not(.e-hide)"))),rm(t.movableForm.querySelector("td:not(.e-hide)"),t.form.querySelector("td:not(.e-hide)"))}}refreshEditForm(e,t){this.parent.editSettings.template&&(e.innerHTML="",this.appendChildren(e,t,!1))}updateFrozenRightCont(e,t,i){e.innerHTML="",this.renderRightFrozen(t,i),i.querySelector(np).innerHTML=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(np).innerHTML,t.setAttribute("colspan",this.parent.getVisibleFrozenColumns()-this.parent.getFrozenRightColumnsCount()+""),i.setAttribute("colspan",this.parent.getFrozenRightColumnsCount()+"")}updateFrozenCont(e,t,i){e.innerHTML="",this.renderMovable(t,i),i.querySelector(np).innerHTML=this.parent.getHeaderContent().querySelector("."+Wd).querySelector(np).innerHTML,t.setAttribute("colspan",this.parent.getVisibleFrozenColumns()+""),i.setAttribute("colspan",this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length-this.parent.getVisibleFrozenColumns()+"")}renderRightFrozen(e,t){t.querySelector("tr").innerHTML="";const i=this.parent.getColumns();let s=0;for(let n=0;n<i.length;n++,s++)if(i[n].getFreezeTableName()===Zd){const i=s-this.parent.getMovableColumnsCount();t.querySelector("tr").appendChild(e.querySelector("tr").removeChild(e.querySelector("tr").children[i])),s--}}renderMovable(e,t){t.querySelector("tr").innerHTML="";const i=this.parent.getColumns();let s=0;for(let n=0;n<i.length;n++,s++)"movable"===i[n].getFreezeTableName()&&(t.querySelector("tr").appendChild(e.querySelector("tr").removeChild(e.querySelector("tr").children[s])),s--)}getEditElement(e,t,i,s,n){const o=this.parent;let r=0;const l=qe(o.detailTemplate)&&qe(o.childGrid)?0:1;o.allowGrouping&&(r=o.groupSettings.columns.length);const a=this.parent.createElement("td",{className:"e-editcell e-normaledit",attrs:{colspan:(o.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length-o.getVisibleFrozenColumns()+this.parent.getIndentCount()).toString()}}),h=s.form=this.parent.createElement("form",{id:o.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template)return this.appendChildren(h,s.rowData,n),a.appendChild(h),a;const c=this.parent.createElement("table",{className:"e-table e-inline-edit",attrs:{cellspacing:"0.25"}});c.appendChild(o.getContentTable().querySelector(np).cloneNode(!0));const d=this.parent.createElement(sp),p=this.parent.createElement("tr");let u=0;for(l&&p.insertBefore(this.parent.createElement("td",{className:"e-detailrowcollapse"}),p.firstChild),o.isRowDragable()&&p.appendChild(this.parent.createElement("td",{className:"e-dragindentcell"}));u<r;)p.appendChild(this.parent.createElement("td",{className:"e-indentcell"})),u++;let m=0;u=0;const g=o.isFrozenGrid()&&o.enableColumnVirtualization&&s.isScroll,f=s.isCustomFormValidation?this.parent.columnModel:o.getColumns();for(;t&&m<i.length&&u<f.length||u<f.length;){const n=t?i[m].getAttribute("colspan"):null,o=f[u];if(g&&"movable"!==o.getFreezeTableName()||s.isCustomFormValidation&&(o.commands||o.commandsTemplate||!o.field)){u++;continue}const r=this.parent.createElement("td",{className:Hd,attrs:{style:"text-align:"+(o.textAlign?o.textAlign:""),colspan:n||""}});o.visible?(r.appendChild(e[o.uid]),"Vertical"===this.parent.rowRenderingMode&&(Du(r,{"data-cell":o.headerText}),0===u&&r.classList.add("e-responsive-editcell")),"booleanedit"===o.editType?r.classList.add("e-boolcell"):(o.commands||o.commandsTemplate)&&Vt([r],"e-unboundcell")):r.classList.add("e-hide"),p.appendChild(r),u=n?u+parseInt(n,10):u+1,m++}return d.appendChild(p),c.appendChild(d),h.appendChild(c),a.appendChild(h),a}removeEventListener(){}appendChildren(e,t,i){const s=Ve({},t,{isAdd:!this.isEdit,isFrozen:i},!0),n=this.parent.element.id+"editSettingsTemplate";this.parent.isReact&&"string"!=typeof this.parent.editSettings.template?(this.parent.getEditTemplate()(s,this.parent,"editSettingsTemplate",n,null,null,e),this.parent.renderTemplates()):Pu(e,this.parent.getEditTemplate()(s,this.parent,"editSettingsTemplate",n))}}class Dm{constructor(e){this.parent=e}update(e,t){if(this.parent.isReact&&t.columnObject&&t.columnObject.template){const e=t.cell.parentElement,i=t.cell.cloneNode(!0);e.insertBefore(i,t.cell),i.focus(),t.cell.remove(),t.cell=i}t.cell.innerHTML="",t.cell.appendChild(this.getEditElement(e,t)),t.cell.classList.remove("e-ellipsistooltip"),t.cell.classList.add("e-editedbatchcell"),ti(t.row,[Qd,"e-batchrow"],[])}getEditElement(e,t){const i=this.parent.createElement("form",{id:this.parent.element.id+"EditForm",className:"e-gridform"});return i.appendChild(e[t.columnObject.uid]),"booleanedit"===t.columnObject.editType&&t.cell.classList.add("e-boolcell"),t.columnObject.editType||t.cell.classList.add("e-inputbox"),i}removeEventListener(){}}class Tm{constructor(e,t){this.parent=e,this.serviceLocator=t,this.parent.isDestroyed||(this.parent.on(Gc,this.destroy,this),this.parent.on(Ic,this.destroy,this))}setLocaleObj(){this.l10n=this.serviceLocator.getService("localization")}addNew(e,t){this.isEdit=!1,this.createDialog(e,t)}update(e,t){this.isEdit=!0,this.createDialog(e,t)}createDialogHeader(e){const t=this.parent;let i;if(this.parent.enableAdaptiveUI){const t=new Lp(this.parent,this.serviceLocator);return t.action=this.isEdit?Ad.isEdit:Ad.isAdd,t.renderResponsiveHeader(void 0,e)}return i=t.editSettings.headerTemplate?this.getDialogEditTemplateElement("HeaderTemplate",e):this.isEdit?this.l10n.getConstant("EditFormTitle")+e.primaryKeyValue[0]:this.l10n.getConstant("AddFormTitle"),i}createDialog(e,t){const i=this.parent;var s;this.dialog=this.parent.createElement("div",{id:i.element.id+"_dialogEdit_wrapper",styles:"width: auto"}),i.enableAdaptiveUI&&this.dialog.classList.add("e-responsive-dialog"),this.dialog.setAttribute("aria-label","Dialog edit"),i.element.appendChild(this.dialog),this.setLocaleObj(),this.dialogObj=new $o(Ve({header:this.createDialogHeader(t),isModal:!0,visible:!0,cssClass:"e-edit-dialog",content:this.getEditElement(e,t),showCloseIcon:!0,allowDragging:!0,close:this.dialogClose.bind(this),created:this.dialogCreated.bind(this),closeOnEscape:!0,width:i.editSettings.template?"auto":"330px",target:t.target?t.target:document.body,animationSettings:{effect:"None"},footerTemplate:i.editSettings.footerTemplate?this.getDialogEditTemplateElement("FooterTemplate",t):null,buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.l10n.getConstant("SaveButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}]},i.editSettings.dialog&&i.editSettings.dialog.params||{})),t.dialog=this.dialogObj,this.dialogObj.isStringTemplate=!0,this.renderResponsiveDialog(),this.dialogObj.appendTo(this.dialog),s=this.dialogObj.element.parentElement,this.parent.element.classList.contains("e-bigger")&&s.classList.add("e-bigger"),i.enableAdaptiveUI&&this.dialogObj.show(!0)}dialogCreated(){ym(this.parent)}renderResponsiveDialog(){this.parent.enableAdaptiveUI&&(this.parent.adaptiveDlgTarget&&(this.dialogObj.target=this.parent.adaptiveDlgTarget),this.dialogObj.buttons=[{}],this.dialogObj.showCloseIcon=!0,this.dialogObj.visible=!1,this.dialogObj.width="100%",this.dialogObj.open=()=>{this.dialogObj.element.style.maxHeight="100%"})}btnClick(e){this.l10n.getConstant("CancelButton").toLowerCase()===e.target.innerText.trim().toLowerCase()?this.dialogClose():this.parent.endEdit()}dialogClose(){this.parent.closeEdit()}destroy(e){const t=["template","headerTemplate","footerTemplate"];for(let i=0;i<t.length;i++)this.parent.editSettings[t[i]]&&(t[i].charAt(0).toUpperCase(),t[i].slice(1));this.parent.notify(Kc,{}),this.parent.isEdit=!1,this.parent.notify(Hc,{}),this.dialog&&!this.dialogObj.isDestroyed&&(this.dialogObj.destroy(),Yt(this.dialog))}getDialogEditTemplateElement(e,t){const i=this.parent.createElement("div",{className:"e-dialog"+e}),s=Ve({},t.rowData,{isAdd:!this.isEdit},!0),n=this.parent.element.id+"editSettings"+e;return Pu(i,("HeaderTemplate"===e?this.parent.getEditHeaderTemplate():this.parent.getEditFooterTemplate())(s,this.parent,"editSettings"+e,n)),i}getEditElement(e,t){const i=this.parent,s=this.parent.createElement("div",{className:this.isEdit?Qd:"e-insertedrow"}),n=t.form=this.parent.createElement("form",{id:i.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template){const e=this.parent.element.id+"editSettingsTemplate",i=Ve({},t.rowData,{isAdd:!this.isEdit},!0);return this.parent.isReact&&"string"!=typeof this.parent.editSettings.template?(this.parent.getEditTemplate()(i,this.parent,"editSettingsTemplate",e,null,null,n),this.parent.renderTemplates()):Pu(n,this.parent.getEditTemplate()(i,this.parent,"editSettingsTemplate",e)),s.appendChild(n),s}const o=this.parent.createElement("table",{className:Kd,attrs:{cellspacing:"6px"}}),r=this.parent.createElement(sp),l=i.getColumns();for(let a=0;a<l.length;a++){if(this.parent.editModule.checkColumnIsGrouped(l[a])||l[a].commands||l[a].commandsTemplate||"checkbox"===l[a].type)continue;const t=this.parent.createElement("tr"),i=this.parent.createElement("td",{className:Hd,attrs:{style:"text-align:"+(this.parent.enableRtl?"right":"left")+";width:190px"}});e[l[a].uid].classList.remove("e-input"),i.appendChild(e[l[a].uid]),t.appendChild(i),r.appendChild(t)}return o.appendChild(r),n.appendChild(o),s.appendChild(n),s}removeEventListener(){this.parent.isDestroyed||(this.parent.off(Gc,this.destroy),this.parent.off(Ic,this.destroy))}}class Mm{constructor(e,t){this.editType={Inline:Rm,Normal:Rm,Batch:Dm,Dialog:Tm},this.parent=e,this.serviceLocator=t,this.renderer=new this.editType[this.parent.editSettings.mode](e,t),this.focus=t.getService("focus")}addNew(e){this.renderer.addNew(this.getEditElements(e),e),this.convertWidget(e)}update(e){this.renderer.update(this.getEditElements(e),e),e.isCustomFormValidation||(this.parent.notify("edit-form",e),this.convertWidget(e))}convertWidget(e){const t=this.parent;let i,s,n,o,r;const l=t.isFrozenGrid(),a="Right"===t.getFrozenMode()&&"Normal"===t.editSettings.mode?1:0,h="Dialog"===t.editSettings.mode?Qt("#"+t.element.id+"_dialogEdit_wrapper .e-gridform",document):t.element.getElementsByClassName("e-gridform")[a],c=l&&this.parent.enableColumnVirtualization&&e.isScroll;if(l&&"Normal"===t.editSettings.mode){const i=parseInt(e.row.getAttribute(ip),10);t.frozenRows&&("add"===e.requestType&&"Top"===t.editSettings.newRowPosition||i<t.frozenRows)?(o=t.element.querySelector("."+Wd).querySelector(".e-gridform"),this.parent.getFrozenMode()===Jd&&(r=e.frozenRightForm)):(o=t.element.querySelector("."+jd).querySelector(".e-gridform"),this.parent.getFrozenMode()===Jd&&(r=e.frozenRightForm))}const d="Batch"!==t.editSettings.mode?t.getColumns():[t.getColumnByField(e.columnName)];for(const p of d){if(c&&"movable"!==p.getFreezeTableName())continue;if(this.parent.editSettings.template&&!qe(p.field)){const t=Ve({},e);t.element=h.querySelector("[name="+Vu(p.field)+"]"),qe(t.element)&&l&&(t.element=o.querySelector("[name="+Vu(p.field)+"]")),"string"==typeof p.edit.write?em(p.edit.write,window)(t):p.edit.write(t);continue}if(this.parent.editModule.checkColumnIsGrouped(p)||p.commands)continue;n=p.valueAccessor(p.field,e.rowData,p),s="movable"===p.getFreezeTableName()&&"Normal"===t.editSettings.mode?o.querySelector("[e-mappinguid="+p.uid+"]"):r&&p.getFreezeTableName()===Zd&&"Normal"===t.editSettings.mode?r.querySelector("[e-mappinguid="+p.uid+"]"):h.querySelector("[e-mappinguid="+p.uid+"]");let a=p.edit.write;qe(s)||("string"==typeof a?(a=em(a,window),a({rowData:e.rowData,element:s,column:p,requestType:e.requestType,row:e.row,foreignKeyData:p.isForeignColumn()&&em(p.field,e.foreignKeyData)})):p.edit.write({rowData:e.rowData,element:s,column:p,requestType:e.requestType,row:e.row,foreignKeyData:p.isForeignColumn()&&em(p.field,e.foreignKeyData)}),i||s.getAttribute("disabled")||ku(s,"e-checkbox-disabled")||(this.focusElement(s,e.type),i=!0))}if(l&&!this.parent.allowTextWrap&&("add"===e.requestType||"beginEdit"===e.requestType)&&"Dialog"!==this.parent.editSettings.mode&&!qe(h)&&!qe(o)){const e=o.querySelector("tr").children[0],t=h.querySelector("tr").children[0];t.offsetHeight>e.offsetHeight?(e.style.height=t.offsetHeight+"px",r&&(o.querySelector("tr").children[0].style.height=t.offsetHeight+"px")):(t.style.height=e.offsetHeight+"px",r&&(o.querySelector("tr").children[0].style.height=e.offsetHeight+"px"))}}focusElement(e,t){const i=this.parent.element.querySelector(".e-edit-checkselect");qe(i)||i.nextElementSibling.classList.add("e-focus"),"Batch"===this.parent.editSettings.mode?this.focus.onClick({target:Zt(e,"td")},!0):!this.parent.enableVirtualization||"Normal"!==this.parent.editSettings.mode||this.parent.enableVirtualization&&"Bottom"===this.parent.editSettings.newRowPosition&&ku(e,$d)?e.focus():e.focus({preventScroll:!0}),e.classList.contains("e-defaultcell")&&e.setSelectionRange(e.value.length,e.value.length)}getEditElements(e){const t=this.parent,i={};let s="Batch"!==t.editSettings.mode?t.getColumns():[t.getColumnByField(e.columnName)];if(e.isCustomFormValidation&&(s=this.parent.columnModel),this.parent.editSettings.template)return{};const n=t.isFrozenGrid()&&t.enableColumnVirtualization&&e.isScroll;for(let o=0,r=s.length;o<r;o++){const r=s[o];if(this.parent.editModule.checkColumnIsGrouped(r)||n&&"movable"!==s[o].getFreezeTableName()||e.isCustomFormValidation&&(r.commands||r.commandsTemplate||!r.field))continue;if(r.commands||r.commandsTemplate){const t=this.serviceLocator.getService("cellRendererFactory"),s=new cp(this.parent),n=t.getCellRenderer(kd.CommandColumn),l=s.generateRows(e.rowData)[0].cells.filter(e=>e.rowID),a=n.render(l[o],e.rowData,{index:e.row?e.row.getAttribute(ip):0},this.parent.enableVirtualization),h=a.firstElementChild;h.setAttribute("textAlign",a.getAttribute("textAlign")),i[r.uid]=h;continue}const l=r.valueAccessor(r.field,e.rowData,r),a={column:r,value:l,type:e.requestType,data:e.rowData};let h,c=r.edit.create;if(r.editTemplate){h=this.parent.createElement("span",{attrs:{"e-mappinguid":r.uid}});const t=this.parent.element.id+r.uid+"editTemplate",i=im({},e.rowData,{column:r});this.parent.isReact&&"string"!=typeof r.editTemplate?(r.getEditTemplate()(Ve({index:e.rowIndex},i),this.parent,"editTemplate",t,null,null,h),this.parent.renderTemplates()):Pu(h,r.getEditTemplate()(Ve({index:e.rowIndex},i),this.parent,"editTemplate",t))}else{if("string"==typeof c?(c=em(c,window),h=c(a)):h=r.edit.create(a),"string"==typeof h){const e=this.parent.createElement("div");e.innerHTML=h,h=e.firstChild}const i="input"!==h.tagName&&h.querySelectorAll("input").length,s=Vu(r.field);Xt(i?h.querySelector("input"):h,{name:s,"e-mappinguid":r.uid,id:t.element.id+s}),ti(h,["e-input","e-field"],[]),"Right"===r.textAlign&&h.classList.add("e-ralign"),((r.isPrimaryKey||r.isIdentity)&&"beginEdit"===e.requestType||r.isIdentity&&"add"===e.requestType)&&h.setAttribute("disabled","")}i[r.uid]=h}return i}destroy(){this.renderer.removeEventListener()}}class Im{constructor(e){this.parent=e}create(e){return wm(this.parent,e.column,"e-field",{type:"text"})}read(e){return e.ej2_instances[0].value}destroy(){this.obj&&!this.obj.isDestroyed&&(this.removeEventHandler&&this.removeEventHandler(),this.obj.destroy())}}class km extends Im{constructor(){super(...arguments),this.activeClasses=["e-selectionbackground","e-active"]}create(e){let t="e-field e-boolcell";return"checkbox"===e.column.type&&(t="e-field e-boolcell e-edit-checkselect"),this.removeEventHandler=this.removeEventListener,wm(this.parent,e.column,t,{type:"checkbox",value:e.value})}read(e){return e.checked}write(e){let t,i;if(qe(e.row)||(t=e.row.querySelector(".e-edit-checkselect")),em(e.column.field,e.rowData)&&(i=JSON.parse(em(e.column.field,e.rowData).toString().toLowerCase())),!qe(t)&&"checkbox"===e.column.type){if(this.editType=this.parent.editSettings.mode,this.editRow=e.row,"add"!==e.requestType){const t=this.parent.getRowObjectFromUID(e.row.getAttribute("data-uid"));i=!!t&&t.isSelected}_u([].slice.call(e.row.getElementsByClassName(Hd)),i,...this.activeClasses)}this.obj=new _s.b(Ve({label:"Dialog"!==this.parent.editSettings.mode?" ":e.column.headerText,checked:i,disabled:!ju(e.column,e.requestType,e.element),enableRtl:this.parent.enableRtl},e.column.edit.params)),this.addEventListener(),this.obj.appendTo(e.element)}addEventListener(){this.cbChange=this.checkBoxChange.bind(this),this.obj.addEventListener(rp,this.cbChange)}removeEventListener(){this.obj.isDestroyed||this.obj.removeEventListener(rp,this.cbChange)}checkBoxChange(e){if(this.editRow&&"Dialog"!==this.editType){let t=!1;e.checked?(t=!0,this.editRow.setAttribute("aria-selected",t.toString())):this.editRow.removeAttribute("aria-selected"),_u([].slice.call(this.editRow.getElementsByClassName(Hd)),t,...this.activeClasses)}}}class Fm extends Im{constructor(e){super(),this.parent=e,this.flag=!1,this.removeEventHandler=this.removeEventListener}write(e){const t="Dialog"!==this.parent.editSettings.mode;this.column=e.column;const i=new Gs.d(e.column.field,"notequal",null,!0,!1),s={};if(e.column.edit.params){const t=Object.keys(e.column.edit.params);for(let i=0;i<t.length;i++)s[t[i]]="query"===t[i]?e.column.edit.params[t[i]].clone():e.column.edit.params[t[i]]}this.obj=new Ba(Ve({dataSource:this.parent.dataSource instanceof Gs.a?this.parent.dataSource:new Gs.a(this.parent.dataSource),query:(new Gs.e).where(i).select(e.column.field),enabled:ju(e.column,e.requestType,e.element),fields:{value:e.column.field},value:em(e.column.field,e.rowData),enableRtl:this.parent.enableRtl,placeholder:t?"":e.column.headerText,popupHeight:"200px",floatLabelType:t?"Never":"Always",sortOrder:"Ascending"},s)),this.parent.enableVirtualization&&(this.obj.dataSource=[e.rowData]),this.addEventListener(),this.obj.query.params=this.parent.query.params,this.obj.appendTo(e.element),e.element.setAttribute("name",Vu(e.column.field))}addEventListener(){this.ddCreated=this.dropdownCreated.bind(this),this.ddOpen=this.dropDownOpen.bind(this),this.ddBeforeOpen=this.dropdownBeforeOpen.bind(this),this.ddComplete=this.ddActionComplete.bind(this),this.obj.addEventListener(lp,this.ddCreated),this.obj.addEventListener(op,this.ddOpen),this.obj.addEventListener(ap,this.ddBeforeOpen),this.obj.addEventListener(_h,this.ddComplete)}removeEventListener(){this.obj.isDestroyed||(this.obj.removeEventListener(lp,this.ddCreated),this.obj.removeEventListener(op,this.ddOpen),this.obj.removeEventListener(ap,this.ddBeforeOpen),this.obj.removeEventListener(_h,this.ddComplete))}dropdownCreated(e){this.flag=!0}dropdownBeforeOpen(){this.parent.enableVirtualization&&(this.obj.dataSource=this.parent.dataSource instanceof Gs.a?this.parent.dataSource:new Gs.a(this.parent.dataSource))}ddActionComplete(e){e.result=Gs.b.distinct(e.result,this.obj.fields.value,!0),this.flag&&this.column.dataSource&&("result"in this.column.dataSource?this.column.dataSource.result=e.result:this.column.dataSource instanceof Gs.a&&(this.column.dataSource.dataSource.json=e.result)),this.flag=!1}dropDownOpen(e){const t=ku(this.obj.element,"e-dialog");if("Dialog"===this.parent.editSettings.mode&&!qe(t)){const i=Qt("#"+t.id,document).ej2_instances[0];e.popup.element.style.zIndex=(i.zIndex+1).toString()}}}class Am{constructor(e){this.parent=e}keyEventHandler(e){if(13===e.keyCode||9===e.keyCode){const e=document.createEvent("HTMLEvents");e.initEvent("change",!1,!0),this.dispatchEvent(e)}}create(e){return this.instances=new St(this.parent.locale),wm(this.parent,e.column,"e-field",{})}read(e){return this.obj.value}write(e){const t=e.column,i="Dialog"!==this.parent.editSettings.mode;this.obj=new al(Ve({value:parseFloat(em(e.column.field,e.rowData)),enableRtl:this.parent.enableRtl,placeholder:i?"":e.column.headerText,enabled:ju(e.column,e.requestType,e.element),floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",locale:this.parent.locale},t.edit.params)),e.element.setAttribute("name",Vu(e.column.field)),this.obj.appendTo(e.element),this.obj.element.addEventListener("keydown",this.keyEventHandler)}destroy(){this.obj&&!this.obj.isDestroyed&&(this.obj.element.removeEventListener("keydown",this.keyEventHandler),this.obj.destroy())}}class Om extends Im{create(e){const t={type:"text",value:qe(e.value)?"":e.value,style:"text-align:"+e.column.textAlign};return wm(this.parent,e.column,"e-field e-input e-defaultcell",t)}read(e){return e.value}write(e){const t=e.column,i="Dialog"!==this.parent.editSettings.mode;this.obj=new bl(Ve({element:e.element,floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",enableRtl:this.parent.enableRtl,enabled:ju(e.column,e.requestType,e.element),placeholder:i?"":e.column.headerText},t.edit.params)),this.obj.appendTo(e.element)}}class Lm{constructor(e,t,i){this.args={},this.currentVirtualData={},this.parent=e,this.renderer=i,this.serviceLocator=t,this.addEventListener()}clickHandler(e){const t=e.target,i=this.parent;(ku(t,Nd)&&ku(ku(t,Nd),"e-grid").id===i.element.id||i.frozenRows&&ku(t,qd))&&!ku(t,"e-unboundcelldiv")&&(this.rowIndex=ku(t,Hd)?parseInt(t.parentElement.getAttribute(ip),10):-1,i.isEdit&&i.editModule.endEdit())}dblClickHandler(e){ku(e.target,Hd)&&this.parent.editSettings.allowEditOnDblClick&&this.parent.editModule.startEdit(ku(e.target,Yd))}editComplete(e){switch(this.parent.isEdit=!1,e.requestType){case"save":(this.parent.isCheckBoxSelection||"Multiple"===this.parent.selectionSettings.type)&&this.parent.isPersistSelection||"edit"!==e.action&&this.parent.selectRow(0),this.parent.trigger(_h,Ve(e,{requestType:"save",type:_h}));break;case"delete":this.parent.trigger(_h,Ve(e,{requestType:"delete",type:_h})),this.parent.isCheckBoxSelection||this.parent.selectRow(this.editRowIndex)}}getEditArgs(e,t,i){const s=this.parent.getPrimaryKeyFieldNames(),n=[];for(let o=0;o<s.length;o++)n.push(em(s[o],e));return{primaryKey:s,primaryKeyValue:n,requestType:"beginEdit",rowData:e,rowIndex:this.rowIndex,type:"edit",cancel:!1,foreignKeyData:t&&t.foreignKeyData,target:void 0,isScroll:i}}startEdit(e){const t=this.parent;if(this.rowIndex=this.editRowIndex=parseInt(e.getAttribute(ip),10),(t.enableVirtualization||t.enableInfiniteScrolling)&&!this.parent.element.querySelector('.e-row[aria-rowindex="'+this.rowIndex+'"]'))return;const i={data:void 0,index:this.rowIndex,isScroll:!1};if(this.parent.notify("virtual-scroll-edit-action-begin",i),Zu(t)){const i=t.getRowObjectFromUID(e.getAttribute("data-uid"));this.previousData=i.data}else this.previousData||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling?this.parent.enableVirtualization||(this.previousData=Ve({},{},t.getCurrentViewRecords()[this.rowIndex],!0)):this.previousData=i.data;const s=Ve({},{},i.data||this.previousData,!0);this.uid=e.getAttribute("data-uid");const n=t.getRowObjectFromUID(this.uid),o=this.getEditArgs(s,n,i.isScroll);o.row=e,o.isScroll?this.inlineEditHandler(o,e):(this.parent.notify(Md,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),t.trigger("beginEdit",o,i=>{i.type="actionBegin",t.trigger(Gh,i,t=>{t.cancel||this.inlineEditHandler(t,e)})}))}inlineEditHandler(e,t){const i=this.parent;i.isEdit=!0,e.row=e.row?e.row:t,"Dialog"!==i.editSettings.mode&&i.clearSelection(),"Dialog"===i.editSettings.mode&&i.selectionModule&&(i.selectionModule.preventFocus=!0,e.row.classList.add("e-dlgeditrow")),this.renderer.update(e),this.uid=t.getAttribute("data-uid"),i.editModule.applyFormValidation(),e.type="actionComplete",i.trigger(_h,e),this.args=e,this.parent.allowTextWrap&&this.parent.notify(Xc,{case:"textwrap"})}updateRow(e,t){const i=this.parent;this.editRowIndex=e;const s={requestType:"save",action:"edit",type:Gh,data:t,cancel:!1,previousData:i.getCurrentViewRecords()[e],row:i.getRowByIndex(e)};i.showSpinner(),i.notify(jc,s),s.promise?s.promise.then(()=>i.refresh()).catch(e=>this.edFail(e)):i.refresh()}editFormValidate(){const e=this.parent,t=e.editModule.editFormValidate(),i={prevData:this.previousData,isValid:!0,editIdx:this.editRowIndex,addIdx:this.addedRowIndex};return e.notify("validate-virtual-form",i),t&&i.isValid}endEdit(){const e=this.parent;if(!this.parent.isEdit||!this.editFormValidate())return;let t=Ve({},{},this.previousData,!0);const i=Ve(this.args,{requestType:"save",type:Gh,data:t,cancel:!1,previousData:this.previousData,selectedRow:e.selectedRowIndex,foreignKeyData:{}}),s="Right"===e.getFrozenMode()?1:0,n="Dialog"===e.editSettings.mode,o=Qt("#"+e.element.id+"_dialogEdit_wrapper",document),r=n?o.querySelector(".e-gridform"):e.element.getElementsByClassName("e-gridform")[s],l={virtualData:Ve({},{},this.previousData,!0),isAdd:!1,isScroll:!1,endEdit:!0};if(this.parent.notify(fd,l),(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&"Normal"===this.parent.editSettings.mode&&Object.keys(l.virtualData).length?this.parent.isEdit&&(this.currentVirtualData=t=i.data=l.virtualData):t=e.editModule.getCurrentEditedData(r,t),e.isFrozenGrid()&&"Normal"===e.editSettings.mode){const i=e.getMovableVirtualHeader().querySelector(".e-gridform"),s=e.getMovableVirtualContent().querySelector(".e-gridform"),n=[i||s];let o,r,l=[];e.getFrozenMode()===Jd&&(o=e.getFrozenRightHeader().querySelector(".e-gridform"),r=e.getFrozenRightContent().querySelector(".e-gridform"),l=[o||r]),hm(this.parent,(i,s)=>{for(const n of s)n&&(t=e.editModule.getCurrentEditedData(n,t))},[[],n,l])}let a=[].slice.call(e.element.getElementsByClassName(Qd)).length;if(l.isAdd||!Object.keys(this.currentVirtualData).length||a||(a=1),n?o.getElementsByClassName(Qd).length:a)i.action="edit",e.trigger(Gh,i,t=>{t.cancel||(e.showSpinner(),e.notify(jc,t))});else if(i.action="add",i.selectedRow=0,i.index=this.addedRowIndex,e.notify(gd,{}),e.notify(vc,i),this.addedRowIndex=null,i.cancel)return}destroyElements(){const e=this.parent;e.editModule.destroyWidgets(),e.editModule.destroyForm(),this.parent.notify(Gc,{})}editHandler(e){e.promise?e.promise.then(t=>this.edSucc(t,e)).catch(e=>this.edFail(e)):this.editSuccess(e.data,e)}edSucc(e,t){this.editSuccess(e,t)}edFail(e){this.editFailure(e)}updateCurrentViewData(e){this.parent.enableVirtualization||this.parent.enableInfiniteScrolling||(this.parent.getCurrentViewRecords()[this.editRowIndex]=e)}requestSuccess(e){this.parent.editModule.formObj&&!this.parent.editModule.formObj.isDestroyed&&(this.destroyElements(),this.stopEditStatus(),"Dialog"===this.parent.editSettings.mode&&"add"!==e.action&&this.parent.selectionModule&&this.parent.element.querySelector(".e-dlgeditrow").classList.remove("e-dlgeditrow"))}editSuccess(e,t){qe(e)||e instanceof Array||(t.data=Ve({},Ve({},t.rowData,t.data),e)),this.requestSuccess(t),this.parent.trigger(hc,t),t.type=_h,this.parent.isEdit=!1,this.refreshRow(t.data),this.parent.notify(gd,t),this.parent.editModule.checkLastRow(t.row),this.parent.editModule.isLastRow=!1,this.updateCurrentViewData(t.data),this.blazorTemplate(),this.editRowIndex=null,this.parent.trigger(_h,t),(!this.parent.isCheckBoxSelection&&"Multiple"!==this.parent.selectionSettings.type||!this.parent.isPersistSelection&&!this.parent.selectionSettings.checkboxOnly)&&"Dialog"!==this.parent.editSettings.mode&&this.parent.selectRow(this.rowIndex>-1?this.rowIndex:this.editRowIndex),this.parent.hideSpinner()}closeForm(){!this.cloneRow&&this.parent.isEdit&&this.stopEditStatus(),this.cloneRow&&(this.cloneRow.remove(),this.cloneRow=null,this.originalRow.classList.remove("e-hiddenrow")),this.parent.isFrozenGrid()&&this.cloneFrozen&&(this.cloneFrozen.remove(),this.frozen.classList.remove("e-hiddenrow"))}blazorTemplate(){const e=this.parent.getColumns();for(let t=0;t<e.length;t++){}}editFailure(e){this.parent.trigger(Uh,{error:e}),this.parent.hideSpinner(),this.parent.log("actionfailure",{error:e})}needRefresh(){let e=!0;const t=this.parent.element.querySelector(".e-gridform");return!this.parent.enableVirtualization&&!this.parent.infiniteScrollSettings.enableCache||"Normal"!==this.parent.editSettings.mode||t||(e=!1),e}refreshRow(e){const t=this.parent.isFrozenGrid(),i=new hp(this.serviceLocator,null,this.parent);let s=this.parent.getRowObjectFromUID(this.uid);if(s){s.changes=e,this.parent.notify("refresh-virtual-cache",{data:e}),Xu(s,this.parent.getForeignKeyColumns(),s.changes),this.needRefresh()&&i.refresh(s,this.parent.getColumns(),!0);const n=[].slice.call(this.parent.element.querySelectorAll('[aria-rowindex="'+s.index+'"]'));if(t&&n.length)for(let t=0;t<n.length;t++){const o=n[t].getAttribute("data-uid");o!==this.uid&&(s=this.parent.getRowObjectFromUID(o),s.changes=e,i.refresh(s,this.parent.getColumns(),!0),this.parent.editModule.checkLastRow(n[t]))}}}closeEdit(){if(!this.parent.isEdit)return;const e=this.parent,t=Ve(this.args,{requestType:"cancel",type:Gh,cancel:!1,data:this.previousData,selectedRow:e.selectedRowIndex});e.notify("virtual-scroll-edit-cancel",t),this.blazorTemplate(),e.trigger(Gh,t,t=>{if(t.cancel)return;"Dialog"===this.parent.editSettings.mode&&this.parent.notify(Gc,{}),e.isEdit=!1,this.stopEditStatus(),t.type=_h,"Dialog"!==e.editSettings.mode&&this.refreshRow(t.data);const i=e.groupSettings.enableLazyLoading&&e.groupSettings.columns.length&&!e.getContentTable().querySelector("tr.e-emptyrow");e.getContentTable().querySelector("tr.e-emptyrow")||e.getContentTable().querySelector("tr.e-row")||i||e.renderModule.emptyRow(),"Dialog"!==e.editSettings.mode&&e.selectRow(this.rowIndex),e.trigger(_h,t)})}addRecord(e,t){const i=this.parent;if(this.addedRowIndex=t=qe(t)?0:t,e)return void i.notify(vc,{requestType:"save",type:Gh,data:e,selectedRow:0,action:"add",index:t});if(i.isEdit)return;this.previousData={},this.uid="";const s=i.getColumns(),n={virtualData:{},isScroll:!1};this.parent.notify(fd,n);for(let r=0;r<s.length;r++)n.isScroll&&"movable"!==s[r].getFreezeTableName()||s[r].field&&Gs.b.setValue(s[r].field,s[r].defaultValue,this.previousData);const o={cancel:!1,foreignKeyData:{},requestType:"add",data:this.previousData,type:Gh,index:t,rowData:this.previousData,target:void 0,isScroll:n.isScroll};(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&Object.keys(n.virtualData).length&&(o.data=o.rowData=n.virtualData),o.isScroll?this.inlineAddHandler(o):(this.parent.notify(Md,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),i.trigger(Gh,o,e=>{e.cancel||this.inlineAddHandler(e)}))}inlineAddHandler(e){const t=this.parent;t.isEdit=!0,"Dialog"!==t.editSettings.mode&&t.clearSelection(),this.renderer.addNew(e),t.editModule.applyFormValidation(),e.type=_h,e.row=t.element.querySelector("."+$d),t.trigger(_h,e),this.args=e}deleteRecord(e,t){if(this.editRowIndex=this.parent.selectedRowIndex,t){t=t instanceof Array?t:[t];const i=this.parent,s=Object.keys(t).length;e=e||this.parent.getPrimaryKeyFieldNames()[0];for(let n=0;n<s;n++){let s;const o=i.currentViewData.some(i=>(s=i,t[n]===em(e,i)||t[n]===i));t[n]=o?s:t[n][e]?t[n]:{[e]:t[n]}}}const i={requestType:"delete",type:Gh,foreignKeyData:{},data:t||this.parent.getSelectedRecords(),tr:this.parent.getSelectedRows(),cancel:!1};if(qe(this.parent.commandDelIndex)||(i.data[0]=this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute("data-uid")).data),this.parent.enableVirtualization&&i.data.length>1){const e=this.parent.getSelectedRows()[0].getAttribute("data-uid");i.data=[this.parent.getRowObjectFromUID(e).data]}this.parent.notify(vc,i)}stopEditStatus(){const e=this.parent,t=[].slice.call(e.element.getElementsByClassName($d)),i=[].slice.call(e.element.getElementsByClassName(Qd));for(let s=0;s<t.length;s++)Yt(t[s]);for(let s=0;s<i.length;s++)i[s].classList.remove(Qd)}addEventListener(){this.parent.isDestroyed||(this.evtHandlers=[{event:_c,handler:this.editHandler},{event:Yc,handler:this.dblClickHandler},{event:Mc,handler:this.clickHandler},{event:od,handler:this.requestSuccess},{event:Bc,handler:this.dblClickHandler},{event:"delete-complete",handler:this.editComplete},{event:"save-complete",handler:this.editComplete},{event:Rd,handler:this.closeEdit},{event:"closeinline",handler:this.closeForm}],Cm(this.parent,this.evtHandlers,!0,this))}removeEventListener(){this.parent.isDestroyed||Cm(this.parent,this.evtHandlers,!1)}destroy(){this.removeEventListener(),this.renderer.destroy()}}class Pm extends Lm{constructor(e,t,i){super(e,t),this.parent=e,this.serviceLocator=t,this.renderer=i}closeEdit(){super.closeEdit()}addRecord(e,t){super.addRecord(e,t)}endEdit(){super.endEdit()}updateRow(e,t){super.updateRow(e,t)}deleteRecord(e,t){super.deleteRecord(e,t)}startEdit(e){super.startEdit(e)}}class zm{constructor(e,t,i){this.cellDetails={},this.originalCell={},this.cloneCell={},this.editNext=!1,this.preventSaveCell=!1,this.parent=e,this.serviceLocator=t,this.renderer=i,this.focus=t.getService("focus"),this.addEventListener()}addEventListener(){this.parent.isDestroyed||(this.evtHandlers=[{event:Mc,handler:this.clickHandler},{event:Bc,handler:this.dblClickHandler},{event:Rc,handler:this.onBeforeCellFocused},{event:Dc,handler:this.onCellFocused},{event:Yc,handler:this.dblClickHandler},{event:Tc,handler:this.keyDownHandler},{event:ld,handler:this.editNextValCell},{event:"closebatch",handler:this.closeForm},{event:Ic,handler:this.destroy}],Cm(this.parent,this.evtHandlers,!0,this),this.dataBoundFunction=this.dataBound.bind(this),this.batchCancelFunction=this.batchCancel.bind(this),this.parent.addEventListener(Kh,this.dataBoundFunction),this.parent.addEventListener(lc,this.batchCancelFunction))}removeEventListener(){this.parent.isDestroyed||(Cm(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(Kh,this.dataBoundFunction),this.parent.removeEventListener(lc,this.batchCancelFunction))}batchCancel(){this.parent.focusModule.restoreFocus()}dataBound(){this.parent.notify(Hc,{})}destroy(){this.removeEventListener()}clickHandler(e){ku(e.target,this.parent.element.id+"_add",!0)||(this.parent.isEdit&&Zt(this.form,"td")!==Zt(e.target,"td")&&(this.saveCell(),this.editNextValCell()),ku(e.target,Hd)&&!this.parent.isEdit&&this.setCellIdx(e.target))}dblClickHandler(e){const t=ku(e.target,Hd),i=ku(e.target,Yd),s=i&&parseInt(i.getAttribute(ip),10),n=t&&parseInt(t.getAttribute(tp),10);qe(t)||qe(s)||isNaN(n)||t.parentElement.classList.contains(Qd)||this.editCell(s,this.parent.getColumns()[n].field,this.isAddRow(s))}onBeforeCellFocused(e){this.parent.isEdit&&this.validateFormObj()&&(e.byClick||["tab","shiftTab","enter","shiftEnter"].indexOf(e.keyArgs.action)>-1)&&(e.cancel=!0,e.byClick?e.clickArgs.preventDefault():e.keyArgs.preventDefault())}onCellFocused(e){const t=this.parent.getFrozenLeftCount(),i=this.parent.getFrozenRightColumnsCount(),s=this.parent.getContent().querySelector("."+jd),n=this.parent.getHeaderContent().querySelector("."+Wd),o=!(e.container.isContent&&e.container.isDataCell||this.parent.frozenRows&&e.container.isHeader);if(!e.byKey||o)return void(this.parent.isEdit&&o&&this.saveCell());let[r,l]=e.container.indexes;if(t&&(s.contains(e.element)||this.parent.frozenRows&&n.contains(e.element))&&(l+=t),i){const i=this.parent.getHeaderContent().querySelector(".e-frozen-right-header");(this.parent.getContent().querySelector(".e-frozen-right-content").contains(e.element)||this.parent.frozenRows&&i.contains(e.element))&&(l+=t+this.parent.getMovableColumnsCount())}this.parent.frozenRows&&e.container.isContent&&(r+=this.parent.frozenRows);let a=this.parent.isEdit;if(!this.parent.element.getElementsByClassName("e-popup-open").length)switch(a=a&&!this.validateFormObj(),e.keyArgs.action){case"tab":case"shiftTab":const t=this.parent.getColumns()[e.indexes[1]];t&&!this.parent.isEdit&&this.editCell(e.indexes[0],t.field),(a||this.parent.isLastCellPrimaryKey)&&this.editCellFromIndex(r,l);break;case"enter":case"shiftEnter":e.keyArgs.preventDefault();const i={cancel:!1,keyArgs:e.keyArgs};this.parent.notify("beforeFocusCellEdit",i),!i.cancel&&a&&this.editCell(r,this.cellDetails.column.field);break;case"f2":this.editCellFromIndex(r,l),this.focus.focus()}}isAddRow(e){return this.parent.getDataRows()[e].classList.contains("e-insertedrow")}editCellFromIndex(e,t){this.cellDetails.rowIndex=e,this.cellDetails.cellIndex=t,this.editCell(e,this.parent.getColumns()[t].field,this.isAddRow(e))}closeEdit(){const e=this.parent,t=this.parent.getRowsObject(),i={cancel:!1,batchChanges:this.getBatchChanges()};if(e.notify("before-batch-cancel",i),i.cancel)return;e.isEdit&&this.saveCell(!0),this.isAdded=!1,e.clearSelection();const s=cm(this.parent);for(let o=0;o<t.length;o++){let e=!1;const i=t[o].isDirty;hm(this.parent,(t,s)=>{e=this.removeBatchElementChanges(s[o],i),e&&s.splice(o,1)},s),e&&o--}e.getContentTable().querySelector("tr.e-row")||e.renderModule.renderEmptyRow();let n={requestType:"batchCancel",rows:this.parent.getRowsObject()};e.notify(lc,{rows:this.parent.getRowsObject().length?this.parent.getRowsObject():[new Pd({isDataRow:!0,cells:[new zd({isDataCell:!0,visible:!0})]})]}),e.selectRow(this.cellDetails.rowIndex),this.refreshRowIdx(),e.notify(Hc,{}),this.parent.notify(qc,{}),n={requestType:"batchCancel",rows:this.parent.getRowsObject()},e.trigger(lc,n)}removeBatchElementChanges(e,t){const i=this.parent,s=new hp(this.serviceLocator,null,this.parent);let n=!1;if(t){e.isDirty=t;const o=i.getRowElementByUID(e.uid);if(o&&(o.classList.contains("e-insertedrow")?(Yt(o),n=!0):(Xu(e,this.parent.getForeignKeyColumns(),e.data),delete e.changes,delete e.edit,e.isDirty=!1,ti(o,[],["e-hiddenrow","e-updatedtd"]),s.refresh(e,i.getColumns(),!1)),this.parent.aggregates.length>0)){const e=[];e.type="cancel",this.parent.notify(xc,e),this.parent.groupSettings.columns.length>0&&this.parent.notify(Ec,e)}}return n}removeHideAndSelection(e){if(e.classList.contains("e-hiddenrow")){e.removeAttribute("aria-selected");const t=[].slice.call(e.getElementsByClassName("e-selectionbackground"));for(let e=0;e<t.length;e++)qt([t[e]],["e-selectionbackground","e-active"])}ti(e,[],["e-hiddenrow","e-updatedtd"])}deleteRecord(e,t){this.saveCell(),this.validateFormObj()&&this.saveCell(!0),this.isAdded=!1,this.bulkDelete(e,t),this.parent.aggregates.length>0&&(this.parent.notify(xc,{}),this.parent.groupSettings.columns.length>0&&this.parent.notify(Ec,{}))}addRecord(e){this.bulkAddRow(e)}endEdit(){this.parent.isEdit&&this.validateFormObj()||this.batchSave()}closeForm(){for(let e=0;e<Object.keys(this.originalCell).length;e++)for(let t=0;t<Object.keys(this.cloneCell).length;t++)Object.keys(this.originalCell)[e]===Object.keys(this.cloneCell)[t]&&(this.cloneCell[Object.keys(this.cloneCell)[t]].replaceWith(this.originalCell[Object.keys(this.originalCell)[e]]),this.originalCell[Object.keys(this.originalCell)[e]].classList.contains("e-selectionbackground")&&this.originalCell[Object.keys(this.originalCell)[e]].classList.remove("e-selectionbackground","e-cellselectionbackground","e-active"));this.cloneCell={},this.originalCell={}}validateFormObj(){return this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate()}batchSave(){const e=this.parent;if(e.isCheckBoxSelection){const t=e.element.querySelector(".e-checkselectall").parentElement;t.classList.contains("e-checkbox-disabled")&&e.pageSettings.totalRecordsCount>e.currentViewData.length&&qt([t],["e-checkbox-disabled"])}if(this.saveCell(),e.isEdit||this.editNextValCell()||e.isEdit)return;const t=this.getBatchChanges();"Multiple"===this.parent.selectionSettings.type&&t.deletedRecords.length&&this.parent.selectionSettings.persistSelection&&(t.deletedRecords=this.removeSelectedData,this.removeSelectedData=[]);const i={changedRecords:this.parent.getRowsObject().filter(e=>e.isDirty&&-1===["add","delete"].indexOf(e.edit)).map(e=>e.data)};e.trigger("beforeBatchSave",{batchChanges:t,cancel:!1},s=>{s.cancel||(e.showSpinner(),e.notify(Nc,{changes:t,original:i}))})}getBatchChanges(){const e={addedRecords:[],deletedRecords:[],changedRecords:[]},t=this.parent.getRowsObject();for(const i of t)if(i.isDirty)switch(i.edit){case"add":e.addedRecords.push(i.changes);break;case"delete":e.deletedRecords.push(i.data);break;default:e.changedRecords.push(i.changes)}return e}removeRowObjectFromUID(e){const t=this.parent.getRowsObject();let i=0;for(let s=t.length;i<s&&t[i].uid!==e;i++);hm(this.parent,(e,t)=>{t.splice(i,1)},cm(this.parent))}addRowObject(e){const t=this.parent,i="Top"===t.editSettings.newRowPosition;hm(this.parent,(s,n)=>{const o=e.clone();o.cells=function(e,t,i){const s=e.getFrozenLeftCount(),n=e.getMovableColumnsCount(),o=e.getFrozenRightColumnsCount(),r=e.getFrozenMode(),l=e.isRowDragable()?1:0,a="Right"===r?s+n:s+n+l,h="Right"===r?s:s+l,c="Right"===r?t.length-o-l:o?t.length-o:t.length;return i===ep?t=t.slice(0,s?s+l:t.length):i===Zd?t=t.slice(a,t.length):"movable"===i&&(t=t.slice(h,c)),t}(t,o.cells,s),i?n.unshift(o):n.push(o)},cm(this.parent),!0)}bulkDelete(e,t){this.removeSelectedData=[];const i=this.parent;let s=i.selectedRowIndex,n=i.getSelectedRows();const o={primaryKey:this.parent.getPrimaryKeyFieldNames(),rowIndex:s,rowData:t||i.getSelectedRecords()[0],cancel:!1};o.row=t?i.editModule.deleteRowUid?i.getRowElementByUID(i.editModule.deleteRowUid):i.getRows()[i.getCurrentViewRecords().indexOf(t)]:t?i.getRows()[s]:n[0],o.row&&i.trigger("beforeBatchDelete",o,e=>{if(!e.cancel){if(this.removeSelectedData=i.getSelectedRecords(),i.clearSelection(),e.row=e.row?e.row:t?i.getRows()[s]:n[0],this.parent.isFrozenGrid()){t&&(s=parseInt(e.row.getAttribute(ip),10),n=[],n.push(i.getRowByIndex(s)),n.push(i.getMovableRowByIndex(s)),i.getFrozenMode()===Jd&&n.push(i.getFrozenRightRowByIndex(s)));for(let e=0;e<n.length;e++){const t=n[e].getAttribute("data-uid");if(n[e].classList.contains("e-insertedrow"))this.removeRowObjectFromUID(t),Yt(n[e]);else{const o=i.getRowObjectFromUID(t);o.isDirty=!0,o.edit="delete",ti(n[e],["e-hiddenrow","e-updatedtd"],[]),i.frozenRows&&s<i.frozenRows&&i.getMovableDataRows().length>=i.frozenRows&&(i.getMovableHeaderTbody().appendChild(i.getMovableRowByIndex(i.frozenRows-1)),i.getFrozenHeaderTbody().appendChild(i.getRowByIndex(i.frozenRows-1)),i.getFrozenMode()===Jd&&i.getFrozenRightHeaderTbody().appendChild(i.getFrozenRightRowByIndex(i.frozenRows-1))),i.frozenRows&&s<i.frozenRows&&i.getDataRows().length>=i.frozenRows&&i.getHeaderTable().querySelector(sp).appendChild(i.getRowByIndex(i.frozenRows-1))}delete n[e]}}else if(this.parent.isFrozenGrid()||1!==n.length&&!t)for(let e=0;e<n.length;e++){const t=n[e].getAttribute("data-uid");if(n[e].classList.contains("e-insertedrow"))this.removeRowObjectFromUID(t),Yt(n[e]);else{ti(n[e],["e-hiddenrow","e-updatedtd"],[]);const s=i.getRowObjectFromUID(t);s.isDirty=!0,s.edit="delete",delete n[e]}}else{let s=e.row.getAttribute("data-uid");if(s=t&&this.parent.editModule.deleteRowUid?s=this.parent.editModule.deleteRowUid:s,e.row.classList.contains("e-insertedrow"))this.removeRowObjectFromUID(s),Yt(e.row);else{const t=i.getRowObjectFromUID(s);t.isDirty=!0,t.edit="delete",ti(e.row,["e-hiddenrow","e-updatedtd"],[])}delete e.row}this.refreshRowIdx(),t&&(i.editModule.deleteRowUid=void 0,i.getSelectedRows().length&&(s=parseInt(i.getSelectedRows()[0].getAttribute(ip),10))),i.isCheckBoxSelection||i.selectRow(s),i.trigger(ac,e),i.notify(ac,{rows:this.parent.getRowsObject()}),i.notify(Hc,{})}})}refreshRowIdx(){const e=this.parent.getAllDataRows(!0),t=["Right"!==(s=this.parent).getFrozenMode()?s.getAllDataRows(!0):[],s.getAllMovableDataRows(!0),s.getAllFrozenRightDataRows(!0)],i=cm(this.parent);var s;for(let n=0,o=0,r=e.length;n<r;n++)e[n].classList.contains(Yd)&&!e[n].classList.contains("e-hiddenrow")?(hm(this.parent,(e,t,i)=>{t[n].setAttribute(ip,o.toString()),i[n].index=o},t,null,i),o++):hm(this.parent,(e,t,i)=>{t[n].removeAttribute(ip),i[n].index=-1},t,null,i)}getIndexFromData(e){return function(e,t){for(let i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1}(e,this.parent.getCurrentViewRecords())}bulkAddRow(e){const t=this.parent;if(!t.editSettings.allowAdding)return;if(t.isEdit&&(this.saveCell(),this.parent.notify(ld,{})),t.isEdit)return;this.parent.element.classList.add("e-editing");const i={defaultData:e||this.getDefaultData(),primaryKey:t.getPrimaryKeyFieldNames(),cancel:!1};t.trigger("beforeBatchAdd",i,i=>{if(i.cancel)return;let s,n;this.isAdded=!0,t.clearSelection();const o=new hp(this.serviceLocator,null,this.parent),r=new cp(this.parent).generateRows([i.defaultData]);let l,a,h=o.render(r[0],t.getColumns());for(let e=0;e<this.parent.groupSettings.columns.length;e++)h.insertBefore(this.parent.createElement("td",{className:"e-indentcell"}),h.firstChild),r[0].cells.unshift(new zd({cellType:kd.Indent}));let c=t.getContentTable().querySelector(sp);if(h.classList.add("e-insertedrow"),c.querySelector(".e-emptyrow")){const e=c.querySelector(".e-emptyrow");e.parentNode.removeChild(e),this.removeFrozenTbody()}t.isFrozenGrid()&&(n=h.cloneNode(!0),s=this.renderMovable(h,n),h="Right"===t.getFrozenMode()?n:h,this.renderFrozenAddRow(h,s,n)),c=t.frozenRows&&"Top"===t.editSettings.newRowPosition?t.getHeaderTable().querySelector(sp):t.getContentTable().querySelector(sp),"Top"===this.parent.editSettings.newRowPosition?c.insertBefore(h,c.firstChild):c.appendChild(h),Vt([].slice.call(h.getElementsByClassName(Hd)),["e-updatedtd"]),r[0].isDirty=!0,r[0].changes=Ve({},{},r[0].data,!0),r[0].edit="add",this.addRowObject(r[0]),this.refreshRowIdx(),this.focus.forgetPrevious(),t.notify(rc,{rows:this.parent.getRowsObject(),args:{isFrozen:this.parent.isFrozenGrid()}});const d=this.getBatchChanges(),p=this.getBottomIndex();t.selectRow("Top"===this.parent.editSettings.newRowPosition?0:p),e||(a=this.findNextEditableCell(0,!0),l=t.getColumns()[a],this.editCell("Top"===this.parent.editSettings.newRowPosition?0:p,l.field,!0)),this.parent.aggregates.length>0&&(e||d.addedRecords.length)&&this.parent.notify(xc,{}),t.trigger(rc,{defaultData:i.defaultData,row:h,columnObject:l,columnIndex:a,primaryKey:i.primaryKey,cell:h.cells[a]}),t.isFrozenGrid()&&rm(s.querySelector("td:not(.e-hide)"),h.querySelector("td:not(.e-hide)"))})}renderFrozenAddRow(e,t,i){const s=this.parent,n=gm(this.parent),o=fm(this.parent);"Top"===s.editSettings.newRowPosition?n.insertBefore(t,n.firstChild):n.appendChild(t),Vt([].slice.call(t.getElementsByClassName(Hd)),["e-updatedtd"]),o&&i&&("Top"===s.editSettings.newRowPosition?o.insertBefore(i,o.firstChild):o.appendChild(i),Vt([].slice.call(i.getElementsByClassName(Hd)),["e-updatedtd"]),rm(i.querySelector("td:not(.e-hide)"),e.querySelector("td:not(.e-hide)"))),"auto"===s.height&&s.notify(sd,{})}removeFrozenTbody(){const e=this.parent;if(e.isFrozenGrid()){const t=e.getContent().querySelector("."+jd).querySelector(sp);if(t.firstElementChild.parentNode.removeChild(t.firstElementChild),e.getFrozenMode()===Jd){const t=e.getContent().querySelector(".e-frozen-right-content").querySelector(sp);t.firstElementChild.parentNode.removeChild(t.firstElementChild)}}}renderMovable(e,t){const i=e.cloneNode(!0),s=this.parent.getMovableColumnsCount(),n=this.parent.getFrozenLeftCount(),o=this.parent.getFrozenRightColumnsCount();return dm(e,0,n),dm(i,n,o?i.children.length-o:i.children.length),dm(t,n+s,t.children.length),i}findNextEditableCell(e,t,i){const s=this.parent.getColumns(),n=s.length;let o;for(let r=e;r<n;r++){if(o=!!i&&qe(s[r].validationRules),!t&&this.checkNPCell(s[r]))return r;if(t&&!s[r].template&&s[r].visible&&s[r].allowEditing&&(!s[r].isIdentity||!s[r].isPrimaryKey)&&!o)return r}return-1}checkNPCell(e){return!e.template&&e.visible&&!e.isPrimaryKey&&!e.isIdentity&&e.allowEditing}getDefaultData(){const e=this.parent,t={},i={number:0,string:null,boolean:!1,date:null,datetime:null};for(const s of e.columnModel)s.field&&ze(s.field,Object.keys(s).indexOf("defaultValue")>=0?s.defaultValue:i[s.type],t);return t}setCellIdx(e){let t=0;this.parent.allowGrouping&&(t=this.parent.groupSettings.columns.length),this.cellDetails.cellIndex=e.cellIndex-t,this.cellDetails.rowIndex=parseInt(e.getAttribute("index"),10)}editCell(e,t,i){const s=this.parent,n=s.getColumnByField(t);this.index=e,this.field=t,this.isAdd=i;const o=s.isEdit&&!(this.cellDetails.column.field===t&&this.cellDetails.rowIndex===e&&this.parent.getDataRows().length-1!==e);s.editSettings.allowEditing&&(!o&&n.allowEditing?this.editCellExtend(e,t,i):o&&(this.editNext=!0,this.saveCell()))}editCellExtend(e,t,i){const s=this.parent,n=s.getColumnByField(t),o=s.getPrimaryKeyFieldNames();if(s.isEdit)return;let r,l,a=Ve({},{},this.getDataByIndex(e),!0);if("movable"===n.getFreezeTableName()||n.getFreezeTableName()===Zd?(r="movable"===n.getFreezeTableName()?s.getMovableDataRows()[e]:s.getFrozenRightDataRows()[e],l=this.parent.getRowObjectFromUID(r.getAttribute("data-uid")),a=l.changes?Ve({},{},l.changes,!0):a):(r=s.getDataRows()[e],a=Ve({},{},this.getDataByIndex(e),!0)),o[0]===n.field&&!r.classList.contains("e-insertedrow")||n.columns||n.isPrimaryKey&&n.isIdentity)return void(this.parent.isLastCellPrimaryKey=!0);this.parent.isLastCellPrimaryKey=!1,this.parent.element.classList.add("e-editing");const h=s.getRowObjectFromUID(r.getAttribute("data-uid")),c=[].slice.apply(r.cells),d={columnName:n.field,isForeignKey:!qe(n.foreignKeyValue),primaryKey:o,rowData:a,validationRules:Ve({},n.validationRules?n.validationRules:{}),value:em(n.field,a),type:i?"add":"edit",cancel:!1,foreignKeyData:h&&h.foreignKeyData};d.cell=c[this.getColIndex(c,this.getCellIdx(n.uid))],d.row=r,d.columnObject=n,d.cell&&s.trigger("cellEdit",d,t=>{t.cancel||(t.cell=t.cell?t.cell:c[this.getColIndex(c,this.getCellIdx(n.uid))],t.row=t.row?t.row:r,t.columnObject=t.columnObject?t.columnObject:n,t.columnObject.index=qe(t.columnObject.index)?0:t.columnObject.index,this.cellDetails={rowData:a,column:n,value:t.value,isForeignKey:t.isForeignKey,rowIndex:e,cellIndex:parseInt(t.cell.getAttribute(tp),10),foreignKeyData:t.foreignKeyData},t.cell.classList.contains("e-updatedtd")&&(this.isColored=!0,t.cell.classList.remove("e-updatedtd")),s.isEdit=!0,s.clearSelection(),s.isCheckBoxSelection&&s.isPersistSelection||s.selectRow(this.cellDetails.rowIndex,!0),this.renderer.update(t),this.parent.notify("batcheditform-rendered",t),this.form=Qt("#"+s.element.id+"EditForm",s.element),s.editModule.applyFormValidation([n]),this.parent.element.querySelector(".e-gridpopup").style.display="none")})}updateCell(e,t,i){const s=this.parent,n=s.getColumnByField(t),o=s.getColumnIndexByField(t);if(n&&!n.isPrimaryKey&&n.allowEditing){const t=um(this.parent,n,e,o),r="movable"===n.getFreezeTableName()?this.parent.getMovableRowsObject()[e]:n.getFreezeTableName()===Zd?s.getFrozenRightRowsObject()[e]:s.getRowObjectFromUID(t.parentElement.getAttribute("data-uid"));this.refreshTD(t,n,r,i),this.parent.trigger(jh,{cell:this.newReactTd||t,column:n,data:r.changes})}}setChanges(e,t,i){let s;if(this.parent.isFrozenGrid()){const n=this.parent.getRowElementByUID(e.uid),o=parseInt(n.getAttribute(ip),10);s=this.parent.getRowsObject()[o],s.changes||(s.changes=Ve({},{},e.data,!0)),qe(t)||ze(t,i,s.changes);const r=this.parent.getMovableRowsObject()[o];if(r.changes=Ve({},{},s.changes,!0),e.data[t]!==i&&(r.isDirty=!0,s.isDirty=!0),this.parent.getFrozenMode()===Jd){const n=this.parent.getFrozenRightRowsObject()[o];n.changes=Ve({},{},s.changes,!0),e.data[t]!==i&&(n.isDirty=!0)}}else if(e.changes||(e.changes=Ve({},{},e.data,!0)),qe(t)||Gs.b.setValue(t,i,e.changes),e.data[t]!==i){const s=this.parent.getColumnByField(t).type;"date"===s||"datetime"===s?new Date(e.data[t]).toString()!==new Date(i).toString()&&(e.isDirty=!0):e.isDirty=!0}}updateRow(e,t){const i=Object.keys(t);for(const s of i)this.updateCell(e,s,t[s])}getCellIdx(e){let t=this.parent.getColumnIndexByUid(e)+this.parent.groupSettings.columns.length;return qe(this.parent.detailTemplate)&&qe(this.parent.childGrid)||t++,this.parent.isRowDragable()&&t++,t}refreshTD(e,t,i,s){const n=new bp(this.parent,this.serviceLocator);let o;s="number"!==t.type||qe(s)?s:parseFloat(s),this.setChanges(i,t.field,s);let r,l,a=this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenRightColumnsCount();a=a&&this.parent.isRowDragable()?a+1:a,Xu(i,this.parent.getForeignKeyColumns(),i.changes),o=a&&"movable"===t.getFreezeTableName()&&this.parent.getColumns().length===i.cells.length?i.cells.slice(a,i.cells.length):i.cells,this.parent.isReact&&(r=e.parentElement,l=e.cellIndex);let h=0;a&&(h="movable"===t.getFreezeTableName()&&"Right"!==this.parent.getFrozenMode()?a:t.getFreezeTableName()===Zd?this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount():h),n.refreshTD(e,o[this.getCellIdx(t.uid)-h],i.changes,{index:this.getCellIdx(t.uid)}),this.parent.isReact?(this.newReactTd=r.cells[l],r.cells[l].classList.add("e-updatedtd")):e.classList.add("e-updatedtd"),e.classList.add("e-updatedtd"),this.parent.notify(Hc,{})}getColIndex(e,t){let i=0;this.parent.allowGrouping&&this.parent.groupSettings.columns&&(i=this.parent.groupSettings.columns.length),qe(this.parent.detailTemplate)&&qe(this.parent.childGrid)||i++,this.parent.isRowDragable()&&i++;for(let s=0;s<e.length;s++)if(parseInt(e[s].getAttribute(tp),10)===t-i)return s;return-1}editNextValCell(){const e=this.parent,t=this.getBottomIndex();if(this.isAdded&&!e.isEdit){for(let i=this.cellDetails.cellIndex;i<e.getColumns().length;i++){if(e.isEdit)return;const i=this.findNextEditableCell(this.cellDetails.cellIndex+1,!0,!0),s=e.getColumns()[i];if(s){if("Bottom"===this.parent.editSettings.newRowPosition)this.editCell(t,s.field,!0);else{const e={index:0,column:s};this.parent.notify("next-cell-index",e),this.editCell(e.index,s.field,!0)}this.saveCell()}}e.isEdit||(this.isAdded=!1)}}escapeCellEdit(){const e=this.generateCellArgs();e.value=e.previousValue,this.successCallBack(e,e.cell.parentElement,e.column,!0)(e)}generateCellArgs(){const e=this.parent;this.parent.element.classList.remove("e-editing");const t=this.cellDetails.column,i={};i[t.field]=em(t.field,this.cellDetails.rowData);let s=e.editModule.getCurrentEditedData(this.form,i);const n=Ve({},s);s=Ve({},s,this.cellDetails.rowData);const o=em(t.field,n);qe(t.field)||je(o)||ze(t.field,o,s);const r={columnName:t.field,value:em(t.field,s),rowData:this.cellDetails.rowData,column:t,previousValue:this.cellDetails.value,isForeignKey:this.cellDetails.isForeignKey,cancel:!1};return r.cell=this.form.parentElement,r.columnObject=t,r}saveCell(e){if(this.preventSaveCell||!this.form)return;const t=this.parent;if(!e&&(!t.isEdit||this.validateFormObj()))return;this.preventSaveCell=!0;const i=this.generateCellArgs(),s=i.cell.parentElement,n=i.column;e?this.successCallBack(i,s,n)(i):(t.trigger("cellSave",i,this.successCallBack(i,s,n)),t.notify("batchedit-form",{formObj:this.form}))}successCallBack(e,t,i,s){return e=>{const n=this.parent;if(e.cell=e.cell?e.cell:this.form.parentElement,e.columnObject=e.columnObject?e.columnObject:i,e.columnObject.index=qe(e.columnObject.index)?0:e.columnObject.index,e.cancel){if(this.preventSaveCell=!1,this.editNext){if(this.editNext=!1,this.cellDetails.rowIndex===this.index&&this.cellDetails.column.field===this.field)return;this.editCellExtend(this.index,this.field,this.isAdd)}return}n.editModule.destroyWidgets([i]),n.isEdit=!1,n.editModule.destroyForm(),this.parent.notify(qc,{});let o=ku(e.cell,jd)||ku(e.cell,Wd)?n.getRowObjectFromUID(t.getAttribute("data-uid"),!0):n.getRowObjectFromUID(t.getAttribute("data-uid"));if(n.getFrozenMode()===Jd&&(ku(e.cell,"e-frozen-right-header")||ku(e.cell,"e-frozen-right-content"))&&(o=n.getRowObjectFromUID(t.getAttribute("data-uid"),!1,!0)),this.refreshTD(e.cell,i,o,e.value),this.parent.isReact&&(e.cell=this.newReactTd),qt([t],[Qd,"e-batchrow"]),qt([e.cell],["e-editedbatchcell","e-boolcell"]),(!qe(e.value)&&e.value.toString()===(qe(this.cellDetails.value)?"":this.cellDetails.value).toString()&&!this.isColored||qe(e.value)&&qe(o.data[i.field])&&qe(this.cellDetails.value)&&!e.cell.parentElement.classList.contains("e-insertedrow"))&&e.cell.classList.remove("e-updatedtd"),qe(s)&&n.trigger("cellSaved",e),n.notify(Hc,{}),this.isColored=!1,this.parent.aggregates.length>0&&(this.parent.notify(xc,{}),this.parent.groupSettings.columns.length>0&&!this.isAddRow(this.cellDetails.rowIndex)&&this.parent.notify(Ec,{})),this.preventSaveCell=!1,this.editNext){if(this.editNext=!1,this.cellDetails.rowIndex===this.index&&this.cellDetails.column.field===this.field)return;const e=n.getColumnByField(this.field);e&&e.allowEditing&&this.editCellExtend(this.index,this.field,this.isAdd)}s&&n.notify(ud,{})}}getDataByIndex(e){const t=this.parent.getRowObjectFromUID(this.parent.getDataRows()[e].getAttribute("data-uid"));return t.changes?t.changes:t.data}keyDownHandler(e){if(("tab"===e.action||"shiftTab"===e.action)&&this.parent.isEdit){const t=this.parent,i=this.getBottomIndex(),s=ku(e.target,Hd);if(s){const n=s.querySelector(".e-field");if(n){const s=this.parent.getVisibleColumns();s["tab"===e.action?s.length-1:0].field===n.getAttribute("id").slice(this.parent.element.id.length)&&(this.cellDetails.rowIndex===i&&"tab"===e.action?"Top"===t.editSettings.newRowPosition?(t.editSettings.newRowPosition="Bottom",this.addRecord(),t.editSettings.newRowPosition="Top"):this.addRecord():this.saveCell())}}}}addCancelWhilePaging(){this.validateFormObj()&&(this.parent.notify(Kc,{}),this.parent.isEdit=!1,this.isColored=!1)}getBottomIndex(){const e=this.getBatchChanges();return this.parent.getCurrentViewRecords().length+e.addedRecords.length-e.deletedRecords.length-1}}class Bm extends Lm{constructor(e,t,i){super(e,t),this.parent=e,this.serviceLocator=t,this.renderer=i}closeEdit(){super.closeEdit()}addRecord(e,t){super.addRecord(e,t)}endEdit(){super.endEdit()}updateRow(e,t){super.updateRow(e,t)}deleteRecord(e,t){super.deleteRecord(e,t)}startEdit(e){super.startEdit(e)}}class Hm extends Im{write(e){"datepickeredit"===e.column.editType?this.obj=new gh(Ve(Nm(e,this.parent.editSettings.mode,this.parent.enableRtl),e.column.edit.params)):"datetimepickeredit"===e.column.editType&&(this.obj=new Bh(Ve(Nm(e,this.parent.editSettings.mode,this.parent.enableRtl),e.column.edit.params))),this.obj.appendTo(e.element)}}function Nm(e,t,i){const s="Dialog"!==t,n=function(e,t){let i;return i=(new St).getDatePattern("date"===t?"object"==typeof e?{type:e.type?e.type:"date",format:e.format}:{type:"dateTime",skeleton:e}:"object"==typeof e?{type:e.type?e.type:"dateTime",format:e.format}:{type:"dateTime",skeleton:e},!1),i}(e.column.format,e.column.type);let o=em(e.column.field,e.rowData);return o=o?new Date(o):null,{floatLabelType:s?"Never":"Always",value:o,format:n,placeholder:s?"":e.column.headerText,enableRtl:i,enabled:ju(e.column,e.requestType,e.element)}}class Vm{constructor(e){this.parent=e}read(e,t){return t}write(){}destroy(){}}let qm=(()=>{class e{constructor(e,t){this.editType={Inline:Pm,Normal:Pm,Batch:zm,Dialog:Bm},this.parent=e,this.serviceLocator=t,this.l10n=this.serviceLocator.getService("localization"),this.addEventListener(),this.updateEditObj(),this.createAlertDlg(),this.createConfirmDlg()}updateColTypeObj(){const t=this.parent.columnModel;for(let i=0;i<t.length;i++)t[i].edit=Ve(this.parent.editSettings.template||t[i].editTemplate?new e.editCellType.templateedit(this.parent):new e.editCellType[t[i].editType&&e.editCellType[t[i].editType]?t[i].editType:"defaultedit"](this.parent,this.serviceLocator),t[i].edit||{});this.parent.log("primary_column_missing")}getModuleName(){return"edit"}onPropertyChanged(e){if(e.module!==this.getModuleName())return;const t=this.parent;for(const i of Object.keys(e.properties))switch(i){case"allowAdding":case"allowDeleting":case"allowEditing":(t.editSettings.allowAdding||t.editSettings.allowEditing||t.editSettings.allowDeleting)&&this.initialEnd();break;case"mode":this.updateEditObj(),t.isEdit=!1,t.refresh()}}updateEditObj(){this.editModule&&this.editModule.destroy(),this.renderer=new Mm(this.parent,this.serviceLocator),this.editModule=new this.editType[this.parent.editSettings.mode](this.parent,this.serviceLocator,this.renderer)}initialEnd(){this.updateColTypeObj()}startEdit(e){const t=this.parent;if(t.editSettings.allowEditing&&!t.isEdit&&"Batch"!==t.editSettings.mode){if(this.parent.element.classList.add("e-editing"),t.getSelectedRows().length)e||(e=t.getSelectedRows()[0]);else if(!e)return void this.showDialog("EditOperationAlert",this.alertDObj);this.isLastRow=e.rowIndex===this.parent.getContent().querySelector("tr:last-child").rowIndex,"none"!==e.style.display&&(this.editModule.startEdit(e),this.refreshToolbar(),t.element.querySelector(".e-gridpopup").style.display="none",this.parent.notify("start-edit",{}))}}checkLastRow(e,t){const i=this.isLastRow;"auto"!==this.parent.height&&"Bottom"===this.parent.editSettings.newRowPosition&&t&&"add"===t.requestType&&this.parent.getContent().firstElementChild.offsetHeight>this.parent.getContentTable().scrollHeight?Vt([].slice.call(e.getElementsByClassName(Hd)),"e-lastrowadded"):i&&e&&e.classList&&Vt([].slice.call(e.getElementsByClassName(Hd)),"e-lastrowcell")}closeEdit(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&this.parent.element.getElementsByClassName("e-updatedtd").length?this.showDialog("CancelEdit",this.dialogObj):(this.parent.element.classList.remove("e-editing"),this.editModule.closeEdit(),this.refreshToolbar(),this.parent.notify(Td,{}))}refreshToolbar(){this.parent.notify(Hc,{})}addRecord(e,t){if(!this.parent.editSettings.allowAdding)return;const i={startEdit:!0};e||this.parent.notify("virtual-scroll-add-action-begin",i),i.startEdit&&(this.parent.element.classList.add("e-editing"),this.editModule.addRecord(e,t),this.refreshToolbar(),this.parent.notify("start-add",{}))}deleteRecord(e,t){const i=this.parent;i.editSettings.allowDeleting&&(t||i.getSelectedRecords().length||!qe(i.commandDelIndex)?i.editSettings.showDeleteConfirmDialog?this.showDialog("ConfirmDelete",this.dialogObj):this.editModule.deleteRecord(e,t):this.showDialog("DeleteOperationAlert",this.alertDObj))}deleteRow(e){this.deleteRowUid=e.getAttribute("data-uid");const t=this.parent.getRowObjectFromUID(this.deleteRowUid);qe(t)||this.deleteRecord(null,t.data)}endEdit(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&(qe(this.formObj)||this.formObj.validate())&&(this.parent.editModule.saveCell(),this.parent.notify(ld,{}),qe(this.formObj)||this.formObj.validate())?this.showDialog("BatchSaveConfirm",this.dialogObj):this.endEditing()}updateCell(e,t,i){this.editModule.updateCell(e,t,i)}updateRow(e,t){this.editModule.updateRow(e,t)}batchCancel(){this.closeEdit()}batchSave(){this.endEdit()}editCell(e,t){this.editModule.editCell(e,t)}editFormValidate(){const e=!this.formObj||this.formObj.validate(),t=!this.mFormObj||this.mFormObj.validate(),i=!this.frFormObj||this.frFormObj.validate();return e&&t&&i}getBatchChanges(){return this.editModule.getBatchChanges?this.editModule.getBatchChanges():{}}getCurrentEditCellData(){const e=this.getCurrentEditedData(this.formObj.element,{});return e[Object.keys(e)[0]]}saveCell(){this.editModule.saveCell()}endEditing(){this.parent.element.classList.remove("e-editing"),this.editModule.endEdit(),this.refreshToolbar()}showDialog(e,t){t.content="<div>"+this.l10n.getConstant(e)+"</div>",t.dataBind(),t.show()}getValueFromType(e,t){let i=t;switch(e.type){case"number":i=isNaN(parseFloat(t))?null:parseFloat(t);break;case"boolean":"booleanedit"!==e.editType&&(i=t===this.l10n.getConstant("True")||!0===t);break;case"date":case"datetime":"datepickeredit"!==e.editType&&"datetimepickeredit"!==e.editType&&t&&t.length?i=new Date(t):""===t&&(i=null)}return i}destroyToolTip(){const e=[].slice.call(this.parent.element.getElementsByClassName("e-griderror"));for(const t of e)Yt(t);this.parent.getContent().firstElementChild.style.position="relative"}createConfirmDlg(){this.dialogObj=this.dlgWidget([{click:this.dlgOk.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.dlgCancel.bind(this),buttonModel:{cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}],"EditConfirm")}createAlertDlg(){this.alertDObj=this.dlgWidget([{click:this.alertClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:"e-flat",isPrimary:!0}}],"EditAlert")}alertClick(){this.alertDObj.hide()}dlgWidget(e,t){const i=this.parent.createElement("div",{id:this.parent.element.id+t});this.parent.element.appendChild(i);const s={showCloseIcon:!1,isModal:!0,visible:!1,closeOnEscape:!0,target:this.parent.element,width:"320px",animationSettings:{effect:"None"}};s.buttons=e;const n=new $o(s);return n.isStringTemplate=!0,n.appendTo(i),n}dlgCancel(){this.parent.focusModule.clearIndicator(),this.parent.focusModule.restoreFocus(),this.dialogObj.hide()}dlgOk(){switch(this.dialogObj.element.querySelector(".e-dlg-content").firstElementChild.innerText){case this.l10n.getConstant("ConfirmDelete"):this.editModule.deleteRecord();break;case this.l10n.getConstant("CancelEdit"):this.editModule.closeEdit();break;case this.l10n.getConstant("BatchSaveConfirm"):this.endEditing();break;case this.l10n.getConstant("BatchSaveLostChanges"):"Batch"===this.parent.editSettings.mode&&this.editModule.addCancelWhilePaging(),this.executeAction()}this.dlgCancel()}destroyEditComponents(){this.parent.isEdit&&(this.destroyWidgets(),this.destroyForm()),this.destroy()}addEventListener(){this.parent.isDestroyed||(this.eventDetails=[{event:yc,handler:this.onPropertyChanged},{event:uc,handler:this.initialEnd},{event:Tc,handler:this.keyPressHandler},{event:Vc,handler:this.updateColTypeObj},{event:qc,handler:this.destroyToolTip},{event:Wc,handler:this.preventBatch},{event:Kc,handler:this.destroyForm},{event:Ic,handler:this.destroyEditComponents}],Cm(this.parent,this.eventDetails,!0,this),this.actionBeginFunction=this.onActionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(Gh,this.actionBeginFunction),this.parent.addEventListener(_h,this.actionCompleteFunction))}removeEventListener(){this.parent.isDestroyed||(Cm(this.parent,this.eventDetails,!1),this.parent.removeEventListener(_h,this.actionCompleteFunction),this.parent.removeEventListener(Gh,this.actionBeginFunction))}actionComplete(e){["add","beginEdit","save","delete","cancel"].indexOf(e.requestType)<0&&(this.parent.isEdit=!1),"batchsave"===e.requestType&&this.parent.focusModule.restoreFocus(),this.refreshToolbar()}getCurrentEditedData(e,t){const i=this.parent;if(i.editSettings.template){const s=[].slice.call(e.elements);for(let e=0;e<s.length;e++)if((s[e].hasAttribute("name")&&"e-multi-hidden"!==s[e].className||s[e].classList.contains("e-multiselect"))&&("hidden"!==s[e].type||!ku(s[e],"e-switch-wrapper")&&!ku(s[e],"e-checkbox-wrapper"))){const n=s[e].hasAttribute("name")?qu(s[e].getAttribute("name")):qu(s[e].getAttribute("id")),o=i.getColumnByField(n)||{field:n,type:s[e].getAttribute("type")};let r;"checkbox"===o.type||"boolean"===o.type?r=s[e].checked:s[e].value?(r=s[e].value,s[e].ej2_instances&&s[e].ej2_instances.length&&!qe(s[e].ej2_instances[0].value)&&(s[e].blur(),r=s[e].ej2_instances[0].value)):s[e].ej2_instances&&(r=s[e].ej2_instances[0].value),o.edit&&"string"==typeof o.edit.read?r=Pe(o.edit.read,window)(s[e],r):o.edit&&o.edit.read&&(r=o.edit.read(s[e],r)),r=i.editModule.getValueFromType(o,r),"radio"===s[e].type?s[e].checked&&Gs.b.setValue(o.field,r,t):Gs.b.setValue(o.field,r,t)}return t}const s=i.columnModel.filter(e=>e.editTemplate);for(let o=0;o<s.length;o++)if(e[Vu(s[o].field)]){let i=[].slice.call(e[Vu(s[o].field)]);i=i.length?i:[e[Vu(s[o].field)]];let n=i.filter(e=>!qe(e.ej2_instances));0===n.length&&(n=i.filter(e=>e.hasAttribute("name")));for(let e=0;e<n.length;e++){const i=this.getValue(s[o],n[e],t);Gs.b.setValue(s[o].field,i,t)}}const n=[].slice.call(e.getElementsByClassName("e-field"));for(let o=0,r=n.length;o<r;o++){const e=i.getColumnByUid(n[o].getAttribute("e-mappinguid"));if(e&&e.field){const i=this.getValue(e,n[o],t);Gs.b.setValue(e.field,i,t)}}return t}getValue(e,t,i){let s=t.ej2_instances?t.ej2_instances[0].value:t.value;const n=this.parent;let o=e.edit.read;return"checkbox"!==e.type&&"boolean"!==e.type||(s=t.checked),"string"==typeof o?(o=Pe(o,window),s=n.editModule.getValueFromType(e,o(t,s))):s=n.editModule.getValueFromType(e,e.edit.read(t,s)),qe(i[e.field])&&""===s&&(s=i[e.field]),s}onActionBegin(e){if("columnstate"===e.requestType&&this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode)this.closeEdit();else{const t=this.parent.element.querySelector("."+Qd),i=this.parent.element.querySelector("."+$d);if(t&&this.parent.frozenRows&&"virtualscroll"===e.requestType&&parseInt(ku(t,Yd).getAttribute(ip),10)<this.parent.frozenRows)return;const s=-1===["filterafteropen","filterbeforeopen","filterchoicerequest","save","infiniteScroll","virtualscroll"].indexOf(e.requestType),n=this.parent.enableVirtualization&&this.formObj&&!this.formObj.isDestroyed&&(t||i||"cancel"===e.requestType)&&s;(!this.parent.enableVirtualization&&"Batch"!==this.parent.editSettings.mode&&this.formObj&&!this.formObj.isDestroyed&&s&&!e.cancel||n)&&(this.destroyWidgets(),this.destroyForm())}}destroyWidgets(e){this.parent.editSettings.template&&(this.parent.destroyTemplate(["editSettingsTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),(e=e||this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization)).some(e=>!qe(e.editTemplate))&&(this.parent.destroyTemplate(["editTemplate"]),this.parent.isReact&&this.parent.renderTemplates());for(const i of e){let e=i.edit.destroy;i.edit.destroy&&("string"==typeof e?(e=Pe(e,window),e()):i.edit.destroy())}const t=[].slice.call(this.formObj.element.elements);for(let i=0;i<t.length;i++)t[i].hasAttribute("name")&&t[i].ej2_instances&&t[i].ej2_instances.length&&!t[i].ej2_instances[0].isDestroyed&&t[i].ej2_instances[0].destroy()}destroyForm(){this.destroyToolTip();const e=[this.formObj,this.mFormObj,this.frFormObj,this.virtualFormObj];for(let t=0;t<e.length;t++)e[t]&&e[t].element&&!e[t].isDestroyed&&e[t].destroy();this.destroyToolTip()}destroy(){const e=this.parent.element;if(!e)return;const t=!(!e.querySelector(".e-gridheader")||!e.querySelector("."+Nd));t&&this.destroyForm(),this.removeEventListener();let i=this.dialogObj.element;i.childElementCount>0&&(this.dialogObj.destroy(),Yt(i)),i=this.alertDObj.element,i.childElementCount>0&&(this.alertDObj.destroy(),Yt(i)),t&&this.editModule&&this.editModule.destroy()}keyPressHandler(e){switch(e.action){case"insert":this.addRecord();break;case"delete":"INPUT"===e.target.tagName&&!e.target.classList.contains("e-checkselect")||document.querySelector(".e-popup-open")||this.deleteRecord();break;case"f2":this.startEdit();break;case"enter":ku(e.target,"e-unboundcelldiv")||"Batch"===this.parent.editSettings.mode||!(ku(e.target,Nd)||this.parent.frozenRows&&ku(e.target,qd))||document.getElementsByClassName("e-popup-open").length||(e.preventDefault(),this.endEdit());break;case"escape":this.parent.isEdit&&("Batch"===this.parent.editSettings.mode?this.editModule.escapeCellEdit():this.closeEdit())}}preventBatch(e){this.preventObj=e,this.showDialog("BatchSaveLostChanges",this.dialogObj)}executeAction(){this.preventObj.handler.call(this.preventObj.instance,this.preventObj.arg1,this.preventObj.arg2,this.preventObj.arg3,this.preventObj.arg4,this.preventObj.arg5,this.preventObj.arg6,this.preventObj.arg7,this.preventObj.arg8)}applyFormValidation(e){const t=this.parent,i=t.isFrozenGrid(),s="Normal"===this.parent.editSettings.mode,n="Right"===this.parent.getFrozenMode()&&s?1:0,o="Dialog"!==this.parent.editSettings.mode?t.element.getElementsByClassName("e-gridform")[n]:Qt("#"+t.element.id+"_dialogEdit_wrapper .e-gridform",document),r="Right"===this.parent.getFrozenMode()&&s?0:1,l=t.element.getElementsByClassName("e-gridform")[r];let a={};const h={},c={};e=e||t.getColumns();for(let d=0;d<e.length;d++)(e[d].visible||"Dialog"===t.editSettings.mode&&(-1!==t.groupSettings.columns.indexOf(e[d].field)||"Dialog"!==t.editSettings.mode))&&e[d].validationRules&&mm(e[d],r,a,h,c,e.length);if(i&&"Dialog"!==this.parent.editSettings.mode){if(this.parent.editModule.mFormObj=this.createFormObj(l,h),this.parent.getFrozenMode()===Jd){const e=t.element.getElementsByClassName("e-gridform")[2];this.parent.editModule.frFormObj=this.createFormObj(e,c)}}else a=Ve(a,h,c);this.parent.editModule.formObj=this.createFormObj(o,a)}createFormObj(e,t){return new ul(e,{rules:t,locale:this.parent.locale,validationComplete:e=>{this.validationComplete(e)},customPlacement:(e,t)=>{const i=e.getAttribute("e-mappinguid"),s={column:this.parent.getColumnByUid(i),error:t,inputElement:e,value:e.value};this.valErrorPlacement(e,t),this.parent.notify("validation-custom-placement",s)}})}valErrorPlacement(e,t){if(this.parent.isEdit){const i=t.getAttribute("for"),s=this.getElemTable(e).querySelector("#"+i+"_Error");s?s.querySelector(".e-tip-content").innerHTML=t.outerHTML:this.createTooltip(e,t,i,"")}}getElemTable(e){let t;const i=this.parent;let s;if("Dialog"!==i.editSettings.mode){t=i.frozenRows&&i.frozenRows>(parseInt(Zt(e,".e-row").getAttribute(ip),10)||0);const n=e.name;let o;n&&(o=Sm(this.parent,qu(n))),o&&i.isFrozenGrid()?"frozen-left"===o.getFreezeTableName()?s=t?i.getFrozenVirtualHeader().querySelector("table"):i.getFrozenVirtualContent().querySelector("table"):"frozen-right"===o.getFreezeTableName()?s=t?i.getFrozenRightHeader().querySelector("table"):i.getFrozenRightContent().querySelector("table"):"movable"===o.getFreezeTableName()&&(s=t?i.getMovableVirtualHeader().querySelector("table"):i.getMovableVirtualContent().querySelector("table")):s=t?i.getHeaderTable():i.getContentTable()}else s=Qt("#"+i.element.id+"_dialogEdit_wrapper",document);return s}resetElemPosition(e,t){const i=ku(t.element,Hd);if(i){const t=i.getBoundingClientRect().right,s=e.getBoundingClientRect().right;s>t&&(e.style.left=e.offsetLeft-(s-t)+"px")}}validationComplete(e){if(this.parent.isEdit){const t=this.getElemTable(e.element).querySelector("#"+e.inputName+"_Error");t&&("failure"===e.status?(t.style.display="",this.resetElemPosition(t,e)):t.style.display="none")}}createTooltip(e,t,i,s){const n=this.parent.getColumnByField(i);let o=this.parent.getFrozenMode()===Jd&&"Normal"===this.parent.editSettings.mode&&n.getFreezeTableName()===Zd?this.frFormObj.element:this.formObj.element;const r=ku(e,"e-virtual-validation");r&&(o=this.virtualFormObj.element);let l=this.parent.getContent().firstElementChild;const a=this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenRightColumnsCount();a&&(l=this.parent.getMovableVirtualContent());const h=l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth,c="Dialog"!==this.parent.editSettings.mode,d=Zt(e,"."+Hd),p=Zt(e,".e-row"),u=this.parent.getContent().querySelector("."+Gd);let m,g,f=!1,b=!1;const y=Math.round(this.parent.getContent().clientHeight/this.parent.getRowHeight())-1,v=[].slice.call(u?this.parent.getFrozenVirtualContent().getElementsByClassName(Yd):this.parent.getContent().getElementsByClassName(Yd));if("Batch"===this.parent.editSettings.mode&&y>1&&v.length>=y&&v[v.length-1].getAttribute(ip)===p.getAttribute(ip)&&(b=!0),c){if(this.parent.frozenRows){const e=a?this.parent.getFrozenVirtualHeader().querySelector(sp).children:this.parent.getHeaderTable().querySelector(sp).children;m=e.length>(parseInt(p.getAttribute(ip),10)||0),f=m&&parseInt(p.getAttribute(ip),10)===e.length-1}(f||y>1&&v.length>=y&&("Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType||d.classList.contains("e-lastrowcell")&&!p.classList.contains($d))||b)&&(g=!0)}const C=c?m?this.parent.getHeaderTable():this.parent.getContentTable():Qt("#"+this.parent.element.id+"_dialogEdit_wrapper .e-dlg-content",document),w=C.getBoundingClientRect(),S=c?this.parent.element.getBoundingClientRect().left:w.left,E=Zt(e,"td"),x=E?E.getBoundingClientRect():e.parentElement.getBoundingClientRect(),R=this.parent.createElement("div",{className:"e-tooltip-wrap e-lib e-control e-popup e-griderror",id:i+"_Error",styles:"display:"+s+";top:"+((m?x.top+x.height:x.bottom-w.top-(a?u.scrollTop:0))+C.scrollTop+9)+"px;left:"+(x.left-S+C.scrollLeft+x.width/2)+"px;max-width:"+x.width+"px;text-align:center;"});c&&w.left<S&&(R.style.left=parseInt(R.style.left,10)-w.left+S+"px");const D=this.parent.createElement("div",{className:"e-tip-content"});let T;D.appendChild(t),g?(T=this.parent.createElement("div",{className:"e-arrow-tip e-tip-bottom"}),T.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"})),T.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom"}))):(T=this.parent.createElement("div",{className:"e-arrow-tip e-tip-top"}),T.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),T.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-top"}))),R.appendChild(D),R.appendChild(T),r||!a&&!this.parent.frozenRows||"Dialog"===this.parent.editSettings.mode?r?this.virtualFormObj.element.appendChild(R):this.formObj.element.appendChild(R):(Zt(e,"Normal"===this.parent.editSettings.mode?".e-editcell":".e-table").style.position="relative",R.style.position="absolute","Batch"===this.parent.editSettings.mode||Zt(e,"."+Gd)||Zt(e,"."+_d)||this.parent.frozenRows&&!a?o.appendChild(R):this.mFormObj.element.appendChild(R)),!g&&c&&l.getBoundingClientRect().bottom<x.bottom+x.height&&(l.scrollTop=l.scrollTop+R.offsetHeight+T.scrollHeight);const M=parseInt(document.defaultView.getComputedStyle(R,null).getPropertyValue("font-size"),10);if(R.getBoundingClientRect().width<x.width&&R.querySelector("label").getBoundingClientRect().height/(1.2*M)>=2&&(R.style.width=R.style.maxWidth),R.style.left=(a||this.parent.frozenRows)&&"Dialog"!==this.parent.editSettings.mode?E.offsetLeft+(E.offsetWidth/2-R.offsetWidth/2)+"px":parseInt(R.style.left,10)-R.offsetWidth/2+"px",c&&!h&&!this.parent.allowPaging||a||this.parent.frozenRows){l.style.position="static";const e=Zs(E,R);R.style.top=e.top+x.height+9+"px"}if(g){if(!h||a||"auto"===this.parent.height||this.parent.frozenRows||this.parent.enableVirtualization)R.style.bottom=x.height+9+"px";else{const e=l.scrollWidth>l.offsetWidth?Nu():0;R.style.bottom=this.parent.height-l.querySelector("table").offsetHeight-e+x.height+9+"px"}if(v.length<y&&"Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType){const e=(this.parent.frozenRows?this.parent.frozenRows+(v.length-1):v.length-1)*this.parent.getRowHeight(),t=this.parent.getContent().clientHeight-e;R.style.bottom=t+9+"px"}R.style.top=null}}checkColumnIsGrouped(e){return!(e.visible||this.parent.groupSettings.columns.indexOf(e.field)>-1)}static AddEditors(t){e.editCellType=Ve(e.editCellType,t)}}return e.editCellType={dropdownedit:Fm,numericedit:Am,datepickeredit:Hm,datetimepickeredit:Hm,booleanedit:km,defaultedit:Om,templateedit:Vm},e})();class jm extends bp{constructor(e,t){super(e,t),this.buttonElement=this.parent.createElement("button",{}),this.unbounDiv=this.parent.createElement("div",{className:"e-unboundcelldiv",styles:"display: inline-block"}),this.childRefs=[],this.element=this.parent.createElement("TD",{className:"e-rowcell e-unboundcell",attrs:{role:"gridcell",tabindex:"-1"}}),this.parent.on(Ic,this.destroyButtons,this)}destroyButtons(){for(let e=0;e<this.childRefs.length;e++)this.childRefs[e]&&!this.childRefs[e].isDestroyed&&this.childRefs[e].destroy();this.parent.off(Ic,this.destroyButtons)}render(e,t,i,s){let n=this.element.cloneNode();if(n.appendChild(this.unbounDiv.cloneNode()),n.setAttribute("aria-label","is Command column column header "+e.column.headerText),e.column.commandsTemplate)if(this.parent.isReact&&"string"!=typeof e.column.commandsTemplate){const i=this.parent+"commandsTemplate";e.column.getColumnTemplate()(t,this.parent,"commandsTemplate",i,null,null,n.firstElementChild),this.parent.renderTemplates()}else Pu(n.firstElementChild,e.column.getColumnTemplate()(t));else for(const o of e.commands)n=this.renderButton(n,o,i.index,o.uid);return this.setAttributes(n,e,i),!this.parent.enableVirtualization&&this.parent.isEdit||s?(Vt([].slice.call(n.getElementsByClassName("e-edit-delete")),"e-hide"),qt([].slice.call(n.getElementsByClassName("e-save-cancel")),"e-hide")):(Vt([].slice.call(n.getElementsByClassName("e-save-cancel")),"e-hide"),qt([].slice.call(n.getElementsByClassName("e-edit-delete")),"e-hide")),n}renderButton(e,t,i,s){const n=this.buttonElement.cloneNode();Xt(n,{id:this.parent.element.id+(t.type||"")+"_"+i+"_"+s,type:"button",title:qe(t.title)?t.buttonOption.content||this.localizer.getConstant(t.type)||t.type:t.title,"data-uid":s}),n.onclick=t.buttonOption.click;const o=new _s.a(t.buttonOption,n);switch(this.childRefs.push(o),o.commandType=t.type,e.firstElementChild.appendChild(o.element),t.type){case"Edit":case"Delete":Vt([n],["e-edit-delete","e-"+t.type.toLowerCase()+"button"]);break;case"Cancel":case"Save":Vt([n],["e-save-cancel","e-"+t.type.toLowerCase()+"button"])}return e}}const Wm=["template"],Gm=["headerTemplate"],_m=["commandsTemplate"],Um=["filterItemTemplate"],Km=["editTemplate"],Ym=["filterTemplate"],Xm=["footerTemplate"],Qm=["groupFooterTemplate"],$m=["groupCaptionTemplate"],Jm=["rowTemplate"],Zm=["detailTemplate"],eg=["toolbarTemplate"],tg=["pagerTemplate"],ig=["editSettingsTemplate"],sg=["groupSettingsCaptionTemplate"];var ng=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},og=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let rg=["allowEditing","allowFiltering","allowGrouping","allowReordering","allowResizing","allowSearching","allowSorting","autoFit","clipMode","columns","commands","customAttributes","dataSource","defaultValue","disableHtmlEncode","displayAsCheckBox","edit","editTemplate","editType","enableGroupByFormat","field","filter","filterBarTemplate","filterTemplate","foreignKeyField","foreignKeyValue","format","formatter","freeze","headerTemplate","headerText","headerTextAlign","headerValueAccessor","hideAtMedia","index","isFrozen","isIdentity","isPrimaryKey","lockColumn","maxWidth","minWidth","showColumnMenu","showInColumnChooser","sortComparer","template","textAlign","type","uid","validationRules","valueAccessor","visible","width"],lg=[],ag=(()=>{class e extends Bs{constructor(e){super(),this.viewContainerRef=e,Ps("currentInstance",this,this.viewContainerRef),this.registerEvents(lg),this.directivePropList=rg}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(m.S))},e.\u0275dir=m.Lb({type:e,selectors:[["e-column"]],contentQueries:function(e,t,i){if(1&e&&(m.Jb(i,Wm,1),m.Jb(i,Gm,1),m.Jb(i,_m,1),m.Jb(i,Um,1),m.Jb(i,Km,1),m.Jb(i,Ym,1)),2&e){let e;m.rc(e=m.ec())&&(t.template=e.first),m.rc(e=m.ec())&&(t.headerTemplate=e.first),m.rc(e=m.ec())&&(t.commandsTemplate=e.first),m.rc(e=m.ec())&&(t.filter_itemTemplate=e.first),m.rc(e=m.ec())&&(t.editTemplate=e.first),m.rc(e=m.ec())&&(t.filterTemplate=e.first)}},inputs:{allowEditing:"allowEditing",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowReordering:"allowReordering",allowResizing:"allowResizing",allowSearching:"allowSearching",allowSorting:"allowSorting",autoFit:"autoFit",clipMode:"clipMode",columns:"columns",commands:"commands",customAttributes:"customAttributes",dataSource:"dataSource",defaultValue:"defaultValue",disableHtmlEncode:"disableHtmlEncode",displayAsCheckBox:"displayAsCheckBox",edit:"edit",editTemplate:"editTemplate",editType:"editType",enableGroupByFormat:"enableGroupByFormat",field:"field",filter:"filter",filterBarTemplate:"filterBarTemplate",filterTemplate:"filterTemplate",foreignKeyField:"foreignKeyField",foreignKeyValue:"foreignKeyValue",format:"format",formatter:"formatter",freeze:"freeze",headerTemplate:"headerTemplate",headerText:"headerText",headerTextAlign:"headerTextAlign",headerValueAccessor:"headerValueAccessor",hideAtMedia:"hideAtMedia",index:"index",isFrozen:"isFrozen",isIdentity:"isIdentity",isPrimaryKey:"isPrimaryKey",lockColumn:"lockColumn",maxWidth:"maxWidth",minWidth:"minWidth",showColumnMenu:"showColumnMenu",showInColumnChooser:"showInColumnChooser",sortComparer:"sortComparer",template:"template",textAlign:"textAlign",type:"type",uid:"uid",validationRules:"validationRules",valueAccessor:"valueAccessor",visible:"visible",width:"width"},features:[m.Bb]}),ng([qs(),og("design:type",Object)],e.prototype,"template",void 0),ng([qs(),og("design:type",Object)],e.prototype,"headerTemplate",void 0),ng([qs(),og("design:type",Object)],e.prototype,"commandsTemplate",void 0),ng([qs(),og("design:type",Object)],e.prototype,"filter_itemTemplate",void 0),ng([qs(),og("design:type",Object)],e.prototype,"editTemplate",void 0),ng([qs(),og("design:type",Object)],e.prototype,"filterTemplate",void 0),e})(),hg=(()=>{class e extends Hs{constructor(){super("columns")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=m.Lb({type:e,selectors:[["e-columns"]],contentQueries:function(e,t,i){if(1&e&&m.Jb(i,ag,0),2&e){let e;m.rc(e=m.ec())&&(t.children=e)}},features:[m.Bb]}),e})();var cg=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},dg=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let pg=["columnName","customAggregate","field","footerTemplate","format","groupCaptionTemplate","groupFooterTemplate","type"],ug=[],mg=(()=>{class e extends Bs{constructor(e){super(),this.viewContainerRef=e,Ps("currentInstance",this,this.viewContainerRef),this.registerEvents(ug),this.directivePropList=pg}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(m.S))},e.\u0275dir=m.Lb({type:e,selectors:[["e-column"]],contentQueries:function(e,t,i){if(1&e&&(m.Jb(i,Xm,1),m.Jb(i,Qm,1),m.Jb(i,$m,1)),2&e){let e;m.rc(e=m.ec())&&(t.footerTemplate=e.first),m.rc(e=m.ec())&&(t.groupFooterTemplate=e.first),m.rc(e=m.ec())&&(t.groupCaptionTemplate=e.first)}},inputs:{columnName:"columnName",customAggregate:"customAggregate",field:"field",footerTemplate:"footerTemplate",format:"format",groupCaptionTemplate:"groupCaptionTemplate",groupFooterTemplate:"groupFooterTemplate",type:"type"},features:[m.Bb]}),cg([qs(),dg("design:type",Object)],e.prototype,"footerTemplate",void 0),cg([qs(),dg("design:type",Object)],e.prototype,"groupFooterTemplate",void 0),cg([qs(),dg("design:type",Object)],e.prototype,"groupCaptionTemplate",void 0),e})(),gg=(()=>{class e extends Hs{constructor(){super("columns")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=m.Lb({type:e,selectors:[["e-columns"]],contentQueries:function(e,t,i){if(1&e&&m.Jb(i,mg,0),2&e){let e;m.rc(e=m.ec())&&(t.children=e)}},features:[m.Bb]}),e})(),fg=["columns"],bg=[],yg=(()=>{class e extends Bs{constructor(e){super(),this.viewContainerRef=e,this.tags=["columns"],Ps("currentInstance",this,this.viewContainerRef),this.registerEvents(bg),this.directivePropList=fg}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(m.S))},e.\u0275dir=m.Lb({type:e,selectors:[["e-aggregate"]],contentQueries:function(e,t,i){if(1&e&&m.Jb(i,gg,1),2&e){let e;m.rc(e=m.ec())&&(t.childColumns=e.first)}},inputs:{columns:"columns"},features:[m.Bb]}),e})(),vg=(()=>{class e extends Hs{constructor(){super("aggregates")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=m.Lb({type:e,selectors:[["e-aggregates"]],contentQueries:function(e,t,i){if(1&e&&m.Jb(i,yg,0),2&e){let e;m.rc(e=m.ec())&&(t.children=e)}},features:[m.Bb]}),e})();var Cg=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},wg=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const Sg=["actionBegin","actionComplete","actionFailure","batchAdd","batchCancel","batchDelete","beforeAutoFill","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beforeCopy","beforeDataBound","beforeExcelExport","beforeOpenAdaptiveDialog","beforeOpenColumnChooser","beforePaste","beforePdfExport","beforePrint","beginEdit","cellDeselected","cellDeselecting","cellEdit","cellSave","cellSaved","cellSelected","cellSelecting","checkBoxChange","columnDataStateChange","columnDeselected","columnDeselecting","columnDrag","columnDragStart","columnDrop","columnMenuClick","columnMenuOpen","columnSelected","columnSelecting","commandClick","contextMenuClick","contextMenuOpen","created","dataBound","dataSourceChanged","dataStateChange","destroyed","detailDataBound","excelAggregateQueryCellInfo","excelExportComplete","excelHeaderQueryCellInfo","excelQueryCellInfo","exportDetailDataBound","exportGroupCaption","headerCellInfo","keyPressed","lazyLoadGroupCollapse","lazyLoadGroupExpand","load","pdfAggregateQueryCellInfo","pdfExportComplete","pdfHeaderQueryCellInfo","pdfQueryCellInfo","printComplete","queryCellInfo","recordClick","recordDoubleClick","resizeStart","resizeStop","resizing","rowDataBound","rowDeselected","rowDeselecting","rowDrag","rowDragStart","rowDragStartHelper","rowDrop","rowSelected","rowSelecting","toolbarClick","dataSourceChange"],Eg=["dataSource"];let xg=(()=>{let e=class extends vu{constructor(e,t,i,s){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=s,this.tags=["columns","aggregates"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let e=this.injector.get("GridsFilter");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(n){}try{let e=this.injector.get("GridsPage");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(o){}try{let e=this.injector.get("GridsSelection");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(r){}try{let e=this.injector.get("GridsSort");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(l){}try{let e=this.injector.get("GridsGroup");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(a){}try{let e=this.injector.get("GridsReorder");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(h){}try{let e=this.injector.get("GridsRowDD");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(c){}try{let e=this.injector.get("GridsDetailRow");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(d){}try{let e=this.injector.get("GridsToolbar");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(p){}try{let e=this.injector.get("GridsAggregate");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(u){}try{let e=this.injector.get("GridsSearch");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(m){}try{let e=this.injector.get("GridsVirtualScroll");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(g){}try{let e=this.injector.get("GridsEdit");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(f){}try{let e=this.injector.get("GridsResize");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(b){}try{let e=this.injector.get("GridsExcelExport");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(y){}try{let e=this.injector.get("GridsPdfExport");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(v){}try{let e=this.injector.get("GridsCommandColumn");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(C){}try{let e=this.injector.get("GridsContextMenu");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(w){}try{let e=this.injector.get("GridsFreeze");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(S){}try{let e=this.injector.get("GridsColumnMenu");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(E){}try{let e=this.injector.get("GridsColumnChooser");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(x){}try{let e=this.injector.get("GridsForeignKey");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(R){}try{let e=this.injector.get("GridsInfiniteScroll");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(D){}try{let e=this.injector.get("GridsLazyLoadGroup");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(T){}this.registerEvents(Sg),this.addTwoWay.call(this,Eg),Ps("currentInstance",this,this.viewContainerRef),this.context=new Ns}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childColumns,this.childAggregates&&(this.tagObjects[1].instance=this.childAggregates),this.context.ngAfterContentChecked(this)}};return e.\u0275fac=function(t){return new(t||e)(m.Qb(m.l),m.Qb(m.G),m.Qb(m.S),m.Qb(m.t))},e.\u0275cmp=m.Kb({type:e,selectors:[["ejs-grid"]],contentQueries:function(e,t,i){if(1&e&&(m.Jb(i,Jm,1),m.Jb(i,Zm,1),m.Jb(i,eg,1),m.Jb(i,tg,1),m.Jb(i,ig,1),m.Jb(i,sg,1),m.Jb(i,hg,1),m.Jb(i,vg,1)),2&e){let e;m.rc(e=m.ec())&&(t.rowTemplate=e.first),m.rc(e=m.ec())&&(t.detailTemplate=e.first),m.rc(e=m.ec())&&(t.toolbarTemplate=e.first),m.rc(e=m.ec())&&(t.pagerTemplate=e.first),m.rc(e=m.ec())&&(t.editSettings_template=e.first),m.rc(e=m.ec())&&(t.groupSettings_captionTemplate=e.first),m.rc(e=m.ec())&&(t.childColumns=e.first),m.rc(e=m.ec())&&(t.childAggregates=e.first)}},inputs:{aggregates:"aggregates",allowExcelExport:"allowExcelExport",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowKeyboard:"allowKeyboard",allowMultiSorting:"allowMultiSorting",allowPaging:"allowPaging",allowPdfExport:"allowPdfExport",allowReordering:"allowReordering",allowResizing:"allowResizing",allowRowDragAndDrop:"allowRowDragAndDrop",allowSelection:"allowSelection",allowSorting:"allowSorting",allowTextWrap:"allowTextWrap",childGrid:"childGrid",clipMode:"clipMode",columnChooserSettings:"columnChooserSettings",columnMenuItems:"columnMenuItems",columnQueryMode:"columnQueryMode",columns:"columns",contextMenuItems:"contextMenuItems",currencyCode:"currencyCode",currentAction:"currentAction",dataSource:"dataSource",detailTemplate:"detailTemplate",editSettings:"editSettings",ej2StatePersistenceVersion:"ej2StatePersistenceVersion",enableAdaptiveUI:"enableAdaptiveUI",enableAltRow:"enableAltRow",enableAutoFill:"enableAutoFill",enableColumnVirtualization:"enableColumnVirtualization",enableHeaderFocus:"enableHeaderFocus",enableHover:"enableHover",enableImmutableMode:"enableImmutableMode",enableInfiniteScrolling:"enableInfiniteScrolling",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enableStickyHeader:"enableStickyHeader",enableVirtualization:"enableVirtualization",filterSettings:"filterSettings",frozenColumns:"frozenColumns",frozenRows:"frozenRows",gridLines:"gridLines",groupSettings:"groupSettings",height:"height",hierarchyPrintMode:"hierarchyPrintMode",infiniteScrollSettings:"infiniteScrollSettings",locale:"locale",pageSettings:"pageSettings",pagerTemplate:"pagerTemplate",parentDetails:"parentDetails",printMode:"printMode",query:"query",queryString:"queryString",resizeSettings:"resizeSettings",rowDropSettings:"rowDropSettings",rowHeight:"rowHeight",rowRenderingMode:"rowRenderingMode",rowTemplate:"rowTemplate",searchSettings:"searchSettings",selectedRowIndex:"selectedRowIndex",selectionSettings:"selectionSettings",showColumnChooser:"showColumnChooser",showColumnMenu:"showColumnMenu",sortSettings:"sortSettings",textWrapSettings:"textWrapSettings",toolbar:"toolbar",toolbarTemplate:"toolbarTemplate",width:"width"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",batchAdd:"batchAdd",batchCancel:"batchCancel",batchDelete:"batchDelete",beforeAutoFill:"beforeAutoFill",beforeBatchAdd:"beforeBatchAdd",beforeBatchDelete:"beforeBatchDelete",beforeBatchSave:"beforeBatchSave",beforeCopy:"beforeCopy",beforeDataBound:"beforeDataBound",beforeExcelExport:"beforeExcelExport",beforeOpenAdaptiveDialog:"beforeOpenAdaptiveDialog",beforeOpenColumnChooser:"beforeOpenColumnChooser",beforePaste:"beforePaste",beforePdfExport:"beforePdfExport",beforePrint:"beforePrint",beginEdit:"beginEdit",cellDeselected:"cellDeselected",cellDeselecting:"cellDeselecting",cellEdit:"cellEdit",cellSave:"cellSave",cellSaved:"cellSaved",cellSelected:"cellSelected",cellSelecting:"cellSelecting",checkBoxChange:"checkBoxChange",columnDataStateChange:"columnDataStateChange",columnDeselected:"columnDeselected",columnDeselecting:"columnDeselecting",columnDrag:"columnDrag",columnDragStart:"columnDragStart",columnDrop:"columnDrop",columnMenuClick:"columnMenuClick",columnMenuOpen:"columnMenuOpen",columnSelected:"columnSelected",columnSelecting:"columnSelecting",commandClick:"commandClick",contextMenuClick:"contextMenuClick",contextMenuOpen:"contextMenuOpen",created:"created",dataBound:"dataBound",dataSourceChanged:"dataSourceChanged",dataStateChange:"dataStateChange",destroyed:"destroyed",detailDataBound:"detailDataBound",excelAggregateQueryCellInfo:"excelAggregateQueryCellInfo",excelExportComplete:"excelExportComplete",excelHeaderQueryCellInfo:"excelHeaderQueryCellInfo",excelQueryCellInfo:"excelQueryCellInfo",exportDetailDataBound:"exportDetailDataBound",exportGroupCaption:"exportGroupCaption",headerCellInfo:"headerCellInfo",keyPressed:"keyPressed",lazyLoadGroupCollapse:"lazyLoadGroupCollapse",lazyLoadGroupExpand:"lazyLoadGroupExpand",load:"load",pdfAggregateQueryCellInfo:"pdfAggregateQueryCellInfo",pdfExportComplete:"pdfExportComplete",pdfHeaderQueryCellInfo:"pdfHeaderQueryCellInfo",pdfQueryCellInfo:"pdfQueryCellInfo",printComplete:"printComplete",queryCellInfo:"queryCellInfo",recordClick:"recordClick",recordDoubleClick:"recordDoubleClick",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",rowDataBound:"rowDataBound",rowDeselected:"rowDeselected",rowDeselecting:"rowDeselecting",rowDrag:"rowDrag",rowDragStart:"rowDragStart",rowDragStartHelper:"rowDragStartHelper",rowDrop:"rowDrop",rowSelected:"rowSelected",rowSelecting:"rowSelecting",toolbarClick:"toolbarClick",dataSourceChange:"dataSourceChange"},features:[m.Bb],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),Cg([qs(),wg("design:type",Object)],e.prototype,"rowTemplate",void 0),Cg([qs(),wg("design:type",Object)],e.prototype,"detailTemplate",void 0),Cg([qs(),wg("design:type",Object)],e.prototype,"toolbarTemplate",void 0),Cg([qs(),wg("design:type",Object)],e.prototype,"pagerTemplate",void 0),Cg([qs(),wg("design:type",Object)],e.prototype,"editSettings_template",void 0),Cg([qs(),wg("design:type",Object)],e.prototype,"groupSettings_captionTemplate",void 0),e=Cg([(t=[Ns],function(e){!function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(i){e.prototype.hasOwnProperty(i)&&!t.isFormBase||(e.prototype[i]=t.prototype[i])})})}(e,t)}),wg("design:paramtypes",[m.l,m.G,m.S,m.t])],e),e;var t})(),Rg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Ob({type:e}),e.\u0275inj=m.Nb({imports:[[s.c]]}),e})();const Dg={provide:"GridsToolbar",useValue:class{constructor(e,t){this.predefinedItems={},this.items=["Add","Edit","Update","Delete","Cancel","Print","Search","ColumnChooser","PdfExport","ExcelExport","CsvExport","WordExport"],this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}render(){this.l10n=this.serviceLocator.getService("localization");const e=["Add","Edit","Update","Delete","Cancel","Print","PdfExport","ExcelExport","WordExport","CsvExport"],t=this.parent.enableAdaptiveUI,i=["Edit","Delete","Update","Cancel"];for(const s of e){const e=s.toLowerCase(),n=e[0].toUpperCase()+e.slice(1);this.predefinedItems[s]={id:this.gridID+"_"+e,prefixIcon:"e-"+e,text:this.l10n.getConstant(n),tooltipText:this.l10n.getConstant(n)},t&&(this.predefinedItems[s].text="",this.predefinedItems[s].visible=-1===i.indexOf(s))}this.predefinedItems.Search={id:this.gridID+"_search",tooltipText:this.l10n.getConstant("Search"),align:"Right",cssClass:"e-search-wrapper",type:"Input"},this.predefinedItems.ColumnChooser={id:this.gridID+"_columnchooser",cssClass:"e-cc e-ccdiv e-cc-toolbar",suffixIcon:"e-columnchooser-btn",text:t?"":this.l10n.getConstant("Columnchooser"),tooltipText:this.l10n.getConstant("Columnchooser"),align:"Right"},"Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&(this.predefinedItems.responsiveFilter={id:this.gridID+"_responsivefilter",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resfilter-icon",tooltipText:this.l10n.getConstant("FilterButton")}),this.parent.allowSorting&&(this.predefinedItems.responsiveSort={id:this.gridID+"_responsivesort",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-ressort-icon",tooltipText:this.l10n.getConstant("Sort")})),this.parent.enableAdaptiveUI&&this.parent.toolbar.indexOf("Search")>-1&&(this.predefinedItems.responsiveBack={id:this.gridID+"_responsiveback",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resback-icon",visible:!1}),this.createToolbar()}getToolbar(){return this.toolbar.element}destroy(){this.toolbar&&!this.toolbar.isDestroyed&&(this.toolbar.element?(this.toolbar.off("render-react-toolbar-template",this.addReactToolbarPortals),this.toolbar.destroy()):(this.parent.destroyTemplate(["toolbarTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),this.unWireEvent(),this.removeEventListener(),this.element.parentNode&&Yt(this.element))}bindSearchEvents(){this.searchElement=Qt("#"+this.gridID+"_searchbar",this.element),this.wireEvent(),this.refreshToolbarItems(),this.parent.searchSettings&&this.updateSearchBox()}toolbarCreated(e){this.element.querySelector(".e-search-wrapper")&&(this.element.querySelector(".e-search-wrapper").innerHTML=!this.parent.enableAdaptiveUI||e?'<div class="e-input-group e-search" role="search">                    <input id="'+this.gridID+'_searchbar" class="e-input" name="input" type="search"                     placeholder= "'+this.l10n.getConstant("Search")+'"/>                    <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" title="'+this.l10n.getConstant("Search")+'" aria-label= "search"></span>                     </div>':'<span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" title="'+this.l10n.getConstant("Search")+'" aria-label= "search"></span>                     </div>'),this.bindSearchEvents()}createToolbar(){const e=this.getItems();this.toolbar=new ya({items:e,clicked:this.toolbarClickHandler.bind(this),enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,created:this.toolbarCreated.bind(this)}),this.toolbar.isReact=this.parent.isReact,this.toolbar.on("render-react-toolbar-template",this.addReactToolbarPortals,this),this.toolbar.isStringTemplate=!0;const t="viewContainerRef";if(this.parent[t]&&(this.toolbar.registeredTemplate={},this.toolbar[t]=this.parent[t]),this.element=this.parent.createElement("div",{id:this.gridID+"_toolbarItems"}),this.parent.enableAdaptiveUI&&this.element.classList.add("e-res-toolbar"),this.parent.toolbarTemplate)if("string"==typeof this.parent.toolbarTemplate)this.toolbar.appendTo(this.parent.toolbarTemplate),this.element=this.toolbar.element;else{const e=this.parent.element.id+"toolbarTemplate";this.parent.isReact&&"string"!=typeof this.parent.toolbarTemplate?(Ru(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate",e,null,null,this.element),this.parent.renderTemplates()):Pu(this.element,Ru(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate"))}else this.toolbar.appendTo(this.element);this.parent.element.insertBefore(this.element,this.parent.getHeaderContent())}addReactToolbarPortals(e){this.parent.isReact&&e&&(this.parent.portals=this.parent.portals.concat(e),this.parent.renderTemplates())}renderResponsiveSearch(e){e?(this.toolbarCreated(!0),this.refreshResponsiveToolbarItems(Od.isSearch),this.searchElement=Qt("#"+this.gridID+"_searchbar",this.element),ku(this.searchElement,"e-toolbar-right").classList.add("e-responsive-right"),this.parent.searchSettings&&this.updateSearchBox(),this.searchBoxObj.searchFocus({target:this.searchElement}),this.searchElement.focus()):this.refreshResponsiveToolbarItems(Od.isInitial)}refreshResponsiveToolbarItems(e){if(e===Od.isInitial){const e=this.parent.element.id,t=[e+"_edit",e+"_delete"],i=this.parent.getSelectedRowIndexes(),s=[e+"_responsiveback",e+"_update",e+"_cancel"];for(const n of this.toolbar.items){const e=this.toolbar.element.querySelector("#"+n.id);e&&(t.indexOf(n.id)>-1?i.length?e.parentElement.classList.remove("e-hidden"):e.parentElement.classList.add("e-hidden"):-1===s.indexOf(n.id)?e.parentElement.classList.remove("e-hidden"):e.parentElement.classList.add("e-hidden"))}this.searchElement&&(ku(this.searchElement,"e-toolbar-right").classList.remove("e-responsive-right"),this.toolbarCreated(!1),this.unWireEvent(),this.searchElement=void 0)}if(e===Od.isSearch){const e=[this.parent.element.id+"_responsiveback",this.parent.element.id+"_search"];for(const t of this.toolbar.items){const i=this.toolbar.element.querySelector("#"+t.id);i&&(e.indexOf(t.id)>-1?i.parentElement.classList.remove("e-hidden"):i.parentElement.classList.add("e-hidden"))}}}refreshToolbarItems(e){const t=this.parent;let i=[],s=[];const n=t.editSettings,o=t.currentViewData&&t.currentViewData.length;n.allowAdding?i.push(this.gridID+"_add"):s.push(this.gridID+"_add"),n.allowEditing&&o?i.push(this.gridID+"_edit"):s.push(this.gridID+"_edit"),n.allowDeleting&&o?i.push(this.gridID+"_delete"):s.push(this.gridID+"_delete"),"Batch"===t.editSettings.mode?t.element.getElementsByClassName("e-updatedtd").length&&(n.allowAdding||n.allowEditing)?(i.push(this.gridID+"_update"),i.push(this.gridID+"_cancel")):(s.push(this.gridID+"_update"),s.push(this.gridID+"_cancel")):t.isEdit&&(n.allowAdding||n.allowEditing)?(i=[this.gridID+"_update",this.gridID+"_cancel"],s=[this.gridID+"_add",this.gridID+"_edit",this.gridID+"_delete"]):(s.push(this.gridID+"_update"),s.push(this.gridID+"_cancel")),this.enableItems(i,!0),this.enableItems(s,!1)}getItems(){const e=[],t=this.parent.toolbar||[];if("string"==typeof this.parent.toolbar)return[];"Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&e.push(this.getItemObject("responsiveFilter")),this.parent.allowSorting&&e.push(this.getItemObject("responsiveSort")));for(const i of t)switch(typeof i){case"number":e.push(this.getItemObject(this.items[i]));break;case"string":e.push(this.getItemObject(i));break;default:e.push(this.getItem(i))}return this.parent.enableAdaptiveUI&&this.parent.toolbar.indexOf("Search")>-1&&e.push(this.getItemObject("responsiveBack")),e}getItem(e){const t=this.predefinedItems[e.text];return t?Ve(t,t,e):e}getItemObject(e){return this.predefinedItems[e]||{text:e,id:this.gridID+"_"+e}}enableItems(e,t){for(const i of e){const e=Qt("#"+i,this.element);e&&this.toolbar.enableItems(e.parentElement,t)}}toolbarClickHandler(e){const t=this.parent,i=this.gridID;Ve(e,{cancel:!1});const s=e.originalEvent;t.trigger("toolbarClick",e,e=>{if(e.originalEvent=e.originalEvent?e.originalEvent:s,!e.cancel)switch(!qe(e.item)&&e.item.id){case i+"_print":t.print();break;case i+"_edit":t.startEdit();break;case i+"_update":t.endEdit();break;case i+"_cancel":t.closeEdit();break;case i+"_add":t.addRecord();break;case i+"_delete":t.deleteRecord();break;case i+"_search":e.originalEvent.target.id===i+"_searchbutton"&&this.searchElement?this.search():!t.enableAdaptiveUI||this.searchElement||!e.originalEvent.target.classList.contains("e-search-wrapper")&&e.originalEvent.target.id!==i+"_searchbutton"||this.renderResponsiveSearch(!0);break;case i+"_columnchooser":const s=this.parent.element.querySelector(".e-ccdiv");let n=s.getBoundingClientRect().top;const o=s.getBoundingClientRect().left,r=e.originalEvent.target;n=s.getBoundingClientRect().top+s.offsetTop,t.createColumnchooser(o,n,r);break;case i+"_responsivefilter":t.showResponsiveCustomFilter();break;case i+"_responsivesort":t.showResponsiveCustomSort();break;case i+"_responsiveback":this.renderResponsiveSearch(!1)}})}modelChanged(e){"edit"===e.module&&this.refreshToolbarItems()}onPropertyChanged(e){e.module===this.getModuleName()&&this.parent.toolbar&&(this.element&&Yt(this.element),this.render())}keyUpHandler(e){13===e.keyCode&&this.search()}search(){this.parent.search(this.searchElement.value)}updateSearchBox(){this.searchElement&&(this.searchElement.value=this.parent.searchSettings.key)}wireEvent(){this.searchElement&&(this.searchBoxObj=new Gp(this.searchElement),Bt.add(this.searchElement,"keyup",this.keyUpHandler,this),this.searchBoxObj.wireEvent())}unWireEvent(){this.searchElement&&(Bt.remove(this.searchElement,"keyup",this.keyUpHandler),this.searchBoxObj.unWireEvent())}reRenderToolbar(){this.element&&Yt(this.element),this.render()}addEventListener(){this.parent.isDestroyed||(this.evtHandlers=[{event:xd,handler:this.reRenderToolbar},{event:uc,handler:this.render},{event:fc,handler:this.onPropertyChanged},{event:yc,handler:this.updateSearchBox.bind(this)},{event:vc,handler:this.refreshToolbarItems},{event:Hc,handler:this.refreshToolbarItems},{event:yc,handler:this.modelChanged},{event:Kh,handler:this.refreshToolbarItems},{event:Mc,handler:this.removeResponsiveSearch},{event:Rd,handler:this.reRenderToolbar},{event:Ic,handler:this.destroy}],Cm(this.parent,this.evtHandlers,!0,this),this.rowSelectedFunction=this.rowSelected.bind(this),this.rowDeSelectedFunction=this.rowSelected.bind(this),this.parent.addEventListener(Xh,this.rowSelectedFunction),this.parent.addEventListener($h,this.rowDeSelectedFunction))}removeEventListener(){this.parent.isDestroyed||(Cm(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(Xh,this.rowSelectedFunction),this.parent.removeEventListener($h,this.rowDeSelectedFunction))}removeResponsiveSearch(e){const t=e.target,i=t.classList.contains("e-search-icon")||t.classList.contains("e-search-wrapper");this.parent.enableAdaptiveUI&&!i&&this.searchElement&&!ku(e.target,"e-res-toolbar")&&this.renderResponsiveSearch(!1)}rowSelected(){this.parent.enableAdaptiveUI&&this.refreshResponsiveToolbarItems(Od.isInitial)}getModuleName(){return"toolbar"}}},Tg={provide:"GridsEdit",useValue:qm},Mg={provide:"GridsCommandColumn",useValue:class{constructor(e,t){this.parent=e,this.locator=t,this.initiateRender(),this.addEventListener()}initiateRender(){this.locator.getService("cellRendererFactory").addCellRenderer(kd.CommandColumn,new jm(this.parent,this.locator))}commandClickHandler(e){const t=this.parent,i=Zt(e.target,"button");if(!i||!Zt(e.target,".e-unboundcell"))return;const s=i.ej2_instances[0],n=s.commandType,o=i.getAttribute("data-uid");let r;const l=t.getRowObjectFromUID(Zt(i,".e-row").getAttribute("data-uid")),a=this.parent.columnModel;for(let c=0;c<a.length;c++)if(a[c].commands){const e=a[c].commands;for(let t=0;t<e.length;t++){const s="type";if(e[t].uid===o&&e[t][s]===n)r=e[t];else{const t=[].slice.call(Zt(i,".e-unboundcell").querySelectorAll("button")).findIndex(e=>e===i);t>=0&&(r=e[t])}}}const h={cancel:!1,target:i,commandColumn:r,rowData:qe(l)?void 0:l.data};this.parent.trigger("commandClick",h,e=>{if(!s.disabled&&t.editModule&&!e.cancel)switch(n){case"Edit":t.editModule.endEdit(),t.editModule.startEdit(Zt(i,"tr"));break;case"Cancel":t.editModule.closeEdit();break;case"Save":t.editModule.endEdit();break;case"Delete":"Batch"!==t.editSettings.mode&&t.editModule.endEdit(),t.commandDelIndex=parseInt(Zt(i,"tr").getAttribute(ip),10),t.clearSelection(),t.selectRow(t.commandDelIndex,!1),t.editModule.deleteRecord(),t.commandDelIndex=void 0}})}getModuleName(){return"commandColumn"}destroy(){this.parent.isDestroyed||this.removeEventListener()}removeEventListener(){this.parent.isDestroyed||(this.parent.off(Mc,this.commandClickHandler),this.parent.off(Tc,this.keyPressHandler),this.parent.off(uc,this.load),this.parent.off(Ic,this.destroy))}addEventListener(){this.parent.isDestroyed||(this.parent.on(Mc,this.commandClickHandler,this),this.parent.on(Tc,this.keyPressHandler,this),this.parent.on(uc,this.load,this),this.parent.on(Ic,this.destroy,this))}keyPressHandler(e){"enter"===e.action&&Zt(e.target,".e-unboundcelldiv")&&(this.commandClickHandler(e),e.preventDefault())}load(){const e=this.parent.columnModel;for(let t=0;t<e.length;t++)if(e[t].commands){const i=e[t].commands;for(let e=0;e<i.length;e++)i[e].uid=Lu("gridcommand")}}}},Ig=["grid"];let kg=(()=>{class e{constructor(e,t,i,s){this._store=e,this._dataRiesgo=t,this._storeCR=i,this._dialogRef=s}ngOnInit(){this.selectOptions={persistSelection:!0},this.toolbar=[{text:"Agregar seleccionados",tooltipText:"Agregar seleccionados",prefixIcon:"add",id:"addSelected"},{text:"Cancelar",tooltipText:"Cerrar ventana",prefixIcon:"close",id:"close"}],this.pageSettings={pageSize:10},this._store.dispatch(d.q()),this.controlSubs=this._store.select("control").subscribe(e=>{this.inventarioData=e.inventario})}ngOnDestroy(){this.controlSubs&&this.controlSubs.unsubscribe(),this.controlRiesgoSubs&&this.controlRiesgoSubs.unsubscribe()}clickHandler(e){if("addSelected"===e.item.id){let e=this.grid.getSelectedRecords();e.length>0&&(e.forEach(e=>{this.controlSeleccionado=e,this.controlRiesgo={eventoId:this._dataRiesgo.riesgoId,inventarioId:this.controlSeleccionado.controlId,reduccion:0,reducirA:"",peso:0,suficienciaId:1},this._storeCR.dispatch(d.c({control:this.controlRiesgo}))}),this.controlRiesgoSubs=this._storeCR.select("controlRiesgo").subscribe(e=>{this.procesado=e.procesado,this.procesado&&this._dialogRef.close(!0)}))}"close"===e.item.id&&this._dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(g.h),m.Qb(a.a),m.Qb(g.h),m.Qb(a.h))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-check-list-controles"]],viewQuery:function(e,t){if(1&e&&m.Ic(Ig,1),2&e){let e;m.rc(e=m.ec())&&(t.grid=e.first)}},decls:10,vars:4,consts:[["allowPaging","true",3,"dataSource","pageSettings","selectionSettings","toolbar","toolbarClick"],["grid",""],["type","checkbox","width","50"],["field","controlId","isPrimaryKey","true","headerText","ID","width","60"],["field","nombre","headerText","Control","width","120"],["field","nombreAplicacion","headerText","Aplicaci\xf3n","width","90"],["field","nombrePeriodicidad","headerText","Periodicidad","format","C2","width","90"],["field","nombreResponsabilidad","headerText","Responsabilidad","width","90"],["field","nombreDocumentacion","headerText","Documentaci\xf3n","width","90"]],template:function(e,t){1&e&&(m.Wb(0,"ejs-grid",0,1),m.dc("toolbarClick",function(e){return t.clickHandler(e)}),m.Wb(2,"e-columns"),m.Rb(3,"e-column",2),m.Rb(4,"e-column",3),m.Rb(5,"e-column",4),m.Rb(6,"e-column",5),m.Rb(7,"e-column",6),m.Rb(8,"e-column",7),m.Rb(9,"e-column",8),m.Vb(),m.Vb()),2&e&&m.mc("dataSource",t.inventarioData)("pageSettings",t.pageSettings)("selectionSettings",t.selectOptions)("toolbar",t.toolbar)},directives:[xg,hg,gg,ag,mg],styles:[""]}),e})();var Fg=i("IbWt"),Ag=i("p+B5"),Og=i("xHqg"),Lg=i("Wp6s");function Pg(e,t){1&e&&m.Ec(0,"Seleccione el riesgo")}function zg(e,t){if(1&e&&(m.Wb(0,"mat-option",34),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.procesoId),m.Eb(1),m.Gc(" ",e.nombre," ")}}function Bg(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Seleccione un proceso"),m.Vb())}function Hg(e,t){if(1&e&&(m.Wb(0,"mat-option",34),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.procesoId),m.Eb(1),m.Gc(" ",e.nombre," ")}}function Ng(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Seleccione una actividad"),m.Vb())}function Vg(e,t){if(1&e&&(m.Wb(0,"mat-option",34),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.riesgoId),m.Eb(1),m.Gc(" ",e.nombre," ")}}function qg(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Seleccione un riesgo"),m.Vb())}function jg(e,t){1&e&&m.Ec(0,"Agrege uno o m\xe1s controles")}function Wg(e,t){1&e&&m.Ec(0,"Afectaci\xf3n")}function Gg(e,t){if(1&e&&(m.Wb(0,"mat-option",34),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.codigo),m.Eb(1),m.Gc(" ",e.valor," ")}}function _g(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Seleccione una opci\xf3n"),m.Vb())}function Ug(e,t){if(1&e&&(m.Wb(0,"mat-option",34),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.mc("value",e.codigo),m.Eb(1),m.Gc(" ",e.valor," ")}}function Kg(e,t){1&e&&(m.Wb(0,"mat-error"),m.Ec(1,"Seleccione una opci\xf3n"),m.Vb())}let Yg=(()=>{class e{constructor(e,t,i,s,n,o,r,l,a){this._formBuilder=e,this._procesosService=t,this._catalogoService=i,this._store=s,this._storeRiesgo=n,this._riesgoService=o,this._dialog=r,this._dialogRef=l,this._dataToUpdate=a}ngOnInit(){this.editSettings={allowEditing:!0,allowAdding:!1,allowDeleting:!0,mode:"Normal"},this.commands=[{type:"Edit",buttonOption:{cssClass:"e-flat",iconCss:"e-edit e-icons"}},{type:"Delete",buttonOption:{cssClass:"e-flat",iconCss:"e-delete e-icons"}},{type:"Save",buttonOption:{cssClass:"e-flat",iconCss:"e-update e-icons"}},{type:"Cancel",buttonOption:{cssClass:"e-flat",iconCss:"e-cancel-icon e-icons"}}],this.cargaCatalogos(),this._dataToUpdate?(this._procesosService.getProceosHijos(this._dataToUpdate.control.subprocesoId).subscribe(e=>this.dataActividades=e),this._riesgoService.getRiesgosActividad(this._dataToUpdate.control.actividadId).subscribe(e=>this.dataRiesgo=e),this.cargaRiesgoSeleccionado(this._dataToUpdate.control.riesgoId),this.afectacionSeleccionada=this._dataToUpdate.control.reducirA,this.suficienciaSeleccionada=this._dataToUpdate.control.suficienciaId,this.riesgoFormGroup=this._formBuilder.group({proceso:[this._dataToUpdate.control.subprocesoId,p.p.required],actividad:[this._dataToUpdate.control.actividadId,p.p.required],riesgo:[this._dataToUpdate.control.riesgoId,p.p.required]}),this.afectacionFormGroup=this._formBuilder.group({afectacion:[this.afectacionSeleccionada,p.p.required],suficiencia:[this.suficienciaSeleccionada.toString(),p.p.required]})):(this.riesgoFormGroup=this._formBuilder.group({proceso:["",p.p.required],actividad:["",p.p.required],riesgo:["",p.p.required]}),this.afectacionFormGroup=this._formBuilder.group({afectacion:["",p.p.required],suficiencia:["",p.p.required]}))}ngOnDestroy(){this.controlSubs&&this.controlSubs.unsubscribe(),this.riesgoSubs&&this.riesgoSubs.unsubscribe()}cargaCatalogos(){this._procesosService.getInventarioPorNivel(4).subscribe(e=>this.dataProcesos=e),this._catalogoService.getCatalogoItems(13).subscribe(e=>this.suficienciaData=e),this._catalogoService.getCatalogoItems(14).subscribe(e=>this.afectacionData=e)}cargaControlRiesgo(){this._store.dispatch(d.p({riesgoId:this.riesgoSeleccionado.riesgoId})),this.controlSubs=this._store.select("controlRiesgo").subscribe(e=>{this.controlRiesgoData=JSON.parse(JSON.stringify(e.controlRiesgo)),setTimeout(()=>{var t;this.tieneControles=(null===(t=e.controlRiesgo)||void 0===t?void 0:t.length)>0},500)})}cmbProcesoChange(e){this._procesosService.getProceosHijos(e).subscribe(e=>this.dataActividades=e)}cmbActividadChange(e){this._riesgoService.getRiesgosActividad(e).subscribe(e=>this.dataRiesgo=e)}cargaRiesgoSeleccionado(e){this._storeRiesgo.dispatch(d.A({riesgoId:e})),this.riesgoSubs=this._storeRiesgo.select("riesgo").subscribe(e=>{this.riesgoSeleccionado=e.unRiesgo}),setTimeout(()=>{this.cargaControlRiesgo()},500)}cmbRiesgoChange(e){this.cargaRiesgoSeleccionado(e.value)}dialogInventario(){const e=new a.e;e.disableClose=!1,e.width="70%",e.data={riesgoId:this.riesgoSeleccionado.riesgoId},this._dialog.open(kg,e).afterClosed().subscribe(e=>{console.log(e),e&&this.cargaControlRiesgo()})}actionBegin(e){"beginEdit"!==e.requestType&&"add"!==e.requestType||(this.controlRiesgoEditado=Object.assign({},e.rowData)),"save"===e.requestType&&(this.controlRiesgoEditado=Object.assign({},e.data),this._store.dispatch(d.n({control:this.controlRiesgoEditado})),setTimeout(()=>{this.cargaControlRiesgo()},100)),"delete"===e.requestType&&this._store.dispatch(d.g({controlId:e.data[0].controlEventoId}))}cmbAfectacionChange(e){console.log(e),this.afectacionSeleccionada=e}cmbSuficienciaChange(e){console.log(e),this.suficienciaSeleccionada=e}calculoResidual(){this.controlRiesgo={eventoId:this.riesgoSeleccionado.riesgoId,reducirA:this.afectacionSeleccionada.toString(),suficienciaId:this.suficienciaSeleccionada},console.log(this.controlRiesgo),this._store.dispatch(d.e({control:this.controlRiesgo}))}finalizar(){this._dialogRef.close(!0)}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(p.d),m.Qb(Fg.a),m.Qb(f.a),m.Qb(g.h),m.Qb(g.h),m.Qb(Ag.a),m.Qb(a.b),m.Qb(a.h),m.Qb(a.a))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-crear-vinculacion"]],features:[m.Db([Mg,Tg])],decls:98,vars:26,consts:[["linear",""],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"col-sm-12","col-md-6"],[1,"inputForm","celdaIndiviual"],["formControlName","proceso","required","",3,"valueChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formControlName","actividad","required","",3,"valueChange"],[1,"col-sm-12","col-md-12"],[1,"inputForm","celdaCombinada"],["formControlName","riesgo","required","",3,"selectionChange"],["mat-raised-button","","matStepperNext","","color","primary",3,"disabled"],[1,"tituloRiesgo"],[1,"controlSection"],["mat-raised-button","","color","warn",3,"click"],[2,"clear","right"],[3,"dataSource","editSettings","actionBegin"],["field","controlEventoId","headerText","ID","isPrimaryKey","true","width","60",3,"visible"],["field","nombreControl","headerText","Control","width","150"],["field","peso","headerText","Peso","textAlign","Right","format","n","width","70"],["headerText"," ","width","50",3,"commands"],[1,"col-sm-12"],["mat-raised-button","","color","primary","matStepperPrevious",""],["mat-raised-button","","color","primary","matStepperNext","",3,"disabled"],[1,"col-sm-12","col-md-3","col-md-offset-2","cardRI"],[1,"col-sm-12","col-md-3","col-md-offset-2","cardRR"],["formControlName","afectacion","required","",3,"valueChange"],["formControlName","suficiencia","required","",3,"valueChange"],[1,"col-sm-12","col-md-6",2,"padding-bottom","15px"],["mat-raised-button","","color","primary","matStepperPrevious","",2,"padding-right","5px"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(m.Wb(0,"mat-horizontal-stepper",0,1),m.Wb(2,"mat-step",2),m.Wb(3,"form",3),m.Cc(4,Pg,1,0,"ng-template",4),m.Wb(5,"div",5),m.Wb(6,"mat-form-field",6),m.Wb(7,"mat-label"),m.Ec(8,"Proceso"),m.Vb(),m.Wb(9,"mat-select",7),m.dc("valueChange",function(e){return t.cmbProcesoChange(e)}),m.Cc(10,zg,2,2,"mat-option",8),m.Vb(),m.Cc(11,Bg,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(12,"div",5),m.Wb(13,"mat-form-field",6),m.Wb(14,"mat-label"),m.Ec(15,"Actividad"),m.Vb(),m.Wb(16,"mat-select",10),m.dc("valueChange",function(e){return t.cmbActividadChange(e)}),m.Cc(17,Hg,2,2,"mat-option",8),m.Vb(),m.Cc(18,Ng,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(19,"div",11),m.Wb(20,"mat-form-field",12),m.Wb(21,"mat-label"),m.Ec(22,"Riesgo"),m.Vb(),m.Wb(23,"mat-select",13),m.dc("selectionChange",function(e){return t.cmbRiesgoChange(e)}),m.Cc(24,Vg,2,2,"mat-option",8),m.Vb(),m.Cc(25,qg,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(26,"div"),m.Wb(27,"button",14),m.Ec(28,"Siguiente "),m.Wb(29,"mat-icon"),m.Ec(30,"fast_forward"),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(31,"mat-step"),m.Cc(32,jg,1,0,"ng-template",4),m.Wb(33,"p",15),m.Ec(34),m.Vb(),m.Wb(35,"div",16),m.Wb(36,"button",17),m.dc("click",function(){return t.dialogInventario()}),m.Wb(37,"mat-icon"),m.Ec(38,"list"),m.Vb(),m.Ec(39," Inventario de controles"),m.Vb(),m.Rb(40,"div",18),m.Wb(41,"ejs-grid",19),m.dc("actionBegin",function(e){return t.actionBegin(e)}),m.Wb(42,"e-columns"),m.Rb(43,"e-column",20),m.Rb(44,"e-column",21),m.Rb(45,"e-column",22),m.Rb(46,"e-column",23),m.Vb(),m.Vb(),m.Vb(),m.Wb(47,"div",24),m.Wb(48,"button",25),m.Wb(49,"mat-icon"),m.Ec(50,"fast_rewind"),m.Vb(),m.Ec(51,"Atr\xe1s"),m.Vb(),m.Wb(52,"button",26),m.Ec(53,"Siguiente"),m.Wb(54,"mat-icon"),m.Ec(55,"fast_forward"),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Wb(56,"mat-step",2),m.Wb(57,"form",3),m.Cc(58,Wg,1,0,"ng-template",4),m.Wb(59,"div"),m.Wb(60,"mat-card",27),m.Wb(61,"mat-card-subtitle"),m.Ec(62,"Riesgo Inherente"),m.Vb(),m.Wb(63,"mat-card-subtitle"),m.Ec(64),m.Vb(),m.Vb(),m.Wb(65,"mat-card",28),m.Wb(66,"mat-card-subtitle"),m.Ec(67,"Riesgo Residual"),m.Vb(),m.Wb(68,"mat-card-subtitle"),m.Ec(69),m.Vb(),m.Vb(),m.Vb(),m.Wb(70,"div",5),m.Wb(71,"mat-form-field",6),m.Wb(72,"mat-label"),m.Ec(73,"Afectaci\xf3n"),m.Vb(),m.Wb(74,"mat-select",29),m.dc("valueChange",function(e){return t.cmbAfectacionChange(e)}),m.Cc(75,Gg,2,2,"mat-option",8),m.Vb(),m.Cc(76,_g,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(77,"div",5),m.Wb(78,"mat-form-field",6),m.Wb(79,"mat-label"),m.Ec(80,"Suficiencia"),m.Vb(),m.Wb(81,"mat-select",30),m.dc("valueChange",function(e){return t.cmbSuficienciaChange(e)}),m.Cc(82,Ug,2,2,"mat-option",8),m.Vb(),m.Cc(83,Kg,2,0,"mat-error",9),m.Vb(),m.Vb(),m.Wb(84,"div",31),m.Wb(85,"button",17),m.dc("click",function(){return t.calculoResidual()}),m.Wb(86,"mat-icon"),m.Ec(87,"refresh"),m.Vb(),m.Ec(88," Calcular"),m.Vb(),m.Vb(),m.Wb(89,"div",24),m.Wb(90,"button",32),m.Wb(91,"mat-icon"),m.Ec(92,"fast_rewind"),m.Vb(),m.Ec(93," Atr\xe1s"),m.Vb(),m.Wb(94,"button",33),m.dc("click",function(){return t.finalizar()}),m.Wb(95,"mat-icon"),m.Ec(96,"done"),m.Vb(),m.Ec(97," Finalizar"),m.Vb(),m.Vb(),m.Vb(),m.Vb(),m.Vb()),2&e&&(m.Eb(2),m.mc("stepControl",t.riesgoFormGroup),m.Eb(1),m.mc("formGroup",t.riesgoFormGroup),m.Eb(7),m.mc("ngForOf",t.dataProcesos),m.Eb(1),m.mc("ngIf",null==t.riesgoFormGroup.get("proceso").errors?null:t.riesgoFormGroup.get("proceso").errors.required),m.Eb(6),m.mc("ngForOf",t.dataActividades),m.Eb(1),m.mc("ngIf",null==t.riesgoFormGroup.get("actividad").errors?null:t.riesgoFormGroup.get("actividad").errors.required),m.Eb(6),m.mc("ngForOf",t.dataRiesgo),m.Eb(1),m.mc("ngIf",null==t.riesgoFormGroup.get("riesgo").errors?null:t.riesgoFormGroup.get("riesgo").errors.required),m.Eb(2),m.mc("disabled",!t.riesgoFormGroup.valid),m.Eb(7),m.Gc("Riesgo: ",null==t.riesgoSeleccionado?null:t.riesgoSeleccionado.nombre,""),m.Eb(7),m.mc("dataSource",t.controlRiesgoData)("editSettings",t.editSettings),m.Eb(2),m.mc("visible",!1),m.Eb(3),m.mc("commands",t.commands),m.Eb(6),m.mc("disabled",!t.tieneControles),m.Eb(4),m.mc("stepControl",t.riesgoFormGroup),m.Eb(1),m.mc("formGroup",t.afectacionFormGroup),m.Eb(7),m.Hc("",null==t.riesgoSeleccionado?null:t.riesgoSeleccionado.nombreRI,": ",null==t.riesgoSeleccionado?null:t.riesgoSeleccionado.riesgoInherente,""),m.Eb(5),m.Hc("",null==t.riesgoSeleccionado?null:t.riesgoSeleccionado.nombreRR,": ",null===(null==t.riesgoSeleccionado?null:t.riesgoSeleccionado.riesgoResidual)?null==t.riesgoSeleccionado?null:t.riesgoSeleccionado.riesgoInherente:null==t.riesgoSeleccionado?null:t.riesgoSeleccionado.riesgoResidual,""),m.Eb(6),m.mc("ngForOf",t.afectacionData),m.Eb(1),m.mc("ngIf",null==t.afectacionFormGroup.get("afectacion").errors?null:t.afectacionFormGroup.get("afectacion").errors.required),m.Eb(6),m.mc("ngForOf",t.suficienciaData),m.Eb(1),m.mc("ngIf",null==t.afectacionFormGroup.get("suficiencia").errors?null:t.afectacionFormGroup.get("suficiencia").errors.required),m.Eb(11),m.mc("disabled",!t.afectacionFormGroup.valid))},directives:[Og.a,Og.b,p.q,p.l,p.f,Og.c,b.c,b.g,v.a,p.k,p.e,p.o,s.j,s.k,C.a,Og.e,w.a,xg,hg,gg,ag,mg,Og.f,Lg.a,Lg.c,S.k,b.b],styles:[".mat-stepper-horizontal[_ngcontent-%COMP%]{margin-top:8px}.mat-form-field[_ngcontent-%COMP%]{margin-top:16px}.celdaIndiviual[_ngcontent-%COMP%]{width:80%}.celdaCombinada[_ngcontent-%COMP%]{width:90%}.tituloRiesgo[_ngcontent-%COMP%]{font-size:medium}.cardRI[_ngcontent-%COMP%]{background-color:#f5271699}.cardRI[_ngcontent-%COMP%], .cardRR[_ngcontent-%COMP%]{text-align:center;font-weight:700}.cardRR[_ngcontent-%COMP%]{background-color:#57be0699}.controlSection[_ngcontent-%COMP%]{padding-bottom:20px}"]}),e})();function Xg(e,t){1&e&&(m.Wb(0,"th",18),m.Ec(1," Riesgo "),m.Vb())}function Qg(e,t){if(1&e&&(m.Wb(0,"td",19),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.nombre," ")}}function $g(e,t){1&e&&(m.Wb(0,"th",18),m.Ec(1," Riesgo inherente "),m.Vb())}function Jg(e,t){if(1&e&&(m.Wb(0,"td",19),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.riesgoInherente," ")}}function Zg(e,t){1&e&&(m.Wb(0,"th",18),m.Ec(1," Riesgo residual"),m.Vb())}function ef(e,t){if(1&e&&(m.Wb(0,"td",19),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.riesgoResidual," ")}}function tf(e,t){1&e&&(m.Wb(0,"th",18),m.Ec(1," Total controles"),m.Vb())}function sf(e,t){if(1&e&&(m.Wb(0,"td",19),m.Ec(1),m.Vb()),2&e){const e=t.$implicit;m.Eb(1),m.Gc(" ",e.totalControles," ")}}function nf(e,t){1&e&&m.Rb(0,"th",18)}function of(e,t){if(1&e){const e=m.Xb();m.Wb(0,"td",20),m.Wb(1,"a",21),m.dc("click",function(){m.vc(e);const i=t.$implicit;return m.hc().dialogEdit(i)}),m.Wb(2,"mat-icon"),m.Ec(3,"edit"),m.Vb(),m.Vb(),m.Wb(4,"a",22),m.dc("click",function(){m.vc(e);const i=t.$implicit;return m.hc().eliminar(i.riesgoId)}),m.Wb(5,"mat-icon"),m.Ec(6,"delete"),m.Vb(),m.Vb(),m.Vb()}}function rf(e,t){1&e&&m.Rb(0,"tr",23)}function lf(e,t){1&e&&m.Rb(0,"tr",24)}const af=function(){return[5,10,25,100]},hf=[{path:"",children:[{path:"inventario",component:Q},{path:"parametros",component:Ae},{path:"vinculacion",component:(()=>{class e{constructor(e,t){this._dialog=e,this._store=t,this.dataSource=new o.o,this.displayedColumns=["nombre","riesgoInherente","riesgoResidual","totalControles","acciones"]}ngOnDestroy(){this.controlSubs&&this.controlSubs.unsubscribe()}cargaVinculados(){this._store.dispatch(d.r()),this.controlSubs=this._store.select("controlRiesgo").subscribe(e=>this.dataSource.data=e.controlesVinculados)}ngOnInit(){this.cargaVinculados()}applyFilter(e){var t;(null===(t=this.dataSource.data)||void 0===t?void 0:t.length)>0&&(this.dataSource.filter=e.target.value.trim().toLowerCase())}dialogNew(){const e=new a.e;e.disableClose=!1,e.width="70%",this._dialog.open(Yg,e).afterClosed().subscribe(e=>{e&&this.cargaVinculados()})}dialogEdit(e){const t=new a.e;t.disableClose=!1,t.width="70%",t.data={control:e},this._dialog.open(Yg,t).afterClosed().subscribe(e=>{e&&this.cargaVinculados()})}eliminar(e){c.a.fire({title:"Esta seguro que desea eliminar el registro?",icon:"warning",showDenyButton:!0,showCancelButton:!0,showConfirmButton:!1,denyButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.isDenied&&this._store.dispatch(d.h({riesgoId:e}))})}}return e.\u0275fac=function(t){return new(t||e)(m.Qb(a.b),m.Qb(g.h))},e.\u0275cmp=m.Kb({type:e,selectors:[["app-vinculacion"]],viewQuery:function(e,t){if(1&e&&(m.Ic(r.a,1),m.Ic(l.a,1)),2&e){let e;m.rc(e=m.ec())&&(t.paginator=e.first),m.rc(e=m.ec())&&(t.sort=e.first)}},decls:30,vars:5,consts:[[1,"search-div"],["mat-raised-button","","matTooltip","Crear nuevo registro","color","primary",1,"btn-add",3,"click"],[1,"search-form-field"],["matInput","","placeholder","Buscar",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","riesgoInherente"],["matColumnDef","riesgoResidual"],["matColumnDef","totalControles"],["matColumnDef","acciones"],["mat-cell","","style","text-align: right;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","10","aria-label","Select page of perfils",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",2,"text-align","right"],["matTooltip","Editar",1,"pointer",2,"color","#1f5164",3,"click"],["matTooltip","Eliminar",1,"pointer",2,"color","#e15634",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(m.Wb(0,"div",0),m.Wb(1,"button",1),m.dc("click",function(){return t.dialogNew()}),m.Wb(2,"mat-icon"),m.Ec(3,"add"),m.Vb(),m.Ec(4,"Crear "),m.Vb(),m.Wb(5,"mat-form-field",2),m.Wb(6,"mat-label"),m.Ec(7,"Filter"),m.Vb(),m.Wb(8,"input",3,4),m.dc("keyup",function(e){return t.applyFilter(e)}),m.Vb(),m.Vb(),m.Vb(),m.Wb(10,"div",5),m.Wb(11,"table",6),m.Ub(12,7),m.Cc(13,Xg,2,0,"th",8),m.Cc(14,Qg,2,1,"td",9),m.Tb(),m.Ub(15,10),m.Cc(16,$g,2,0,"th",8),m.Cc(17,Jg,2,1,"td",9),m.Tb(),m.Ub(18,11),m.Cc(19,Zg,2,0,"th",8),m.Cc(20,ef,2,1,"td",9),m.Tb(),m.Ub(21,12),m.Cc(22,tf,2,0,"th",8),m.Cc(23,sf,2,1,"td",9),m.Tb(),m.Ub(24,13),m.Cc(25,nf,1,0,"th",8),m.Cc(26,of,7,0,"td",14),m.Tb(),m.Cc(27,rf,1,0,"tr",15),m.Cc(28,lf,1,0,"tr",16),m.Vb(),m.Rb(29,"mat-paginator",17),m.Vb()),2&e&&(m.Eb(11),m.mc("dataSource",t.dataSource),m.Eb(16),m.mc("matHeaderRowDef",t.displayedColumns),m.Eb(1),m.mc("matRowDefColumns",t.displayedColumns),m.Eb(1),m.mc("pageSizeOptions",m.oc(4,af)))},directives:[C.a,L.a,w.a,b.c,b.g,y.b,o.n,l.a,o.c,o.i,o.b,o.k,o.m,r.a,o.h,o.a,o.j,o.l],styles:["table[_ngcontent-%COMP%]{width:100%}.pointer[_ngcontent-%COMP%]{cursor:pointer}.search-div[_ngcontent-%COMP%]{margin:10px}.search-form-field[_ngcontent-%COMP%]{width:85%;margin-left:10px}"]}),e})()},{path:"**",redirectTo:"inventario"}]}];let cf=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Ob({type:e}),e.\u0275inj=m.Nb({imports:[[n.e.forChild(hf)],n.e]}),e})();var df=i("7Mg6"),pf=i("fa8z"),uf=i("U3D8"),mf=i("Af5F");let gf=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Ob({type:e}),e.\u0275inj=m.Nb({providers:[Dg],imports:[[s.c,g.j.forFeature("catalogo",df.a),g.j.forFeature("control",pf.a),g.j.forFeature("controlRiesgo",uf.a),g.j.forFeature("riesgo",mf.a),cf,p.n,ne.c,v.b,w.b,C.b,y.c,o.p,L.b,b.e,r.b,l.c,a.g,Og.d,Lg.b,Rg]]}),e})()}}]);